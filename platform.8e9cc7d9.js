(self.webpackChunk=self.webpackChunk||[]).push([[7745,637,9657,2758],{5017:(e,a,s)=>{var i={"./ar_AE.json":[20268,268],"./en_US.json":[61430,1430],"./es_LA.json":[91057,1057],"./fa_IR.json":[51359,1359],"./fr_FR.json":[6,6],"./hi_IN.json":[30694,694],"./id_ID.json":[16292,6292],"./ja_JP.json":[65596,5596],"./ko_KR.json":[50034,34],"./ms_MY.json":[30739,739],"./pt_BR.json":[84434,4434],"./ru_RU.json":[65663,5663],"./th_TH.json":[22858,2858],"./tr_TR.json":[90204,204],"./vi_VN.json":[84651,4651]};function r(e){if(!s.o(i,e))return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=i[e],r=a[0];return s.e(a[1]).then((()=>s.t(r,19)))}r.keys=()=>Object.keys(i),r.id=5017,e.exports=r},35100:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={logo:"BmehJYqY",link:"ZDiAzb7L"}},17056:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={wrapper:"vgGglvpW",host:"tIG_TS9F",host_size_viewport:"e6I40rfd",host_has_arrowTop:"g_irwn6a",host_has_arrowRight:"wpGNTSrX",host_has_arrowBottom:"U0_3izcj",host_has_arrowLeft:"Pgyn0O42",host_transition_enter:"Q1ePZ2xJ",host_transition_enterActive:"tGnGJaNo",host_transition_exit:"ZaYwfPjL",host_transition_exitActive:"Z_ZyqLON",content:"UkiaCOiO",host_size_content:"x_f_416O",text:"aPgcjNBX",closeButton:"AYckRR2t",arrow:"FwTes2tD"}},86559:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"YWa51vFy",visible:"I0U_K6da",hidden:"pYwhh3Ih"}},99265:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"xqfTnwlk",icon:"IG5diBwd",title:"bSr3a1lT",subtitle:"iUaoSJwt"}},66804:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={modal:"qEopgTzd",carousel:"K42Vz8ys",image:"isbnfoOc"}},82322:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={container:"x4cFFoVT",stub:"Zsb7dqfO",show:"IiGEmoe3",children:"QtHod_YA"}},57431:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={container:"ghZc2gX8",container__visibled:"p0dRqHdP",container__disconnected:"XZpjrVWI",container__connected:"lIRrzHLP",text:"PYSf9bIe"}},98341:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={stub:"maoJtQEW",header:"adjMU4HA",buttonIcon:"zuBNELRd",content:"kMFoYR94",contentIcon:"VBIFZBuH",note:"TUneyWh_"}},22851:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"S2afV8xX",blink:"ZtTrjDKk",icon:"uVyOcEjx",viewed:"bB9bS3kx"}},78676:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={removeText:"TexUolEn",plusIcon:"m4luIPKu",more:"Luq6fgKI"}},41309:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"PNof4XYp",button:"PokjTbXy"}},3605:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"LeVtBqSF",scrollContent:"EwFFgaNz",scrollContainer_hasBackButton:"zOZuYF5_",scrollWrapper_hasBackButton:"jacfL_K0",host_has_sentiment:"ZKnHdmtc",groupContainer:"cSXDK02B"}},63477:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"wwNHe1Gq",next:"PrLAB1AG"}},41620:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"YbJKrvkC"}},64750:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"zDrfTkvI",item:"j29kk3EY",highlighted:"pIZ6ZSZU",highlight:"MTbTxdzn",wrapper:"ZQhR7EC5",modalButton:"fa1Rg5RH",modalButtons:"fQiNwxbI"}},41485:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"N2RyQzFA",container:"jBQA_v8d",content:"Ois_fpXJ",footer:"LlX80hFE"}},24892:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"TkinrW_0",KEJDzdbGP:"vvNrAFsd",sqSJzUbQ:"AIRGNjLP",YfMlWhAS:"XLvLq5zH"}},30237:()=>{},38197:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={assetIcon:"Xr_0xTsq"}},94096:()=>{},70182:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={gap:"uPix6ogO",button:"qub9Vzpk"}},60561:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={title:"GYvidK61"}},41400:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={text:"lKaT0lE1",textBlock:"DisEV_Wz"}},7242:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={preview:"DWvfhFez",image:"MT964Z0N",title:"jkaRuhye",text:"xkhgpxOO",textBlock:"kaeZ2mJj",infoBlock:"BSwBXi2T",infoIcons:"ydevbYjH",arrow:"yBjCncpw"}},77936:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"ShO_WOoy"}},16554:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={host:"Lz1Ay9Eu",host_readonly:"ZSZ9_1F7",host_active:"lC6ojzo6",badge:"Vzbhr6y4"}},40907:()=>{},69690:()=>{},71837:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={contentReplacement:"qRzD0uce"}},5914:()=>{},70163:()=>{},86568:()=>{},60638:()=>{},21713:()=>{},57579:()=>{},52769:()=>{},17700:()=>{},57764:()=>{},13023:()=>{},96137:()=>{},53806:()=>{},62652:()=>{},34939:()=>{},1454:()=>{},95104:()=>{},66731:()=>{},77712:()=>{},74241:()=>{},88114:(e,a,s)=>{"use strict";s.d(a,{N:()=>i});const i="oAuthService"},98434:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i="kycService"},67371:(e,a,s)=>{"use strict";s.d(a,{y:()=>g,i:()=>_});var i=s(29257),r=s(59312),n=s(28660),o=s(84829),l=s(80080),c=s(39900),d=s(26763),u=s(7265),m=s(98434),p=s(67076),h=s(30654);class Http{getKycState(){return(0,i.Z)((function*(){return(yield h.$.userValues([p.Xe.KYC_VERIFICATION])).kyc_verification}))()}}var v=s(62132);class WebSocket{onKycStateChange(e){v.W.subscribe.kycStateChanged(e)}}let g=class KycService extends c.yA{onStart(e){var a=this;return(0,i.Z)((function*(){const s=e.kyc,i=yield(0,l.$)(u.EA,"user");return i&&i.subscribe((0,o.Z)((()=>{a.handleChangeState()}),500)),a.load(s&&s.user_id?s:void 0)}))()}constructor(){super(new Http,new WebSocket)}};function _(e){return e(new g,{config:g.binderConfig})}(0,r.gn)([(0,n.onStart)(d.APP_SERVICE)],g.prototype,"onStart",null),g=(0,r.gn)([(0,n.bindAs)(m.Z)],g)},40846:(e,a,s)=>{"use strict";s.d(a,{EX:()=>c,H1:()=>o,Mm:()=>u,U1:()=>m,Vg:()=>d,Zx:()=>l,uW:()=>p,x0:()=>h});var i=s(37323),r=s(52338),n=s(18985);const o="panelService",l="entProfileService",c={PROFILE:"profile",ACCOUNT:"account"},d={NOTIFICATION_SETTINGS:"profile_settings/push-settings",NOTIFICATION_BENEFITS:"profile_settings/push-settings/benefits"},u=(0,i.Z)({SETTINGS:"profile_settings",PERSONAL:"profile_settings/personal",EDIT_NAME:"profile_settings/edit_name",EDIT_EMAIL:"profile_settings/edit_email",EDIT_PHONE:"profile_settings/edit_phone",CHANGE_PASSWORD:"profile_settings/change_password",KYC_VERIFICATION_REQUEST:"profile_settings/verification_request",PRIVACY:"profile_settings/privacy"},r.YW,d),m={ACCOUNT:"account",SELECT_CURRENCY:"select_currency",RENAME_CURRENCY:"rename_currency",ARCHIVE_ACCOUNT_CONFIRM:"archive_account_confirm",ARCHIVE_ACCOUNT_SUCCESS:"archive_account_success"},p=(0,i.Z)({MAIN:"profile",TASKS:"tasks",TRADERS_WAY:"traders_way",STATUSES:"statuses",STATUS_BENEFITS:"status_benefits",ACHIEVEMENTS:"achievements",REFERRALS:"referrals",REFERRALS_LOOTBOX:"referrals_lootbox",REFERRALS_TERMS:"referrals_terms",NOTIFICATION_CENTER:"notification_center",TRADING_SETTINGS:"trading_settings",APPEARANCE_SETTINGS:"appearance_settings"},u,m,{COPY_TRADING:"privacy/copy-trading"}),h=(0,n.vU)({trading_settings:{id:"opi_tag_trading",defaultMessage:"Trading"},appearance_settings:{id:"appearance",defaultMessage:"Appearance"}})},81971:(e,a,s)=>{"use strict";s.d(a,{t5:()=>n,zt:()=>l});var i=s(27378),r=s(28660);const n=i.createContext(void 0),o=i.createContext(void 0),l=(0,r.createProvider)(n,o)},5915:(e,a,s)=>{"use strict";s.r(a),s.d(a,{LayoutModalScaleToTargetAnimation:()=>c.e1,default:()=>u});var i=s(27378),r=s(31542),n=s(31906),o=s(45797),l=s(34660),c=s(86321);let d=class LayoutModal extends i.Component{componentDidMount(){document.addEventListener("keydown",this.onKeyPress,{capture:!0})}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyPress,{capture:!0})}render(){const e=this.props,a=e.content,s=e.direction,l=e.animationOnClose,d=e.theme,u=document.body;return u?(0,r.createPortal)(i.createElement(n.zt,{value:o.NW.getInstance()},i.createElement(c.l9,{onClose:this.handleClose,content:a,animationOnClose:l,dir:s,"data-theme":d})),u):null}constructor(...e){super(...e),this.handleClose=()=>{const e=this.props,a=e.noticeId;e.api.closeNotice(a)},this.onKeyPress=e=>{("code"in e&&e.code===LayoutModal.KEYBOARD_KEYS.ESC_CODE||e.keyCode===LayoutModal.KEYBOARD_KEYS.ESC_KEY)&&(this.handleClose(),e.stopPropagation())}}};d.KEYBOARD_KEYS={ESC_KEY:27,ESC_CODE:"Escape"};const u=(0,l.I)(d)},19447:(e,a,s)=>{"use strict";s.d(a,{N8:()=>y,ZP:()=>C});var i=s(37323),r=s(27378),n=s(50649),o=s(46124),l=s(84584),c=s(2050),d=s(13207),u=s(86321),m=s(67371),p=s(12484),h=s(27634),v=s(54172),g=s(30681),_=s(68674),f=s(40846);const E=e=>{let a=e.className;const s=(0,o.k)(h.VJ,0);return s>0?r.createElement(u.uZ.Notification,{text:s,className:a}):null},S=e=>{let a=e.className;const s=(0,d.es)({noticeName:d.LO.PROFILE});return s?r.createElement(u.uZ.Notification,{text:"!",type:s,className:a}):r.createElement(E,{className:a})},y=(0,l.Z)(),b=(0,n.observer)((e=>{let a=e.entProfileService,s=e.panelService,i=e.className;const n=(0,c.x)(y,{props:{className:""}}),o=r.useCallback((()=>{s.openByScopeId(f.EX.PROFILE)}),[s]),l=r.useCallback((e=>{let a=e.className;return r.createElement(S,{className:a})}),[]);return r.createElement(p.SV,{code:"KHvGLdcU"},r.createElement(u.uZ,{avatar:a.avatar,className:i,leftBlock:n,notificationsBlock:l,handleClick:o}))})),C=(0,v.zt)(b,{helper:(e,a)=>(0,i.Z)({},e,a),services:[_.G,m.y,g.K]})},30729:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>P,rootPanelBannerSlot:()=>I,rootPanelFeaturesSlot:()=>O});var i=s(37323),r=s(59312),n=s(27378),o=s(50649),l=s(93134),c=s(13207),d=s(17302),u=s(21182),m=s(84584),p=s(23735),h=s(59343),v=s(86321),g=s(83920),_=s(87561),f=s(53323),E=s(27634),S=s(54172),y=s(68674),b=s(30681),C=s(40846),T=s(3121),A=s(72124);const k=(0,u.W)(E.Es),w=(0,u.W)(E.BO),N=()=>{const e=(0,h.V)();return n.createElement(l.f6,{dir:e?"rtl":"ltr"},n.createElement(d.xu,{padding:[0,0,"m",0]},n.createElement(c.jL,{noticeName:c.LO.PROFILE})))},R=e=>{let a=e.onClick,s=e.onClose;const i=(e=>{const a=window.location,s=a.href,i=a.search,r=(0,T.Z)(n.useState(!1),2),o=r[0],l=r[1];return n.useEffect((()=>{void 0!==(0,A.parseUrl)(i).query[e]&&l(!0),window.history.replaceState({},document.title,s.substring(0,s.indexOf("?")))}),[s,i,e]),o})("illuminated");return n.createElement(v.tE.Widget,null,n.createElement(k,{props:{isIlluminated:i,onClick:a,onClose:s}}))},I=(0,m.Z)(),D=(0,u.W)(I),O=(0,m.Z)(),L=(0,u.W)(O);let M=class Root extends n.Component{render(){const e=this,a=e.ref,s=e.handleSlotClick,i=e.props,r=i.timeService,o=i.noticeService,l=i.entProfileService,c=i.className;return n.createElement(v.tE,{className:c,header:()=>n.createElement(v.tE.Group,null,n.createElement(v.tE.Block,null,(e=>{let a=e.className;return n.createElement(v.z5,{id:l.id,fullName:l.fullName,avatarUrl:l.avatar.small,className:a,onIdClick:this.handleIdClick})}))),body:()=>n.createElement(n.Fragment,null,n.createElement(R,{onClick:s,onClose:this.handleSlotClose}),n.createElement(N,null),n.createElement(D,{props:{noticeService:o}}),n.createElement(L,{props:{tradersWayPanelId:C.uW.TRADERS_WAY,handleSlotClick:s,noticeService:o,timeService:r,ref:a}}),n.createElement(v.tE.Group,{direction:"horizontal"},n.createElement(w,{props:{onClick:this.handleSlotClick}}))),footer:()=>n.createElement(v.tE.Group,null,n.createElement(v.tE.Block,null,(()=>n.createElement(v.qc,{onClick:this.handleSettingsClick}))))})}constructor(e){super(e),this.ref=n.createRef(),this.handleIdClick=()=>{(0,p.L)({event:"uaGtmEvents_clicks",eventCategory:"profile",eventAction:"copy_id",eventLabel:"copy_id"})},this.handleSlotClick=e=>{this.props.panelService.openById(e)},this.handleSlotClose=()=>{this.props.panelService.close()},this.handleSettingsClick=()=>{(0,p.L)({event:"uaGtmEvents_clicks",eventCategory:"profile",eventAction:"open",eventLabel:"profile_settings"}),this.handleSlotClick(C.uW.SETTINGS)}}};M=(0,r.gn)([o.observer],M);const P=(0,S.zt)(M,{helper:(e,a)=>(0,i.Z)({},e,a),services:[g.f,_.OY,f.L$,b.K,y.G]})},30681:(e,a,s)=>{"use strict";s.d(a,{K:()=>l});var i=s(59312),r=s(28660),n=s(74199),o=s(40846);let l=class PanelService extends n.Ku{openById(e,a){return super.openById(e,a)}close(){return super.close()}reset(){return super.reset()}openByItem(e,a){return super.openByItem(e,a)}};l=(0,i.gn)([(0,r.bindAs)(o.H1)],l)},37280:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(62132);class WebSocket{onDataChange(e){this.disposers.push(i.W.subscribe.userChanged((a=>{a.forEach(e)})))}subscribe(){}unsubscribe(){this.disposers.forEach((e=>e()))}constructor(){this.disposers=[]}}},68674:(e,a,s)=>{"use strict";s.d(a,{G:()=>T});var i=s(29257),r=s(59312),n=s(28660),o=s(26763),l=s(86321),c=s(40846),d=s(37323),u=s(64356),m=s(13017),p=s(42230),h=s(77417),v=s(55916),g=s(41231),_=s(40114),f=s(44175);const E=(0,m.d)({url:"/file-upload",method:"post",headers:()=>({"api-version":"v1"}),request:(S=(0,i.Z)((function*(e){const a=new FormData;return a.append("file",e.input.file),a.append("type","avatar"),(0,_.JY)({formData:a,abortSignal:e.abortSignal,request:e.request})})),function(e){return S.apply(this,arguments)})});var S;const y=(0,p.q)({scheme:{uploadImage:E},parseError:g.n,plugins:[new h.D({beforeRequest:e=>(0,i.Z)((function*(){const a=yield f.q.getActual();return(0,u.Z)((0,d.Z)({},e),{url:(0,v.K)(a.otp.upload.url,e.url)})}))()})]});var b=s(30654);class Http{static isTransportError(e){return"object"==typeof e&&null!==e&&"code"in e}updateData(e){return b.$.changeUserData(e)}changePassword(e,a){return b.$.changePassword({old:e,new:a})}requestConfirmEmail(e){return b.$.requestEmailConfirmCode({is_auto_sent:!!e})}confirmEmail(e){return b.$.confirmEmail({code:e})}requestConfirmPhone(e){return b.$.requestPhoneConfirmCode(e)}confirmPhone(e,a){return b.$.confirmPhone({phone:e,code:a})}updateAvatar(e){var a=this;return(0,i.Z)((function*(){const s=yield a.convertToPng(e);return y.uploadImage({file:s,type:"avatar"}).then((e=>{if(e&&!e.result)throw new Error("Failed to upload avatar, code: ".concat(e.code));return{}}))}))()}updateSubscribe(e,a){return(0,i.Z)((function*(){return b.$.setMarketingMailingListOption({name:Http.MAP_SUBSCRIBES_DATA[e],value:String(a)})}))()}convertToPng(e){return new Promise((a=>{const s=document.createElement("canvas"),i=s.getContext("2d"),r=new Image;r.onload=()=>{r.naturalWidth&&r.naturalHeight?(s.width=r.naturalWidth,s.height=r.naturalHeight):(s.width=r.width,s.height=r.height),null==i||i.drawImage(r,0,0),a(s.toDataURL("image/png",1).replace("data:image/png;base64,",""))},r.src=URL.createObjectURL(e)}))}}Http.MAP_SUBSCRIBES_DATA={specialOffers:"marketing_mailing_accepted"};var C=s(37280);let T=class EntProfileService extends l.H3{onStart(e){var a=this;return(0,i.Z)((function*(){return yield a.load(function(e){const a=e.id,s=e.name,i=e.surname,r=e.patronymic,n=e.avatarSmall,o=e.phone,l=e.phoneConfirmed,c=e.email,d=e.emailConfirmed;return{id:Number(a),fullName:{firstName:s||"",middleName:i||"",lastName:r||""},avatar:{big:n||null,small:n||null},phone:{value:o||"",isConfirmed:l},email:{value:c||"",isConfirmed:d,confirmedBy:null}}}(e))}))()}onStop(){this.webSocket.unsubscribe()}constructor(){super(new Http,new C.X)}};(0,r.gn)([(0,n.onStart)(o.APP_SERVICE)],T.prototype,"onStart",null),(0,r.gn)([n.onStop],T.prototype,"onStop",null),T=(0,r.gn)([(0,n.bindAs)(c.Zx)],T)},55121:(e,a,s)=>{"use strict";s.d(a,{Q5:()=>S.Q,BR:()=>T,ae:()=>A});var i=s(29257),r=s(37323),n=s(64356),o=s(3121),l=s(12484),c=s(30654);class Http{getAccounts(){return(0,i.Z)((function*(){const e={common:[]};try{const a=(0,o.Z)(yield Promise.all([c.$.platformValues(["projects"]),c.$.getAccounts()]),2),s=a[0],i=a[1],r=s.projects.projects.reduce(((e,a)=>(e[a.name]=a.login_allow,e)),{bo:!1,fx:!1,spt:!1});(r.fx||r.bo||r.spt)&&(e.common=i)}catch(e){console.error(e)}return e}))()}createAccount(e,a){return new Promise(((s,i)=>{c.$.createAccount((0,n.Z)((0,r.Z)({},e),{project:a})).then((e=>e?s(e):(l.bR.sendEvent("empty response",l.x3.ERROR,"VWc30W9M"),i(Error("empty response"))))).catch((e=>i(e)))}))}updateAccount(e,a,s){return new Promise(((i,r)=>{c.$.updateAccount({id:e,name:a,project:s}).then((e=>e?i(e):(l.bR.sendEvent("empty response",l.x3.ERROR,"VWc30W9M"),r(Error("empty response"))))).catch((e=>r(e)))}))}archiveAccount(e,a){return new Promise(((s,i)=>{c.$.archiveAccount({id:e,project:a}).then((e=>e?s(e):(l.bR.sendEvent("empty response",l.x3.ERROR,"VWc30W9M"),i(Error("empty response"))))).catch((e=>i(e)))}))}updateActivePayout(e,a){return c.$.getActivePayout({accounts:e,project:a})}}var d=s(59312),u=s(60521),m=s(14090),p=s(28660);class AccountService_AccountService{constructor(e){this.accountsList=(0,u.observable)([]),this.setAccounts([e],e.id)}updateAccountById(e,a){const s=this.getAccountById(e);if(s){const e=Object.keys(a),i={};e.forEach((e=>{e in AccountService_AccountService.PROTECTED_ACCOUNT_FIELDS||(i[e]=a[e])})),(0,u.set)(s,i)}}getAccountById(e){return this.accountsList.find((a=>a.id===e))}hasAccountType(e){return this.accountsList.some((a=>a.type===e))}blockRefill(e,a){const s=this.accountsList.find((a=>a.id===e));return s&&!s.refill.blockingReason&&(s.refill.blockingReason=a),()=>{s&&(s.refill.blockingReason=null)}}setAccounts(e,a){0!==e.length&&(this.accountsList.replace(e),this.selectAccountById(this.getAccountForSelection(a)))}addAccountModel(e){e&&!this.getAccountById(e.id)&&(this.accountsList.push(e),this.lastAddAccount=(0,u.toJS)(e))}updateAccountModel(e,a){const s=this.accountsList.find((a=>a.id===e));s&&(s.name=a)}selectAccountById(e){const a=this.accountsList.find((a=>a.id===e));a&&(this.accountsList.forEach((e=>{e.selected=!1})),a.selected=!0,this.selectedAccount=a)}getAccountForSelection(e){return this.accountsList.find((a=>a.id===e))?e:this.accountsList.reduce(((e,a)=>e<a.id?a.id:e),this.accountsList[0].id)}}AccountService_AccountService.PROTECTED_ACCOUNT_FIELDS={id:!0,type:!0,selected:!1},(0,d.gn)([u.observable],AccountService_AccountService.prototype,"selectedAccount",void 0),(0,d.gn)([u.observable],AccountService_AccountService.prototype,"lastAddAccount",void 0),(0,d.gn)([u.action],AccountService_AccountService.prototype,"updateAccountById",null),(0,d.gn)([u.action],AccountService_AccountService.prototype,"blockRefill",null),(0,d.gn)([u.action],AccountService_AccountService.prototype,"setAccounts",null),(0,d.gn)([u.action],AccountService_AccountService.prototype,"addAccountModel",null),(0,d.gn)([u.action],AccountService_AccountService.prototype,"updateAccountModel",null),(0,d.gn)([u.action],AccountService_AccountService.prototype,"selectAccountById",null),(0,d.gn)([u.action],AccountService_AccountService.prototype,"getAccountForSelection",null);var h=s(60299),v=s(89288),g=s(78428),_=s(66713),f=s(26763),E=s(86933),S=s(66257);const y=S.Q.DEMO,b=[E.tN.BALANCE_CHANGE,E.tN.BALANCE_ACCOUNT_CREATED,E.tN.BALANCE_ACCOUNT_CLOSED,E.tN.BALANCE_ACCOUNT_UPDATED],C={[_.yy]:[E.WJ.PAYOUT_HOLD_CHANGED]};let T=class AccountService extends AccountService_AccountService{get accountDemo(){return this.selectedAccount.type===S.Q.DEMO}get realAccounts(){return this.accountsList.filter((e=>e.type!==S.Q.DEMO))}onStart(e){var a=this;return(0,i.Z)((function*(){if(a.isStarted)return!0;a.isStarted=!0,a.appService=e;const s=(yield a.http.getAccounts()).common,i=e.currencyDefault,r=e.isIslamic,n=e.accountId,o=e.currenciesInfo,l=e.refill,c=[...h.v.parseAll(s,o,l,r)];if(a.currencyDefault=i,a.isIslamic=r,"number"==typeof n){const e=c.find((e=>e.id===n));if(e)return a.initAccountState(c,e),!0}const d=a.isCommonAccount.bind(a),u=c.filter((e=>e.type===y)).find(d);return u?(a.initAccountState(c,u),!0):(console.error("failed select by default(".concat(y,") account in accountService.onStart")),!0)}))()}createAccount(e,a){return this.isAccountChanging=!0,new Promise(((s,i)=>{this.http.createAccount({currency:e,name:a},_.c0,"v1").then((e=>{const a=this.appService,i=a.currenciesInfo,n=a.refill,l=(0,o.Z)(h.v.parseAll([(0,r.Z)({},e)],i,n,this.isIslamic),1)[0];this.addAccountModel(l),this.setAccountById(l.id),s(l)})).catch((e=>{i(e),console.error("failed create account",e)})).finally((()=>{(0,u.runInAction)((()=>{this.isAccountChanging=!1}))}))}))}isCommonRealAccount(e){return this.checkAccount(e).isCommonReal}isCommonDemoAccount(e){return this.checkAccount(e).isCommonDemo}isCommonAccount(e){return this.isCommonRealAccount(e)||this.isCommonDemoAccount(e)}updateAccount(e,a){this.isAccountChanging=!0;return this.getAccountById(e)?new Promise(((s,i)=>{this.http.updateAccount(e,a,_.c0,"v1").then((e=>{this.updateAccountModel(e.id,e.name),s()})).catch((e=>{i(e),console.error("failed update account",e)})).finally((()=>{(0,u.runInAction)((()=>{this.isAccountChanging=!1}))}))})):Promise.reject()}updateIslamicAccount(e){this.accountsList.filter((e=>e.type===S.Q.REAL)).forEach((a=>{this.isCommonAccount(a)&&(a.isIslamic=e)})),this.isIslamic=e}archiveAccount(e){this.isAccountChanging=!0;const a=this.getAccountById(e);return new Promise(((s,i)=>{this.http.archiveAccount(e,_.c0).then((e=>{a&&(this.lastArchivedAccount=(0,u.toJS)(a)),this.removeArchivedAccount(e.id),s(e)})).catch((e=>{i(e),console.error("failed archive account",e)})).finally((()=>{(0,u.runInAction)((()=>{this.isAccountChanging=!1}))}))}))}removeArchivedAccount(e){const a=this.getAccountById(e);if(a&&((0,m.Z)(this.accountsList,(a=>a.id===e)),a.selected)){const e=this.accountsList.filter((e=>"real"===e.type));e&&e.length&&this.setAccountById(e[0].id)}}onStop(){return this.isStarted=!1,this.supportWebsockets.forEach((e=>{e.client.clear()})),!0}setAccountById(e){this.selectAccountById(e),v.P.setAccountId(this.selectedAccount.id)}getAccountByType(e){return this.accountsList.find((a=>a.type===e))}setHiddenBalance(e){this.hiddenBalance=e}checkAccount(e){const a={isCommonReal:!1,isCommonDemo:!1};if(!e)return a;switch(e.sourceType){case g.$.Common:case g.$.CommonFx:a.isCommonReal=!0;break;case g.$.Demo:a.isCommonDemo=!0}return a}bindEvents(){this.supportWebsockets.forEach((e=>{switch(e.type){case _.yy:{const a=C[_.yy].concat(b);e.client.onPush(this.onBinaryPushReceive),e.client.subscribeEventList(a),e.client.onRestore((()=>{this.http.getAccounts().then((e=>{this.updateCommonAccountsList(e)}))}));break}}}))}updateCommonAccountsList(e){const a=e.common.flatMap((e=>{const a=this.appService,s=a.currenciesInfo,i=a.refill;return h.v.parseAll([e],s,i,this.isIslamic)}));this.setAccounts(a,this.selectedAccount.id)}onBinaryPushReceive(e,a){if((!Array.isArray(a)||0!==a.length)&&a)switch(e){case E.U3.PAYOUT_HOLD_CHANGED:{const e=a[0];this.updateAccountById(e.account_id,{balanceHold:e.balance_hold,balancePayoutAmount:e.balance_payout_amount});break}case E.mi.BALANCE_CHANGE:a.forEach((e=>{this.updateAccountById(e.account_id,{amount:e.amount_free,amountReal:e.amount_real,bonus:e.amount_bonus_free})}));break;case E.mi.BALANCE_ACCOUNT_CREATED:a.forEach((e=>{const a=this.appService,s=a.currenciesInfo,i=a.refill,r=(0,o.Z)(h.v.parseAll([e],s,i,this.isIslamic),1)[0];this.addAccountModel(r)}));break;case E.mi.BALANCE_ACCOUNT_UPDATED:a.forEach((e=>{const a=this.appService,s=a.currenciesInfo,i=a.refill,r=(0,o.Z)(h.v.parseAll([e],s,i,this.isIslamic),1)[0];this.updateAccountById(r.id,{name:r.name})}));break;case E.mi.BALANCE_ACCOUNT_CLOSED:a.forEach((e=>{this.removeArchivedAccount(e.id)}))}}updateActivePayout(e){const a=e.filter((e=>e.type===S.Q.REAL)).map((e=>e.id));a.length>0&&this.http.updateActivePayout(a,_.c0).then((e=>{if(e){const a=this.getAccountById(e.account_id);a&&this.isCommonAccount(a)&&this.updateAccountById(e.account_id,{balancePayoutAmount:e.amount})}})).catch((e=>{console.error("failed update account",e)}))}initAccountState(e,a){this.setAccounts(e,a.id),v.P.setAccountId(this.selectedAccount.id),this.bindEvents(),this.updateActivePayout(e)}constructor(e,a){super(h.v.DEFAULT_ACCOUNT),this.api={setAccountById:e=>this.setAccountById(e),getAccountById:e=>this.getAccountById(e)},this.isStarted=!1,this.hiddenBalance=!1,this.currencyDefault=null,this.isIslamic=!1,this.isAccountChanging=!1,this.http=e,this.supportWebsockets=a,this.isCommonAccount=this.isCommonAccount.bind(this),this.isCommonRealAccount=this.isCommonRealAccount.bind(this),this.isCommonDemoAccount=this.isCommonDemoAccount.bind(this)}};function A(e,a,s){const i=e(new T(new Http,a),{config:T.binderConfig});return s&&!1===s.canStop&&(i.stop=()=>{}),i}(0,d.gn)([u.observable],T.prototype,"hiddenBalance",void 0),(0,d.gn)([u.observable],T.prototype,"currencyDefault",void 0),(0,d.gn)([u.observable],T.prototype,"isIslamic",void 0),(0,d.gn)([u.observable],T.prototype,"isAccountChanging",void 0),(0,d.gn)([u.observable],T.prototype,"lastArchivedAccount",void 0),(0,d.gn)([u.computed],T.prototype,"accountDemo",null),(0,d.gn)([u.computed],T.prototype,"realAccounts",null),(0,d.gn)([(0,p.onStart)(f.APP_SERVICE)],T.prototype,"onStart",null),(0,d.gn)([u.action],T.prototype,"createAccount",null),(0,d.gn)([u.action],T.prototype,"updateAccount",null),(0,d.gn)([u.action],T.prototype,"updateIslamicAccount",null),(0,d.gn)([u.action],T.prototype,"archiveAccount",null),(0,d.gn)([p.onStop],T.prototype,"onStop",null),(0,d.gn)([u.action.bound],T.prototype,"setAccountById",null),(0,d.gn)([u.action.bound],T.prototype,"onBinaryPushReceive",null),T=(0,d.gn)([(0,p.bindAs)(f.ACCOUNT_SERVICE)],T)},95386:(e,a,s)=>{"use strict";s.d(a,{MK:()=>i,cm:()=>l,gC:()=>r,ik:()=>c,pi:()=>n,y2:()=>o});const i="service_level",r={OTP_INDICATOR_STOCHASTIC_RSI:"otp_indicator_stochastic_rsi",OTP_INDICATOR_REVERSAL_POINTS:"otp_indicator_reversal_points",OTP_INDICATOR_INVERSE_BOLLINGER:"otp_indicator_inverse_bollinger",OTP_INDICATOR_BILL_WILLIAMS_FRACTALS:"otp_indicator_bill_williams_fractals",OTP_INDICATOR_MOON:"otp_indicator_moon"},n={OTP_ADVISOR_SURFING_THE_AVERAGES:"otp_advisor_surfing_the_averages",OTP_ADVISOR_PREDATORY_GAZE:"otp_advisor_predatory_gaze",OTP_ADVISOR_MACD_PROFESSIONAL:"otp_advisor_macd_professional"},o={OTP_FX_TRADING_TRAILING_STOP:"otp_fx_trading_trailing_stop"},l={OTP_SOUND_PACK_PRIVILEGE:"otp_sound_pack_privilege",OTP_SOUND_PACK_NEW_ERA:"otp_sound_pack_new_era",OTP_SOUND_PACK_DEFAULT:"otp_sound_pack_default"},c={OTP_THEME_PURPLE_HAZE:"otp_theme_purple_haze",OTP_THEME_INSPIRE:"otp_theme_inspire",OTP_THEME_HOLI_PINK:"otp_theme_holi_pink",OTP_THEME_HOLI_PURPLE:"otp_theme_holi_purple",OTP_THEME_HOLI_ORANGE:"otp_theme_holi_orange",OTP_THEME_HOLI_MINT:"otp_theme_holi_mint",OTP_THEME_HOLI_PURPLE_YELLOW:"otp_theme_holi_purple_yellow",OTP_THEME_CRYPTO:"otp_theme_crypto",OTP_THEME_FOOTBALL:"otp_theme_football"}},80027:(e,a,s)=>{"use strict";s.d(a,{pi:()=>p.pi,y2:()=>p.y2,BV:()=>h,MK:()=>p.MK,cm:()=>p.cm,ik:()=>p.ik,PU:()=>v});var i=s(59312),r=s(60521),n=s(28660);class FeatureToggleService_FeatureToggleService{constructor(){this.featuresList={}}fillInFeaturesList(e){e&&Object.keys(e).forEach((a=>{(0,r.set)(this.featuresList,a,e[a])}))}getFeatureValue(e){return(0,r.get)(this.featuresList,e)}setFeatureValue(e,a){(0,r.set)(this.featuresList,e,a)}}(0,i.gn)([r.observable],FeatureToggleService_FeatureToggleService.prototype,"featuresList",void 0),(0,i.gn)([r.action],FeatureToggleService_FeatureToggleService.prototype,"setFeatureValue",null);var o=s(57615),l=s(29042),c=s(23735),d=s(26763),u=s(96667),m=s(86933),p=s(95386);let h=class FeatureToggleService extends FeatureToggleService_FeatureToggleService{static isStatusStateChangeEventGuard(e,a){return e===m.U3.STATUS_STATE_CHANGED&&Array.isArray(a)}static isFeatureToggleSetEventGuard(e,a){return e===m.U3.FEATURE_TOGGLE_SET&&!!a}onStart(e){e.serviceLevels&&(this.fillInFeaturesList(e.serviceLevels.settings),this.dsService.onPush(this.dataServiceListener),this.dsService.subscribeEventList([m.WJ.FEATURE_TOGGLE_SET,m.WJ.STATUS_STATE_CHANGED]),e.serviceLevels.level&&e.serviceLevels.level.name&&this.sendStatistics(e.serviceLevels.level.name))}onStop(){this.dsService.clear()}sendStatistics(e){const a=this.storageService.get("level");this.storageService.set("previousLevel",a),this.storageService.set("level",e),a!==e&&(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"user_level_status_received",eventAction:"user_level_status_received",eventLabel:"user_level_status_received"})}constructor(...e){super(...e),this.dsService=u.Z.add(),this.storageService=new o._({namespace:"features",backend:new l.u}),this.dataServiceListener=(e,a)=>{if(FeatureToggleService.isStatusStateChangeEventGuard(e,a)&&a.forEach((e=>{const a=this.getFeatureValue(p.MK),s=e.service_level.name;s!==a&&(this.setFeatureValue(p.MK,s),this.sendStatistics(s))})),FeatureToggleService.isFeatureToggleSetEventGuard(e,a)){Object.keys(a).forEach((e=>this.setFeatureValue(e,a[e])))}}}};function v(e){return e(new h,{config:h.binderConfig})}(0,i.gn)([(0,n.onStart)(d.APP_SERVICE)],h.prototype,"onStart",null),(0,i.gn)([n.onStop],h.prototype,"onStop",null),(0,i.gn)([r.action],h.prototype,"dataServiceListener",void 0),h=(0,i.gn)([(0,n.bindAs)(d.FEATURE_TOGGLE_SERVICE)],h)},73587:(e,a,s)=>{"use strict";s.d(a,{L:()=>c});var i=s(59312),r=s(28660),n=s(37718),o=s(26763),l=s(65200);let c=class NoticeService{add(e){return this.noticeQueue.add(this.UNSAFEParse(e))}remove(e,a){return this.noticeQueue.remove(e,a)}getNotice(e){return this.noticeQueue.getNotice(e)}getCollection(e){return this.noticeQueue.getCollection(e)}addCollections(e){return this.noticeQueue.addCollections(e)}removeCollections(e){return this.noticeQueue.removeCollections(e)}onBind(e,a){this.noticeQueue.setTimeService(e),this.noticeSocketService=a}UNSAFEParse(e){return this.noticeSocketService?this.noticeSocketService.parse(e):Array.isArray(e)?e.map((e=>l.rd.parse(e))):l.rd.parse(e)}constructor(){this.api={add:this.add.bind(this),remove:this.remove.bind(this),getNotice:this.getNotice.bind(this),getCollection:this.getCollection.bind(this),addCollections:this.addCollections.bind(this),removeCollections:this.removeCollections.bind(this)},this.collections={},this.noticeQueue=new n.I}};(0,i.gn)([(0,r.onBind)(o.TIME_SERVICE,o.NOTICE_SOCKET_SERVICE)],c.prototype,"onBind",null),c=(0,i.gn)([(0,r.bindAs)(o.NOTICE_SERVICE)],c)},54554:(e,a,s)=>{"use strict";s.d(a,{s:()=>i});const i={FULL_SCREEN:"fullScreenCollection",CENTER_BONUS_POPUP:"centerBonusPopupCollection",BOTTOM_LEFT:"bottomLeftCollection",CENTER:"centerCollection",TOP:"topCollection",CENTER_DIALOG:"centerDialogCollection",HEADER:"headerCollection",UNDER_HEADER:"underHeaderCollection",TOP_PLATFORM:"topPlatformCollection",OVERLAY:"overlayCollection"}},53323:(e,a,s)=>{"use strict";s.d(a,{L$:()=>r.L,S$:()=>n,sm:()=>i.s});var i=s(54554),r=s(73587);function n(e){return e(new r.L,{config:r.L.binderConfig})}},25907:(e,a,s)=>{"use strict";s.d(a,{O:()=>l,P:()=>c});var i=s(59312),r=s(28660),n=s(64208),o=s(26763);let l=class TimeService extends n.O{onStart(){return this.init(),!0}constructor(e){super(),this.api={calibrateTimeDelta:this.calibrateTimeDelta,setServerTime:this.setServerTime,getServerTime:this.getServerTime},this.dsService=e}};function c(e,a){return e(new l(a),{config:l.binderConfig})}l=(0,i.gn)([(0,r.bindAs)(o.TIME_SERVICE)],l)},11782:(e,a,s)=>{"use strict";var i=s(59312),r=s(60521),n=s(53601),o=s(7033),l=s(30130);class TimeService{start(e){this.stop();let a=this.serverTime;e?a=e:void 0===this.serverTime&&(a=(0,n.z)(Date.now())-this.timeDelta),this.setServerTime(a,!0),this.interval=window.setInterval(this.handleTick,1e3)}stop(){void 0!==this.interval&&(window.clearInterval(this.interval),this.interval=void 0)}get todayDate(){return new Date(1e3*this.serverTime).getDate()}calibrateTimeDelta(e){this.timeDelta=e,this.start()}setServerTime(e,a){(e&&e>this.serverTime||a)&&(this.serverTime=e,this.serverTimeNotObservable=e,this.timeDelta=(0,o.l)(e,new Date))}getServerTime(){return this.serverTime}handleTick(){this.setServerTime((0,n.z)(Date.now())-this.timeDelta)}constructor(){this.serverTimeNotObservable=l.u,this.timeDelta=0,this.serverTime=l.u,this.isCalibrated=!0,this.handleTick=this.handleTick.bind(this)}}(0,i.gn)([r.observable],TimeService.prototype,"serverTime",void 0),(0,i.gn)([r.observable],TimeService.prototype,"isCalibrated",void 0),(0,i.gn)([r.action],TimeService.prototype,"start",null),(0,i.gn)([r.computed],TimeService.prototype,"todayDate",null),(0,i.gn)([r.action],TimeService.prototype,"setServerTime",null)},87561:(e,a,s)=>{"use strict";s.d(a,{OY:()=>i.O,P4:()=>i.P});var i=s(25907);s(11782)},41520:(e,a,s)=>{"use strict";s.d(a,{Fz:()=>h,oj:()=>v});var i=s(59312),r=s(28660),n=s(60521),o=s(84829);class UiService_UiService{constructor(e){this.orientationChangeTime=Date.now(),this.wasFirstTouch=!1,this.handleResize=(0,o.Z)((()=>{(0,n.runInAction)((()=>{const e=window.innerHeight,a=window.innerWidth;this.windowHeight===e&&this.windowWidth===a||(this.windowHeight=e,this.windowWidth=a,this.windowResizeStop=Date.now())}))}),300),this.handleOrientationChange=()=>{this.orientationChangeTime=Date.now()},this.handleVisibilityChange=()=>{this.documentVisible=!document.hidden,document.hidden?this.documentHidingTime=Math.floor(Date.now()/1e3):this.documentVisibilityTime=Math.floor(Date.now()/1e3)},this.handleFirstTouch=()=>{this.wasFirstTouch=!0,window.removeEventListener("touchstart",this.handleFirstTouch,!0)},this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.documentVisible=!document.hidden,this.documentVisibilityTime=Math.floor(+new Date/1e3),this.theme=e}addListeners(){window.addEventListener("resize",this.handleResize),document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("orientationchange",this.handleOrientationChange),window.addEventListener("touchstart",this.handleFirstTouch,!0)}onStop(){window.removeEventListener("resize",this.handleResize),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("orientationchange",this.handleOrientationChange),window.removeEventListener("touchstart",this.handleFirstTouch,!0)}onResize(){this.windowResize=Date.now()}onResizeStop(){this.windowResizeStop=Date.now()}setTheme(e){this.theme=e}scrollTop(){document.body.scrollTo({top:0,behavior:"smooth"})}addBodyClass(e){e&&document.body.classList.add(e)}removeBodyClass(e){e&&document.body.classList.remove(e)}triggerLayoutResize(){this.layoutResize=Date.now()}}(0,i.gn)([n.observable],UiService_UiService.prototype,"windowWidth",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"windowHeight",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"windowResize",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"windowResizeStop",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"layoutResize",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"documentVisible",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"documentVisibilityTime",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"documentHidingTime",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"orientationChangeTime",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"wasFirstTouch",void 0),(0,i.gn)([n.observable],UiService_UiService.prototype,"theme",void 0),(0,i.gn)([n.action],UiService_UiService.prototype,"onResize",null),(0,i.gn)([n.action],UiService_UiService.prototype,"onResizeStop",null),(0,i.gn)([n.action],UiService_UiService.prototype,"setTheme",null),(0,i.gn)([n.action],UiService_UiService.prototype,"scrollTop",null),(0,i.gn)([n.action],UiService_UiService.prototype,"addBodyClass",null),(0,i.gn)([n.action],UiService_UiService.prototype,"removeBodyClass",null),(0,i.gn)([n.action],UiService_UiService.prototype,"triggerLayoutResize",null);var l=s(57855),c=s(87601),d=s(26763),u=s(35377),m=s(31418);const p="interface_scale_value";let h=class UiService extends UiService_UiService{onStart(e){this.appService=e,this.indicatorsEnabled=e.getOption("indicators_enabled")||!1,this.chartTypesEnabled=e.getOption("chart_types_enabled")||!1;const a=this.appService.getOption("platform_theme");this.theme=a||u.t0,this.applyTheme(this.theme),this.addListeners(),this.addSpecificListeners(),this.initBaseReactions()}onStop(){super.onStop(),this.disposers.forEach((e=>{e&&e()})),this.disposers=[]}initBaseReactions(){this.disposers.push((0,n.reaction)((()=>this.windowResizeStop),(()=>{this.isMultiChart=window.innerWidth>=c.xM.WIDTH&&window.innerHeight>=c.xM.HEIGHT}),{fireImmediately:!0}))}isMobilePortrait(){return this.windowWidth<c.j$.BREAKPOINT_768}isMobileLandscape(){return this.windowWidth<c.j$.BREAKPOINT_960}addSpecificListeners(){window.addEventListener("scroll",(0,o.Z)((()=>{this.checkScrollBottom()}),300)),window.addEventListener("touchmove",(0,o.Z)((()=>{this.checkScrollBottom()}),300),!1)}getDocumentHeight(){return this.documentBody&&this.documentElement?Math.max(this.documentBody.scrollHeight,this.documentElement.scrollHeight,this.documentBody.offsetHeight,this.documentElement.offsetHeight,this.documentBody.clientHeight,this.documentElement.clientHeight):0}checkScrollBottom(){const e=Math.ceil(window.pageYOffset+window.innerHeight),a=this.getDocumentHeight();Math.abs(e-a)<3&&this.previousOffset!==window.pageYOffset&&(this.windowScrollBottom=(new Date).getTime()),this.previousOffset=window.pageYOffset}setIndicatorsEnabled(e){this.indicatorsEnabled=e}setChartTypesEnabled(e){this.chartTypesEnabled=e}setScale(e){this.scale=e,this.applyScale(),(0,l.LS)(d.UI_SERVICE,p,e,l.hO)}setTheme(e){var a;super.setTheme(e),this.applyTheme(e),null===(a=this.appService)||void 0===a||a.setOption("platform_theme",e)}enableScale(){this.setScale(Number((0,l.rV)(d.UI_SERVICE,p,l.hO)||1))}applyScale(){document.documentElement&&(document.documentElement.style.fontSize="".concat(this.scale,"em"),this.triggerLayoutResize())}applyTheme(e){var a;(null===(a=null===document||void 0===document?void 0:document.body.classList)||void 0===a?void 0:a.contains("page-platform"))&&(0,m.ZS)(e)}reloadPage(){this.reloading||(this.reloading=!0,window.location.reload())}constructor(e){super(e),this.disposers=[],this.api={addBodyClass:this.addBodyClass,removeBodyClass:this.removeBodyClass,scrollTop:this.scrollTop,reloadPage:this.reloadPage,triggerLayoutResize:this.triggerLayoutResize,toggleNavigation:()=>this.isCollapsedNav=!this.isCollapsedNav,closeNavigation:()=>this.isCollapsedNav=!0,showNavigation:()=>this.isCollapsedNav=!1,setScale:this.setScale,setTheme:this.setTheme,changeDocumentTab:()=>{console.error('call non-existent method  "uiService.changeDocumentTab"')},blockDocumentTab:()=>{console.error('call non-existent method "uiService.blockDocumentTab"')},onResizeStop:this.onResizeStop,onResize:this.onResize,toggleTradingBar:()=>{console.error('call non-existent method "uiService.toggleTradingBar"')}},this.reloading=!1,this.scale=1,this.isCollapsedNav=!0,this.indicatorsEnabled=!0,this.chartTypesEnabled=!0,this.isMultiChart=!0,this.webGlEnabled=!0,this.documentElement=document.documentElement,this.documentBody=document.body,this.triggerLayoutResize=this.triggerLayoutResize.bind(this),this.setScale=this.setScale.bind(this),this.setTheme=this.setTheme.bind(this),this.reloadPage=this.reloadPage.bind(this),this.addBodyClass=this.addBodyClass.bind(this),this.removeBodyClass=this.removeBodyClass.bind(this),this.scrollTop=this.scrollTop.bind(this),this.onResizeStop=this.onResizeStop.bind(this),this.onResize=this.onResize.bind(this)}};function v(e,a){return"".concat(function(e,a){return e/(null!=a?a:16)}(e,a),"rem")}(0,i.gn)([n.observable],h.prototype,"scale",void 0),(0,i.gn)([n.observable],h.prototype,"isCollapsedNav",void 0),(0,i.gn)([n.observable],h.prototype,"indicatorsEnabled",void 0),(0,i.gn)([n.observable],h.prototype,"chartTypesEnabled",void 0),(0,i.gn)([n.observable],h.prototype,"windowScrollBottom",void 0),(0,i.gn)([n.observable],h.prototype,"isMultiChart",void 0),(0,i.gn)([n.observable],h.prototype,"webGlEnabled",void 0),(0,i.gn)([(0,r.onStart)(d.APP_SERVICE)],h.prototype,"onStart",null),(0,i.gn)([r.onStop],h.prototype,"onStop",null),(0,i.gn)([n.action],h.prototype,"setIndicatorsEnabled",null),(0,i.gn)([n.action],h.prototype,"setChartTypesEnabled",null),(0,i.gn)([n.action],h.prototype,"setScale",null),(0,i.gn)([n.action],h.prototype,"applyTheme",null),(0,i.gn)([n.action],h.prototype,"reloadPage",null),h=(0,i.gn)([(0,r.bindAs)(d.UI_SERVICE)],h)},6399:(e,a,s)=>{"use strict";s.d(a,{i:()=>n});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{id:"ct_spt_portfolio_title",defaultMessage:"Portfolio"})},53088:(e,a,s)=>{"use strict";s.d(a,{CW:()=>m,ED:()=>p,EX:()=>u,GA:()=>i,Oi:()=>c,VX:()=>d,YV:()=>o,cr:()=>n,oi:()=>l,qt:()=>r});const i="StocksBuyService",r="BuyStockCalculateService",n="SellStockCalculateService",o="StocksSellService",l="StocksPortfolioService",c="StocksDealsHistoryService",d="PanelServiceSpt",u={BUY:"buy",POSITION_DETAILS:"positionDetails"},m={MAIN:"buy",ACCOUNT_LIST:"accountList",SUCCESS:"successBuy"},p={MAIN:"positionDetails",SELL:"sell",SELL_ONLY:"sell_only",SUCCESS:"successSell"}},95350:(e,a,s)=>{"use strict";s.d(a,{$J:()=>n.$,Oo:()=>o.O,iI:()=>r.i,tr:()=>i.t});s(6399);var i=s(3366),r=s(15514),n=s(93404),o=s(76021)},15514:(e,a,s)=>{"use strict";s.d(a,{i:()=>m});var i=s(23735),r=s(18207),n=s(54172),o=s(1035),l=s(38010),c=s(24071),d=s(13424),u=s(54800);const m=(0,n.zt)(r.Eo,{helper(e){let a=e.assetMenuService,s=e.dealCurrentServiceSpt,r=e.pairServiceSpt,n=e.sideBarService;return{deals:s.collection,pairService:r,scrollToHash:s.scrollToHash,onSell:e=>{(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/portfolio",eventLabel:"sell_button_click",project_name:"spt"}),s.handleSell(e)},onBuy:e=>{(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/portfolio",eventLabel:"buy_more_button_click",project_name:"spt"}),s.handleBuy(e)},onOpenCard:()=>{(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/portfolio",eventLabel:"open_position_card",project_name:"spt"})},onCloseCard:()=>{(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/portfolio",eventLabel:"close_position_card",project_name:"spt"})},onClickStub:()=>{(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/portfolio",eventLabel:"choose_asset_link_click",project_name:"spt"}),n.goToMinor(o.KO.ASSETS),a.selectTab(l.Rp.SPT)}}},services:[l.l$,u.h,c.so,d.G]})},93404:(e,a,s)=>{"use strict";s.d(a,{$:()=>o});var i=s(18207),r=s(54172),n=s(54800);const o=(0,r.zt)(i.ZT,{helper(e){let a=e.dealCurrentServiceSpt;return{summary:a.summary,currencies:a.currencies,selectedCurrency:a.selectedCurrency,selectCurrency:a.selectCurrency,visible:a.collection.length>0}},services:[n.h]})},3366:(e,a,s)=>{"use strict";s.d(a,{t:()=>p});var i=s(27378),r=s(73598),n=s(99287),o=s(54172),l=s(23680),c=s(83920),d=s(41520),u=s(17855),m=s(37273);const p=(0,o.zt)((e=>i.createElement(r.Qj,null,(()=>i.createElement(n.tr,Object.assign({},e))))),{helper(e,a){let s=e.appService,i=e.navigationService,r=e.stocksDealsHistoryService,n=e.uiService,o=a.scroll;const l=(0,u.M)({politics:s.politics,accountType:r.account.type}),c=l.isDemoAvailable,d=l.isRealAvailable,m=l.isAvailable;return{analytics:r.analytics,deals:r.deals||[],height:n.windowHeight,isAvailable:m,isDemoUnavailable:!c,isRealUnavailable:!d,isError:r.isError,isFinite:r.isFinite,isLoading:r.isLoading,isInit:r.isInit,scroll:o,scrollToHash:r.scrollToHash,clearScrollData:()=>r.clearScrollData(),loadNextIfNoError:r.loadNextIfNoError,loadNext:r.loadNext,openAvailable:()=>i.navigation.goToTrading({acc_type:"demo"})}},services:[l.z,c.f,m.a,d.Fz]})},15e3:(e,a,s)=>{"use strict";s.d(a,{h:()=>_});var i=s(37323),r=s(64356),n=s(59312),o=s(28660),l=s(60521),c=s(57615),d=s(29042),u=s(66713),m=s(26763),p=s(18207),h=s(96667),v=s(53088),g=s(56948);let _=class DealCurrentServiceSpt extends p.cq{onStart(e,a){this.appService=e,this.accountService=a,this.load({id:this.accountService.selectedAccount.id,group:this.accountService.selectedAccount.group}),this.webSocket.onRestore(this.restoreDeals),this.appService.availableProjects.spt&&this.webSocket.subscribe().then((()=>{this.accountService.isCommonAccount(this.accountService.selectedAccount)&&this.subscribeDealsChanges()}));const s=this.getAvailableCurrencies();this.setCurrencies(s),"real"===this.accountService.selectedAccount.group?this.setDefaultCurrency(this.accountService.selectedAccount.currencyName):this.setDefaultCurrency(s[0])}onBind(e){var a;this.tradeManagerService=e,(null===(a=this.appService)||void 0===a?void 0:a.availableProjects.spt)&&this.initReactions()}initReactions(){this.disposers.push((0,l.reaction)((()=>({id:this.accountService.selectedAccount.id,group:this.accountService.selectedAccount.group})),(e=>{this.updateAccount(e),this.accountService.isCommonAccount(this.accountService.selectedAccount)&&this.subscribeDealsChanges()})),(0,l.reaction)((()=>this.accountService.selectedAccount.sourceType),(()=>{this.accountService.isCommonAccount(this.accountService.selectedAccount)||this.unsubscribeDealsChanges()})),(0,l.reaction)((()=>({id:this.accountService.selectedAccount.id,group:this.accountService.selectedAccount.group,currencyName:this.accountService.selectedAccount.currencyName})),(e=>{"real"===e.group&&(this.setDefaultCurrency(e.currencyName),this.unsubscribeDealsChanges(),this.subscribeDealsChanges())})),(0,l.reaction)((()=>this.accountService.accountsList),(()=>{this.setCurrencies(this.getAvailableCurrencies())})))}getAvailableCurrencies(){var e;const a=this.accountService.accountsList.map((e=>({id:e.currencyName,title:e.currencyLet}))).filter((e=>"demo"!==e.id)).reduce(((e,a)=>(0,r.Z)((0,i.Z)({},e),{[a.id]:!0})),{}),s=(null===(e=this.appService)||void 0===e?void 0:e.pairsSpt)?this.appService.pairsSpt.reduce(((e,a)=>(0,r.Z)((0,i.Z)({},e),{[a.currency_quote]:!0})),a):a;return Object.keys(s)}handleSell(e){const a=this.tradeManagerService.getSuitableFrame(e,u.ik);a.serviceInterface.selectPair(e,u.ik),setTimeout((()=>{const e=a.serviceInterface.binder.getService(v.VX);e&&e.openById(v.ED.SELL)}),300)}handleBuy(e){const a=this.tradeManagerService.getSuitableFrame(e,u.ik);a.serviceInterface.selectPair(e,u.ik),setTimeout((()=>{const e=a.serviceInterface.binder.getService(v.VX);e&&e.openById(v.CW.MAIN)}),300)}restoreDeals(){this.unsubscribeDealsChanges(),this.accountService.isCommonAccount(this.accountService.selectedAccount)&&this.subscribeDealsChanges()}scrollTo(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.scrollToHash={id:"".concat(e,"-").concat(a||""),scrollDelay:s}}clearScrollData(){this.scrollToHash=null}constructor(){super(new g.X(h.Z.add()),new c._({namespace:"deal_current_service_spt",backend:new d.u})),this.disposers=[],this.restoreDeals=this.restoreDeals.bind(this),this.handleSell=this.handleSell.bind(this),this.handleBuy=this.handleBuy.bind(this),this.getAvailableCurrencies=this.getAvailableCurrencies.bind(this),this.selectCurrency=this.selectCurrency.bind(this)}};(0,n.gn)([l.observable.ref],_.prototype,"scrollToHash",void 0),(0,n.gn)([(0,o.onStart)(m.APP_SERVICE,m.ACCOUNT_SERVICE)],_.prototype,"onStart",null),(0,n.gn)([(0,o.onBind)(m.TRADE_MANAGER_SERVICE)],_.prototype,"onBind",null),(0,n.gn)([l.action],_.prototype,"scrollTo",null),_=(0,n.gn)([(0,o.bindAs)(m.DEAL_CURRENT_SERVICE_SPT)],_)},56948:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(86933);class WebSocket{onRestore(e){this.restoreListener.push(e)}onDealProceed(e){this.listeners[i.F$.DEALS_PROCEED]=e}subscribeDealsChanges(e,a,s){return new Promise(((r,n)=>{this.connect.request({event_name:i.F$.DEALS_SUBSCRIBE,data:[{account_id:e,group:a,currency:s}]}).onResponse(((e,a)=>{a?n(a):r(e[0])}))}))}unsubscribeDealsChanges(){this.connect.request({event_name:i.F$.DEALS_UNSUBSCRIBE})}unsubscribe(){this.connect.clear()}subscribe(){return new Promise((e=>{this.connect.onPush(((e,a)=>{var s,r;e===i.F$.DEALS_PROCEED&&(null===(r=(s=this.listeners)[i.F$.DEALS_PROCEED])||void 0===r||r.call(s,a[0]))})).onOpen((()=>{e()}))}))}constructor(e){this.listeners={},this.restoreListener=[],this.connect=e,this.connect.onRestore((()=>{this.restoreListener.forEach((e=>e()))}))}}},54800:(e,a,s)=>{"use strict";s.d(a,{h:()=>i.h});var i=s(15e3)},24762:(e,a,s)=>{"use strict";s.d(a,{x:()=>StocksAnalytics});var i=s(23735),r=s(66713),n=s(18207);class StocksAnalytics{static unifyOperationType(e){return e===n.JZ.sale?"sell":e}eventCardOpen(e){(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/deal_history",eventLabel:"open_trade/".concat(StocksAnalytics.unifyOperationType(e)),project_name:"spt"})}eventCardClose(e){(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/deal_history",eventLabel:"close_trade/".concat(StocksAnalytics.unifyOperationType(e)),project_name:"spt"})}eventLoadMore(){(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/deal_history",eventLabel:"load_more_button",project_name:"spt"})}eventReload(){(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/deal_history",eventLabel:"reload_button",project_name:"spt"})}eventScrollEnd(){(0,i.L)({event:"events_with_project_param",eventCategory:"sidebar_tradingbar",eventAction:"spt/deal_history",eventLabel:"scrolled_down_end",project_name:"spt"})}eventSuccessScreenOpen(e){(0,i.L)({event:"events_with_project_param",eventCategory:"main_chart",eventAction:"".concat(r.Fw.STOCKS,"/success_screen/").concat(StocksAnalytics.unifyOperationType(e)),eventLabel:"main_chart_spt_success_screen_open"})}eventSuccessScreenClose(e){(0,i.L)({event:"events_with_project_param",eventCategory:"main_chart",eventAction:"".concat(r.Fw.STOCKS,"/success_screen/").concat(StocksAnalytics.unifyOperationType(e)),eventLabel:"main_chart_spt_success_screen_close"})}eventSuccessScreenOpenPortfolio(e){(0,i.L)({event:"events_with_project_param",eventCategory:"main_chart",eventAction:"".concat(r.Fw.STOCKS,"/success_screen/").concat(StocksAnalytics.unifyOperationType(e)),eventLabel:e===n.JZ.sale?"main_chart_spt_sell_ss_history_button":"main_chart_spt_buy_ss_portfolio_button"})}constructor(){this.eventCardOpen=this.eventCardOpen.bind(this),this.eventCardClose=this.eventCardClose.bind(this),this.eventLoadMore=this.eventLoadMore.bind(this),this.eventReload=this.eventReload.bind(this),this.eventSuccessScreenOpen=this.eventSuccessScreenOpen.bind(this),this.eventSuccessScreenClose=this.eventSuccessScreenClose.bind(this),this.eventSuccessScreenOpenPortfolio=this.eventSuccessScreenOpenPortfolio.bind(this)}}},18184:(e,a,s)=>{"use strict";s.d(a,{a:()=>d});var i=s(59312),r=s(28660),n=s(60521),o=s(26763),l=s(99287),c=s(53088);let d=class StocksDealsHistoryService extends l.N5{onBind(e){this.accountService=e,this.initReactions()}onBindPairService(e){this.pairCollection=e.pairCollection}scrollTo(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.scrollToHash={id:"".concat(e,"-").concat(a||""),scrollDelay:s}}clearScrollData(){this.scrollToHash=null}onStop(){this.disposers.forEach((e=>e())),this.disposers=[]}initReactions(){this.setAccount(this.accountService.selectedAccount),this.disposers.push((0,n.reaction)((()=>this.accountService.selectedAccount),(e=>{this.setAccount(e)})),(0,n.reaction)((()=>this.lastDeal),(e=>{this.addAccountDeals([e])})))}constructor(e){let a=e.analytics;super(e.createConnection),this.disposers=[],this.analytics=a}};(0,i.gn)([n.observable.ref],d.prototype,"scrollToHash",void 0),(0,i.gn)([(0,r.onBind)(o.ACCOUNT_SERVICE)],d.prototype,"onBind",null),(0,i.gn)([(0,r.onBind)(o.PAIR_SERVICE_SPT)],d.prototype,"onBindPairService",null),(0,i.gn)([n.action],d.prototype,"scrollTo",null),(0,i.gn)([r.onStop],d.prototype,"onStop",null),d=(0,i.gn)([(0,r.bindAs)(c.Oi)],d)},4218:(e,a,s)=>{"use strict";s.d(a,{I:()=>n});var i=s(99287),r=s(71978);const n=()=>new i.Op(r.Z,(()=>{const e=new i.CF;return"#stocks-deals-history-low-loading"===window.location.hash&&e.setLimit(5),e})(),"spt")},37273:(e,a,s)=>{"use strict";s.d(a,{G:()=>o,a:()=>i.a});var i=s(18184),r=s(24762),n=s(4218);function o(e){return e(new i.a({analytics:new r.x,createConnection:n.I}),{config:i.a.binderConfig})}},45716:(e,a,s)=>{"use strict";s.d(a,{O:()=>m});var i=s(37323),r=s(59312),n=s(60521),o=s(28660),l=s(26763),c=s(18207),d=s(53088),u=s(73730);let m=class StocksPortfolioService extends c.Oo{static parseAssetPosition(e){return{pairId:e.asset,avgBuyPrice:e.avg_buy_price,avgSaleSuccessFeePerc:e.avg_sale_success_fee_perc,grossPnl:e.gross_pnl,investments:e.investments,netPnl:e.net_pnl,netPnlPerc:e.net_pnl_perc,netRevenue:e.net_revenue,quantity:e.quantity_float,saleSuccessFee:e.sale_success_fee,sellPrice:e.sell_price,value:e.value}}onBind(e,a){this.accountService=a,e.availableProjects.spt&&(this.webSocket.onAssetPositionChange((e=>this.setAssetPosition(StocksPortfolioService.parseAssetPosition(e)))),this.load())}get positionsDetailsByCurrentAccountId(){return this.positionsDetailsByAccountId[this.accountService.selectedAccount.id]}hasPositionDetails(e){var a,s;const i=null===(a=this.accountService)||void 0===a||null===(s=a.selectedAccount)||void 0===s?void 0:s.id;return Boolean(i)&&super.hasPositionDetails(e,i)}getPositionDetails(e){var a,s;const i=null===(a=this.accountService)||void 0===a||null===(s=a.selectedAccount)||void 0===s?void 0:s.id;return i?super.getPositionDetails(e,i):null}getPositionQuantity(e){var a;const s=(null!==(a=this.getPositionDetails(e))&&void 0!==a?a:{}).quantity;return void 0===s?0:s}checkIsPortfolioExistForSelectedAccount(){var e,a;const s=null===(e=this.accountService)||void 0===e||null===(a=e.selectedAccount)||void 0===a?void 0:a.id;return Boolean(s)&&super.checkIsPortfolioExist(s)}subscribeAssetPosition(e){this.webSocket.subscribeAssetPositionChanges(this.accountService.selectedAccount.id,e).then((e=>{this.setAssetPosition(StocksPortfolioService.parseAssetPosition(e))}))}unsubscribeAssetPosition(){this.webSocket.unsubscribeAssetPositionChanges(),setTimeout((()=>{this.assetPosition=null}),200)}setAssetPosition(e){if(this.assetPosition)for(const a in e)this.assetPosition[a]=e[a];else this.assetPosition=(0,i.Z)({},e)}constructor(e){super(new u.X(e.add())),this.assetPosition=null,this.getPositionDetails=this.getPositionDetails.bind(this),this.checkIsPortfolioExistForSelectedAccount=this.checkIsPortfolioExistForSelectedAccount.bind(this)}};(0,r.gn)([n.observable],m.prototype,"assetPosition",void 0),(0,r.gn)([(0,o.onBind)(l.APP_SERVICE,l.ACCOUNT_SERVICE)],m.prototype,"onBind",null),(0,r.gn)([n.computed],m.prototype,"positionsDetailsByCurrentAccountId",null),(0,r.gn)([n.action.bound],m.prototype,"setAssetPosition",null),m=(0,r.gn)([(0,o.bindAs)(d.oi)],m)},73730:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(86933);class WebSocket{loadPositionsDetails(e){return new Promise(((a,s)=>{this.connect.request({event_name:i.F$.POSITION_DETAILS_LIST}).onResponse(((i,r)=>{r?s(r):(e(i),a())}))}))}onPositionsDetailsChange(e){this.listeners[i.F$.POSITION_DETAILS_CHANGE]=e}onAssetPositionChange(e){this.listeners[i.F$.ASSET_POSITION_CHANGE]=e}subscribeAssetPositionChanges(e,a){return new Promise(((s,r)=>{this.connect.request({event_name:i.F$.ASSET_SUBSCRIBE,data:[{account_id:e,asset:a,group:"real"}]}).onResponse(((e,a)=>{a?r(a):s(e[0])}))}))}unsubscribeAssetPositionChanges(){this.connect.request({event_name:i.F$.ASSET_UNSUBSCRIBE})}subscribe(){this.connect.onPush(((e,a)=>{e===i.F$.POSITION_DETAILS_CHANGE&&this.listeners[i.F$.POSITION_DETAILS_CHANGE](a),e===i.F$.ASSET_POSITION_CHANGE&&this.listeners[i.F$.ASSET_POSITION_CHANGE](a[0])})),this.connect.subscribeEventList([i.gi.POSITION_DETAILS_CHANGE])}constructor(e){this.listeners={[i.F$.POSITION_DETAILS_CHANGE]:()=>{},[i.F$.ASSET_POSITION_CHANGE]:()=>{}},this.connect=e,this.loadPositionsDetails=this.loadPositionsDetails.bind(this),this.onPositionsDetailsChange=this.onPositionsDetailsChange.bind(this),this.subscribe=this.subscribe.bind(this)}}},76021:(e,a,s)=>{"use strict";s.d(a,{O:()=>i.O});var i=s(45716)},17855:(e,a,s)=>{"use strict";s.d(a,{M:()=>i});const i=e=>{let a=e.politics,s=e.accountType;var i,r;const n=!!(null==a||null===(i=a.stock_price_trades)||void 0===i?void 0:i.demo_trading_enabled),o=!!(null==a||null===(r=a.stock_price_trades)||void 0===r?void 0:r.real_trading_enabled);let l=!1;return(n&&"demo"===s||o&&"real"===s)&&(l=!0),{isAvailable:l,isDemoAvailable:n,isRealAvailable:o}}},24059:(e,a,s)=>{"use strict";var i=s(29257),r=s(47208),n=s(30654),o=s(65629);l=(0,i.Z)((function*(e){let a=e.minimizeOnStart;var s;const i=yield(0,o.pS)(),l=null===(s=i.currentSupportChat)||void 0===s?void 0:s.activeChat;if((0,o.kf)(i.currentSupportChat)){const e=i.hasAuthorizedUser,s=i.lang,o=i.params,l=i.chatGroups,c=()=>{(0,r.NL)({lang:s,params:o,groupId:l.lc,minimizeOnStart:a,fetchToken:e?n.$.getLivechatToken:n.$.getLivechatTokenUnauthorized})};return{open:c,show:c}}const c=(0,r.Z$)(l||"");return c?c(i):void 0}));var l},1729:(e,a,s)=>{"use strict";s.d(a,{Oz:()=>i.O,oN:()=>i.o});var i=s(61725);s(24059)},75329:(e,a,s)=>{"use strict";s.d(a,{o:()=>c});var i=s(3121),r=s(47208),n=s(27378),o=s(30654),l=s(65629);const c=(0,n.memo)((e=>{let a=e.active,s=e.onHide,c=e.hideOnMinimize,d=e.minimizeOnStart,u=e.dontHide;const m=(()=>{const e=(0,i.Z)((0,n.useState)(),2),a=e[0],s=e[1];return(0,n.useEffect)((()=>{a||(0,l.pS)().then(s).catch((()=>null))}),[]),a})();if(!m)return null;const p=m.hasAuthorizedUser,h=m.lang,v=m.params,g=m.chatGroups;return n.createElement(r._E,{active:a,onHide:s,dontHide:u,hideOnMinimize:c,minimizeOnStart:d,groupId:g.lc,lang:h,params:v,fetchToken:p?o.$.getLivechatToken:o.$.getLivechatTokenUnauthorized})}))},61725:(e,a,s)=>{"use strict";s.d(a,{O:()=>r.O,o:()=>i.o});var i=s(75329),r=s(68121)},68121:(e,a,s)=>{"use strict";s.d(a,{O:()=>d});var i=s(29257),r=s(37323),n=s(64356),o=s(47208),l=s(30654),c=s(65629);const d=(u=(0,i.Z)((function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=yield(0,c.pS)(),s=a.hasAuthorizedUser,i=a.lang,d=a.params,u=a.isSupportChatUnavaliable,m=a.chatGroups;if(!u)return(0,o.NL)((0,n.Z)((0,r.Z)({},e),{params:d,lang:i,groupId:m.lc,fetchToken:s?l.$.getLivechatToken:l.$.getLivechatTokenUnauthorized}))})),function(){return u.apply(this,arguments)});var u},93161:(e,a,s)=>{"use strict";s.d(a,{g:()=>c});var i=s(37323),r=s(47208),n=s(55953),o=s(89609);const l={[r.Ki.LIVECHAT]:void 0,[r.Ki.LIVETEX]:void 0,[r.Ki.ZENDESK]:void 0},c=e=>{let a=e.chat;return(0,i.Z)({},l,(0,o.k)(a)?{[r.Ki.LIVECHAT]:a.chatId}:{},(0,n.D1)()?{[r.Ki.LIVECHAT]:"35"}:{})}},65629:(e,a,s)=>{"use strict";s.d(a,{kf:()=>i.k,pS:()=>r.p});var i=s(89609),r=s(82800)},89609:(e,a,s)=>{"use strict";s.d(a,{k:()=>r});var i=s(47208);const r=e=>(null==e?void 0:e.activeChat)===i.Ki.LIVECHAT},55251:(e,a,s)=>{"use strict";s.d(a,{Y:()=>i});const i=e=>e.restrictions.some((e=>{let a=e.operation,s=e.status;return"support_chat"===a&&2===s}))},82800:(e,a,s)=>{"use strict";s.d(a,{p:()=>g});var i=s(29257),r=s(3121),n=s(51649),o=s(15861),l=s(38702),c=s(30654),d=s(93161),u=s(55251);const m=(p=(0,i.Z)((function*(){if(!(yield(0,l.n5)()))return{user:null,serviceLevels:null,restrictions:[]};try{const i=yield c.$.userValues(["data","service_levels","restrictions"]);var e,a,s;return{user:null!==(e=i.data)&&void 0!==e?e:null,serviceLevels:null!==(a=i.service_levels)&&void 0!==a?a:null,restrictions:null!==(s=i.restrictions)&&void 0!==s?s:[]}}catch(e){return{user:null,serviceLevels:null,restrictions:[]}}})),function(){return p.apply(this,arguments)});var p;const h=function(){var e=(0,i.Z)((function*(){try{const e=yield c.$.platformValues(["current_locale","support_chat"]);return{lang:e.current_locale.split("_")[0],currentSupportChat:(0,o.c)(e.support_chat)}}catch(e){return{lang:"",currentSupportChat:null}}}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((function*(){try{return yield c.$.getLivechatParams()}catch(e){return[]}}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((function*(){const e=(0,r.Z)(yield Promise.all([h(),m(),v()]),3),a=e[0],s=a.lang,i=a.currentSupportChat,o=e[1],l=o.user,c=o.serviceLevels,p=o.restrictions,g=e[2];return{chatGroups:(0,d.g)({chat:i}),hasAuthorizedUser:!(0,n.kK)(l),serviceLevels:c,isSupportChatUnavaliable:(0,u.Y)({restrictions:p}),lang:s,currentSupportChat:i,params:g,user:l,restrictions:p}}));return function(){return e.apply(this,arguments)}}()},74772:(e,a,s)=>{"use strict";s.d(a,{A:()=>r,V:()=>n});var i=s(84584);const r=(0,i.Z)(),n=(0,i.Z)()},94306:(e,a,s)=>{"use strict";s.d(a,{Z:()=>o});var i=s(87561),r=s(89119),n=s(96667);const o=(0,i.P4)(r.Z,n.Z.add())},72407:(e,a,s)=>{"use strict";s.d(a,{T:()=>u});var i=s(27378),r=s(60042),n=s.n(r),o=s(6827),l=s(67522),c=s(56342),d=s(35100);const u=(0,i.memo)((e=>{const a=e.className,s=e.size,r=e.href;let u=null;switch(s){case"small":u=i.createElement(o.E,null);break;case"middle":u=i.createElement(l.M,null);break;default:u=i.createElement(c.V,null)}return i.createElement("div",{className:n()(d.Z.logo,a)},r?i.createElement("a",{className:d.Z.link,href:r},u):u)}));u.displayName="Logo"},56342:(e,a,s)=>{"use strict";s.d(a,{V:()=>r});var i=s(27378);const r=(0,i.memo)((()=>i.createElement("svg",{fill:"none",height:"18",viewBox:"0 0 142 18",width:"142"},i.createElement("path",{fill:"currentColor",d:"M20.5 3v10.5H26V17h-9V3zm12 4.5L35 3h4v.5L34.2 11v6h-3.4v-6L26 3.5V3h4l2.5 4.5zM43 3l5 6 5-6h2v14h-3.5v-6.5L48.3 14h-.5l-3.3-3.5V17H41V3zm21 0c6.7 0 6.7 10 0 10h-2.5v4H58V3h6zm.2 3h-2.7v4h2.7c2.1 0 2.1-4 0-4zm10.8.5V3h10v3.5h-3.2V17h-3.6V6.5zM94 3c6 0 7 7 3 9l3 4.5v.5h-4l-2.5-4h-2v4H88V3h6zm.2 3h-2.8v3.5h2.8c2.1 0 2.1-3.5 0-3.5zM110 3l6 13.5v.5h-3.5l-.8-1.8h-5.4l-.8 1.8H102v-.5L108 3h2zm-1 5.5-1.8 4h3.5l-1.7-4zM123.2 3c9 0 9 14 0 14H118V3h5.2zm0 3.5h-1.8v7h1.8c4.5 0 4.5-7 0-7zm13.3 7.5h5.5v3h-9V3h9v3h-5.5v2.5h4.5v3h-4.5zM14 10c0 2.4-.9 4.1-2.2 5.3l-2.3-2.5c.6-.6 1-1.5 1-2.7 0-5-7-5-7 0 0 1.2.4 2.1 1 2.7l-2.3 2.5C.9 14.1 0 12.4 0 10 0 .7 14 .7 14 10z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#f15131",d:"m53 0-5 6-5-6z"}),i.createElement("path",{fill:"#1fbf75",d:"m2 18 5-6 5 6z"}))))},67522:(e,a,s)=>{"use strict";s.d(a,{M:()=>r});var i=s(27378);const r=e=>i.createElement("svg",Object.assign({},e,{width:"69",height:"37",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 3v10.498H26V17h-9V3h3.5zM32.55 7.5L34.996 3H39v.5l-4.75 7.498V17h-3.5v-6.002L26 3.5V3h4.002l2.448 4.5h.1zM42.998 3L48 8.998 53 3h2v14h-3.5v-6.5L48.25 14h-.5l-3.25-3.5V17H41V3h1.998zM63.999 3c6.668 0 6.668 10.004 0 10.004l-2.496-.001V17H58V3h5.999zm.25 3h-2.75v3.997h2.75c2.08 0 2.08-3.998 0-3.998zM1 26.5V23h10v3.5H7.75V37h-3.5V26.5H1zM20 23c6 0 6.994 7 3 8.997l3 4.503v.5h-4l-2.5-4h-2v4h-3.488L14 23h6zm.25 3H17.5v3.5h2.75c2.003 0 2.003-3.5 0-3.5zM36 23l6 13.5v.5h-3.5l-.78-1.754h-5.444L31.5 37H28v-.5L34 23h2zm-1 5.501L33.25 32.5h3.5L35 28.501zM49.25 23c9 0 9 14 0 14H44V23h5.25zm0 3.5H47.5v7h1.75c4.435 0 4.435-7 0-7zM62.5 34H68v3h-9V23h9v3h-5.5v2.5H67v3h-4.5V34zM14 10c0 9.333-14 9.333-14 0C.001.667 14 .667 14 10zM3.5 10c0 5 7 5 7 0s-7-5-7 0z",fill:"#172331"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 18l5-6 5 6H2z",fill:"#1FBF75"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53 0l-4.999 6L43 0h10z",fill:"#F15131"}))},6827:(e,a,s)=>{"use strict";s.d(a,{E:()=>r});var i=s(27378);const r=(0,i.memo)((()=>i.createElement("svg",{width:"28",height:"30",viewBox:"0 0 14 15"},i.createElement("g",{transform:"translate(2 8.25)"},i.createElement("path",{fill:"#1FBF75",d:"m4.8828.6523-3.948 5.108c-.075.098-.006.24.118.24h7.894c.124 0 .194-.142.119-.24L5.1168.6523c-.059-.077-.174-.077-.234 0"})),i.createElement("g",{transform:"translate(0 -.75)"},i.createElement("path",{fill:"currentColor",d:"m2.7324 13.0918 1.954-2.561c.046-.059.036-.142-.02-.193-.9-.81-1.391-2.063-1.066-3.433.298-1.257 1.32-2.277 2.581-2.563 2.289-.518 4.319 1.208 4.319 3.408 0 1.031-.456 1.948-1.166 2.588-.057.051-.067.134-.021.194l1.954 2.56c.052.068.153.081.219.025 1.481-1.238 2.444-3.076 2.51-5.142.122-3.835-3.044-7.162-6.88-7.224-3.919-.063-7.116 3.094-7.116 6.999 0 2.157.978 4.084 2.513 5.367.066.056.167.043.219-.025"})))))},97665:(e,a,s)=>{"use strict";s.d(a,{I:()=>i});const i={MAIN:"payments_sidebar_main"}},87427:(e,a,s)=>{"use strict";s.d(a,{q:()=>A});var i=s(74199),r=s(97665),n=s(27378),o=s(77740),l=s(17302),c=s(21182),d=s(82844);const u=()=>n.createElement("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4a8 8 0 11-5.65 13.66 1 1 0 00-1.42 1.42A10 10 0 102.83 8L2.2 6.49a1 1 0 00-1.84.79l1.78 4.13a1 1 0 001.32.53l4.13-1.78a1 1 0 10-.79-1.84l-2.32 1A8.03 8.03 0 0112 4z",fill:"currentColor"}),n.createElement("path",{d:"M12 7a1 1 0 011 1v4.59l1.91 1.91a1 1 0 01-1.41 1.41l-2.15-2.14a1.2 1.2 0 01-.35-.85V8a1 1 0 011-1z",fill:"currentColor"}));var m=s(72735),p=s(48083),h=s(77554),v=s(23735);const g=()=>{(0,m.gG)({origin:"payments_sidebar"}),(0,p.xv)(),(0,v.L)({event:"uaGtmEvents_clicks",eventCategory:"payments_tab",eventAction:"open_tab",eventLabel:"open_tab"})},_=()=>{(0,h.Bf)(null),(0,p.xv)()},f=()=>{window.open("/cabinet?origin=payments_sidebar#tab=finhistory","_blank")};var E=s(97422);const S=(0,c.W)(E.N),y=()=>n.createElement(l.xu,{gap:"m"},n.createElement(l.zx,{dataTest:"payments_sidebar_deposit_button",onClick:g,variant:"primary",color:"accent",startIcon:n.createElement(o.nr$,null),fullWidth:!0,size:"l"},n.createElement(d._,{id:"cabinet_tab_recharge",defaultMessage:"Deposit"})),n.createElement(S,null),n.createElement(l.zx,{dataTest:"payments_sidebar_internal_transfer_button",onClick:_,variant:"secondary",startIcon:n.createElement(o.hS$,null),fullWidth:!0,size:"l"},n.createElement(d._,{id:"transfer",defaultMessage:"Transfer"})),n.createElement(l.zx,{dataTest:"payments_sidebar_transactions_button",onClick:f,variant:"secondary",startIcon:n.createElement(u,null),fullWidth:!0,size:"l"},n.createElement(d._,{id:"cabinet_tab_finhistory",defaultMessage:"Transactions"}))),b=n.createElement(d._,{id:"payments",defaultMessage:"Payments"}),C={id:r.I.MAIN,title:b,component:()=>n.createElement(l.xu,{padding:["l"]},n.createElement(y,null)),isCloseDisabled:!1},T={payments:{rootId:r.I.MAIN,items:[C]}},A=new i.Ku(T)},48083:(e,a,s)=>{"use strict";s.d(a,{Ez:()=>o,qB:()=>l,xv:()=>n});var i=s(87427),r=s(97665);const n=()=>{i.q.close()},o=()=>{i.q.openById(r.I.MAIN)},l=()=>{i.q.close()}},97422:(e,a,s)=>{"use strict";s.d(a,{N:()=>i});const i=(0,s(84584).Z)()},58732:(e,a,s)=>{"use strict";s.d(a,{B:()=>_});var i=s(24459),r=s(3121),n=s(27378),o=s(60042),l=s.n(o),c=s(29609),d=s(95601),u=s(17302),m=s(77740),p=s(74809),h=s(2519),v=s(17056);const g={appear:v.Z.host_transition_enter,appearActive:v.Z.host_transition_enterActive,enter:v.Z.host_transition_enter,enterActive:v.Z.host_transition_enterActive,exit:v.Z.host_transition_exit,exitActive:v.Z.host_transition_exitActive},_=n.memo((e=>{let a=e.in,s=e.anchorEl,o=e.placement,_=e.distance,f=e.className,E=e.children,S=e.fitSizeTo,y=e.autoUpdate,b=void 0===y||y,C=e.disablePortal,T=e.onCloseAction,A=e.onEnter,k=e.onExited;const w=(0,u.Fg)().dir,N=n.useContext(d.VY).rootRef,R=(0,r.Z)(n.useState(null),2),I=R[0],D=R[1],O=n.useCallback((()=>{a&&(null==T||T("closeClicked"))}),[a,T]),L=n.useCallback((()=>{a&&(null==T||T("outsideClicked"))}),[a,T]);var M;return(0,p.O)(I,L,null!==(M=N.current)&&void 0!==M?M:void 0),n.createElement(u.rD,{open:Boolean(s)&&Boolean(a),arrow:!0,anchorEl:s,placement:o,className:v.Z.wrapper,fitSizeTo:S,dir:w,disablePortal:C,autoUpdate:b,distance:_,transition:!0},(e=>{var a=e.basePlacement,s=e.arrowProps,r=e.TransitionProps,o=void 0===r?{}:r,d=o.onEnter,p=o.onExited,_=(0,i.Z)(e.TransitionProps,["onEnter","onExited"]);return n.createElement(c.Z,Object.assign({appear:!0,timeout:300,classNames:g,onEnter:(0,h.b)(d,A),onExited:(0,h.b)(p,k)},_),n.createElement("div",{ref:D,className:l()(v.Z.host,{[v.Z.host_size_content]:"content"===S,[v.Z.host_size_viewport]:"viewport"===S},s&&{[v.Z.host_has_arrowTop]:"top"===a,[v.Z.host_has_arrowRight]:"right"===a,[v.Z.host_has_arrowBottom]:"bottom"===a,[v.Z.host_has_arrowLeft]:"left"===a},f),"data-test":"tutorial-tip"},n.createElement("div",{className:v.Z.content},n.createElement("div",{className:v.Z.text},E),n.createElement(u.Xd,{className:v.Z.closeButton,onClick:O},n.createElement(m.bMz,null))),s&&n.createElement("div",Object.assign({className:v.Z.arrow},s))))}))}));_.displayName="components(TutorialTip)"},57581:(e,a,s)=>{"use strict";s.d(a,{B:()=>i.B});var i=s(58732)},74809:(e,a,s)=>{"use strict";s.d(a,{O:()=>r});var i=s(27378);const r=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r=arguments.length>3?arguments[3]:void 0;const n=i.useCallback((s=>{const i=s.target;e&&!e.contains(i)&&i instanceof Element&&!(null==r?void 0:r.some((e=>i.closest(e))))&&a()}),[e,a,r]);i.useLayoutEffect((()=>(e&&(s.addEventListener("click",n,!1),s.addEventListener("touchstart",n,!1)),()=>{s.removeEventListener("click",n,!1),s.removeEventListener("touchstart",n,!1)})),[e,s,n])}},2519:(e,a,s)=>{"use strict";function i(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return a.reduce(((e,a)=>null==a?e:function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];e.apply(this,i),a.apply(this,i)}),(()=>{}))}s.d(a,{b:()=>i})},98442:(e,a,s)=>{"use strict";s.d(a,{e:()=>d});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(77740),c=s(86559);const d=e=>{let a=e.className,s=e.onClick,r=e.dataTest,d=e.onTop,u=void 0===d||d;return i.createElement("div",{className:n()(c.Z.host,u?c.Z.visible:c.Z.hidden,a)},i.createElement(o.Ei,{variant:"secondary",size:"s",onClick:s,icon:i.createElement(l.CzJ,null),dataTest:r}))};d.displayName="olymp(components)(UpButton)"},14999:(e,a,s)=>{"use strict";s.d(a,{VH:()=>d,ZL:()=>c});var i=s(27378),r=s(82844),n=s(77740),o=s(29258),l=s(90386);const c={ANDROID:{FOREX:"https://play.google.com/store/apps/details?id=com.olymptrade.forex",OPTIONS:"https://app.appsflyer.com/com.ticno.olymptrade",APK:"https://apps.".concat(o.CD,"/apk/Otp-latest-app.apk"),PLUS:"https://play.google.com/store/apps/details?id=com.olymptrade.plus"},IOS:{OPTIONS:"https://app.appsflyer.com/id1053416106",PLUS:"https://apps.apple.com/IN/app/id1496363480"},MACOS:{OTP:"https://apps.".concat(o.CD,"/Olymp_Trade_Community_Version_mac_latest.dmg")},WINDOWS:{OTP:{X32:"https://apps.".concat(o.CD,"/Olymp_Trade_Community_Version_win32_latest.exe"),X64:"https://apps.".concat(o.CD,"/Olymp_Trade_Community_Version_win64_latest.exe")}},WEB:{OTP:"https://olymptrade.com"},HUAWEI:{OTP:"https://appgallery7.huawei.com/#/app/C101680437"},XIAOMI:{OTP:"mimarket://details?id=com.ticno.olymptrade"},PLAYMARKET:{OTP:"https://playmarket.store/detail/com.ticno.olymptrade"},APKPURE:{OTP:"https://apkpure.com/olymp-trade-%E2%80%93-online-trading-app/com.ticno.olymptrade"},SAMSUNG:{OTP:"https://apps.samsung.com/appquery/appDetail.as?appId=com.ticno.olymptrade"}},d=[{type:"android",icon:n.gYi,content:{title:"Google Play",text:i.createElement(r._,{id:"home_get_it_on",defaultMessage:"Get it on"})},href:(0,l.k)(c.ANDROID.OPTIONS,"android",""),productName:"akma",linkType:"link",productType:"google_play"},{type:"android-apk",icon:n.W2r,content:{title:"Android",text:i.createElement(r._,{id:"download_mobile_apk_title",defaultMessage:"Download .APK for"}),size:"19,66 Mb"},productName:"akma",linkType:"app",productType:"android_apk"},{type:"ios",icon:n.Xqp,content:{title:"App Store",text:i.createElement(r._,{id:"home_download_on_the",defaultMessage:"Download on the"})},href:(0,l.k)(c.IOS.OPTIONS,"ios",""),productName:"akma",linkType:"link",productType:"app_store"},{type:"macos",icon:n.TGA,content:{title:"macOS",text:i.createElement(r._,{id:"home_download_app_for",defaultMessage:"Download App for"}),size:"66 Mb"},href:c.MACOS.OTP,productName:"akma",linkType:"app",productType:"mac_os"},{type:"windows-32",icon:n.job,content:{title:"Windows x32",text:i.createElement(r._,{id:"home_download_app_for",defaultMessage:"Download App for"}),size:"43,6 Mb"},href:c.WINDOWS.OTP.X32,productName:"akma",linkType:"app",productType:"windows_x32"},{type:"windows-64",icon:n.job,content:{title:"Windows x64",text:i.createElement(r._,{id:"home_download_app_for",defaultMessage:"Download App for"}),size:"45,7 Mb"},href:c.WINDOWS.OTP.X64,productName:"akma",linkType:"app",productType:"windows_x64"},{type:"web",icon:n.vzf,content:{title:"Web"},href:c.WEB.OTP,productName:"akma",linkType:"link",productType:"web"},{type:"huawei",icon:n.W6V,content:{title:"Huawei",text:i.createElement(r._,{id:"home_download_on_the",defaultMessage:"Download on the"})},href:c.HUAWEI.OTP,productName:"akma",linkType:"link",productType:"huawei"},{type:"playmarket",icon:n.mp9,content:{title:"PlayMarket",text:i.createElement(r._,{id:"home_download_on_the",defaultMessage:"Download on the"})},href:c.PLAYMARKET.OTP,productName:"akma",linkType:"link",productType:"playmarket"},{type:"apkpure",icon:n.xGG,content:{title:"APKpure",text:i.createElement(r._,{id:"home_download_on_the",defaultMessage:"Download on the"})},href:c.APKPURE.OTP,productName:"akma",linkType:"link",productType:"apkpure"},{type:"xiaomi",icon:n.ExP,content:{title:"Xiaomi",text:i.createElement(r._,{id:"home_download_on_the",defaultMessage:"Download on the"})},href:c.XIAOMI.OTP,productName:"akma",linkType:"link",productType:"xiaomi"},{type:"samsung",icon:n.TYc,content:{title:"Galaxy Store",text:i.createElement(r._,{id:"home_download_on_the",defaultMessage:"Download on the"})},href:c.SAMSUNG.OTP,productName:"akma",linkType:"link",productType:"samsung"}];n.Xqp,r._,c.IOS.PLUS,n.gYi,r._,c.ANDROID.PLUS},90386:(e,a,s)=>{"use strict";s.d(a,{k:()=>d});var i=s(37323),r=s(72124),n=s(41504);function o(e){if(void 0!==e&&""!==e){if("string"==typeof e)return e;if(Array.isArray(e)&&"string"==typeof e[0]&&""!==e[0])return e[0]}}function l(e){return e.clickid||""}function c(e,a,s,n){const c="android",d="string"==typeof n?{af_dp:"".concat("https://uolinkopen.com","/").concat(n)}:{};if("main_page"!==a.pid&&(s===c||"ios"===s)){var u,m;const n=function(e){let a=e.lref,s=e.ref,i=e.pid,r=i;const n=o(a),l=o(s);return n&&((n.startsWith("sm_vk")||n.startsWith("sm_pt"))&&(r="vkontakte_int"),"sm_pt_sjvk"!==n&&"sm_pt_il"!==n&&"sm_pt_sjok"!==n&&"sm_pt_sv-pr"!==n&&"sm_pt_sjfb"!==n||(r="cpa"),n.startsWith("sm_inst")&&(r="instagramm"),n.startsWith("tt_tmr")&&(r="mail.ru_int"),n.startsWith("sm_you")&&(r="youtube"),n.startsWith("sm_st")&&(r="article"),n.startsWith("gdn")&&(r="GDN"),n.startsWith("cpa")&&(r="cpa"),n.startsWith("tr")&&(r="tr"),n.startsWith("push")&&(r="push"),n.startsWith("bn")&&(r="bn"),n.startsWith("p")&&(r="p")),l&&((l.startsWith("gdn_")||l.startsWith("g_"))&&(r="googleadwords_int"),l.startsWith("pt_")&&(r=l.startsWith("pt_adquantum")?i||void 0:"Facebook_landing"),l.startsWith("fb_")&&(r="Facebook%20Ads"),l.startsWith("sem_coccoc")&&(r="coccoc"),l.startsWith("brand_orm")&&(r="brand_orm"),l.startsWith("brand_com")&&(r="brand_com"),l.startsWith("brand_smm")&&(r="brand_smm"),l.startsWith("brand_blog")&&(r="brand_blog"),l.startsWith("brand_pr")&&(r="brand_pr"),l.startsWith("inner_push")&&(r="inner_push"),l.startsWith("inner_sms")&&(r="inner_sms"),l.startsWith("inner_email")&&(r="inner_email"),l.startsWith("dv_")&&(r="doubleclick_int"),l.startsWith("scl_snap_")&&(r="snapchat_int")),r}(a);if(!n)return(0,r.stringifyUrl)({url:e,query:{pid:"main_page"}});let p="",h={},v={gclid:""},g="",_="",f="",E={clickid:l(a)};const S=null===(u=o(a.utm_campaign))||void 0===u?void 0:u.split("_");S&&(p=String(parseInt(S[S.length-1].replace(/\D+/g,""))),g=function(e){var a,s;const i=e.ref,r=e.utm_campaign,n=o(i);if(n){if(n.startsWith("fb_")||n.startsWith("pt_"))return"fb";if(n.startsWith("scl_snap_"))return"snap"}return(null===(s=null===(a=o(r))||void 0===a?void 0:a.split("_"))||void 0===s?void 0:s[0])||""}(a)),void 0!==a.lref&&""!==a.lref||(a.lref=a.ref);const y=null===(m=o(a.utm_content))||void 0===m?void 0:m.split("_");switch(y&&(_=y[0],f=y.pop()),s){case c:h={google_id:"{google_aid}"};break;case"ios":h={ios_ifa:"{ios_ifa}"}}return!a.ref||0!==a.ref.indexOf("gdn_")&&0!==a.ref.indexOf("g_")||(E={clickid:"{logid}",af_click_lookback:"7d",af_viewthrough_lookback:"1d"},v={gclid:a.gclid}),(0,r.stringifyUrl)({url:e,query:(0,i.Z)({pid:n,c:a.utm_campaign,af_c_id:p,af_siteid:a.site_id,af_adset:_,af_ad_id:f,af_ad:a.utm_content,af_sub1:a.lref,af_sub2:g,af_sub3:a.utm_term,af_sub4:a.gclid,af_sub5:a.utm_term},d,E,v,h)})}return(0,r.stringifyUrl)({url:e,query:(0,i.Z)({pid:"main_page"},d)})}const d=(e,a,s)=>c(e,(0,n.d)(),a,s)},41504:(e,a,s)=>{"use strict";s.d(a,{d:()=>o});var i=s(72124),r=s(57615),n=s(29042);function o(){const e=new r._({namespace:"utm_labels_store_buttons",backend:new n.u});let a={pid:"main_page"};const s=(0,i.parse)(window.location.search),o="ref"in s||"pid"in s;return o||!e.get("ref")&&!e.get("pid")?o?(e.set("ref",s.ref),e.set("lref",s.lref),e.set("pid",s.pid),e.set("utm_campaign",s.utm_campaign),e.set("utm_content",s.utm_content),e.set("lead_param",s.lead_param),e.set("utm_term",s.utm_term),e.set("lrefch",s.lrefch),e.set("clickid",s.clickid),e.set("gclid",s.gclid),e.set("site_id",window.location.pathname.slice(1)),s):a:(a={ref:e.get("ref"),lref:e.get("lref"),pid:e.get("pid"),utm_campaign:e.get("utm_campaign"),utm_content:e.get("utm_content"),lead_param:e.get("lead_param"),utm_term:e.get("utm_term"),lrefch:e.get("lrefch"),clickid:e.get("clickid"),gclid:e.get("gclid"),site_id:e.get("site_id")},a)}o()},29258:(e,a,s)=>{"use strict";s.d(a,{CD:()=>n,yJ:()=>o});var i=s(70275),r=s(35377);const n=(0,i.X)(),o=("https://blog.".concat(n),[r.si.LIGHT])},65990:(e,a,s)=>{"use strict";s.d(a,{d:()=>i});const i={fx:{NAMESPACE:"pair_service_fx",FAVORITE_ASSETS:"favorite_assets_fx"},bo:{NAMESPACE:"pair_service_ftt",FAVORITE_ASSETS:"favorite_assets_bo"},spt:{NAMESPACE:"pair_service_spt",FAVORITE_ASSETS:"favorite_assets_spt"},PROJECT:"project",USER_ID:"uid",AVAILABLE_PROJECTS:"available_projects",TRADE_FRAMES_FIELD:"@plf/trade-frames"}},86933:(e,a,s)=>{"use strict";s.d(a,{D3:()=>_,F$:()=>l,Jm:()=>m,QH:()=>c,U3:()=>n,WJ:()=>p,gi:()=>v,mi:()=>r,nE:()=>h,q5:()=>d,tN:()=>g,y$:()=>o});var i=s(66713);const r={BALANCE_ACCOUNT_CLOSED:"balance_account:closed",BALANCE_ACCOUNT_UPDATED:"balance_account:updated",BALANCE_ACCOUNT_CREATED:"balance_account:created",BALANCE_ACCOUNT_LIST:"balance_account:list",BALANCE_CHANGE:"balance:change:v3",PROMO_CODE_CREATED:"promocodes:created",PROMO_CODE_REMOVED:"promocodes:removed",PROMO_CODE_UPDATED:"promocodes:updated",PROMO_OFFER_UPDATED:"promo_offer:updated",DEALS_SHARING_FTT:"sh:deals:sharing:ftt",DEALS_SHARING_FX:"sh:deals:sharing:fx",DEALS_SHARING_SPT:"sh:deals:sharing:spt",NOTIFICATION:"notification:save",BATTLE_ROOMS_CONFIG_GET:"battle_rooms:config:get",BATTLE_ROOMS_STATE_GET:"battle_rooms:state:get",BATTLE_ROOMS_STATE_CHANGED:"battle_rooms:state:changed",BATTLE_ROOMS_HISTORY_GET:"battle_rooms:history:get",BATTLE_ROOMS_SEARCH_START:"battle_rooms:search:start",BATTLE_ROOMS_SEARCH_RESTRICTION_GET:"battle_rooms:search:restriction:get",BATTLE_ROOMS_SEARCH_STOP:"battle_rooms:search:stop",BATTLE_ROOMS_CONFIRMATION_CHOOSE:"battle_rooms:confirmation:choose",BATTLE_ROOMS_LEADERBOARD_CHANGED:"battle_rooms:leaderboard:changed",BATTLE_ROOMS_REACTION_RECEIVED:"battle_rooms:reaction:received",BATTLE_ROOMS_REACTION_SUBMIT:"battle_rooms:reaction:submit",BATTLE_ROOMS_DEALS_REQUEST:"battle_rooms:deals:request",BATTLE_ROOMS_DEALS_OPEN:"battle_rooms:deals:open",BATTLE_ROOMS_DEALS_CLOSE:"battle_rooms:deals:close",RATINGS_STATE_GET:"ratings:state:get",RATINGS_LEADERBOARD_CHANGED:"ratings:leaderboard:changed",RATINGS_STATE_CHANGED:"ratings:state:changed",RATINGS_PLAYER_INFO_GET:"ratings:player:info:get",PAYOUT_COMMISSION_CHANGED:"payout:commission_changed",STORIES_ADDED:"stories:added",GURU_NOTIFICATION:"guru:notification",GURU_NOTIFICATION_VIEWED:"guru:notification:viewed",USER_ACTION:"user:action",CONNECTION_CLOSING:"connection:closing",COPY_TRADING_LEADER_BOARD_UPDATE:"copy_trading:leaderboard:updated",COPY_TRADING_SIGNALS_FILTERS_GET:"copy_trading:signals:filters:get",COPY_TRADING_SIGNALS_FILTERS_UPDATE:"copy_trading:signals:filters:update",COPY_TRADING_SIGNALS_ADDED:"copy_trading:signals:added",COPY_TRADING_SIGNALS_ACTIVE_ASSETS_CHANGED:"copy_trading:signals:active_assets:changed",PROMO_COUNT:"promo:count",RESTRICTIONS_CHANGE:"user_restriction:change"},n={ANALYZER_SUCCESS_SUBSCRIBE:"ftt:analyzer:success:subscribe",ANALYZER_SUCCESS_UNSUBSCRIBE:"ftt:analyzer:success:unsubscribe",ANALYZER_SUCCESS_CHANGE:"ftt:analyzer:success:change",ANALYZER_GROUPS_LIST:"ftt:analyzer:groups:list",BALANCE_BONUS_CHANGE:"balance_bonus:change",BALANCE_DEMO_CHANGE:"balance_demo:change",BALANCE_VIRTUAL_CHANGE:"balance_virtual:change",CANDLE_CHANGE:"candle:change",DEAL_AMOUNTS_CHANGE:"deal_amounts:change",CANDLE_SUBSCRIBE:"candles:subscribe",CANDLE_UNSUBSCRIBE:"candles:unsubscribe",CANDLES_HISTORY:"candles:history",CANDLES_SUBSCRIBE:"candles:subscribe",CANDLES_UNSUBSCRIBE:"candles:unsubscribe",CHANGES_SUBSCRIBE:"changes:subscribe",CHANGES_UNSUBSCRIBE:"changes:unsubscribe",DEALS_PROCEED_MIN:"deals:proceed_min",DEALS_OPEN:"deals:open",DEALS_OPENING:"deals:opening",DEALS_DEMO_OPENING:"deals:demo:opening",DEALS_VIRTUAL_OPENING:"deals:virtual:opening",DEALS_CLOSED:"deals:closed",DEALS_CANCELING:"deals:canceling",DEALS_DEMO_CANCELING:"deals:demo:canceling",DEALS_VIRTUAL_CANCELING:"deals:virtual:canceling",DEALS_RECONNECT:"deals:reconnect",DEALS_ORDER_OPENING:"deals:order:opening",DEALS_ORDER_CANCELING:"deals:order:canceling",DEALS_ORDER_CHANGE:"deals:order:change",DEALS_ORDER_RECONNECT:"deals:order:reconnect",DEALS_SUBSCRIBE:"deals:subscribe",DEALS_UNSUBSCRIBE:"deals:unsubscribe",FEATURE_TOGGLE_SET:"feature_toggle:set",INSTRUMENT_CHANGE:"instrument:change:v2",NOTICE_SHOW:"notice:show",NOTICE_CLOSE:"notice:close",OFFERS_ADD:"offers:add",OFFERS_RM:"offers:rm",PAIR_ACTIVE_SET:"pair_active:set",PAIR_SCHEDULE_CHANGE:"pair_schedule:change",PAIR_SCHEDULE_SETUP:"pair_schedule:setup",PAIR_WINPERC_CHANGE:"pair_winperc:change",PAIR_SENTIMENT_CHANGE:"pair_sentiment:change",PAYMENT_SUCCESS:"payment:success",PAYMENT_FAILED:"payment:failed",PAYOUT_HOLD_CREATED:"payout_hold:created",PAYOUT_HOLD_CHANGED:"payout_hold:changed",PAYOUT_HOLD_CANCELLED:"payout_hold:cancelled",PAYOUT_HOLD_APPROVED:"payout_hold:approved",PAYOUT_HOLD_DONE:"payout_hold:done",RISKFREE_DEAL_CHANGE:"riskfree_deal:change",SERVERTIME_UP:"servertime:up",SOURCE_SET:"source:set",STRIKE_CHANGE:"strike:change",SERVER_TIME_CHANGE:"ftt:st:change",SERVER_TIME_REQUEST:"ftt:st:request",TICK_CHANGE:"tick:change",TICKS_SUBSCRIBE:"ftt:ticks:subscribe",TICKS_UNSUBSCRIBE:"ftt:ticks:unsubscribe",TRADING_SIGNALS_ADD:"trading_signals:add:v3",TRADING_SIGNALS_SUBSCRIBE:"trading_signals:subscribe:v3",TRADING_SIGNALS_TIMEFRAMES:"trading_signals:timeframes:v3",TRENDS_SUBSCRIBE:"ftt:trends:subscribe",TRENDS_UNSUBSCRIBE:"ftt:trends:unsubscribe",TRENDS_CHANGE:"ftt:trends:change",USER_CHANGE:"user:change",USER_ONLINE_CHANGE:"user_online:change",STATUS_CHANGED:"status:changed",STATUS_STATE_CHANGED:"status:state:changed",STATUS_TEST_DRIVE_CHANGED:"status:test_drive:changed",TASKS_PROGRESS_CHANGED:"tasks:state:changed",ACHIEVEMENTS_PROGRESS_CHANGED:"achievements:state:changed",KYC_STATE_CHANGED:"kyc:state:changed",FAVORITE_PAIRS_SET:"ftt:favorite_pairs:set",FAVORITE_PAIRS_CHANGE:"ftt:favorite_pairs:change",PRICE_SUB_SUBSCRIBE:"price_sub:subscribe",PRICE_SUB_UNSUBSCRIBE:"price_sub:unsubscribe",PRICE_SUB_LIST:"price_sub:list",PRICE_SUB_CHANGE:"price_sub:change"},o={CANDLE_CHANGE:"fx_candle:change",CANDLES_ALL:"fx_candles:all",CANDLES_HISTORY:"fx_candles:history",CANDLES_SUBSCRIBE:"fx_candles:subscribe",CANDLES_UNSUBSCRIBE:"fx_candles:unsubscribe",CANDLES_ALLSUB:"fx_candles:allsub",CANDLES_ALLUNSUB:"fx_candles:allunsub",DEAL_AMOUNTS_CHANGE:"fx:deal_amounts:change",DEALS_PROCEED_MIN:"fx_deals:proceed_min",DEALS_CLOSED:"fx_deals:closed",DEALS_OPEN:"fx_deals:open",DEALS_CHANGE:"fx_deals:change",DEALS_OPENING:"fx_deals:opening",DEALS_CLOSING:"fx_deals:closing",DEALS_CHANGING:"fx_deals:changing",DEALS_ALL:"fx_deals:all",DEALS_RECONNECT:"fx_deals:reconnect",DEALS_TOPPING_UP:"fx_deals:topping_up",DEALS_SUBSCRIBE:"fx_deals:subscribe",DEALS_UNSUBSCRIBE:"fx_deals:unsubscribe",INSTRUMENT_CHANGE:"fx_instrument:change",ORDERS_UPDATED:"fx_orders:updated",ORDERS_OPENING:"fx_orders:opening",ORDERS_CANCELING:"fx_orders:canceling",ORDERS_CHANGING:"fx_orders:changing",ORDERS_RECONNECT:"fx_orders:reconnect",PAIR_COMMISSION_SUBSCRIBE:"fx:pair_commission:change:subscribe",PAIR_COMMISSION_UNSUBSCRIBE:"fx:pair_commission:change:unsubscribe",PAIR_COMMISSION_CHANGE:"fx_pair_commission:change",PAIR_SENTIMENT_CHANGE:"fx_pair_sentiment:change",PAYMENT_SUCCESS:"fx_payment:success",PAYMENT_FAILED:"fx_payment:failed",SERVER_TIME_CHANGE:"fx:st:change",SERVER_TIME_REQUEST:"fx:st:request",SOURCE_SET:"fx_source:set",TICK_CHANGE:"fx_tick:change",TICKS_SUBSCRIBE:"fx:ticks:subscribe",TICKS_UNSUBSCRIBE:"fx:ticks:unsubscribe",TOURNAMENT_TASK_PROGRESS_CHANGED:"tournament:task_progress:changed",TOURNAMENT_POINTS_CHANGED:"tournament:points:changed",TRENDS_SUBSCRIBE:"fx:trends:subscribe",TRENDS_UNSUBSCRIBE:"fx:trends:unsubscribe",TRENDS_CHANGE:"fx:trends:change",TRADING_BALANCE_CHANGE:"fx_trading_balance:change",TRAILING_STOP_TURN_OFF:"fx_trailing_stop_turn_off",USER_CHANGE:"fx_user:change",USER_ONLINE_CHANGE:"fx_user_online:change",STATUS_STATE_CHANGED:"fx_status:state:changed",TASKS_PROGRESS_CHANGED:"fx_tasks:state:changed",ACHIEVEMENTS_PROGRESS_CHANGED:"fx_achievements:state:changed",FAVORITE_PAIRS_SET:"fx:favorite_pairs:set",FAVORITE_PAIRS_CHANGE:"fx:favorite_pairs:change"},l={CANDLE_CHANGE:"spt:candle:change",TICK_CHANGE:"spt:tick:change",TICKS_SUBSCRIBE:"spt:ticks:subscribe",TICKS_UNSUBSCRIBE:"spt:ticks:unsubscribe",CANDLES_ALL:"spt:candles:all",CANDLES_HISTORY:"spt:candles:history",CANDLES_SUBSCRIBE:"spt:candles:subscribe",CANDLES_UNSUBSCRIBE:"spt:candles:unsubscribe",CANDLES_ALLSUB:"spt:candles:allsub",CANDLES_ALLUNSUB:"spt:candles:allunsub",BUY:"spt:deals:purchase",SELL:"spt:deals:sell",ASSETS_LIST_SUBSCRIBE:"spt:assets:list:subscribe",ASSETS_LIST_UNSUBSCRIBE:"spt:assets:list:unsubscribe",ASSETS_LIST_CHANGE:"spt:assets:list:change",POSITION_DETAILS_LIST:"spt:position_details:list",POSITION_DETAILS_CHANGE:"spt:position_details:change",INSTRUMENT_CHANGE:"spt:instrument:change",SUBSCRIBE_CURS:"spt:exchange_rates:change",DEALS_SUBSCRIBE:"spt:dynamic_portfolio:subscribe",DEALS_PROCEED:"spt:dynamic_portfolio:change",DEALS_UNSUBSCRIBE:"spt:dynamic_portfolio:unsubscribe",ASSET_SUBSCRIBE:"spt:dynamic_portfolio:asset:subscribe",ASSET_UNSUBSCRIBE:"spt:dynamic_portfolio:asset:unsubscribe",ASSET_POSITION_CHANGE:"spt:dynamic_portfolio:asset:change",BUY_CALCULATOR_SUBSCRIBE:"spt:calculator:buy:qty:subscribe",BUY_CALCULATOR_UNSUBSCRIBE:"spt:calculator:buy:qty:unsubscribe",BUY_CALCULATOR_CHANGE:"spt:calculator:buy:qty:change",BUY_CALCULATOR_QTY_AMOUNT_SUBSCRIBE:"spt:calculator:buy:qty:amount:subscribe",SELL_CALCULATOR_SUBSCRIBE:"spt:calculator:sell:qty:subscribe",SELL_CALCULATOR_UNSUBSCRIBE:"spt:calculator:sell:qty:unsubscribe",SELL_CALCULATOR_CHANGE:"spt:calculator:sell:qty:change",SERVER_TIME_CHANGE:"spt:st:change",SERVER_TIME_REQUEST:"spt:st:request",FAVORITE_PAIRS_SET:"spt:favorite_pairs:set",FAVORITE_PAIRS_CHANGE:"spt:favorite_pairs:change"},c={[i.yy]:n,[i.c0]:o,[i.ik]:l},d={1:n.TICK_CHANGE,2:n.CANDLE_CHANGE,8:n.CANDLES_SUBSCRIBE,9:n.CANDLES_UNSUBSCRIBE,10:n.CANDLES_HISTORY,11:n.SERVER_TIME_CHANGE,12:n.TICKS_SUBSCRIBE,13:n.TICKS_UNSUBSCRIBE,14:n.SERVER_TIME_REQUEST,21:n.DEALS_PROCEED_MIN,22:n.DEALS_OPEN,23:n.DEALS_OPENING,24:n.DEALS_DEMO_OPENING,25:n.DEALS_VIRTUAL_OPENING,26:n.DEALS_CLOSED,27:n.DEALS_CANCELING,28:n.DEALS_DEMO_CANCELING,29:n.DEALS_VIRTUAL_CANCELING,30:n.DEALS_RECONNECT,31:n.DEALS_SUBSCRIBE,32:n.DEALS_UNSUBSCRIBE,40:n.DEALS_ORDER_OPENING,41:n.DEALS_ORDER_CANCELING,42:n.DEALS_ORDER_CHANGE,43:n.DEALS_ORDER_RECONNECT,53:n.BALANCE_VIRTUAL_CHANGE,55:r.BALANCE_CHANGE,60:n.NOTICE_SHOW,61:n.NOTICE_CLOSE,71:n.PAIR_SCHEDULE_SETUP,72:n.PAIR_WINPERC_CHANGE,73:n.PAIR_SENTIMENT_CHANGE,74:n.INSTRUMENT_CHANGE,75:n.DEAL_AMOUNTS_CHANGE,80:n.STRIKE_CHANGE,90:n.SERVERTIME_UP,98:n.CHANGES_SUBSCRIBE,99:n.CHANGES_UNSUBSCRIBE,95:n.PAIR_ACTIVE_SET,101:n.RISKFREE_DEAL_CHANGE,105:n.SOURCE_SET,110:n.USER_CHANGE,111:n.USER_ONLINE_CHANGE,112:r.RESTRICTIONS_CHANGE,113:r.USER_ACTION,124:r.PAYOUT_COMMISSION_CHANGED,125:n.PAYOUT_HOLD_CREATED,126:n.PAYOUT_HOLD_CHANGED,127:n.PAYOUT_HOLD_CANCELLED,128:n.PAYOUT_HOLD_APPROVED,129:n.PAYOUT_HOLD_DONE,135:n.TRADING_SIGNALS_ADD,136:n.TRADING_SIGNALS_SUBSCRIBE,137:n.TRADING_SIGNALS_TIMEFRAMES,140:n.STATUS_CHANGED,141:n.FEATURE_TOGGLE_SET,142:n.STATUS_TEST_DRIVE_CHANGED,150:r.BALANCE_ACCOUNT_CREATED,151:r.BALANCE_ACCOUNT_UPDATED,152:r.BALANCE_ACCOUNT_CLOSED,153:r.BALANCE_ACCOUNT_LIST,161:n.TRENDS_SUBSCRIBE,162:n.TRENDS_UNSUBSCRIBE,163:n.TRENDS_CHANGE,170:n.ANALYZER_SUCCESS_SUBSCRIBE,171:n.ANALYZER_SUCCESS_UNSUBSCRIBE,172:n.ANALYZER_SUCCESS_CHANGE,173:n.ANALYZER_GROUPS_LIST,200:n.OFFERS_ADD,201:n.OFFERS_RM,220:r.CONNECTION_CLOSING,230:n.PAYMENT_SUCCESS,231:n.PAYMENT_FAILED,241:n.STATUS_STATE_CHANGED,252:n.ACHIEVEMENTS_PROGRESS_CHANGED,253:n.TASKS_PROGRESS_CHANGED,260:n.KYC_STATE_CHANGED,291:r.BATTLE_ROOMS_SEARCH_STOP,292:r.BATTLE_ROOMS_CONFIG_GET,293:r.BATTLE_ROOMS_STATE_GET,294:r.BATTLE_ROOMS_HISTORY_GET,295:r.BATTLE_ROOMS_STATE_CHANGED,296:r.BATTLE_ROOMS_LEADERBOARD_CHANGED,298:r.BATTLE_ROOMS_CONFIRMATION_CHOOSE,299:r.BATTLE_ROOMS_SEARCH_START,300:n.FAVORITE_PAIRS_SET,301:n.FAVORITE_PAIRS_CHANGE,310:n.PRICE_SUB_SUBSCRIBE,311:n.PRICE_SUB_UNSUBSCRIBE,312:n.PRICE_SUB_LIST,313:n.PRICE_SUB_CHANGE,401:r.PROMO_CODE_CREATED,402:r.PROMO_CODE_REMOVED,403:r.PROMO_CODE_UPDATED,410:r.RATINGS_STATE_GET,411:r.RATINGS_LEADERBOARD_CHANGED,415:r.BATTLE_ROOMS_REACTION_RECEIVED,416:r.BATTLE_ROOMS_REACTION_SUBMIT,417:r.RATINGS_PLAYER_INFO_GET,418:r.BATTLE_ROOMS_SEARCH_RESTRICTION_GET,412:r.BATTLE_ROOMS_DEALS_REQUEST,413:r.BATTLE_ROOMS_DEALS_OPEN,414:r.BATTLE_ROOMS_DEALS_CLOSE,421:r.PROMO_OFFER_UPDATED,422:r.PROMO_COUNT,501:r.DEALS_SHARING_FTT,502:r.DEALS_SHARING_FX,503:r.DEALS_SHARING_SPT,504:r.COPY_TRADING_LEADER_BOARD_UPDATE,505:r.COPY_TRADING_SIGNALS_FILTERS_GET,506:r.COPY_TRADING_SIGNALS_FILTERS_UPDATE,507:r.COPY_TRADING_SIGNALS_ADDED,508:r.COPY_TRADING_SIGNALS_ACTIVE_ASSETS_CHANGED,601:r.NOTIFICATION,701:r.GURU_NOTIFICATION,702:r.GURU_NOTIFICATION_VIEWED,801:r.STORIES_ADDED,1001:o.CANDLE_CHANGE,1002:o.TICK_CHANGE,1003:o.CANDLES_ALL,1004:o.CANDLES_HISTORY,1005:o.CANDLES_SUBSCRIBE,1006:o.CANDLES_UNSUBSCRIBE,1007:o.CANDLES_ALLSUB,1008:o.CANDLES_ALLUNSUB,1009:o.SERVER_TIME_CHANGE,1010:o.TICKS_SUBSCRIBE,1011:o.TICKS_UNSUBSCRIBE,1012:o.SERVER_TIME_REQUEST,1028:o.DEALS_ALL,1029:o.DEALS_RECONNECT,1030:o.DEALS_PROCEED_MIN,1032:o.DEALS_OPENING,1033:o.DEALS_CLOSING,1034:o.DEALS_CHANGING,1035:o.DEALS_TOPPING_UP,1037:o.DEALS_CLOSED,1038:o.DEALS_OPEN,1039:o.DEALS_CHANGE,1043:o.DEALS_SUBSCRIBE,1044:o.DEALS_UNSUBSCRIBE,1041:o.TRADING_BALANCE_CHANGE,1042:o.TRAILING_STOP_TURN_OFF,1051:o.PAIR_COMMISSION_CHANGE,1052:o.PAIR_COMMISSION_SUBSCRIBE,1053:o.PAIR_COMMISSION_UNSUBSCRIBE,1054:o.INSTRUMENT_CHANGE,1055:o.DEAL_AMOUNTS_CHANGE,1063:o.ORDERS_RECONNECT,1064:o.ORDERS_UPDATED,1065:o.ORDERS_OPENING,1066:o.ORDERS_CANCELING,1067:o.ORDERS_CHANGING,1091:o.USER_CHANGE,1092:o.USER_ONLINE_CHANGE,1097:o.PAIR_SENTIMENT_CHANGE,1161:o.TRENDS_SUBSCRIBE,1162:o.TRENDS_UNSUBSCRIBE,1163:o.TRENDS_CHANGE,1230:o.PAYMENT_SUCCESS,1231:o.PAYMENT_FAILED,1241:o.STATUS_STATE_CHANGED,1251:o.TASKS_PROGRESS_CHANGED,1252:o.ACHIEVEMENTS_PROGRESS_CHANGED,1300:o.FAVORITE_PAIRS_SET,1301:o.FAVORITE_PAIRS_CHANGE,2001:l.CANDLE_CHANGE,2002:l.TICK_CHANGE,2003:l.CANDLES_ALL,2004:l.CANDLES_HISTORY,2005:l.CANDLES_SUBSCRIBE,2006:l.CANDLES_UNSUBSCRIBE,2007:l.CANDLES_ALLSUB,2008:l.CANDLES_ALLUNSUB,2009:l.SERVER_TIME_CHANGE,2010:l.TICKS_SUBSCRIBE,2011:l.TICKS_UNSUBSCRIBE,2012:l.SERVER_TIME_REQUEST,2236:l.BUY_CALCULATOR_SUBSCRIBE,2237:l.BUY_CALCULATOR_UNSUBSCRIBE,2238:l.BUY_CALCULATOR_CHANGE,2239:l.SELL_CALCULATOR_SUBSCRIBE,2240:l.SELL_CALCULATOR_UNSUBSCRIBE,2241:l.SELL_CALCULATOR_CHANGE,2242:l.BUY_CALCULATOR_QTY_AMOUNT_SUBSCRIBE,2243:l.ASSETS_LIST_SUBSCRIBE,2244:l.ASSETS_LIST_UNSUBSCRIBE,2245:l.ASSETS_LIST_CHANGE,2203:l.BUY,2204:l.SELL,2221:l.POSITION_DETAILS_LIST,2222:l.POSITION_DETAILS_CHANGE,2223:l.INSTRUMENT_CHANGE,2224:l.SUBSCRIBE_CURS,2230:l.DEALS_SUBSCRIBE,2231:l.DEALS_UNSUBSCRIBE,2232:l.ASSET_SUBSCRIBE,2233:l.ASSET_UNSUBSCRIBE,2234:l.DEALS_PROCEED,2235:l.ASSET_POSITION_CHANGE,2300:l.FAVORITE_PAIRS_SET,2301:l.FAVORITE_PAIRS_CHANGE};function u(e,a){const s={};return Object.keys(e).forEach((i=>{s[i]=a[e[i]]})),s}const m=function(e){const a={};return Object.keys(e).forEach((s=>{a[e[s]]=Number(s)})),a}(d),p=u(n,m),h=u(o,m),v=u(l,m),g=u(r,m),_={DEAL_CLOSE:"deal_close"}},62794:(e,a,s)=>{"use strict";s.d(a,{HQ:()=>h,MQ:()=>b,X3:()=>f,Zs:()=>_,dJ:()=>d,gw:()=>o,uO:()=>g,wW:()=>v});var i=s(37323),r=s(64356),n=s(49761);const o=e=>new Promise((a=>setTimeout(a,e))),l=(e,a,s)=>new Promise(((i,r)=>{if(e())return null==s||s(),i("OK");let n=0;const o=setInterval((()=>e()?(null==s||s(),clearInterval(o),i("OK")):n>60?(clearInterval(o),console.error(a),r(a)):void n++),1e3)})),c=()=>{var e;return null===window||void 0===window||null===(e=window.dataLayer)||void 0===e?void 0:e.find((e=>e["gtm.start"]))},d=()=>l(c,"GTM loading problem"),u=()=>!!(null===window||void 0===window?void 0:window.analyticsData),m=()=>l(u,"analyticsData loading problem"),p=()=>{var e;const a=null===(e=(0,n.e)("_ga"))||void 0===e?void 0:e.split(".");return a&&"".concat(null==a?void 0:a[2],".").concat(null==a?void 0:a[3])},h=e=>{const a=window.innerWidth<960,s=C(),i={cd3:b(),cd4:y(),cd5:p(),cd41:"block_yes",tid:"UA-54693962-1",t:"pageview"};return e.userId&&(i.cd6=e.userId,i.uid=e.userId),e.guestId&&(i.cd31=e.guestId),e.homepage&&(i.cd32=e.homepage),e.is_vip&&(i.cd8=String(e.is_vip)),a&&(i.cd9="1"),s&&(i.cd38=s),i},v=()=>{const e="".concat(document.location.protocol,"//").concat(document.location.hostname);return{v:"1",dl:e+document.location.pathname+document.location.search,dp:document.location.href.replace(e,""),ul:navigator.language.toLowerCase(),de:document.charset,dt:document.title,sr:"".concat(window.screen.width,"x").concat(window.screen.height),cid:p(),ds:"web"}},g=(e,a)=>{const s=Object.keys(a).map((e=>"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(a[e])))).join("&");navigator.sendBeacon?navigator.sendBeacon("".concat(e,"/ga-collect"),s):E("".concat(e,"/ga-collect?").concat(s))};function _(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m().then((()=>{g("".concat(document.location.protocol,"//").concat(document.location.hostname),(0,r.Z)((0,i.Z)({},v(),h(window.analyticsData)),{ec:e,ea:a.action||e,el:a.label||e,t:"event"}))}))}const f=()=>{let e=document.domain||"";const a=e.split("."),s=a.length;return s>2&&(e=a[s-2]+"."+a[s-1],2===a[s-2].length&&2===a[s-1].length&&(e=a[s-3]+"."+e)),e},E=(e,a)=>{const s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&200==s.status&&(null==a||a(s.responseText))},s.open("GET",e,!0),s.send(null)},S=e=>{const a=Math.abs(Math.floor(e));return(a<10?"0":"")+a},y=()=>{const e=new Date,a=-e.getTimezoneOffset(),s=a>=0?"+":"-";return e.getFullYear()+"-"+S(e.getMonth()+1)+"-"+S(e.getDate())+"T"+S(e.getHours())+":"+S(e.getMinutes())+":"+S(e.getSeconds())+"."+S(e.getMilliseconds())+s+S(a/60)+":"+S(a%60)},b=()=>"".concat((new Date).getTime(),".").concat(Math.random().toString(36).substring(5)),C=()=>-1==document.referrer.indexOf(document.location.host)&&""!=document.referrer?document.referrer.slice(0,145):void 0},56283:(e,a,s)=>{"use strict";s.d(a,{C:()=>m,f:()=>p});var i=s(3121),r=s(27378),n=s(23934),o=s(81439),l=s(17302),c=s(77740),d=s(8141);let u=null;const m={emitter:(0,n.Z)(),set(e){u=e,m.emitter.emit("update",e)}};const p=e=>{let a=e.root,s=e.theme,n=e.defaultTheme,p=e.children;const h=(0,i.Z)((0,r.useReducer)((e=>e===Number.MAX_SAFE_INTEGER?0:e+1),0),2)[1],v=(0,d.L)(),g=s?null!=u?u:s:n;var _;const f=g&&null!==(_=o[g])&&void 0!==_?_:null;return(0,r.useEffect)((()=>(s&&m.emitter.on("update",h),()=>m.emitter.off("update",h))),[s,h]),f?r.createElement(l.Om,{icons:{arrowDown:r.createElement(c.BDo,null),arrowLeft:r.createElement(c.D6v,null),arrowRight:r.createElement(c.Ec8,null),help:r.createElement(c.T08,null),user:r.createElement(c.f7T,null)}},r.createElement(l.f6,{root:a,dir:v,themeName:g,theme:f},p)):null}},32349:(e,a,s)=>{"use strict";s.d(a,{y:()=>i});const i=function(){!function(e,a){const s=e.amplitude||{_q:[],_iq:{}};function i(e,a){e.prototype[a]=function(){return this._q.push([a].concat(Array.prototype.slice.call(arguments,0))),this}}const r=function(){return this._q=[],this},n=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"];for(let e=0;e<n.length;e++)i(r,n[e]);s.Identify=r;const o=function(){return this._q=[],this},l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(let e=0;e<l.length;e++)i(o,l[e]);s.Revenue=o;const c=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","onNewSessionStart","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId","getDeviceId","getUserId","setMinTimeBetweenSessionsMillis","setEventUploadThreshold","setUseDynamicConfig","setServerZone","setServerUrl","sendEvents","setLibrary","setTransport"];function d(e){function a(a){e[a]=function(){e._q.push([a].concat(Array.prototype.slice.call(arguments,0)))}}for(let e=0;e<c.length;e++)a(c[e])}d(s),s.getInstance=function(e){return e=(e&&0!==e.length?e:"$default_instance").toLowerCase(),Object.prototype.hasOwnProperty.call(s._iq,e)||(s._iq[e]={_q:[]},d(s._iq[e])),s._iq[e]},e.amplitude=s}(window,document)}},65440:(e,a,s)=>{"use strict";s.d(a,{_j:()=>m});var i=s(29257),r=s(66313),n=s(32349),o=s(61357);const l="d84b8722b766ad8f64fddd58eed6683d";let c;const d=(u=(0,i.Z)((function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=e.apiKey,s=void 0===a?l:a,i=e.instance,d=e.userId;if(!s)return console.error("[AMPLITUDE] No apiKey provided"),null;if(!(0,r.y)("production"))return null;window.amplitude||(0,n.y)(),c=null!=c?c:(0,o.J)(),yield c;const u=window.amplitude.getInstance(i);return u.getSessionId()||(u.init(s,d,{platform:"web"}),d&&u.setUserId(d)),u})),function(){return u.apply(this,arguments)});var u;const m=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d({instance:s.instance,userId:s.userId}).then((s=>null==s?void 0:s.logEvent(e,a||{}))).catch((()=>{}))}},61357:(e,a,s)=>{"use strict";s.d(a,{J:()=>i});const i=()=>new Promise(((e,a)=>{var s;const i=document.createElement("script");i.type="text/javascript",i.integrity="sha384-6T8z7Vvm13muXGhlR32onvIziA0TswSKafDQHgmkf6zD2ALZZeFokLI4rPVlAFyK",i.crossOrigin="anonymous",i.async=!0,i.src="https://cdn.amplitude.com/libs/amplitude-8.18.4-min.gz.js",i.onload=function(){if(!window.amplitude.runQueuedFunctions)return console.error("[AMPLITUDE] Error: could not load SDK"),void a();e()};const r=document.getElementsByTagName("script")[0];null===(s=r.parentNode)||void 0===s||s.insertBefore(i,r)}))},23002:(e,a,s)=>{"use strict";s.d(a,{f:()=>i});const i=()=>location.pathname},61564:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var i=s(18985),r=s(45797),n=s(51116);const o={},l=(0,i.vU)({hours_num:{id:"hours_num",defaultMessage:"hour,hours,hours"},days_num:{id:"days_num",defaultMessage:"day,days,days"},months_num:{id:"months_num",defaultMessage:"month,months,months"},sec:{id:"sec",defaultMessage:"sec."},min:{id:"min",defaultMessage:"min"}});function c(e){const a=3600,s=Math.floor(e/60),i=Math.floor(e/a),o=Math.floor(e/86400),c=Math.floor(e/2592e3);return s&&s<60?"".concat(s," ").concat(r.NW.formatMessage(l.min)):i&&i<24?"".concat(i," ").concat((0,n.Ak)(i,r.NW.formatMessage(l.hours_num))):o&&o<30?"".concat(o," ").concat((0,n.Ak)(o,r.NW.formatMessage(l.days_num))):c?"".concat(c," ").concat((0,n.Ak)(c,r.NW.formatMessage(l.months_num))):"".concat(e," ").concat(r.NW.formatMessage(l.sec))}function d(e){if(!e)return[];let a=[];const s=e.curve.select.map(((a,s)=>{const i=e.curve.zoom[s];return{id:0,step:a,range:i,trans:c(i),format:"line",type:"line",selected:600===i,assistantAlias:"areachart",showQuotes:600===i}})),i=e.candle.select.map(((a,s)=>({id:0,step:a,trans:c(e.candle.zoom[s]),format:"candle",type:"candle",selected:!1,assistantAlias:"japanesecandlesticks"}))),r=e.candle_heiken_ashi.select.map(((a,s)=>({id:0,step:a,trans:c(e.candle_heiken_ashi.zoom[s]),format:"heiken-ashi",type:"candle",selected:!1,assistantAlias:"heikenashi"}))),n=e.bar.select.map(((a,s)=>({id:0,step:a,trans:c(e.bar.zoom[s]),format:"bar",type:"candle",selected:!1,assistantAlias:"bars"})));return a=a.concat(s,i,r,n),a.forEach(((e,s)=>{a[s].id=s;const i=o[s];i&&Object.keys(i).forEach((e=>{a[s][e]=i[e]}))})),a}},88701:(e,a,s)=>{"use strict";function i(e,a){const s=Date.now()/1e3-e;return Math.floor(s/86400)>=a}s.d(a,{y:()=>i})},42377:(e,a,s)=>{"use strict";function i(e,a){const s=Date.now()/1e3-e;return Math.floor(s/60)>=a}s.d(a,{M:()=>i})},55953:(e,a,s)=>{"use strict";s.d(a,{D1:()=>r.D,fx:()=>i.f});s(14819);var i=s(23002),r=s(92403)},14819:(e,a,s)=>{"use strict";s.d(a,{P:()=>o});var i=s(99446),r=s(90212),n=s(49761);const o=()=>i.d||Boolean((0,n.e)(r.vG))},92403:(e,a,s)=>{"use strict";s.d(a,{D:()=>i});const i=()=>window.location.host.includes("ir-olymptrade.com")},33801:(e,a,s)=>{"use strict";s.d(a,{C:()=>m});var i=s(29257),r=s(23934),n=s(45797),o=s(26323),l=s(12484),c=s(30654);const d=(u=(0,i.Z)((function*(e){const a=function(){var e=(0,i.Z)((function*(){try{return(yield c.$.platformValues(["current_locale"])).current_locale}catch(e){return o.ZW}}));return function(){return e.apply(this,arguments)}}();if(e)return a();try{var s,r;return null!==(r=null!==(s=(yield c.$.userValues(["options"])).options.lang)&&void 0!==s?s:yield a())&&void 0!==r?r:o.ZW}catch(e){return a()}})),function(e){return u.apply(this,arguments)});var u;const m=new class Translations{load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isForceLoad:!1,unauthorized:!1};var a=this;return(0,i.Z)((function*(){var i;a.requestPromise&&!e.isForceLoad||(a.locale=null!==(i=null==e?void 0:e.locale)&&void 0!==i?i:yield d(e.unauthorized),a.requestPromise=s(5017)("./".concat(a.locale,".json")).then((e=>(a.messages=e,n.NW.updateMessages(a.locale,e),a.emitter.emit("change",a.locale),e))).catch((e=>{a.messages={},n.NW.updateMessages(a.locale,a.messages),l.bR.sendEvent(e,l.x3.ERROR,"W2JQyQ6U")})));return a.requestPromise}))()}getCurrentLocale(){return this.locale}onChange(e){return this.emitter.on("change",e),()=>this.emitter.off("change",e)}constructor(){this.emitter=(0,r.Z)(),this.requestPromise=null,this.messages={},this.locale=o.ZW}}},71978:(e,a,s)=>{"use strict";s.d(a,{M:()=>u,Z:()=>m});var i=s(37323),r=s(1255),n=s(66713),o=s(24891),l=s(44175);let c;c={"X-App-Version":19132};const d=new r.e({headers:(0,i.Z)({},c,(0,o.Z)("OlympTrade")),topology:new class TopologyAdapter{set(e,a){this.setSpecific(e[0])}setSpecific(e){this.topology=e,this.otp=e[n.wt],this.bo=e[n.yy],this.fx=e[n.c0],this.services=e.services}load(){return l.q.getActual().then((e=>(this.setSpecific(e),e)))}}}),u=d.topology,m=d},62664:(e,a,s)=>{"use strict";s.d(a,{hq:()=>n,vI:()=>r});var i=s(57855);function r(){var e;return null!==(e=(0,i.Ve)("deeplinkProject"))&&void 0!==e?e:void 0}function n(){(0,i.m0)("deeplinkProject")}},38702:(e,a,s)=>{"use strict";s.d(a,{YY:()=>u,n5:()=>c});var i=s(29257),r=s(57855),n=s(65990),o=s(30654);function l(e){(0,r.XV)(n.d.USER_ID,e)}function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((function*(){const e=(0,r.Ve)(n.d.USER_ID);if(!e)try{return o.$.userValues(["data"]).then((e=>{let a=e.data.id;return l(a),a})).catch((()=>null))}catch(e){return null}return Number(e)}))).apply(this,arguments)}function u(){(0,r.m0)(n.d.USER_ID)}},66531:(e,a,s)=>{"use strict";s.d(a,{n:()=>n});var i=s(57855),r=s(65990);function n(e){(0,i.XV)(r.d.PROJECT,e)}},32121:(e,a,s)=>{"use strict";s.d(a,{O:()=>c});var i=s(29257),r=s(14313),n=s(44175),o=s(12484);let l=!1;function c(){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((function*(){const e=yield n.q.getActual();return l||((0,r.jH)(e.services.cdn.url,(e=>{o.bR.sendEvent(e,o.x3.ERROR,"dRQ39Ml2",void 0,{team:"FS"})})),l=!0),(0,r.Od)()}))).apply(this,arguments)}},1312:(e,a,s)=>{"use strict";s.r(a),s.d(a,{Support:()=>E,supportFeaturesSlot:()=>_});var i=s(3121),r=s(27378),n=s(84584),o=s(2050),l=s(37488),c=s(77740),d=s(17302),u=s(99446),m=s(87601),p=s(8141),h=s(82844),v=s(50334),g=s(1729);const _=(0,n.Z)();let f=0;const E=r.memo((e=>{const a=(0,i.Z)(r.useState(!1),2),s=a[0],n=a[1];const E=(0,l.useMediaQuery)({maxWidth:m.j$.BREAKPOINT_768}),S=r.useCallback((a=>{e.openPanelById(a)}),[]),y=(0,o.x)(_,{props:{onClick:S}}),b=(0,p.L)();return r.createElement("div",{className:"support-section"},r.createElement("div",{dir:b},r.createElement("p",{className:"support-section__description"},e.userName&&r.createElement("span",null,"".concat(e.userName,", ")),r.createElement("span",{className:"support-section__contact-text ".concat(e.userName&&"support-section__contact-text_lowercase")},r.createElement(h._,{id:"contact_us_support",defaultMessage:"If you have an issue, please contact us in one of the following ways:"}))),r.createElement(g.oN,{active:s,onHide:function(){n(!1)},minimizeOnStart:!1,dontHide:!E,hideOnMinimize:E}),!e.isRestricted&&r.createElement("div",{className:"support-section__list-item"},r.createElement(d.zx,{variant:"secondary",horizontalAlign:"start",startIcon:r.createElement(c.f7e,null),understring:r.createElement(h._,{id:"sp-chat-time"}),dataTest:"sidebar-support-button-chat",onClick:function(){if(s&&u.tq)return n(!1),clearTimeout(f),void(f=setTimeout((()=>{n(!0)}),500));n(!0)},fullWidth:!0},r.createElement(h._,{id:"sp-chat"}))),r.createElement("div",{className:"support-section__list-item"},y)),e.supportEmails&&r.createElement(v.x,{email:e.supportEmails}))}))},50334:(e,a,s)=>{"use strict";s.d(a,{x:()=>n});var i=s(27378),r=s(77740);const n=e=>{let a=e.email;return a&&a.email?i.createElement("div",{className:"support-section__email"},i.createElement("div",{className:"support-section__email-icon"},i.createElement(r.haR,null)),i.createElement("span",null,a.description),i.createElement("a",{className:"support-section__email-link",href:"mailto:".concat(a.email)},i.createElement("span",null,a.email))):null}},93616:(e,a,s)=>{"use strict";s.d(a,{uN:()=>i});const i={HIDDEN_PHONE_COLLECTOR:"phoneCollector",MARKET_PLACE_ITEM:"marketPlaceItem",MARKET_PLACE_USER_AGREEMENT:"marketPlaceUserAgreement",MARKET_PLACE_PURCHASE:"marketPlacePurchase",SETTINGS:"settings",SIDEBAR_MANAGER:"help",PLUS_ASSETS:"assets",PLUS_MARKET_ANALYSIS:"marketAnalysis",HELP_CENTER:"helpCenter",SUPPORT:"support",TERMINAL:"terminal",TRADING_BAR:"tradingbar",TRADING_SIGNALS:"tradingSignals",TRADING_SIGNALS_ASSETS:"tradingSignalsAssets",TRADING_SIGNALS_PRODUCTS:"tradingSignalsProducts",TRADING_SIGNALS_DETAILS:"tradingSignalsDetails",USER_PROFILE:"userProfile",VIDEO_GALLERY:"videoGallery",VIP_SUPPORT:"vipSupport",HOW_TO_TRADE:"howToTrade",BLOG:"blog"}},93627:(e,a,s)=>{"use strict";s.d(a,{H:()=>AutoQA});var i=s(90212),r=s(49761);class AutoQA{static isAutoTestEnv(){return Boolean((0,r.e)(i.Tj))}static shouldFeatureBeDisabled(e){const a=(0,r.e)(i.Tj);return null!==a&&"string"!=typeof a&&0===a[e]}}},90675:(e,a,s)=>{"use strict";s.d(a,{K:()=>n});var i=s(3121),r=s(49761);const n=(0,s(14305).GW)((()=>{const e=(0,r.e)("_ga");if(!e)return null;const a=e.split("."),s=(0,i.Z)(a,4),n=s[2],o=s[3];return 4===a.length&&n&&o?"".concat(n,".").concat(o):null}))},96459:(e,a,s)=>{"use strict";s.d(a,{U:()=>E,y:()=>f});var i=s(29257),r=s(37323),n=s(64356),o=s(24459),l=s(14305),c=s(41171),d=s(98159),u=s(23735),m=s(90675);const p=(0,l.GW)((e=>{var a;e&&(window.dataLayer=null!==(a=window.dataLayer)&&void 0!==a?a:[],window.dataLayer.push(e))}));var h;const v=(0,l.GW)((g=(0,i.Z)((function*(e){return p((0,r.Z)({client_id:null!==(h=yield(0,m.K)())&&void 0!==h?h:""},e))})),function(e){return g.apply(this,arguments)}));var g,_;const f=(0,l.ub)({effect:v,source:{hitTimestamp:c.AO.map((e=>e||Math.round(Date.now()/1e3))),user_id:d.b.map((e=>null!==(_=e.id)&&void 0!==_?_:-1))},mapParams:(e,a)=>{let s=a.hitTimestamp,i=a.user_id;return(0,n.Z)((0,r.Z)({event:"ga4_events",ga4_event_name:e.ec},e),{hitTimestamp:s,user_id:i,userId:i})}}),E=(0,l.GW)(function(){var e=(0,i.Z)((function*(e){e.event;const a=e.eventCategory,s=e.eventAction,i=e.eventLabel,n=(0,o.Z)(e,["event","eventCategory","eventAction","eventLabel"]);return yield f((0,r.Z)({ec:a,ea:s,el:i},n)),(0,u.L)(e),e}));return function(a){return e.apply(this,arguments)}}())},8244:(e,a,s)=>{"use strict";s.d(a,{S:()=>r});var i=s(96459);const r={logFx:i.y,logProxyFx:i.U}},7035:(e,a,s)=>{"use strict";s.d(a,{S:()=>i.S});var i=s(8244)},27867:(e,a,s)=>{"use strict";s.d(a,{y:()=>o});var i=s(29257),r=s(14305),n=s(39211);const o=(0,r.GW)((0,i.Z)((function*(){const e=yield n.g.getFlags();return Object.keys(e.icons).reduce(((a,s)=>{var i,r;const n={flagIcon:null!==(r=null===(i=e.icons[s])||void 0===i?void 0:i.icon_svg)&&void 0!==r?r:""};return a[s]=n,a}),{})})))},35300:(e,a,s)=>{"use strict";s.d(a,{y:()=>i.y});var i=s(27867)},45786:(e,a,s)=>{"use strict";s.d(a,{Y:()=>o});var i=s(61744),r=s(14305),n=s(35300);const o={getCountriesFx:n.y};(0,r.UP)({clock:n.y.doneData,fn:e=>({countries:e}),target:i.Y0.update})},85101:(e,a,s)=>{"use strict";s.d(a,{t:()=>n});var i=s(13243),r=s(86006);const n=(0,i.v)({name:"entityUI",services:()=>({entityUIService:new r.d})},{publicApi:e=>e})},86006:(e,a,s)=>{"use strict";s.d(a,{d:()=>o});var i=s(29257),r=s(7223),n=s(45786);let o=class EntityUIService extends r.t{constructor(){super({countries:{}});var e=this;this.loadCountries=this.createTask((0,i.Z)((function*(){const a=yield n.Y.getCountriesFx();return e.update({countries:a}),a})),{strategy:r.T.once})}}},97442:(e,a,s)=>{"use strict";s.d(a,{W:()=>r});var i=s(58952);const r=(0,i.WV)({deeplink_action:(0,i.t$)("accounts-show-list")})},12802:(e,a,s)=>{"use strict";s.d(a,{Q:()=>v});var i=s(29257),r=s(60521),n=s(14282),o=s(13243),l=s(40846),c=s(77575),d=s(27634),u=s(71003),m=s(61876),p=s(95725),h=s(97442);const v=(0,o.v)({name:"Account",optionalDependsOn:[c.Q,u.x,n.F0,d.im],services:(e,a)=>({accountService:new m.B(a.accountListRepository)})},{repositories:()=>({accountListRepository:new p.W}),publicApi:e=>e});var g;v.onStart((g=(0,i.Z)((function*(e){var a;(0,r.reaction)((()=>{var a,s;return null===(a=e.commonLegacyServiceList)||void 0===a||null===(s=a.accountService)||void 0===s?void 0:s.lastArchivedAccount}),(a=>{a&&e.accountService.addArchivesAccount(a)})),(0,r.reaction)((()=>{var a;return(null===(a=e.commonLegacyServiceList)||void 0===a?void 0:a.accountService.accountsList)&&e.commonLegacyServiceList.accountService.accountsList.map((e=>e.name))&&[...e.commonLegacyServiceList.accountService.accountsList]}),(a=>{if(a){const s=[];a.forEach((a=>{var i;(null===(i=e.commonLegacyServiceList)||void 0===i?void 0:i.accountService.isCommonAccount(a))&&s.push((0,r.toJS)(a))})),e.accountService.updateActiveAccounts(s)}}),{fireImmediately:!0}),yield e.accountService.loadArchivesAccounts(),null===(a=e.commandService)||void 0===a||a.registerCommand(h.W.guard,(()=>{var a;return null===(a=e.profileSidebarService)||void 0===a?void 0:a.openById(l.uW.ACCOUNT)}))})),function(e){return g.apply(this,arguments)}))},95725:(e,a,s)=>{"use strict";s.d(a,{W:()=>AccountListRepository});var i=s(29257),r=s(60299),n=s(30654);class AccountListRepository{findAll(){return(0,i.Z)((function*(){const e=(yield n.$.platformValues(["reg_currencies"])).reg_currencies,a=yield n.g.getAccountList({with_archive:!0});return a?Promise.resolve(r.v.parseAll(a.accounts.map((e=>e.account)),e.info,null,!1)):Promise.resolve([])}))()}}},61876:(e,a,s)=>{"use strict";s.d(a,{B:()=>AccountService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223);class AccountService extends o.t{addArchivesAccount(e){this.update({archivesAccounts:[...this.getState().archivesAccounts,(0,n.Z)((0,r.Z)({},e),{status:"closed"})]})}updateActiveAccounts(e){this.update({activeAccounts:[...e]})}constructor(e){super({archivesAccounts:[],activeAccounts:[]}),this.repository=e;var a=this;this.loadArchivesAccounts=this.createTask((0,i.Z)((function*(){const e=yield a.repository.findAll();a.update({archivesAccounts:e.filter((e=>"closed"===e.status))})})),{strategy:o.T.once})}}},78166:(e,a,s)=>{"use strict";s.d(a,{e:()=>o});var i=s(13243),r=s(7223),n=s(54289);class SidebarPanelService extends r.t{constructor(){super({isFeatureInUse:n.$p.getState().isFeatureInUse}),n.$p.watch((e=>{let a=e.isFeatureInUse;return this.update({isFeatureInUse:a})}))}}const o=(0,i.v)({name:"AccountTransfers",services:()=>({sidebarPanelService:new SidebarPanelService})},{publicApi:e=>({accountTransfersSidebarPanelService:e.sidebarPanelService})})},26222:(e,a,s)=>{"use strict";s.d(a,{MQ:()=>c,af:()=>d,cO:()=>o,eS:()=>n,hR:()=>l,kb:()=>r,pC:()=>m,w5:()=>u});var i=s(18985);const r="advisors";var n,o;!function(e){e[e.surfingTheAverages=0]="surfingTheAverages",e[e.macdProfessional=1]="macdProfessional",e[e.predatoryGaze=2]="predatoryGaze"}(n||(n={})),function(e){e[e.waiting=0]="waiting",e[e.newSignal=1]="newSignal",e[e.signalActivated=2]="signalActivated"}(o||(o={}));const l={[n.surfingTheAverages]:"otp_advisor_surfing_the_averages",[n.macdProfessional]:"otp_advisor_macd_professional",[n.predatoryGaze]:"otp_advisor_predatory_gaze"},c=(o.waiting,{dir:0,duration:0,stopLoss:0}),d=((0,i.vU)({surfingTheAverages:{id:"advisor_chart_legend_title_surfing_the_averages",defaultMessage:"Advisor: Moving average"},macdProfessional:{id:"advisor_chart_legend_title_macd_professional",defaultMessage:"Advisor: MACD Professional"},predatoryGaze:{id:"advisor_chart_legend_title_predatory_gaze",defaultMessage:"Advisor: Predatory look"}}),(0,i.vU)({surfingTheAverages:{id:"advisor_surfing_the_averages",defaultMessage:"Moving average"},macdProfessional:{id:"advisor_macd_professional",defaultMessage:"MACD Professional"},predatoryGaze:{id:"advisor_predatory_gaze",defaultMessage:"Predatory look"}})),u=(0,i.vU)({waiting:{id:"waiting_for_signal",defaultMessage:"Waiting for signal..."},newSignal:{id:"new_signal",defaultMessage:"New signal"},signalActivated:{id:"signal_direction",defaultMessage:"Signal {direction}"}}),m=(0,i.vU)({0:{id:"deals_upper",defaultMessage:"Up"},1:{id:"deals_lower",defaultMessage:"Down"}})},3166:(e,a,s)=>{"use strict";s.d(a,{A:()=>i.A});var i=s(64573)},93979:(e,a,s)=>{"use strict";s.d(a,{c:()=>ae});var i=s(29257),r=s(27378),n=s(13243),o=s(95601),l=s(36732),c=s(77740),d=s(60521),u=s(23735),m=s(82844),p=s(64802),h=s(58568),v=s(61681),g=s(18902),_=s(15209),f=s(6143),E=s(80027),S=s(18121),y=s(5343),b=s(71003),C=s(73533),T=s(8275),A=s(99824),k=s(37323),w=s(64356),N=s(7223);class AdvisorListService extends N.t{setSearchText(e){this.update({searchText:e})}updateAvailable(e){if(e){const a=this.getState().list.map((a=>{const s=e[a.type];return void 0!==s?(0,w.Z)((0,k.Z)({},a),{available:s}):(0,k.Z)({},a)}));this.update({list:a})}}constructor(e,a){super({searchText:"",list:[]}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield s.repository.find();if(e){const a=e.list.map((e=>{const a=s.inputs.checkAdvisorInFeatureToggle(e.type);return(0,w.Z)((0,k.Z)({},e),{available:void 0===a||a})}));s.update({list:[...a]})}})),{strategy:N.T.once})}}var R=s(26222);class AdvisorRepository{find(){return(0,i.Z)((function*(){return Promise.resolve({list:[{id:R.eS.surfingTheAverages,position:R.eS.surfingTheAverages,type:R.eS.surfingTheAverages,name:"surfingTheAverages",title:R.af.surfingTheAverages,available:!0},{id:R.eS.macdProfessional,position:R.eS.macdProfessional,type:R.eS.macdProfessional,name:"macdProfessional",title:R.af.macdProfessional,available:!0},{id:R.eS.predatoryGaze,position:R.eS.predatoryGaze,type:R.eS.predatoryGaze,name:"predatoryGaze",title:R.af.predatoryGaze,available:!0}]})}))()}}var I=s(57615),D=s(29042);class ActiveAdvisorRepository{find(){var e=this;return(0,i.Z)((function*(){const a=e.storage.get("data");return(null==a?void 0:a.content)&&1===a.version?Promise.resolve(a.content):Promise.resolve(void 0)}))()}save(e){return this.storage.set("data",{content:e,version:1}),Promise.resolve()}constructor(){this.storage=new I._({namespace:"advisor-edit-service",backend:new D.u})}}var O=s(47450);var L=s(60042),M=s.n(L);const P="NcfuxmDW",x="JtCFvtuc",F="D1lIQOQA",B="tF8pGsrM",Z="XYU6xrBR",U="vvQLerCO",H="VqP6ugsS",G="E1IDJym6",V="ioidimuv",W="DHeEeOTm",j="oR6WCwpn",z="zj0uDhNX",q=()=>r.createElement("span",{className:M()(x,F)},r.createElement("span",{className:M()(j,H,z)}," ")," ",r.createElement(m._,Object.assign({},R.w5.waiting)));q.displayName="StatusWaiting";const K=e=>{let a=e.dir;return r.createElement("span",{className:M()(x,a?U:Z)},r.createElement("span",{className:M()(j,a?W:V)}," ")," ",r.createElement(m._,Object.assign({},R.w5.signalActivated,{values:{direction:r.createElement(m._,Object.assign({},R.pC[a]))}})))};K.displayName="StatusSignalActivated";const Y=()=>r.createElement("span",{className:M()(x,B)},r.createElement("span",{className:M()(j,G)}," ")," ",r.createElement(m._,Object.assign({},R.w5.newSignal)));Y.displayName="StatusNewSignal";const X=e=>{let a=e.status,s=e.signal;const i=r.useMemo((()=>a===R.cO.waiting?r.createElement(q,null):a===R.cO.signalActivated&&s?r.createElement(K,{dir:s.dir}):a===R.cO.newSignal?r.createElement(Y,null):null),[a,s]);return r.createElement("div",{className:P,"data-test":"techanalysis-active-advisor-preview"},i)};X.displayName="ActiveAdvisorPreview";const J=e=>{let a=e.item,s=e.headerTitle,i=e.onClose,n=e.onClick;const o=r.useCallback((()=>{i()}),[i]);return r.createElement(l.A7,{headerTitle:s,title:r.createElement(m._,Object.assign({},a.title)),onClick:n,onClose:o,content:r.createElement(X,{status:a.status,signal:a.signal})})};J.displayName="ActiveIndicatorItem";var Q=s(64573),$=s(26763);function ee(e,a){return te.apply(this,arguments)}function te(){return(te=(0,i.Z)((function*(e,a){const s=yield a.getFrameService(e,$.DEAL_FORM_STORE);return s?Promise.resolve(s):Promise.reject()}))).apply(this,arguments)}const ae=(0,n.v)({name:"Advisers",dependsOn:[o.u$,h.y,b.x,C.Kg,v.G,g.u,S.Z,y.w],services(e,a){const s=new A.P(a.advisorRepository,a.activeAdvisorRepository,{activeTradeFrameId:e.techAnalysisService.getActiveTradeFrameId(),updateActiveInstruments:e.techAnalysisService.updateActiveInstruments,getFrames:()=>e.tradeManagerServiceList.getFrames(),getEditItemIncrement:()=>e.techAnalysisService.getEditItemIncrement(),goToTechAnalysis(){e.techAnalysisService.goToTechAnalysis()},addAdvisorToChart(a,s,i){(0,p.Ps)(a,e.tradeManagerServiceList).then((e=>{e.advisorService.api.addAdvisor(s,i)}))},removeAdvisorFromChart(a,s){(0,p.Ps)(a,e.tradeManagerServiceList).then((e=>{e.advisorService.api.removeAdvisor(s)}))},setLimits(a,s,i){(0,p.Ps)(a,e.tradeManagerServiceList).then((e=>{e.advisorService.api.setAdviserLowTimeframeLimit(s),e.advisorService.api.setAdviserHighTimeframeLimit(i)}))},applySignal:(r=(0,i.Z)((function*(a,s,i){const r=yield e.tradeManagerServiceList.getTradeFrameService(a);r&&("bo"===r.project?ee(a,e.tradeManagerServiceList).then((e=>{i&&(e.setPickerTypeByApi("duration"),e.setDurationByApi(i),e.setTimePickerLocked(!0)),s?e.setUpButtonLocked(!0):e.setDownButtonLocked(!0),e.setOrderButtonLocked(!0)})):"fx"===r.project&&ee(a,e.tradeManagerServiceList).then((e=>{s?e.setUpButtonLocked(!0):e.setDownButtonLocked(!0),e.setOrderButtonLocked(!0)})))})),function(e,a,s){return r.apply(this,arguments)}),cancelSignal:function(){var a=(0,i.Z)((function*(a){const s=yield e.tradeManagerServiceList.getTradeFrameService(a);s&&("bo"===s.project?ee(a,e.tradeManagerServiceList).then((e=>{e.setUpButtonLocked(!1),e.setDownButtonLocked(!1),e.setOrderButtonLocked(!1),e.setTimePickerLocked(!1)})):"fx"===s.project&&ee(a,e.tradeManagerServiceList).then((e=>{e.setUpButtonLocked(!1),e.setDownButtonLocked(!1),e.setOrderButtonLocked(!1)})))}));return function(e){return a.apply(this,arguments)}}(),waitForChart:a=>new Promise((s=>{(0,p.Ps)(a,e.tradeManagerServiceList).then((e=>{e.waitingForChartInit().then((()=>{s()}))}))})),getDeprecatedCache:a=>e.tradeManagerServiceList.tradeManagerService.localStorageCache.getCache("bo_advisor_els_v2",a),clearDeprecatedCache(a){e.tradeManagerServiceList.tradeManagerService.localStorageCache.setCache("bo_advisor_els_v2",a,null)}});var r;e.tradeManagerServiceList.emitter.on("updateFrames",s.updateFrames),e.techAnalysisService.emitter.on("activeTradeFrameId",s.updateActiveTradeFrameId);const n=new AdvisorListService(a.advisorRepository,{checkAdvisorInFeatureToggle:a=>{const s=R.hR[a];return e.commonLegacyServiceList.featureToggleService.getFeatureValue(s)}});return e.techAnalysisService.emitter.on("searchText",(e=>{n.setSearchText(e)})),_.s.on("adviserPosition",s.handleAdvisorPosition),_.s.on("adviserSignal",s.handleAdvisorSignal),(0,d.reaction)((()=>({[R.eS.surfingTheAverages]:e.commonLegacyServiceList.featureToggleService.getFeatureValue(E.pi.OTP_ADVISOR_SURFING_THE_AVERAGES),[R.eS.macdProfessional]:e.commonLegacyServiceList.featureToggleService.getFeatureValue(E.pi.OTP_ADVISOR_MACD_PROFESSIONAL),[R.eS.predatoryGaze]:e.commonLegacyServiceList.featureToggleService.getFeatureValue(E.pi.OTP_ADVISOR_PREDATORY_GAZE)})),(e=>{n.updateAvailable(e)})),{advisorListService:n,advisorEditService:s}}},{repositories:()=>({advisorRepository:new AdvisorRepository,activeAdvisorRepository:new ActiveAdvisorRepository})});ae.use(p.rb,((e,a,s)=>{if(!s.advisorEditService.isFeatureEnabled())return e;const i=s.advisorListService.getState(),n=i.list,o=i.searchText,d=e=>{const a=n.find((a=>a.id===e));a&&a.available&&(s.advisorEditService.addAdvisor(a),(0,u.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"add_advisor",eventLabel:a.name}),s.techAnalysisService.goToActiveInstruments()),a&&!a.available&&s.inAppMessageService.addMessage(r.createElement(m._,{id:"advisers_expert_status_availability_info",defaultMessage:"This adviser is available to traders with Expert status"}),r.createElement(m._,{id:"indicators_advanced_expert_status_availability_title",defaultMessage:"Higher Status Required"}),r.createElement(m._,{id:"indicators_level_up_user_status",defaultMessage:"Upgrade Status"}),(()=>{s.commonLegacyServiceList.sideBarService.goTo(T.KO.MARKET_PLACE_CATEGORIES)}))},h=o?function(e,a){const s=(0,O.O)(e);if(s&&s[1]){const e=new RegExp(s[1],"i");return a.filter((a=>e.test(a.name)))}return null}(o,n):n;return[...e,...h?[{count:h.length,accordionItemId:R.kb,icon:r.createElement(c.h1e,null),title:r.createElement(m._,{id:"advisors",defaultMessage:"Advisors"}),list:r.createElement(r.Fragment,null,h.map((e=>r.createElement(l.H_,{id:e.id,count:0,disabled:!e.available,key:e.id,title:r.createElement(m._,Object.assign({},e.title)),contentAfter:!e.available&&r.createElement(l.Y1,null),onClick:d})))),position:p.Cf.advisors}]:[]]})).use(p.MR,((e,a,s)=>{if(!s.advisorEditService.isFeatureEnabled())return e;const i=s.advisorEditService.getState().activeTradeFrameId,n=s.advisorEditService.getAdvisor(i);return n?[...e,{position:n.position,id:R.kb,component:r.createElement(J,{headerTitle:r.createElement(m._,{id:"chart_settings_adviser_title",defaultMessage:"Adviser"}),item:n,onClick:()=>{},onClose:()=>{s.advisorEditService.removeActiveAdvisor()}})}]:e})).use(p.dT,((e,a,s)=>{if(!s.advisorEditService.isFeatureEnabled())return e;const i=s.advisorEditService.getCurrentAdvisor();return[...e,...i?[{icon:r.createElement(c.h1e,null),title:r.createElement(m._,{id:"advisors",defaultMessage:"Advisors"}),count:1,type:R.kb,position:p.Cf.advisors,onRemove:e=>{e===R.kb&&s.advisorEditService.removeActiveAdvisor()}}]:[]]})).use(p.SU,((e,a,s)=>{if(!s.advisorEditService.isFeatureEnabled())return e;const i=s.advisorEditService.getAdvisor(a.tradeFrameId);return i?[...e,{id:i.id,position:i.position,component:r.createElement(l.vf,{key:i.id,id:i.id,title:r.createElement(m._,Object.assign({},i.title)),onClickEdit:()=>{s.techAnalysisService.setActiveTradeFrameId(a.tradeFrameId),s.techAnalysisService.goToActiveInstruments()},onClickRemove:()=>{s.advisorEditService.removeAdvisor(a.tradeFrameId)},details:r.createElement(X,{signal:i.signal,status:i.status})})}]:e})).use(Q.A,((e,a)=>{const s=(0,f.gh)(a.themeService.getState().theme||"dark");return r.createElement(Q.I,Object.assign({},e,{colors:{collapsedFill:s.signal.fill,collapsedHoveredFill:s.signal.hovered.fill,fillUp:s.signal.selected.up.fill,fillDown:s.signal.selected.down.fill,collapsedColor:s.signal.color,colorUp:s.signal.selected.up.color,colorDown:s.signal.selected.down.color}}))})),ae.enable((()=>!0)).onStart((e=>{let a=e.advisorListService,s=e.advisorEditService;return Promise.all([a.load(),s.load()])}))},99824:(e,a,s)=>{"use strict";s.d(a,{P:()=>AdvisorEditService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223),l=s(26222),c=s(72155);function d(e,a,s){return{id:(0,c.x0)(),advisorInstanceId:a,type:e.type,name:e.name,title:e.title,position:s,status:l.cO.waiting,positionOnChart:100,signal:null,active:!0}}class AdvisorEditService extends o.t{addAdvisor(e){const a=this.getState(),s=a.activeTradeFrameId,i=a.data;if(s){const a=d(e,e.id,this.inputs.getEditItemIncrement());return this.update({data:(0,n.Z)((0,r.Z)({},i),{[s]:(0,n.Z)((0,r.Z)({},i[s]),{advisor:a})})}),this.inputs.addAdvisorToChart(s,a.advisorInstanceId,a.name),this.updateActiveInstruments(s),this.inputs.goToTechAnalysis(),this.saveCache(),a}}removeAdvisor(e){const a=this.getState().data;if(a[e]){const s=this.getAdvisor(e);this.update({data:(0,n.Z)((0,r.Z)({},a),{[e]:(0,n.Z)((0,r.Z)({},a[e]),{advisor:void 0})})}),s&&this.inputs.removeAdvisorFromChart(e,s.advisorInstanceId)}this.updateActiveInstruments(e),this.saveCache()}removeActiveAdvisor(){const e=this.getState().activeTradeFrameId;e&&this.removeAdvisor(e)}getCurrentAdvisor(){const e=this.getState().activeTradeFrameId;return this.getAdvisor(e)}getAdvisor(e){if(e){const a=this.getState().data;return a[e]?a[e].advisor:void 0}}getActivatedAdvisor(e){const a=this.getAdvisor(e);return a&&a.status!==l.cO.waiting?a:void 0}toggleActivateSignal(e,a){const s=this.getAdvisor(e);s&&s.signal&&s.advisorInstanceId===a&&(s.status===l.cO.signalActivated||s.status===l.cO.newSignal)&&(s.status===l.cO.signalActivated?this.inputs.cancelSignal(e):this.inputs.applySignal(e,s.signal.dir,s.signal.duration),this.updateSignal(e,s.advisorInstanceId,s.status===l.cO.signalActivated?l.cO.newSignal:l.cO.signalActivated))}setAdvisorsAvailable(e){this.inputs.setLimits(e,60,14400)}resetAdvisor(e){const a=this.getAdvisor(e);a&&this.updateSignal(e,a.advisorInstanceId,l.cO.waiting,null)}isFeatureEnabled(e){const a=this.getState(),s=a.data,i=a.activeTradeFrameId,r=e||i;return!r||(!s[r]||this.isSupportedMechanic(s[r].mechanic))}isSupportedMechanic(e){return"spt"!==e}updateSignal(e,a,s,i){const o=this.getState().data,l=this.getAdvisor(e);l&&a===l.advisorInstanceId&&this.update({data:(0,n.Z)((0,r.Z)({},o),{[e]:(0,n.Z)((0,r.Z)({},o[e]),{advisor:(0,n.Z)((0,r.Z)({},l),{status:void 0!==s?s:l.status,signal:i||l.signal})})})})}migrateCache(){var e=this;return(0,i.Z)((function*(){const a=e.inputs.getFrames(),s=yield e.repository.find(),i=yield e.repositoryActive.find();a.forEach((a=>{var o;const l=e.inputs.getDeprecatedCache(a.id);if(!(null==i||null===(o=i[a.id])||void 0===o?void 0:o.advisor)&&(null==l?void 0:l[0])){const o=s.list.find((e=>e.type===l[0]));if(o){const s=d(o,o.id,e.inputs.getEditItemIncrement());e.repositoryActive.save((0,n.Z)((0,r.Z)({},i),{[a.id]:{advisor:s}})),e.inputs.clearDeprecatedCache(a.id)}}}))}))()}getDefaultDataItem(e){return{advisor:void 0,mechanic:e.mechanic}}updateActiveInstruments(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.getAdvisor(e);e&&this.inputs.updateActiveInstruments(e,l.kb,s&&this.isFeatureEnabled(e)?[{id:"advisor",type:l.kb,position:s.position}]:[],a)}invalidateDataByFrame(e,a){if(e&&a&&a.length){let s={};return a.forEach((a=>{s=(0,n.Z)((0,r.Z)({},s),{[a.id]:(0,n.Z)((0,r.Z)({},this.getDefaultDataItem(a),e[a.id]),{mechanic:a.mechanic})})})),s}}saveCache(){const e=this.getState().data,a={};Object.keys(e).forEach((s=>{const i=e[s].advisor;i&&(a[s]={advisor:i})})),this.repositoryActive.save(a)}constructor(e,a,s){super({activeTradeFrameId:s.activeTradeFrameId,data:{}}),this.repository=e,this.repositoryActive=a,this.inputs=s;var o=this;this.load=(0,i.Z)((function*(){if(!o.inputs.activeTradeFrameId)return;o.migrateCache(),yield o.inputs.waitForChart(o.inputs.activeTradeFrameId),o.update({activeTradeFrameId:o.inputs.activeTradeFrameId});const e=o.inputs.getFrames(),a=o.invalidateDataByFrame(yield o.repositoryActive.find(),e);let s={};e.forEach((e=>{s=(0,n.Z)((0,r.Z)({},s),{[e.id]:o.getDefaultDataItem(e)})})),a&&Object.keys(a).length?(o.update({data:a}),e.forEach((e=>{const a=o.getAdvisor(e.id);a&&o.inputs.addAdvisorToChart(e.id,a.advisorInstanceId,a.name),o.updateActiveInstruments(e.id,!0)}))):o.update({data:s})})),this.updateActiveTradeFrameId=e=>{this.update({activeTradeFrameId:e})},this.updateFrames=e=>{const a=this.getState().data;this.update({data:this.invalidateDataByFrame(a,e)}),e.forEach((e=>{this.updateActiveInstruments(e.id)}))},this.handleAdvisorPosition=e=>{const a=this.getAdvisor(e.tradeFrameId),s=this.getState().data;a&&a.advisorInstanceId===e.payload.id&&this.update({data:(0,n.Z)((0,r.Z)({},s),{[e.tradeFrameId]:(0,n.Z)((0,r.Z)({},s[e.tradeFrameId]),{advisor:(0,n.Z)((0,r.Z)({},a),{positionOnChart:e.payload.position})})})})},this.handleAdvisorSignal=e=>{this.updateSignal(e.tradeFrameId,e.payload.id,l.cO.newSignal,{dir:e.payload.direction,duration:e.payload.expiration,stopLoss:e.payload.stopLoss})}}}},64573:(e,a,s)=>{"use strict";s.d(a,{I:()=>F,A:()=>I});var i=s(37323),r=s(64356),n=s(3121),o=s(27378),l=s(84584),c=s(63967),d=s(97415),u=s(32674),m=s(44495),p=s(29609),h=s(18985),v=s(82844),g=s(77740),_=s(17302),f=s(95029),E=s(26222),S=s(99824);const y="agm_hoWq",b="lmeOVcOW",C="EQTe7jCX",T="BaqWYeY9",A="nzzgcFZt",k="Y1b_whpZ",w="ZDguIOY2",N="xoJjKEt9",R="s9A4tOVZ",I=(0,l.Z)(),D=(0,h.vU)({up:{id:"deals_upper",defaultMessage:"Up"},down:{id:"deals_lower",defaultMessage:"Up"}}),O=40,L=220;const M=o.memo((e=>{let a=e.id,s=e.status,l=e.signal,c=e.colors,d=e.pairPrecision,p=e.signalMessage,h=e.advisorPosition,S=e.chartWidth,k=e.onClick;const w=l.dir,N=l.duration,R=l.stopLoss,I=0===w?"up":"down",M=s!==E.cO.signalActivated,P=(0,n.Z)(o.useState(!1),2),x=P[0],F=P[1],B=(0,n.Z)(o.useState(!1),2),Z=B[0],U=B[1],H=o.useCallback((()=>{k(a),U(!0)}),[a,k]),G=o.useCallback((()=>{F(!0)}),[]),V=o.useCallback((()=>{F(!1)}),[]),W=function(e,a,s,i,r){const o=(0,n.Z)(function(e,a,s,i){return[0,i?e-s:e-a]}(a,s,i,r),2),l=o[0],c=o[1],d=e+-(r?i/2:s/2);return d>c?c:d<l?l:d}(h,S,L,O,M),j=x?c.collapsedHoveredFill:c.collapsedFill,z="up"===I?c.fillUp:c.fillDown,q="up"===I?c.colorUp:c.colorDown,K=(0,m.useSpring)({immediate:!Z,to:{width:M?O:L,backgroundColor:M?j:z,color:M?c.collapsedColor:q,left:W},config:(0,r.Z)((0,i.Z)({},m.config.gentle),{duration:500,easing:u.XL}),onRest:()=>{U(!1)}});return o.createElement(m.animated.div,{className:y,onClick:H,style:K,onMouseEnter:G,onMouseLeave:V},o.createElement("div",{className:b},o.createElement(g.h1e,{className:C}),o.createElement("div",{className:T},o.createElement(p,{dir:o.createElement(v._,Object.assign({},D[I])),duration:(0,f.yC)(N,"d h m"),stopLoss:"SL ".concat(R.toFixed(d))})),o.createElement(_.Xd,{className:A},o.createElement(g.bMz,null))))})),P=e=>{let a=e.dir,s=e.duration;return o.createElement(v._,{id:"advice_duration",defaultMessage:"Advice: {direction} for {duration}",values:{direction:a,duration:s}})},x=e=>{let a=e.dir,s=e.stopLoss;return o.createElement(v._,{id:"advice_limits",defaultMessage:"Advice: {direction} ({limits})",values:{direction:a,limits:s}})},F=e=>{let a=e.chartWidth,s=e.pairPrecision,i=e.tradeFrameId,r=e.colors;var n,l,u;const m=(0,c.G)(S.P),h=(0,d.o)(m.store).data,v=null==h||null===(n=h[i])||void 0===n?void 0:n.advisor,g=v&&v.status!==E.cO.waiting?v:null,_=(null==v||null===(l=v.signal)||void 0===l?void 0:l.duration)&&!(null==v||null===(u=v.signal)||void 0===u?void 0:u.stopLoss)?P:x,f=o.useCallback((e=>{m.toggleActivateSignal(i,e)}),[m,i]);return o.createElement(p.Z,{in:!!g,appear:!0,classNames:{enter:k,enterActive:w,exit:N,exitActive:R},timeout:250},o.createElement("div",null,g?o.createElement(M,{id:g.advisorInstanceId,advisorPosition:g.positionOnChart,chartWidth:a,colors:r,status:g.status,signal:g.signal||E.MQ,pairPrecision:s,signalMessage:_,onClick:f}):null))}},4093:(e,a,s)=>{"use strict";s.d(a,{D2:()=>i.appearanceSettingsItemsPipe});s(25454);var i=s(62062)},66412:(e,a,s)=>{"use strict";s.d(a,{O:()=>u});var i=s(27378),r=s(13243),n=s(95601),o=s(74199),l=s(27634),c=s(40846);const d=i.lazy((()=>Promise.resolve().then(s.bind(s,62062)).then((e=>({default:e.SettingsLayout}))))),u=(0,r.v)({name:"AppearanceSettings",dependsOn:[n.u$]});u.use((0,l.VT)(c.uW.APPEARANCE_SETTINGS),{component:()=>i.createElement(d,null),loader:()=>i.createElement(o.it,null)})},25454:(e,a,s)=>{"use strict";s.d(a,{d:()=>n});var i=s(27378),r=s(17302);const n=e=>{let a=e.content,s=e.dataTestHost;return i.createElement(r.xu,{display:"grid",padding:["m","l"],gap:"s",dataTest:s},i.createElement(r.xu,{fullWidth:!0},a))};n.displayName="SettingsItem"},62062:(e,a,s)=>{"use strict";s.r(a),s.d(a,{SettingsLayout:()=>d,appearanceSettingsItemsPipe:()=>c});var i=s(27378),r=s(46124),n=s(76232),o=s(25454),l=s(17302);const c=(0,n.t)(),d=()=>{const e=(0,r.k)(c,[]);return i.createElement(l.xu,{padding:["m",0,0,0]},e.map(((e,a)=>i.createElement(o.d,{key:a,title:e.title,content:e.component,dataTestHost:e.dataTestHost,dataTestTitle:e.dataTestTitle}))))};d.displayName="SettingsLayout"},49181:(e,a,s)=>{"use strict";s.d(a,{BB:()=>Lr});var i=s(29257),r=s(27378),n=s(37488),o=s.n(n),l=s(60521),c=s(13243),d=s(28373),u=s(97415),m=s(6680),p=s(95601),h=s(83714),v=s(14282),g=s(77740),_="_36a4w8l5xgG7",f="_1zyVOv1RB28W";const E=r.memo((e=>{let a=e.originalIcon;return r.createElement("div",{className:_},r.createElement("div",{className:f},a),r.createElement("div",{className:f},r.createElement(g.jEy,null)))}));E.displayName="NavigationIcon";var S=s(43849),y=s(59757),b=s(36732);var C=s.e(7659).then(s.t.bind(s,77659,17)),T="_1KuiKVt9d48g";const A=r.memo((()=>r.createElement(y.Yz,{description:r.createElement(S.E9,null),icon:r.createElement(b.bC,{className:T,loader:C})})));var k=s(63967),w=s(17302),N=s(14828),R=s(57415),I=s(52356),D="taYbUjGar9nM",O="_3siR2vEc_N3Q",L="_3Cq17amvWuF1",M="_22zgoKbLfkMC",P="_2MrNwT8S2Bvj",x="_2ShFGRfgF9Gt";const F={draw:"beta",win:"positive",loss:"negative"},B={draw:r.createElement(S.K2,null),loss:r.createElement(S.GK,null),win:r.createElement(S.ss,null)},Z=r.memo((e=>{var a;let s=e.battleRoom,i=e.onClick;const n=s.leaderboard,o=s.dates,l=s.ratingsChanges,c=r.useCallback((()=>{i(s)}),[s,i]),d=null===(a=l[n.user.id])||void 0===a?void 0:a.points;return r.createElement(R.Zb,{className:D},r.createElement(R.Zb.Content,{onClick:c},r.createElement("div",{className:O},r.createElement("div",{className:L},r.createElement(R.ZT,{variant:"xs",weight:"bold",caps:!0},r.createElement(R.K7.CompletedDate,{time:o.startingAt}))),r.createElement(g.Ec8,{className:x})),r.createElement("div",{className:O},r.createElement("div",{className:M},"active"!==n.user.status&&r.createElement(R.ZT,{color:F[n.user.status],variant:"xs",weight:"bold",caps:!0},B[n.user.status]),void 0!==d&&r.createElement(R.ZT,{weight:"bold",noWrap:!0},r.createElement("span",null,"+"),r.createElement(I.w,{symbol:"xp",value:d}))),r.createElement(R.qE,{className:P,url:n.opponent.avatar}))))}));var U="_321oo-C_KGAY",H="_1CVXPuZAcF93",G="_2PJujHR2uWT1";const V=r.memo((e=>{let a=e.onItemClick;const s=(0,k.G)(N.y),i=(0,k.G)(v.yD),n=(0,u.o)(s.store).history,o=r.useMemo((()=>n.sort(((e,a)=>a.dates.startingAt-e.dates.startingAt))),[n]),l=r.useCallback((e=>{i.track({scope:"battles",category:"battles",action:"results/events",label:"open"}),a(e)}),[i,a]);return 0===o.length?r.createElement(w.xu,{verticalAlign:"center",flexGrow:!0},r.createElement(y.Yz,{description:r.createElement(S.Lz,null),icon:r.createElement("div",{className:U},r.createElement(g.bpu,{fontSize:"inherit"}))})):r.createElement("div",{className:H},o.map((e=>r.createElement("div",{className:G,key:e.id},r.createElement(Z,{battleRoom:e,onClick:l})))))}));var W=s(15954),j=s(18985),z=s(60042),q="_32y_7KWky66r";const K=e=>{let a=e.className;return r.createElement("div",{className:z(q,a)})};var Y=s(89e3),X="_16mmN49dpYCX",J="_1n6BoR1CG-KG",Q="_12x4gB2q2cA_",$="_2LdwtS1OUZ9N";const ee=e=>{let a=e.count;return r.createElement(w.xu,{direction:"row"},r.createElement("div",{className:J},r.createElement(g.Fln,{"data-test":"bat-online-icon",fontSize:"inherit"})),r.createElement(w.xv,{color:"contrast-gamma",dataTest:"bat-online-count",variant:"S Compact / Bold"},r.createElement(j.BK,{value:a})))},te=e=>{let a=e.endingAt;const s=(0,h.w6)();return r.createElement(R.gi,{format:"short",serverTime:s.timestamp,startTime:a})},ae=r.memo((e=>{let a=e.status,s=e.onlineCount;switch(a){case"idle":return r.createElement(ee,{count:s});case"pending":case"confirmation":return r.createElement(w.xu,{padding:[6,0,6,0]},r.createElement(K,null));case"in-battle":return r.createElement(w.xv,{color:"contrast-gamma",variant:"S Compact / Bold"},r.createElement(S._u,null))}})),se={idle:"not_in_search",pending:"in_search",confirmation:"in_search","in-battle":"in_battle"},ie=r.memo((e=>{let a=e.onClick;const s=(0,k.G)(v.yD),i=(0,k.G)(Y.o),n=(0,k.G)(N.y),o=(0,u.o)(i.store).search,l=o.meta,c=o.status,d=o.onlineCount,m=(0,W.K)(n.store,(e=>e.actual),[]),p=r.useCallback((()=>{null==a||a(),s.track({scope:"battles",category:"battles",action:"main_card",label:"open/widget/".concat(se[c])})}),[s,c,a]);return r.createElement(R.Zb,{"data-test":"bat-entry-card"},r.createElement(R.Zb.Content,{onClick:p},r.createElement(w.xu,null,r.createElement(b.bC,{className:X,"data-test":"bat-entry-card-versus-img",loader:C}),r.createElement(w.xu,null,r.createElement("div",{className:Q},r.createElement(w.xv,{variant:"M Compact / Bold"},l.title)),r.createElement(ae,{onlineCount:d,status:c})),"in-battle"===c&&m&&r.createElement("div",{className:$},r.createElement(w.Ct,{color:"accent",content:r.createElement(te,{endingAt:m.dates.endingAt})})))))}));var re=s(2243),ne=s(49491),oe=s(47014),le=s(7223);class ResultsService extends le.t{constructor(e,a,s){var i;super({results:{status:"idle"}}),i=this,this.repository=e,this.timeService=a,this.searchService=s,this.load=this.createTask(oe((function*(){const e=yield i.repository.find();e&&i.update({results:e}),i.repository.subscribeOnChange(i.handleChange),i.subscribe(i.handleInternalChange),i.searchService.subscribe(i.handleSearchChange)})),{strategy:le.T.once}),this.requestSearch=this.createTask(oe((function*(){return i.update((e=>{if("active"===e.results.status){const a=i.timeService.serverTime;return ne(ne({},e),{},{results:{status:"search-requesting",battleRoomId:e.results.battleRoom.id,startingAt:a.timestamp,endingAt:a.timestamp+10}})}return e})),Promise.resolve()})),{strategy:le.T.queue}),this.reset=this.createTask(oe((function*(){return i.update((e=>"idle"!==e.results.status?{results:{status:"idle",battleRoomId:"search-requesting"===e.results.status?e.results.battleRoomId:e.results.battleRoom.id}}:e)),Promise.resolve()})),{strategy:le.T.queue}),this.handleSearchChange=(e,a)=>{null!==e.restriction&&a.restriction!==e.restriction&&this.reset()},this.handleChange=this.handleChange.bind(this),this.handleInternalChange=this.handleInternalChange.bind(this)}handleChange(e){this.update({results:e})}startCheckSearchRequestingExpire(){this.timeService.events.has("serverTime",this.handleSearchRequestingExpire)||this.timeService.events.on("serverTime",this.handleSearchRequestingExpire)}stopCheckSearchRequestingExpire(){this.timeService.events.off("serverTime",this.handleSearchRequestingExpire)}handleSearchRequestingExpire(e){const a=this.getState();"search-requesting"===a.results.status&&a.results.endingAt<e.timestamp&&this.update((e=>ne(ne({},e),{},{results:{status:"idle"}})))}handleInternalChange(e){"search-requesting"===e.results.status?this.startCheckSearchRequestingExpire():this.stopCheckSearchRequestingExpire()}}var ce=s(15696),de=s(29609),ue="xiVqTIMfRSch",me="_3fx4qPZT-uX0",pe="YBl3oKj92Vn5";const he={purple:"_1evEtW7RiEIz",accent:"_3nTWgN-B9Yk5"},ve=e=>{let a=e.player,s=e.color,i=e.className;return r.createElement("div",{className:z(ue,i)},r.createElement("div",{className:z(me,he[s])},r.createElement(R.qE,{className:pe,url:a.avatar})))};var ge=s.e(7892).then(s.t.bind(s,89900,17));var _e=s.e(9309).then(s.t.bind(s,69309,17)),fe="_2PBow5R3iemP",Ee="_3ALxqMKzjojk",Se="j1-xuNtJNc_7",ye="smupgdtupSPi",be="_3gLhybZHUGFL",Ce="_1Kxn2q2NfpqQ",Te="SoIJInL9LBuX",Ae="_1yMsZ2C3wFv3",ke="_1Gyap_T3s53Z",we="_2xNpcogVNxzE";const Ne={exitActive:"_1fmwduAut5xg"},Re=r.memo((e=>{const a=e.battleRoom.leaderboard,s=a.user,i=a.opponent,n=(0,w.Fg)().dir;return r.createElement(r.Fragment,null,r.createElement("div",{className:fe,dir:n},r.createElement(b.bC,{className:Se,loader:_e}),r.createElement("div",{className:ye},r.createElement("div",{className:be},r.createElement("div",{className:z(Ce,Te)},r.createElement(ve,{color:"purple",player:i})),r.createElement("div",{className:ke},r.createElement(b.bC,{className:we,loader:ge})),r.createElement("div",{className:z(Ce,Ae)},r.createElement(ve,{color:"accent",player:s}))))),r.createElement("div",{className:Ee}))})),Ie=r.memo((()=>{const e=r.useState(null),a=re(e,2),s=a[0],i=a[1],n=(0,k.G)(h.OY),o=(0,k.G)(N.y),l=r.useRef(),c=r.useCallback((()=>{void 0===l.current&&(l.current=setTimeout((()=>{i(null),l.current=void 0}),3e3))}),[]);return r.useEffect((()=>{const e=e=>{null!==e.actual&&n.serverTime.timestamp<e.actual.dates.startingAt+3&&(i(e.actual),c())};return e(o.getState()),o.subscribe(e)}),[c,n,o]),r.createElement(ce.Z,{component:null},s&&[r.createElement(de.Z,{classNames:Ne,key:"host",timeout:450},r.createElement(Re,{battleRoom:s}))])}));var De=s(95029),Oe="_1kClFmWlkjk2";const Le=e=>{let a=e.Component,s=e.className,i=e.disabled,n=e.onClick;const o=r.useCallback((e=>{e.stopPropagation(),n()}),[n]);return r.createElement("button",{className:z(Oe,s),disabled:i,onClick:o},r.createElement(a,{fontSize:"inherit"}))};var Me="_1y2PCAsnxkLZ",Pe="_1jo01hVZnRHt",xe="_36HhVaIYUKDv",Fe="_2UOpdq_jebs9",Be="_3uKeIg-oy93e",Ze="_2oAUTrJnnKEp",Ue="_3jfNZJxw3U33";const He=r.memo((e=>{let a=e.opened,s=e.children,i=e.showClose,n=void 0===i||i,o=e.onClose;const l=(0,De.Lm)(),c=(0,w.Fg)().dir,d=r.useMemo((()=>"ontouchstart"in window||!!navigator.maxTouchPoints),[]),u=r.useRef(null),m=(0,De.xE)(u),p=m.height,h=m.width,v=r.useMemo((()=>h>568?"landscape":"portrait"),[h]),_=r.useCallback((e=>{e===w.tW.HIDDEN&&o()}),[o]),f=r.createElement(w.Xs,{ref:u},d?r.createElement("div",{className:Ue},r.createElement(R.jm,{delay:500,isMounted:a},s("sheet",v))):r.createElement(R.jm,{delay:500,isMounted:a},n&&r.createElement("div",{className:Be},r.createElement(Le,{className:Ze,Component:g.BDo,onClick:o})),s("popup",v)));return d?r.createElement(w.yo,{bg:"beta",containerSelector:".bottom-sheet",dir:c,height:p,state:a?w.tW.EXPANDED:w.tW.HIDDEN,width:l>768?768:l,onChangeState:_},(()=>f)):r.createElement("div",{className:z(Me,a&&Pe),dir:c},r.createElement("div",{className:xe,onClick:o}),r.createElement("div",{className:Fe},f))}));class ConfirmationService extends le.t{constructor(e){var a;super({status:"idle"}),a=this,this.repository=e,this.load=this.createTask(oe((function*(){const e=yield a.repository.find();e&&a.update(e),a.repository.subscribeOnChange(a.handleChangeState)})),{strategy:le.T.once}),this.confirm=this.createTask(function(){var e=oe((function*(e){if("active"===a.getState().status){const s="accept"===e?yield a.repository.accept():yield a.repository.decline();if(s)throw s}}));return function(a){return e.apply(this,arguments)}}(),{strategy:le.T.queue}),this.handleChangeState=this.handleChangeState.bind(this)}handleChangeState(e){this.update(e)}}var Ge="_3AtbksOoMA_N",Ve="_1_t403rpptvI",We="_2iXhstsRr5Ny";const je=r.memo((e=>{let a=e.className,s=e.symbol,i=void 0===s?"dot":s,n=e.children;const o="dot"===i?r.createElement("span",{className:We},"."):r.createElement("span",{className:We},"•");return r.createElement("div",{className:z(Ge,a)},n,r.createElement("div",{className:Ve},o,o,o))})),ze=r.memo((e=>{let a,s=e.userStatus,i=e.opponentStatus;return a=e.expired?r.createElement(S.x,null):"approved"===s&&"waiting"===i?r.createElement(je,null,r.createElement(S.eY,null)):"waiting"===s&&"approved"===i?r.createElement(S.wR,null):r.createElement(S.Lh,null),a}));var qe="_2HVENskfzvHm",Ke="_7mesSf_dOwfn",Ye="_1VagHm7pdCfz",Xe="P89m0EudBVvn",Je="_2z2IFTgQb8_d",Qe="d4Km7NQwnSV4",$e="_1-0-omCd5EWw";const et=r.memo((e=>{let a,s=e.className,i=e.status;const n=r.useMemo((()=>(0,S.sY)()),[]),o=r.useMemo((()=>(0,S.Lr)()),[]);switch(i){case"waiting":a=r.createElement("div",{className:Ke},r.createElement(je,{className:Ye,symbol:"bullet"}));break;case"approved":a=r.createElement("div",{className:Xe},r.createElement("div",{className:z(Je,Qe)},r.createElement(g.NOm,{fontSize:"inherit"})),r.createElement(R.ZT,{color:"positive",variant:"s",weight:"bold",noWrap:!0},n));break;case"declined":a=r.createElement("div",{className:Xe},r.createElement("div",{className:z(Je,$e)},r.createElement(g.bMz,{fontSize:"inherit"})),r.createElement(R.ZT,{color:"negative",variant:"s",weight:"bold",noWrap:!0},o))}return r.createElement("div",{className:z(qe,s)},a)})),tt=e=>{const a=(0,k.G)(h.OY),s=r.useState(!1),i=re(s,2),n=i[0],o=i[1];return r.useEffect((()=>{if(null===e)return o(!1),()=>{};const s=a=>{o(a.timestamp>=e)};return a.events.on("serverTime",s),()=>{a.events.off("serverTime",s)}}),[e,a]),n};var at=s(90400),st="qxcT0Axgj9KM",it="_3LxV5rqMPuBu";const rt=e=>{let a=e.tradersWayLevel,s=e.serviceLevel,i=e.className;return r.createElement("div",{className:z(st,i)},r.createElement(R.XB,{className:it,size:"small",url:s.iconUrl}),r.createElement(R.ZT,{style:{color:s.color},variant:"s",weight:"bold"},r.createElement(j.BK,{value:a})))};var nt=s(67558),ot=s(98225),lt="_3ecyFSpKo2nQ",ct="Ap_WJzU7vIJ7";const dt=r.memo((e=>{let a=e.ratingsService,s=e.leagueId,i=e.position;const n=(0,u.o)(a.store).leagues,o=r.useMemo((()=>n.find((e=>e.id===s))),[s,n]);return o?r.createElement(R.U0.Group,{content:r.createElement("div",{className:lt},r.createElement(R.XB,{className:ct,size:"small",url:o.meta.icon}),r.createElement(R.ZT,{variant:"s",weight:"bold"},r.createElement(j.BK,{value:i}))),title:o.meta.title,titleColor:"gamma"}):null})),ut=r.memo((e=>{const a=(0,nt.K)(ot.w_);return a?r.createElement(dt,ne(ne({},e),{},{ratingsService:a})):null}));var mt="_2tuxp7F8TRYR",pt="_1hsrbNZqYxzP";const ht=e=>{var a,s;let i=e.userId,n=e.country,o=e.className,l=e.countries;const c=(0,at.Un)(i),d=(null!==(a=null!==(s=null==c?void 0:c.meta.country)&&void 0!==s?s:n)&&void 0!==a?a:"").toLocaleLowerCase(),u=r.useMemo((()=>{var e;const a=null==l||null===(e=l[d])||void 0===e?void 0:e.flagIcon;return a?r.createElement("img",{alt:"flag",className:pt,src:a}):null}),[d,l]);return c?r.createElement(R.U0,{className:o,variant:"built-in",fullWidth:!0},c.rating&&r.createElement(ut,{leagueId:c.rating.leagueId,position:c.rating.position}),u?r.createElement(R.U0.Group,{content:u,title:r.createElement(S.zo,null),titleColor:"gamma"}):null,c.serviceLevel&&c.tradersWay&&r.createElement(R.U0.Group,{content:r.createElement(rt,{serviceLevel:c.serviceLevel,tradersWayLevel:c.tradersWay.level}),title:r.createElement(S.Am,null),titleColor:"gamma"})):r.createElement(R.U0,{variant:"built-in",fullWidth:!0},r.createElement(R.U0.Group,{content:r.createElement(R.Od,{className:mt,variant:"text"}),title:r.createElement(R.Od,{className:mt,variant:"text"})}),r.createElement(R.U0.Group,{content:r.createElement(R.Od,{className:mt,variant:"text"}),title:r.createElement(R.Od,{className:mt,variant:"text"})}),r.createElement(R.U0.Group,{content:r.createElement(R.Od,{className:mt,variant:"text"}),title:r.createElement(R.Od,{className:mt,variant:"text"})}))},vt=(e,a,s)=>{const i=a-e;if(i<=0)return 100;const r=Math.floor((a-(s+1))/i*100);return r<0?0:r>100?100:r},gt=(e,a,s)=>{const i=(0,k.G)(h.OY),n=(0,h.w6)(),o=r.useState(0),l=re(o,2),c=l[0],d=l[1];return r.useEffect((()=>{s&&d(vt(e,a,i.serverTime.timestamp))}),[e,a,s,i]),s?c:vt(e,a,n.timestamp)};var _t="_32ZseUPBYAmR",ft="k9FLT9ZsWgua",Et="_33YfiCUdXIEA",St="_2EP1lOE4Wehp",yt="_3aF4IT57ORB_",bt="_1Ya-s4A1mE9m",Ct="_17VXAgF5_fPW";const Tt=r.memo((e=>{let a=e.startingAt,s=e.endingAt,i=e.status,n=e.className,o=e.disabled,l=e.onClick;const c=r.useMemo((()=>(0,S.sY)()),[]),d=gt(a,s,o),u=r.useCallback(((e,a)=>r.createElement("div",{className:z(e,Ct),style:a})),[]),m="approved"===i;return r.createElement("button",{className:z(_t,m&&Et,n),disabled:o,onClick:l},m&&r.createElement(g.NOm,{className:St}),r.createElement(R.ZT,{align:"center",className:ft,lineHeight:"compact",variant:"m",weight:"bold"},m?r.createElement(S.m,null):c),r.createElement(w.uk,{className:z(yt,o&&bt),color:"accent",renderBar:u,value:d,variant:"rect"}))}));var At=s(46245);const kt=(0,s(72021).f)({id:"versusConfirmationDeclineButtonFlag"}),wt=r.memo((e=>{let a=e.disabled,s=e.onClick;const i=(0,At.P)(kt),n=r.useMemo((()=>(0,S.Lr)()),[]);return i?r.createElement(w.zx,{color:"negative",disabled:a,size:"xs",fullWidth:!0,onClick:s},n):null})),Nt=r.memo((e=>{let a=e.status,s=e.startingAt,i=e.endingAt,n=e.userApproved,o=e.uiScale,l=e.className;const c=r.useMemo((()=>"approved"===a),[a]),d=gt(s,i);return c?r.createElement(R.D8,{className:l,color:"positive",direction:"reverse",duration:0,percentage:100,size:100*o,strokeWidth:2*o}):r.createElement(R.D8,{className:l,color:"purple",direction:"reverse",duration:1e3,hidden:!n,percentage:d,size:100*o,strokeWidth:2*o})}));var Rt="rvH1qdGjMvLZ",It="_1Lp6ZuYIaa4_",Dt="_3wFIKM-wqXm0",Ot="_3out0toLlPHL",Lt="HFhYBim11Wgd",Mt="_3yF-saxq5Prb",Pt="ePW2CQ5-nCZQ",xt="_2fkmYgExJPBO",Ft="_3Ej9GMhx4Bf4",Bt="_2htY9t6nFFtN",Zt="_3fft02hQX9-Z";const Ut=r.memo((e=>{let a=e.uiScale,s=e.countries;const i=(0,k.G)(v.yD),n=(0,k.G)(ConfirmationService),o=(0,u.o)(n.confirm.pending),l=r.useState((()=>{const e=n.getState();return"active"===e.status?e:null})),c=re(l,2),d=c[0],m=c[1];r.useEffect((()=>n.subscribe((e=>"active"===e.status&&m(e)))),[n]);const p=r.useCallback((()=>{n.confirm("accept"),i.track({scope:"battles",category:"battles",action:"bottom_sheet",label:"confirm"})}),[i,n]),h=r.useCallback((()=>{n.confirm("decline")}),[n]),g=tt(d?d.endingAt:null),_=r.useMemo((()=>g||"waiting"!==(null==d?void 0:d.user.status)||o),[g,d,o]);return d?r.createElement("div",{className:Rt},r.createElement("header",{className:It},r.createElement(R.ZT,{variant:"m",weight:"bold"},r.createElement(ze,{expired:g,opponentStatus:d.opponent.status,userStatus:d.user.status}))),r.createElement("main",{className:Dt},r.createElement("div",{className:Ot},r.createElement(Nt,{className:xt,endingAt:d.endingAt,startingAt:d.startingAt,status:d.opponent.status,uiScale:a,userApproved:"approved"===d.user.status}),r.createElement("div",{className:Lt},r.createElement(R.qE,{className:Mt,url:d.opponent.avatar})),r.createElement(et,{className:Pt,status:d.opponent.status})),r.createElement(R.ZT,{align:"center",className:Ft,component:"div",lineHeight:"compact",variant:"m",weight:"bold",noWrap:!0},d.opponent.name),r.createElement("div",{className:Bt},r.createElement(ht,{countries:s,country:d.opponent.country,userId:d.opponent.id}))),r.createElement("footer",{className:Zt},r.createElement(Tt,{disabled:_,endingAt:d.endingAt,startingAt:d.startingAt,status:d.user.status,onClick:p}),r.createElement(wt,{disabled:_,onClick:h}))):r.createElement("div",{className:Rt})}));var Ht="_1zAY0bUU9y4r",Gt="_2HBt57_rlN68",Vt="_176r8iwlEjvd",Wt="q6MV-CnXiO5-",jt="rAQiIF_06Rrp",zt="_1cA_1l6NV1uI",qt="_3hXKGSIatjAA";const Kt=r.memo((e=>{let a=e.className,s=e.countries;const i=(0,k.G)(N.y),n=r.useState((()=>{var e,a;return null!==(e=null===(a=i.getState().actual)||void 0===a?void 0:a.leaderboard.opponent)&&void 0!==e?e:null})),o=re(n,2),l=o[0],c=o[1];return r.useEffect((()=>i.subscribe((e=>e.actual&&c(e.actual.leaderboard.opponent)))),[i]),l?r.createElement("div",{className:z(Ht,a)},r.createElement("header",{className:Gt},r.createElement(R.ZT,{variant:"m",weight:"bold"},r.createElement(S.EC,null))),r.createElement("main",{className:Vt},r.createElement("div",{className:Wt},r.createElement(R.qE,{className:jt,url:l.avatar})),r.createElement(R.ZT,{align:"center",className:zt,component:"div",lineHeight:"compact",variant:"m",weight:"bold",noWrap:!0},l.name),r.createElement("div",{className:qt},r.createElement(ht,{countries:s,country:l.country,userId:l.id})))):r.createElement("div",{className:z(Ht,a)})}));var Yt=s(27782),Xt=s(41767),Jt="_1zqukA9cSdaw",Qt="YTgHWTu4Qy_i",$t="_1WeK4yO6fY1B",ea="_3rL4YSAY19FG",ta="_3x5-pnPvqsrF",aa="_2WMvfOgxLvPf";const sa=r.memo((e=>{let a=e.leaderboard,s=e.statistics,i=e.className,n=e.animated,o=e.onContinueClick;return r.createElement("div",{className:z(Jt,n&&ea,i)},r.createElement("div",{className:Qt},r.createElement(Xt.U,{className:$t,leaderboard:a,statistics:s})),r.createElement("footer",{className:ta},r.createElement("div",{className:aa},r.createElement(w.zx,{fullWidth:!0,onClick:o},r.createElement(S.Yd,null)))))}));class TradersWayService extends le.t{constructor(){super({current:null})}updateCurrent(e){this.update((a=>ne(ne({},a),{},{current:e})))}}var ia="_2ON1QFITJQpy",ra="_3wbO7nXIsvem",na="_3U2FN2etwfax";const oa=e=>{let a=e.className,s=e.animated;return r.createElement("div",{className:z(ia,a)},r.createElement(g.Jc_,{className:z(ra,s&&na)}))};var la="_3KbHW2CjpPFM",ca="_1uDmNDOoZUx_",da="_1uS6RxQIsHRt",ua="_3nYpZ6il8zWU",ma="_35vskgr5jert";const pa=r.memo((e=>{let a=e.name,s=e.points,i=e.position,n=e.className,o=e.highlight,l=e.positionUp;return r.createElement("div",{className:z(la,n)},l&&r.createElement(oa,{className:ca,animated:!0}),r.createElement("div",{className:da},o?r.createElement(R.ZT,{color:l?"positive":"alpha",lineHeight:"normal",variant:"s",weight:"bold"},i):r.createElement(R.ZT,{color:"gamma",lineHeight:"normal",variant:"s"},i)),r.createElement("div",{className:ua},o?r.createElement(R.ZT,{color:"alpha",component:"div",lineHeight:"normal",variant:"s",weight:"bold",noWrap:!0},a):r.createElement(R.ZT,{color:"gamma",component:"div",lineHeight:"normal",variant:"s",noWrap:!0},a)),r.createElement("div",{className:ma},o?r.createElement(R.ZT,{color:"positive",lineHeight:"normal",variant:"s",weight:"bold"},r.createElement(I.V,{delay:500,symbol:"xp",value:s})):r.createElement(R.ZT,{color:"gamma",lineHeight:"normal",variant:"s"},r.createElement(I.w,{symbol:"xp",value:s}))))}));var ha="_3qv-I8p_5aUd",va="vAOQOFJxedGy",ga="_2rS1Bsa9vPik",_a="_2dyQqRBS4N_X",fa="xjMJZjXcXbd5";const Ea=r.memo((e=>{let a=e.userLeague,s=e.leaderboard,i=e.totalXp,n=e.className,o=e.animated;const l=r.useState(),c=re(l,2),d=c[0],u=c[1];return r.useEffect((()=>{o&&(null==d||d.scrollIntoView({block:"center"}))}),[o,d]),r.createElement(R.Zb,{className:n},r.createElement(R.Zb.Content,{className:ha},r.createElement("header",{className:va},r.createElement(R.ZT,{variant:"m",weight:"bold"},r.createElement(S.cs,null)),r.createElement(R.XB,{size:"middle",url:a.meta.icon})),r.createElement("main",{className:ga},r.createElement("div",{className:_a},s.players.map(((e,a)=>{var n;const l=e.id===(null===(n=s.user)||void 0===n?void 0:n.id);let c=!1,d=e.points;if(l)if(o){const r=s.players[a+1];c=!!r&&e.points-i<r.points}else d=e.points-i;return r.createElement("div",{className:fa,key:e.id,ref:l?u:void 0},r.createElement(pa,{highlight:l,name:e.name,points:d,position:e.position,positionUp:c}))}))))))}));var Sa={host:"_1_lILkwa5A72",header:"_2Vt-6AwXeIEk",headerLeft:"a9PQVLnCZWTM",headerRight:"_3XT80ZrNREyX",status:"_1fXuUAZaxLKw",levelUpIcon:"fl_CpIDOZeI8",awards:"_3phXMvswETl1",award:"_2ka2-G2PcSZB",awardLeft:"_4mJzry-Rjq_m",awardRight:"_2YxWcy4gB1ee",awardIcon:"LDMLdXvKg41N"};const ya=r.memo((e=>{let a=e.color,s=e.profile;return r.createElement(r.Fragment,null,s.serviceLevel&&r.createElement("div",{className:Sa.status},r.createElement(R.XB,{size:"small",url:s.serviceLevel.iconUrl})),s.tradersWay&&r.createElement(R.ZT,{color:a,lineHeight:"normal",variant:"s",weight:"bold"},r.createElement(S.d4,{level:s.tradersWay.level})))})),ba=r.memo((e=>{let a=e.points,s=e.color,i=e.progress;return i.nextLevel?r.createElement(R.ZT,{color:"gamma",lineHeight:"normal",variant:"s",weight:"bold"},r.createElement(R.uM,{completedCount:r.createElement(R.ZT,{color:s,lineHeight:"normal",variant:"s",weight:"bold"},r.createElement(I.V,{symbol:"xp",value:a})),count:r.createElement(I.w,{symbol:"xp",value:i.nextLevel.points})})):r.createElement(R.ZT,{color:s,lineHeight:"normal",variant:"s",weight:"bold"},r.createElement(I.V,{symbol:"xp",value:a}))})),Ca=r.memo((e=>{let a=e.tradersWay,s=e.profile,i=e.totalXp,n=e.className,o=e.animated;const l=r.useState(0),c=re(l,2),d=c[0],u=c[1],m=r.useMemo((()=>{const e=a.awards,i=a.progress.currentLevel;return e.filter((e=>{var a;return e.levelId===i.id&&(null==s||null===(a=s.serviceLevel)||void 0===a?void 0:a.name)===e.statusId}))}),[a,s]),p=r.useMemo((()=>a.progress.nextLevel?Math.floor(d/a.progress.nextLevel.points*100):100),[d,a]),h=r.useMemo((()=>a.progress.points-i<0),[i,a]);r.useEffect((()=>{o&&setTimeout((()=>u(a.progress.points)),600)}),[o,a]);const v=h?"positive":"alpha";return r.createElement(R.Zb,{className:n},r.createElement(R.Zb.Content,null,r.createElement("div",{className:Sa.header},r.createElement("div",{className:Sa.headerLeft},r.createElement(ya,{color:v,profile:s}),h&&r.createElement(oa,{animated:o})),r.createElement("div",{className:Sa.headerRight},r.createElement(ba,{color:v,points:d,progress:a.progress}))),r.createElement("div",{className:Sa.progress},r.createElement(w.Ex,{percent:p})),0!==m.length&&r.createElement("div",{className:Sa.awards},m.map((e=>r.createElement("div",{className:Sa.award,key:e.id},r.createElement("div",{className:Sa.awardLeft},r.createElement(R.ZT,{color:"gamma",lineHeight:"normal",variant:"s"},r.createElement(S.Pe,null)),r.createElement(R.ZT,{lineHeight:"normal",variant:"s",weight:"bold"},e.name)),r.createElement("div",{className:Sa.awardRight},r.createElement("div",{className:Sa.awardIcon},r.createElement(R.XB,{size:"middle",url:e.icons.small})))))))))}));var Ta="_2QHU9qaOrB-A",Aa="_3U80kdqVOqnc",ka="_3Oh0reuRGbDO",wa="_3DB-iUNgDvNh",Na="_32T3FkaNDJcv",Ra="_1Qhyy1eYI75w",Ia="wwIM4luHgZij",Da="TNYC5cTNvdHU",Oa="_1BKo7VZEMQ7O";const La=r.memo((e=>{let a=e.ratingsService,s=e.className,i=e.leaderboard,n=e.ratingsChanges,o=e.statistics,l=e.animated,c=e.onNewSearchClick;const d=(0,k.G)(TradersWayService),m=(0,u.o)(a.store),p=(0,u.o)(d.store),h=(0,at.Un)(i.user.id),v=r.useMemo((()=>{var e,a,s,r;return(null!==(e=null===(a=o[i.user.id])||void 0===a?void 0:a.xpEarned)&&void 0!==e?e:0)+(null!==(s=null===(r=n[i.user.id])||void 0===r?void 0:r.points)&&void 0!==s?s:0)}),[o,n,i]);return r.createElement("div",{className:z(Ta,l&&wa,s)},r.createElement("div",{className:Aa},r.createElement("div",{className:ka},m.user.league&&r.createElement(Ea,{animated:l,leaderboard:m.leaderboard,totalXp:v,userLeague:m.user.league})),r.createElement("div",{className:Na},h&&p.current&&r.createElement(Ca,{animated:l,profile:h,totalXp:v,tradersWay:p.current}))),r.createElement("footer",{className:Ra},r.createElement("div",{className:Ia},r.createElement(w.zx,{fullWidth:!0,onClick:c},r.createElement(R.ZT,{lineHeight:"compact",variant:"m",weight:"bold"},r.createElement(S.hI,null)))),r.createElement("div",{className:Ia},r.createElement("button",{className:Oa,disabled:!0,onClick:c},r.createElement("div",{className:Da},r.createElement(R.ZT,{variant:"xs",weight:"bold",caps:!0,noLeading:!0},r.createElement(S.vl,null))),r.createElement(R.ZT,{color:"gamma",lineHeight:"compact",variant:"m",weight:"bold"},r.createElement(S.Xw,null))))))})),Ma=r.memo((e=>{const a=(0,nt.K)(ot.w_);return a?r.createElement(La,ne(ne({},e),{},{ratingsService:a})):null}));var Pa="zz_m3NWwVyxJ",xa="_3rkp49lmov4Q",Fa="_2CrFSA3O4lMQ",Ba="_9aCynOZpApX_",Za="_3H90GG-Fc0p_",Ua="_39gMP_c7hcO0";const Ha=e=>"active"===e.results.status?e.results.battleRoom:null,Ga=r.memo((e=>{let a=e.className,s=e.expanded,i=e.orientation,n=e.onCloseClick;const o=(0,k.G)(ResultsService),l=(0,k.G)(Y.o),c=(0,u.o)(l.store).search,d=(0,k.G)(v.yD),m=r.useState(Ha(o.getState())),p=re(m,2),h=p[0],g=p[1],_=r.useState(!1),f=re(_,2),E=f[0],S=f[1],y=r.useState("first"),b=re(y,2),C=b[0],T=b[1];r.useEffect((()=>o.subscribe((e=>{const a=Ha(e);a&&g(a)}))),[o]);const A=r.useCallback((()=>{S(!0)}),[]),w=r.useCallback((()=>{d.track({scope:"battles",category:"battles",action:"results",label:"continue"}),T("second")}),[d]),N=r.useCallback(oe((function*(){d.track({scope:"battles",category:"battles",action:"results",label:"results"});try{yield l.search("start")}finally{yield o.reset(),n()}})),[o,l,d,n]);return h?r.createElement(R.bD,{className:z(Pa,s&&xa,a)},r.createElement(Yt.W,{className:Fa,hideColors:"second"===C,landscape:"landscape"===i,leaderboard:h.leaderboard,meta:c.meta,ratingsChanges:h.ratingsChanges,animated:!0,onAnimationEnd:A}),r.createElement("div",{className:Ba},r.createElement(sa,{animated:E&&"first"===C,className:z(Za,E&&"first"===C&&Ua),leaderboard:h.leaderboard,statistics:h.statistics,onContinueClick:w}),r.createElement(Ma,{animated:"second"===C,className:z(Za,"second"===C&&Ua),leaderboard:h.leaderboard,ratingsChanges:h.ratingsChanges,statistics:h.statistics,onNewSearchClick:N}))):r.createElement(R.bD,{className:z(Pa,a)})})),Va=r.createContext(void 0),Wa=e=>{let a=e.scope,s=e.children;const i=r.useState(null),n=re(i,2),o=n[0],l=n[1],c=r.useRef(),d=r.useCallback((()=>{void 0!==c.current&&(clearTimeout(c.current),c.current=void 0)}),[]),u=r.useCallback((()=>{l(null)}),[]),m=r.useCallback((e=>{var a;(d(),l(e),null!==e.timeout)&&(c.current=setTimeout((()=>{u()}),null!==(a=e.timeout)&&void 0!==a?a:4e3))}),[u,d]);r.useEffect((()=>{null===o||o.scopes.includes(a)||(d(),c.current=setTimeout((()=>{u()}),1e3))}),[a,o,u,d]);const p=r.useMemo((()=>({event:o,addEvent:m,clear:u})),[o,m,u]);return r.createElement(Va.Provider,{value:p},s)},ja=()=>{const e=r.useContext(Va);if(void 0===e)throw new Error("useNavigation must be used within a EventsProvider");return e};var za="_2_Dq5NyfhZt-",qa="_18L_p7JjpYsw",Ka="_1nBuJaYWhYWa",Ya="_2otIfxOzelVl",Xa="_3_CN3Ota3Ru-",Ja="_3ho6d-ym5ggq",Qa="_1kwwjSgxjJWR",$a="NxvGb6NW4gel",es="_3pjW1QZKY3cj",ts="uMRUvdZiFIay",as="_1J98ve_57KOl";const ss=e=>{let a=e.scope,s=e.className,i=e.left,n=e.center,o=e.right,l=e.dataTest,c=e.onClick;return r.createElement("div",{className:z(za,c&&qa,s),"data-test":l,onClick:c},r.createElement(Wa,{scope:a},i),n,r.createElement(Wa,{scope:a},o))};ss.Left=e=>{let a=e.events,s=e.status,i=e.children;return r.createElement("div",{className:Ka},r.createElement("div",{className:Xa},a),i,r.createElement("div",{className:Qa},s))},ss.Right=e=>{let a=e.events,s=e.status,i=e.children;return r.createElement("div",{className:Ya},r.createElement("div",{className:Ja},a),i,r.createElement("div",{className:$a},s))},ss.Center=e=>{let a=e.textLeft,s=e.textCenter,i=e.textRight,n=e.bar;return r.createElement("div",{className:es},r.createElement("div",{className:ts},r.createElement(R.ZT,{lineHeight:"normal",variant:"s",weight:"bold"},a),r.createElement(R.ZT,{lineHeight:"normal",variant:"s",weight:"bold"},s),r.createElement(R.ZT,{lineHeight:"normal",variant:"s",weight:"bold"},i)),r.createElement("div",{className:z(ts,as)},n))};var is=s.e(3244).then(s.t.bind(s,53244,17));const rs=r.memo((()=>{const e=(0,k.G)(Y.o),a=(0,k.G)(v.yD),s=(0,u.o)(e.search.pending),i=(0,b.aN)(is),n=r.useCallback((()=>{e.search("stop"),a.track({scope:"battles",category:"battles",action:"versus_bar",label:"cancel"})}),[e,a]);return r.createElement(ss,{center:r.createElement(ss.Center,{bar:r.createElement(K,null),textCenter:r.createElement(je,null,r.createElement(S.PU,null)),textLeft:null,textRight:null}),dataTest:"bat-pending-stage",left:r.createElement(ss.Left,{events:null,status:null},i&&r.createElement(R.qE,{url:i,variant:"rect"})),right:r.createElement(ss.Right,{events:null,status:null},r.createElement(Le,{Component:g.bMz,disabled:s,onClick:n})),scope:"pending"})}));var ns=s(4281),os="_1kO7sQ-aig4H",ls="_3diZAWg_froM";const cs=r.memo((e=>{let a=e.id,s=e.avatarUrl,i=e.className,n=e.onAvatarClick;const o=r.useCallback((()=>{null==n||n(a)}),[a,n]);return r.createElement("div",{className:z(os,i)},r.createElement(R.qE,{className:ls,url:s,variant:"rect",onClick:n?o:void 0}))})),ds=(e,a)=>e.length>3?[a]:e.concat(a),us=(e,a)=>(e=Math.ceil(e),a=Math.floor(a),Math.floor(Math.random()*(a-e))+e);class Texts{constructor(){this.state=new Map}get(e){var a,s;let i=null!==(a=this.state.get(e.id))&&void 0!==a?a:new Set([]),r=0;const n=(o=e.texts.length,[...Array(o).keys()]).filter((e=>!i.has(e)));var o,l;0===n.length?(r=us(0,e.texts.length),i=new Set([r])):(r=null!==(l=n[us(0,n.length)])&&void 0!==l?l:0,i=i.add(r));return this.state.set(e.id,i),null!==(s=e.texts[r])&&void 0!==s?s:""}}class ReactionsService extends le.t{constructor(e){var a;super({items:[],received:[],submitted:[]}),a=this,this.repository=e,this.load=this.createTask(oe((function*(){const e=Array.from(yield a.repository.findAll());a.update({items:e}),a.repository.subscribeOnReceive(a.handleReactionReceived)})),{strategy:le.T.once}),this.submit=this.createTask(function(){var e=oe((function*(e){a.update((s=>ne(ne({},s),{},{submitted:ds(s.submitted,{id:e.reaction.id,emoji:e.reaction.emoji,text:a.submittedTexts.get(e.reaction)})}))),yield a.repository.submit(e.battleRoomId,e.reaction)}));return function(a){return e.apply(this,arguments)}}(),{strategy:le.T.queue}),this.submittedTexts=new Texts,this.receivedTexts=new Texts,this.handleReactionReceived=this.handleReactionReceived.bind(this)}handleReactionReceived(e){this.update((a=>{const s=a.items.find((a=>a.id===e));return ne(ne({},a),{},{received:s?ds(a.received,{id:s.id,emoji:s.emoji,text:this.receivedTexts.get(s)}):a.received})}))}}class ActivityService extends le.t{constructor(e){var a;super({current:null}),a=this,this.repository=e,this.load=this.createTask(oe((function*(){const e=yield a.repository.find();a.update({current:e}),a.repository.subscribeOnChange(a.handleChange)})),{strategy:le.T.once}),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.update((a=>ne(ne({},a),{},{current:e})))}}class DealsService extends le.t{constructor(e){var a;super({status:"pending",dealAdded:null,dealRemoved:null,deals:[]}),a=this,this.repository=e,this.load=this.createTask(oe((function*(){const e=yield a.repository.find();e&&a.update(e),a.repository.subscribeOnStateChange((e=>a.update(e))),a.repository.subscribeOnDealOpen(a.handleDealOpen),a.repository.subscribeOnDealClose(a.handleDealClose)})),{strategy:le.T.once}),this.handleDealOpen=this.handleDealOpen.bind(this),this.handleDealClose=this.handleDealClose.bind(this)}handleDealOpen(e){this.update((a=>({deals:a.deals.some((a=>a.id===e.id))?a.deals:[...a.deals,ne({},e)],dealAdded:ne({},e)})))}handleDealClose(e){this.update((a=>{const s=a.deals.findIndex((a=>a.id===e.id));return{deals:-1!==s?[...a.deals.slice(0,s),...a.deals.slice(s+1)]:a.deals,dealRemoved:ne({},e)}}))}}var ms="_2bxKlnnA9Hqg",ps="_1gEGix9hpctO",hs="_17KJdAXP17WH",vs="_3ozTKR2q7YmL",gs="_2eUjtGnCkM2A",_s="_3Xb4w3Pbvn_A",fs="_3_jUhekinWQZ";const Es={default:"_3RJsUybTkHxB",accent:"_2-AS5d49QyqB",positive:"_1VIzIgVOHab8",negative:"_16cweiICcbfx",high:"_2KgQ34lvG10n"},Ss={"top-start":"_1QyjZCcFKSG_","top-end":"_1kY8quIjvFTE"},ys=e=>{let a=e.color,s=e.placement,i=e.startIcon,n=e.endIcon,o=e.className,l=e.children,c=e.onClick;return r.createElement("div",{className:z(ms,Es[a],Ss[s],c&&vs,i&&ps,n&&hs,o),onClick:c},i&&r.createElement("div",{className:gs},i),r.createElement("div",{className:fs},l),n&&r.createElement("div",{className:_s},n))},bs=r.memo((e=>{let a=e.activity,s=e.placement,i=e.className;return r.createElement(ys,{className:i,color:"high",placement:s,startIcon:r.createElement(R.ZT,{variant:"s",verticalAlign:"center",noLeading:!0},r.createElement(je,{symbol:"bullet"}))},r.createElement(R.ZT,{variant:"s",weight:"bold",noLeading:!0,noWrap:!0},a.text))})),Cs={proceed:"default",win:"positive",loose:"negative",standoff:"default",cancel:"default"},Ts=r.memo((e=>{let a=e.deal,s=e.placement,i=e.className;return r.createElement(ys,{className:i,color:Cs[a.status],placement:s,startIcon:r.createElement(R.XB,{size:"middle",url:a.asset.icon||De.DI})},r.createElement(R.ZT,{variant:"s",weight:"bold",noLeading:!0,noWrap:!0},r.createElement(De.ih,{currency:a.currency,value:a.balanceChange,isSign:!0})))})),As=r.memo((e=>{let a=e.deal,s=e.placement,i=e.className,n=e.onClick;const o=r.useCallback((()=>{null==n||n(a)}),[a,n]);return r.createElement(ys,{className:i,color:"default",endIcon:"up"===a.dir?r.createElement(g.Qe8,null):r.createElement(g.lTW,null),placement:s,startIcon:r.createElement(R.XB,{size:"middle",url:a.asset.icon||De.DI}),onClick:n?o:void 0},r.createElement(R.ZT,{variant:"s",weight:"bold",noLeading:!0,noWrap:!0},r.createElement(De.ih,{currency:a.currency,value:a.amount})))}));var ks="_33HgCkIzxZMg",ws="_1VzBjcEPprjN";const Ns=r.memo((e=>{let a=e.className,s=e.size,i=e.children;return r.createElement("div",{className:z(ks,a),style:{fontSize:s}},r.createElement("div",{className:ws},i))}));var Rs="_175CcuJEuAah";const Is=r.memo((e=>{let a=e.reaction,s=e.className,i=e.onClick;const n=r.useCallback((()=>{i(a)}),[a,i]);return r.createElement(w.Xd,{className:z(Rs,s),onClick:n},r.createElement(Ns,{size:16},a.emoji))}));var Ds="_2agCqaC8Kpek",Os="_2QjwubLOHtDt",Ls="_3hUT-5YKrxmM";const Ms={"top-start":"_1yEWTAE_d4ba","top-end":"RmMTIHndS3Qd"},Ps=r.memo((e=>{let a=e.placement,s=e.battleRoomId,i=e.className;const n=(0,k.G)(v.yD),o=(0,k.G)(ReactionsService),l=(0,u.o)(o.store).items,c=r.useCallback((e=>{o.submit({battleRoomId:s,reaction:e}),n.track({scope:"battles",category:"battles",action:"versus_bar",label:"reaction/".concat(e.id)})}),[s,n,o]);return r.createElement("div",{className:z(Ds,Ms[a],i)},r.createElement("div",{className:Os},l.map((e=>r.createElement(Is,{className:Ls,key:e.id,reaction:e,onClick:c})))))})),xs=r.memo((e=>{let a=e.reaction,s=e.placement,i=e.color,n=e.className;return r.createElement(ys,{className:n,color:i,placement:s,startIcon:r.createElement(Ns,{size:16},a.emoji)},r.createElement(R.ZT,{variant:"s",weight:"bold",noLeading:!0,noWrap:!0},a.text))}));var Fs="_1bFAJLX2hG9G",Bs="_1ebiWCXG_JlT",Zs="_3loNS_7qxxjz",Us="_3o9fzl6waAbj";const Hs={appear:Bs,appearActive:Zs,enter:Bs,enterActive:Zs,exit:"_1OXk3FDUbkM8",exitActive:"xQuPwAEqhkh5"},Gs={"top-start":"_3TDUQTys_JoU","top-end":"_1_UvypxMES4f"},Vs=r.memo((e=>{let a=e.placement,s=e.className;const i=r.useState(null),n=re(i,2),o=n[0],l=n[1],c=r.useRef(null),d=ja(),u=d.event,m=d.clear,p=r.useCallback((()=>{var e;null!==(e=c.current)&&void 0!==e&&e.hideOnOutsideClick&&m()}),[m]);(0,w.O3)(o,p),r.useEffect((()=>{c.current=u}),[u]);const h=u?"".concat(u.type,"_").concat(u.data.id):"unknown";let v;if(u)switch(u.type){case"activity":v=r.createElement(bs,{activity:u.data,placement:a});break;case"reaction":v=r.createElement(xs,{color:u.color,placement:a,reaction:u.data});break;case"deal_opened":v=r.createElement(As,{deal:u.data,placement:a,onClick:u.onClick});break;case"deal_closed":v=r.createElement(Ts,{deal:u.data,placement:a});break;case"reaction_choice":v=r.createElement(Ps,{battleRoomId:u.data.id,placement:a})}return r.createElement("div",{className:z(Fs,Gs[a],s),ref:l},r.createElement(ce.Z,{component:"null"},v?r.createElement(de.Z,{classNames:Hs,key:h,timeout:200},r.createElement("div",{className:Us},v)):[]))})),Ws=r.memo((e=>{let a=e.onDealClick;const s=(0,k.G)(ReactionsService),i=(0,k.G)(ActivityService),n=(0,k.G)(DealsService),o=ja().addEvent;return r.useEffect((()=>s.subscribe(((e,a)=>{const s=e.received[e.received.length-1];s&&e.received.length!==a.received.length&&o({type:"reaction",scopes:["in-battle"],color:"default",data:s})}))),[s,o]),r.useEffect((()=>i.subscribe(((e,a)=>{e.current&&e.current!==a.current&&o({type:"activity",scopes:["in-battle"],data:e.current})}))),[i,o]),r.useEffect((()=>n.subscribe(((e,s)=>{e.dealAdded&&e.dealAdded!==s.dealAdded?o({type:"deal_opened",scopes:["in-battle"],data:e.dealAdded,onClick:a}):e.dealRemoved&&e.dealRemoved!==s.dealRemoved&&o({type:"deal_closed",scopes:["in-battle"],data:e.dealRemoved})}))),[a,n,o]),r.createElement(Vs,{placement:"top-start"})}));var js="IPCz0-4g5JGQ",zs="_318BuLPQagE3";const qs=r.memo((e=>{let a=e.className,s=e.onClick;return r.createElement("div",{className:z(js,a),onClick:s},r.createElement(g.leh,{className:zs},r.createElement("path",{clipRule:"evenodd",d:"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm2 0c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-10 3c-1.434 0-2.708-.99-3.032-2.25l-1.937.5C7.596 15.44 9.706 17 12 17c2.294 0 4.404-1.559 4.968-3.75l-1.937-.5C14.708 14.01 13.433 15 12 15Zm-2-5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm5 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"currentColor",fillRule:"evenodd"})))}));var Ks="_342jRuZbDXfy",Ys="_1ITMcUBc23Wo",Xs="_2Fcsg29F0Dgx";const Js=r.memo((e=>{let a=e.battleRoomId,s=e.avatarUrl,i=e.className,n=e.onAvatarClick;const o=ja(),l=o.event,c=o.addEvent,d=o.clear,u=r.useCallback((()=>{"reaction_choice"===(null==l?void 0:l.type)?d():void 0!==a&&(c({type:"reaction_choice",timeout:null,scopes:["in-battle"],data:{id:a},hideOnOutsideClick:!0}),null==n||n())}),[l,c,d,a,n]);return r.createElement("div",{className:z(Ks,i)},r.createElement(R.qE,{className:Ys,hovered:"reaction_choice"===(null==l?void 0:l.type),url:s,variant:"rect",onClick:void 0!==a?u:void 0}),void 0!==a&&r.createElement(qs,{className:Xs,onClick:u}))})),Qs=r.memo((()=>{const e=(0,k.G)(ReactionsService),a=ja().addEvent;return r.useEffect((()=>e.subscribe(((e,s)=>{const i=e.submitted[e.submitted.length-1];i&&e.submitted.length!==s.submitted.length&&a({type:"reaction",scopes:["in-battle"],color:"accent",data:i})}))),[e,a]),r.createElement(Vs,{placement:"top-end"})}));var $s="_4ZCnkHpTO1rB",ei="_1iFGkGhBtkWz";const ti=(e,a)=>{const s=a-e;return s<30?"negative":s<90?"warning":"alpha"},ai={alpha:"_1itFX8ZYwnma",warning:"_2xop7dc_LwwH",negative:"_15Mp2JMQIpeS"},si=r.memo((e=>{let a=e.endingAt,s=e.className,i=e.withIcon;const n=(0,h.w6)();return r.createElement("span",{className:z($s,ai[ti(n.timestamp,a)],s)},i&&r.createElement(g.bpu,{className:ei}),r.createElement(w.Wo,{serverTime:n.timestamp,startTime:a,timeFormat:"m:s"}))}));var ii=s(14936);class AssetsService extends le.t{constructor(e){var a;super({fastAsset:null,selectedAssets:[]}),a=this,this.fastAssetRepository=e,this.load=this.createTask(oe((function*(){const e=yield a.fastAssetRepository.find();a.update({fastAsset:e})})),{strategy:le.T.once})}setSelectedAssets(e){this.update({selectedAssets:e})}}var ri="_1mP1jIv-7ncE",ni="_1n-HhV6SO-_G",oi="_3Jf0cYQUZurt";const li=r.memo((e=>{let a,s=e.hint,i=e.onAssetClick,n=e.className;const o=r.useCallback((()=>{i&&"fast-deal"===s.type&&i(s.fastAsset)}),[s,i]);switch(s.type){case"minute-deal":a=r.createElement(r.Fragment,null,r.createElement(R.ZT,{align:"center",className:ni,variant:"l",noLeading:!0},r.createElement(si,{endingAt:s.endingAt,withIcon:!0})),r.createElement(R.ZT,{align:"center",variant:"s"},r.createElement(S.s,null)));break;case"fast-deal":a=r.createElement(r.Fragment,null,r.createElement(R.ZT,{align:"center",className:ni,variant:"l",noLeading:!0},r.createElement(si,{endingAt:s.endingAt,withIcon:!0})),r.createElement(R.ZT,{align:"center",variant:"s"},s.inAsset?r.createElement(S.J9,null):r.createElement(S.Tf,{title:s.fastAsset.title})),i&&!s.inAsset&&r.createElement("div",{className:oi},r.createElement(w.zx,{size:"s",variant:"secondary",fullWidth:!0,onClick:o},r.createElement(R.ZT,{variant:"s",weight:"bold",noWrap:!0},r.createElement(S.Ih,null)))))}return r.createElement("div",{className:z(ri,n)},a)})),ci=["basePlacement"],di=r.memo((e=>{let a=e.className,s=e.battleEndingAt,i=e.onAssetClick,n=e.children;const o=r.useState(null),l=re(o,2),c=l[0],d=l[1],u=r.useState(!1),m=re(u,2),p=m[0],g=m[1],_=r.useRef(),f=(0,w.Fg)().dir,E=(0,k.G)(h.OY),S=(0,k.G)(AssetsService),y=(0,k.G)(v.yD),b=r.useCallback((e=>{y.track({scope:"battles",category:"battles",action:"widget/30sec",label:"click"}),null==i||i(e),g(!1)}),[y,i]),C=r.useCallback((e=>{let a=e.basePlacement,s=ii(e,ci);return r.createElement(w._v,ne(ne({placement:a},s),{},{dir:f}),c&&r.createElement(li,{hint:c,onAssetClick:i?b:void 0}))}),[c,f,b,i]);return r.useEffect((()=>{null!==c&&(void 0!==_.current&&clearTimeout(_.current),g(!0),_.current=setTimeout((()=>g(!1)),3e3))}),[c]),r.useEffect((()=>{if(void 0===s)return;const e=e=>{const a=s-e.timestamp;if(((e,a)=>e>28&&e<31&&"fast-deal"!==(null==a?void 0:a.type))(a,c)){const e=S.getState(),a=e.fastAsset,i=e.selectedAssets;a&&(y.track({scope:"battles",category:"battles",action:"widget/30sec",label:"show"}),d({type:"fast-deal",endingAt:s,fastAsset:a,inAsset:i.some((e=>e.id===a.id))}))}else((e,a)=>e>88&&e<91&&"minute-deal"!==(null==a?void 0:a.type))(a,c)&&(y.track({scope:"battles",category:"battles",action:"widget/90sec",label:"show"}),d({type:"minute-deal",endingAt:s}))};return E.events.on("serverTime",e),()=>{E.events.off("serverTime",e)}}),[c,E,S,y,s]),r.createElement(w.u,{arrow:!0,content:C,delay:100,disablePortal:!0,distance:16,fitSizeTo:"content",open:p,placement:"top",transition:!0,triggerOnHover:!1,triggerOnTap:!1},(e=>{let s=e.ref;return r.createElement("div",{className:a,ref:s},n)}))}));var ui="_3nX_0Byd4kzj";const mi=r.memo((e=>{let a=e.onOpponentClick,s=e.onAssetClick;const i=(0,k.G)(v.yD),n=(0,k.G)(N.y),o=(0,u.o)(n.store).actual,l=r.useCallback((e=>{i.track({scope:"battles",category:"battles",action:"versus_bar",label:"opponent_profile"}),a(e)}),[i,a]),c=r.useCallback((e=>{o&&(null==s||s({id:e.asset.id,mechanic:o.mechanic}),i.track({scope:"battles",category:"battles",action:"versus_bar",label:"asset"}))}),[o,i,s]),d=r.useCallback((()=>{i.track({scope:"battles",category:"battles",action:"versus_bar",label:"open_reactions"})}),[i]);return o?r.createElement(ss,{center:r.createElement(di,{battleEndingAt:o.dates.endingAt,className:ui,onAssetClick:s},r.createElement(ss.Center,{bar:r.createElement(ns.m,{opponentColor:"purple",opponentPoints:o.leaderboard.opponent.points,userColor:"accent",userPoints:o.leaderboard.user.points}),textCenter:r.createElement(si,{endingAt:o.dates.endingAt}),textLeft:r.createElement(I.w,{color:"purple",symbol:"percent",value:o.leaderboard.opponent.points}),textRight:r.createElement(I.w,{color:"accent",symbol:"percent",value:o.leaderboard.user.points})})),left:r.createElement(ss.Left,{events:r.createElement(Ws,{onDealClick:c}),status:null},r.createElement(cs,{avatarUrl:o.leaderboard.opponent.avatar,id:o.leaderboard.opponent.id,onAvatarClick:l})),right:r.createElement(ss.Right,{events:r.createElement(Qs,null),status:null},r.createElement(Js,{avatarUrl:o.leaderboard.user.avatar,battleRoomId:o.id,onAvatarClick:d})),scope:"in-battle"}):r.createElement(ss,{center:r.createElement(ss.Center,{bar:r.createElement(K,null),textCenter:r.createElement(je,null),textLeft:null,textRight:null}),left:r.createElement(ss.Left,{events:null,status:null}),right:r.createElement(ss.Right,{events:null,status:null}),scope:"in-battle"})}));var pi="_3rip5z922Xo5",hi="_3_ppFN9MMtFF",vi="_1VZtWJPRK_5N";const gi={waiting:"_1bcFyaIuKXu2",approved:"m1P2wJN-vVaN",declined:"gwJ-JZxclBkW"},_i=r.memo((e=>{let a,s=e.className,i=e.status;switch(i){case"waiting":a=r.createElement(je,{className:hi,symbol:"bullet"});break;case"approved":a=r.createElement(g.NOm,{className:vi});break;case"declined":a=r.createElement(g.bMz,{className:vi})}return r.createElement("div",{className:z(pi,gi[i],s)},a)}));var fi="_3jCWmt-qm0IL";const Ei=r.memo((e=>{let a=e.className,s=e.disabled,i=e.onClick;const n=r.useCallback((e=>{e.stopPropagation(),i()}),[i]);return r.createElement("button",{className:z(fi,a),disabled:s,onClick:n},r.createElement(R.ZT,{align:"center",variant:"s",weight:"bold",noLeading:!0},r.createElement(S.pC,null)))}));var Si="_1tbtO8QRJfHj",yi="_3a-s28J_ZirD";const bi={accent:"_2kFLU9S-4_bL",purple:"_1if-rSePimpr"},Ci=r.memo((e=>{let a=e.startingAt,s=e.endingAt,i=e.className,n=e.color;const o=gt(a,s),l=r.useCallback(((e,a)=>r.createElement("div",{className:z(e,yi),style:a})),[]);return r.createElement(w.uk,{className:z(i,Si,bi[n]),renderBar:l,size:"small",value:o,variant:"rect"})})),Ti=r.memo((e=>{let a=e.onClick;const s=(0,k.G)(ConfirmationService),i=(0,k.G)(v.yD),n=(0,u.o)(s.store),o=(0,u.o)(s.confirm.pending),l=tt("active"===n.status?n.endingAt:null),c=r.useCallback((()=>{s.confirm("accept"),i.track({scope:"battles",category:"battles",action:"versus_bar",label:"confirm"})}),[i,s]);return"active"===n.status?r.createElement(ss,{center:r.createElement(ss.Center,{bar:r.createElement(Ci,{color:"approved"===n.user.status&&"waiting"===n.opponent.status?"purple":"accent",endingAt:n.endingAt,startingAt:n.startingAt}),textCenter:r.createElement(ze,{expired:l,opponentStatus:n.opponent.status,userStatus:n.user.status}),textLeft:null,textRight:null}),left:r.createElement(ss.Left,{events:null,status:r.createElement(_i,{status:n.opponent.status})},r.createElement(cs,{avatarUrl:n.opponent.avatar,id:n.opponent.id})),right:r.createElement(ss.Right,{events:null,status:"waiting"!==n.user.status&&r.createElement(_i,{status:n.user.status})},"waiting"!==n.user.status?r.createElement(Js,{avatarUrl:n.user.avatar,battleRoomId:void 0}):r.createElement(Ei,{disabled:o||l,onClick:c})),scope:"confirmation",onClick:a}):r.createElement(ss,{center:r.createElement(ss.Center,{bar:r.createElement(K,null),textCenter:r.createElement(je,null),textLeft:null,textRight:null}),left:r.createElement(ss.Left,{events:null,status:null}),right:r.createElement(ss.Right,{events:null,status:null}),scope:"confirmation"})})),Ai=r.memo((()=>{const e=(0,k.G)(Y.o),a=(0,k.G)(ResultsService),s=(0,k.G)(v.yD),i=(0,u.o)(a.store).results,n=(0,u.o)(e.search.pending),o=(0,b.aN)(is),l=r.useCallback(oe((function*(){s.track({scope:"battles",category:"battles",action:"results/versus_bar",label:"new_search"});try{yield e.search("start")}finally{yield a.reset()}})),[a,e,s]);switch(i.status){case"active":{const e=i.battleRoom;return r.createElement(ss,{center:r.createElement(ss.Center,{bar:r.createElement(ns.m,{opponentColor:"purple",opponentPoints:e.leaderboard.opponent.points,userColor:"accent",userPoints:e.leaderboard.user.points}),textCenter:r.createElement(S.sA,null),textLeft:r.createElement(I.w,{color:"purple",symbol:"percent",value:e.leaderboard.opponent.points}),textRight:r.createElement(I.w,{color:"accent",symbol:"percent",value:e.leaderboard.user.points})}),left:r.createElement(ss.Left,{events:null,status:null},r.createElement(cs,{avatarUrl:e.leaderboard.opponent.avatar,id:e.leaderboard.opponent.id})),right:r.createElement(ss.Right,{events:null,status:null},r.createElement(Js,{avatarUrl:e.leaderboard.user.avatar,battleRoomId:void 0})),scope:"idle"})}case"search-requesting":return r.createElement(ss,{center:r.createElement(ss.Center,{bar:r.createElement(Ci,{color:"accent",endingAt:i.endingAt,startingAt:i.startingAt}),textCenter:r.createElement(S.sH,null),textLeft:null,textRight:null}),left:r.createElement(ss.Left,{events:null,status:null},o&&r.createElement(R.qE,{url:o,variant:"rect"})),right:r.createElement(ss.Right,{events:null,status:null},r.createElement(Ei,{disabled:n,onClick:l})),scope:"idle"});case"idle":return null}}));var ki="_3oKy2F79wmMu",wi="_1Kk8hqEdvYLL";const Ni={desktop:"_1yMZpuU_a8OK",mobile:"_2uOcXs4ze2iA"},Ri=r.memo((e=>{let a=e.className,s=e.viewMode,i=e.uiScale,n=e.countries,o=e.onAssetClick;const l=(0,k.G)(Y.o),c=(0,k.G)(ResultsService),d=(0,k.G)(v.yD),m=(0,u.o)(l.store).search,p=(0,u.o)(c.store).results,h=r.useState("confirmation"===l.getState().search.status),g=re(h,2),_=g[0],f=g[1],E=r.useState(!1),S=re(E,2),y=S[0],b=S[1],C=r.useState("active"===p.status),T=re(C,2),A=T[0],w=T[1],N=r.useCallback((()=>{d.track({scope:"battles",category:"battles",action:"bottom_sheet",label:"minimize"}),f(!1)}),[d]),R=r.useCallback((()=>{b(!0)}),[]),I=r.useCallback((()=>{b(!1)}),[]),D=r.useCallback((()=>{d.track({scope:"battles",category:"battles",action:"results",label:"minimize"}),c.requestSearch(),w(!1)}),[d,c]),O=r.useCallback((()=>{f(!0)}),[]);let L;switch(r.useEffect((()=>l.subscribe(((e,a)=>{e.search.status!==a.search.status&&f("confirmation"===e.search.status)}))),[l]),r.useEffect((()=>{c.subscribe(((e,a)=>{e.results.status!==a.results.status&&"active"===e.results.status&&(b(!1),w(!0))}))}),[c]),m.status){case"idle":L="idle"!==p.status?r.createElement(Ai,null):null;break;case"in-battle":L=r.createElement(mi,{onAssetClick:o,onOpponentClick:R});break;case"pending":L=r.createElement(rs,null);break;case"confirmation":L=r.createElement(Ti,{onClick:O})}return r.createElement("div",{className:z(ki,Ni[s],a)},r.createElement(Ie,null),r.createElement("div",{className:wi},L,r.createElement(He,{opened:_,onClose:N},(()=>r.createElement(Ut,{countries:n,uiScale:i}))),r.createElement(He,{opened:y,onClose:I},(()=>r.createElement(Kt,{countries:n}))),r.createElement(He,{opened:A,showClose:!1,onClose:D},((e,a)=>r.createElement(Ga,{expanded:"popup"===e,orientation:a,onCloseClick:D})))))})),Ii=["id","onClick","onClose"],Di=r.memo((e=>{let a=e.id,s=e.onClick,i=e.onClose,n=ii(e,Ii);const o=r.useCallback((()=>{s(),null==i||i(null,a)}),[a,s,i]);return r.createElement(w.G,ne(ne({},n),{},{actionText:r.createElement(S.Yg,null),autoHideDuration:1e4,description:r.createElement(S.Mm,null),IconCloseComponent:g.bMz,id:a,image:g.az_,title:r.createElement(S.SN,null),onClick:o,onClose:i}))})),Oi=["id","onClick","onClose"],Li=r.memo((e=>{let a=e.id,s=e.onClick,i=e.onClose,n=ii(e,Oi);const o=r.useCallback((()=>{s(),null==i||i(null,a)}),[a,s,i]);return r.createElement(w.G,ne(ne({},n),{},{actionText:r.createElement(S.hr,null),autoHideDuration:1e4,description:r.createElement(S.N3,null),IconCloseComponent:g.bMz,id:a,image:g.az_,title:r.createElement(S.oY,null),onClick:o,onClose:i}))}));var Mi=s(74199);const Pi=r.lazy((()=>s.e(1152).then(s.bind(s,1152)).then((e=>({default:e.Results}))))),xi=e=>r.createElement(r.Suspense,{fallback:r.createElement(Mi.zo,null)},r.createElement(Pi,ne({},e))),Fi=r.lazy((()=>s.e(3329).then(s.bind(s,83329)).then((e=>({default:e.Search}))))),Bi=e=>r.createElement(r.Suspense,{fallback:r.createElement(Mi.zo,null)},r.createElement(Fi,ne({},e))),Zi=r.lazy((()=>s.e(7296).then(s.bind(s,17296)).then((e=>({default:e.SearchRestriction}))))),Ui=e=>r.createElement(r.Suspense,{fallback:r.createElement(Mi.zo,null)},r.createElement(Zi,ne({},e)));var Hi=s(64386);const Gi=function(){var e=oe((function*(e,a){switch(a.screen){case"search":return yield e.load(),y.FL.BATTLE_ROOM_SEARCH;case"results":{var s;yield e.loadHistory(),e.select(a.id);const i=e.getState();return i.selectedId&&"ended"===(null===(s=(0,Hi.kk)(i,i.selectedId))||void 0===s?void 0:s.status)?y.FL.BATTLE_ROOM_RESULTS:y.FL.EVENTS}}}));return function(a,s){return e.apply(this,arguments)}}();var Vi=s(26338);class NotificationsService extends le.t{constructor(e){var a;super({status:{value:"idle"},current:null}),a=this,this.repository=e,this.load=this.createTask(oe((function*(){const e=yield a.repository.find();e&&a.update({status:e,current:null}),a.repository.subscribeOnDemoDealOpened(a.handleDemoDealOpened),a.repository.subscribeOnStatusChange(a.handleStatusChange)})),{strategy:le.T.once}),this.handleDemoDealOpened=this.handleDemoDealOpened.bind(this),this.handleStatusChange=this.handleStatusChange.bind(this)}setVisibleMechanics(e){this.update((a=>{const s=a.current,i="mechanic"===(null==s?void 0:s.type);return"active"!==a.status.value||i&&(0,Vi.Z)(e,s.visibleMechanics)?a:e.includes(a.status.mechanic)?i?ne(ne({},a),{},{current:null}):a:ne(ne({},a),{},{current:{type:"mechanic",availableMechanic:a.status.mechanic,visibleMechanics:e}})}))}handleDemoDealOpened(){this.update((e=>"active"===e.status.value?ne(ne({},e),{},{current:{type:"account"}}):e))}handleStatusChange(e){this.update((a=>ne(ne({},a),{},{status:e})))}}class RematchService extends le.t{constructor(e){var a;super({status:"idle"}),a=this,this.repository=e,this.load=this.createTask(oe((function*(){const e=yield a.repository.find();e&&a.update(e),a.repository.subscribeOnChange(a.handleChangeState)})),{strategy:le.T.once}),this.confirm=this.createTask(function(){var e=oe((function*(e){const s=a.getState();if("active"===s.status&&"waiting"===s.user.status){const s="accept"===e?yield a.repository.accept():yield a.repository.decline();if(s)throw s}}));return function(a){return e.apply(this,arguments)}}(),{strategy:le.T.queue}),this.handleChangeState=this.handleChangeState.bind(this)}handleChangeState(e){this.update(e)}}const Wi=r.memo((e=>{let a=e.className,s=e.onStoryOpenClick;const i=(0,k.G)(v.yD),n=(0,k.G)(Y.o),o=(0,u.o)(n.store).search,l=r.useCallback((()=>{null!==o.meta.storyId&&(null==s||s(o.meta.storyId),i.track({scope:"battles",category:"battles",action:"main_card",label:"info_icon"}))}),[o.meta,i,s]);return r.createElement(Mi.V9,{className:a},r.createElement(Mi.V9.Center,null,(e=>r.createElement(Mi.pY,ne({align:"center","data-test":"bat-search-header-title",size:"small",isClipped:!0},e),o.meta.title))),r.createElement("div",null,null!==o.meta.storyId&&r.createElement(Mi.Qe,{"data-test":"bat-search-header-info",onClick:l},r.createElement(g.Gc9,null))))}));var ji=s(96646);const zi=r.memo((e=>{let a=e.className;const s=(0,ji.Z)("history").dates,i=r.useMemo((()=>new Date(1e3*s.startingAt)),[s.startingAt]),n=r.useMemo((()=>(new Date).getFullYear()!==i.getFullYear()),[i]);return r.createElement(Mi.V9,{className:a},r.createElement(Mi.V9.Center,null,(e=>r.createElement(Mi.pY,ne({align:"center",size:"small",isClipped:!0},e),n?r.createElement(j.Ji,{day:"numeric",month:"long",value:i,year:"numeric"}):r.createElement(j.Ji,{day:"numeric",month:"long",value:i})))))}));var qi=s(26763),Ki=s(87601),Yi=s(90569),Xi=s(84244),Ji=s(73533),Qi=s(27634),$i=s(32308),er=s(77575),tr=s(38138),ar=s(59234),sr=s(25974),ir=s(71385),rr=s(7265),nr=s(54463),or=s(72735),lr=s(61681),cr=s(85101),dr=s(3121),ur=s(45797),mr=s(62132),pr=s(57615),hr=s(29490);const vr=new R.aX(50),gr=new pr._({namespace:"@feature/battleRooms",backend:new hr.g}),_r=()=>vr.get("battleRoomsStateGet",(()=>mr.W.request.battleRoomsStateGet())),fr=(Er=(0,i.Z)((function*(){const e=gr.get("getConfig");return e||vr.get("battleRoomsConfigGet",(0,i.Z)((function*(){const e=yield mr.W.request.battleRoomsConfigGet();return gr.set("getConfig",e),e})))})),function(){return Er.apply(this,arguments)});var Er;const Sr=(()=>{const e=new Set,a=a=>{const s=a[a.length-1];s&&e.forEach((e=>e(s)))};return s=>{0===e.size&&(mr.W.subscribe.battleRoomsStateChanged(a),mr.W.on("restore",(()=>{_r().then(a)}))),e.add(s)}})(),yr=(0,j.vU)({bat_choosing_duration:{id:"bat_choosing_duration",defaultMessage:"Choosing trade duration"},bat_choosing_direction:{id:"bat_choosing_direction",defaultMessage:"Choosing trade direction"},bat_choosing_an_active:{id:"bat_choosing_an_active",defaultMessage:"Choosing an asset"},bat_choosing_timeframe:{id:"bat_choosing_timeframe",defaultMessage:"Choosing trade timeframe"}}),br=Object.keys(yr),Cr=(e,a)=>Math.floor(Math.random()*(a-e))+e;class ActivityRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,dr.Z)(yield _r(),1)[0];return"active"===(null==a?void 0:a.status)&&e.scheduleActivityPush(),Promise.resolve(null)}))()}subscribeOnChange(e){this.callbacks.add(e),Sr((e=>{"active"===e.status?(this.scheduleActivityPush(),this.subscribe()):(this.stopScheduler(),this.unSubscribe())}))}scheduleActivityPush(){this.stopScheduler(),this.activityTimeoutId=setTimeout((()=>{const e=yr[br[Cr(0,br.length)]],a={id:e.id,text:ur.NW.formatMessage(e)};this.callbacks.forEach((e=>e(a))),this.scheduleActivityPush()}),1e3*Cr(5,30))}stopScheduler(){void 0!==this.activityTimeoutId&&(clearTimeout(this.activityTimeoutId),this.activityTimeoutId=void 0)}subscribe(){0===this.disposers.length&&this.disposers.push(mr.W.subscribe.battleRoomsReactionReceived((()=>{this.scheduleActivityPush()})),mr.W.subscribe.battleRoomsDealsOpen((()=>{this.scheduleActivityPush()})))}unSubscribe(){this.disposers.forEach((e=>e())),this.disposers=[]}constructor(){this.callbacks=new Set,this.disposers=[]}}var Tr=s(30654);class LeaderboardTransformer{static parse(e,a,s){const i=a.reduce(((a,i)=>(a[i.user_id===e?"user":"opponent"]=LeaderboardTransformer.parseLeaderboardPlayer(i,s),a)),{user:null,opponent:null});return i.user&&i.opponent?{user:i.user,opponent:i.opponent}:null}static parseLeaderboardPlayer(e,a){var s,i;return{id:e.user_id,name:e.name,avatar:e.avatar,country:e.country,position:e.position,status:e.status,points:e.points,noActivity:null!==(i=0===(null===(s=null==a?void 0:a.find((a=>a.user_id===e.user_id)))||void 0===s?void 0:s.deals_count))&&void 0!==i&&i}}}class StateTransformer{static parse(e,a){if("active"===e.status){const s=LeaderboardTransformer.parse(a,e.payload.leaderboard,null);if(null===s)throw new Error("Fail to parse leaderboard for user with id=".concat(a));return{id:e.payload.arena_id,status:"announced",dates:StateTransformer.parseDates(e),mechanic:"bo",mode:"1vs1",leaderboard:s}}}static parseDates(e){return{startingAt:e.payload.date_start,endingAt:e.payload.date_end}}}class BattleRoomsRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,dr.Z)(yield _r(),1)[0];if(0===e.userId){const a=(yield Tr.$.userValues(["data"])).data;e.userId=a.id}return"active"===(null==a?void 0:a.status)?StateTransformer.parse(a,e.userId):null}))()}subscribeOnActualChange(e){Sr((a=>{"active"!==a.status?e(null):e(StateTransformer.parse(a,this.userId))}))}subscribeOnLeaderboardChange(e){mr.W.subscribe.battleRoomsLeaderboardChanged((a=>{a.forEach((a=>{const s=LeaderboardTransformer.parse(this.userId,a.leaderboard,null);s&&e({battleRoomId:a.arena_id,mode:"1vs1",leaderboard:s})}))}))}constructor(){this.userId=0}}var Ar=s(84515);class StateTransformer_StateTransformer{static parse(e,a){const s=LeaderboardTransformer.parse(a,e.leaderboard,e.statistics);return null===s?(console.error("Fail to parse leaderboard for user with id=".concat(a)),null):{id:e.arena_id,status:"ended",mode:"1vs1",dates:StateTransformer_StateTransformer.parseDates(e),leaderboard:s,statistics:StateTransformer_StateTransformer.parseStatistics(e.statistics),ratingsChanges:StateTransformer_StateTransformer.parseRatingsChanges(e.ratings_changes)}}static parseDates(e){return{startingAt:e.date_start,endingAt:e.date_end}}static parseStatistics(e){return e.reduce(((e,a)=>{var s;return e[a.user_id]={xpEarned:null!==(s=a.earned_xp)&&void 0!==s?s:0,dealsCount:a.deals_count,dealsSuccessfulCount:a.deals_successful_count,dealsStreakCount:a.deals_streak_count},e}),{})}static parseRatingsChanges(e){return e.reduce(((e,a)=>(e[a.user_id]={points:a.points},e)),{})}}class HistoryBattleRoomsRepository{findAll(){var e=this;return(0,i.Z)((function*(){const a=(0,dr.Z)(yield Promise.all([vr.get("battleRoomsHistoryGet",(()=>mr.W.request.battleRoomsHistoryGet())),fr(),Ar.$.userValues(["data"])]),3),s=a[0],i=(0,dr.Z)(a[1],1)[0],r=a[2];return e.userId=r.data.id,s&&i?s.map((e=>StateTransformer_StateTransformer.parse(e,r.data.id))).filter((e=>null!==e)):[]}))()}subscribeOnAdded(e){Sr((a=>{"results"===a.status&&fr().then((s=>{if(null===s)return;const i=StateTransformer_StateTransformer.parse(a.payload.arena,this.userId);i&&e(i)}))}))}constructor(){this.userId=0}}class transformers_StateTransformer_StateTransformer{static parse(e,a){switch(e.status){case"idle":case"search":case"results":case"active":return{status:"idle"};case"confirmation":{const s=e.payload.players.reduce(((e,s)=>(e[s.user_id===a?"user":"opponent"]=transformers_StateTransformer_StateTransformer.parsePlayer(s),e)),{user:null,opponent:null});return s.user&&s.opponent?{status:"active",startingAt:e.payload.date_start,endingAt:e.payload.date_end,mode:"1vs1",user:s.user,opponent:s.opponent}:null}}}static parsePlayer(e){return{id:e.user_id,name:e.name,avatar:e.avatar,status:e.status,country:e.country}}}class ConfirmationRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,dr.Z)(yield _r(),1)[0];if(0===e.userId){const a=(yield Tr.$.userValues(["data"])).data;e.userId=a.id}return a?transformers_StateTransformer_StateTransformer.parse(a,e.userId):null}))()}accept(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield mr.W.request.battleRoomsConfirmationChoose({action:"approve"}),2)[1];return null!=e?e:void 0}))()}decline(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield mr.W.request.battleRoomsConfirmationChoose({action:"decline"}),2)[1];return null!=e?e:void 0}))()}subscribeOnChange(e){Sr((a=>{const s=transformers_StateTransformer_StateTransformer.parse(a,this.userId);s&&e(s)}))}constructor(){this.userId=0}}class RematchRepository_transformers_StateTransformer_StateTransformer{static parse(e,a){switch(e.status){case"idle":case"search":case"confirmation":case"active":return{status:"idle"};case"results":{const s=e.payload.rematch;if(!s)return{status:"idle"};const i=s.players.reduce(((e,s)=>(e[s.user_id===a?"user":"opponent"]=RematchRepository_transformers_StateTransformer_StateTransformer.parsePlayer(s),e)),{user:null,opponent:null});return i.user&&i.opponent?{status:"active",startingAt:s.date_start,endingAt:s.date_end,mode:"1vs1",user:i.user,opponent:i.opponent}:null}}}static parsePlayer(e){return{id:e.user_id,name:e.name,avatar:e.avatar,status:e.status}}}class RematchRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,dr.Z)(yield _r(),1)[0];if(0===e.userId){const a=(yield Tr.$.userValues(["data"])).data;e.userId=a.id}return a?RematchRepository_transformers_StateTransformer_StateTransformer.parse(a,e.userId):null}))()}accept(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield mr.W.request.battleRoomsConfirmationChoose({action:"approve"}),2)[1];return null!=e?e:void 0}))()}decline(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield mr.W.request.battleRoomsConfirmationChoose({action:"decline"}),2)[1];return null!=e?e:void 0}))()}subscribeOnChange(e){Sr((a=>{const s=RematchRepository_transformers_StateTransformer_StateTransformer.parse(a,this.userId);s&&e(s)}))}constructor(){this.userId=0}}class ReactionsTransformer{static parse(e){return e.chat_reactions.map(ReactionsTransformer.parseReaction)}static parseReaction(e){return{id:e.id,emoji:e.emoji,texts:e.texts}}}class ReactionsRepository{findAll(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield fr(),1)[0];return e?ReactionsTransformer.parse(e):[]}))()}submit(e,a){return(0,i.Z)((function*(){const s=(0,dr.Z)(yield mr.W.request.battleRoomsReactionSubmit({arena_id:e,reaction_id:a.id}),2)[1];return null!=s?s:void 0}))()}subscribeOnReceive(e){mr.W.subscribe.battleRoomsReactionReceived((a=>a.forEach((a=>e(a.reaction_id)))))}}const kr={idle:"idle",search:"pending",confirmation:"confirmation",active:"in-battle",results:"idle"};class SearchTransformer{static parse(e,a){return{status:kr[e.status],onlineCount:e.online_count,meta:SearchTransformer.parseMeta(a),rules:a.rules.map(SearchTransformer.parseRule),autoSearchEnabled:e.auto_search_enabled}}static parseMeta(e){var a;return{title:e.title,description:e.description,rewardDescription:e.results_reward_description,headerImage:e.header_image,widgetImage:e.widget_image,widgetColor:e.widget_color,splashImage:e.splash_image,storyId:null!==(a=e.story_id)&&void 0!==a?a:null}}static parseRule(e){return{icon:e.icon,title:e.title,description:e.description}}}class SearchRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,dr.Z)(yield Promise.all([_r(),fr()]),2),s=(0,dr.Z)(a[0],1)[0],i=(0,dr.Z)(a[1],1)[0];return i&&null===e.cache&&(e.cache={config:i}),s&&e.cache?SearchTransformer.parse(s,e.cache.config):null}))()}searchStart(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield mr.W.request.battleRoomsSearchStart(),2)[1];return null!=e?e:void 0}))()}searchStop(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield mr.W.request.battleRoomsSearchStop(),2)[1];return null!=e?e:void 0}))()}subscribeOnChange(e){Sr((a=>{const s=this.cache;if(null===s)return;const i=SearchTransformer.parse(a,s.config);i&&e(i)}))}constructor(){this.cache=null}}class SearchRestrictionRepository{find(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield mr.W.request.battleRoomsSearchRestrictionGet(),1)[0];return e.restriction?class RestrictionTransformer{static parse(e){return"not_enough_money"===e.code?{title:e.title,icon:e.icon,code:"not_enough_money",params:{minDepositAmount:e.params.min_deposit_amount,minDepositCurrency:e.params.min_deposit_currency}}:{title:e.title,icon:e.icon,code:"common"}}}.parse(e.restriction):null}))()}subscribeOnChange(e){var a=this;mr.W.subscribe.paymentSuccess((0,i.Z)((function*(){const s=yield a.find();e(s)})))}}var wr=s(23934);class DealTransformer{static parse(e,a){return{id:e.id,amount:e.amount,currency:e.currency,status:e.status,asset:(null==a?void 0:a[e.pair])?a[e.pair]:{id:e.pair,icon:""},dir:e.dir,duration:e.duration,priceOpen:e.price_open,timeOpen:e.time_open,balanceChange:e.balance_change}}}class DealsRepository_transformers_StateTransformer_StateTransformer{static parse(e,a,s){return{status:"active"===e.status?"active":"pending",dealAdded:null,dealRemoved:null,deals:a.map((e=>DealTransformer.parse(e,s)))}}}class DealsRepository{find(){var e=this;return(0,i.Z)((function*(){if(null===e.assets){const a=(yield Tr.$.userValues(["ftt_pairs"])).ftt_pairs;e.assets=class AssetsTransformer{static parse(e){return e.reduce(((e,a)=>(e[a.id]={id:a.id,icon:a.icon_vector},e)),{})}}.parse(a)}const a=(0,dr.Z)(yield _r(),1)[0];if("active"===(null==a?void 0:a.status)){const s=yield mr.W.request.battleRoomsDealsGet({arena_id:a.payload.arena_id});return e.subscribe(),DealsRepository_transformers_StateTransformer_StateTransformer.parse(a,s,e.assets)}return null}))()}subscribeOnStateChange(e){Sr((a=>{"active"===a.status?(mr.W.request.battleRoomsDealsGet({arena_id:a.payload.arena_id}).then((s=>{e(DealsRepository_transformers_StateTransformer_StateTransformer.parse(a,s,this.assets))})),this.subscribe()):(e(DealsRepository_transformers_StateTransformer_StateTransformer.parse(a,[],this.assets)),this.unSubscribe())}))}subscribeOnDealOpen(e){this.emitter.on("dealOpen",e)}subscribeOnDealClose(e){this.emitter.on("dealClose",e)}subscribe(){0===this.disposers.length&&this.disposers.push(mr.W.subscribe.battleRoomsDealsOpen((e=>e.forEach((e=>this.emitter.emit("dealOpen",DealTransformer.parse(e,this.assets)))))),mr.W.subscribe.battleRoomsDealsClose((e=>e.forEach((e=>this.emitter.emit("dealClose",DealTransformer.parse(e,this.assets)))))))}unSubscribe(){this.disposers.forEach((e=>e())),this.disposers=[]}constructor(){this.assets=null,this.emitter=(0,wr.Z)(),this.disposers=[]}}class HistoryStateTransformer{static parse(e,a){const s=LeaderboardTransformer.parse(a,e.leaderboard,e.statistics);return null===s?(console.error("Fail to parse leaderboard for user with id=".concat(a)),null):{id:e.arena_id,status:"ended",mode:"1vs1",dates:HistoryStateTransformer.parseDates(e),leaderboard:s,statistics:HistoryStateTransformer.parseStatistics(e.statistics),ratingsChanges:HistoryStateTransformer.parseRatingsChanges(e.ratings_changes)}}static parseDates(e){return{startingAt:e.date_start,endingAt:e.date_end}}static parseStatistics(e){return e.reduce(((e,a)=>{var s;return e[a.user_id]={xpEarned:null!==(s=a.earned_xp)&&void 0!==s?s:0,dealsCount:a.deals_count,dealsSuccessfulCount:a.deals_successful_count,dealsStreakCount:a.deals_streak_count},e}),{})}static parseRatingsChanges(e){return e.reduce(((e,a)=>(e[a.user_id]={points:a.points},e)),{})}}class ResultsRepository_transformers_StateTransformer_StateTransformer{static parse(e,a){const s=HistoryStateTransformer.parse(e.payload.arena,a);return null===s?{status:"idle"}:{status:"active",battleRoom:s}}}class ResultsRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,dr.Z)(yield _r(),1)[0];if(0===e.userId){const a=(yield Tr.$.userValues(["data"])).data;e.userId=a.id}return"results"===(null==a?void 0:a.status)?ResultsRepository_transformers_StateTransformer_StateTransformer.parse(a,e.userId):null}))()}subscribeOnChange(e){Sr((a=>{"results"===a.status?e(ResultsRepository_transformers_StateTransformer_StateTransformer.parse(a,this.userId)):a.auto_search_enabled&&e({status:"idle"})}))}constructor(){this.userId=0}}class StatusTransformer{static parse(e){return"active"===e.status?{value:"active",mechanic:"bo"}:{value:"idle"}}}class NotificationsRepository{find(){return(0,i.Z)((function*(){const e=(0,dr.Z)(yield _r(),1)[0];return e?StatusTransformer.parse(e):null}))()}subscribeOnDemoDealOpened(e){mr.W.subscribe.fttDealsOpen((a=>{a.forEach((a=>{"demo"===a.group&&e(a)}))}))}subscribeOnStatusChange(e){Sr((a=>{e(StatusTransformer.parse(a))}))}}class FastAssetRepository{find(){return(0,i.Z)((function*(){const e=(yield Tr.$.userValues(["ftt_pairs"])).ftt_pairs.filter((e=>!e.locked&&e.min_duration<30)).sort(((e,a)=>e.min_duration-a.min_duration));return 0!==e.length?class FastAssetTransformer{static parse(e){return{id:e.id,title:e.title,mechanic:"bo"}}}.parse(e[0]):null}))()}}var Nr=s(82844);const Rr={id:"battles",title:r.createElement(Nr._,{id:"battles"})};var Ir=s(58952);const Dr=(0,Ir.WV)({deeplink_action:(0,Ir.t$)("battles"),startSearch:Ir.ge.optional()}),Or=e=>({awards:e.awards,progress:{points:e.progress.points-e.progress.level.points,currentLevel:{id:e.progress.level.id,points:0},nextLevel:e.progress.level.next?{id:e.progress.level.next.id,points:e.progress.level.next.points-e.progress.level.points}:void 0}}),Lr=(0,c.v)({name:"BattleRooms",dependsOn:[p.u$,lr.G,h.e8,v.F0,Yi.J,Qi.im,Ji.Kg,tr.$,sr.M,ir.d,rr.EA,cr.t],optionalDependsOn:[Xi.x,$i.mn,er.Q,ar.Q],services(e,a){let s=e.timeService;const i=new NotificationsService(a.notificationsRepository),r=new AssetsService(a.fastAssetRepository),n=new Y.o(a.searchRepository,a.searchRestrictionRepository);return{notificationsService:i,battleRoomsService:new N.y(a.battleRoomsRepository,a.historyBattleRoomsRepository,s),activityService:new ActivityService(a.activityRepository),dealsService:new DealsService(a.dealsRepository),confirmationService:new ConfirmationService(a.confirmationRepository),rematchService:new RematchService(a.rematchRepository),reactionsService:new ReactionsService(a.reactionsRepository),searchService:n,resultsService:new ResultsService(a.resultsRepository,s,n),assetsService:r,tradersWayService:new TradersWayService}}},{repositories:()=>({activityRepository:new ActivityRepository,battleRoomsRepository:new BattleRoomsRepository,historyBattleRoomsRepository:new HistoryBattleRoomsRepository,confirmationRepository:new ConfirmationRepository,rematchRepository:new RematchRepository,reactionsRepository:new ReactionsRepository,searchRepository:new SearchRepository,searchRestrictionRepository:new SearchRestrictionRepository,dealsRepository:new DealsRepository,resultsRepository:new ResultsRepository,notificationsRepository:new NotificationsRepository,fastAssetRepository:new FastAssetRepository}),publicApi:e=>({battleRoomsService:e.battleRoomsService})}),Mr=(0,d.k)(Lr,((e,a)=>{let s=a.sidebarService;const i=r.useCallback((()=>{var e;s.goToMinor("assets"),null===(e=(0,m.Sc)(qi.ASSET_MENU_SERVICE))||void 0===e||e.selectTab("ftt")}),[s]);return r.createElement(Li,Object.assign({},e,{onClick:i}))})),Pr={account:{id:"battle_rooms_unsupported_account",component:(0,d.k)(Lr,((e,a)=>{let s=a.profileSidebarService;const i=r.useCallback((()=>{s.openById("account")}),[s]);return r.createElement(Di,Object.assign({},e,{onClick:i}))}))},mechanic:{id:"battle_rooms_unsupported_mechanic",component:Mr}},xr=r.memo((e=>{let a=e.searchService,s=e.resultsService,i=e.viewMode,n=e.uiScale,l=e.entityUIService;const c=(0,u.o)(a.store).search,d=(0,u.o)(s.store).results,p=(0,u.o)(l.store).countries,h=r.useCallback((e=>{var a;null===(a=(0,m.Sc)(qi.ASSET_MENU_SERVICE))||void 0===a||a.handleSelect(e.id,"bo"===e.mechanic?"ftt":e.mechanic)}),[]),v=("idle"!==c.status||"idle"!==d.status)&&r.createElement(Ri,{countries:p,viewMode:i,onAssetClick:h,uiScale:n});return"mobile"===i?r.createElement(o(),{maxWidth:Ki.j$.BREAKPOINT_768},v):r.createElement(o(),{minWidth:Ki.j$.BREAKPOINT_769},r.createElement("div",{className:"platform-container-panels__tw-container"},v))})),Fr=(0,d.k)(Lr,(e=>r.createElement(ie,Object.assign({},e)))),Br=(0,d.k)(Lr,(e=>r.createElement(A,Object.assign({},e))));Lr.use(y.uw,((e,a,s)=>{let i=s.battleRoomsService,n=s.sidebarService;const o=i.getState().history,l=i.loadHistory.pending.getState(),c=i.loadHistory.called.getState();return l||!c||o.length>0?e:[...e,{order:2,content:r.createElement(Br,{onClick:()=>{Gi(i,{screen:"search"}).then((e=>e&&n.goTo(e)))}})}]})).use(nr.QT,((e,a,s)=>{let i=s.searchService,n=s.layout;const o=i.getState().search,l=n.getState(),c=l.isActiveOverlay;return l.isDesktop||c||"in-battle"!==o.status?e:[...e,r.createElement(E,{key:"battle",originalIcon:a.originalIcon})]})).use(y.k7,((e,a)=>{a.battleRoomsService.loadHistory()})).use($i.hh,(e=>{let a=e.searchService,s=e.resultsService;return"idle"===a.getState().search.status&&"idle"===s.getState().results.status})).use(Ji.qe,((e,a)=>{let s=a.searchService,i=a.resultsService,n=a.layout,o=a.uiScaleService,l=a.entityUIService;const c=(0,u.o)(n.store).isActiveOverlay,d=(0,u.o)(o.store).scale;return c?r.createElement(xr,{searchService:s,resultsService:i,viewMode:"mobile",uiScale:null!=d?d:1,entityUIService:l}):null})).use(p.fs,((e,a)=>{let s=a.searchService,i=a.resultsService,n=a.uiScaleService,o=a.entityUIService;const l=(0,u.o)(n.store).scale;return r.createElement(xr,{searchService:s,resultsService:i,viewMode:"desktop",uiScale:null!=l?l:1,entityUIService:o})})).use(y.eO,((e,a)=>{let s=a.battleRoomsService,i=a.sidebarService;const n=r.useCallback((()=>{Gi(s,{screen:"search"}).then((e=>e&&i.goTo(e)))}),[s,i]);return r.createElement(Fr,{onClick:n})})).use((0,y.Xw)(Rr.id),((e,a)=>{let s=a.battleRoomsService,i=a.sidebarService;const n=r.useCallback((e=>{Gi(s,{screen:"results",id:e.id}).then((e=>e&&i.goTo(e)))}),[s,i]);return r.createElement(V,{onItemClick:n})})).use(kt,(()=>!1)).use((0,y.ZJ)(y.FL.BATTLE_ROOM_RESULTS),(e=>r.createElement(zi,Object.assign({},e)))).use((0,y.AA)(y.FL.BATTLE_ROOM_RESULTS),(e=>r.createElement(xi,Object.assign({},e)))).use((0,y.AA)(y.FL.BATTLE_ROOM_SEARCH_RESTRICTION),(e=>{const a=r.useCallback((()=>{(0,or.gG)()}),[]);return r.createElement(Ui,Object.assign({},e,{onDepositClick:a}))})).use((0,y.ZJ)(y.FL.BATTLE_ROOM_SEARCH),((e,a)=>{let s=a.storiesNavigation;const i=r.useCallback((e=>{null==s||s.goToStory(e)}),[s]);return r.createElement(Wi,Object.assign({},e,{onStoryOpenClick:i}))})).use((0,y.AA)(y.FL.BATTLE_ROOM_SEARCH),((e,a)=>{let s=a.sidebarService;const i=r.useCallback((e=>{e&&s.close()}),[s]);return r.createElement(Bi,Object.assign({},e,{onStartSearchClick:i}))})).onStart(function(){var e=(0,i.Z)((function*(e){let a=e.events,s=e.layout,r=e.activityService,n=e.assetsService,o=e.battleRoomsService,c=e.searchService,d=e.confirmationService,u=e.reactionsService,m=e.dealsService,p=e.rematchService,h=e.resultsService,v=e.notificationsService,g=e.pushNotifications,_=e.commandService,f=e.sidebarService,E=e.tradersWay,S=e.tradersWayService,b=e.tradeManagerServiceList;a.addCategory(Rr),yield Promise.all([r.load(),n.load(),o.load(),c.load(),d.load(),u.load(),m.load(),p.load(),h.load(),v.load()]),c.subscribe(((e,a)=>{null!==e.restriction&&a.restriction!==e.restriction&&f.goTo(y.FL.BATTLE_ROOM_SEARCH_RESTRICTION)})),(0,l.reaction)((()=>b.tradeManagerService.tradeFrames.map((e=>({id:e.settings.pairId,mechanic:e.settings.project})))),(e=>{v.setVisibleMechanics(e.map((e=>e.mechanic))),n.setSelectedAssets(e)}),{fireImmediately:!0}),E&&(S.updateCurrent(Or(E.getState())),E.subscribe((e=>S.updateCurrent(Or(e))))),null==g||g.addSkippedMessage("ent_battle_opponent_found");v.subscribe(((e,a)=>{e.current&&e.current!==a.current&&(null==g||g.addMessage(Pr[e.current.type]))})),_.registerCommand(Dr.guard,function(){var e=(0,i.Z)((function*(e){if(!e.startSearch||s.getState().isDesktop){const e=yield Gi(o,{screen:"search"});e&&f.goTo(e)}e.startSearch&&(yield c.search("start"))}));return function(a){return e.apply(this,arguments)}}())}));return function(a){return e.apply(this,arguments)}}()).enable((e=>e.politics.isEnabled("ent_battle_rooms_enabled")))},60046:(e,a,s)=>{"use strict";s.d(a,{UR:()=>i.U,aC:()=>i.a,v4:()=>r.v});var i=s(19279),r=s(11154)},11154:(e,a,s)=>{"use strict";s.d(a,{v:()=>PlatformAnalyticsRepository});var i=s(23735),r=s(37323),n=s(24459);class PlatformAnalyticsRepository{save(e){return(0,i.L)(class AnalyticsTransformer{static parseToGaAnalytics(e){var a=e.category,s=e.label,i=e.action,o=(0,n.Z)(e,["category","label","action"]);return(0,r.Z)({event:"uaGtmEvents_clicks",eventAction:i,eventCategory:a,eventLabel:s},o)}}.parseToGaAnalytics(e)),Promise.resolve()}}},87973:(e,a,s)=>{"use strict";s.d(a,{a:()=>DeepLinksRepository});var i=s(29257),r=s(32960),n=s(7035),o=s(20993),l=s(57233),c=s(3253);class DeepLinksRepository{find(){const e=new URL(window.location.href);return e.pathname!==window.location.pathname?(window.open(e),Promise.resolve(null)):e?Promise.resolve(o.y.parse(e)):Promise.resolve(null)}done(e){return n.S.logProxyFx(o.y.parseToAnalytics(e)),(0,r.k)([c.N]),Promise.resolve()}resolve(e){return(0,i.Z)((function*(){const a=yield(0,l.U)(e),s=new URL(a.location);return s.pathname!==window.location.pathname?(window.open(s),Promise.resolve(null)):o.y.parse(s)}))()}}},3253:(e,a,s)=>{"use strict";s.d(a,{N:()=>i});const i="deeplink_action"},57233:(e,a,s)=>{"use strict";s.d(a,{U:()=>n});var i=s(29257);const r={},n=(o=(0,i.Z)((function*(e){const a=r[e];if(a)return a;const s=yield fetch(e,{method:"get",headers:{Accept:"application/json"},credentials:"include"}),i=yield s.json();return r[e]=i,i})),function(e){return o.apply(this,arguments)});var o},19279:(e,a,s)=>{"use strict";s.d(a,{U:()=>r.U,a:()=>i.a});var i=s(87973),r=s(57233)},20993:(e,a,s)=>{"use strict";s.d(a,{y:()=>DeepLinkTransformer});var i=s(37323),r=s(64356),n=s(72124),o=s(3253);class DeepLinkTransformer{static parse(e){const a=(0,n.parse)(e.search,{parseBooleans:!0,parseNumbers:!0}),s=(0,i.Z)({},a);return 0===Object.keys(s).length?null:s}static parseToAnalytics(e){const a={eventAction:"null",event:"uaGtmEvents_clicks",eventCategory:"deeplink_open",eventLabel:(0,n.stringify)(e)};let s="".concat(e[o.N]);return"undefined"===s&&("openPayIn"in e?s="payin":"link"in e&&(s="openlink")),(0,r.Z)((0,i.Z)({},a),{eventAction:null!=s?s:a.eventAction})}}},18902:(e,a,s)=>{"use strict";s.d(a,{u:()=>f});var i=s(29257),r=s(27378),n=s(60521),o=s(13243),l=s(95601),c=s(82844),d=s(25974),u=s(54463),m=s(5182),p=s(71003),h=s(77458),v=s(30788),g=s(46455),_=s(84732);const f=(0,o.v)({name:"Chart",dependsOn:[d.M,m.K,p.x,l.u$],services:(e,a)=>({chartSettingsService:new g.v(a.chartSettingsRepository,{applySettings:a=>{try{const s=e.commonLegacyServiceList.uiService,i=e.tradingLegacyServiceList.dealServiceBo;void 0!==a.isChartTypesEnabled&&s.setChartTypesEnabled(a.isChartTypesEnabled),void 0!==a.isIndicatorsEnabled&&s.setIndicatorsEnabled(a.isIndicatorsEnabled),void 0!==a.isStrike&&i.setStrikesVisible(a.isStrike)}catch(e){console.error(e)}},subscribeSettingsChange:a=>{try{const s=e.commonLegacyServiceList.uiService,i=e.tradingLegacyServiceList.dealServiceBo;(0,n.reaction)((()=>({isStrike:i.strikesVisible,isChartTypesEnabled:s.chartTypesEnabled,isIndicatorsEnabled:s.indicatorsEnabled})),(e=>{a(e)}))}catch(e){console.error(e)}}})})},{repositories:()=>({chartSettingsRepository:new _.K})});var E;f.use(h.Y,((e,a,s)=>!s.chartSettingsService.webGLEnabled&&r.createElement(v.MA,null))).use(u.GS,((e,a,s)=>(e.push({component:r.createElement(v.KF,{service:s.chartSettingsService}),title:r.createElement(c._,{id:"chart",defaultMessage:"Chart"})}),e))).onStart((E=(0,i.Z)((function*(e){let a=e.chartSettingsService;return yield a.load()})),function(e){return E.apply(this,arguments)}))},66727:(e,a,s)=>{"use strict";s.d(a,{K:()=>ChartSettingsRepository});var i=s(29257),r=s(30654),n=s(16558);class ChartSettingsRepository{find(){return(0,i.Z)((function*(){const e=(yield r.$.userValues(["options"])).options;return Promise.resolve(n.$.parse(e))}))()}save(e){return Object.keys(e).forEach((a=>{const s=e[a];void 0!==s&&r.$.setUserOption(n.$.parseRequest(a,s))})),Promise.resolve()}}},84732:(e,a,s)=>{"use strict";s.d(a,{K:()=>i.K});var i=s(66727)},16558:(e,a,s)=>{"use strict";s.d(a,{$:()=>ChartSettingsTransform});const i={isIndicatorsEnabled:"indicators_enabled",isChartTypesEnabled:"chart_types_enabled",isStrike:"digital_strikes_visible"};class ChartSettingsTransform{static parse(e){return{isIndicatorsEnabled:"true"===e.indicators_enabled,isChartTypesEnabled:"true"===e.chart_types_enabled,isStrike:"true"===e.digital_strikes_visible}}static parseRequest(e,a){return{name:i[e],value:a.toString()}}}},46455:(e,a,s)=>{"use strict";s.d(a,{v:()=>ChartSettingsService});var i=s(29257),r=s(7223),n=s(87816);class ChartSettingsService extends r.t{load(){var e=this;return(0,i.Z)((function*(){const a=yield e.repository.find();return a&&e.update(a),Promise.resolve()}))()}saveSetting(e){this.repository.save(e),this.inputs.applySettings(e),this.update(e)}constructor(e,a){super({}),this.repository=e,this.webGLEnabled=(0,n.t)(),this.inputs=a,this.inputs.subscribeSettingsChange((e=>{this.update(e)}))}}},81912:(e,a,s)=>{"use strict";s.d(a,{K:()=>c});var i=s(27378),r=s(97415),n=s(82844),o=s(54463);const l=e=>{let a=e.id,s=e.title,r=e.description,n=e.value,l=e.dataTestId,c=e.onCheck;const d=i.useCallback((e=>{c(a,e)}),[a,c]);return i.createElement(o.dy,{id:a,checked:n,title:s,onChange:d,description:r,dataTestId:l})};l.displayName="ChartSettingsItem";const c=e=>{let a=e.service;const s=(0,r.o)(a.store),o=s.isChartTypesEnabled,c=s.isIndicatorsEnabled,d=s.isStrike,u=i.useCallback(((e,s)=>{a.saveSetting({[e]:s})}),[a]),m=[{id:"isStrike",title:i.createElement(n._,{id:"strike_prices",defaultMessage:"Strike prices"}),description:i.createElement(n._,{id:"strike_prices_text",defaultMessage:"Do not show strike prices"}),value:!0===d,dataTestId:"STRIKES_ON_THE_CHART",onCheck:u},{id:"isIndicatorsEnabled",title:i.createElement(n._,{id:"indicators",defaultMessage:"Indicators"}),description:i.createElement(n._,{id:"indicators_text",defaultMessage:"Show a list of indicators"}),value:!0===c,dataTestId:"INDICATORS",onCheck:u},{id:"isChartTypesEnabled",title:i.createElement(n._,{id:"chart_types",defaultMessage:"Chart types"}),description:i.createElement(n._,{id:"chart_types_text",defaultMessage:"Show a switch between chart types"}),value:!0===o,dataTestId:"CHART_TYPES",onCheck:u}];return i.createElement(i.Fragment,null,m.map((e=>i.createElement(l,Object.assign({key:e.id},e)))))};c.displayName="ChartSettings"},22900:(e,a,s)=>{"use strict";s.d(a,{K:()=>i.K});var i=s(81912)},70296:(e,a,s)=>{"use strict";s.d(a,{M:()=>c});var i=s(27378),r=s(30559),n=s(17302),o=s(58290),l=s(99265);const c=()=>{const e=(0,n.Fg)().dir;return i.createElement("div",{className:l.Z.host,dir:e},i.createElement("div",{className:l.Z.icon},i.createElement(o.w,null)),i.createElement("div",{className:l.Z.title},i.createElement(r.Z,{defaultMessage:"WebGL Disabled in Browser",id:"chart_webgl_disabled_title"})),i.createElement("div",{className:l.Z.subtitle},i.createElement(r.Z,{defaultMessage:"WebGL is needed for the chart to run properly",id:"chart_webgl_disabled_desc"})),i.createElement("a",{className:l.Z.link,href:"https://plus.olymptrade.com/ru/help/category/trading/what-is-webgl",target:"_blank",rel:"noreferrer"},i.createElement(n.zx,{variant:"secondary",onClick:()=>null},i.createElement(r.Z,{defaultMessage:"How to Enable WebGL",id:"chart_webgl_disabled_button"}))))};c.displayName="WebGlFallback"},58290:(e,a,s)=>{"use strict";s.d(a,{w:()=>r});var i=s(27378);const r=()=>i.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"48",height:"48",rx:"24",fill:"#F15131"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.7893 18.7439L25.3293 26.4425C25.1175 27.1055 24.5013 27.5555 23.8053 27.5555H19.3428L17.2957 32.3604C17.0444 32.9504 16.465 33.3333 15.8238 33.3333H12C11.2636 33.3333 10.6667 32.7364 10.6667 32C10.6667 31.2636 11.2636 30.6667 12 30.6667H15.1188L17.1658 25.8618C17.4172 25.2718 17.9965 24.8889 18.6378 24.8889H23.0263L26.1876 14.9951C26.6501 13.5478 28.6802 13.4995 29.2109 14.9232L32.9259 24.8889H36C36.7364 24.8889 37.3333 25.4858 37.3333 26.2222C37.3333 26.9586 36.7364 27.5555 36 27.5555H32.1852C31.5171 27.5555 30.9193 27.1404 30.686 26.5144L27.7893 18.7439Z",fill:"white"}));r.displayName="DisabledChartIcon"},70037:(e,a,s)=>{"use strict";s.d(a,{M:()=>i.M});var i=s(70296)},30788:(e,a,s)=>{"use strict";s.d(a,{KF:()=>i.K,MA:()=>r.M});var i=s(22900),r=s(70037)},87816:(e,a,s)=>{"use strict";s.d(a,{t:()=>i});const i=()=>{const e=document.createElement("canvas");try{return Boolean(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(e){return!1}}},79151:(e,a,s)=>{"use strict";s.d(a,{Qw:()=>i,Yx:()=>n,hJ:()=>r});const i={COPY_TRADING_LEADERBOARD:"copy-trading/leaderboard",COPY_TRADING_SIGNAL_DETAILS:"copy-trading/signal-details",COPY_TRADING_ASSETS:"copy-trading/assets"},r="social",n="sh_copytrading_enabled"},96937:(e,a,s)=>{"use strict";s.d(a,{$D:()=>i.$D,cM:()=>r.c,hz:()=>i.hz});var i=s(21921),r=(s(45233),s(48529))},45233:(e,a,s)=>{"use strict";s.d(a,{T:()=>_});var i=s(29257),r=s(27378),n=s(60521),o=s(13243),l=s(82844),c=s(61681),d=s(25974),u=s(5182),m=s(71003),p=s(54463),h=s(29120),v=s(98631),g=s(21921);const _=(0,o.v)({name:"Deals",dependsOn:[d.M,u.K,m.x,c.G],services:(e,a)=>({dealsSettingsService:new h.q(a.dealsSettingsRepository,{applySettings:a=>{try{const s=e.tradingLegacyServiceList,i=s.dealServiceBo,r=s.dealServiceFx;void 0!==a.isOneClickDeals&&(i.setIsOneClickPopup(a.isOneClickDeals),r.setIsOneClickPopup(a.isOneClickDeals)),void 0!==a.isOneClickTradeClose&&(i.setIsOneClickSell(a.isOneClickTradeClose),r.setIsOneClickSell(a.isOneClickTradeClose)),void 0!==a.isMartingale&&i.setMartingale(a.isMartingale),void 0!==a.isOrders&&(i.setShowOrders(a.isOrders),r.setShowOrders(a.isOrders))}catch(e){console.error(e)}},subscribeSettingsChange:a=>{try{const s=e.tradingLegacyServiceList,i=s.dealServiceBo,r=s.dealServiceFx;(0,n.reaction)((()=>({isOneClickDeals:i.isOneClickPopup,isOneClickTradeClose:i.isOneClickSell,isMartingale:i.isMartinGale,isOrders:i.showOrders})),(e=>{a(e)})),(0,n.reaction)((()=>({isOneClickDeals:r.isOneClickPopup,isOneClickTradeClose:r.isOneClickSell,isOrders:r.showOrders})),(e=>{a(e)}))}catch(e){console.error(e)}}})})},{repositories:()=>({dealsSettingsRepository:new v.G})});var f;_.use(g.hz,((e,a,s)=>{let i=s.dealsSettingsService;const n=i.getState(),o=n.isOneClickDeals,c=n.isOneClickTradeClose,d=n.isOrders,u=n.isMartingale,m=(e,a)=>{i.saveSetting({[e]:a})};return e.push({id:"isOneClickDeals",title:r.createElement(l._,{id:"one_click_trade",defaultMessage:"One-click trade"}),description:r.createElement(l._,{id:"one_click_trade_test",defaultMessage:"Do not show the warning, execute trades in one click"}),value:!0===o,dataTestId:"ONE_CLICK_POPUP",order:g.$D.isOneClickDeals,onCheck:m},{id:"isOneClickTradeClose",title:r.createElement(l._,{id:"one_click_close",defaultMessage:"Close a trade in one click"}),description:r.createElement(l._,{id:"one_click_close_text",defaultMessage:"Do not show this warning and close a trade in one click"}),value:!0===c,dataTestId:"ONE_CLICK_TRADE",order:g.$D.isOneClickTradeClose,onCheck:m},{id:"isOrders",title:r.createElement(l._,{id:"orders",defaultMessage:"Orders"}),description:r.createElement(l._,{id:"show-orders",defaultMessage:"Show orders"}),value:!0===d,dataTestId:"SHOW_ORDERS",order:g.$D.isOrders,onCheck:m},{id:"isMartingale",title:r.createElement(l._,{id:"martingale_setting_title",defaultMessage:"martingale_setting_title"}),description:r.createElement(l._,{id:"martingale_setting_text",defaultMessage:"This function will multiply or divide the trade amount by 2 in FTT mode"}),value:!0===u,dataTestId:"MARTINGALE",order:g.$D.isMartingale,onCheck:m}),e})),_.use(p.GS,((e,a,s)=>(e.push({component:r.createElement(g.V5,{service:s.dealsSettingsService}),title:r.createElement(l._,{id:"cabinet_tab_deals",defaultMessage:"Deals"})}),e))),_.onStart((f=(0,i.Z)((function*(e){let a=e.dealsSettingsService;return yield a.load()})),function(e){return f.apply(this,arguments)}))},16896:(e,a,s)=>{"use strict";s.d(a,{G:()=>DealsSettingsRepository});var i=s(29257),r=s(30654),n=s(53687);class DealsSettingsRepository{find(){return(0,i.Z)((function*(){const e=(yield r.$.userValues(["options"])).options;return Promise.resolve(n.B.parse(e))}))()}save(e){return Object.keys(e).forEach((a=>{const s=e[a];void 0!==s&&r.$.setUserOption(n.B.parseRequest(a,s))})),Promise.resolve()}}},98631:(e,a,s)=>{"use strict";s.d(a,{G:()=>i.G});var i=s(16896)},53687:(e,a,s)=>{"use strict";s.d(a,{B:()=>DealsSettingsTransform});const i={isOneClickDeals:"is_one_click_popup",isOneClickTradeClose:"is_one_click_trade_deal",isMartingale:"martingale_multiplication",isOrders:"show_orders"};class DealsSettingsTransform{static parse(e){return{isOneClickDeals:"true"===e.is_one_click_popup,isOneClickTradeClose:"true"===e.is_one_click_trade_deal,isMartingale:"true"===e.martingale_multiplication,isOrders:"true"===e.show_orders}}static parseRequest(e,a){return{name:i[e],value:a.toString()}}}},29120:(e,a,s)=>{"use strict";s.d(a,{q:()=>DealsSettingsService});var i=s(29257),r=s(7223);class DealsSettingsService extends r.t{load(){var e=this;return(0,i.Z)((function*(){const a=yield e.repository.find();return a&&e.update(a),Promise.resolve()}))()}saveSetting(e){this.repository.save(e),this.inputs.applySettings(e),this.update(e)}constructor(e,a){super({}),this.repository=e,this.inputs=a,this.inputs.subscribeSettingsChange((e=>{this.update(e)}))}}},10279:(e,a,s)=>{"use strict";s.d(a,{$D:()=>c,V5:()=>u,hz:()=>l});var i=s(27378),r=s(46124),n=s(76232),o=s(54463);const l=(0,n.t)(),c=["isOneClickDeals","isOneClickTradeClose","isOrders","isMartingale","flatMarketProtection"].reduce(((e,a,s)=>(e[a]=s,e)),{}),d=e=>{let a=e.id,s=e.title,r=e.description,n=e.value,l=e.dataTestId,c=e.enableConfirmation,d=e.disableConfirmation,u=e.onCheck;const m=i.useCallback((e=>{u(a,e)}),[a,u]);return i.createElement(o.dy,{id:a,checked:n,title:s,onChange:m,description:r,enableConfirmation:c,disableConfirmation:d,dataTestId:l})};d.displayName="DealSettingsItem";const u=()=>{const e=(0,r.k)(l,[]);return i.createElement(i.Fragment,null,e.sort(((e,a)=>e.order>a.order?1:-1)).map((e=>i.createElement(d,Object.assign({key:e.id},e)))))};u.displayName="DealSettings"},21921:(e,a,s)=>{"use strict";s.d(a,{$D:()=>i.$D,V5:()=>i.V5,hz:()=>i.hz});var i=s(10279)},48529:(e,a,s)=>{"use strict";function i(e,a){const s=function(e){const a=e.replace(/[.*+?^${}()|[\]\\\/]/g,"");return/([A-z&-]+)?(\d+)?/.exec(a)}(e);if(s&&s[1]){const e=new RegExp(s[1],"i");return a.filter((a=>e.test(a.title)||e.test(a.id)))}return null}s.d(a,{c:()=>i})},68724:(e,a,s)=>{"use strict";s.d(a,{h:()=>i});const i=(0,s(84584).Z)()},43424:(e,a,s)=>{"use strict";s.d(a,{$:()=>i});const i=(0,s(23934).Z)()},22895:(e,a,s)=>{"use strict";s.d(a,{x:()=>X});var i=s(37323),r=s(64356),n=s(27378),o=s(60521),l=s(13243),c=s(94503),d=s(28373),u=s(17330),m=s(36732),p=s(6680),h=s(83714),v=s(95601),g=s(73598),_=s(82844),f=s(26763),E=s(23735),S=s(73533),y=s(5182),b=s(71003),C=s(18296),T=s(80561),A=s(7265),k=s(4083),w=s(5915),N=s(54554),R=s(25974),I=s(8275),D=s(74772),O=s(93824),L=s(99538),M=s(12802),P=s(13954),x=s(54463),F=s(95253),B=s(42593),Z=s(17478),U=s(93127),H=s(91508),G=s(50779),V=s(78389),W=s(81795),j=s(51968),z=s(78769),q=s(44302),K=s(43424),Y=s(46262);const X=(0,l.v)({name:"DealsFtt",dependsOn:[v.u$,R.M,T.b,y.K,b.x,S.Kg,u.M7,h.e8,c.Ul,M.Q,A.EA,P.j],services(e,a){const s=()=>e.commonLegacyServiceList.accountService.selectedAccount.id,o=a=>(0,j.G)(e.fttAssetsService.getAsset(a)),l=a=>{e.tradeManagerServiceList.tradeManagerService.applyScenario(new C.R).showDeal((0,r.Z)((0,i.Z)({},a),{pair:o(a.pair)}),"bo",e.tradingLegacyServiceList.assetMenuService,e.commonLegacyServiceList.sideBarService,e.commonLegacyServiceList.uiService.windowWidth<813)},c=a=>{e.tradeManagerServiceList.tradeManagerService.applyScenario(new C.R).hideDeal((0,r.Z)((0,i.Z)({},a),{pair:o(a.pair)}),"bo")},u=new Z.a(a.dealsHistoryFttRepository,{getAccountId:s,getAsset:o,getAssetList(){const a=e.fttAssetsService.getState().assets;return Object.keys(a).map((e=>{const s=a[e];return(0,j.G)(s)}))},showDeal:l,hideDeal:c,showDealTab(){e.commonLegacyServiceList.sideBarService.goTo(I.KO.TRADING_HISTORY_FTT),e.tradingHistoryBarServiceFtt.selectTab("trades")},getLocale:()=>e.locale.getLocale(),getEmail:()=>e.user.getState().user.email,sendStatisticEvent(e){(0,E.L)(e)}}),h=new U.d(a.dealsHistoryFttRepository,{getAccountId:s,getAsset:o,showDeal:l,hideDeal:c}),v=(0,d.k)(X,(e=>n.createElement(V.O,{request:e.request,onClose:e.onClose}))),g=new H.e(a.dealDetailsRepository,{findDeal:e=>u.getState().list.find((a=>a.id===e.id&&a.accountId===e.account_id)),openDealPopup(a){e.commonLegacyServiceList.noticeService.add({id:"status",collectionName:N.s.FULL_SCREEN,layout:e=>{let s=e.api,i=e.notice;return n.createElement(w.default,{noticeId:i.id,api:s,content:e=>{let s=e.onClose;return n.createElement(m.j7,{noPadding:!0,onClose:s},n.createElement(v,{request:a,onClose:s}))}})},notice:{priority:!0}})}}),_=e.commonLegacyServiceList.accountService.selectedAccount,S=new W.$(a.dealActiveListRepository,{accountData:(0,j.T)(_,e.commonLegacyServiceList.accountService.isCommonAccount(_)),accountsList:e.commonLegacyServiceList.accountService.accountsList.map((a=>(0,j.T)(a,e.commonLegacyServiceList.accountService.isCommonAccount(a)))),isOneClickSell:e.tradingLegacyServiceList.dealServiceBo.isOneClickSell,getAsset:a=>(0,j.G)(e.fttAssetsService.getAsset(a)),showError(e){var a;null===(a=(0,p.Sc)(f.NOTICE_SERVICE))||void 0===a||a.add({id:"test",collectionName:N.s.TOP,layoutProps:{msgType:"error",html:e},notice:{period:6},layout:O.G0})},setOneClickTradeDeal:e=>{var a;null===(a=(0,p.Sc)(f.SETTINGS_SERVICE))||void 0===a||a.changeSetting(L.E.ONE_CLICK_TRADE,e)},selectAsset:e=>{var a;null===(a=(0,p.Sc)(f.ASSET_MENU_SERVICE))||void 0===a||a.selectAsset(e,"bo")},getAmounts:a=>e.tradingLegacyServiceList.dealServiceBo.dealAmounts[a],showDealTab(){e.commonLegacyServiceList.sideBarService.goTo(I.KO.TRADES),e.tradingPanelService.handleChangeMechanic("ftt")}});return{dealsHistoryFttService:u,lastDealsHistoryFttService:h,dealDetailsFttService:g,dealsActiveFttService:S}}},{repositories:()=>({dealActiveListRepository:new q.p,dealsHistoryFttRepository:new F.I,dealDetailsRepository:new B.N}),publicApi:e=>({dealDetailsFttService:e.dealDetailsFttService,dealsActiveFttService:e.dealsActiveFttService})}),J=(0,d.k)(X,(e=>n.createElement(G.w,{email:e.email,isBottom:e.isBottom,getServerTime:e.getServerTime,accountList:e.accountList})));X.use(k.I,((e,a,s)=>[{count:s.dealsHistoryFttService.getState().list.length,type:"trades",title:n.createElement(_._,{id:"sidebar_menu_title_deals",defaultMessage:"Trades"}),component:n.createElement(J,{email:s.user.getState().user.email,isBottom:a.isBottom,accountList:[...s.accountService.getState().activeAccounts,...s.accountService.getState().archivesAccounts].map((e=>({id:e.id,name:e.name,icon:e.currencyIcon,active:"closed"!==e.status,isDemo:"demo"===e.type}))),getServerTime:s.commonLegacyServiceList.timeService.getServerTime}),order:0},...e]));const Q=(0,d.k)(X,(e=>n.createElement(z.H,{scroll:e.scroll}))),$=(0,d.k)(X,(()=>n.createElement(G.S,null)));X.use(k._,((e,a,s)=>[{title:n.createElement(_._,{id:"deals_list_summary_title",defaultMessage:"Active trades"}),content:n.createElement(Q,{scroll:a.scroll}),count:s.dealsActiveFttService.getState().count,showEmptyContent:!0,order:0},{title:n.createElement(_._,{id:"history",defaultMessage:"History"}),content:n.createElement($,null),count:s.lastDealsHistoryFttService.getState().list.length,showEmptyContent:s.lastDealsHistoryFttService.load.pending.getState(),order:2},...e])),X.use(x.BM,((e,a,s)=>[...e,{mechanic:"ftt",count:s.dealsActiveFttService.getState().count}])),X.use(D.V,((e,a)=>n.createElement(g.Qj,null,(()=>{var e,s,i;const r=a.tradeManagerServiceList.tradeManagerService.getDefaultFrame(),o=null==r||null===(e=r.serviceInterface)||void 0===e||null===(s=e.selectedPair)||void 0===s?void 0:s.id,l=null==r||null===(i=r.serviceInterface)||void 0===i?void 0:i.project,c=a.commonLegacyServiceList.sideBarService.sideBarMajor.isOpen||a.commonLegacyServiceList.sideBarService.sideBarMinor.isOpen;return"bo"===l?n.createElement(Y.b,{selectedPairId:o,isSidebarOpen:c}):null})))),X.onStart((e=>{e.dealsActiveFttService.init(),e.lastDealsHistoryFttService.loadInitial();const a=e.commonLegacyServiceList.accountService;(0,o.reaction)((()=>e.commonLegacyServiceList.accountService.selectedAccount.id),(()=>{e.lastDealsHistoryFttService.loadInitial(),e.dealsActiveFttService.updateInputs({accountData:(0,j.T)(a.selectedAccount,a.isCommonAccount(a.selectedAccount))})})),(0,o.reaction)((()=>[...a.accountsList]),(()=>{e.dealsActiveFttService.updateInputs({accountsList:a.accountsList.map((a=>(0,j.T)(a,e.commonLegacyServiceList.accountService.isCommonAccount(a))))})})),(0,o.reaction)((()=>e.tradingLegacyServiceList.dealServiceBo.isOneClickSell),(a=>{e.dealsActiveFttService.updateInputs({isOneClickSell:a})})),e.fttAssetsService.subscribe(((a,s)=>{let i=!1;Object.keys(a.assets).forEach((e=>{const r=a.assets[e],n=s.assets[e];r&&n&&r.lockedTrading!==n.lockedTrading&&(i=!0)})),i&&e.dealsActiveFttService.assetUpdated()})),e.timeService.events.on("serverTime",(a=>{e.dealsActiveFttService.updateServerTime(a.timestamp)})),K.$.on("cancelCurrentDeal",(()=>{"ftt"===e.tradingPanelService.getState().currentMechanic&&e.dealsActiveFttService.cancelCurrentDeal()}));e.commonLegacyServiceList.sideBarService.sideBarMajor.onStackChange(((a,s)=>{s===I.KO.TRADING_HISTORY_FTT&&(e.dealsHistoryFttService.resetFilters(),(0,E.L)({event:"uaGtmEvents_clicks",eventCategory:"deals_history",eventAction:"open",eventLabel:"open"}))}))})),X.enable((e=>e.tradingMechanicsService.enabled("ftt")))},27954:(e,a,s)=>{"use strict";s.d(a,{p:()=>DealActiveListRepository});var i=s(29257),r=s(3121),n=s(23934),o=s(62132),l=s(63338);function c(e,a){return a?Promise.reject(a.message):e.length?Promise.resolve(e.map((e=>(0,l.Q)(e)))):Promise.resolve([])}class DealActiveListRepository{find(e){return Promise.resolve()}subscribeDeals(e){return(0,i.Z)((function*(){const a=(0,r.Z)(yield o.W.request.fttDealsSubscribe(e),2);return c(a[0],a[1])}))()}unsubscribeDeals(e){return(0,i.Z)((function*(){const a=(0,r.Z)(yield o.W.request.fttDealsUnsubscribe(e),2);return c(a[0],a[1])}))()}closeDeal(e){return(0,i.Z)((function*(){const a=(0,r.Z)(yield o.W.request.fttDealsCanceling(e),2);return c(a[0],a[1])}))()}reconnectDeals(e){o.W.push.fttDealsReconnect(e)}constructor(){this.emitter=(0,n.Z)(),o.W.on("open",(()=>{this.emitter.emit("open")})),o.W.on("restore",(()=>{this.emitter.emit("restore")})),o.W.subscribe.fttDealsClosed((e=>{this.emitter.emit("dealsClosed",e.map((e=>(0,l.Q)(e))))})),o.W.subscribe.fttDealsOpen((e=>{this.emitter.emit("dealsOpen",e.map((e=>(0,l.Q)(e))))})),o.W.subscribe.fttDealsProceedMin((e=>{this.emitter.emit("dealsProceedMin",e.map((e=>(0,l.K)(e))))}))}}},44302:(e,a,s)=>{"use strict";s.d(a,{p:()=>i.p});var i=s(27954)},63338:(e,a,s)=>{"use strict";function i(e){return{id:e.id,accountId:e.account_id,group:e.group,cancelPercent:Number(e.cancel_percent),cursCurrent:e.curs_current,balanceChange:Number(e.interim_balance_change),result:e.interim_status}}function r(e){const a=e.balance_change;return{id:Number(e.id),accountId:Number(e.account_id||0),category:e.cat,timeOpen:Number(e.time_open),timeClose:e.time_close?Number(e.time_close):Number(e.time_close_default),dir:e.dir,duration:Number(e.duration),group:e.group,pair:e.pair,cursOpen:e.curs_open,cursStrike:e.curs_strike,cursClose:e.curs_close,cursCurrent:e.curs_current||0,currency:"demo"===e.group?"demo":e.currency,sum:Number(e.amount),amount:Number(e.amount),winperc:Number(e.winperc),earn:a+Number(e.amount),status:e.status,result:e.interim_status||e.status,return:e.cancel_percent?Number(e.amount)/100*e.cancel_percent:0,cancelPercent:e.cancel_percent?Number(e.cancel_percent):0,type:"",riskfree:e.riskfree,cancelDisabled:!e.cancel_percent,balanceChange:Number(a),isTurbo:e.is_time,selected:!1,canceling:!1,timeCloseDefault:Number(e.time_close_default)||e.time_open+e.duration,userId:e.user_id,groupDate:new Date(1e3*e.time_close),refunded:!1,timeCourseOpen:e.time_course_open}}s.d(a,{K:()=>i,Q:()=>r})},64536:(e,a,s)=>{"use strict";s.d(a,{N:()=>DealDetailsRepository});var i=s(29257),r=s(30654),n=s(56939);class DealDetailsRepository{find(e){return(0,i.Z)((function*(){const a=yield r.g.getDealFtt({group:e.group,id:e.id});return Promise.resolve(a?(0,n.C)(a.deal):void 0)}))()}}},42593:(e,a,s)=>{"use strict";s.d(a,{N:()=>i.N});var i=s(64536)},15656:(e,a,s)=>{"use strict";s.d(a,{I:()=>DealsHistoryFttRepository});var i=s(29257),r=s(37323),n=s(64356),o=s(23934),l=s(30654),c=s(62132),d=s(56939);class DealsHistoryFttRepository{find(e){return(0,i.Z)((function*(){const a=yield l.g.getDealHistoryFtt({account_id:e.account_id,cursor:e.cursor||"",limit:e.limit,pairs:e.pairs||[],closed_from:e.from,closed_to:e.to,pnl_status:e.result}),s=a.deals,i=a.next_cursor;return Promise.resolve({list:s.map((e=>(0,d.C)(e))),cursor:i})}))()}sendReport(e,a,s,i,r){const n={account_id:e,opened_from:a,opened_to:s,output_format:"xlsx",output_type:"email",output_target:i,locale:r};return l.g.getDealsReportFtt(n)}constructor(){this.emitter=(0,o.Z)(),c.W.subscribe.fttDealsClosed((e=>{this.emitter.emit("dealsClose",e.map((e=>(0,d.C)((0,n.Z)((0,r.Z)({},e),{refunded:!1})))))}))}}},95253:(e,a,s)=>{"use strict";s.d(a,{I:()=>i.I});var i=s(15656)},56939:(e,a,s)=>{"use strict";function i(e){return{id:e.id,accountId:e.account_id,timeOpen:e.time_open,timeClose:e.time_close?Number(e.time_close):Number(e.time_close_default),dir:e.dir,duration:e.duration,pair:e.pair,cursOpen:e.curs_open,cursStrike:e.curs_strike,cursClose:e.curs_close,currency:"demo"===e.group?"demo":e.currency,sum:e.amount,earn:e.balance_change+e.amount,balanceChange:e.balance_change,winperc:e.winperc,status:e.status,riskfree:e.riskfree,refunded:!!e.refunded,groupDate:new Date(1e3*e.time_close),category:e.cat}}s.d(a,{C:()=>i})},91508:(e,a,s)=>{"use strict";s.d(a,{e:()=>DealDetailsService});var i=s(29257),r=s(7223);class DealDetailsService extends r.t{showDealInPopup(e){this.inputs.openDealPopup(e)}findInCache(e){const a=this.inputs.findDeal(e);return a||null}constructor(e,a){super(),this.repository=e,this.inputs=a;var s,r=this;this.load=this.createTask((s=(0,i.Z)((function*(e){const a=r.findInCache(e);return a?Promise.resolve(a):r.repository.find(e)})),function(e){return s.apply(this,arguments)}))}}},5535:(e,a,s)=>{"use strict";s.d(a,{$:()=>DealsActiveService});var i=s(37323),r=s(64356),n=s(59312),o=s(60521),l=s(7223),c=s(10002),d=s(66257),u=s(61905),m=s(80503);class DealsActiveService extends l.t{get accountData(){return this.inputs.accountData}get isOneClickSell(){return this.inputs.isOneClickSell}get collection(){return this.dealsCollectionMap[this.accountData.id]}get isCanceling(){return this.collection.models.some((e=>e.canceling))}get dealsCount(){return this.collection.models.length}get totalDealsAmount(){return this.collection.models.reduce(((e,a)=>e+=(0,m.x)(a)),0)}get totalDealsFloatingAmount(){return+this.collection.models.reduce(((e,a)=>e+=(0,m.b)(a)),0).toFixed(2)}get selectedDeal(){return this.selectedDealId?this.collection.models.find((e=>e.id===this.selectedDealId)):void 0}init(){this.load(this.inputs.accountsList),this.subscribeDealsChanges(),this.repository.emitter.on("open",(()=>{this.subscribeDealsChanges()})),this.repository.emitter.on("restore",(()=>{this.subscribeDealsChanges(),this.repository.reconnectDeals(this.collection.models.map((e=>({id:e.id,group:e.group}))))})),this.repository.emitter.on("dealsOpen",this.updateDeals),this.repository.emitter.on("dealsProceedMin",this.updateDealsMin),this.repository.emitter.on("dealsClosed",this.closeDeals),(0,o.reaction)((()=>this.getAvailableDealsCount()),(()=>{this.availableDealsCount=this.getAvailableDealsCount()})),(0,o.reaction)((()=>this.getAvailableCancelAmount()),(()=>{this.availableCancelAmount=this.getAvailableCancelAmount()})),(0,o.reaction)((()=>this.getAvailableAmount()),(()=>{this.availableAmount=this.getAvailableAmount()})),(0,o.reaction)((()=>this.collection.models.length),(()=>{this.update({count:this.collection.models.length})}),{fireImmediately:!0})}updateInputs(e){this.inputs=(0,i.Z)({},this.inputs,e),void 0!==e.accountData&&this.subscribeDealsChanges(),void 0!==e.accountsList&&this.createDealCollections(e.accountsList)}createDealCollections(e){e.forEach((e=>{if(!this.dealsCollectionMap[e.id]){const a=new c.C([],{sort:"id",order:"desc"});a.onRemove=e=>{e.some((e=>{var a;return e.id===(null===(a=this.collection.selected)||void 0===a?void 0:a.id)}))&&this.unselectDeal()},this.dealsCollectionMap[e.id]=a}})),this.removeDealCollections(e)}removeDealCollections(e){Object.keys(this.dealsCollectionMap).filter((a=>e.every((e=>e.id!==Number(a))))).forEach((e=>delete this.dealsCollectionMap[e]))}load(e){this.createDealCollections(e)}getDeal(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.collection.getById(e,a)}selectDeal(e,a){const s=this.collection.getById(e);s&&(a&&(this.userSelectedDeal=(0,o.toJS)(s),this.selectGroup(s.pair)),this.selectedDealId=e)}selectDealAsset(e){const a=this.collection.getById(e);a&&this.inputs.selectAsset(a.pair)}unselectDeal(){this.userSelectedDeal=null,this.selectedDealId=null}showDeal(e,a){const s=this.getDeal(e);s&&(this.inputs.showDealTab(),this.selectDeal(s.id,!0),this.selectDealAsset(s.id),this.selectedGroupId=s.pair,this.scrollDealData={id:e,delay:a})}hideDeal(){this.unselectDeal(),this.unselectGroup(null)}selectGroup(e){this.selectedGroupId=e}unselectGroup(e){e===this.selectedGroupId&&(this.selectedGroupId=null)}removeDeals(e){e.forEach((e=>{const a=this.dealsCollectionMap[e.accountId];a&&a.models.length&&(e.id===this.selectedDealId&&this.unselectDeal(),a.update([e],{remove:!1,select:!1,add:!1}),setTimeout((()=>{a.remove(e.id)})))}))}closeDeals(e){if(null==e?void 0:e.length){this.removeDeals(e);const a=this.filterRawData(e);this.lastClosedDealList=[...a],this.lastClosedDeal=(0,i.Z)({},a[a.length-1])}}cancelAllDeals(){const e=this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).map((e=>this.cancelDeal(e.id,!0)));return Promise.all(e).then((e=>(this.closeDeals(e),e)))}cancelDeals(e){const a=[];e.map((e=>this.getDeal(e))).forEach((e=>{e&&a.push(e)}));const s=a.map((e=>this.cancelDeal(e.id,!0)));return Promise.all(s).then((e=>(this.closeDeals(e),e)))}cancelDeal(e,a){const s=this.getDeal(e),i=s&&Array.isArray(s)?s[0]:s;return!i||i.canceling?Promise.reject({mess:"Deal does not exist"}):(i.canceling=!0,new Promise(((s,r)=>{this.accountData?this.repository.closeDeal({id:e,group:i.group}).then((e=>{a||this.closeDeals(e),i.canceling=!1,s(e[0])})).catch((e=>{i.canceling=!1,r(e)})):r({mess:"Account does not exist"})})))}cancelCurrentDeal(){return this.selectedDealId&&this.getDeal(this.selectedDealId)?this.cancelDeal(this.selectedDealId):Promise.reject()}toggleCloseConfirmationId(e,a){a?this.closeConfirmationId=e:e===this.closeConfirmationId&&(this.closeConfirmationId=void 0)}setOneClickTradeDeal(e){this.inputs.setOneClickTradeDeal(e)}showError(e){this.inputs.showError(e)}getAsset(e){return this.inputs.getAsset(e)}getAmounts(e){return this.inputs.getAmounts(e)}filterRawData(e){const a=[],s=this.accountData,i=s.id,r=s.type;return e&&e.forEach((e=>{(e.group===r&&e.accountId===i||e.group===d.Q.DEMO&&e.group===r)&&a.push(e)})),a}assetUpdated(){this.availableDealsCount=this.getAvailableDealsCount(),this.availableCancelAmount=this.getAvailableCancelAmount(),this.availableAmount=this.getAvailableAmount()}updateServerTime(e){this.timeTicker.serverTime=e}subscribeDealsChanges(){this.inputs.accountData.isCommon&&this.repository.subscribeDeals({account_id:this.inputs.accountData.id,group:this.inputs.accountData.type}).then((e=>{this.updateDeals(e)}))}getAvailableDealsCount(){return this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).length}getAvailableCancelAmount(){return this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).reduce(((e,a)=>e+=(0,m.x)(a)+(0,m.b)(a)),0)}getAvailableAmount(){return+this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).reduce(((e,a)=>e+=(0,m.x)(a)),0).toFixed(2)}constructor(e,a){super({count:0}),this.repository=e,this.disposers=[],this.dealsCollectionMap={},this.updateDeals=e=>{e.forEach((e=>{const a=this.dealsCollectionMap[e.accountId];a&&a.update([e],{remove:!1,select:!1})}))},this.updateDealsMin=e=>{e.forEach((e=>{const a=this.dealsCollectionMap[e.accountId],s=null==a?void 0:a.getById(e.id,!0),n=s?(0,r.Z)((0,i.Z)({},e),{earn:e.balanceChange+s.amount,return:e.cancelPercent>0?Number(s.amount)/100*e.cancelPercent:0,cancelDisabled:!e.cancelPercent}):e;s&&a.update([n],{remove:!1,select:!1})}))},this.userSelectedDeal=null,this.lastClosedDeal=null,this.userDealType=u.J.BINARY,this.availableDealsCount=0,this.availableCancelAmount=0,this.availableAmount=0,this.timeTicker={serverTime:Math.floor((new Date).getTime()/1e3)},this.scrollDealData=null,this.getDeal=this.getDeal.bind(this),this.selectDeal=this.selectDeal.bind(this),this.inputs=a}}(0,n.gn)([o.observable.ref],DealsActiveService.prototype,"userSelectedDeal",void 0),(0,n.gn)([o.observable.ref],DealsActiveService.prototype,"lastClosedDeal",void 0),(0,n.gn)([o.observable.ref],DealsActiveService.prototype,"lastClosedDealList",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"userDealType",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"availableDealsCount",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"availableCancelAmount",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"availableAmount",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"closeConfirmationId",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"selectedDealId",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"timeTicker",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"scrollDealData",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"selectedGroupId",void 0),(0,n.gn)([o.observable],DealsActiveService.prototype,"inputs",void 0),(0,n.gn)([o.computed],DealsActiveService.prototype,"accountData",null),(0,n.gn)([o.computed],DealsActiveService.prototype,"isOneClickSell",null),(0,n.gn)([o.computed],DealsActiveService.prototype,"collection",null),(0,n.gn)([o.computed],DealsActiveService.prototype,"isCanceling",null),(0,n.gn)([o.computed],DealsActiveService.prototype,"dealsCount",null),(0,n.gn)([o.computed],DealsActiveService.prototype,"totalDealsAmount",null),(0,n.gn)([o.computed],DealsActiveService.prototype,"totalDealsFloatingAmount",null),(0,n.gn)([o.computed],DealsActiveService.prototype,"selectedDeal",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"selectDeal",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"selectDealAsset",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"unselectDeal",null),(0,n.gn)([o.action],DealsActiveService.prototype,"showDeal",null),(0,n.gn)([o.action],DealsActiveService.prototype,"selectGroup",null),(0,n.gn)([o.action],DealsActiveService.prototype,"unselectGroup",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"closeDeals",null),(0,n.gn)([o.action],DealsActiveService.prototype,"cancelAllDeals",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"cancelDeals",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"cancelDeal",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"cancelCurrentDeal",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"toggleCloseConfirmationId",null),(0,n.gn)([o.action.bound],DealsActiveService.prototype,"setOneClickTradeDeal",null)},61905:(e,a,s)=>{"use strict";s.d(a,{J:()=>i});const i={SECONDS:"seconds",BINARY:"binary",TURBO:"turbo"}},81795:(e,a,s)=>{"use strict";s.d(a,{$:()=>i.$});var i=s(5535)},80503:(e,a,s)=>{"use strict";function i(e){const a=e.sum;return Number.isNaN(a)?0:a}function r(e){const a=e.balanceChange;return Number.isNaN(a)?0:a}s.d(a,{b:()=>r,x:()=>i})},17478:(e,a,s)=>{"use strict";s.d(a,{a:()=>DealsHistoryFttService});var i=s(29257),r=s(37323),n=s(7223);class DealsHistoryFttService extends n.t{init(){this.getState().list.length||this.loadInitial()}loadInitial(){var e=this;return(0,i.Z)((function*(){e.getState().list.length&&e.update({list:[]}),e.cursor="";const a=yield e.load();e.update({list:a})}))()}loadMore(){var e=this;return(0,i.Z)((function*(){if(!e.getState().list.length||!e.cursor)return;const a=yield e.load();e.update({list:[...e.getState().list,...a]})}))()}getAccountId(){return this.inputs.getAccountId()}toggleCard(e){this.update((a=>({selectedCardId:a.selectedCardId===e?null:e})))}showDeal(e){this.update({dealOnChart:e}),this.inputs.showDeal(e)}hideDeal(e){this.update({dealOnChart:void 0}),this.inputs.hideDeal(e)}toggleActiveFilter(e){const a=this.getState().activeFilter;this.update({activeFilter:null!==a&&a===e?null:e})}setFilter(e){var a,s,i,n;this.update({filter:(0,r.Z)({},this.getState().filter,e)}),this.sendFilterStatistic({period:(n=e.period,n?"period_".concat((null==n?void 0:n.from)||"...","-").concat((null==n?void 0:n.to)||"..."):void 0),accountId:(i=e.accountId,void 0!==i?"accounts_".concat(i):void 0),result:(s=e.result,s?"result_".concat(s):void 0),asset:(a=e.asset,a?"asset_".concat(null==a?void 0:a.id):void 0)}),this.loadInitial()}sendFilterStatistic(e){Object.keys(e).forEach((a=>{const s=e[a];s&&this.inputs.sendStatisticEvent({event:"uaGtmEvents_clicks",eventCategory:"deals_history",eventAction:"add_filter",eventLabel:s})}))}getAsset(e){return this.inputs.getAsset(e)}getDeal(e){return this.getState().list.find((a=>a.id===e))}showDealTab(e){this.inputs.showDealTab()}resetFilters(){var e;const a=this.inputs.getAccountId(),s=null===(e=this.getState().filter)||void 0===e?void 0:e.accountId;this.setFilter({asset:null,result:null,period:null,accountId:s!==a?a:s})}getRequestParams(e){var a,s;const i=this.getState().filter;return{account_id:i.accountId,cursor:void 0!==e?e:this.cursor,limit:20,pairs:i.asset?[i.asset.id]:[],from:null===(a=i.period)||void 0===a?void 0:a.from,to:null===(s=i.period)||void 0===s?void 0:s.to,result:i.result||void 0}}constructor(e,a){super({list:[],selectedCardId:null,filter:{asset:null,period:null,result:null,accountId:a.getAccountId()},results:["profit","loss","zero"],activeFilter:null,assetList:a.getAssetList()}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield s.repository.find(s.getRequestParams());return e?(s.cursor=e.cursor,Promise.resolve(e.list)):Promise.resolve([])}))),this.sendReport=this.createTask((0,i.Z)((function*(){return new Promise((e=>{setTimeout((()=>{e()}),3e3)}))}))),this.cursor="";var r,n=this;this.addDeals=(r=(0,i.Z)((function*(e){const a=n.getState().list;if(!a.length)return void(yield n.loadInitial());const s=(yield n.repository.find(n.getRequestParams(""))).list.map((e=>e.id)),i=a.map((e=>e.id)),r=e.filter((e=>s.includes(e.id)&&!i.includes(e.id)));r.length&&n.update({list:[...r,...a]})})),function(e){return r.apply(this,arguments)}),this.repository.emitter.on("dealsClose",this.addDeals)}}},93127:(e,a,s)=>{"use strict";s.d(a,{d:()=>LastDealsHistoryFttService});var i=s(29257),r=s(7223);class LastDealsHistoryFttService extends r.t{loadInitial(){var e=this;return(0,i.Z)((function*(){e.getState().list.length&&e.update({list:[]});const a=yield e.load();e.updateList(a)}))()}toggleCard(e){this.update((a=>({selectedCardId:a.selectedCardId===e?null:e})))}showDeal(e){this.update({dealOnChart:e}),this.inputs.showDeal(e)}updateList(e){this.update({list:e.slice(0,10)})}hideDeal(e){this.update({dealOnChart:void 0}),this.inputs.hideDeal(e)}getAsset(e){return this.inputs.getAsset(e)}getRequestParams(){return{account_id:this.inputs.getAccountId(),cursor:"",limit:10,pairs:void 0,from:void 0,to:void 0}}constructor(e,a){super({list:[],selectedCardId:null}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield s.repository.find(s.getRequestParams());return e?Promise.resolve(e.list):Promise.resolve([])})));var r,n=this;this.addDeals=(r=(0,i.Z)((function*(e){const a=n.getState().list,s=n.inputs.getAccountId();a.length?n.updateList([...e.filter((e=>e.accountId===s)),...a]):yield n.loadInitial()})),function(e){return r.apply(this,arguments)}),this.repository.emitter.on("dealsClose",this.addDeals)}}},29636:(e,a,s)=>{"use strict";s.d(a,{m:()=>u});var i=s(27378),r=s(73598),n=s(63967),o=s(17330),l=s(23735),c=s(74262),d=s(81795);const u=i.memo((e=>{let a=e.grouped,s=e.itemId,u=e.active,m=void 0===u||u,p=e.modalPortalEl,h=e.injected,v=e.selected,g=e.collapsible;const _=(0,n.G)(d.$),f=_.collection.getById(s,!0),E=(0,o.rF)((null==f?void 0:f.pair)||""),S=i.useCallback((e=>{_.setOneClickTradeDeal(e)}),[_]),y=i.useCallback((()=>{_.selectedDealId!==s?(_.unselectDeal(),_.selectDeal(s,!0),_.selectDealAsset(s),f&&(0,l.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"deal_click",eventLabel:"ftt_".concat(E.id,"_").concat("demo"===f.group?"demo":"real")})):_.unselectDeal()}),[_,s,f,E]),b=i.useCallback((e=>{f&&(_.cancelDeal(e).catch((e=>{_.showError(e.mess)})),(0,l.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"close_one_trade_fact",eventLabel:"ftt_".concat(f.pair)}))}),[_,f]),C=i.useCallback((e=>{_.toggleCloseConfirmationId(s,e)}),[_,s]);return i.useEffect((()=>{m||C(!1)}),[m,C]),i.useEffect((()=>()=>{C(!1)}),[C]),i.createElement(r.Qj,null,(()=>{const e=void 0!==v?v:_.selectedDealId===s;return f?i.createElement(c.do,{deal:f,asset:E,dealAmountEdge:_.getAmounts(f.currency),modalPortalEl:p,grouped:a,selected:e,isOpened:e,injected:h,collapsible:g,isCloseConfirmation:_.closeConfirmationId===s,timeService:_.timeTicker,isOneClickSell:_.isOneClickSell||"demo"===f.group,toggleOneClickTradeDeal:S,selectDeal:y,cancelDeal:b,onToggleCloseConfirmation:C}):null}))}));u.displayName="DealActiveCard"},98614:(e,a,s)=>{"use strict";s.d(a,{x:()=>u});var i=s(27378),r=s(73598),n=s(63967),o=s(17330),l=s(74262),c=s(81795),d=s(29636);const u=i.memo((e=>{let a=e.groupId,s=e.items;const u=(0,n.G)(c.$),m=(0,o.rF)(a),p=i.useCallback((e=>{e===u.selectedGroupId?u.selectGroup(null):(u.selectGroup(e),u.unselectDeal())}),[u]);return i.createElement(r.Qj,null,(()=>{const e=u.selectedGroupId===a;return i.createElement(l.DI,{id:a,deals:s,asset:m,isOpened:e,toggleGroup:p},(e=>i.createElement(l.nh,null,s.map((a=>i.createElement(d.m,{modalPortalEl:e,grouped:!0,key:a.id,itemId:a.id}))))))}))}));u.displayName="DealActiveGroup"},48558:(e,a,s)=>{"use strict";s.d(a,{H:()=>v});var i=s(27378),r=s(63967),n=s(36732),o=s(73598),l=s(46525),c=s(82844),d=s(81795),u=s(98614),m=s(29207),p=s(29636);const h=e=>{let a=e.scroll,s=e.group,r=e.scrollDealData;return i.useLayoutEffect((()=>{let e=0;if(r){const s=document.querySelector("[data-id=bo-".concat(r.id,"]"));s&&(r.delay?e=window.setTimeout((()=>{a.toElement(s.getBoundingClientRect(),"center","center","smooth")}),r.delay):a.toElement(s.getBoundingClientRect(),"center","center","smooth"))}return()=>{clearTimeout(e)}}),[a,r]),i.createElement(n.yJ.List,null,Object.keys(s).map((e=>{const a=s[e];return 1===a.length?i.createElement(p.m,{key:a[0].id,itemId:a[0].id,grouped:!1,collapsible:!0,active:!1}):i.createElement(u.x,{groupId:e,items:a,key:e})})))},v=i.memo((e=>{let a=e.scroll;const s=(0,r.G)(d.$);return i.createElement(o.Qj,null,(()=>{if(!s.collection.models.length)return i.createElement(n.yJ.NoDeals,{text:i.createElement(c._,{id:"no_open_transactions",defaultMessage:"You have no open trades on this account"})});const e=(0,l.Z)(s.collection.models,(e=>e.pair));return i.createElement(i.Fragment,null,i.createElement(m.E,null),i.createElement(h,{scroll:a,group:e,scrollDealData:s.scrollDealData}))}))}));v.displayName="DealActiveList"},46262:(e,a,s)=>{"use strict";s.d(a,{b:()=>d});var i=s(27378),r=s(63967),n=s(73598),o=s(36732),l=s(29636),c=s(81795);const d=i.memo((e=>{let a=e.selectedPairId,s=e.isSidebarOpen;const d=(0,r.G)(c.$),u=i.useCallback((e=>{d.selectDeal(Number(e),!0),d.selectDealAsset(Number(e))}),[d]),m=i.useCallback((()=>{d.unselectDeal()}),[d]),p=i.useCallback((e=>{d.toggleCloseConfirmationId(Number(e),!1)}),[d]),h=i.useCallback(((e,a,s)=>i.createElement(l.m,{modalPortalEl:s,injected:!0,key:e.item.id,itemId:e.item.id,collapsible:!1,selected:!0,active:Number(a)===e.item.id})),[]);return i.createElement(n.Qj,null,(()=>{const e=d.collection.models.filter((e=>e.pair===a)).map((e=>({id:String(e.id),item:e}))),r=d.selectedDealId?String(d.selectedDealId):void 0;return i.createElement(o.bY,{cards:e,selectedCardId:s?void 0:r,onSelect:u,onUnselect:m,onHide:p,renderer:h})}))}));d.displayName="DealActiveSheet"},29207:(e,a,s)=>{"use strict";s.d(a,{E:()=>c});var i=s(27378),r=s(63967),n=s(73598),o=s(36732),l=s(81795);const c=()=>{const e=(0,r.G)(l.$),a=i.useRef(null);return i.createElement(n.Qj,null,(()=>i.createElement(o.l0,{invested:e.totalDealsAmount,float:e.totalDealsFloatingAmount,currency:e.accountData.currency,hostEl:a})))};c.displayName="Summary"},78769:(e,a,s)=>{"use strict";s.d(a,{H:()=>i.H});var i=s(48558)},10855:(e,a,s)=>{"use strict";s.d(a,{O:()=>p});var i=s(3121),r=s(27378),n=s(63967),o=s(97415),l=s(36732),c=s(82844),d=s(91508),u=s(17478),m=s(62633);const p=r.memo((e=>{let a=e.request,s=e.onClose;const p=(0,n.G)(d.e),h=(0,n.G)(u.a),v=(0,i.Z)(r.useState(),2),g=v[0],_=v[1],f=(0,i.Z)(r.useState(""),2),E=f[0],S=f[1],y=(0,o.o)(p.load.pending),b=r.useCallback((e=>{h.showDeal(e),null==s||s()}),[h,s]);return r.useEffect((()=>{let e=!0;return p.load(a).then((a=>{e&&a&&_(a)})).catch((a=>{e&&S(a&&"string"==typeof a.message?a.message:"fail deal load")})),()=>{e=!1}}),[p,a]),r.createElement(l.O2,{pending:y,title:g?r.createElement(r.Fragment,null,r.createElement(c._,{id:"id_deal",defaultMessage:"Trade ID"})," ",g.id):null,error:E||null},g?r.createElement(m.N,{embedded:!0,selected:!0,deal:g,asset:h.getAsset(g.pair),onClickChart:b}):null)}));p.displayName="DealDetails"},78389:(e,a,s)=>{"use strict";s.d(a,{O:()=>i.O});var i=s(10855)},62633:(e,a,s)=>{"use strict";s.d(a,{B:()=>u,N:()=>m});var i=s(37323),r=s(64356),n=s(27378),o=s(84584),l=s(2050),c=s(23735),d=s(74262);const u=(0,o.Z)(),m=n.memo((e=>{let a=e.deal,s=e.asset,o=e.selected,m=e.embedded,p=e.onClickCard,h=e.onClickChart;const v=n.useMemo((()=>(0,r.Z)((0,i.Z)({},a),{pair:s})),[a]),g=n.useCallback((()=>{p&&p(a.id)}),[p,a.id]),_=n.useCallback((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"deal_history",eventLabel:"open_big_chart"}),h(a)}),[h,a]),f=(0,l.x)(u,{props:{item:a,onClick:_}});return n.createElement(d.UH,{key:a.id,deal:v,selected:o,isOpened:o,embedded:m,selectDeal:g},f)}));m.displayName="DealsHistoryCard"},90455:(e,a,s)=>{"use strict";s.d(a,{w:()=>y});var i=s(3121),r=s(27378),n=s(63967),o=s(97415),l=s(36732),c=s(17302),d=s(26338),u=s(6228),m=s(82844),p=s(18985),h=s(45797),v=s(96937),g=s(17478),_=s(62633),f=(s(62071),s(52e3));const E=e=>e.onlyAccountFilter?r.createElement(m._,{id:"trades_history_empty_list_info",defaultMessage:"You don't have any closed or cancelled trades on this account"}):r.createElement(m._,{id:"trades_history_filtered_empty_list_info",defaultMessage:"No trades matching your search parameters found"}),S=(0,p.vU)({pattern:{id:"trades_history_time_selection_input_tech",defaultMessage:"D/M/Y"},placeholder:{id:"trades_history_time_selection_input",defaultMessage:"dd/mm/yyyy"}}),y=r.memo((e=>{let a=e.isBottom,s=e.accountList,m=(e.email,e.getServerTime);var p,y;const b=h.NW.formatMessage(S.pattern),C=h.NW.formatMessage(S.placeholder),T=(0,n.G)(g.a),A=(0,o.o)(T.store),k=A.list,w=A.selectedCardId,N=A.dealOnChart,R=A.assetList,I=A.filter,D=(0,o.o)(T.load.pending),O=r.useRef(null),L=Boolean(!D&&!k.length),M=Boolean(D&&!k.length),P=Boolean(D&&k.length),x=(0,i.Z)(r.useState(""),2),F=x[0],B=x[1],Z=T.getAccountId(),U=r.useMemo((()=>k.length?(0,u.B)(k.sort(((e,a)=>Number(a.groupDate)-Number(e.groupDate)))):{}),[k]),H=r.useCallback((e=>{T.toggleCard(e)}),[T]),G=r.useCallback((e=>{T.showDeal(e)}),[T]),V=r.useCallback((e=>{B(e===F?"":e)}),[B,F]),W=r.useCallback((e=>{T.setFilter({asset:e})}),[T]),j=r.useCallback((e=>{(0,d.Z)(I.period,e)||T.setFilter({period:e})}),[T,I]),z=r.useCallback((e=>{I.accountId!==Number(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&T.setFilter({accountId:Number(e.id)})}),[T,I]);return r.useEffect((()=>{a&&T.loadMore()}),[a,T]),r.useEffect((()=>{T.init()}),[T]),r.useEffect((()=>{N&&w!==N.id&&T.hideDeal(N)}),[N,w,T]),r.createElement(l.RH,null,r.createElement(l.RH.Filters,null,r.createElement(l.vO,null,null,r.createElement(l.vO.Filters,null,r.createElement(c.Z6,null,r.createElement(l.vO.FiltersWrapper,null,r.createElement(l.ev,{defaultItemId:String(Z),accountList:s,filter:I.accountId,panelContainerRef:O,filterId:"accounts-1",activeFilterId:F,onSetFilter:z,onClick:V}),r.createElement(l.Tj,{assetList:R,filter:I.asset,panelContainerRef:O,filterId:"asset-1",activeFilterId:F,filterSearchItems:v.cM,onSetFilter:W,onClick:V}),r.createElement(l.nZ,{filter:I.period,panelContainerRef:O,pattern:b,placeholder:C,filterId:"period-1",activeFilterId:F,onSetFilter:j,onClick:V}),r.createElement(f.q,{activeFilterId:F,filterId:"result-1",panelContainerRef:O,onClick:V}))))),r.createElement(l.vO.PanelContainer,{containerRef:O})),r.createElement(l.RH.Wrapper,null,M?r.createElement(l.RH.Loader,null):null,L?r.createElement(l.RH.NoDeals,{text:r.createElement(E,{onlyAccountFilter:!((null===(p=I.period)||void 0===p?void 0:p.to)||(null===(y=I.period)||void 0===y?void 0:y.from)||I.asset||I.result)})}):null,Object.keys(U).map((e=>{const a=U[e];return r.createElement(r.Fragment,{key:e},r.createElement(l.iz,{now:new Date(1e3*m()),time:a[0].groupDate,moreInfo:null}),a.map((e=>r.createElement(_.N,{key:e.id,deal:e,asset:T.getAsset(e.pair),selected:w===e.id,onClickChart:G,onClickCard:H}))))}))),!!k.length&&r.createElement(l.RH.InfinityLoader,{loading:P}))}));y.displayName="DealsHistoryList"},52e3:(e,a,s)=>{"use strict";s.d(a,{q:()=>m});var i=s(27378),r=s(63967),n=s(97415),o=s(36732),l=s(18985),c=s(82844),d=s(17478);const u=(0,l.vU)({profit:{id:"trades_history_profit_selection_option",defaultMessage:"With Profit"},loss:{id:"trades_history_loss_selection_option",defaultMessage:"With Loss"},zero:{id:"trades_history_no_result_selection_option",defaultMessage:"Without Result"}}),m=e=>{let a=e.panelContainerRef,s=e.activeFilterId,l=e.filterId,m=e.onClick;const p=(0,r.G)(d.a),h=(0,n.o)(p.store),v=h.filter,g=h.results,_=i.useCallback((e=>{"all"===(null==e?void 0:e.id)?p.setFilter({result:null}):v.result!==(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&p.setFilter({result:e.id})}),[p,v]);return i.createElement(o.fb,{title:i.createElement(c._,{id:"trades_history_results_selection_title",defaultMessage:"Trade Result"}),selectedId:(null==v?void 0:v.result)||"all",defaultItemId:"all",panelContainerRef:a,list:[{id:"all",title:i.createElement(c._,{id:"trades_history_all_results_selection_option",defaultMessage:"Any Result"})},...g.map((e=>({id:e,title:i.createElement(c._,Object.assign({},u[e]))})))],filterId:l,activeFilterId:s,onClick:m,onSetFilter:_})};m.displayName="FilterResult"},62071:(e,a,s)=>{"use strict";s.d(a,{$:()=>u});var i=s(29257),r=s(3121),n=s(27378),o=s(36732),l=s(63967),c=s(97415),d=s(17478);const u=e=>{let a=e.email,s=e.panelContainerRef,u=e.activeFilter,m=e.accountList,p=e.pattern,h=e.setActiveFilter;var v,g;const _=(0,l.G)(d.a),f=(0,c.o)(_.store),E=f.list,S=f.assetList,y=f.filter,b=(0,r.Z)(n.useState(!1),2),C=b[0],T=b[1],A=(0,c.o)(_.sendReport.pending),k=n.useMemo((()=>S.find((e=>{var a;return e.id===(null===(a=y.asset)||void 0===a?void 0:a.id)}))),[y.asset,S]),w=n.useMemo((()=>m.find((e=>e.id===y.accountId))),[y.accountId,m]),N=n.useCallback((()=>{h("")}),[h]),R=n.useCallback((()=>{h("report"===u?"":"report")}),[h,u]),I=n.useCallback((0,i.Z)((function*(){yield _.sendReport(),T(!0)})),[_]),D=n.useCallback((()=>{T(!1)}),[]);return n.createElement(o.$9,{panelContent:n.createElement(o.$e,{asset:null==k?void 0:k.title,account:null==w?void 0:w.name,sent:C,sending:A,email:a,from:null===(v=y.period)||void 0===v?void 0:v.from,to:null===(g=y.period)||void 0===g?void 0:g.to,pattern:p,emptyHistory:!E.length,onCancel:N,onSend:I,onReset:D}),panelTitle:n.createElement(n.Fragment,null,"Send Report"),panelContainerRef:s,onClick:R,active:"report"===u,open:"report"===u})};u.displayName="HistoryReport"},9502:(e,a,s)=>{"use strict";s.d(a,{S:()=>h});var i=s(27378),r=s(21182),n=s(63967),o=s(97415),l=s(17302),c=s(36732),d=s(93127),u=s(68724),m=s(62633);const p=(0,r.W)(u.h),h=i.memo((()=>{const e=(0,n.G)(d.d),a=(0,o.o)(e.store),s=a.list,r=a.selectedCardId,u=a.dealOnChart,h=(0,o.o)(e.load.pending),v=i.useCallback((a=>{e.toggleCard(a)}),[e]),g=i.useCallback((a=>{e.showDeal(a)}),[e]);return i.useEffect((()=>{u&&r!==u.id&&e.hideDeal(u)}),[u,r,e]),h?i.createElement(c.yJ.Loader,null):i.createElement(i.Fragment,null,i.createElement(l.xu,{padding:[0,0,"l",0]},i.createElement(p,null)),i.createElement(c.yJ.List,null,s.map((a=>i.createElement(m.N,{key:a.id,deal:a,asset:e.getAsset(a.pair),selected:r===a.id,onClickChart:g,onClickCard:v})))))}));h.displayName="LastDealsHistoryList"},50779:(e,a,s)=>{"use strict";s.d(a,{S:()=>r.S,w:()=>i.w});var i=s(90455),r=s(9502)},51968:(e,a,s)=>{"use strict";function i(e,a){return{id:e.id,currency:e.currencyName,isCommon:a,type:e.type}}function r(e){return{id:e.id,icon:e.icon,title:e.title,precision:e.precision,lockedTrading:e.lockedTrading}}s.d(a,{G:()=>r,T:()=>i})},94846:(e,a,s)=>{"use strict";s.d(a,{$:()=>i});const i=(0,s(23934).Z)()},89172:(e,a,s)=>{"use strict";s.d(a,{o:()=>X});var i=s(37323),r=s(64356),n=s(27378),o=s(60521),l=s(73598),c=s(13243),d=s(28373),u=s(18404),m=s(36732),p=s(6680),h=s(95601),v=s(94503),g=s(82844),_=s(26763),f=s(23735),E=s(8275),S=s(73533),y=s(5182),b=s(71003),C=s(12802),T=s(7265),A=s(18296),k=s(16685),w=s(13954),N=s(9707),R=s(5915),I=s(53323),D=s(25974),O=s(54463),L=s(93824),M=s(99538),P=s(74772),x=s(80027),F=s(22825),B=s(31703),Z=s(89510),U=s(89028),H=s(41303),G=s(45828),V=s(69283),W=s(48294),j=s(52755),z=s(62258),q=s(94846),K=s(89339),Y=s(8849);const X=(0,c.v)({name:"DealsFx",dependsOn:[h.u$,D.M,k.y,y.K,b.x,S.Kg,u.qS,v.Ul,C.Q,T.EA,w.j],services(e,a){const s=()=>e.commonLegacyServiceList.accountService.selectedAccount.id,o=a=>(0,W.G)(e.fxAssetsService.getAsset(a)),l=a=>{e.tradeManagerServiceList.tradeManagerService.applyScenario(new A.R).showDeal((0,r.Z)((0,i.Z)({},a),{pair:o(a.pair)}),"fx",e.tradingLegacyServiceList.assetMenuService,e.commonLegacyServiceList.sideBarService,e.commonLegacyServiceList.uiService.windowWidth<813)},c=a=>{e.tradeManagerServiceList.tradeManagerService.applyScenario(new A.R).hideDeal((0,r.Z)((0,i.Z)({},a),{pair:o(a.pair)}),"fx")},u=new U.F(a.dealsHistoryFxRepository,{getAccountId:s,getAsset:o,getAssetList(){const a=e.fxAssetsService.getState().assets;return Object.keys(a).map((e=>{const s=a[e];return(0,W.G)(s)}))},showDeal:l,hideDeal:c,showDealTab(){e.commonLegacyServiceList.sideBarService.goTo(E.KO.TRADING_HISTORY_FX),e.tradingHistoryBarServiceFx.selectTab("trades")},getLocale:()=>e.locale.getLocale(),getEmail:()=>e.user.getState().user.email,sendStatisticEvent(e){(0,f.L)(e)}}),h=new Y.$(a.dealsHistoryFxRepository,{getAccountId:s,getAsset:o,showDeal:l,hideDeal:c}),v=(0,d.k)(X,(e=>n.createElement(G.O,{request:e.request,onClose:e.onClose}))),g=new B.e(a.dealDetailsRepository,{findDeal:e=>u.getState().list.find((a=>a.id===e.id&&a.accountId===e.account_id)),openDealPopup(a){e.commonLegacyServiceList.noticeService.add({id:"status",collectionName:I.sm.FULL_SCREEN,layout:e=>{let s=e.api,i=e.notice;return n.createElement(R.default,{noticeId:i.id,api:s,content:e=>{let s=e.onClose;return n.createElement(m.j7,{noPadding:!0,onClose:s},n.createElement(v,{request:a,onClose:s}))}})},notice:{priority:!0}})}}),S=e.commonLegacyServiceList.accountService.selectedAccount,y=new V.$(new z.p,{isTrailingStop:!!e.commonLegacyServiceList.featureToggleService.getFeatureValue(x.y2.OTP_FX_TRADING_TRAILING_STOP),accountData:(0,W.T)(S,e.commonLegacyServiceList.accountService.isCommonAccount(S)),accountsList:e.commonLegacyServiceList.accountService.accountsList.map((a=>(0,W.T)(a,e.commonLegacyServiceList.accountService.isCommonAccount(a)))),isOneClickSell:e.tradingLegacyServiceList.dealServiceFx.isOneClickSell,getAsset:a=>(0,W.G)(e.fxAssetsService.getAsset(a)),showError(e){var a;null===(a=(0,p.Sc)(_.NOTICE_SERVICE))||void 0===a||a.add({id:"test",collectionName:I.sm.TOP,layoutProps:{msgType:"error",html:e},notice:{period:6},layout:L.G0})},setOneClickTradeDeal:e=>{var a;null===(a=(0,p.Sc)(_.SETTINGS_SERVICE))||void 0===a||a.changeSetting(M.E.ONE_CLICK_TRADE,e)},selectAsset:e=>{var a;null===(a=(0,p.Sc)(_.ASSET_MENU_SERVICE))||void 0===a||a.selectAsset(e,"fx")},showDealTab(){e.commonLegacyServiceList.sideBarService.goTo(E.KO.TRADES),e.tradingPanelService.handleChangeMechanic("fx")}});return{dealsHistoryFxService:u,lastDealsHistoryFxService:h,dealDetailsFxService:g,dealsActiveFxService:y}}},{repositories:()=>({dealsHistoryFxRepository:new Z.H,dealDetailsRepository:new F.N}),publicApi:e=>({dealDetailsFxService:e.dealDetailsFxService,dealsActiveFxService:e.dealsActiveFxService})}),J=(0,d.k)(X,(e=>n.createElement(H.w,{isBottom:e.isBottom,getServerTime:e.getServerTime,email:e.email,accountList:e.accountList})));X.use(N.J,((e,a,s)=>[{count:s.dealsHistoryFxService.getState().list.length,type:"trades",title:n.createElement(g._,{id:"sidebar_menu_title_deals",defaultMessage:"Trades"}),component:n.createElement(J,{email:s.user.getState().user.email,isBottom:a.isBottom,accountList:[...s.accountService.getState().activeAccounts,...s.accountService.getState().archivesAccounts].map((e=>({id:e.id,name:e.name,icon:e.currencyIcon,active:"closed"!==e.status,isDemo:"demo"===e.type}))),getServerTime:s.commonLegacyServiceList.timeService.getServerTime}),order:0},...e]));const Q=(0,d.k)(X,(e=>n.createElement(j.H,{scroll:e.scroll}))),$=(0,d.k)(X,(()=>n.createElement(H.S,null)));X.use(N.W,((e,a,s)=>[{title:n.createElement(g._,{id:"deals_list_summary_title",defaultMessage:"Active trades"}),content:n.createElement(Q,{scroll:a.scroll}),count:s.dealsActiveFxService.getState().count,showEmptyContent:!0,order:0},{title:n.createElement(g._,{id:"history",defaultMessage:"History"}),content:n.createElement($,null),count:s.lastDealsHistoryFxService.getState().list.length,showEmptyContent:s.lastDealsHistoryFxService.load.pending.getState(),order:2},...e])),X.use(O.BM,((e,a,s)=>[...e,{mechanic:"fx",count:s.dealsActiveFxService.getState().count}])),X.use(P.A,((e,a)=>n.createElement(l.Qj,null,(()=>{var e,s,i;const r=a.tradeManagerServiceList.tradeManagerService.getDefaultFrame(),o=null==r||null===(e=r.serviceInterface)||void 0===e||null===(s=e.selectedPair)||void 0===s?void 0:s.id,l=null==r||null===(i=r.serviceInterface)||void 0===i?void 0:i.project,c=a.commonLegacyServiceList.sideBarService.sideBarMajor.isOpen||a.commonLegacyServiceList.sideBarService.sideBarMinor.isOpen;return"fx"===l?n.createElement(K.b,{selectedPairId:o,isSidebarOpen:c}):null})))),X.onStart((e=>{e.dealsActiveFxService.init(),e.lastDealsHistoryFxService.loadInitial();const a=e.commonLegacyServiceList.accountService;(0,o.reaction)((()=>e.commonLegacyServiceList.accountService.selectedAccount.id),(()=>{e.lastDealsHistoryFxService.loadInitial(),e.dealsActiveFxService.updateInputs({accountData:(0,W.T)(a.selectedAccount,a.isCommonAccount(a.selectedAccount))})})),(0,o.reaction)((()=>[...a.accountsList]),(()=>{e.dealsActiveFxService.updateInputs({accountsList:a.accountsList.map((a=>(0,W.T)(a,e.commonLegacyServiceList.accountService.isCommonAccount(a))))})})),(0,o.reaction)((()=>e.tradingLegacyServiceList.dealServiceFx.isOneClickSell),(a=>{e.dealsActiveFxService.updateInputs({isOneClickSell:a})})),(0,o.reaction)((()=>!!e.commonLegacyServiceList.featureToggleService.getFeatureValue(x.y2.OTP_FX_TRADING_TRAILING_STOP)),(a=>{e.dealsActiveFxService.updateInputs({isTrailingStop:a})})),e.fxAssetsService.subscribe(((a,s)=>{let i=!1;Object.keys(a.assets).forEach((e=>{const r=a.assets[e],n=s.assets[e];r&&n&&r.lockedTrading!==n.lockedTrading&&(i=!0)})),i&&e.dealsActiveFxService.assetUpdated()})),q.$.on("cancelCurrentDeal",(()=>{"fx"===e.tradingPanelService.getState().currentMechanic&&e.dealsActiveFxService.cancelCurrentDeal()}));e.commonLegacyServiceList.sideBarService.sideBarMajor.onStackChange(((a,s)=>{s===E.KO.TRADING_HISTORY_FX&&(e.dealsHistoryFxService.resetFilters(),(0,f.L)({event:"uaGtmEvents_clicks",eventCategory:"deals_history",eventAction:"open",eventLabel:"open"}))}))})),X.enable((e=>e.tradingMechanicsService.enabled("fx")))},25335:(e,a,s)=>{"use strict";s.d(a,{p:()=>DealActiveListRepository});var i=s(29257),r=s(3121),n=s(23934),o=s(62132),l=s(22462);function c(e,a){return a?Promise.reject(a.message):e.length?Promise.resolve(e.map((e=>(0,l.Q)(e)))):Promise.resolve([])}class DealActiveListRepository{find(e){return Promise.resolve()}turnOffTrailingStop(e){return(0,i.Z)((function*(){const a=(0,r.Z)(yield o.W.request.fxDealTurningTrailingOff(e),2);return c(a[0],a[1])}))()}dealsToppingUp(e){let a=e.id,s=e.group,n=e.amount,l=e.stopLoss;return(0,i.Z)((function*(){const e=(0,r.Z)(yield o.W.request.fxDealsToppingUp({id:a,group:s,amount:n,stop_loss:l,with_stop_loss:!!l}),2);return c(e[0],e[1])}))()}subscribeDeals(e){return(0,i.Z)((function*(){const a=(0,r.Z)(yield o.W.request.fxDealsSubscribe(e),2);return c(a[0],a[1])}))()}unsubscribeDeals(e){return(0,i.Z)((function*(){const a=(0,r.Z)(yield o.W.request.fxDealsUnsubscribe(e),2);return c(a[0],a[1])}))()}closeDeal(e){return(0,i.Z)((function*(){const a=(0,r.Z)(yield o.W.request.fxDealsClosing(e),2);return c(a[0],a[1])}))()}changeDeal(e){let a=e.id,s=e.group,n=e.take_profit,l=e.stop_loss;return(0,i.Z)((function*(){const e=(0,r.Z)(yield o.W.request.fxDealsChanging({id:a,stop_loss:l,take_profit:n,group:s}),2);return c(e[0],e[1])}))()}reconnectDeals(e){o.W.push.fxDealsReconnect(e)}constructor(){this.emitter=(0,n.Z)(),o.W.on("open",(()=>{this.emitter.emit("open")})),o.W.on("restore",(()=>{this.emitter.emit("restore")})),o.W.subscribe.fxDealsClosed((e=>{this.emitter.emit("dealsClosed",e.map((e=>(0,l.Q)(e))))})),o.W.subscribe.fxDealsOpen((e=>{this.emitter.emit("dealsOpen",e.map((e=>(0,l.Q)(e))))})),o.W.subscribe.fxDealsProceedMin((e=>{this.emitter.emit("dealsProceedMin",e.map((e=>(0,l.K)(e))))})),o.W.subscribe.fxDealsChange((e=>{this.emitter.emit("dealsChange",e.map((e=>(0,l.Q)(e))))}))}}},62258:(e,a,s)=>{"use strict";s.d(a,{p:()=>i.p});var i=s(25335)},22462:(e,a,s)=>{"use strict";s.d(a,{K:()=>o,Q:()=>l});var i=s(40285);function r(e){return{type:e.type,value:e.value}}function n(e){return{type:e.type,value:e.value,trailing:e.trailing}}function o(e){return{id:e.id,accountId:e.account_id,floatingPnl:e.floating_pnl,group:e.group,cursCurrent:e.price_current}}function l(e){let a="standoff",s=i.$i.AMOUNT;return e.take_profit?s=e.take_profit.type:e.stop_loss&&(s=e.stop_loss.type),e.floating_pnl>0?a="win":e.floating_pnl<0&&(a="loose"),{id:e.id,accountId:Number(e.account_id||0),currency:"demo"===e.group?"demo":e.currency,group:e.group,arenaId:void 0,arenaType:void 0,sum:e.amount,multiplicator:e.multiplicator,pair:e.pair,status:e.status,dir:e.dir,result:a,closeReason:e.closing_reason,timeOpen:e.time_open,timeClose:e.time_close,cursOpen:e.price_open,cursCurrent:e.price_current,cursClose:e.price_close,realizedPnl:e.realized_pnl,floatingPnl:e.floating_pnl,commission:e.commission,predictionSwapCommission:e.next_swap,commissionDetail:{open:e.commission_open,swap:e.commission_swap},takeProfit:e.take_profit&&r(e.take_profit),stopLoss:e.stop_loss&&n(e.stop_loss),trailingStopPips:0,cache:{},cancelLoading:!1,cancelDisabled:!0,cancelCollapsed:!0,limitType:s,canceling:!1,limitPending:!1,refunded:!1,selected:!1,groupDate:new Date(1e3*e.time_close),volume:e.volume}}},55530:(e,a,s)=>{"use strict";s.d(a,{N:()=>DealDetailsRepository});var i=s(29257),r=s(37323),n=s(30654),o=s(37982);class DealDetailsRepository{find(e){return(0,i.Z)((function*(){const a=yield n.g.getDealFx({deal_id:e.id,account_id:e.account_id});return Promise.resolve(a?(0,o.C)((0,r.Z)({},a.deal)):void 0)}))()}}},22825:(e,a,s)=>{"use strict";s.d(a,{N:()=>i.N});var i=s(55530)},25248:(e,a,s)=>{"use strict";s.d(a,{H:()=>DealsHistoryFxRepository});var i=s(29257),r=s(37323),n=s(64356),o=s(23934),l=s(30654),c=s(62132),d=s(37982);class DealsHistoryFxRepository{find(e){return(0,i.Z)((function*(){const a=yield l.g.getDealHistoryFx({account_id:e.account_id,closed_from:e.from,closed_to:e.to,closing_reason:e.closing_reason,cursor:e.cursor||"",limit:e.limit,pairs:e.pairs,pnl_status:e.result}),s=a.deals,i=a.next_cursor;return Promise.resolve({list:s.map((e=>(0,d.C)(e))),cursor:i})}))()}sendReport(e,a,s,i,r){const n={account_id:e,opened_from:a,opened_to:s,output_format:"xlsx",output_type:"email",output_target:i,locale:r};return l.g.getDealsReportFx(n)}constructor(){this.emitter=(0,o.Z)(),c.W.subscribe.fxDealsClosed((e=>{this.emitter.emit("dealsClose",e.map((e=>(0,d.C)((0,n.Z)((0,r.Z)({},e),{refunded:!1,trailing_stop_pips:0})))))}))}}},89510:(e,a,s)=>{"use strict";s.d(a,{H:()=>i.H});var i=s(25248)},37982:(e,a,s)=>{"use strict";function i(e){return{id:e.id,accountId:Number(e.account_id||0),currency:"demo"===e.group?"demo":e.currency,group:e.group,sum:e.amount,multiplicator:e.multiplicator,dir:e.dir,closeReason:e.closing_reason,timeOpen:e.time_open||0,timeClose:e.time_close||0,cursOpen:e.price_open,cursCurrent:e.price_close,cursClose:e.price_close,realizedPnl:e.realized_pnl,floatingPnl:e.realized_pnl,commission:e.commission,predictionSwapCommission:0,pair:e.pair,commissionDetail:{open:e.commission_open,swap:e.commission_swap},takeProfit:e.take_profit?{type:e.take_profit.type,value:e.take_profit.value}:void 0,stopLoss:e.stop_loss?{type:e.stop_loss.type,value:e.stop_loss.value,trailing:e.stop_loss.trailing}:void 0,refunded:!1,groupDate:new Date(1e3*(e.time_close||0))}}s.d(a,{C:()=>i})},31703:(e,a,s)=>{"use strict";s.d(a,{e:()=>DealDetailsService});var i=s(29257),r=s(7223);class DealDetailsService extends r.t{showDealInPopup(e){this.inputs.openDealPopup(e)}findInCache(e){const a=this.cache.find((a=>a.id===e.id&&a.accountId===e.account_id));if(a)return a;const s=this.inputs.findDeal(e);return s||null}constructor(e,a){super(),this.repository=e,this.inputs=a,this.cache=[];var s,r=this;this.load=this.createTask((s=(0,i.Z)((function*(e){const a=r.findInCache(e);return a?Promise.resolve(a):r.repository.find(e)})),function(e){return s.apply(this,arguments)}))}}},38765:(e,a,s)=>{"use strict";s.d(a,{$:()=>DealsActiveService});var i=s(37323),r=s(64356),n=s(59312),o=s(7223),l=s(60521),c=s(23735),d=s(10002),u=s(40285),m=s(72785),p=s(66257),h=s(95029),v=s(54944);class DealsActiveService extends o.t{get accountData(){return this.inputs.accountData}get accountsList(){return this.inputs.accountsList}get isOneClickSell(){return this.inputs.isOneClickSell}get isTrailingStop(){return this.inputs.isTrailingStop}get collection(){return this.dealsCollectionMap[this.accountData.id]}get isCanceling(){return this.collection.models.some((e=>e.canceling))}get dealsCount(){return this.collection.models.length}get totalDealsAmount(){return this.collection.models.reduce(((e,a)=>e+=(0,v.xb)(a)),0)}get totalDealsFloatingAmount(){return+this.collection.models.reduce(((e,a)=>e+=(0,v.bm)(a)),0).toFixed(2)}get selectedDeal(){return this.selectedDealId?this.collection.models.find((e=>e.id===this.selectedDealId)):void 0}init(){this.load(this.inputs.accountsList),this.subscribeDealsChanges(),this.repository.emitter.on("open",(()=>{this.subscribeDealsChanges()})),this.repository.emitter.on("restore",(()=>{this.subscribeDealsChanges(),this.repository.reconnectDeals(this.collection.models.map((e=>({id:e.id,group:e.group}))))})),this.repository.emitter.on("dealsOpen",this.updateDeals),this.repository.emitter.on("dealsChange",this.updateDealsMin),this.repository.emitter.on("dealsProceedMin",this.updateDealsMin),this.repository.emitter.on("dealsClosed",this.closeDeals),(0,l.reaction)((()=>this.selectedDealId),(()=>{this.toggleLimitsForm(!1)})),(0,l.reaction)((()=>this.getAvailableDealsCount()),(()=>{this.availableDealsCount=this.getAvailableDealsCount()})),(0,l.reaction)((()=>this.getAvailableCancelAmount()),(()=>{this.availableCancelAmount=this.getAvailableCancelAmount()})),(0,l.reaction)((()=>this.getAvailableAmount()),(()=>{this.availableAmount=this.getAvailableAmount()})),(0,l.reaction)((()=>this.collection.models.length),(()=>{this.update({count:this.collection.models.length})}),{fireImmediately:!0})}toggleLimitsForm(e){this.limitsFormOpened=null!=e?e:!this.limitsFormOpened}convertLimits(e,a,s,n,o){let l=(0,h.jM)(e,a,s,n.sum,(0,r.Z)((0,i.Z)({},n),{pair:this.inputs.getAsset(n.pair)}));if(o){const e=this.getLimitsRange(n,a);switch((0,h.CG)(l,o,a,e,(0,r.Z)((0,i.Z)({},n),{pair:this.inputs.getAsset(n.pair)}))){case h.Xy.SlLessThenMin:case h.Xy.TpLessThenMin:l=e[o].from;break;case h.Xy.SlMoreThenMax:case h.Xy.TpMoreThenMax:l=e[o].to}}return l}getLimitsRange(e,a){const s=this.inputs.getAsset(e.pair),n=s.precision,o=s.stopLossRate,l=s.stopOutRate,c=s.takeProfitRate;return(0,h.dn)(a,{dealSum:e.sum,precision:(0,h.p8)(a,n),stopLossRate:o,stopOutRate:l,takeProfitRate:c,floatingPnl:e.floatingPnl,deal:(0,r.Z)((0,i.Z)({},e),{pair:this.inputs.getAsset(e.pair)})})}showDeal(e,a){const s=this.getDeal(e);s&&(this.inputs.showDealTab(),this.selectDeal(s.id,!0),this.selectDealAsset(s.id),this.selectedGroupId=s.pair,this.scrollDealData={id:e,delay:a})}hideDeal(){this.unselectDeal(),this.unselectGroup(null)}getLimitsRangeFormatted(e,a,s){const i=this.inputs.getAsset(s.pair).precision,r=(0,h.p8)(a,i),n=(0,h.nH)(s.currency,r)[a],o=this.getLimitsRange(s,a)[e];return{from:n("".concat(o.from)),to:n("".concat(o.to))}}validateLimits(e,a,s){if(!a)return;let n;return n=String(a.value).length?(0,h.CG)(Number(a.value),e,a.type,this.getLimitsRange(s,a.type),(0,r.Z)((0,i.Z)({},s),{pair:this.inputs.getAsset(s.pair)})):(0,h.md)(String(a.value),a.trailing),n}getStopOut(e,a){const s=this.inputs.getAsset(a.pair).stopOutRate;return this.convertLimits(u.$i.AMOUNT,e,(0,h.VL)(a.sum,s),a)}getTrailingLevel(e,a){const s=this.inputs.getAsset(a.pair).stopOutRate;return e&&void 0!==e.value?e.value:(0,h.VL)(a.sum,s)}savePrevious(e){this.previousLimits={stopLoss:e.stopLoss?Object.assign({},e.stopLoss):void 0,takeProfit:e.takeProfit?Object.assign({},e.takeProfit):void 0}}restoreLimits(e){const a=this.getDeal(e);a&&(a.stopLoss=this.previousLimits.stopLoss?Object.assign({},this.previousLimits.stopLoss):void 0,a.takeProfit=this.previousLimits.takeProfit?Object.assign({},this.previousLimits.takeProfit):void 0)}setLimitsToDeal(e,a){void 0!==a.takeProfit&&(e.takeProfit=a.takeProfit),void 0!==a.stopLoss&&(e.stopLoss=a.stopLoss)}saveLimits(e,a){const s=this.collection.getById(e,!0);if(s){this.savePrevious(s),this.setLimitsToDeal(s,(0,i.Z)({},a));const r=(0,v.WR)((0,i.Z)({id:s.id,group:s.group,takeProfit:s.takeProfit,stopLoss:s.stopLoss},a));return s.limitPending=!0,new Promise(((a,i)=>{this.repository.changeDeal(r).then((e=>{s.limitPending=!1,this.updateDeals(e),a()})).catch((a=>{this.restoreLimits(e),i(a)})).finally((()=>{s.limitPending=!1}))}))}return Promise.resolve()}processDealToppingUp(e){if(!this.selectedDeal||!e.value||!e.type)return{};const a=this.inputs.getAsset(this.selectedDeal.pair),s=a.stopOutRate,r=a.precision,n=(0,i.Z)({},e),o=n.value,l=1-s,c=(0,h.lu)(Math.abs(o)/l,2),d=(0,h.lu)(c-this.selectedDeal.sum,2),p=(0,h.lu)(Math.max(1,this.selectedDeal.multiplicator*this.selectedDeal.sum/c),2);switch(this.getCurrentLimitType(u.FM.STOP_LOSS)){case u.$i.PRICE:n.value=(0,h.lu)(this.convertLimits(n.type,u.$i.PRICE,n.value,this.selectedDeal),r,this.selectedDeal.dir===m.em.UP?Math.ceil:Math.floor),n.type=u.$i.PRICE;break;case u.$i.PERCENT:n.type=u.$i.PERCENT,n.value=100*-l;break;default:n.value=(0,h.lu)(o,2)}return{diffAmount:d,dealAmount:c,multiplicator:p,stopLoss:n}}getCurrentLimitType(e){var a,s,i;const r=this.selectedDeal,n=u.$i.AMOUNT;if(!r)return n;const o=e===u.FM.TAKE_PROFIT,l=null===(a=r[e])||void 0===a?void 0:a.type,c=o?null===(s=r.stopLoss)||void 0===s?void 0:s.type:null===(i=r.takeProfit)||void 0===i?void 0:i.type;return l||c||n}turnOffTrailingStop(e){let a=e.id,s=e.group;return new Promise(((e,i)=>{this.repository.turnOffTrailingStop({id:a,group:s}).then((a=>{this.updateDeals(a),e()})).catch((e=>{i(e)}))}))}updateDealAmount(e,a,s){const i=this.getDeal(a);if(i){const a=this.inputs.getAsset(i.pair).id;return(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/position_top_up",eventAction:"add_money",eventLabel:"fx_".concat(a,"_").concat(i.id)}),new Promise(((a,r)=>{this.repository.dealsToppingUp({id:i.id,group:i.group,amount:e,stopLoss:s}).then((e=>{this.updateDeals(e),a(e)})).catch((e=>{r(e)}))}))}return Promise.reject()}updateInputs(e){this.inputs=(0,i.Z)({},this.inputs,e),void 0!==e.accountData&&this.subscribeDealsChanges(),void 0!==e.accountsList&&this.createDealCollections(e.accountsList)}createDealCollections(e){e.forEach((e=>{if(!this.dealsCollectionMap[e.id]){const a=new d.C([],{sort:"id",order:"desc"});a.onRemove=e=>{e.some((e=>{var a;return e.id===(null===(a=this.collection.selected)||void 0===a?void 0:a.id)}))&&this.unselectDeal()},this.dealsCollectionMap[e.id]=a}})),this.removeDealCollections(e)}removeDealCollections(e){Object.keys(this.dealsCollectionMap).filter((a=>e.every((e=>e.id!==Number(a))))).forEach((e=>delete this.dealsCollectionMap[e]))}load(e){this.createDealCollections(e)}getDeal(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.collection.getById(e,a)}selectDeal(e,a){const s=this.collection.getById(e);s&&(a&&(this.userSelectedDeal=(0,l.toJS)(s),this.selectGroup(s.pair)),this.selectedDealId=e)}selectDealAsset(e){const a=this.collection.getById(e);a&&this.inputs.selectAsset(a.pair)}unselectDeal(){this.userSelectedDeal=null,this.selectedDealId=null}selectGroup(e){this.selectedGroupId=e}unselectGroup(e){e===this.selectedGroupId&&(this.selectedGroupId=null)}removeDeals(e){e.forEach((e=>{const a=this.dealsCollectionMap[e.accountId];a&&a.models.length&&(e.id===this.selectedDealId&&this.unselectDeal(),a.update([e],{remove:!1,select:!1,add:!1}),setTimeout((()=>{a.remove(e.id)})))}))}closeDeals(e){if(e){this.removeDeals(e);const a=this.filterRawData(e);this.lastClosedDealList=[...a],this.lastClosedDeal=(0,i.Z)({},a[a.length-1])}}cancelAllDeals(){const e=this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).map((e=>this.cancelDeal(e.id,!0)));return(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"close_active_trades_approve",eventLabel:"fx_all_trades"}),Promise.all(e).then((e=>(this.closeDeals(e),e)))}cancelDeals(e){const a=[];e.map((e=>this.getDeal(e))).forEach((e=>{e&&a.push(e)}));const s=a.map((e=>this.cancelDeal(e.id,!0)));return Promise.all(s).then((e=>(this.closeDeals(e),e)))}cancelDeal(e,a){const s=this.getDeal(e),i=s&&Array.isArray(s)?s[0]:s;return!i||i.canceling?Promise.reject({mess:"Deal does not exist"}):(i.canceling=!0,new Promise(((s,r)=>{this.accountData?this.repository.closeDeal({id:e,group:i.group}).then((e=>{a||this.closeDeals(e),i.canceling=!1,s(e[0])})).catch((e=>{i.canceling=!1,r(e)})):r({mess:"Account does not exist"})})))}cancelCurrentDeal(){return this.selectedDealId&&this.getDeal(this.selectedDealId)?this.cancelDeal(this.selectedDealId):Promise.reject()}toggleCloseConfirmationId(e,a){a?this.closeConfirmationId=e:e===this.closeConfirmationId&&(this.closeConfirmationId=void 0)}setOneClickTradeDeal(e){this.inputs.setOneClickTradeDeal(e)}showError(e){this.inputs.showError(e)}getAsset(e){return this.inputs.getAsset(e)}assetUpdated(){this.availableDealsCount=this.getAvailableDealsCount(),this.availableCancelAmount=this.getAvailableCancelAmount(),this.availableAmount=this.getAvailableAmount()}filterRawData(e){const a=[],s=this.accountData,i=s.id,r=s.type;return e&&e.forEach((e=>{(e.group===r&&e.accountId===i||e.group===p.Q.DEMO&&e.group===r)&&a.push(e)})),a}subscribeDealsChanges(){this.inputs.accountData.isCommon&&this.repository.subscribeDeals({account_id:this.inputs.accountData.id,group:this.inputs.accountData.type}).then((e=>{this.updateDeals(e)}))}getAvailableDealsCount(){return this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).length}getAvailableCancelAmount(){return this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).reduce(((e,a)=>e+=(0,v.xb)(a)+(0,v.bm)(a)),0)}getAvailableAmount(){return+this.collection.models.filter((e=>!this.inputs.getAsset(e.pair).lockedTrading)).reduce(((e,a)=>e+=(0,v.xb)(a)),0).toFixed(2)}updateDeals(e){e.forEach((e=>{const a=this.dealsCollectionMap[e.accountId];a&&a.update([e],{remove:!1,select:!1})}))}updateDealsMin(e){e.forEach((e=>{const a=this.dealsCollectionMap[e.accountId];(null==a?void 0:a.getById(e.id,!0))&&a.update([e],{remove:!1,select:!1})}))}constructor(e,a){super({count:0}),this.repository=e,this.disposers=[],this.previousLimits={},this.dealsCollectionMap={},this.limitsFormOpened=!1,this.userSelectedDeal=null,this.lastClosedDeal=null,this.scrollDealData=null,this.availableDealsCount=0,this.availableCancelAmount=0,this.availableAmount=0,this.selectDeal=this.selectDeal.bind(this),this.getLimitsRangeFormatted=this.getLimitsRangeFormatted.bind(this),this.getStopOut=this.getStopOut.bind(this),this.getTrailingLevel=this.getTrailingLevel.bind(this),this.validateLimits=this.validateLimits.bind(this),this.convertLimits=this.convertLimits.bind(this),this.inputs=a}}(0,n.gn)([l.observable],DealsActiveService.prototype,"limitsFormOpened",void 0),(0,n.gn)([l.observable.ref],DealsActiveService.prototype,"userSelectedDeal",void 0),(0,n.gn)([l.observable.ref],DealsActiveService.prototype,"lastClosedDeal",void 0),(0,n.gn)([l.observable.ref],DealsActiveService.prototype,"lastClosedDealList",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"closeConfirmationId",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"selectedDealId",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"scrollDealData",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"selectedGroupId",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"inputs",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"availableDealsCount",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"availableCancelAmount",void 0),(0,n.gn)([l.observable],DealsActiveService.prototype,"availableAmount",void 0),(0,n.gn)([l.computed],DealsActiveService.prototype,"accountData",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"accountsList",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"isOneClickSell",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"isTrailingStop",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"collection",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"isCanceling",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"dealsCount",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"totalDealsAmount",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"totalDealsFloatingAmount",null),(0,n.gn)([l.computed],DealsActiveService.prototype,"selectedDeal",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"toggleLimitsForm",null),(0,n.gn)([l.action],DealsActiveService.prototype,"showDeal",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"selectDeal",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"selectDealAsset",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"unselectDeal",null),(0,n.gn)([l.action],DealsActiveService.prototype,"selectGroup",null),(0,n.gn)([l.action],DealsActiveService.prototype,"unselectGroup",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"closeDeals",null),(0,n.gn)([l.action],DealsActiveService.prototype,"cancelAllDeals",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"cancelDeals",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"cancelDeal",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"cancelCurrentDeal",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"toggleCloseConfirmationId",null),(0,n.gn)([l.action.bound],DealsActiveService.prototype,"setOneClickTradeDeal",null)},69283:(e,a,s)=>{"use strict";s.d(a,{$:()=>i.$});var i=s(38765)},54944:(e,a,s)=>{"use strict";function i(e){let a=e.takeProfit,s=e.stopLoss,i=e.group;return{id:e.id,group:i,take_profit:a&&{value:a.value,type:a.type},stop_loss:s&&{value:s.value,type:s.type,trailing:s.trailing}}}function r(e){const a=e.sum;return Number.isNaN(a)?0:a}function n(e){const a=e.floatingPnl;return Number.isNaN(a)?0:a}s.d(a,{WR:()=>i,bm:()=>n,xb:()=>r})},89028:(e,a,s)=>{"use strict";s.d(a,{F:()=>DealsHistoryFxService});var i=s(29257),r=s(37323),n=s(7223);class DealsHistoryFxService extends n.t{init(){this.getState().list.length||this.loadInitial()}loadInitial(){var e=this;return(0,i.Z)((function*(){e.getState().list.length&&e.update({list:[]}),e.cursor="";const a=yield e.load();e.update({list:a})}))()}loadMore(){var e=this;return(0,i.Z)((function*(){if(!e.getState().list.length||!e.cursor)return;const a=yield e.load();e.update({list:[...e.getState().list,...a]})}))()}toggleCard(e){this.update((a=>({selectedCardId:a.selectedCardId===e?null:e})))}showDeal(e){this.update({dealOnChart:e}),this.inputs.showDeal(e)}hideDeal(e){this.update({dealOnChart:void 0}),this.inputs.hideDeal(e)}toggleActiveFilter(e){const a=this.getState().activeFilter;this.update({activeFilter:null!==a&&a===e?null:e})}setFilter(e){var a,s,i,n;this.update({filter:(0,r.Z)({},this.getState().filter,e)}),this.sendFilterStatistic({period:(n=e.period,n?"period_".concat((null==n?void 0:n.from)||"...","-").concat((null==n?void 0:n.to)||"..."):void 0),accountId:(i=e.accountId,void 0!==i?"accounts_".concat(i):void 0),result:(s=e.result,s?"results_".concat(s):void 0),asset:(a=e.asset,a?"asset_".concat(null==a?void 0:a.id):void 0)}),this.loadInitial()}sendFilterStatistic(e){Object.keys(e).forEach((a=>{const s=e[a];s&&this.inputs.sendStatisticEvent({event:"uaGtmEvents_clicks",eventCategory:"deals_history",eventAction:"add_filter",eventLabel:s})}))}getAsset(e){return this.inputs.getAsset(e)}getAccountId(){return this.inputs.getAccountId()}getDeal(e){return this.getState().list.find((a=>a.id===e))}showDealTab(e){this.inputs.showDealTab()}resetFilters(){var e;const a=this.inputs.getAccountId(),s=null===(e=this.getState().filter)||void 0===e?void 0:e.accountId;this.setFilter({asset:null,result:null,period:null,accountId:s!==a?a:s})}getRequestParams(e){var a,s;const i=this.getState().filter;return{account_id:i.accountId,cursor:void 0!==e?e:this.cursor,limit:20,pairs:i.asset?[i.asset.id]:[],from:null===(a=i.period)||void 0===a?void 0:a.from,to:null===(s=i.period)||void 0===s?void 0:s.to,result:i.result||void 0}}constructor(e,a){super({list:[],selectedCardId:null,filter:{asset:null,period:null,result:null,accountId:a.getAccountId()},results:["profit","loss","zero"],activeFilter:null,assetList:a.getAssetList()}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield s.repository.find(s.getRequestParams());return e?(s.cursor=e.cursor,Promise.resolve(e.list)):Promise.resolve([])}))),this.sendReport=this.createTask((0,i.Z)((function*(){return new Promise((e=>{setTimeout((()=>{e()}),3e3)}))}))),this.cursor="";var r,n=this;this.addDeals=(r=(0,i.Z)((function*(e){const a=n.getState().list;if(!a.length)return void(yield n.loadInitial());const s=(yield n.repository.find(n.getRequestParams(""))).list.map((e=>e.id)),i=a.map((e=>e.id)),r=e.filter((e=>s.includes(e.id)&&!i.includes(e.id)));r.length&&n.update({list:[...r,...a]})})),function(e){return r.apply(this,arguments)}),this.repository.emitter.on("dealsClose",this.addDeals)}}},8849:(e,a,s)=>{"use strict";s.d(a,{$:()=>LastDealsHistoryFxService});var i=s(29257),r=s(7223);class LastDealsHistoryFxService extends r.t{loadInitial(){var e=this;return(0,i.Z)((function*(){e.getState().list.length&&e.update({list:[]});const a=yield e.load();e.updateList(a)}))()}toggleCard(e){this.update((a=>({selectedCardId:a.selectedCardId===e?null:e})))}showDeal(e){this.update({dealOnChart:e}),this.inputs.showDeal(e)}updateList(e){this.update({list:e.slice(0,10)})}hideDeal(e){this.update({dealOnChart:void 0}),this.inputs.hideDeal(e)}getAsset(e){return this.inputs.getAsset(e)}getRequestParams(){return{account_id:this.inputs.getAccountId(),cursor:"",limit:10,pairs:void 0,from:void 0,to:void 0}}constructor(e,a){super({list:[],selectedCardId:null}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield s.repository.find(s.getRequestParams());return e?Promise.resolve(e.list):Promise.resolve([])})));var r,n=this;this.addDeals=(r=(0,i.Z)((function*(e){const a=n.getState().list,s=n.inputs.getAccountId();a.length?n.updateList([...e.filter((e=>e.accountId===s)),...a]):yield n.loadInitial()})),function(e){return r.apply(this,arguments)}),this.repository.emitter.on("dealsClose",this.addDeals)}}},95644:(e,a,s)=>{"use strict";s.d(a,{m:()=>u});var i=s(27378),r=s(73598),n=s(63967),o=s(18404),l=s(23735),c=s(74262),d=s(69283);const u=i.memo((e=>{let a=e.grouped,s=e.itemId,u=e.active,m=void 0===u||u,p=e.injected,h=e.collapsible,v=e.modalPortalEl,g=e.selected;const _=(0,n.G)(d.$),f=_.collection.getById(s,!0),E=(0,o.D9)((null==f?void 0:f.pair)||""),S=i.useCallback((e=>{_.setOneClickTradeDeal(e)}),[_]),y=i.useCallback((()=>{_.selectedDealId!==s?(_.unselectDeal(),_.selectDeal(s,!0),_.selectDealAsset(s),f&&(0,l.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"deal_click",eventLabel:"fx_".concat(E.id,"_").concat("demo"===f.group?"demo":"real")})):_.unselectDeal()}),[_,s,f,E]),b=i.useCallback((e=>{f&&(_.cancelDeal(e).catch((e=>{_.showError(e.mess)})),(0,l.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"close_one_trade_fact",eventLabel:"fx_".concat(f.pair)}))}),[_,f]),C=i.useCallback((e=>{_.toggleCloseConfirmationId(s,e)}),[s,_]),T=i.useCallback((e=>{_.showError(e.mess)}),[_]);return i.useEffect((()=>{m||C(!1)}),[m,C]),i.useEffect((()=>()=>{C(!1)}),[C]),i.createElement(r.Qj,null,(()=>{const e=void 0!==g?g:_.selectedDealId===s;return f?i.createElement(c.VT,{deal:f,asset:E,grouped:a,selected:e,isOpened:e,modalPortalEl:v,collapsible:h,injected:p,isCloseConfirmation:_.closeConfirmationId===s,isOneClickSell:_.isOneClickSell||"demo"===f.group,toggleOneClickTradeDeal:S,selectDeal:y,cancelDeal:b,handleLimitError:T,limitsFormOpened:_.limitsFormOpened,dealCurrentService:_,onToggleCloseConfirmation:C}):null}))}));u.displayName="DealActiveCard"},76279:(e,a,s)=>{"use strict";s.d(a,{x:()=>m});var i=s(27378),r=s(73598),n=s(63967),o=s(18404),l=s(23735),c=s(74262),d=s(69283),u=s(95644);const m=i.memo((e=>{let a=e.groupId,s=e.items;const m=(0,n.G)(d.$),p=(0,o.D9)(a||""),h=i.useCallback((e=>{e===m.selectedGroupId?m.selectGroup(null):(m.selectGroup(e),m.unselectDeal())}),[m]),v=i.useCallback((e=>{m.cancelDeals(e).catch((e=>{m.showError(e.mess)}))}),[m]),g=i.useCallback((e=>{m.toggleCloseConfirmationId(a,e)}),[m,a]);return i.createElement(r.Qj,null,(()=>{const e=m.selectedGroupId===a;return i.createElement(c.uh,{id:a,deals:s,asset:p,isOpened:e,isCloseConfirmation:m.closeConfirmationId===a,toggleGroup:h,cancelDeal:v,sendStat:l.L,onToggleCloseConfirmation:g},(e=>i.createElement(c.nh,null,s.map((a=>i.createElement(u.m,{modalPortalEl:e,grouped:!0,key:a.id,itemId:a.id}))))))}))}));m.displayName="DealActiveGroup"},67781:(e,a,s)=>{"use strict";s.d(a,{H:()=>v});var i=s(27378),r=s(63967),n=s(36732),o=s(73598),l=s(46525),c=s(82844),d=s(69283),u=s(76279),m=s(2455),p=s(95644);const h=e=>{let a=e.scroll,s=e.group,r=e.scrollDealData;return i.useLayoutEffect((()=>{let e=0;if(r){const s=document.querySelector("[data-id=fx-".concat(r.id,"]"));s&&(r.delay?e=window.setTimeout((()=>{a.toElement(s.getBoundingClientRect(),"center","center","smooth")}),r.delay):a.toElement(s.getBoundingClientRect(),"center","center","smooth"))}return()=>{clearTimeout(e)}}),[a,r]),i.createElement(n.yJ.List,null,Object.keys(s).map((e=>{const a=s[e];return 1===a.length?i.createElement(p.m,{key:a[0].id,itemId:a[0].id,grouped:!1,collapsible:!0,active:!1}):i.createElement(u.x,{groupId:e,items:a,key:e})})))},v=i.memo((e=>{let a=e.scroll;const s=(0,r.G)(d.$);return i.createElement(o.Qj,null,(()=>{if(!s.collection.models.length)return i.createElement(n.yJ.NoDeals,{text:i.createElement(c._,{id:"no_open_transactions",defaultMessage:"You have no open trades on this account"})});const e=(0,l.Z)(s.collection.models,(e=>e.pair));return i.createElement(i.Fragment,null,i.createElement(m.E,null),i.createElement(h,{scroll:a,group:e,scrollDealData:s.scrollDealData}))}))}));v.displayName="DealActiveList"},89339:(e,a,s)=>{"use strict";s.d(a,{b:()=>d});var i=s(27378),r=s(63967),n=s(73598),o=s(36732),l=s(95644),c=s(69283);const d=i.memo((e=>{let a=e.selectedPairId,s=e.isSidebarOpen;const d=(0,r.G)(c.$),u=i.useCallback((e=>{d.selectDeal(Number(e),!0),d.selectDealAsset(Number(e))}),[d]),m=i.useCallback((()=>{d.unselectDeal()}),[d]),p=i.useCallback((e=>{d.toggleCloseConfirmationId(Number(e),!1)}),[d]),h=i.useCallback(((e,a,s)=>i.createElement(l.m,{modalPortalEl:s,injected:!0,key:e.item.id,itemId:e.item.id,collapsible:!1,selected:!0,active:Number(a)===e.item.id})),[]);return i.createElement(n.Qj,null,(()=>{const e=d.collection.models.filter((e=>e.pair===a)).map((e=>({id:String(e.id),item:e}))).reverse(),r=d.selectedDealId?String(d.selectedDealId):void 0;return i.createElement(o.bY,{cards:e,selectedCardId:s?void 0:r,onSelect:u,onUnselect:m,onHide:p,renderer:h})}))}));d.displayName="DealActiveSheet"},2455:(e,a,s)=>{"use strict";s.d(a,{E:()=>h});var i=s(3121),r=s(27378),n=s(17302),o=s(63967),l=s(73598),c=s(36732),d=s(82844),u=s(74262),m=s(95029),p=s(69283);const h=()=>{const e=(0,n.tm)(),a=(0,i.Z)(r.useState(!1),2),s=a[0],h=a[1],v=(0,i.Z)(r.useState(!1),2),g=v[0],_=v[1],f=(0,o.G)(p.$),E=r.useRef(null),S=r.useRef(null),y=r.useCallback((()=>{_(!0)}),[]),b=r.useCallback((()=>{_(!1)}),[]),C=r.useCallback((()=>s?Promise.resolve():f.cancelAllDeals().catch((e=>{f.showError(e.mess)})).finally((()=>{e&&(h(!1),b())}))),[f,s,b,e]);return r.createElement(l.Qj,null,(()=>{const e={id:"fx",title:"",amount:f.totalDealsAmount,isAllowed:!0,availableAmount:f.availableAmount,floatingAmount:f.totalDealsFloatingAmount,availableCancelAmount:f.availableCancelAmount,dealsCount:f.dealsCount,availableDealsCount:f.availableDealsCount,allowCloseAll:!0,isCanceling:f.isCanceling,cancelAllDeals:C};return r.createElement(c.l0,{invested:f.totalDealsAmount,float:f.totalDealsFloatingAmount,currency:f.accountData.currency,hostEl:S,button:r.createElement(u.Zd,{item:e,isLoading:f.isCanceling,currency:f.accountData.currency,showModal:y,ref:E}),modal:r.createElement(u.Ti,{modalItem:g?e:void 0,rootEl:S,modalRootEl:E,buttonText:e&&r.createElement(l.Qj,null,(()=>r.createElement(d._,{id:"deals_list_summary_close_all_button",defaultMessage:"Close all: {amount}",values:{amount:e.availableDealsCount}}))),buttonEndText:e&&r.createElement(l.Qj,null,(()=>r.createElement(m.ih,{minimumFractionDigits:2,value:e.availableCancelAmount,currency:f.accountData.currency}))),titleText:r.createElement(d._,{id:"deals_list_summary_modal_title",defaultMessage:"Are you sure that you want to close all Forex trades?"}),warnText:r.createElement(d._,{id:"deals_list_summary_modal_deal_close_warn",defaultMessage:"Some positions will remain open as the assets traded are currently offline."}),onClick:C,onClose:b})})}))};h.displayName="Summary"},52755:(e,a,s)=>{"use strict";s.d(a,{H:()=>i.H});var i=s(67781)},81459:(e,a,s)=>{"use strict";s.d(a,{O:()=>p});var i=s(3121),r=s(27378),n=s(63967),o=s(97415),l=s(36732),c=s(82844),d=s(31703),u=s(89028),m=s(50100);const p=r.memo((e=>{let a=e.request,s=e.onClose;const p=(0,n.G)(d.e),h=(0,n.G)(u.F),v=(0,i.Z)(r.useState(),2),g=v[0],_=v[1],f=(0,i.Z)(r.useState(""),2),E=f[0],S=f[1],y=(0,o.o)(p.load.pending),b=r.useCallback((e=>{h.showDeal(e),s&&s()}),[h,s]);return r.useEffect((()=>{let e=!0;return p.load(a).then((a=>{e&&a&&_(a)})).catch((a=>{e&&S(a&&"string"==typeof a.message?a.message:"fail deal load")})),()=>{e=!1}}),[p,a]),r.createElement(l.O2,{pending:y,title:g?r.createElement(r.Fragment,null,r.createElement(c._,{id:"id_deal",defaultMessage:"Trade ID"})," ",g.id):null,error:E||null},g?r.createElement(m.N,{embedded:!0,selected:!0,deal:g,asset:h.getAsset(g.pair),onClickChart:b}):null)}));p.displayName="DealDetails"},45828:(e,a,s)=>{"use strict";s.d(a,{O:()=>i.O});var i=s(81459)},50100:(e,a,s)=>{"use strict";s.d(a,{N:()=>m,Y:()=>u});var i=s(37323),r=s(64356),n=s(27378),o=s(84584),l=s(2050),c=s(23735),d=s(74262);const u=(0,o.Z)(),m=n.memo((e=>{let a=e.deal,s=e.asset,o=e.selected,m=e.embedded,p=e.onClickCard,h=e.onClickChart;const v=n.useCallback((()=>{p&&p(a.id)}),[p,a.id]),g=n.useCallback((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"deal_history",eventLabel:"open_big_chart"}),h(a)}),[h,a]),_=(0,l.x)(u,{props:{item:a,onClick:g}});return n.createElement(d._2,{key:a.id,deal:(0,r.Z)((0,i.Z)({},a),{pair:s}),selected:o,isOpened:o,embedded:m,selectDeal:v},_)}));m.displayName="DealsHistoryCard"},83495:(e,a,s)=>{"use strict";s.d(a,{w:()=>y});var i=s(3121),r=s(27378),n=s(26338),o=s(63967),l=s(97415),c=s(36732),d=s(17302),u=s(6228),m=s(82844),p=s(18985),h=s(45797),v=s(96937),g=s(89028),_=s(50100),f=(s(35073),s(65322));const E=e=>e.onlyAccountFilter?r.createElement(m._,{id:"trades_history_empty_list_info",defaultMessage:"You don't have any closed or cancelled trades on this account"}):r.createElement(m._,{id:"trades_history_filtered_empty_list_info",defaultMessage:"No trades matching your search parameters found"}),S=(0,p.vU)({pattern:{id:"trades_history_time_selection_input_tech",defaultMessage:"D/M/Y"},placeholder:{id:"trades_history_time_selection_input",defaultMessage:"dd/mm/yyyy"}}),y=r.memo((e=>{let a=e.isBottom,s=e.accountList,m=(e.email,e.getServerTime);var p,y;const b=h.NW.formatMessage(S.pattern),C=h.NW.formatMessage(S.placeholder),T=(0,o.G)(g.F),A=(0,l.o)(T.store),k=A.list,w=A.selectedCardId,N=A.dealOnChart,R=A.assetList,I=A.filter,D=(0,l.o)(T.load.pending),O=r.useRef(null),L=Boolean(!D&&!k.length),M=Boolean(D&&!k.length),P=Boolean(D&&k.length),x=k.length?(0,u.B)(k.sort(((e,a)=>Number(a.groupDate)-Number(e.groupDate)))):{},F=(0,i.Z)(r.useState(""),2),B=F[0],Z=F[1],U=T.getAccountId(),H=r.useCallback((e=>{T.toggleCard(e)}),[T]),G=r.useCallback((e=>{T.showDeal(e)}),[T]),V=r.useCallback((e=>{Z(e===B?"":e)}),[Z,B]),W=r.useCallback((e=>{(0,n.Z)(I.period,e)||T.setFilter({period:e})}),[T,I]),j=r.useCallback((e=>{T.setFilter({asset:e})}),[T]),z=r.useCallback((e=>{I.accountId!==Number(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&T.setFilter({accountId:Number(e.id)})}),[T,I]);return r.useEffect((()=>{T.init()}),[T]),r.useEffect((()=>{a&&T.loadMore()}),[a,T]),r.useEffect((()=>{N&&w!==N.id&&T.hideDeal(N)}),[N,w,T]),r.createElement(c.RH,null,r.createElement(c.RH.Filters,null,r.createElement(c.vO,null,null,r.createElement(c.vO.Filters,null,r.createElement(d.Z6,null,r.createElement(c.vO.FiltersWrapper,null,r.createElement(c.ev,{defaultItemId:String(U),accountList:s,filter:I.accountId,panelContainerRef:O,filterId:"accounts-1",activeFilterId:B,onSetFilter:z,onClick:V}),r.createElement(c.Tj,{assetList:R,filter:I.asset,panelContainerRef:O,filterId:"asset-1",activeFilterId:B,filterSearchItems:v.cM,onSetFilter:j,onClick:V}),r.createElement(c.nZ,{filter:I.period,panelContainerRef:O,pattern:b,placeholder:C,filterId:"period-1",activeFilterId:B,onSetFilter:W,onClick:V}),r.createElement(f.q,{activeFilterId:B,filterId:"result-1",panelContainerRef:O,onClick:V}))))),r.createElement(c.vO.PanelContainer,{containerRef:O})),r.createElement(c.RH.Wrapper,null,M?r.createElement(c.RH.Loader,null):null,L?r.createElement(c.RH.NoDeals,{text:r.createElement(E,{onlyAccountFilter:!((null===(p=I.period)||void 0===p?void 0:p.to)||(null===(y=I.period)||void 0===y?void 0:y.from)||I.asset||I.result)})}):null,Object.keys(x).map((e=>{const a=x[e];return r.createElement(r.Fragment,{key:e},r.createElement(c.iz,{now:new Date(1e3*m()),time:a[0].groupDate,moreInfo:null}),a.map((e=>r.createElement(_.N,{key:e.id,deal:e,asset:T.getAsset(e.pair),selected:w===e.id,onClickChart:G,onClickCard:H}))))}))),!!k.length&&r.createElement(c.RH.InfinityLoader,{loading:P}))}));y.displayName="DealsHistoryList"},65322:(e,a,s)=>{"use strict";s.d(a,{q:()=>m});var i=s(27378),r=s(63967),n=s(97415),o=s(36732),l=s(18985),c=s(82844),d=s(89028);const u=(0,l.vU)({profit:{id:"trades_history_profit_selection_option",defaultMessage:"With Profit"},loss:{id:"trades_history_loss_selection_option",defaultMessage:"With Loss"},zero:{id:"trades_history_no_result_selection_option",defaultMessage:"Without Result"}}),m=e=>{let a=e.panelContainerRef,s=e.activeFilterId,l=e.filterId,m=e.onClick;const p=(0,r.G)(d.F),h=(0,n.o)(p.store),v=h.filter,g=h.results,_=i.useCallback((e=>{"all"===(null==e?void 0:e.id)?p.setFilter({result:null}):v.result!==(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&p.setFilter({result:e.id})}),[p,v]);return i.createElement(o.fb,{title:i.createElement(c._,{id:"trades_history_results_selection_title",defaultMessage:"Trade Result"}),selectedId:(null==v?void 0:v.result)||"all",defaultItemId:"all",panelContainerRef:a,list:[{id:"all",title:i.createElement(c._,{id:"trades_history_all_results_selection_option",defaultMessage:"Any Result"})},...g.map((e=>({id:e,title:i.createElement(c._,Object.assign({},u[e]))})))],filterId:l,activeFilterId:s,onClick:m,onSetFilter:_})};m.displayName="FilterResult"},35073:(e,a,s)=>{"use strict";s.d(a,{$:()=>u});var i=s(29257),r=s(3121),n=s(27378),o=s(36732),l=s(63967),c=s(97415),d=s(89028);const u=e=>{let a=e.email,s=e.panelContainerRef,u=e.activeFilter,m=e.accountList,p=e.pattern,h=e.setActiveFilter;var v,g;const _=(0,l.G)(d.F),f=(0,c.o)(_.store),E=f.list,S=f.assetList,y=f.filter,b=(0,r.Z)(n.useState(!1),2),C=b[0],T=b[1],A=(0,c.o)(_.sendReport.pending),k=n.useMemo((()=>S.find((e=>{var a;return e.id===(null===(a=y.asset)||void 0===a?void 0:a.id)}))),[y.asset,S]),w=n.useMemo((()=>m.find((e=>e.id===y.accountId))),[y.accountId,m]),N=n.useCallback((()=>{h("")}),[h]),R=n.useCallback((()=>{h("report"===u?"":"report")}),[h,u]),I=n.useCallback((0,i.Z)((function*(){yield _.sendReport(),T(!0)})),[_]),D=n.useCallback((()=>{T(!1)}),[]);return n.createElement(o.$9,{panelContent:n.createElement(o.$e,{asset:null==k?void 0:k.title,account:null==w?void 0:w.name,sent:C,sending:A,email:a,from:null===(v=y.period)||void 0===v?void 0:v.from,to:null===(g=y.period)||void 0===g?void 0:g.to,pattern:p,emptyHistory:!E.length,onCancel:N,onSend:I,onReset:D}),panelTitle:n.createElement(n.Fragment,null,"Send Report"),panelContainerRef:s,onClick:R,active:"report"===u,open:"report"===u})};u.displayName="HistoryReport"},66175:(e,a,s)=>{"use strict";s.d(a,{S:()=>d});var i=s(27378),r=s(63967),n=s(97415),o=s(36732),l=s(8849),c=s(50100);const d=i.memo((()=>{const e=(0,r.G)(l.$),a=(0,n.o)(e.store),s=a.list,d=a.selectedCardId,u=a.dealOnChart,m=(0,n.o)(e.load.pending),p=i.useCallback((a=>{e.toggleCard(a)}),[e]),h=i.useCallback((a=>{e.showDeal(a)}),[e]);return i.useEffect((()=>{u&&d!==u.id&&e.hideDeal(u)}),[u,d,e]),m?i.createElement(o.yJ.Loader,null):i.createElement(o.yJ.List,null,s.map((a=>i.createElement(c.N,{key:a.id,deal:a,asset:e.getAsset(a.pair),selected:d===a.id,onClickChart:h,onClickCard:p}))))}));d.displayName="LastDealsHistoryList"},41303:(e,a,s)=>{"use strict";s.d(a,{S:()=>r.S,w:()=>i.w});var i=s(83495),r=s(66175)},48294:(e,a,s)=>{"use strict";function i(e,a){return{id:e.id,currency:e.currencyName,isCommon:a,type:e.type}}function r(e){return{id:e.id,icon:e.icon,title:e.title,precision:e.precision,lockedTrading:e.lockedTrading,stopLossRate:e.stopLossRate,takeProfitRate:e.takeProfitRate,stopOutRate:e.stopOutRate,minCommission:e.minCommission,openCommissionMax:e.openCommissionMax}}s.d(a,{G:()=>r,T:()=>i})},88284:(e,a,s)=>{"use strict";s.d(a,{O4:()=>o,X3:()=>c,Zs:()=>l,pJ:()=>n});var i=s(3952),r=s(18985);const n="drawings";var o;!function(e){e[e.horizontalLine=0]="horizontalLine",e[e.verticalLine=1]="verticalLine",e[e.trendLine=2]="trendLine",e[e.ray=3]="ray",e[e.fibonacciLevelsRays=4]="fibonacciLevelsRays",e[e.fibResistanceFan=5]="fibResistanceFan",e[e.fixedTrend=6]="fixedTrend"}(o||(o={}));const l={[o.horizontalLine]:i.Hg.HorizontalLine,[o.verticalLine]:i.Hg.VerticalLine,[o.trendLine]:i.Hg.TrendLine,[o.ray]:i.Hg.Ray,[o.fibonacciLevelsRays]:i.Hg.FibonacciLevels,[o.fibResistanceFan]:i.Hg.FibonacciFan,[o.fixedTrend]:i.Hg.FixedTrend},c=(0,r.vU)({horizontalLine:{id:"horizontal_line",defaultMessage:"Horizontal line"},verticalLine:{id:"vertical_line",defaultMessage:"Vertical Line"},trendLine:{id:"indicatorslist_trend_line",defaultMessage:"Trend line"},ray:{id:"indicatorslist_ray",defaultMessage:"Ray"},fibonacciLevelsRays:{id:"indicatorslist_fibonacci_levels",defaultMessage:"Fibonacci levels"},fibResistanceFan:{id:"indicatorslist_fib_resistance_fan",defaultMessage:"Fibonacci Fan"}})},67138:(e,a,s)=>{"use strict";s.d(a,{y:()=>DrawingsEditService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223),l=s(72155);var c=s(88284);class DrawingsEditService extends o.t{addDrawing(e,a){const s=this.getState(),i=s.widthSettings,r=s.availableLineColors,n=s.activeTradeFrameId,o=this.inputs.getEditItemIncrement(),c=this.getCurrentList(),d=(null==a?void 0:a.points)||[],u=i?i.default:0,m=(null==a?void 0:a.color)||r[0],p=(null==a?void 0:a.width)||u,h=function(e,a,s,i,r){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0;return{id:(0,l.x0)(),drawingInstanceId:a,type:e.type,name:e.name,title:e.title,config:{color:i,width:r},asset:o,points:n,editPoints:[],position:s,source:c,isEditDisabled:d}}(e,c.length?c[c.length-1].drawingInstanceId+1:0,o,m,p,d,this.getCurrentAsset(),null==a?void 0:a.source,null==a?void 0:a.isEditDisabled);if(n)return this.inputs.addDrawingToChart(n,h),this.updateList(n,[...c,h]),this.updateActiveInstruments(n),this.saveCache(),h}removeDrawing(e,a){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.getState().activeTradeFrameId,r=a||i,n=this.getList(r);if(n){const a=n.findIndex((a=>a.id===e));if(-1!==a&&r){const i=n.find((a=>a.id===e));i&&this.inputs.removeDrawingFromChart(r,i.drawingInstanceId),this.updateList(r,[...n.slice(0,a),...n.slice(a+1)]),this.updateActiveInstruments(r),this.saveCache(),s&&this.inputs.goToTechAnalysis()}}}removeAllDrawings(){var e;const a=this.getCurrentAsset();null===(e=this.getCurrentList(null==a?void 0:a.id))||void 0===e||e.forEach((e=>{this.removeDrawing(e.id)}))}getCurrentList(e){const a=this.getState().activeTradeFrameId;return this.getList(a,e)}getList(e,a){const s=this.getState().data,i=s&&e?s[e]:void 0,r=(null==i?void 0:i.list)||[];return a?r.filter((e=>{var s;return a===(null===(s=e.asset)||void 0===s?void 0:s.id)})):r}getCurrentAsset(){const e=this.getState().activeTradeFrameId;return this.getAsset(e)}getAsset(e){const a=this.getState().data,s=a&&e?a[e]:void 0;return null==s?void 0:s.asset}getCurrentSummary(){const e=this.getState(),a=e.activeTradeFrameId,s=e.data;if(a&&s[a]){var i;const e=s[a],o=null===(i=e.asset)||void 0===i?void 0:i.id;return e.list.filter((e=>{var a;return o===(null===(a=e.asset)||void 0===a?void 0:a.id)})).reduce(((e,a)=>(0,n.Z)((0,r.Z)({},e),{[a.type]:e[a.type]?++e[a.type]:1})),{})}}getActiveDrawingDataItem(e){const a=this.getState(),s=a.activeTradeFrameId,i=a.data,r=e||s;return r?i[r]:void 0}handleLegendHoverOn(e,a){this.inputs.hoverDrawing(e,a,!0)}handleLegendHoverOff(e,a){this.inputs.hoverDrawing(e,a,!1)}setEditedDrawindId(e,a){const s=this.getState().data;s[e]&&this.update({data:(0,n.Z)((0,r.Z)({},s),{[e]:(0,n.Z)((0,r.Z)({},s[e]),{editedDrawingId:a})})})}clearEditedDrawingIndex(e){const a=this.getState().data;a[e]&&this.update({data:(0,n.Z)((0,r.Z)({},a),{[e]:(0,n.Z)((0,r.Z)({},a[e]),{editedDrawingId:void 0})})})}getEditedDrawing(e){const a=this.getState().data;if(!a[e])return null;const s=a[e].editedDrawingId;return s&&a[e].list.find((e=>e.id===s))||null}updateDrawing(e,a,s){const i=this.getState(),o=i.data,l=i.activeTradeFrameId;if(!l)return;const c=o[l].list.find((e=>e.id===a));if(!c)return;const d=(0,n.Z)((0,r.Z)({},c),{config:s});this.update({data:{[e]:(0,n.Z)((0,r.Z)({},o[e]),{list:o[e].list.map((e=>a===e.id?d:e))})}}),this.inputs.updateDrawingOnChart(l,d),this.saveCache()}goToDrawingEdit(){this.inputs.goToDrawingEdit()}updateList(e,a){const s=this.getState().data;a&&s[e]&&this.update({data:(0,n.Z)((0,r.Z)({},s),{[e]:(0,n.Z)((0,r.Z)({},s[e]),{list:a})})})}invalidateDataByFrame(e,a){if(e&&a&&a.length){let s={};return a.forEach((a=>{var i;s=(0,n.Z)((0,r.Z)({},s),{[a.id]:(0,n.Z)((0,r.Z)({},this.getDefaultDataItem(a),e[a.id]),{mechanic:a.mechanic,asset:null===(i=a.meta)||void 0===i?void 0:i.asset})})})),s}}init(){var e=this;return(0,i.Z)((function*(){const a=e.inputs.getFrames();if(!e.inputs.activeTradeFrameId)return;e.update({activeTradeFrameId:e.inputs.activeTradeFrameId});let s={};const i=e.invalidateDataByFrame(yield e.activeDrawingsRepository.find(),a);a.forEach((a=>{s=(0,n.Z)((0,r.Z)({},s),{[a.id]:e.getDefaultDataItem(a)})})),i&&Object.keys(i).length?(e.update({data:i}),e.addDrawingToChart(e.inputs.activeTradeFrameId),a.forEach((a=>{e.updateActiveInstruments(a.id,!0)}))):e.update({data:s})}))()}addDrawingToChart(e){const a=this.getAsset(e);if(e&&a){this.getList(e,a.id).forEach((a=>{e&&this.inputs.addDrawingToChart(e,a)}))}}resetOnChart(){const e=this.getState().activeTradeFrameId,a=this.getCurrentList(),s=this.getCurrentAsset(),i=this.getList(e,null==s?void 0:s.id);a.forEach((a=>{e&&this.inputs.removeDrawingFromChart(e,a.drawingInstanceId)})),i.forEach((a=>{e&&this.inputs.addDrawingToChart(e,a)}))}getDefaultDataItem(e){var a;return{list:[],mechanic:e.mechanic,asset:null===(a=e.meta)||void 0===a?void 0:a.asset}}updateActiveInstruments(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.getAsset(e),i=this.getList(e,null==s?void 0:s.id);e&&this.inputs.updateActiveInstruments(e,c.pJ,i.map((e=>({id:e.id,type:c.pJ,position:e.position}))),a)}saveCache(){const e=this.getState().data,a={};Object.keys(e).forEach((s=>{a[s]={list:e[s].list}})),this.activeDrawingsRepository.save(a)}constructor(e,a,s){super({activeTradeFrameId:s.activeTradeFrameId,data:{},availableLineColors:[]}),this.drawingsRepository=e,this.activeDrawingsRepository=a,this.inputs=s;var l=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield l.drawingsRepository.find();e&&(l.update({availableLineColors:e.availableLineColors,widthSettings:e.widthSettings}),yield l.init())})),{strategy:o.T.once}),this.updateFrames=e=>{const a=this.getState().data;e.forEach((e=>{const s=a&&a[e.id];(null==s?void 0:s.mechanic)!==e.mechanic&&this.addDrawingToChart(e.id)})),this.update({data:this.invalidateDataByFrame(a,e)}),e.forEach((e=>{this.updateActiveInstruments(e.id)})),this.resetOnChart(),this.saveCache()},this.updateActiveTradeFrameId=e=>{this.update({activeTradeFrameId:e})},this.handleDrawingPointEdit=e=>{const a=this.getList(e.tradeFrameId).map((a=>a.drawingInstanceId===e.payload.drawingId?(0,n.Z)((0,r.Z)({},a),{points:[...e.payload.points]}):a));this.updateList(e.tradeFrameId,a),this.saveCache()},this.handleDrawingEdit=e=>{const a=this.getList(e.tradeFrameId).map((a=>a.drawingInstanceId===e.payload.drawingId?(0,n.Z)((0,r.Z)({},a),{points:[...a.editPoints],editPoints:[]}):a));this.updateList(e.tradeFrameId,a),this.saveCache()},this.handleSelectDrawing=e=>{const a=this.getState().data;a[e.tradeFrameId]&&this.update({data:(0,n.Z)((0,r.Z)({},a),{[e.tradeFrameId]:(0,n.Z)((0,r.Z)({},a[e.tradeFrameId]),{selectedDrawingId:e.payload.drawingId})})})},this.handleUnSelectDrawing=e=>{const a=this.getState().data;a[e.tradeFrameId]&&this.update({data:(0,n.Z)((0,r.Z)({},a),{[e.tradeFrameId]:(0,n.Z)((0,r.Z)({},a[e.tradeFrameId]),{selectedDrawingId:void 0})})})}}}},24724:(e,a,s)=>{"use strict";s.d(a,{G:()=>i,Y:()=>r});const i={tournaments:{id:"tou_events",defaultMessage:"Events"}},r="ent_tournaments_nav_tab_enabled"},59410:(e,a,s)=>{"use strict";s.d(a,{q:()=>r});var i=s(58952);const r=(0,i.WV)({deeplink_action:(0,i.t$)("tournaments"),screen:i.Ld.optional()})},90569:(e,a,s)=>{"use strict";s.d(a,{J:()=>S});var i=s(29257),r=s(27378),n=s(13243),o=s(97415),l=s(83714),c=s(14282),d=s(59757),u=s(95601),m=s(77740),p=s(74199),h=s(8275),v=s(61681),g=s(7265),_=s(41972),f=s(24724),E=s(59410);const S=(0,n.v)({name:"Events",dependsOn:[u.u$,v.G,g.EA,l.e8,c.F0],services:()=>({events:new d.nC(new _.C)})},{publicApi:e=>({events:e.events})});var y;S.use((0,d.ZJ)(d.FL.EVENTS),((e,a)=>{let s=e.className,i=a.sidebarService;const n=r.useCallback((()=>{i.goTo(d.FL.EVENTS_HISTORY)}),[i]);return r.createElement(d.XS,{className:s,small:!1,onHistoryClick:n})})).use((0,d.AA)(d.FL.EVENTS),((e,a)=>{let s=a.events;return(0,o.o)(s.store).isReady?r.createElement(d.r7,Object.assign({},e)):r.createElement(p.it,null)})).use((0,d.AA)(d.FL.EVENTS_HISTORY),(e=>r.createElement(d.pT,Object.assign({},e)))).use(u.eM,((e,a,s)=>(e.push({id:h.KO.EVENTS,title:f.G.tournaments,selected:s.sidebarService.getMajorActiveScope()===h.KO.EVENTS,dataTest:"sidebar-btn-tournaments",icon:r.createElement(m.SP0,null),onClick:()=>s.sidebarService.toggle(h.KO.EVENTS)}),e))).onStart((y=(0,i.Z)((function*(e){let a=e.events,s=e.commandService,i=e.sidebarService;yield a.load(),s.registerCommand(E.q.guard,(e=>{const a=e.screen&&(0,d.jW)(e.screen)?e.screen:"actual";i.goTo(d.V1[a])}))})),function(e){return y.apply(this,arguments)})).enable((e=>e.politics.isEnabled(f.Y)))},41972:(e,a,s)=>{"use strict";s.d(a,{C:()=>EventsRepository});class EventsRepository{find(){return Promise.resolve({history:{categories:[],selected:null}})}}},38138:(e,a,s)=>{"use strict";s.d(a,{$:()=>b});var i=s(27378),r=s(13243),n=s(95601),o=s(14282),l=s(90400),c=s(59757),d=s(90569),u=s(96667),m=s(61681),p=s(29257),h=s(3121),v=s(85116),g=s(84515);class StatisticsTransformer{static parse(e,a){return e.filter((e=>a||"battles"!==e.type&&"wins"!==e.type)).map((e=>StatisticsTransformer.parseItem(e)))}static parseItem(e){return{type:e.type,icon:e.icon,title:e.title,description:e.description,value:e.value}}}class ProfilesRepository{find(e){var a=this;return(0,p.Z)((function*(){const s=(0,h.Z)(yield Promise.all([a.webSocket.getGameProfileInfo({user_id:e}),g.$.userValues(["politics"])]),2),i=s[0],r=s[1],n=yield(0,v.w)();return i?class ProfileTransformer{static parse(e,a,s,i){let r=null;const n=s.find((e=>e.id===a.service_level_name));return n&&(r={name:n.id,iconUrl:n.icon_url,color:n.color}),{id:e,meta:{avatar:a.avatar,name:a.name,country:a.country},rating:{leagueId:a.league_id,points:a.points,position:a.position},serviceLevel:r,tradersWay:{level:a.traders_way_level},statistics:StatisticsTransformer.parse(a.statistics,i)}}}.parse(e,i,n,Boolean(r.politics.ent_battle_rooms_enabled)):null}))()}constructor(e){this.webSocket=e}}var _=s(57615),f=s(29490),E=s(57415),S=s(86933);class WebSocket{getGameProfileInfo(e){const a="getGameProfileInfo".concat(e.user_id),s=this.cache.get(a);return s?Promise.resolve(s):this.throttledTasks.get(a,(()=>new Promise((s=>{this.connect.request({event_name:S.mi.RATINGS_PLAYER_INFO_GET,type:"request",data:[e]}).onResponse((e=>{e&&(this.cache.set(a,e[0]),s(e[0])),s(null)})),setTimeout((()=>s(null)),5e3)}))))}constructor(e){this.connect=e,this.cache=new _._({namespace:"feature/game-profile",defaultTtl:30,backend:new f.g}),this.throttledTasks=new E.aX(150)}}var y=s(7223);class NavigationPlatformService extends y.t{constructor(e,a){super(),this.profilesService=e,this.sidebarService=a,this.goToInfo=e=>{this.profilesService.select(e),this.sidebarService.goTo(c.FL.GAME_PROFILE_SUMMARY)}}}const b=(0,r.v)({name:"GameProfile",dependsOn:[n.u$,o.F0,m.G,d.J],services(e,a){let s=e.sidebarService;const i=new l.L0(a.profilesRepository);return{profilesService:i,navigationService:new NavigationPlatformService(i,s)}}},{repositories:()=>({profilesRepository:new ProfilesRepository(new WebSocket(u.Z.add()))}),publicApi:e=>({gameProfileNavigation:e.navigationService,gameProfile:e.profilesService})});b.use((0,c.AA)(c.FL.GAME_PROFILE_SUMMARY),(e=>i.createElement(l.U2,Object.assign({},e))))},35295:(e,a,s)=>{"use strict";s.d(a,{PQ:()=>A.P,iA:()=>A.i,go:()=>k.g,JH:()=>T});var i=s(37323),r=s(64356),n=s(14305),o=s(99950),l=s(33479),c=s(27378);const d=c.lazy((()=>s.e(4016).then(s.bind(s,44016)).then((e=>({default:e.OncePurchase}))))),u=c.lazy((()=>s.e(5248).then(s.bind(s,65248)).then((e=>({default:e.SubscriptionPurchase}))))),m=c.lazy((()=>s.e(8472).then(s.bind(s,98472)).then((e=>({default:e.TrialPurchase}))))),p=c.lazy((()=>s.e(5914).then(s.bind(s,35914)).then((e=>({default:e.Success}))))),h=c.lazy((()=>s.e(8408).then(s.bind(s,38408)).then((e=>({default:e.SubscriptionPeriod}))))),v=c.lazy((()=>s.e(1783).then(s.bind(s,81783)).then((e=>({default:e.AutoRenewal}))))),g=c.lazy((()=>s.e(3726).then(s.bind(s,43726)).then((e=>({default:e.FakePurchase}))))),_=c.lazy((()=>s.e(7466).then(s.bind(s,37466)).then((e=>({default:e.ScreenTitle}))))),f=c.lazy((()=>s.e(2897).then(s.bind(s,32897)).then((e=>({default:e.Main})))));var E=s(24459),S=s(46920);var y=s(68551),b=s(51667);const C=e=>{const a=e.accountStores,s=e.accountsApi,r=e.purchaseStores,o=e.purchaseApi,l=e.analyticsApi,C=e.screenIds,T=e.analyticEvents,A=(0,b.cu)(y.gy),k=(0,b.cu)(y.gy),w=(0,b.cu)(y.gy),N=null!=C?C:(0,b.CK)(),R=(e=>{let a=e.state,s=e.screenId,r=e.api,o=r.select,l=r.send,d=r.setRequestStatus,u=r.selectPaymentPeriod,m=r.cancelSubscription,p=r.buyGood,h=e.uiCallbacks,v=e.analyticEvents;return(0,n.LM)(a,((e,a)=>{var r=e.children,n=(0,E.Z)(e,["children"]),g=a.$currency,_=a.$accountsList,f=a.$selectedAccount,y=a.$purchase;return c.createElement(S.L.Provider,{value:{modelState:{currency:null!=g?g:"usd",purchase:y,accountsList:_,selectedAccount:f},modelApi:{selectAccount:o,setRequestStatus:d,selectPaymentPeriod:u,cancelSubscription:m,buyGood:p,sendAnalytics:l},uiApi:(0,i.Z)({},n,h),screenId:s,analyticEvents:v}},r)}))})({state:(0,i.Z)({},a,r),api:(0,i.Z)({},s,o,l),screenId:N,analyticEvents:T,uiCallbacks:{onSelectAccount:k.call,onRechargeAccount:w.call,onSuccessfullyCompletePurchaseFlow:A.call}}),I=e=>(0,b.XL)({screen:e,wrapper:R,hasFallback:!0}),D=e=>(0,b.XL)({screen:_,wrapper:R,screenProps:{type:e}}),O=null;return{SCREEN_ID:N,screens:[{id:N.MAIN,title:O,component:I(f)},{id:N.AUTO_RENEWAL,renderHeader:D(y.VP.AUTO_RENEWAL),title:O,component:I(v)},{id:N.FAKE,renderHeader:D(y.VP.FAKE),title:O,component:I(g)},{id:N.ONCE,renderHeader:D(y.VP.ONCE),title:O,component:I(d)},{id:N.SUBSCRIPTION,renderHeader:D(y.VP.SUBSCRIPTION),title:O,component:I(u)},{id:N.PERIOD,renderHeader:D(y.VP.PERIOD),title:O,component:I(h)},{id:N.SUCCESS,renderHeader:D(y.VP.SUCCESS),title:O,component:I(p)},{id:N.TRIAL,renderHeader:D(y.VP.TRIAL),title:O,component:I(m)}],uiApi:{setSuccessfullyCompletePurchaseFlowHandler:A.setHandler,setAccountSelectHandler:k.setHandler,setRechargeAccountHandler:w.setHandler}}},T=e=>{let a=e.analyticEvents,s=void 0===a?{}:a,l=e.screenIds;const c=(0,o.tX)(),d=(0,o.MV)(),u=(0,o.bh)(),m=C((0,r.Z)((0,i.Z)({},c,d,u),{screenIds:l,analyticEvents:s})),p=m.screens,h=m.SCREEN_ID,v=m.uiApi,g=c.accountsApi,_=c.accountStores,f=d.purchaseApi,E=d.purchaseStores,S=u.analyticsApi;(0,n.UP)({clock:f.launch,target:g.launchFx});return{api:(0,i.Z)({},g,f,S),data:(0,i.Z)({},_,E),setHandlers:e=>{let a=e.onBuyGood,s=e.onCancelSubscription,i=e.onSuccessfullyCompletePurchaseFlow,r=e.onSelectAccount,n=e.onRechargeAccount,o=e.onSendAnalytics;a&&f.setBuyGoodHandler(a),s&&f.setCancelSubscriptionHandler(s),i&&v.setSuccessfullyCompletePurchaseFlowHandler(i),r&&v.setAccountSelectHandler(r),n&&v.setRechargeAccountHandler(n),o&&S.setSender(o)},screens:p,SCREEN_ID:h}};(0,o.Ol)(l.i);var A=s(36460),k=s(37239)},36460:(e,a,s)=>{"use strict";s.d(a,{P:()=>r,i:()=>n});var i=s(76232);const r=(0,i.t)(),n=(0,i.t)()},37239:(e,a,s)=>{"use strict";s.d(a,{g:()=>i});const i=(0,s(84584).Z)()},68551:(e,a,s)=>{"use strict";s.d(a,{J7:()=>o,Ml:()=>m,VP:()=>d,ZB:()=>u,em:()=>n,gy:()=>p,ro:()=>c});var i=s(3121),r=s(99950);const n=[s(474).Y6.OLC],o={[r.dx.ONCE]:1,[r.dx.MONTHLY]:1,[r.dx.QUARTERLY]:3,[r.dx.HALF_YEARLY]:6,[r.dx.YEARLY]:12},l={[r.dx.ONCE]:0,[r.dx.MONTHLY]:0,[r.dx.QUARTERLY]:5,[r.dx.HALF_YEARLY]:10,[r.dx.YEARLY]:15},c=Object.fromEntries(Object.entries(l).map((e=>{let a=(0,i.Z)(e,2),s=a[0],r=a[1];return[s,r?"-".concat(r,"%"):""]}))),d={MAIN:"MAIN",AUTO_RENEWAL:"AUTO_RENEWAL",FAKE:"FAKE",ONCE:"ONCE",SUBSCRIPTION:"SUBSCRIPTION",TRIAL:"TRIAL",SUCCESS:"SUCCESS",PERIOD:"PERIOD"},u={[d.MAIN]:"main",[d.AUTO_RENEWAL]:"auto_renewal",[d.FAKE]:"fake",[d.ONCE]:"once",[d.SUBSCRIPTION]:"subscription",[d.TRIAL]:"trial",[d.SUCCESS]:"success",[d.PERIOD]:"period"},m={[r.M7.ONCE]:d.ONCE,[r.M7.SUBSCRIBE]:d.PERIOD,[r.M7.FAKE]:d.FAKE,[r.M7.TRIAL]:d.TRIAL,[r.M7.AUTO_RENEWAL]:d.AUTO_RENEWAL},p=e=>{}},46920:(e,a,s)=>{"use strict";s.d(a,{L:()=>o,T:()=>l});var i=s(27378),r=s(99950),n=s(68551);const o=i.createContext({modelState:{accountsList:[],selectedAccount:null,currency:"usd",purchase:{good:null,paymentPeriod:r.dx.ONCE,requestStatus:r.J_.INITIAL}},modelApi:{selectAccount:n.gy,setRequestStatus:n.gy,selectPaymentPeriod:n.gy,cancelSubscription:n.gy,buyGood:n.gy,sendAnalytics:n.gy},uiApi:{onBack:n.gy,onOpenById:n.gy,onClose:n.gy,onOpenInOverlay:n.gy,onSelectAccount:n.gy,onRechargeAccount:n.gy,onSuccessfullyCompletePurchaseFlow:n.gy},screenId:n.ZB,analyticEvents:{}}),l=()=>i.useContext(o)},51667:(e,a,s)=>{"use strict";s.d(a,{CK:()=>d,XL:()=>u,cu:()=>m,p6:()=>c});var i=s(3121),r=s(27378),n=s(74199),o=s(18985),l=s(68551);const c=e=>e?r.createElement(o.Ji,{value:1e3*e,day:"2-digit",month:"2-digit",year:"numeric"}):"",d=()=>Object.fromEntries(Object.entries(l.ZB).map((e=>{let a=(0,i.Z)(e,2),s=a[0],r=a[1];return[s,"".concat("good-purchase-").concat(r)]}))),u=e=>{let a=e.screen,s=e.screenProps,i=e.wrapper,o=e.hasFallback;return e=>r.createElement(i,e,r.createElement(r.Suspense,{fallback:o?r.createElement(n.zo):null},r.createElement(a,s)))},m=e=>{let a=e;return{setHandler:e=>{a=e},call:function(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return a(...s)}}}},72837:(e,a,s)=>{"use strict";s.d(a,{K:()=>Be});var i=s(29257),r=s(27378),n=s(60521),o=s(13243),l=s(95601),c=s(46525),d=s(6680),u=s(84584),m=s(36732),p=s(77740),h=s(23735),v=s(82844),g=s(26763),_=s(74199),f=s(64802),E=s(58568),S=s(96038),y=s(95386),b=s(61681),C=s(14803),T=s(5240),A=s(8275),k=s(18121),w=s(71003),N=s(73533),R=s(47641),I=s(37323),D=s(64356),O=s(7223);class IndicatorListService extends O.t{updateAvailable(e){if(e){const a=this.getState().list.map((a=>{const s=e[a.type];return void 0!==s?(0,D.Z)((0,I.Z)({},a),{available:s}):(0,I.Z)({},a)}));this.update({list:a})}}setSearchText(e){this.update({searchText:e})}constructor(e,a){super({searchText:"",list:[],categories:{}}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield s.repository.find();if(e){const a=e.list.map((e=>{const a=s.inputs.checkIndicatorInFeatureToggle(e.type);return(0,D.Z)((0,I.Z)({},e),{available:void 0===a||a})}));s.update((0,D.Z)((0,I.Z)({},e),{list:a}))}})),{strategy:O.T.once})}}var L=s(62540),M=s(45797);const P=JSON.parse('{"Kh":[{"name":"SMA","type":3,"category":0,"config":[{"id":0,"name":"Simple Moving Average","steps":[{"id":0,"min":1,"max":365,"step":1,"default":20}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"defaultColor":1}]},{"name":"EMA","type":4,"category":0,"config":[{"id":0,"name":"Exponential Moving Average","steps":[{"id":0,"min":1,"max":365,"step":1,"default":20}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"defaultColor":5}]},{"name":"Parabolic","category":0,"type":1,"config":[{"id":0,"name":"Parabolic SAR","steps":[{"id":0,"min":0.01,"max":0.2,"step":0.01,"default":0.02}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":2.5},"defaultColor":2}]},{"name":"MACD","category":1,"type":0,"config":[{"id":0,"name":"MACD line","steps":[{"id":0,"min":1,"max":60,"step":1,"default":12},{"id":1,"min":1,"max":60,"step":1,"default":26}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":0,"optional":true,"visibleDefault":true},{"id":1,"name":"Signal","steps":[{"id":0,"min":1,"max":60,"step":1,"default":9}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":3,"optional":true,"visibleDefault":true},{"id":2,"name":"Histogram","lineStyles":[0,3,1],"defaultLineStyle":0,"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"opacity":{"min":0.01,"max":1,"step":0.01,"default":0.5},"defaultColor":6,"defaultHistogramColor":[0,8],"optional":true,"visibleDefault":true}]},{"name":"RSI","category":1,"type":5,"config":[{"id":0,"name":"RSI","steps":[{"id":0,"min":1,"max":45,"step":1,"default":14}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"defaultColor":4}]},{"name":"Bollinger Bands","category":0,"type":6,"config":[{"id":0,"name":"SMA","steps":[{"id":0,"min":1,"max":60,"step":1,"default":20}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":3},{"id":1,"name":"Standard deviation","steps":[{"id":0,"min":1,"max":3,"step":0.1,"default":2}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":1}]},{"name":"Ichimoku Cloud","category":0,"type":7,"config":[{"id":0,"name":"Tenkan Sen","steps":[{"id":0,"min":1,"max":99,"step":1,"default":9}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":5},{"id":1,"name":"Kijun Sen","steps":[{"id":0,"min":1,"max":200,"step":1,"default":26}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":8},{"id":2,"name":"Chikou Span","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":7},{"id":3,"name":"Senkou Span A","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":0},{"id":4,"name":"Senkou Span B","steps":[{"id":0,"min":1,"max":200,"step":1,"default":52}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":3}]},{"name":"Stochastic Oscillator","category":1,"type":2,"config":[{"id":0,"name":"%K","steps":[{"id":0,"min":1,"max":100,"step":1,"default":14}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"defaultColor":6},{"id":1,"name":"%D","steps":[{"id":0,"min":1,"max":100,"step":1,"default":3}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"defaultColor":3},{"id":2,"name":"m","steps":[{"id":0,"min":1,"max":100,"step":1,"default":3}]}]},{"name":"DeMarker","category":1,"type":13,"config":[{"id":0,"name":"DeMarker","steps":[{"id":0,"min":1,"max":99,"step":1,"default":14}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"lineStyles":[0,3],"opacity":{"min":0.01,"max":1,"step":0.01,"default":1},"defaultLineStyle":0,"defaultColor":0,"defaultHistogramColor":[0,8]}]},{"name":"Alligator","category":0,"type":8,"config":[{"id":0,"name":"Jaw","steps":[{"id":0,"min":1,"max":100,"step":1,"default":13},{"id":1,"min":1,"max":100,"step":1,"default":8}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"opacity":{"min":0.2,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":0,"defaultColor":7},{"id":1,"name":"Teeth","steps":[{"id":0,"min":1,"max":100,"step":1,"default":8},{"id":1,"min":1,"max":100,"step":1,"default":5}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"opacity":{"min":0.2,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":0,"defaultColor":8},{"id":2,"name":"Lips","steps":[{"id":0,"min":1,"max":100,"step":1,"default":5},{"id":1,"min":1,"max":100,"step":1,"default":3}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"opacity":{"min":0.2,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":0,"defaultColor":0}]},{"name":"Aroon","category":1,"type":9,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":200,"step":1,"default":25}]},{"id":1,"name":"Up","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[0],"opacity":{"min":0.01,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":0,"defaultColor":7,"defaultHistogramColor":[0,8],"optional":true,"visibleDefault":true},{"id":2,"name":"Down","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[0],"opacity":{"min":0.01,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":0,"defaultColor":1,"defaultHistogramColor":[0,8],"optional":true,"visibleDefault":true}]},{"name":"BearsPower","category":1,"type":10,"config":[{"id":0,"name":"EMA period","steps":[{"id":0,"min":1,"max":60,"step":1,"default":13}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"lineStyles":[0,1,3],"opacity":{"min":0.01,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":8,"defaultHistogramColor":[0,8]}]},{"name":"BullsPower","category":1,"type":11,"config":[{"id":0,"name":"EMA period","steps":[{"id":0,"min":1,"max":60,"step":1,"default":13}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"lineStyles":[0,1,3],"opacity":{"min":0.01,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":0,"defaultHistogramColor":[0,8]}]},{"name":"CCI","category":1,"type":12,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":200,"step":1,"default":20}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"lineStyles":[0,1,2,3],"opacity":{"min":0.01,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":0,"defaultHistogramColor":[0,8]}]},{"name":"Rate of change","category":1,"type":15,"config":[{"id":0,"name":"Rate Of Change","steps":[{"id":0,"min":1,"max":200,"step":1,"default":14}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[0,3],"opacity":{"min":0.01,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":0,"defaultHistogramColor":[0,8]}]},{"name":"Detrended Price Oscillator","category":1,"type":17,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":100,"step":1,"default":21}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[0,3,1],"opacity":{"min":0.01,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":5,"defaultHistogramColor":[0,8]}]},{"name":"Williams %R","category":1,"type":18,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":60,"step":1,"default":14}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[0,1,2,3,4],"opacity":{"min":0.01,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":0,"defaultHistogramColor":[0,8]}]},{"name":"Gator","category":1,"type":19,"config":[{"id":0,"name":"Jaw","steps":[{"id":0,"min":1,"max":100,"step":1,"default":13},{"id":1,"min":1,"max":100,"step":1,"default":8}]},{"id":1,"name":"Teeth","steps":[{"id":0,"min":1,"max":100,"step":1,"default":8},{"id":1,"min":1,"max":100,"step":1,"default":5}]},{"id":2,"name":"Lips","steps":[{"id":0,"min":1,"max":100,"step":1,"default":5},{"id":1,"min":1,"max":100,"step":1,"default":3}]},{"id":3,"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[3,1,0],"opacity":{"min":0.2,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":0,"defaultHistogramColor":[0,8]},{"id":4,"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[3,1,0],"opacity":{"min":0.2,"max":1,"step":0.01,"default":1},"defaultLineStyle":3,"defaultColor":8,"defaultHistogramColor":[0,8]}]},{"name":"Average Directional Index","category":1,"type":20,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":100,"step":1,"default":14}]},{"id":1,"name":"ADX","lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"opacity":{"min":0.2,"max":1,"step":0.01,"default":0.5},"lineStyles":[0,3,1,2],"defaultLineStyle":0,"defaultColor":8,"defaultHistogramColor":[0,8],"optional":true,"visibleDefault":true},{"id":2,"name":"+DI","lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"lineStyles":[0,3,1,2],"defaultLineStyle":0,"defaultColor":7,"defaultHistogramColor":[0,8],"optional":true,"visibleDefault":true},{"id":3,"name":"-DI","lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"lineStyles":[0,3,1,2],"defaultLineStyle":0,"defaultColor":5,"defaultHistogramColor":[0,8],"optional":true,"visibleDefault":true}]},{"name":"AwesomeOscillator","category":1,"type":21,"config":[{"id":0,"name":"AwesomeOscillator","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"lineStyles":[0,1,3],"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":3,"defaultColor":2,"defaultHistogramColor":[0,8]}]},{"name":"Momentum","category":1,"type":16,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":200,"step":1,"default":14}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"lineStyles":[0,3,1,2],"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":0,"defaultColor":6,"defaultHistogramColor":[0,8]},{"id":1,"name":"Period2","steps":[{"id":0,"min":1,"max":200,"step":1,"default":9}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"lineStyles":[0,3,1,2],"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"defaultLineStyle":0,"defaultColor":1,"defaultHistogramColor":[0,8]}]},{"name":"ZigZag","category":0,"type":14,"config":[{"id":0,"name":"Depth","steps":[{"id":0,"min":1,"max":100,"step":1,"default":10}]},{"id":1,"name":"Deviation%","steps":[{"id":0,"min":1,"max":100,"step":1,"default":5}]},{"id":2,"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"defaultColor":5}]},{"name":"WMA","type":22,"category":0,"config":[{"id":0,"name":"Weighted Moving Average","steps":[{"id":0,"min":1,"max":365,"step":1,"default":20}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1.6},"defaultColor":0}]},{"name":"Bill Williams\' fractals","type":23,"category":0,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":365,"step":1,"default":2}]}]},{"name":"Stochastic RSI","category":1,"type":24,"config":[{"id":0,"name":"%K","steps":[{"id":0,"min":1,"max":100,"step":1,"default":3}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":8},{"id":1,"name":"%D","steps":[{"id":0,"min":1,"max":100,"step":1,"default":3}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":0},{"id":2,"name":"RSI Length","steps":[{"id":0,"min":1,"max":100,"step":1,"default":14}]},{"id":3,"name":"Stochastic Length","steps":[{"id":0,"min":1,"max":100,"step":1,"default":14}]}]},{"name":"Pivot Points","category":0,"type":25,"config":[{"id":0,"name":"Type","logicType":["Classic","Fibonacci","Camarilla","Woodie","DeMark"],"defaultLogicType":0},{"id":1,"name":"Period","logicType":["Day","Week","Month","Year"],"defaultLogicType":0},{"id":2,"name":"PP","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":3},{"id":3,"name":"R1","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":0},{"id":4,"name":"S1","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":0},{"id":5,"name":"R2","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":5},{"id":6,"name":"S2","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":5},{"id":7,"name":"R3","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":3},{"id":8,"name":"S3","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":3},{"id":9,"name":"R4","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":8},{"id":10,"name":"S4","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":8}]},{"name":"Inverse Bollinger","category":1,"type":26,"config":[{"id":0,"name":"SMA","steps":[{"id":0,"min":2,"max":365,"step":1,"default":20}],"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":4},{"id":1,"name":"Sigmas","optional":true,"visibleDefault":true},{"id":2,"name":"2σ","steps":[{"id":0,"min":1,"max":3,"step":0.1,"default":2}],"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"defaultColor":6,"blockedBy":1},{"id":3,"name":"3σ","steps":[{"id":0,"min":1,"max":3,"step":0.1,"default":3}],"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"defaultColor":8,"blockedBy":1}]},{"name":"Donchian Channel","category":0,"type":27,"config":[{"id":0,"name":"Period","steps":[{"id":0,"min":1,"max":200,"step":1,"default":20}]},{"id":1,"name":"Base line","lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"defaultColor":3},{"id":2,"name":"Top line","optional":true,"visibleDefault":true,"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"defaultColor":0},{"id":3,"name":"Bottom line","optional":true,"visibleDefault":true,"lineWidth":{"min":1,"max":5,"step":0.1,"default":1},"opacity":{"min":0.1,"max":1,"step":0.01,"default":0.5},"defaultColor":6},{"id":4,"name":"Fill area","opacity":{"min":0.1,"max":1,"step":0.01,"default":0.25},"defaultColor":4,"blockedBy":2}]},{"name":"Moon Phases Indicator","type":28,"category":0,"countOfInstancing":1,"config":[],"disableForCustomStrategy":true}]}');var x=s(3121),F=s(72155);const B="indicators",Z="oscillators";var U,H;!function(e){e[e.indicator=0]="indicator",e[e.oscillator=1]="oscillator"}(U||(U={})),function(e){e[e.limitOfAllIndicators=0]="limitOfAllIndicators",e[e.limitOfOscillators=1]="limitOfOscillators"}(H||(H={}));const G={0:{id:"indicators_menu_title_macd",defaultMessage:"MACD"},1:{id:"indicators_menu_title_parabolic",defaultMessage:"Parabolic"},2:{id:"indicators_menu_title_stochastic",defaultMessage:"Stochastic"},3:{id:"indicators_menu_title_sma",defaultMessage:"SMA"},4:{id:"indicators_menu_title_ema",defaultMessage:"EMA"},5:{id:"indicators_menu_title_rsi",defaultMessage:"RSI"},6:{id:"indicators_menu_title_bollinger",defaultMessage:"Bollinger Bands"},7:{id:"indicators_menu_title_ichimoku",defaultMessage:"Ichimoku Cloud"},8:{id:"indicators_menu_title_alligator",defaultMessage:"Alligator"},9:{id:"indicators_menu_title_aroon",defaultMessage:"Aroon"},10:{id:"indicators_menu_title_bearspower",defaultMessage:"Bears power"},11:{id:"indicators_menu_title_bullspower",defaultMessage:"Bulls power"},12:{id:"indicators_menu_title_cci",defaultMessage:"CCI"},13:{id:"indicators_menu_title_demarker",defaultMessage:"DeMarker"},14:{id:"indicators_menu_title_zig_zag",defaultMessage:"Zig Zag"},15:{id:"indicators_menu_title_rateofchange",defaultMessage:"Rate Of Change"},16:{id:"indicators_menu_title_momentum",defaultMessage:"Momentum"},17:{id:"indicators_menu_title_detrendedprice",defaultMessage:"Detrended Price Oscillator"},18:{id:"indicators_menu_title_williamsr",defaultMessage:"Williams %R"},19:{id:"indicators_menu_title_gator",defaultMessage:"Gator"},20:{id:"indicators_menu_title_adx",defaultMessage:"Average Directional Index"},21:{id:"indicators_menu_title_awesome",defaultMessage:"Awesome Oscillator"},22:{id:"indicators_menu_title_wma",defaultMessage:"WMA"},23:{id:"indicators_menu_title_bw_fractals",defaultMessage:"Bill Williams' Fractals"},24:{id:"indicators_menu_title_stochrsi",defaultMessage:"Stochastic RSI"},25:{id:"indicators_menu_title_pp",defaultMessage:"Pivot Points"},26:{id:"indicators_menu_title_ib",defaultMessage:"Inversion Bollinger"},27:{id:"indicators_menu_title_donchian",defaultMessage:"Donchian Channel"},28:{id:"indicators_menu_title_moon_phase",defaultMessage:"Moon Phases Indicator"}},V={23:"otp_indicator_bill_williams_fractals",24:"otp_indicator_stochastic_rsi",25:"otp_indicator_reversal_points",26:"otp_indicator_inverse_bollinger",28:"otp_indicator_moon"};function W(e,a){return e.map((e=>{let s,i;return e&&(e.steps&&(s=e.steps.map((e=>e.default)).join("/")),void 0!==e.defaultColor&&a[e.defaultColor]&&(i="#".concat(a[e.defaultColor]))),{periods:s,color:i}}))}function j(e,a){const s=(0,x.Z)(e,2),i=s[0],r=s[1];return[(0,D.Z)((0,I.Z)({},i),{steps:i.steps?[(0,D.Z)((0,I.Z)({},i.steps[0]),{default:a.sentiment})]:[]}),(0,D.Z)((0,I.Z)({},r),{steps:r.steps?[(0,D.Z)((0,I.Z)({},r.steps[0]),{default:100-a.sentiment})]:[]})]}const z={list:[],lineWidthSet:[1,3,5],availableLineColors:["1fbf75","ee9f07","fe4995","f47961","776bf8","edd502","235ff8","09e5d7","e1310f"],availableLineStyles:[{name:"curve",setting:"width"},{name:"area",setting:"opacity"},{name:"dots",setting:"width"},{name:"histogram",setting:"opacity"},{name:"centered",setting:"opacity"}],categories:{1:{id:1,name:"Advanced",icon:{raster_icons:{scale2x:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/advanced/24/scale2x.196375a8dc2024dc5871dbbbd644c9cb.png",scale3x:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/advanced/24/scale3x.80c56c65dcd3f4e3507fd55b74b3f472.png"},svg:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/advanced/svg.b59bce10ea57bf0d200b422e697dc7a6.svg"}},2:{id:2,name:"Starter",icon:{raster_icons:{scale2x:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/starter/24/scale2x.b25cf279d342b6f21d5bb28b63a93734.png",scale3x:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/starter/24/scale3x.eb59eb3e4515acf19919d6391a810402.png"},svg:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/starter/svg.804386ebb4e0b8d30b4b724cbf32f219.svg"}},3:{id:3,name:"Expert",icon:{raster_icons:{scale2x:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/expert/24/scale2x.44c59954f215f6624a953ff219d40d85.png",scale3x:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/expert/24/scale3x.a69d8df14657a1c85dfe3259e5a73af1.png"},svg:"https://cdn-nightly.devbox307.tech/assets1/levels/statuses/expert/svg.50ff93693366c63e79d945986b7b1a9a.svg"}},35:{id:35,name:"Marketplace",icon:{raster_icons:{scale2x:"https://cdn-nightly.devbox307.tech/assets1/strategies/categories/marketplace/24/scale2x.ec3d14d75ba78785ecfa09a27c569b11.png",scale3x:"https://cdn-nightly.devbox307.tech/assets1/strategies/categories/marketplace/24/scale3x.098244f98a462414960244927003ff8d.png"},svg:"https://cdn-nightly.devbox307.tech/assets1/strategies/categories/marketplace/svg.d353f9a66c54d0e98d5e7ca5836958bb.svg"}}},limitOfAllIndicators:20,limitOfOscillators:4},q={name:"Sentiment",type:99,category:0,config:[{id:0,name:"up",steps:[{min:1,max:100,step:1,default:50}],defaultColor:0},{id:1,name:"down",steps:[{min:1,max:100,step:1,default:50}],defaultColor:8}]};class IndicatorEditService extends O.t{addIndicator(e,a){const s=this.getState(),i=s.activeTradeFrameId,r=s.availableLineColors,n=s.data,o=this.getCurrentList();if(r){const s=this.listItemToEditItem(e,a);return i&&(s.config&&this.inputs.addIndicatorToChart(i,s.indicatorInstanceId,s.type,s.config,r),this.update({data:(0,D.Z)((0,I.Z)({},n),{[i]:(0,D.Z)((0,I.Z)({},n[i]),{list:[...o,s]})})}),this.actualizeSentiment(s.type),this.updateActiveInstruments(i),this.saveCache()),s}}listItemToEditItem(e,a){const s=this.getState(),i=s.activeTradeFrameId,r=s.availableLineColors,n=this.getCurrentList(),o=this.inputs.getSentiment().find((e=>e.tradeFrameId===i));return function(e,a,s,i,r,n){const o=i.find((a=>a.type===e.type)),l=(null==o?void 0:o.config)||void 0,c=n||l;return{id:(0,F.x0)(),indicatorInstanceId:s,type:e.type,position:a,title:e.title,name:e.name,viewType:e.viewType,config:c,chartTypes:e.chartTypes,previews:c?W(c,r):[]}}(e,this.inputs.getEditItemIncrement(),n.length?n[n.length-1].indicatorInstanceId+1:0,[...P.Kh,(0,D.Z)((0,I.Z)({},q),{config:o?j(q.config,o):q.config})],r,a)}removeActiveIndicator(){const e=this.getState().activeTradeFrameId,a=this.getActiveIndicator();a&&e&&(this.removeIndicator(a,e),this.inputs.goToTechAnalysis())}removeIndicatorById(e,a){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.getState(),r=i.data,n=i.activeTradeFrameId,o=a||n;if(!o)return;const l=r[o].list.find((a=>a.id===e));l&&(this.removeIndicator(l,o),s&&this.inputs.goToTechAnalysis())}removeIndicator(e,a){const s=this.getState().data;this.inputs.removeIndicatorFromChart(a,e.indicatorInstanceId,e.type),this.update({data:(0,D.Z)((0,I.Z)({},s),{[a]:(0,D.Z)((0,I.Z)({},s[a]),{list:s[a].list.filter((a=>a.id!==e.id))})})}),this.updateActiveInstruments(a),this.saveCache()}removeIndicatorByViewType(e){var a;const s=this.getState().activeTradeFrameId;s&&(null===(a=this.getList(s))||void 0===a||a.forEach((a=>{a.viewType===e&&this.removeIndicator(a,s)})))}removeAll(e){this.getList(e).forEach((a=>{this.removeIndicator(a,e)}))}resetActiveIndicatorConfig(){const e=this.getActiveIndicator();e&&this.resetIndicatorConfig(e)}resetIndicatorConfig(e){const a=this.getState(),s=a.activeTradeFrameId,i=a.availableLineColors,r=a.data,n=this.getDefaultIndicatorConfig(e.type);s&&n&&(this.inputs.removeIndicatorFromChart(s,e.indicatorInstanceId,e.type),this.inputs.addIndicatorToChart(s,e.indicatorInstanceId,e.type,n.config,i),this.update({data:(0,D.Z)((0,I.Z)({},r),{[s]:(0,D.Z)((0,I.Z)({},r[s]),{list:r[s].list.map((a=>a.id===e.id?(0,D.Z)((0,I.Z)({},a),{config:n.config,previews:W(n.config,i)}):a))})})}))}getCurrentList(){const e=this.getState().activeTradeFrameId;return this.getList(e)}getList(e){if(e){const a=this.getState().data;return a[e]?a[e].list:[]}return[]}getEnableList(e){if(e){const a=this.getState().data;return a[e]?a[e].list.filter((a=>!this.isDisabled(e,a))):[]}return[]}getCurrentSummary(){const e=this.getState(),a=e.activeTradeFrameId,s=e.data;if(a&&s[a]){return s[a].list.reduce(((e,a)=>(0,D.Z)((0,I.Z)({},e),{[a.type]:e[a.type]?{count:++e[a.type].count,viewType:a.viewType}:{count:1,viewType:a.viewType}})),{})}}handleLegendHoverOn(e,a){this.inputs.hoverIndicator(e,a,!0)}handleLegendHoverOff(e,a){this.inputs.hoverIndicator(e,a,!1)}setIndicatorForEdit(e){this.update({editIndicatorId:e})}getEditedIndicatorConfig(){const e=this.getState(),a=e.availableLineColors,s=e.availableLineStyles,i=this.getActiveIndicator();return i?{indicator:i,availableLineColors:a,availableLineStyles:s}:null}updateEditedIndicator(e,a){const s=this.getState(),i=s.availableLineColors,r=s.activeTradeFrameId,n=this.getActiveIndicator();n&&r&&(this.updateInstrumentConfig(e,a),this.inputs.updateInstrumentOnChart(r,n.indicatorInstanceId,e,a,i))}getActiveIndicator(){const e=this.getState(),a=e.editIndicatorId,s=e.data,i=e.activeTradeFrameId;if(!a||!i)return null;const r=s[i];if(!r)return null;const n=(0,I.Z)({},r.list.find((e=>e.id===a)));return n?(this.isSentiment(n)&&(n.config=[]),n):null}goToIndicatorEditForm(){this.inputs.goToIndicatorEditForm()}isDisabled(e,a){var s,i;if(!e)return!1;const r=null===(s=this.getState().data[e])||void 0===s?void 0:s.chartType;return!(void 0===r||!(null==a||null===(i=a.chartTypes)||void 0===i?void 0:i.length)||a.chartTypes.includes(r))}getDataForNewCustomStrategy(e){var a=this;return(0,i.Z)((function*(){const s=a.getState().availableLineColors,i=yield a.inputs.getMetaDataForStrategyPreset(e),r=a.getList(e);return(0,I.Z)({indicators:r.map((e=>({category:e.viewType,config:e.config||[],name:e.name,title:M.NW.formatMessage(e.title),type:e.type,countOfInstancing:0}))),mechanic:a.getMechanics(e),colors:s,tradeFrameId:e},i)}))()}updateInstrumentConfig(e,a){const s=this.getState(),i=s.editIndicatorId,r=s.data,n=s.activeTradeFrameId,o=s.availableLineColors;if(!i||!n)return;const l=(0,L.Z)(r);l[n].list=l[n].list.map((s=>{if(s.id===i){const i=s.config?s.config.map((s=>s.id===e?(0,I.Z)({},s,a):s)):[];return(0,D.Z)((0,I.Z)({},s),{config:i,previews:W(i,o)})}return s})),this.update({data:l}),this.saveCache()}init(){var e=this;return(0,i.Z)((function*(){if(!e.inputs.activeTradeFrameId)return;e.update({activeTradeFrameId:e.inputs.activeTradeFrameId});const a=e.inputs.getFrames();let s={};const i=e.invalidateDataByFrame(yield e.activeIndicatorsRepository.find(),a);a.forEach((a=>{s=(0,D.Z)((0,I.Z)({},s),{[a.id]:(0,D.Z)((0,I.Z)({},e.getDefaultDataItem(a)),{list:[]})}),i&&(i[a.id]=(0,D.Z)((0,I.Z)({},i[a.id]),{list:i[a.id].list}))})),i&&Object.keys(i).length?(e.update({data:i}),a.forEach((a=>{e.updateActiveInstruments(a.id,!0)}))):e.update({data:s}),e.addIndicatorsToChart(e.inputs.activeTradeFrameId)}))()}invalidateIndicatorsByChartType(e){if(e){const a=this.getState(),s=a.data,i=a.availableLineColors,r=s[e]?s[e].list.filter((e=>{var a;return!!(null==e||null===(a=e.chartTypes)||void 0===a?void 0:a.length)})):[];r.forEach((a=>{this.isDisabled(e,a)?this.inputs.removeIndicatorFromChart(e,a.indicatorInstanceId,a.type):a.config&&this.inputs.addIndicatorToChart(e,a.indicatorInstanceId,a.type,a.config,i)}))}}addIndicatorsToChart(e){const a=this.getEnableList(e),s=this.getState().availableLineColors;a.forEach((a=>{a.config&&e&&(this.inputs.addIndicatorToChart(e,a.indicatorInstanceId,a.type,a.config,s),this.actualizeSentiment(a.type))}))}actualizeSentiment(e){e===q.type&&this.inputs.getSentiment().forEach((e=>{this.updateSentiment(e)}))}updateActiveInstruments(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){const s={[U.indicator]:B,[U.oscillator]:Z};[U.indicator,U.oscillator].forEach((i=>{var r;this.inputs.updateActiveInstruments(e,s[i],null===(r=this.getEnableList(e))||void 0===r?void 0:r.filter((e=>e.viewType===i)).map((e=>({id:e.id,type:s[i],position:e.position}))),a)}))}}invalidateDataByFrame(e,a){if(e&&a&&a.length){let s={};return a.forEach((a=>{var i;s=(0,D.Z)((0,I.Z)({},s),{[a.id]:(0,D.Z)((0,I.Z)({},this.getDefaultDataItem(a),e[a.id]),{mechanic:a.mechanic,chartType:null==a||null===(i=a.meta)||void 0===i?void 0:i.chartType})})})),s}}getDefaultDataItem(e){var a;return{list:[],mechanic:e.mechanic,chartType:null==e||null===(a=e.meta)||void 0===a?void 0:a.chartType}}saveCache(){this.activeIndicatorsRepository.save(this.getState().data)}getDefaultIndicatorsConfig(){return[...P.Kh]}getDefaultIndicatorConfig(e){return this.getDefaultIndicatorsConfig().find((a=>a.type===e))}getMechanics(e){var a;return(null===(a=this.inputs.getFrames().find((a=>a.id===e)))||void 0===a?void 0:a.mechanic)||"ftt"}isSentiment(e){return"Sentiment"===e.name}constructor(e,a,s){super({activeTradeFrameId:s.activeTradeFrameId,data:{},limitOfAllIndicators:0,limitOfOscillators:0,availableLineColors:[],availableLineStyles:[],lineWidthSet:[]}),this.indicatorsRepository=e,this.activeIndicatorsRepository=a,this.inputs=s;var r=this;this.load=this.createTask((0,i.Z)((function*(){const e=yield r.indicatorsRepository.find();e&&(r.update({availableLineColors:e.availableLineColors,limitOfAllIndicators:e.limitOfAllIndicators,limitOfOscillators:e.limitOfOscillators,availableLineStyles:e.availableLineStyles,lineWidthSet:e.lineWidthSet}),yield r.init())})),{strategy:O.T.once}),this.validateByViewType=e=>{const a=this.getState(),s=a.limitOfAllIndicators,i=a.limitOfOscillators,r=this.getCurrentList();if(r){if(r.length+1>s)return{code:H.limitOfAllIndicators,value:s};if(e===U.oscillator){return r.reduce(((e,a)=>a.viewType===U.oscillator?e+1:e),0)+1>i?{code:H.limitOfOscillators,value:i}:void 0}}},this.updateActiveTradeFrameId=e=>{this.update({activeTradeFrameId:e})},this.updateFrames=e=>{const a=this.getState().data;this.update({data:this.invalidateDataByFrame(a,e)}),e.forEach((e=>{var s;const i=a&&a[e.id];(null==i?void 0:i.mechanic)!==e.mechanic&&this.addIndicatorsToChart(e.id),(null==i?void 0:i.chartType)!==(null==e||null===(s=e.meta)||void 0===s?void 0:s.chartType)&&this.invalidateIndicatorsByChartType(e.id)})),e.forEach((e=>{this.updateActiveInstruments(e.id)})),this.saveCache()},this.updateSentiment=e=>{if(e){const a=this.getList(e.tradeFrameId),s=this.getState(),i=s.data,r=s.availableLineColors;let n=!1;const o=a.map((a=>{if(a.type===q.type){const s=j(q.config,e);return n=!0,(0,D.Z)((0,I.Z)({},a),{previews:W(s,r),config:s})}return a}));n&&e.tradeFrameId&&i[e.tradeFrameId]&&(this.inputs.updateSentimentOnChart(e.tradeFrameId,e.sentiment),this.update({data:(0,D.Z)((0,I.Z)({},i),{[e.tradeFrameId]:(0,D.Z)((0,I.Z)({},i[e.tradeFrameId]),{list:[...o]})})}))}}}}class IndicatorsRepository{find(){return(0,i.Z)((function*(){const e=P.Kh.map(((e,a)=>{const s=G[e.type],i=23===e.type||25===e.type?[N.oX.candles]:[];return{id:e.type,type:e.type,name:e.name,title:s,available:!0,category:1,description:null,viewType:e.category,countOfInstancing:2,position:a,chartTypes:i}}));return e.push({id:q.type,type:q.type,name:"Sentiment",title:{id:"indicators_menu_title_sentiment",defaultMessage:"Sentiment"},available:!0,category:1,description:null,viewType:U.indicator,countOfInstancing:1,position:e.length,chartTypes:[]}),Promise.resolve((0,D.Z)((0,I.Z)({},z),{list:e}))}))()}}var K=s(57615),Y=s(29042);class ActiveIndicatorsRepository{find(){const e=this.storage.get("data");return(null==e?void 0:e.content)&&1===e.version?Promise.resolve(e.content):Promise.resolve(void 0)}save(e){return this.storage.set("data",{content:e,version:1}),Promise.resolve()}constructor(){this.storage=new K._({namespace:"indicator-edit-service",backend:new Y.u})}}const X=e=>{let a=e.list,s=e.activeIndicatorSummaryItem,i=e.isValidByTotalCount,n=e.chartType,o=e.onClick;return r.createElement(r.Fragment,null,a.map((e=>{const a=s&&void 0!==s[e.type]?s[e.type]:{count:0,type:0},l=!(e.available&&i)||!(!a.count||e.type!==q.type)||!(!e.chartTypes.length||void 0===n||e.chartTypes.includes(n));return r.createElement(m.H_,{id:e.id,count:a.count,disabled:l,key:e.id,title:r.createElement(v._,Object.assign({},e.title)),contentAfter:l&&r.createElement(m.Y1,null),onClick:o})})))};X.displayName="IndicatorList";const J="gCVWxOlo",Q="_IVYAQYk",$="c_IOwjZb",ee="DCSmhhMX",te="SWwYC2g_",ae="GgZR7Tey",se=e=>{let a=e.previews;return r.createElement("div",{className:J},a.map(((e,a)=>r.createElement("div",{className:Q,key:a,"data-test":"tech-analysis-active-indicator-preview"},a>0&&r.createElement("div",{key:a,className:$},"•"),e.color&&r.createElement("div",{className:ee},r.createElement("div",{className:te,style:{background:e.color}})),e.periods&&r.createElement("span",{className:ae,style:{color:e.color||"none"}},e.periods)))))};se.displayName="IndicatorPreview";const ie=e=>{let a=e.id,s=e.viewTypeTitle,i=e.title,n=e.previews,o=e.onClose,l=e.onClick;const c=r.useCallback((()=>{l(a)}),[a,l]),d=r.useCallback((()=>{o(a)}),[a,o]);return r.createElement(m.A7,{headerTitle:s,title:i,onClick:c,onClose:d,content:n&&r.createElement(se,{previews:n})})};ie.displayName="ActiveIndicatorItem";var re=s(47450);function ne(e,a){const s=(0,re.O)(e);if(s&&s[1]){const e=new RegExp(s[1],"i");return a.filter((a=>e.test(a.name)))}return null}var oe=s(63967),le=s(46124),ce=s(76232),de=s(30559),ue=s(17302),me=s(60042),pe=s.n(me),he=s(37488),ve=s(87601);const ge="ELa8skqJ",_e=e=>{let a=e.stepId,s=e.step,i=e.onChange;const n=(0,r.useCallback)((e=>{const r=(0,L.Z)(s);r.default=e,i(a,r)}),[s,i,a]);return r.createElement(m.GY.Step,{className:ge,min:s.min,max:s.max,value:s.default,step:s.step,onChange:n})};_e.displayName="StepInput";const fe=e=>{let a=e.steps,s=e.onChange,i=e.itemId;const n=(0,r.useCallback)(((e,r)=>{const n=(0,L.Z)(a)||[];n[e]=r,s(i,{steps:n})}),[i,a,s]);return r.createElement("div",null,a.map(((e,a)=>r.createElement(_e,{stepId:a,key:a,step:e,onChange:n}))))};fe.displayName="StepsForm";const Ee="ksWsa77L",Se="x9F3sUDQ",ye=e=>{let a=e.item,s=e.lineStylesConfig,i=e.availableLineColors,n=e.availableLineWidths,o=e.onChange;const l=(0,r.useCallback)((e=>{o(a.id,{defaultLineStyle:e})}),[a,o]),c=(0,r.useCallback)((e=>{o(a.id,{defaultColor:e})}),[a,o]),d=(0,r.useCallback)((e=>{o(a.id,{lineWidth:(0,D.Z)((0,I.Z)({},a.lineWidth),{default:e})})}),[a]),u=!(void 0===a.lineStyles||a.lineStyles.length<2);if(u&&void 0===a.defaultColor&&void 0===a.lineWidth)return null;const p=s[a.defaultLineStyle||0];return r.createElement("div",{className:Ee,"data-test":"techanalysis-indicator-form-popup-content"},u&&r.createElement("div",{className:Se},r.createElement(m.GY.LineStylePicker,{avalibleLineStyles:a.lineStyles,value:a.defaultLineStyle||0,lineStylesConfig:s,onChange:l})),void 0!==a.lineWidth&&"width"===p.setting&&r.createElement("div",{className:Se},r.createElement(m.GY.LineWidthPicker,{availableLineWidths:n,value:a.lineWidth.default,onChange:d})),void 0!==a.defaultColor&&r.createElement("div",{className:Se},r.createElement(m.GY.ColorPicker,{value:i[a.defaultColor],availableLineColors:i,onChange:c})))};ye.displayName="LineStyleForm";const be="MgvANKxS",Ce="_Bj19fKz",Te="wbkO7Lyx",Ae="XuTfEpo7",ke="FbnspV8y",we="Mr96IR3k",Ne=e=>{let a=e.item,s=e.availableLineColors,i=e.lineStylesConfig,n=e.availableLineWidths,o=e.onChange;const l=(0,he.useMediaQuery)({maxWidth:ve.j$.BREAKPOINT_768}),c=s[a.defaultColor||0];return r.createElement(m.GY.LineStyleForm,{content:r.createElement(ye,{item:a,availableLineColors:s,availableLineWidths:n,lineStylesConfig:i,onChange:o}),placement:l?"top-start":"bottom-start"},(e=>r.createElement(m.GY.ConfigButton,{activeFocus:e},r.createElement(m.GY.ColorCircle,{color:"#".concat(c)}))))},Re=e=>{let a=e.item,s=e.onChange;var i;const n=r.useCallback((e=>{s(a.id,{defaultLogicType:Number(e)})}),[a,s]);return a.logicType?r.createElement("div",{className:we},r.createElement(ue.Ph,{placeholder:a.name,value:(null===(i=a.defaultLogicType)||void 0===i?void 0:i.toString())||"0",fullWidth:!0,onChange:n},a.logicType.map(((e,a)=>r.createElement(ue.Ph.Option,{key:a,label:e,value:a.toString()}))))):null},Ie=e=>{let a=e.item,s=e.availableLineColors,i=e.lineStylesConfig,n=e.onChange,o=e.availableLineWidths;const l=void 0!==a.defaultColor||void 0!==a.defaultLineStyle,c=a.visibleDefault||void 0===a.visibleDefault;return r.createElement("div",{className:pe()(be,{[Ae]:!c}),"data-test":"indicatorFormContent"},r.createElement("div",{className:Te},r.createElement("div",{className:Ce,"data-test":"instrumentElementTitle"},a.optional&&r.createElement(m.GY.LineVisibility,{itemId:a.id,visibleDefault:c,onChange:n}),a.name),l&&r.createElement(Ne,{item:a,availableLineColors:s,lineStylesConfig:i,availableLineWidths:o,onChange:n})),a.steps&&r.createElement("div",{className:ke},r.createElement(fe,{itemId:a.id,steps:a.steps,onChange:n})),a.logicType&&r.createElement(Re,{item:a,onChange:n}))};Ie.displayName="EditFormContent";const De=(0,ce.t)(),Oe=()=>{var e,a;const s=(0,oe.G)(IndicatorEditService),i=(0,le.k)(De,null),n=(0,r.useCallback)(((e,a)=>{s.updateEditedIndicator(e,a)}),[s]);if(!i)return null;const o=i.indicator.title,l=i.availableLineColors,c=i.availableLineStyles,d=i.availableLineWidths;return r.createElement(m.GY,null,r.createElement(m.GY.Header,{"data-test":"indicatorsFormHeader"},r.createElement(de.Z,Object.assign({},o))),null===(e=i.indicator.config)||void 0===e?void 0:e.map((e=>r.createElement(Ie,{key:e.id,availableLineColors:l,item:e,lineStylesConfig:c,availableLineWidths:d,onChange:n}))),r.createElement(ue.xu,{gap:"s",padding:["l",0,0,0]},r.createElement(ue.zx,{variant:"secondary",fullWidth:!0,color:"negative",onClick:s.removeActiveIndicator,dataTest:"indicatorsFormRemove"},r.createElement(de.Z,{id:"indicator_settings_remove_action",defaultMessage:"Remove"})),Boolean(null===(a=i.indicator.config)||void 0===a?void 0:a.length)&&r.createElement(ue.zx,{fullWidth:!0,onClick:s.resetActiveIndicatorConfig,dataTest:"indicatorsFormReset"},r.createElement(de.Z,{id:"indicator_settings_set_default_action",defaultMessage:"Reset"}))))};Oe.displayName="EditorForm";const Le="Dz1Wzby9",Me=e=>{let a=e.children;return r.createElement("div",{className:Le,"data-test":"techanalysis-push-content-wrapper"},a)};Me.displayName="PushContentWrapper";class IndicatorProxyService extends O.t{addIndicator(e,a){const s=this.indicatorListService.getState().list.find((a=>a.type===e));s&&this.indicatorEditService.addIndicator(s,a)}removeAllIndicators(e){this.indicatorEditService.removeAll(e)}getIndicatorList(e){return this.indicatorEditService.getList(e)}getAvailableLineColors(){return this.indicatorEditService.getState().availableLineColors}getCustomStrategyData(){var e=this;return(0,i.Z)((function*(){const a=e.indicatorEditService.getState().activeTradeFrameId;return a?e.indicatorEditService.getDataForNewCustomStrategy(a):null}))()}constructor(e,a){super(),this.indicatorListService=e,this.indicatorEditService=a,this.addIndicator=this.addIndicator.bind(this)}}const Pe=(0,s(18985).vU)({indicatorLimitExceededTitle:{id:"indicators_add_new_item_limit_title",defaultMessage:"Indicator Limit Exceeded"},oscillatorLimitExceededTitle:{id:"oscillator_limit_exceeded_title",defaultMessage:"Oscillator Limit Exceeded"},chartTypeTitle:{id:"indicators_not_available_for_current_chart_type_title",defaultMessage:"Use Another Chart Type"},higherStatusRequiredTitle:{id:"indicators_advanced_expert_status_availability_title",defaultMessage:"Higher Status Required"},viewActiveInstrumentsAction:{id:"indicators_show_active_instruments",defaultMessage:"View Active Instruments"},upgradeStatusAction:{id:"indicators_level_up_user_status",defaultMessage:"Upgrade Status"},chartTypeAction:{id:"indicators_change_chart_type",defaultMessage:"Change Chart Type"},instrumentsLimitDescription:{id:"indicators_max_count_for_adding_info",defaultMessage:"{value, plural, =0 { You can use up to # instruments simultaneously. Remove some active instruments to add new ones. } one { You can use up to # instrument simultaneously. Remove some active instruments to add new ones. } other { You can use up to # instruments simultaneously. Remove some active instruments to add new ones. }}"},onlyOneIndicatorDescription:{id:"indicators_add_new_item_limit_info",defaultMessage:"You can have only 1 {name} indicator on the chart"},indicatorForAdvancedExpertDescription:{id:"indicators_advanced_expert_status_availability_info",defaultMessage:"This indicator is available to traders with Advanced or Expert status"},oscillatorForAdvancedExpertDescription:{id:"oscillators_advanced_expert_status_availability_info",defaultMessage:"This oscillator is available to traders with Advanced or Expert status"},indicatorChartTypeDescription:{id:"indicators_not_available_for_current_chart_type_info",defaultMessage:"This indicator doesn’t work with this chart type"},oscillatorChartTypeDescription:{id:"oscillators_not_available_for_current_chart_type_info",defaultMessage:"This oscillator doesn’t work with this chart type"}});(0,u.Z)();const xe=r.lazy((()=>Promise.resolve().then(s.bind(s,96038)).then((e=>({default:e.InstrumentEditLayout})))));function Fe(e,a,s,i,r){void 0!==s.steps&&i.api.indicatorsApi.setIndicatorsPeriods(e,a,s.steps.map((e=>e.default)),s.steps.length),void 0!==s.lineWidth&&i.api.indicatorsApi.setIndicatorsWidth(e,a,s.lineWidth.default,1),void 0!==s.defaultColor&&i.api.indicatorsApi.setIndicatorsColor(e,a,r[s.defaultColor],1),void 0!==s.opacity&&i.api.indicatorsApi.setIndicatorsOpacity(e,a,s.opacity.default,1),void 0!==s.defaultLineStyle&&i.api.indicatorsApi.setIndicatorsStyle(e,a,s.defaultLineStyle),void 0!==s.visibleDefault&&i.api.indicatorsApi.setIndicatorsActive(e,a,s.visibleDefault),void 0!==s.defaultLogicType&&i.api.indicatorsApi.setIndicatorsType(e,a,s.defaultLogicType)}const Be=(0,o.v)({name:"Indicators",dependsOn:[l.u$,E.y,w.x,N.Kg,b.G,k.Z],services(e,a){const s=new IndicatorListService(a.indicatorsRepository,{checkIndicatorInFeatureToggle:a=>{const s=V[a];return e.commonLegacyServiceList.featureToggleService.getFeatureValue(s)}}),r=new IndicatorEditService(a.indicatorsRepository,a.activeIndicatorsRepository,{activeTradeFrameId:e.techAnalysisService.getActiveTradeFrameId(),updateActiveInstruments:e.techAnalysisService.updateActiveInstruments,addIndicatorToChart:(a,s,i,r,n)=>{(0,f.Ps)(a,e.tradeManagerServiceList).then((e=>{i===q.type?(e.em.api.indicatorsApi.switchSentiment(!0),e.setHasSentiment(!0)):(e.em.api.indicatorsApi.addIndicatorById(s,i),r.forEach(((a,i)=>{Object.keys(a).forEach((r=>{const o=a[r];Fe(s,i,{[r]:o},e.em,n)}))})))}))},updateSentimentOnChart(a,s){(0,f.Ps)(a,e.tradeManagerServiceList).then((e=>{e.em.api.indicatorsApi.setSentiment(s)}))},removeIndicatorFromChart:(a,s,i)=>{(0,f.Ps)(a,e.tradeManagerServiceList).then((e=>{i===q.type?(e.em.api.indicatorsApi.switchSentiment(!1),e.setHasSentiment(!1)):e.em.api.indicatorsApi.removeIndicator(s)}))},hoverIndicator:(a,s,i)=>{(0,f.Ps)(a,e.tradeManagerServiceList).then((e=>{e.em.api.indicatorsApi.hoverIndicator(s,i)}))},getFrames:()=>e.tradeManagerServiceList.getFrames(),getEditItemIncrement:()=>e.techAnalysisService.getEditItemIncrement(),getSentiment:()=>e.tradeManagerServiceList.getSentiment(),updateInstrumentOnChart:(a,s,i,r,n)=>{(0,f.Ps)(a,e.tradeManagerServiceList).then((e=>{Fe(s,i,r,e.em,n)}))},goToTechAnalysis:()=>{e.techAnalysisService.goToTechAnalysis()},getDefaultInstrumentConfig:e=>s.getState().list.find((a=>a.id===e)),goToIndicatorEditForm(){e.commonLegacyServiceList.sideBarService.goToMinor(C.KO.INDICATORS_EDIT)},getMetaDataForStrategyPreset:a=>(0,i.Z)((function*(){const s=yield(0,f.Ps)(a,e.tradeManagerServiceList),i=e.tradeManagerServiceList.getFrames().find((e=>e.id===a));let r="bo";i&&(r="ftt"===i.mechanic?"bo":i.mechanic);const n=s.tradeFrameService.selectedRate;return{chartType:R.tA[n.format||T.C.LINE],timeframe:n.step,project:r}}))()});return e.tradeManagerServiceList.emitter.on("updateFrames",r.updateFrames),e.tradeManagerServiceList.emitter.on("updateSentiment",r.updateSentiment),e.techAnalysisService.emitter.on("activeTradeFrameId",r.updateActiveTradeFrameId),(0,n.reaction)((()=>({23:e.commonLegacyServiceList.featureToggleService.getFeatureValue(y.gC.OTP_INDICATOR_BILL_WILLIAMS_FRACTALS),24:e.commonLegacyServiceList.featureToggleService.getFeatureValue(y.gC.OTP_INDICATOR_STOCHASTIC_RSI),25:e.commonLegacyServiceList.featureToggleService.getFeatureValue(y.gC.OTP_INDICATOR_REVERSAL_POINTS),26:e.commonLegacyServiceList.featureToggleService.getFeatureValue(y.gC.OTP_INDICATOR_INVERSE_BOLLINGER),28:e.commonLegacyServiceList.featureToggleService.getFeatureValue(y.gC.OTP_INDICATOR_MOON)})),(e=>{s.updateAvailable(e)})),e.techAnalysisService.emitter.on("searchText",(e=>{s.setSearchText(e)})),{indicatorListService:s,indicatorEditService:r,indicatorProxyService:new IndicatorProxyService(s,r)}}},{repositories:()=>({indicatorsRepository:new IndicatorsRepository,activeIndicatorsRepository:new ActiveIndicatorsRepository}),publicApi:e=>({indicatorProxyService:e.indicatorProxyService})});Be.use(f.rb,((e,a,s)=>{const n=s.indicatorListService.getState(),o=n.list,l=n.categories,d=n.searchText,u=s.indicatorEditService.getState(),m=u.data,_=u.activeTradeFrameId,E=_&&m[_]?m[_].chartType:void 0,S=(0,c.Z)(o,(e=>e.viewType)),y=s.indicatorEditService.getCurrentSummary(),b=function(e){let a=0,s=0;return e&&Object.keys(e).forEach((i=>{const r=Number(i),n=e[r];n.viewType===U.indicator?a+=n.count:s+=n.count})),{indicators:a,oscillators:s}}(y),C=e=>{const a=o.find((a=>a.id===e));if(a){var n;const e=a.viewType===U.indicator,o=s.indicatorEditService.validateByViewType(a.viewType);if(a.type===q.type&&(null==y||null===(n=y[a.type])||void 0===n?void 0:n.count))return void s.inAppMessageService.addMessage(r.createElement(Me,null,r.createElement(v._,Object.assign({},Pe.onlyOneIndicatorDescription,{values:{name:r.createElement(v._,{id:"indicators_menu_title_sentiment",defaultMessage:"Sentiment"})}}))),r.createElement(v._,Object.assign({},Pe.indicatorLimitExceededTitle)),r.createElement(v._,Object.assign({},Pe.viewActiveInstrumentsAction)),(()=>{s.techAnalysisService.goToActiveInstruments()}));if(void 0!==o)return void s.inAppMessageService.addMessage(r.createElement(v._,Object.assign({},Pe.instrumentsLimitDescription,{values:{value:o.value}})),e?r.createElement(v._,Object.assign({},Pe.indicatorLimitExceededTitle)):r.createElement(v._,Object.assign({},Pe.oscillatorLimitExceededTitle)),r.createElement(v._,Object.assign({},Pe.viewActiveInstrumentsAction)),(()=>{s.techAnalysisService.goToActiveInstruments()}));if(!a.available)return void s.inAppMessageService.addMessage(e?r.createElement(v._,Object.assign({},Pe.indicatorForAdvancedExpertDescription)):r.createElement(v._,Object.assign({},Pe.oscillatorForAdvancedExpertDescription)),r.createElement(v._,Object.assign({},Pe.higherStatusRequiredTitle)),r.createElement(v._,Object.assign({},Pe.upgradeStatusAction)),(()=>{s.commonLegacyServiceList.sideBarService.goTo(A.KO.MARKET_PLACE_CATEGORIES)}));if(a.chartTypes.length&&void 0!==E&&!a.chartTypes.includes(E))return void s.inAppMessageService.addMessage(e?r.createElement(v._,Object.assign({},Pe.indicatorChartTypeDescription)):r.createElement(v._,Object.assign({},Pe.oscillatorChartTypeDescription)),r.createElement(v._,Object.assign({},Pe.chartTypeTitle)),r.createElement(v._,Object.assign({},Pe.chartTypeAction)),(0,i.Z)((function*(){if(_){const e=yield s.tradeManagerServiceList.getTradeFrameService(_),a=yield s.tradeManagerServiceList.getFrameService(_,g.CHART_STORE);if(e&&a){const s=e.getRateByFormat("candle");s&&a.zoomService.selectRateById(s.id)}}})));s.indicatorEditService.addIndicator(a)&&(s.tradeManagerServiceList.getTradeFrameService(s.indicatorEditService.getState().activeTradeFrameId||"").then((e=>{e&&(0,h.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"add_indicator/".concat(a.name),eventLabel:"".concat(e.selectedPair.group,"/").concat(e.selectedPair.id)})})),s.techAnalysisService.goToActiveInstruments())}},T=[];if(S&&S[0]){const e=d?ne(d,S[0]):S[0];e&&T.push({count:e.length,activeCount:b.indicators,accordionItemId:B,icon:r.createElement(p.Dlp,null),title:r.createElement(v._,{id:"indicators",defaultMessage:"Indicators"}),list:r.createElement(X,{list:e,categories:l,chartType:E,isValidByTotalCount:void 0===s.indicatorEditService.validateByViewType(U.indicator),activeIndicatorSummaryItem:y,onClick:C}),position:f.Cf.indicator})}if(S&&S[1]){const e=d?ne(d,S[1]):S[1];e&&T.push({count:e.length,activeCount:b.oscillators,accordionItemId:Z,type:B,icon:r.createElement(p.u9m,null),title:r.createElement(v._,{id:"oscillators",defaultMessage:"Oscillators"}),list:r.createElement(X,{list:e,categories:l,chartType:E,isValidByTotalCount:void 0===s.indicatorEditService.validateByViewType(U.oscillator),activeIndicatorSummaryItem:y,onClick:C}),position:f.Cf.oscillator})}return[...e,...T]})),Be.use(f.MR,((e,a,s)=>{const i=s.indicatorEditService.getState().activeTradeFrameId,n=i?s.indicatorEditService.getEnableList(i):[],o=e=>{s.indicatorEditService.removeIndicatorById(e)},l=e=>{s.indicatorEditService.setIndicatorForEdit(e),s.indicatorEditService.goToIndicatorEditForm()};return n&&n.length?[...e,...n.map((e=>({position:e.position,id:e.id,component:r.createElement(ie,{id:e.id,viewTypeTitle:e.viewType===U.indicator?r.createElement(v._,{id:"chart_settings_indicator_title",defaultMessage:"Indicator"}):r.createElement(v._,{id:"chart_settings_oscillator_title",defaultMessage:"Oscillator"}),title:r.createElement(v._,Object.assign({},e.title)),previews:e.previews,onClick:l,onClose:o})})))]:e})).use(f.dT,((e,a,s)=>{const i=s.indicatorEditService.getCurrentList(),n=null==i?void 0:i.reduce(((e,a)=>(a.viewType===U.indicator?e.indicators++:e.oscillator++,e)),{indicators:0,oscillator:0}),o=e=>{if([B,Z].includes(e))switch(e){case B:s.indicatorEditService.removeIndicatorByViewType(U.indicator);break;case Z:s.indicatorEditService.removeIndicatorByViewType(U.oscillator)}};return[...e,...(null==n?void 0:n.indicators)?[{icon:r.createElement(p.Dlp,null),title:r.createElement(v._,{id:"indicators",defaultMessage:"Indicators"}),count:(null==n?void 0:n.indicators)||0,type:B,position:f.Cf.indicator,onRemove:o}]:[],...(null==n?void 0:n.oscillator)?[{icon:r.createElement(p.u9m,null),title:r.createElement(v._,{id:"oscillators",defaultMessage:"Oscillators"}),count:(null==n?void 0:n.oscillator)||0,type:Z,position:f.Cf.oscillator,onRemove:o}]:[]]})).use(f.SU,((e,a,s)=>{const i=s.indicatorEditService.getState().activeTradeFrameId,n=s.indicatorEditService.getEnableList(a.tradeFrameId),o=e=>{s.techAnalysisService.setActiveTradeFrameId(a.tradeFrameId),s.indicatorEditService.setIndicatorForEdit(e),s.indicatorEditService.goToIndicatorEditForm()},l=e=>{s.indicatorEditService.removeIndicatorById(e,a.tradeFrameId,i===a.tradeFrameId&&s.techAnalysisService.isTechAnalysisSidebarActive())},c=e=>{const i=n.find((a=>a.id===e));i&&s.indicatorEditService.handleLegendHoverOn(a.tradeFrameId,i.indicatorInstanceId)},d=e=>{const i=n.find((a=>a.id===e));i&&s.indicatorEditService.handleLegendHoverOff(a.tradeFrameId,i.indicatorInstanceId)};return n&&n.length?[...e,...n.map((e=>({id:e.id,position:e.position,component:r.createElement(m.vf,{key:e.id,id:e.id,title:r.createElement(v._,Object.assign({},e.title)),onClickEdit:o,onClickRemove:l,onMouseEnter:c,onMouseLeave:d,details:e.previews&&r.createElement(se,{previews:e.previews})})})))]:e})).use(S.editIndicatorSlot,(()=>r.createElement(Oe,null))).use(De,((e,a,s)=>{const i=s.indicatorEditService.getState(),r=i.availableLineColors,n=i.availableLineStyles,o=i.lineWidthSet,l=s.indicatorEditService.getActiveIndicator();return l?{indicator:l,availableLineColors:r,availableLineStyles:n,availableLineWidths:o}:null})).use((0,C.FW)(C.KO.INDICATORS_EDIT),{component:()=>r.createElement(xe,null),loader:()=>r.createElement(_.it,null)}),Be.enable((0,i.Z)((function*(){return yield(0,d.ic)(g.UI_SERVICE),!0}))).onStart((e=>{let a=e.indicatorListService,s=e.indicatorEditService;return Promise.all([a.load(),s.load()])}))},96038:(e,a,s)=>{"use strict";s.r(a),s.d(a,{InstrumentEditLayout:()=>c,editIndicatorSlot:()=>l});var i=s(27378),r=s(84584),n=s(2050);const o="NrhF4kwL",l=(0,r.Z)(),c=()=>{const e=(0,n.x)(l);return i.createElement("div",{className:o},e)};c.displayName="InstrumentEditLayout"},71003:(e,a,s)=>{"use strict";s.d(a,{x:()=>c});var i=s(29257),r=s(13243),n=s(6680),o=s(26763),l=s(534);const c=(0,r.v)({name:"commonServices",services:()=>({commonLegacyServiceList:new l.r({sidebarService:(0,n.Sc)(o.SIDEBAR_SERVICE),uiService:(0,n.Sc)(o.UI_SERVICE),soundService:(0,n.Sc)(o.SOUND_SERVICE),featureToggleService:(0,n.Sc)(o.FEATURE_TOGGLE_SERVICE),accountService:(0,n.Sc)(o.ACCOUNT_SERVICE),noticeService:(0,n.Sc)(o.NOTICE_SERVICE),timeService:(0,n.Sc)(o.TIME_SERVICE)})})},{publicApi:e=>e}).enable((0,i.Z)((function*(){return yield(0,n.ic)(o.SIDEBAR_SERVICE),yield(0,n.ic)(o.UI_SERVICE),yield(0,n.ic)(o.SOUND_SERVICE),yield(0,n.ic)(o.FEATURE_TOGGLE_SERVICE),yield(0,n.ic)(o.ACCOUNT_SERVICE),yield(0,n.ic)(o.NOTICE_SERVICE),yield(0,n.ic)(o.TIME_SERVICE),!0})))},61681:(e,a,s)=>{"use strict";s.d(a,{G:()=>f});var i=s(29257),r=s(27378),n=s(13243),o=s(27544),l=s(6680),c=s(95601),d=s(26763),u=s(73304),m=s(64305),p=s(23680),h=s(13424),v=s(72185),g=s(58367),_=s(26257);const f=(0,n.v)({name:"PlatformLegacy",dependsOn:[c.u$,_.Bu],services:()=>({appService:(0,o.T)(d.APP_SERVICE,p.z),sidebarService:(0,o.T)(d.SIDEBAR_SERVICE,h.G),tradeManagerService:(0,o.T)(d.TRADE_MANAGER_SERVICE,v.S)})},{publicApi:e=>e});f.use(c.NR,(()=>r.createElement(r.Fragment,null,r.createElement(u.n,{ContentWrapper:g.y}),r.createElement(m.I,{ContentWrapper:g.y})))).enable((0,i.Z)((function*(){return yield(0,l.ic)(d.APP_SERVICE),yield(0,l.ic)(d.SIDEBAR_SERVICE),yield(0,l.ic)(d.TRADE_MANAGER_SERVICE),!0})))},534:(e,a,s)=>{"use strict";s.d(a,{r:()=>CommonLegacyServiceList});var i=s(7223);class CommonLegacyServiceList extends i.t{constructor(e){let a=e.sidebarService,s=e.uiService,i=e.soundService,r=e.featureToggleService,n=e.accountService,o=e.noticeService,l=e.timeService;super(),this.sideBarService=a,this.uiService=s,this.soundService=i,this.featureToggleService=r,this.accountService=n,this.noticeService=o,this.timeService=l}}},38817:(e,a,s)=>{"use strict";s.d(a,{K:()=>TradingLegacyServiceList});var i=s(7223);class TradingLegacyServiceList extends i.t{constructor(e){let a=e.dealServiceBo,s=e.dealServiceFx,i=e.pairServiceBo,r=e.pairServiceFx,n=e.dealDetailsServiceBo,o=e.dealDetailsServiceFx,l=e.assetMenuService;super(),this.dealServiceBo=a,this.dealServiceFx=s,this.pairServiceBo=i,this.pairServiceFx=r,this.dealDetailsServiceBo=n,this.dealDetailsServiceFx=o,this.dealDetailsServiceFx=o,this.assetMenuService=l}}},5182:(e,a,s)=>{"use strict";s.d(a,{K:()=>c});var i=s(29257),r=s(13243),n=s(6680),o=s(26763),l=s(38817);const c=(0,r.v)({name:"tradingLegacyServices",services:()=>({tradingLegacyServiceList:new l.K({dealServiceBo:(0,n.Sc)(o.DEAL_SERVICE_BO),dealServiceFx:(0,n.Sc)(o.DEAL_SERVICE_FX),pairServiceBo:(0,n.Sc)(o.PAIR_SERVICE_BO),pairServiceFx:(0,n.Sc)(o.PAIR_SERVICE_FX),dealDetailsServiceBo:(0,n.Sc)(o.DEAL_DETAILS_SERVICE_BO),dealDetailsServiceFx:(0,n.Sc)(o.DEAL_DETAILS_SERVICE_FX),assetMenuService:(0,n.Sc)(o.ASSET_MENU_SERVICE)})})},{publicApi:e=>e}).enable((0,i.Z)((function*(){return yield(0,n.ic)(o.DEAL_SERVICE_BO),yield(0,n.ic)(o.DEAL_SERVICE_FX),yield(0,n.ic)(o.PAIR_SERVICE_BO),yield(0,n.ic)(o.PAIR_SERVICE_FX),yield(0,n.ic)(o.DEAL_DETAILS_SERVICE_BO),yield(0,n.ic)(o.DEAL_DETAILS_SERVICE_FX),yield(0,n.ic)(o.ASSET_MENU_SERVICE),!0})))},13954:(e,a,s)=>{"use strict";s.d(a,{j:()=>o});var i=s(13243),r=s(13748),n=s(12266);const o=(0,i.v)({name:"Locale",services:(e,a)=>({locale:new r.O(a.locale)})},{repositories:()=>({locale:new n.R}),publicApi:e=>e});o.onStart((e=>e.locale.load()))},45917:(e,a,s)=>{"use strict";s.d(a,{R:()=>LocaleRepository});var i=s(29257),r=s(30654);class LocaleRepository{find(){return(0,i.Z)((function*(){try{return(yield r.$.userValues(["options"])).options.lang}catch(e){return(yield r.$.platformValues(["current_locale"])).current_locale}}))()}findAll(){return(0,i.Z)((function*(){return(yield r.$.platformValues(["locales"])).locales}))()}update(e){return(0,i.Z)((function*(){yield r.g.setLocale({locale:e})}))()}}},12266:(e,a,s)=>{"use strict";s.d(a,{R:()=>i.R});var i=s(45917)},41766:(e,a,s)=>{"use strict";s.d(a,{O:()=>LocaleService});var i=s(29257),r=s(3121),n=s(7223),o=s(26323),l=s(33801);class LocaleService extends n.t{constructor(e){super({locale:o.ZW,list:[o.ZW]},{onStart:()=>{this.getLocale.doneData.subscribe((e=>e&&this.update({locale:e}))),this.getLocalesList.doneData.subscribe((e=>e&&this.update({list:e}))),this.changeLocale.done.subscribe((e=>{e&&(l.C.load({locale:e.params,isForceLoad:!0}),window.location.reload())}))}}),this.repository=e,this.getLocalesList=this.createTask((()=>this.repository.findAll())),this.getLocale=this.createTask((()=>this.repository.find()));var a=this;this.load=this.createTask((0,i.Z)((function*(){const e=(0,r.Z)(yield Promise.all([a.getLocale(),a.getLocalesList()]),2);return{locale:e[0],list:e[1]}})));var s,n=this;this.changeLocale=this.createTask((s=(0,i.Z)((function*(e){return n.repository.update(e)})),function(e){return s.apply(this,arguments)}))}}},13748:(e,a,s)=>{"use strict";s.d(a,{O:()=>i.O});var i=s(41766)},18545:(e,a,s)=>{"use strict";s.d(a,{CD:()=>u,EB:()=>l,Im:()=>c,SJ:()=>o,V8:()=>v,X5:()=>m,YA:()=>g,hM:()=>h,j3:()=>p,yV:()=>d,ys:()=>n});var i=s(37323),r=s(18985);const n=(0,i.Z)({MARKET_PLACE_CATEGORIES:"marketPlaceCategories",MARKET_PLACE_CATEGORY:"marketPlaceCategory",MARKET_PLACE_INVENTORY:"marketPlaceInventory",MARKET_PLACE_DETAILS:"marketPlaceDetails",MARKET_PLACE_SALE:"marketPlaceSale",MARKET_PLACE_SET:"marketPlaceSet",MARKET_PLACE_PUBLISHED_FEATURES:"marketPlacePublishedFeatures"},{MARKET_PLACE_GOOD_PURCHASE_MAIN:"marketPlaceGoodPurchaseMain",MARKET_PLACE_GOOD_PURCHASE_FAKE:"marketPlaceFakeFeaturePurchase",MARKET_PLACE_GOOD_PURCHASE_PERIODS:"marketPlaceSubscriptionPeriods",MARKET_PLACE_GOOD_PURCHASE_ONCE:"marketPlacePurchase",MARKET_PLACE_GOOD_PURCHASE_SUBSCRIPTION:"marketPlaceSubscriptionPurchase",MARKET_PLACE_GOOD_PURCHASE_TRIAL:"marketPlacePurchaseTrial",MARKET_PLACE_GOOD_PURCHASE_SUCCESS:"marketPlaceSuccess",MARKET_PLACE_GOOD_PURCHASE_AUTO_RENEWAL:"marketPlaceAutoRenewal"}),o={MARKET_PLACE:"marketPlace"},l={TW:"TW",MP:"MP"},c={ONCE:"once",SUBSCRIPTION_30_DAYS:"monthly"},d=["ru","en","ar","vi","id","es","ms","pt","th","fr"],u="2",m="web",p={CATEGORIES:{categoryId:"37"},PUBLISHED_FEATURES:{categoryId:"custom-strategies"}},h=(0,r.vU)({once:{id:"mp_once",defaultMessage:"One-time Purchase"},monthly:{id:"monthly-subs",defaultMessage:"1 Month"},"3months":{id:"3months-subs",defaultMessage:"3 Months"},"6months":{id:"6months-subs",defaultMessage:"6 Months"},yearly:{id:"yearly-subs",defaultMessage:"12 Months"}}),v={autoRenewal:"BDS3GXL",feature:"VJ7H7FT"};var g;!function(e){e.FREE="FREE",e.TRIAL="TRIAL",e.ONCE="ONCE",e.SUBSCRIBE="SUBSCRIBE"}(g||(g={}))},16332:(e,a,s)=>{"use strict";s.d(a,{tp:()=>o,KL:()=>l.KL,UE:()=>n.UE});var i=s(27378),r=s(18545),n=s(66511);const o=()=>({marketPlace:{rootId:r.ys.MARKET_PLACE_CATEGORIES,items:[{id:r.ys.MARKET_PLACE_CATEGORIES,title:i.createElement(n.vB,null),renderHeaderActions:e=>i.createElement(n.Wo,{props:e}),component:e=>i.createElement(n.qf,{props:e})},{id:r.ys.MARKET_PLACE_CATEGORY,title:i.createElement(n.zS,null),renderHeaderImage:e=>i.createElement(n.mF,{props:e}),component:e=>i.createElement(n.Kc,{props:e}),renderBack:e=>i.createElement(n.DO,{props:e}),renderClose:e=>i.createElement(n.Pg,{props:e})},{id:r.ys.MARKET_PLACE_SALE,title:i.createElement(n.X5,null),renderHeaderImage:e=>i.createElement(n.c1,{props:e}),component:e=>i.createElement(n.UX,{props:e})},{id:r.ys.MARKET_PLACE_SET,title:i.createElement(n.uZ,null),renderHeaderImage:e=>i.createElement(n.o9,{props:e}),component:e=>i.createElement(n.QK,{props:e})},{id:r.ys.MARKET_PLACE_INVENTORY,title:null,renderHeader:e=>i.createElement(n.Ll,{props:e}),component:e=>i.createElement(n.fq,{props:e})},{id:r.ys.MARKET_PLACE_DETAILS,title:null,renderHeaderActions:e=>i.createElement(n.RL,{props:e}),component:e=>i.createElement(n.MG,{props:e})},{id:r.ys.MARKET_PLACE_PUBLISHED_FEATURES,title:i.createElement(n.Mq,null),component:e=>i.createElement(n.qj,{props:e}),renderHeaderActions:e=>i.createElement(n.dL,{props:e})},...n.P1.screens]}});var l=s(41164)},66511:(e,a,s)=>{"use strict";s.d(a,{Wo:()=>ce,qf:()=>de,vB:()=>le,DO:()=>Ee,Pg:()=>Se,mF:()=>_e,Kc:()=>fe,zS:()=>ge,RL:()=>we,MG:()=>Ne,Ll:()=>he,fq:()=>ve,dL:()=>pe,qj:()=>me,Mq:()=>ue,c1:()=>be,UX:()=>Ce,X5:()=>ye,o9:()=>Ae,QK:()=>ke,uZ:()=>Te,P1:()=>Re,UE:()=>Ie});var i=s(29257),r=s(27378),n=s(13243),o=s(95601),l=s(42709),c=s(21182),d=s(6680),u=s(60521),m=s(14282),p=s(77740),h=s(83714),v=s(28046),g=s(23735),_=s(26763),f=s(74199),E=s(82844),S=s(7265),y=s(8275),b=s(61681),C=s(55121),T=s(35295),A=s(18121),k=s(18545),w=s(53720),N=s(75620),R=s(39211);class FeatureTransformer{static parseAll(e){return e.map((e=>FeatureTransformer.parse(e)))}static parse(e){return{id:e.id,uid:e.uid,name:e.name,author:FeatureTransformer.parseAuthor(e.author),purchases:e.purchases,category:e.category,imgUrl:e.icon_url,rating:e.rating,platforms:e.platforms,ownership:(null==e?void 0:e.ownership)?FeatureTransformer.parseOwnership(e.ownership):null,paymentTypes:FeatureTransformer.parseAllPaymentTypes(e.payment_types)}}static parseAuthor(e){return e?{id:e.id,name:e.name}:null}static parseOwnership(e){return{activeTill:(null==e?void 0:e.active_till)||0,source:e.source,purchaseInfo:(null==e?void 0:e.purchase_info)?FeatureTransformer.parsePurchaseInfo(e.purchase_info):null}}static parsePaymentTypes(e){return{currency:e.currency,discount:e.discount?{amount:e.discount.amount,endAt:(null==e?void 0:e.discount.end_at)||0,originalPrice:e.discount.original_price,type:e.discount.type}:null,nextBillingDate:e.next_billing_date||0,price:e.price,type:e.type}}static parseAllPaymentTypes(e){return e.map((e=>FeatureTransformer.parsePaymentTypes(e)))}static parsePurchaseInfo(e){return{activeTill:(null==e?void 0:e.active_till)||0,allowNextPayment:e.allow_next_payment,nextBillingDate:(null==e?void 0:e.next_billing_date)||0,type:e.type,accountId:e.account_id}}}class DetailsTransformer{static parse(e){var a;return{uid:e.uid,name:e.name,category:e.category,rating:e.rating,userRating:null!==(a=e.rating_info.user)&&void 0!==a?a:0,imgUrl:e.icon_url,description:e.description,purchases:e.purchases,author:FeatureTransformer.parseAuthor(e.author),purchaseInfo:(null==e?void 0:e.purchase_info)&&FeatureTransformer.parsePurchaseInfo(e.purchase_info),fake:e.fake,platforms:e.platforms,mechanics:DetailsTransformer.parseMechanics(e.mechanics_info),trial:DetailsTransformer.parseTrial(e.trial),paymentTypes:FeatureTransformer.parseAllPaymentTypes(e.payment_types),screenshots:DetailsTransformer.parseScreenshots(e.screenshots),video:e.videos.find((e=>e.platform===k.X5))||null,ownership:e.ownership?FeatureTransformer.parseOwnership(e.ownership):null,linkWeb:e.link_web?e.link_web:null,link:e.link||null}}static parseScreenshots(e){return e.filter((e=>e.platform===k.X5)).map((e=>({url:e.url,orientation:e.orientation})))}static parseTrial(e){return e?{nextBillingDate:(null==e?void 0:e.next_billing_date)||0,period:e.period}:null}static parseMechanics(e){return e?e.filter((e=>e.available)).map((e=>e.title)):[]}}class InventoryTransformer{static isFeatureInventory(e){var a,s,i,r,n;const o=new Date;return(null===(a=e.ownership)||void 0===a?void 0:a.source)===k.EB.TW&&Boolean((null===(s=e.ownership)||void 0===s?void 0:s.active_till)&&new Date(1e3*(null===(i=e.ownership)||void 0===i?void 0:i.active_till))>o)||(null===(r=e.ownership)||void 0===r?void 0:r.purchase_info)&&e.ownership.purchase_info.type===k.Im.ONCE||Boolean((null===(n=e.ownership)||void 0===n?void 0:n.active_till)&&new Date(1e3*e.ownership.active_till)>o)}static parseAll(e){return FeatureTransformer.parseAll(e.filter((e=>InventoryTransformer.isFeatureInventory(e))))}}class PaginationTransformer{static parse(e){return{limit:e.limit,page:e.page,pages:e.pages,records:e.records}}}class CategoriesRepository{findAll(){return(0,i.Z)((function*(){const e=(yield R.g.getMarketplaceCategories()).data;return class CategoriesTransformer{static parseAll(e){return e.map((e=>this.parse(e)))}static parse(e){return{uid:e.uid,name:e.name,description:e.desc,url:(null==e?void 0:e.banner_url)?e.banner_url[k.CD]:null}}}.parseAll(e)}))()}}class CategoryDetailsRepository{find(e){return(0,i.Z)((function*(){const a=yield R.g.getMarketplaceCategory({category_uid:e});return class CategoryTransformer{static parse(e){const a=(null==e?void 0:e.banner_url)?e.banner_url[k.CD]:null,s=e.features.filter((e=>e.platforms.includes(k.X5))).map((e=>FeatureTransformer.parse(e)))||[];return{uid:e.uid,name:e.name,description:e.desc,features:s,url:a}}}.parse(a)}))()}}class FeaturesRepository{findAll(){return(0,i.Z)((function*(){const e=(yield R.g.getMarketplaceFeatures()).data;return FeatureTransformer.parseAll(e)}))()}find(e){return(0,i.Z)((function*(){const a=yield R.g.getMarketplaceFeatureDetails({uid:e});return DetailsTransformer.parse(a)}))()}}class InventoryRepository{findAll(){return(0,i.Z)((function*(){const e=(yield R.g.getMarketplaceFeatures()).data;return InventoryTransformer.parseAll(e)}))()}}class PurchaseRepository{findAll(){throw new Error("Method not implemented.")}buyFeature(e){return(0,i.Z)((function*(){yield R.g.buyMarketplaceFeature(e)}))()}cancelNextPurchase(e){return(0,i.Z)((function*(){yield R.g.cancelNextMarketplacePurchase({uid:e})}))()}}class HotRepository{find(){return(0,i.Z)((function*(){const e=yield R.g.getMarketplaceHot();return class HotTransformer{static parse(e){let a=e.sales,s=e.sets;return{sales:a.map((e=>this.parseSale(e))),sets:s.map((e=>this.parseSet(e)))}}static parseSale(e){var a;return{backgroundColor:e.background_color?"#".concat(e.background_color):"",url:(null==e?void 0:e.banner_url)?e.banner_url[k.CD]:null,endAt:null!==(a=e.end_at)&&void 0!==a?a:null,description:e.desc,uid:e.uid,name:e.title}}static parseSet(e){return{backgroundColor:e.background_color?"#".concat(e.background_color):"",url:(null==e?void 0:e.banner_url)?e.banner_url[k.CD]:null,description:e.desc,uid:e.uid,name:e.title}}}.parse(e)}))()}}class SaleRepository{find(e){return(0,i.Z)((function*(){const a=yield R.g.getMarketplaceSale({sale_uid:e});return class SaleTransformer{static parse(e){const a=(null==e?void 0:e.banner_url)?e.banner_url[k.CD]:null,s=e.features.filter((e=>e.platforms.includes(k.X5))).map((e=>FeatureTransformer.parse(e)))||[];var i;return{uid:e.uid,name:e.title,description:e.desc,backgroundColor:e.background_color?"#".concat(e.background_color):"",endAt:null!==(i=e.end_at)&&void 0!==i?i:null,features:s,url:a}}}.parse(a)}))()}}class SetRepository{find(e){return(0,i.Z)((function*(){const a=yield R.g.getMarketplaceSet({uid:e});return class SetTransformer{static parse(e){const a=(null==e?void 0:e.banner_url)?e.banner_url[k.CD]:null,s=e.features.filter((e=>e.platforms.includes(k.X5))).map((e=>FeatureTransformer.parse(e)))||[];return{uid:e.uid,name:e.title,description:e.desc,backgroundColor:e.background_color?"#".concat(e.background_color):"",features:s,url:a}}}.parse(a)}))()}}class PublishedFeaturesRepository{findAll(){throw new Error("Method not implemented.")}findPage(e){return(0,i.Z)((function*(){const a=yield R.g.getMyPublishedFeatures(e);return{features:FeatureTransformer.parseAll(a.features),pagination:PaginationTransformer.parse(a.pagination_info)}}))()}findSummary(){return(0,i.Z)((function*(){const e=yield R.g.getMyPublishedFeaturesSummary();return class PublishedFeaturesSummaryTransformer{static parse(e){return{proceedsUsd:e.proceeds_usd,totalPublished:e.total_published,totalSold:e.total_sold}}}.parse(e)}))()}}class RatingRepository{save(e){let a=e.featureUid,s=e.rating;return(0,i.Z)((function*(){yield R.g.rateFeature({rating:s,feature_uid:a})}))()}}const I=r.lazy((()=>s.e(8422).then(s.bind(s,38422)).then((e=>({default:e.CategoriesHeaderActions}))))),D=r.lazy((()=>s.e(1934).then(s.bind(s,91934)).then((e=>({default:e.CategoriesTitle}))))),O=r.lazy((()=>Promise.resolve().then(s.bind(s,6536)).then((e=>({default:e.CategoriesPanel}))))),L=r.lazy((()=>s.e(4378).then(s.bind(s,34378)).then((e=>({default:e.CategoryHeaderImage}))))),M=r.lazy((()=>s.e(6768).then(s.bind(s,96768)).then((e=>({default:e.CategoryFeatures}))))),P=r.lazy((()=>s.e(5383).then(s.bind(s,55383)).then((e=>({default:e.Inventory}))))),x=r.lazy((()=>s.e(8572).then(s.bind(s,58572)).then((e=>({default:e.PanelTitle}))))),F=r.lazy((()=>s.e(5582).then(s.bind(s,75582)).then((e=>({default:e.DetailsPanel}))))),B=r.lazy((()=>s.e(2801).then(s.bind(s,82801)).then((e=>({default:e.DetailsHeaderActions}))))),Z=r.lazy((()=>s.e(5157).then(s.bind(s,60349)).then((e=>({default:e.SaleHeaderImage}))))),U=r.lazy((()=>s.e(9755).then(s.bind(s,9755)).then((e=>({default:e.SaleFeatures}))))),H=r.lazy((()=>s.e(6450).then(s.bind(s,26450)).then((e=>({default:e.SetHeaderImage}))))),G=r.lazy((()=>s.e(459).then(s.bind(s,80459)).then((e=>({default:e.SetFeatures}))))),V=r.lazy((()=>s.e(6444).then(s.bind(s,16444)).then((e=>({default:e.HeaderButton}))))),W=r.lazy((()=>s.e(7204).then(s.bind(s,67204)).then((e=>({default:e.PublishedFeaturesPanel}))))),j=r.lazy((()=>s.e(3576).then(s.bind(s,83576)).then((e=>({default:e.PubllishedFeaturesTitle}))))),z=r.lazy((()=>s.e(1447).then(s.bind(s,91447)).then((e=>({default:e.PublishedFeaturesHeaderActions})))));const q=s(66804).Z.modal,K=r.lazy((()=>s.e(2125).then(s.bind(s,52125)).then((e=>({default:e.ScreenshotModal}))))),Y=r.memo((e=>r.createElement(r.Suspense,{fallback:null},r.createElement(K,Object.assign({},e)))));Y.displayName="FeatureSharingModal";var X=s(58952);const J=(0,X.WV)({deeplink_action:(0,X.t$)("marketplace"),featureUid:X.Ld.optional(),categoryUid:X.Ld.optional(),saleUid:X.Ld.optional(),setUid:X.Ld.optional()});var Q=s(89786),$=s(93021),ee=s(1922);const te=(0,l.g)(),ae=(0,l.g)(),se=(0,l.g)(),ie=(0,l.g)(),re=(0,l.g)(),ne=(0,l.g)(),oe=(0,l.g)(),le=(0,c.W)(te(y.KO.MARKET_PLACE_CATEGORIES)),ce=(0,c.W)(ae(y.KO.MARKET_PLACE_CATEGORIES)),de=(0,c.W)(oe(y.KO.MARKET_PLACE_CATEGORIES)),ue=(0,c.W)(te(y.KO.MARKET_PLACE_PUBLISHED_FEATURES)),me=(0,c.W)(oe(y.KO.MARKET_PLACE_PUBLISHED_FEATURES)),pe=(0,c.W)(ae(y.KO.MARKET_PLACE_PUBLISHED_FEATURES)),he=(0,c.W)(se(y.KO.MARKET_PLACE_INVENTORY)),ve=(0,c.W)(oe(y.KO.MARKET_PLACE_INVENTORY)),ge=(0,c.W)(te(y.KO.MARKET_PLACE_CATEGORY)),_e=(0,c.W)(ie(y.KO.MARKET_PLACE_CATEGORY)),fe=(0,c.W)(oe(y.KO.MARKET_PLACE_CATEGORY)),Ee=(0,c.W)(re(y.KO.MARKET_PLACE_CATEGORY)),Se=(0,c.W)(ne(y.KO.MARKET_PLACE_CATEGORY)),ye=(0,c.W)(te(y.KO.MARKET_PLACE_SALE)),be=(0,c.W)(ie(y.KO.MARKET_PLACE_SALE)),Ce=(0,c.W)(oe(y.KO.MARKET_PLACE_SALE)),Te=(0,c.W)(te(y.KO.MARKET_PLACE_SET)),Ae=(0,c.W)(ie(y.KO.MARKET_PLACE_SET)),ke=(0,c.W)(oe(y.KO.MARKET_PLACE_SET)),we=(0,c.W)(ae(y.KO.MARKET_PLACE_DETAILS)),Ne=(0,c.W)(oe(y.KO.MARKET_PLACE_DETAILS)),Re=(0,T.JH)({screenIds:{MAIN:y.KO.MARKET_PLACE_GOOD_PURCHASE_MAIN,ONCE:y.KO.MARKET_PLACE_GOOD_PURCHASE_ONCE,SUBSCRIPTION:y.KO.MARKET_PLACE_GOOD_PURCHASE_SUBSCRIPTION,PERIOD:y.KO.MARKET_PLACE_GOOD_PURCHASE_PERIODS,AUTO_RENEWAL:y.KO.MARKET_PLACE_GOOD_PURCHASE_AUTO_RENEWAL,FAKE:y.KO.MARKET_PLACE_GOOD_PURCHASE_FAKE,SUCCESS:y.KO.MARKET_PLACE_GOOD_PURCHASE_SUCCESS,TRIAL:y.KO.MARKET_PLACE_GOOD_PURCHASE_TRIAL},analyticEvents:{deposit:e=>({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_make_deposit_click",eventLabel:String(e)}),purchase:e=>({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_make_deposit_click",eventLabel:String(e)}),fakeSubscribe:e=>({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_subscribe_click",eventLabel:String(e)}),selectPaymentPeriod:e=>({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"select_subscription_duration",eventLabel:e}),successOnce:e=>({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_payment_success",eventLabel:String(e)}),successSubscription:e=>({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_subscr_success",eventLabel:String(e)}),successTrial:e=>({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_trial_success",eventLabel:String(e)})}}),Ie=(0,n.v)({name:"Marketplace",dependsOn:[m.F0,o.u$,b.G,h.e8,A.Z,S.EA,v.l],services(e,a){let s=e.sidebarService,n=e.timeService,o=e.inAppMessageService,l=e.commandService,c=e.user,m=a.categories,p=a.category,h=a.inventory,v=a.features,f=a.purchase,S=a.sale,b=a.hot,T=a.set,A=a.rating,R=a.publishedFeatures;const I=(0,d.Sc)(_.PROFILE_SERVICE),D=(0,d.Sc)(_.LANGUAGE_SERVICE),O=(0,d.Sc)(_.NAVIGATION_SERVICE),L=(0,d.Sc)(_.ACCOUNT_SERVICE),M=new N.G(m,p,h,{goToHelp(){var e;null==O||null===(e=O.ovlPlusNavigation)||void 0===e||e.goToHelpCenter(k.j3.CATEGORIES)},goToInventory(){s.goTo(y.KO.MARKET_PLACE_INVENTORY)},goToCategory(){s.goTo(y.KO.MARKET_PLACE_CATEGORY)}}),P=new $.$(R,{goToPublishedFeatures(){s.goTo(y.KO.MARKET_PLACE_PUBLISHED_FEATURES)},goToHelp(){var e;null==O||null===(e=O.ovlPlusNavigation)||void 0===e||e.goToHelpCenter(k.j3.PUBLISHED_FEATURES)}}),x=new Q.F(b,S,T,v,n,{goToSale(){s.goTo(y.KO.MARKET_PLACE_SALE)},goToSet(){s.goTo(y.KO.MARKET_PLACE_SET)},showSpecialOfferExpiredMessage(){o.addMessage(r.createElement(E._,{id:"marketplace_special_offer_end_description",defaultMessage:"Sorry, with the end of the special offer, prices have returned to the original."}),r.createElement(E._,{id:"marketplace_special_offer_end_title",defaultMessage:"Special Offer has Ended"}))}}),F=c.getState().user.id,B=new w.A(F,v,f,n,{subscribeToUser(e){c.subscribe((a=>{let s=a.user;return e(s.id)}))},subscribeToSelectedAccount(e){(0,u.reaction)((()=>null==L?void 0:L.selectedAccount),(a=>{if(!L||!a)return;let s,i;const r=L.accountsList.filter((e=>(e.type===C.Q5.REAL||e.type===C.Q5.SOFT)&&"open"===e.status));if(a.currencyName!==C.Q5.DEMO)i=a.id,s=a.currencyName;else{const e=r[0];i=null==e?void 0:e.id,s=(null==e?void 0:e.currencyName)||L.currencyDefault||"usd"}e(s,i,r)}),{fireImmediately:!0})},subscribeToAccountsChange(e){null==L||L.accountsList.forEach((a=>(0,u.observe)(a,(s=>{"update"===s.type&&e(a.id,{[s.name]:s.newValue})}))))},selectAccount(e){null==L||L.api.setAccountById(e)},goToBuyGood(){s.goTo(Re.SCREEN_ID.MAIN)},goToDetails(){s.goTo(y.KO.MARKET_PLACE_DETAILS)},goToFeature:(e,a)=>(0,i.Z)((function*(){e&&(yield null==O?void 0:O.tryOpenDeepLink(e,!0))||a&&(yield l.resolveCommand(a))}))(),openSurvey(e,a){const s=null==D?void 0:D.locale.split(/[_-]/g)[0],i=k.yV.includes(s)&&s||"en";window.open("https://surveymonkey.com/r/".concat(k.V8[a],"?user_id=").concat(I.id,"&feature_id=").concat(e,"&lang=").concat(i),"_blank")},finishFeatureDiscount(){x.showSpecialOfferExpiredMessage();const e=s.getState().sideBarMajor.scope.stack.map((e=>e.id)).includes(y.KO.MARKET_PLACE_SALE);e&&s.getState().sideBarMajor.replaceStack([y.KO.MARKET_PLACE_DETAILS])}}),Z=new ee.V(A,{showRateMessage(){o.addMessage(r.createElement(E._,{id:"marketplace_feature_rating_success_message",defaultMessage:"Your rating will be added in 24 hours"}),r.createElement(E._,{id:"marketplace_feature_rating_success_title",defaultMessage:"Thanks for Your Feedback"}))},updateUserRating(e,a){B.updateUserRating(e,a)}});return Re.setHandlers({onSelectAccount:e=>B.selectAccount(e),onSuccessfullyCompletePurchaseFlow:e=>B.goToDetails(e),onRechargeAccount:(e,a)=>null==O?void 0:O.navigation.goToDeposit({amount:a}),onBuyGood:e=>{let a=e.id,s=e.accountId,i=e.paymentType,r=e.resubscribe,n=e.trial;return B.buyFeature(a,s,i,r,n)},onCancelSubscription:e=>{B.openSurvey(e,"autoRenewal"),B.cancelNextPurchase(e)},onSendAnalytics:e=>{let a=e.id,s=e.data;return(0,g.L)({event:"".concat(null==s?void 0:s.event),eventCategory:"".concat(null==s?void 0:s.eventCategory),eventAction:a,eventLabel:"".concat(null==s?void 0:s.eventLabel)})}}),{marketPlaceService:B,categoriesService:M,hotService:x,publishedFeaturesService:P,ratingService:Z}}},{repositories:()=>({categories:new CategoriesRepository,category:new CategoryDetailsRepository,inventory:new InventoryRepository,features:new FeaturesRepository,purchase:new PurchaseRepository,sale:new SaleRepository,hot:new HotRepository,set:new SetRepository,publishedFeatures:new PublishedFeaturesRepository,rating:new RatingRepository}),publicApi:e=>e});var De;Ie.use(te(y.KO.MARKET_PLACE_CATEGORIES),{component:()=>r.createElement(D,null)}).use(ae(y.KO.MARKET_PLACE_CATEGORIES),{component:()=>r.createElement(I,null)}).use(oe(y.KO.MARKET_PLACE_CATEGORIES),{component:()=>r.createElement(O,null),loader:()=>r.createElement(f.zo,null)}).use(se(y.KO.MARKET_PLACE_INVENTORY),{component:()=>r.createElement(x,{type:"inventory"})}).use(oe(y.KO.MARKET_PLACE_INVENTORY),{component:(e,a)=>{let s=a.categoriesService,i=a.marketPlaceService;return r.createElement(P,{marketPlaceService:i,categoriesService:s})},loader:()=>r.createElement(f.zo,null)}).use(te(y.KO.MARKET_PLACE_PUBLISHED_FEATURES),{component:()=>r.createElement(j,null)}).use(oe(y.KO.MARKET_PLACE_PUBLISHED_FEATURES),{component:()=>r.createElement(W,null),loader:()=>r.createElement(f.zo,null)}).use(ae(y.KO.MARKET_PLACE_PUBLISHED_FEATURES),{component:()=>r.createElement(z,null)}).use(te(y.KO.MARKET_PLACE_CATEGORY),{component:(e,a)=>{let s=a.categoriesService;var i;return r.createElement(r.Fragment,null,null===(i=s.store.getState().selectedCategory)||void 0===i?void 0:i.name)}}).use(ie(y.KO.MARKET_PLACE_CATEGORY),{component:(e,a)=>{let s=a.categoriesService;return r.createElement(L,{selectedCategory:s.store.getState().selectedCategory})}}).use(oe(y.KO.MARKET_PLACE_CATEGORY),{component:(e,a)=>{let s=a.categoriesService,i=a.marketPlaceService;return r.createElement(M,{marketPlaceService:i,categoriesService:s})},loader:()=>r.createElement(f.zo,null)}).use(re(y.KO.MARKET_PLACE_CATEGORY),{component:e=>{let a=e.className,s=e.onBack;return r.createElement(V,{className:a,type:"back",onClick:s})}}).use(ne(y.KO.MARKET_PLACE_CATEGORY),{component:e=>{let a=e.className,s=e.onClose;return r.createElement(V,{className:a,type:"close",onClick:s})}}).use(te(y.KO.MARKET_PLACE_SALE),{component:(e,a)=>{let s=a.hotService;var i;return r.createElement(r.Fragment,null,null===(i=s.store.getState().selectedSale)||void 0===i?void 0:i.name)}}).use(ie(y.KO.MARKET_PLACE_SALE),{component:()=>r.createElement(Z,null)}).use(oe(y.KO.MARKET_PLACE_SALE),{component:()=>r.createElement(U,null),loader:()=>r.createElement(f.zo,null)}).use(te(y.KO.MARKET_PLACE_SET),{component:(e,a)=>{let s=a.hotService;var i;return r.createElement(r.Fragment,null,null===(i=s.store.getState().selectedSet)||void 0===i?void 0:i.name)}}).use(ie(y.KO.MARKET_PLACE_SET),{component:()=>r.createElement(H,null)}).use(oe(y.KO.MARKET_PLACE_SET),{component:()=>r.createElement(G,null),loader:()=>r.createElement(f.zo,null)}).use(oe(y.KO.MARKET_PLACE_DETAILS),{component:(e,a)=>{let s=a.marketPlaceService;return r.createElement(F,{marketPlaceService:s})},loader:()=>r.createElement(f.zo,null)}).use(ae(y.KO.MARKET_PLACE_DETAILS),{component:()=>r.createElement(B,null)}).use(o.eM,((e,a,s)=>(e.push({id:y.KO.MARKET_PLACE,title:{id:"sidebar_menu_title_marketplace",defaultMessage:"Market"},selected:s.sidebarService.getMajorActiveScope()===y.KO.MARKET_PLACE,dataTest:"sidebar-btn-terminal",icon:r.createElement(p.GVU,null),onClick:()=>s.sidebarService.toggle(y.KO.MARKET_PLACE_CATEGORIES)}),e))).onStart((e=>{let a=e.sidebarService,s=e.marketPlaceService,i=e.categoriesService,n=e.commandService,o=e.hotService,l=e.modalService;n.registerCommand(J.guard,(e=>{const r=e.featureUid,n=e.categoryUid,l=e.saleUid,c=e.setUid;n?i.goToCategory(n):l?o.goToSale(l):(c&&o.goToSet(c),r?s.goToDetails(r):a.goTo(y.KO.MARKET_PLACE_CATEGORIES))}));const c=l.createApi();s.openScreenshotModal.done.listen((e=>{let a=e.payload;return l.add({classNameModal:q,content:r.createElement(Y,{url:a,marketPlaceService:s}),api:c,onCloseClick:c.close,closeDataTest:"mp-modal-close-btn"})}))})).enable((De=(0,i.Z)((function*(e){var a;return!!(null===(a=e.appService.getState().marketplace)||void 0===a?void 0:a.enabled)&&(yield(0,d.ic)(_.NAVIGATION_SERVICE),yield(0,d.ic)(_.PROFILE_SERVICE),yield(0,d.ic)(_.LANGUAGE_SERVICE),yield(0,d.ic)(_.ACCOUNT_SERVICE),!0)})),function(e){return De.apply(this,arguments)}))},75620:(e,a,s)=>{"use strict";s.d(a,{G:()=>CategoriesService});var i=s(29257),r=s(7223);class CategoriesService extends r.t{fetchCategories(){var e=this;return(0,i.Z)((function*(){e.update({categoriesLoadingError:!1,categoriesLoading:!0,categories:[]}),yield e.categoriesRepository.findAll().then((a=>{e.update({categories:a})})).catch((()=>{e.update({categoriesLoadingError:!0})})).finally((()=>{e.update({categoriesLoading:!1})}))}))()}fetchCategory(e){var a=this;return(0,i.Z)((function*(){a.update({categoryLoadingError:!1,categoryLoading:!0,selectedCategory:null}),yield a.categoryDetailsRepository.find(e).then((e=>{a.update({selectedCategory:e})})).catch((()=>{a.update({categoryLoadingError:!0})})).finally((()=>{a.update({categoryLoading:!1})}))}))()}fetchInventoryFeatures(){var e=this;return(0,i.Z)((function*(){e.update({inventoryLoadingError:!1,inventoryLoading:!0,featuresInInventory:[]}),yield e.inventoryRepository.findAll().then((a=>{e.update({featuresInInventory:a})})).catch((()=>{e.update({inventoryLoadingError:!0})})).finally((()=>{e.update({inventoryLoading:!1})}))}))()}goToHelp(){this.inputs.goToHelp()}goToInventory(){this.inputs.goToInventory()}goToCategory(e){this.update({selectedCategoryUid:e}),this.inputs.goToCategory()}constructor(e,a,s,i){super({categories:[],categoriesLoading:!0,categoriesLoadingError:!1,selectedCategoryUid:null,selectedCategory:null,categoryLoading:!0,categoryLoadingError:!1,featuresInInventory:[],inventoryLoading:!0,inventoryLoadingError:!1}),this.inputs=i,this.categoriesRepository=e,this.categoryDetailsRepository=a,this.inventoryRepository=s}}},89786:(e,a,s)=>{"use strict";s.d(a,{F:()=>HotService,o:()=>l});var i=s(29257),r=s(37323),n=s(64356),o=s(7223);const l=(0,s(18655).B)("sale");class HotService extends o.t{fetchHot(){var e=this;return(0,i.Z)((function*(){e.update({hotLoadingError:!1,hotLoading:!0,sales:[],sets:[]}),yield e.hotRepository.find().then((a=>{let s=a.sales,i=a.sets;e.update({sales:s,sets:i});const r=e.timeService.serverTime;e.removeExpiredSales(r),e.timeService.events.on("serverTime",e.removeExpiredSales)})).catch((()=>{e.update({hotLoadingError:!0})})).finally((()=>{e.update({hotLoading:!1})}))}))()}fetchSale(e){var a=this;return(0,i.Z)((function*(){a.update({saleLoadingError:!1,saleLoading:!0,selectedSale:null}),yield a.saleRepository.find(e).then((e=>{a.update({selectedSale:e});const s=a.timeService.serverTime;a.checkSaleExpiration(s),a.timeService.events.on("serverTime",a.checkSaleExpiration)})).catch((()=>{a.update({saleLoadingError:!0})})).finally((()=>{a.update({saleLoading:!1})}))}))()}fetchSet(e){var a=this;return(0,i.Z)((function*(){a.update({setLoadingError:!1,setLoading:!0,selectedSet:null}),yield a.setRepository.find(e).then((e=>{a.update({selectedSet:e})})).catch((()=>{a.update({setLoadingError:!0})})).finally((()=>{a.update({setLoading:!1})}))}))()}setSlide(e){this.update({slideUid:e})}goToSale(e){this.update({selectedSaleUid:e}),this.inputs.goToSale()}goToSet(e){this.update({selectedSetUid:e}),this.inputs.goToSet()}showSpecialOfferExpiredMessage(){this.inputs.showSpecialOfferExpiredMessage()}removeExpiredSales(e){const a=this.getState().sales,s=this.getState().sales.filter((a=>{let s=a.endAt;return!s||e.timestamp<s}));s.length!==a.length&&this.update({sales:s}),s.length||this.timeService.events.off("serverTime",this.removeExpiredSales)}checkSaleExpiration(e){const a=this.getState().selectedSale;if(!a)return;const s=a.endAt;s?e.timestamp>s&&(this.timeService.events.off("serverTime",this.checkSaleExpiration),this.updateFeatureOnSaleFinish(a)):this.timeService.events.off("serverTime",this.checkSaleExpiration)}updateFeatureOnSaleFinish(e){var a=this;return(0,i.Z)((function*(){a.update({saleLoadingError:!1,saleLoading:!0}),a.showSpecialOfferExpiredMessage(),yield a.featuresRepository.findAll().then((s=>{const i=Object.fromEntries(s.map((e=>[e.uid,e])));a.update({selectedSale:(0,n.Z)((0,r.Z)({},e),{features:e.features.map((e=>{let a=e.uid;return i[a]}))})})})).catch((()=>{a.update({saleLoadingError:!0})})).finally((()=>{a.update({saleLoading:!1})}))}))()}constructor(e,a,s,i,r,n){super({sales:[],sets:[],hotLoading:!0,hotLoadingError:!1,slideUid:null,selectedSaleUid:null,selectedSale:null,saleLoading:!1,saleLoadingError:!1,selectedSetUid:null,selectedSet:null,setLoading:!1,setLoadingError:!1}),this.hotRepository=e,this.saleRepository=a,this.setRepository=s,this.featuresRepository=i,this.timeService=r,this.inputs=n,this.checkSaleExpiration=this.checkSaleExpiration.bind(this),this.updateFeatureOnSaleFinish=this.updateFeatureOnSaleFinish.bind(this),l.close.subscribe((()=>this.timeService.events.off("serverTime",this.checkSaleExpiration)))}}},53720:(e,a,s)=>{"use strict";s.d(a,{A:()=>MarketPlaceService,H:()=>v});var i=s(29257),r=s(37323),n=s(64356),o=s(7223),l=s(18655),c=s(99950),d=s(74375),u=s(23735),m=s(66257),p=s(18545),h=s(66511);const v=(0,l.B)("featureGate");class MarketPlaceService extends o.t{goToBuyGood(){this.inputs.goToBuyGood()}updateAccount(e,a){const s=this.getState().accountList,i=null==s?void 0:s.find((a=>a.id===e));if(i){const e=s.map((e=>e.id!==i.id?e:(0,r.Z)({},i,a)));this.update({accountList:e})}}fetchFeatures(){var e=this;return(0,i.Z)((function*(){return e.featuresRepository.findAll()}))()}fetchFeatureDetails(e){var a=this;return(0,i.Z)((function*(){a.update({selectedFeatureLoadingError:!1,selectedFeatureLoading:!0,selectedFeature:null}),yield a.featuresRepository.find(e).then((e=>{const s=a.getState().currency,i=a.updateSelectedPaymentType(e,s);a.update({selectedFeature:i}),a.timeService.events.on("serverTime",a.checkFeatureDiscountExpiration)})).catch((()=>{a.update({selectedFeatureLoadingError:!0})})).finally((()=>{a.update({selectedFeatureLoading:!1})}))}))()}cancelNextPurchase(e){var a=this;return(0,i.Z)((function*(){yield a.purchaseRepository.cancelNextPurchase(e)}))()}selectAccount(e){this.inputs.selectAccount(e)}selectPaymentAccount(e,a){const s=this.getState(),i=s.selectedFeature,r=s.accountList.find((e=>e.id===a));if((null==r?void 0:r.type)===m.Q.REAL&&this.selectAccount(a),i){const a=this.updateSelectedPaymentType(i,e);this.update({selectedFeature:a})}this.update({selectedAccountId:a})}goToDetails(e){this.update({selectedFeatureUid:e}),(0,u.L)({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"store_product_click",eventLabel:e}),this.inputs.goToDetails()}goToAutoRenewal(){const e=this.getState().selectedFeature;if(!(null==e?void 0:e.purchaseInfo))return;const a=e.uid,s=e.paymentTypes,i=e.purchaseInfo;h.P1.api.launch({good:{id:a,paymentFlow:c.M7.AUTO_RENEWAL,paymentTypes:s,purchaseInfo:i}}),this.goToBuyGood()}goToFeature(e,a){this.inputs.goToFeature(e,a)}goToNextStepPurchases(e){const a=this.getState().selectedFeature;if(!a)return;const s=a.uid,i=a.fake,r=a.trial,n=a.paymentTypes;if(i)return h.P1.api.launch({good:{id:"uid",paymentFlow:c.M7.FAKE}}),void this.goToBuyGood();e===p.YA.FREE&&h.P1.api.launch({good:{id:s,paymentFlow:c.M7.FREE}}),e===p.YA.TRIAL&&r&&h.P1.api.launch({good:{id:s,trial:r,paymentFlow:c.M7.TRIAL}}),e===p.YA.ONCE&&h.P1.api.launch({good:{id:s,paymentTypes:n,paymentFlow:c.M7.ONCE}}),e===p.YA.SUBSCRIBE&&h.P1.api.launch({good:{id:s,paymentTypes:n,paymentFlow:c.M7.SUBSCRIBE}}),this.goToBuyGood()}openSurvey(e,a){this.inputs.openSurvey(e,a)}buyFeature(e,a,s){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.purchaseRepository.buyFeature({feature_uid:e,account_id:a,payment_type:s,resubscribe:i,trial:r})}updateUserRating(e,a){const s=this.getState().selectedFeature;s&&s.uid===e&&this.update({selectedFeature:(0,n.Z)((0,r.Z)({},s),{userRating:a})})}updateSelectedPaymentType(e,a){const s=e.paymentTypes.find((s=>{var i;const r=s.currency===a;var n;return(null===(i=e.selectedPaymentType)||void 0===i?void 0:i.type)?(null===(n=e.selectedPaymentType)||void 0===n?void 0:n.type)===s.type&&r:r}));return s?(0,n.Z)((0,r.Z)({},e),{selectedPaymentType:s}):e}checkFeatureDiscountExpiration(e){var a,s;const i=this.getState(),r=i.currency,n=i.selectedFeature,o=null===(a=null==n?void 0:n.paymentTypes.find((e=>e.currency===r)))||void 0===a||null===(s=a.discount)||void 0===s?void 0:s.endAt;n&&o?e.timestamp>o&&(this.timeService.events.off("serverTime",this.checkFeatureDiscountExpiration),this.inputs.finishFeatureDiscount(),this.fetchFeatureDetails(n.uid)):this.timeService.events.off("serverTime",this.checkFeatureDiscountExpiration)}constructor(e,a,s,i,r){super({selectedFeatureUid:null,selectedFeature:null,selectedFeatureLoading:!0,selectedFeatureLoadingError:!1,currency:"usd",accountList:[],selectedAccountId:0,userId:e}),this.openScreenshotModal=(0,d.o)((()=>{})),this.inputs=r,this.featuresRepository=a,this.purchaseRepository=s,this.timeService=i,this.checkFeatureDiscountExpiration=this.checkFeatureDiscountExpiration.bind(this),this.inputs.subscribeToSelectedAccount(((e,a,s)=>{const i=this.getState().selectedFeature;if(i){const a=this.updateSelectedPaymentType(i,e);this.update({selectedFeature:a})}this.update({currency:e,selectedAccountId:a,accountList:s})})),this.inputs.subscribeToAccountsChange(((e,a)=>{this.updateAccount(e,a)})),this.inputs.subscribeToUser((e=>{this.update({userId:e})})),v.close.subscribe((()=>this.timeService.events.off("serverTime",this.checkFeatureDiscountExpiration)))}}},93021:(e,a,s)=>{"use strict";s.d(a,{$:()=>PublishedFeaturesService});var i=s(29257),r=s(3121),n=s(7223);class PublishedFeaturesService extends n.t{loadSummary(){var e=this;return(0,i.Z)((function*(){e.update({summaryLoading:!0});try{const a=(0,r.Z)(yield Promise.all([e.publishedFeaturesRepository.findSummary(),e.loadPage(0,[])]),1)[0];e.update({summary:a})}catch(a){e.update({summaryError:!0})}finally{e.update({summaryLoading:!1})}}))()}loadNextPage(){const e=this.getState(),a=e.publishedFeaturesLoading,s=e.publishedFeatures,i=s.features,r=s.pagination,n=r.page,o=r.pages;a||o===n||this.loadPage(n+1,i)}goToPublisedFeatures(){this.inputs.goToPublishedFeatures()}goToHelp(){this.inputs.goToHelp()}loadPage(e,a){return this.update({publishedFeaturesLoading:!0}),this.publishedFeaturesRepository.findPage({page:e,limit:10}).then((e=>{this.update({publishedFeatures:{features:[...a,...e.features],pagination:e.pagination}})})).catch((()=>{this.update({publishedFeaturesError:!0})})).finally((()=>{this.update({publishedFeaturesLoading:!1})}))}constructor(e,a){super({publishedFeatures:{features:[],pagination:{page:0,pages:0,limit:0,records:0}},publishedFeaturesLoading:!1,publishedFeaturesError:!1,summary:{totalPublished:0,totalSold:0,proceedsUsd:0},summaryLoading:!1,summaryError:!1}),this.publishedFeaturesRepository=e,this.inputs=a}}},1922:(e,a,s)=>{"use strict";s.d(a,{V:()=>RatingService});var i=s(29257),r=s(7223);class RatingService extends r.t{rate(e,a){var s=this;return(0,i.Z)((function*(){s.update({rating:a,loading:!0}),s.inputs.updateUserRating(e,a),yield s.ratingRepository.save({featureUid:e,rating:a}).then((()=>{s.inputs.showRateMessage()})).catch((()=>s.inputs.updateUserRating(e,0))).finally((()=>{s.update({loading:!1,rating:0})}))}))()}constructor(e,a){super({rating:0,loading:!1}),this.ratingRepository=e,this.inputs=a}}},10004:(e,a,s)=>{"use strict";s.d(a,{Q:()=>l});var i=s(27378),r=s(60042),n=s.n(r);const o="y1iigkgR",l=e=>{let a=e.className;return i.createElement("svg",{className:n()(o,a),viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"80",height:"80",fill:"currentColor"}),i.createElement("path",{opacity:"0.2",d:"M51.5285 37.6281L57.6912 44.8784C58.4034 45.7163 57.8048 47 56.7018 47H23.2983C22.144 47 21.5659 45.6114 22.3821 44.7993L34.8671 32.3776C35.3731 31.8741 36.1935 31.8741 36.6995 32.3776L44.8439 40.4807C45.3499 40.9842 46.1703 40.9842 46.6763 40.4807L49.623 37.549C50.1591 37.0156 51.0389 37.0522 51.5285 37.6281Z",fill:"#A5BDD9"}))};l.displayName="DefaultImage"},98447:(e,a,s)=>{"use strict";s.d(a,{L:()=>g,x:()=>v});var i=s(27378),r=s(84584),n=s(2050),o=s(17302),l=s(82844),c=s(94498),d=s(45672),u=s(3656),m=s(41164),p=s(20088);const h="kDXebHBN",v=(0,r.Z)(),g=i.memo((e=>{let a=e.feature,s=e.currency,r=e.userId,g=e.onClick;var _;const f=a.paymentTypes.find((e=>e.currency===s)),E=(0,m.V1)(a.ownership),S=a.author&&r!==a.author.id,y=(0,m.Vk)(a.ownership,f,f.price),b=(0,n.x)(v,{props:{feature:a}}),C=i.useCallback((()=>{g(a.uid)}),[g,a]);return i.createElement(o.Zb,{padding:"l",borderRadius:"s",onClick:C,dataTest:"mp-feature-item"},i.createElement(o.xu,{display:"grid",gap:"l",gridAutoFlow:"column",gridTemplateColumns:"auto 1fr"},i.createElement(d.$,{src:a.imgUrl,dataTest:"mp-feature-img",badge:!E&&i.createElement(p.D,{discount:f.discount})}),i.createElement(o.xu,{display:"grid",gap:"xs",fullWidth:!0},i.createElement(o.xu,{fullWidth:!0,direction:"row",verticalAlign:"center",horizontalAlign:"space-between"},i.createElement("div",{className:h},i.createElement(o.xv,{as:"h3",variant:"M Compact / Regular",dataTest:"mp-feature-name"},a.name)),!E&&b),i.createElement(u.t,{ownership:a.ownership,discount:f.discount,isSubscription:y,isBought:E,currency:s,price:f.price,dataTest:"mp-feature-price-block"}),i.createElement(o.xu,{fullWidth:!0,direction:"row",verticalAlign:"center",horizontalAlign:"space-between"},i.createElement(o.xv,{variant:"S Compact / Regular",color:"contrast-gamma",dataTest:"mp-feature-category"},S?i.createElement(l._,{id:"ugs_market_strategy_strategyby",defaultMessage:"Strategy by {name}",values:{name:i.createElement(o.xv,{variant:"S Compact / Regular",color:"accent-alpha",as:"span",inline:!0},null===(_=a.author)||void 0===_?void 0:_.name)}}):i.createElement(l._,{id:"mp_users_purchases",defaultMessage:"{value} traders purchased",values:{value:a.purchases}})),i.createElement(c.i,{rating:a.rating,dataTest:"mp-feature-rating"})))))}));g.displayName="Feature"},20088:(e,a,s)=>{"use strict";s.d(a,{D:()=>o});var i=s(27378),r=s(17302);const n="f9DjwDww",o=e=>{let a=e.discount;return a&&"percent"===a.type?i.createElement("div",{className:n},i.createElement(r.Ct,{content:i.createElement("span",{dir:"ltr"},"-",a.amount,"%"),color:"negative"})):null}},45672:(e,a,s)=>{"use strict";s.d(a,{$:()=>u});var i=s(27378),r=s(60042),n=s.n(r),o=s(58073);const l="ETJNfQ1x",c="b8nbrWjR",d="ncTrTXqa",u=e=>{let a=e.src,s=e.isBig,r=e.className,u=e.alt,m=void 0===u?"":u,p=e.dataTest,h=e.badge;return i.createElement("div",{className:n()(l,s&&c,r),"data-test":p},i.createElement(o.w,{src:a,className:d,alt:m}),h)};u.displayName="FeatureImage"},58073:(e,a,s)=>{"use strict";s.d(a,{w:()=>u});var i=s(3121),r=s(27378),n=s(60042),o=s.n(n),l=s(10004);const c="ZOoprvB1",d="i2F3lBTa",u=r.memo((e=>{let a=e.src,s=e.alt,n=e.className,u=e.dataTest;const m=(0,i.Z)(r.useState(!1),2),p=m[0],h=m[1],v=(0,i.Z)(r.useState(!1),2),g=v[0],_=v[1];return r.useEffect((()=>{if(a&&!p){const e=new Image;e.src=a;const s=()=>h((()=>!0)),i=()=>{_((()=>!0)),h((()=>!0))};return e.addEventListener("load",s,{once:!0}),e.addEventListener("error",i,{once:!0}),()=>{e.removeEventListener("load",s),e.removeEventListener("error",i)}}}),[a,p]),g||!p?r.createElement(l.Q,{className:n}):r.createElement("img",{className:o()(c,p&&d,n),src:a,alt:s,loading:"lazy","data-test":u})}));u.displayName="LazyImage"},3656:(e,a,s)=>{"use strict";s.d(a,{t:()=>h});var i=s(27378),r=s(82844),n=s(95029),o=s(41164);const l="SDmAPGSi",c="AwRlcZBm",d="dqXGor1E",u="c1DDhFJU",m="EAHM33Fo",p="Ii4uxE6G",h=i.memo((e=>{let a=e.ownership,s=e.isSubscription,h=e.isBought,v=e.currency,g=e.price,_=e.dataTest,f=e.discount;const E=i.useMemo((()=>0!==g||s?h?s?i.createElement(i.Fragment,null,i.createElement(r._,{className:d,id:"mp_subscription_active",defaultMessage:"Active"}),i.createElement(r._,{className:c,id:"mp_subscription_till",defaultMessage:"until {value}",values:{value:(0,o.p6)((null==a?void 0:a.activeTill)||0)}})):i.createElement(r._,{className:d,id:"mp_feature_owned",defaultMessage:"Purchased"}):i.createElement(i.Fragment,null,i.createElement(n.ih,{value:g,currency:v,className:u,maximumFractionDigits:2,minimumFractionDigits:2}),f&&"percent"===f.type&&i.createElement(i.Fragment,null,i.createElement(n.ih,{value:f.originalPrice,currency:v,className:p,maximumFractionDigits:2,minimumFractionDigits:2})," "),s&&i.createElement(r._,{className:m,id:"mp_per_month",defaultMessage:"/ Mos."})):i.createElement(r._,{id:"mp_free_short",defaultMessage:"Free"})),[g,s,h,v,a,f]);return i.createElement("div",{className:l,"data-test":_},E)}));h.displayName="Price"},94498:(e,a,s)=>{"use strict";s.d(a,{i:()=>u});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(77740);const c="udFiiQrg",d="lvagdj3m",u=e=>{let a=e.rating,s=e.className,r=e.controlled,u=void 0!==r&&r,m=e.dataTest,p=e.onClick;const h=i.useMemo((()=>Number.isInteger(a)?"".concat(a,".0"):a),[a]);return i.createElement("div",{className:n()(u&&c,s),onClick:p,"data-test":m},i.createElement(o.xu,{display:"grid",gridAutoFlow:"column",gap:"xs",verticalAlign:"center"},i.createElement(o.xv,{variant:"S / Bold"},h),i.createElement(l.lk1,{className:d})))};u.displayName="Rating"},11821:(e,a,s)=>{"use strict";s.d(a,{J:()=>p});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(77740),c=s(23735);const d="khSmsysL",u="QifqHQ52",m="KSxb_Ho4",p=e=>{let a=e.featureUid,s=e.direction,r=e.className,p=e.onClick;const h=i.useCallback((()=>{a&&(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"inventory_product_arrow_click",eventLabel:a}),null==p||p()}),[a,p]);return i.createElement("div",{className:n()(r,d,{[m]:"prev"===s,[u]:"next"===s})},i.createElement(o.Ei,{size:"xs",variant:"secondary",onClick:h,dataTest:"mp-carousel-arrow-".concat(s),icon:i.createElement(l.Ec8,null)}))};p.displayName="ScreenshotCarouselArrow"},44319:(e,a,s)=>{"use strict";s.d(a,{Eh:()=>n,lr:()=>U,HY:()=>S,jj:()=>h,L0:()=>y.L,$s:()=>b.$,VS:()=>ce,z9:()=>me,Zo:()=>Ee,V2:()=>Ce,wY:()=>o.w,aN:()=>c,iG:()=>C.i,SH:()=>De,yS:()=>J,iR:()=>re,ER:()=>we,AK:()=>ae,B7:()=>he});var i=s(27378),r=s(77740);const n=e=>{let a=e.dir,s=e.className;return"ltr"===a?i.createElement(r.Ec8,{className:s}):i.createElement(r.D6v,{className:s})};n.displayName="Arrow";s(10004);var o=s(58073),l=s(17302);const c=()=>i.createElement(l.xu,{fullWidth:!0,fullHeight:!0,horizontalAlign:"center",verticalAlign:"center"},i.createElement(l.$j,null));c.displayName="Loader";var d=s(60042),u=s.n(d),m=s(82844);const p={host:"xzHu3Zby",content:"aUQIPESX",icon:"wpBDMwpE",text:"HtFZKMlE"},h=e=>{let a=e.onClick,s=e.className;return i.createElement("div",{className:u()(p.host,s)},i.createElement("div",{className:p.content},i.createElement(r.Gc9,{className:p.icon}),i.createElement(m._,{className:p.title,id:"mp_service_error",defaultMessage:"The service is temporarily unavailable. Please repeat your request or try again later."})),i.createElement(l.zx,{fullWidth:!0,size:"l",color:"accent",onClick:a},i.createElement(m._,{id:"try_again",defaultMessage:"Try again"})))};h.displayName="Error";var v=s(18985);const g="Kh9jzZTD",_="xiA_pWDD",f="XlZvMC8x",E=(0,v.vU)({category:{id:"mp_no_items_shop",defaultMessage:"No features are available. Please return later."},inventory:{id:"mp_inventory_empty",defaultMessage:"You haven’t acquired anything yet."}}),S=e=>{let a=e.type,s=void 0===a?"category":a;return i.createElement("div",{className:g},i.createElement(r.az_,{className:_}),i.createElement(m._,Object.assign({className:f},E[s])))};S.displayName="Empty";var y=s(98447),b=s(45672),C=s(94498),T=(s(3656),s(59343)),A=s(11821),k=s(3121);const w=()=>{const e=(0,k.Z)(i.useState(!1),2),a=e[0],s=e[1];i.useEffect((()=>{if(!a)return;const e=window.setTimeout((()=>s(!1)),0);return()=>window.clearTimeout(e)}),[a]);const r=i.useCallback((()=>s(!0)),[]);return i.useMemo((()=>({swipe:a,onSwipe:r})),[a,r])};var N=s(29257);const R=e=>new Promise((a=>{const s=new Image;s.onload=()=>a(),s.onerror=()=>a(),s.src=e})),I=e=>{const a=(0,k.Z)(i.useState(!1),2),s=a[0],r=a[1];return i.useEffect((()=>{let a=!1;function s(){return(s=(0,N.Z)((function*(){if(a)return;r(!0);const s=e.map(R);yield Promise.all(s),a||r(!1)}))).apply(this,arguments)}return function(){s.apply(this,arguments)}(),()=>{a=!0}}),[e]),s};var D=s(24459);const O="e2FQxsO_",L="linqLRiM",M="qgmc170Y",P=i.memo((e=>{let a=e.onClick,s=e.direction;return i.createElement("button",{onClick:a,"data-test":"mp-hot-carousel-arrow-".concat(s),className:u()(O,"prev"===s?L:M)},"prev"===s?i.createElement(r.D6v,null):i.createElement(r.Ec8,null))}));P.displayName="CarouselDotsArrow";const x="ke3NrPKp",F="XNIEvYHP",B=i.lazy((()=>Promise.resolve().then(s.bind(s,35301)))),Z={appendDots:e=>Array.isArray(e)?i.createElement("ul",null,e.map(((e,a)=>i.cloneElement(e,{"data-test":"mp-hot-carousel-dot-".concat(a)})))):i.createElement("ul",null,e),nextArrow:i.createElement(P,{direction:"next"}),prevArrow:i.createElement(P,{direction:"prev"})},U=e=>{var a=e.className,s=e.dotsClass,r=e.children,n=(0,D.Z)(e,["className","dotsClass","children"]);return i.createElement(B,Object.assign({className:(0,l.AK)(x,a),dotsClass:(0,l.AK)(F,s)},Z,n),r)};U.displayName="Carousel";const H="sH4A2z_i",G="W2aSSQ5g",V="qJ_sJQT7",W=i.memo((e=>{let a=e.item,s=e.onClick;const r=i.useCallback((()=>{null==s||s(a.url)}),[s,a]),n="portrait"===a.orientation;return i.createElement("div",{key:a.url,className:H,onClick:r,"data-test":"mp-carousel-item"},i.createElement(o.w,{src:a.url,className:(0,l.AK)(G,n&&V),alt:""}))}));W.displayName="ScreenshotSlide";const j="zZOlj_BA",z="vMnkkYfF",q="mN8dTHEx",K="oM9RRa5b",Y="AfwG5dFr",X={infinite:!0,variableWidth:!0,slidesToShow:1,slidesToScroll:1},J=e=>{let a=e.items,s=e.featureUid,r=e.onClick;const n=(0,T.V)(),o=i.useMemo((()=>a.map((e=>e.url))),[a]),c=I(o),d=w(),u=d.swipe,m=d.onSwipe,p=i.useCallback((e=>{u||r(e)}),[u,r]);return c?i.createElement("div",{className:Y},i.createElement(l.$j,null)):i.createElement("div",{className:j},i.createElement("div",{className:(0,l.AK)(z,q)}),i.createElement(U,Object.assign({},X,{nextArrow:i.createElement(A.J,{featureUid:s,direction:"next"}),prevArrow:i.createElement(A.J,{featureUid:s,direction:"prev"}),onSwipe:m,rtl:n}),a.map((e=>i.createElement(W,{key:e.url,item:e,onClick:p})))),i.createElement("div",{className:(0,l.AK)(z,K)}))},Q="LXtFwe39",$="HgZf0GGN",ee="BZhMzlz3",te="xKuSjFi5",ae=e=>{let a=e.title,s=e.text,r=e.checked,n=e.name,o=void 0===n?"switch_panel":n,c=e.className,d=e.dataTest,m=e.onClick;return i.createElement("label",{className:u()(Q,c),"data-test":d},i.createElement("div",{className:$},i.createElement("h5",{className:ee},a),i.createElement("div",{className:te},s)),i.createElement(l.rs,{fullWidth:!1,name:o,checked:r,onChange:m}))};ae.displayName="SwitchPanel";const se="r1lk0NGM",ie="Une1gccC",re=i.memo((e=>{let a=e.className,s=e.transparentBg,r=e.style,n=e.children;return i.createElement("div",{className:u()(se,a,s&&ie),style:r},n)}));re.displayName="Slider";var ne=s(9957),oe=s(8141);const le="KXXtcqFA",ce=i.memo((e=>{let a=e.currency,s=e.userId,r=e.features,n=e.onLoad,o=e.loading,d=e.pageLoading,u=e.loadingError,m=e.onFeatureClick,p=e.emptyList,v=e.onLoadNextPage;const g=(0,oe.L)();i.useEffect((()=>{n()}),[n]);const _=i.useCallback((e=>{v&&e&&v()}),[v]),f=i.useMemo((()=>r.map(((e,n)=>v&&n===r.length-2?i.createElement(ne.df,{key:e.uid,className:le,as:"li",onChange:_},i.createElement(y.L,{feature:e,currency:a,userId:s,onClick:m})):i.createElement("li",{key:e.uid,className:le},i.createElement(y.L,{feature:e,currency:a,onClick:m,userId:s}))))),[a,r,_,m,v,s]);return o?i.createElement(c,null):u?i.createElement(h,{onClick:n}):r.length?i.createElement("ul",{dir:g},f,d&&i.createElement(l.xu,{verticalAlign:"center",horizontalAlign:"center",padding:["l",0]},i.createElement(l.$j,null))):i.createElement(i.Fragment,null,p)}));ce.displayName="FeatureList";var de=s(74199);const ue="TCvPOkDi",me=e=>{let a=e.backgroundColor,s=e.noImageColor,r=e.url,n=e.renderContent,o=e.dataTest;const c=(0,oe.L)(),d=(0,l.Fg)().theme,u=a||(null==d?void 0:d["base-alpha"])||"",m=s||(null==d?void 0:d["high-alpha"])||"",p="url(\"data:image/svg+xml,%3Csvg width='100' height='40' viewBox='0 0 100 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M82.0236 15.0084L99.1421 34.3425C101.12 36.5769 99.4576 40 96.3939 40H3.60635C0.399865 40 -1.20595 36.2971 1.06138 34.1315L35.742 1.00687C37.1475 -0.335623 39.4264 -0.335624 40.8319 1.00687L63.4554 22.6153C64.8609 23.9578 67.1398 23.9578 68.5453 22.6153L76.7305 14.7974C78.2197 13.375 80.6637 13.4724 82.0236 15.0084Z' fill='".concat(encodeURIComponent(m),"'/%3E%3C/svg%3E%0A\")");return i.createElement(de.KE,{dir:c,size:"extraLarge",url:r,imageBackgroundColor:u,renderContent:n,className:ue,"data-test":o,style:{backgroundColor:u,backgroundImage:p}})};var pe=s(83714);const he=e=>{let a=e.endTime;const s=(0,pe.w6)().timestamp,r=i.useCallback((()=>i.createElement(i.Fragment,null,"00:00:00")),[]),n=Math.floor((a-s)/86400);return i.createElement(i.Fragment,null,n>0?i.createElement(m._,{id:"tou_timer_day",defaultMessage:"{days, plural, one {# day} other {# days}}",values:{days:n}}):i.createElement(l.Wo,{serverTime:s,startTime:a||0,timeFormat:"h:m:s",renderTimeOver:r}))},ve="D3V6AUcV",ge="SJxUxKfE",_e="HsAsTAnJ",fe="TzJRg5SE",Ee=e=>{let a=e.uid,s=e.endAt,r=e.backgroundColor,n=e.name,c=e.description,d=e.url,u=e.onClick;const m=(0,l.Fg)().theme,p=(0,oe.L)(),h=r||(null==m?void 0:m["base-alpha"])||"",v=i.useCallback((()=>u(a)),[u,a]);return i.createElement("button",{onClick:v,className:ve,style:{backgroundColor:h},dir:p},i.createElement(l.xu,{fullWidth:!0,fullHeight:!0,direction:"row"},i.createElement("div",{className:ge},i.createElement(l.xu,{fullWidth:!0,direction:"column",horizontalAlign:"center",display:"grid",gap:"s",padding:"ltr"===p?["l",0,"l","l"]:["l","l","l",0]},i.createElement(l.xu,{fullWidth:!0,direction:"column",horizontalAlign:"start",display:"grid",gap:"xs"},i.createElement(l.xv,{variant:"L / Bold",color:"inherit",dataTest:"mp-hot-banner-title"},n),i.createElement(l.xv,{variant:"S / Regular",color:"inherit",dataTest:"mp-hot-banner-description"},c)),s&&i.createElement(l.Ct,{color:"neutralAlpha",content:i.createElement("span",{className:_e},i.createElement(he,{endTime:s}))}))),i.createElement(o.w,{src:d||"",alt:"",className:fe,dataTest:"mp-hot-banner-image"})))},Se="XKZAGGrz",ye="IGFhwo1M",be={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:5e3,pauseOnHover:!1},Ce=e=>{let a=e.initialSlideUid,s=e.sales,r=e.sets,n=e.onSetClick,o=e.onSaleClick,l=e.onSlideChange;const c=(0,T.V)(),d=w(),u=d.swipe,m=d.onSwipe,p=i.useMemo((()=>{const e=[...s,...r].findIndex((e=>e.uid===a));return-1===e?0:e}),[a,s,r]),h=i.useCallback((e=>{u||o(e)}),[u,o]),v=i.useCallback((e=>{u||n(e)}),[u,n]),g=i.useCallback((e=>l([...s,...r][e].uid)),[l,r,s]);return i.createElement("div",{className:Se},i.createElement(U,Object.assign({},be,{rtl:c,onSwipe:m,afterChange:g,initialSlide:p}),s.map((e=>i.createElement("div",{key:e.uid,className:ye},i.createElement(Ee,{uid:e.uid,name:e.name,description:e.description,url:e.url,endAt:e.endAt,backgroundColor:e.backgroundColor,onClick:h})))),r.map((e=>i.createElement("div",{key:e.uid,className:ye},i.createElement(Ee,{uid:e.uid,name:e.name,description:e.description,url:e.url,backgroundColor:e.backgroundColor,onClick:v}))))))};var Te=s(95029);const Ae="HxrlZnbH",ke="nxYR9Uij",we=e=>{let a=e.data,s=a.totalPublished,n=a.totalSold,o=a.proceedsUsd,c=e.currency;const d=(0,oe.L)();return i.createElement("div",{dir:d},i.createElement(l.xu,{display:"grid",gap:"xs",shrink:0},i.createElement(l.xu,{direction:"row"},i.createElement(l.xv,{variant:"S / Regular",color:"contrast-beta"},i.createElement(m._,{id:"ugs_market_strategies_published",defaultMessage:"Strategies published"})),i.createElement("span",{className:Ae}),i.createElement(l.xv,{variant:"S / Regular",color:"contrast-alpha"},i.createElement(v.BK,{value:s}))),i.createElement(l.xu,{direction:"row"},i.createElement(l.xv,{variant:"S / Regular",color:"contrast-beta"},i.createElement(m._,{id:"ugs_market_strategies_sold",defaultMessage:"Strategies sold"})),i.createElement("span",{className:Ae}),i.createElement(l.xv,{variant:"S / Regular",color:"contrast-alpha"},i.createElement(v.BK,{value:n}))),i.createElement(l.xu,{direction:"row"},i.createElement(l.xv,{variant:"S / Regular",color:"contrast-beta"},i.createElement(m._,{id:"ugs_market_strategy_renumeration",defaultMessage:"Proceeds"})),i.createElement(l.u,{triggerOnHover:!0,triggerOnTap:!0,placement:"rtl"===d?"top-start":"top-end",arrow:!0,content:e=>{var a=e.basePlacement,s=(0,D.Z)(e,["basePlacement"]);return i.createElement(l._v,Object.assign({dir:d,placement:a},s),i.createElement(m._,{id:"ugs_market_strategy_tooltip",defaultMessage:"Total sum earned from strategies sold"}))}},(e=>{var a=e.ref,s=(0,D.Z)(e,["ref"]);return i.createElement("span",Object.assign({className:ke,ref:a},s),i.createElement(r.T08,null))})),i.createElement("span",{className:Ae}),i.createElement(l.xv,{variant:"S / Regular",color:"contrast-alpha"},i.createElement(Te.ih,{value:o,currency:c,maximumFractionDigits:2,minimumFractionDigits:2})))))};we.displayName="Summary";const Ne="wRbFBmjU",Re="trtBdI2n",Ie=[1,2,3,4,5],De=e=>{let a=e.value,s=e.onSelect;const n=(0,k.Z)(i.useState(0),2),o=n[0],c=n[1];return i.createElement("div",{className:Ne},i.createElement(l.xu,{fullWidth:!0,horizontalAlign:"space-between",direction:"row"},a?Ie.map((e=>i.createElement("div",{key:e,className:Re},a>=e?i.createElement(r.lk1,{fontSize:"inherit"}):i.createElement(r.GK,{fontSize:"inherit"})))):Ie.map((e=>i.createElement("button",{key:e,type:"button",className:Re,onClick:()=>s(e),onMouseEnter:()=>c(e),onMouseLeave:()=>c(0)},o>=e?i.createElement(r.lk1,{fontSize:"inherit"}):i.createElement(r.GK,{fontSize:"inherit"}))))))};De.displayName="RatingSelector"},6536:(e,a,s)=>{"use strict";s.r(a),s.d(a,{CategoriesPanel:()=>L,marketPlaceUpperSlot:()=>O});var i=s(27378),r=s(84584),n=s(2050),o=s(63967),l=s(97415),c=s(17302),d=s(8141),u=s(82844),m=s(23735),p=s(75620),h=s(89786),v=s(44319),g=s(60042),_=s.n(g);const f="HU6cWL4e",E="Po7Vey9N",S="uvhObgnn",y="BBSp5Isy",b="cUsciiT_",C="Lfrve1Xq",T=i.memo((e=>{let a=e.category,s=e.onClick;const r=i.useCallback((()=>{s(a.uid)}),[a,s]);return i.createElement("button",{className:_()(f,(null==a?void 0:a.url)&&E),onClick:r,"data-test":"mp-category-card"},(null==a?void 0:a.url)&&i.createElement(v.wY,{src:a.url,className:S,alt:""}),i.createElement("div",{className:y},i.createElement("h5",{className:b},a.name),i.createElement("div",{className:C},a.description)))}));T.displayName="Card";const A=e=>{let a=e.categories,s=e.className,r=e.onClick;return a.length?i.createElement("ul",{className:s},a.map((e=>i.createElement("li",{key:e.uid},i.createElement(T,{category:e,onClick:r}))))):null};A.displayName="List";const k="UeYtbczG",w="n8Uh9FIf",N=e=>{let a=e.sales,s=e.sets,r=e.initialSlideUid,n=e.onSaleClick,o=e.onSetClick,l=e.onSlideChange;const c=a.length+s.length;if(!c)return null;if(1===c){const e=a[0],r=s[0];return i.createElement("div",{className:k},e?i.createElement(v.Zo,{uid:e.uid,name:e.name,description:e.description,url:e.url,endAt:e.endAt,backgroundColor:e.backgroundColor,onClick:n}):i.createElement(v.Zo,{uid:r.uid,name:r.name,description:r.description,url:r.url,backgroundColor:r.backgroundColor,onClick:o}))}return i.createElement("div",{className:w},i.createElement(v.V2,{sales:a,sets:s,initialSlideUid:r,onSaleClick:n,onSetClick:o,onSlideChange:l}))},R="_fboAzCB",I="SGISGb8K",D="GDCGDytT",O=(0,r.Z)(),L=()=>{const e=(0,d.L)(),a=(0,n.x)(O),s=(0,o.G)(p.G),r=(0,o.G)(h.F),g=(0,l.o)(s.store),_=g.categoriesLoading,f=g.categoriesLoadingError,E=g.categories,S=(0,l.o)(r.store),y=S.hotLoading,b=S.hotLoadingError,C=S.sales,T=S.sets,k=S.slideUid;i.useEffect((()=>{s.fetchCategories()}),[s]),i.useEffect((()=>{r.fetchHot()}),[r]);const w=i.useCallback((e=>{(0,m.L)({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_category_click",eventLabel:e}),s.goToCategory(e)}),[s]);return _||y?i.createElement(v.aN,null):f?i.createElement(v.jj,{onClick:s.fetchCategories}):b?i.createElement(v.jj,{onClick:r.fetchHot}):i.createElement("div",{className:R,dir:e},a,i.createElement("div",{className:I},i.createElement(c.zx,{size:"l",variant:"secondary",horizontalAlign:"start",fullWidth:!0,endIcon:i.createElement(v.Eh,{dir:e}),onClick:s.goToInventory,dataTest:"mp-inventory-button"},i.createElement(u._,{id:"mp_inventory_button",defaultMessage:"My Purchases & Rewards"}))),i.createElement(N,{sales:C,sets:T,initialSlideUid:k,onSaleClick:r.goToSale,onSetClick:r.goToSet,onSlideChange:r.setSlide}),i.createElement(A,{categories:E,onClick:w,className:D}))};L.displayName="Categories"},93332:(e,a,s)=>{"use strict";s.d(a,{Z:()=>T,c:()=>C});var i=s(27378),r=s(84584),n=s(63967),o=s(2050),l=s(60042),c=s.n(l),d=s(17302),u=s(82844),m=s(23735),p=s(95029),h=s(53720),v=s(18545),g=s(44319);const _="ZWuz6orK",f="C5tGww7Q",E="DmjXcpqE",S="ZGvmELBO",y="w5NsNyiC",b="oIsuw6JX",C=(0,r.Z)(),T=i.forwardRef(((e,a)=>{let s=e.feature,r=e.userId,l=e.currency,T=e.isBig,A=e.className,k=e.dir;var w;const N=(0,n.G)(h.A),R=(0,o.x)(C,{props:{feature:s}}),I=Boolean(s.trial)&&!s.ownership,D=s.paymentTypes.find((e=>e.currency===l)),O=D.discount,L=(null===(w=s.author)||void 0===w?void 0:w.id)===r,M=i.useCallback((()=>{N.goToNextStepPurchases(v.YA.TRIAL)}),[N]),P=i.useCallback((()=>{D&&((0,m.L)({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"product_buy_click/from_product_card",eventLabel:s.uid}),"once"!==(null==D?void 0:D.type)||0!==(null==D?void 0:D.price)?"once"!==(null==D?void 0:D.type)?N.goToNextStepPurchases(v.YA.SUBSCRIBE):N.goToNextStepPurchases(v.YA.ONCE):N.goToNextStepPurchases(v.YA.FREE))}),[N,D,s]),x=i.useCallback((()=>{(s.link||s.linkWeb)&&N.goToFeature(s.linkWeb,s.link)}),[N,s]),F=i.useMemo((()=>s.ownership?s.link||s.linkWeb?i.createElement(u._,{id:"mp_open_feature",defaultMessage:"Open in the interface"}):null:(null==D?void 0:D.price)&&D.price>0?i.createElement("div",{className:f},i.createElement("span",null,i.createElement(p.ih,{value:D.price||0,currency:l,minimumFractionDigits:2,maximumFractionDigits:2,className:E}),O&&"percent"===O.type&&i.createElement("span",{className:S}," ","/"," ",i.createElement(p.ih,{value:O.originalPrice,currency:l,minimumFractionDigits:2,maximumFractionDigits:2,className:y}))),i.createElement(u._,Object.assign({},v.hM[s.selectedPaymentType.type],{className:b,"data-test":"mp-p-details-subscription-period"}))):i.createElement(u._,{id:"marketplace_free",defaultMessage:"Free"})),[s,D,l,O]),B=i.useMemo((()=>L?null:F?i.createElement(d.zx,{variant:s.ownership?"primary":"secondary",fullWidth:!0,size:"l",onClick:s.ownership?x:P,horizontalAlign:s.ownership?"center":"start",endIcon:!s.ownership&&i.createElement(g.Eh,{dir:k}),dataTest:"mp-p-details-btn"},F):i.createElement(d.zx,{fullWidth:!0,size:"l",disabled:!0,dataTest:"mp-p-details-active-btn",onClick:()=>null},i.createElement(u._,{id:"mp_subscription_active",defaultMessage:"Active"}))),[k,s,x,P,F,L]);return i.createElement("div",{className:c()(_,A),ref:a},I&&i.createElement(d.zx,{fullWidth:!0,size:"l",color:"positive",onClick:M},i.createElement(u._,{id:"marketplace_feature_trial_activation_action",defaultMessage:"Try for Free Now"})),B,R&&!s.ownership&&!!(null==D?void 0:D.price)&&i.createElement(g.iR,{transparentBg:!T},R))}));T.displayName="Controls"},41164:(e,a,s)=>{"use strict";s.d(a,{KL:()=>d,V1:()=>u,Vk:()=>m,p6:()=>o});var i=s(27378),r=s(18985),n=s(18545);const o=e=>e?i.createElement(r.Ji,{value:1e3*e,day:"2-digit",month:"2-digit",year:"numeric"}):"",l=e=>Boolean(new Date(1e3*e)>new Date),c=e=>(null==e?void 0:e.source)===n.EB.TW&&l(null==e?void 0:e.activeTill),d=e=>c(e)||!!(null==e?void 0:e.purchaseInfo)&&((null==e?void 0:e.purchaseInfo.type)===n.Im.ONCE||l(null==e?void 0:e.activeTill)),u=e=>{var a;return Boolean(null==e?void 0:e.activeTill)||(null==e||null===(a=e.purchaseInfo)||void 0===a?void 0:a.type)===n.Im.ONCE},m=(e,a,s)=>{var i;return(null==e||null===(i=e.purchaseInfo)||void 0===i?void 0:i.type)!==n.Im.ONCE&&(null==a?void 0:a.type)!==n.Im.ONCE&&Boolean(s)&&!c(e)}},28046:(e,a,s)=>{"use strict";s.d(a,{l:()=>T});var i=s(27378),r=s(13243),n=s(95601),o=s(37323),l=s(64356),c=s(7223);const d={overlay:null,modal:null,content:null,api:null,classNameModal:null,onOverlayClick:null,onCloseClick:null,animation:!1};class ModalService extends c.t{createApi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a={close:()=>{var s,i;(null===(s=this.queue[0])||void 0===s?void 0:s.api)===a&&(this.queue.shift(),null===(i=e.onClose)||void 0===i||i.call(e),this.queue.length?this.update(this.queue[0]):this.update(d))},remove:()=>{var s;this.queue=this.queue.filter((e=>e.api!==a)),null===(s=e.onRemove)||void 0===s||s.call(e)},update:e=>{const s=this.getState();var i,r,n,c;this.queue[0]=(0,l.Z)((0,o.Z)({},s),{api:a,content:e.content,classNameModal:null!==(r=null!==(i=e.classNameModal)&&void 0!==i?i:s.classNameModal)&&void 0!==r?r:void 0,onCloseClick:null!==(c=null!==(n=e.onCloseClick)&&void 0!==n?n:s.onCloseClick)&&void 0!==c?c:void 0}),this.update(this.queue[0])}};return a}add(e){this.queue.push(e),this.getState().api||this.update(e)}constructor(){super(d),this.queue=[],this.createApi=this.createApi.bind(this),this.add=this.add.bind(this)}}var u=s(63967),m=s(97415),p=s(77740),h=s(60042),v=s.n(h);const g="BegyEYtP",_="PHeagFfV",f="wLeJnwNS",E="IraIwZ8_",S="iJLm8ypY",y="AWjSJwKN",b=(0,i.memo)((function(e){return i.createElement("div",{className:f,"data-test":e.dataTest},i.createElement(p.bMz,{className:E,onClick:e.onClick}))})),C=(0,i.memo)((function(){const e=(0,u.G)(ModalService),a=(0,m.o)(e.store),s=a.overlay,r=a.modal,n=a.content,o=a.api,l=a.classNameModal,c=a.animation,d=a.closeDataTest,p=a.onOverlayClick,h=a.onCloseClick;return o?i.createElement("div",{className:g},null!=s?s:i.createElement("div",{className:_,onClick:null!=p?p:o.close}),null!=r?r:i.createElement("div",{className:v()(S,l,c&&y)},h?i.createElement(b,{onClick:h,dataTest:d}):null,n)):null})),T=(0,r.v)({name:"Modals",dependsOn:[n.u$],services:()=>({modalService:new ModalService})},{publicApi:e=>({modalService:e.modalService})});T.use(n.tJ,(()=>i.createElement(C,null)))},18121:(e,a,s)=>{"use strict";s.d(a,{Z:()=>be});var i=s(29257),r=s(27378),n=s(13243),o=s(6680),l=s(95601),c=s(49491),d=s.n(c),u=s(47014),m=s.n(u),p=s(7223),h=s(86081),v=s(23934);class Batching{constructor(e){this.config=e,this.events=(0,v.Z)(),this.list=[],this.currentTimeFrame=null}size(){return this.list.length}push(e){this.list.push(e),this.currentTimeFrame||(this.currentTimeFrame=setTimeout((()=>{this.flush()}),this.config.timeframe))}onFlush(e){return this.events.on("flush",e),()=>this.events.off("flush",e)}flush(){this.currentTimeFrame&&(clearTimeout(this.currentTimeFrame),this.currentTimeFrame=null);const e=Array.from(this.list);return this.list=[],this.events.emit("flush",e),e}}class NotificationsService extends p.t{constructor(e){var a;super({notifications:[],unviewedNotificationsCount:0}),a=this,this.repository=e,this.load=this.createTask(m()((function*(){const e=yield a.repository.findAll();a.repository.subscribeOnAdd(a.handleAddedNotification);const s=(0,h.UI)(a.store,(e=>e.notifications.filter((e=>!e.isViewed)).length));a.on(s,(e=>({unviewedNotificationsCount:e}))),a.update({notifications:Array.from(e).slice(0,20)}),a.viewBatching.onFlush(a.handleViewFlush)})),{strategy:p.T.once}),this.viewBatching=new Batching({timeframe:1e3}),this.view=e=>{this.viewBatching.push(e)},this.handleAddedNotification=this.handleAddedNotification.bind(this),this.handleViewFlush=this.handleViewFlush.bind(this)}handleAddedNotification(e){this.update((a=>d()(d()({},a),{},{notifications:a.notifications.some((a=>a.id===e.id))?a.notifications:[e,...a.notifications].slice(0,20)})))}handleViewFlush(e){var a=this;return m()((function*(){const s=e.filter((e=>!e.isViewed));if(0===s.length)return;yield a.repository.markAsViewed(s);const i=new Set(s.map((e=>e.id)));a.update((e=>d()(d()({},e),{},{notifications:e.notifications.map((e=>i.has(e.id)?d()(d()({},e),{},{isViewed:!0}):e))})))}))()}}class SettingsService extends p.t{constructor(e){var a;super({settings:[]}),a=this,this.repository=e,this.load=this.createTask(m()((function*(){const e=yield a.repository.findAll();a.update({settings:Array.from(e)})})),{strategy:p.T.once}),this.toggleSetting=this.createTask(function(){var e=m()((function*(e){const s=a.getState().settings;try{const i=s.map((a=>a.category===e.category?d()(d()({},a),{},{enabled:!a.enabled}):a));a.update({settings:i}),yield a.repository.save(i)}catch(e){throw a.update({settings:s}),e}}));return function(a){return e.apply(this,arguments)}}(),{strategy:p.T.queue})}}var g=s(63967),_=s(97415),f=s(77740),E=s(23735),S=s(74199),y="_3QdqPF4wAW2k",b="_3vlE0EHtDFGW";const C=e=>{let a=e.onClick;const s=(0,g.G)(NotificationsService),i=(0,_.o)(s.store).unviewedNotificationsCount,n=r.useCallback((()=>{(0,E.L)({event:"uaGtmEvents_clicks",eventCategory:"notifications_center",eventAction:"open",eventLabel:"new_message/".concat(i)}),a()}),[i,a]);return r.createElement(S.Qe,{className:y,onClick:n},r.createElement(f.pPA,null),i>0&&r.createElement("div",{className:b}," ",i," "))},T=e=>{let a=e.onClick;const s=r.useCallback((()=>{(0,E.L)({event:"uaGtmEvents_clicks",eventCategory:"notifications_center",eventAction:"settings",eventLabel:"open"}),a()}),[a]);return r.createElement(S.Qe,{onClick:s},r.createElement(f.iCC,null))};var A=s(82844),k=s(60042),w=s.n(k),N=s(36732),R=s(9957),I=s(18985),D=s(99318),O="_2eYQrobQZ_SP",L="CVtGlwxhaHa_",M="_1oNCYzKQhtAO",P="_29NiZvsjdCiw",x="_2msceVPiskGP",F="_172oBqLzfitr",B="_1Ga_uvK7EigC",Z="_3YL4pDODjs9S",U="_3JuX3WZQxMjg";const H=r.memo((e=>{let a=e.notification,s=e.className,i=e.onDeepLinkClick,n=e.onViewed;const o=r.useCallback((()=>{a.webDeeplink&&i(a.webDeeplink)}),[a.webDeeplink,i]),l=(0,R.YD)({skip:a.isViewed,threshold:1,triggerOnce:!0}),c=l.ref,d=l.inView;r.useEffect((()=>{d&&!a.isViewed&&n(a)}),[a,d,n]);const u=r.useMemo((()=>new Date(1e3*a.createdAt)),[a.createdAt]);return r.createElement("div",{className:w()(O,a.webDeeplink&&L,s),key:a.id,ref:c,onClick:o},r.createElement("div",{className:w()(M,!a.isViewed&&P)},"promo"===a.category?r.createElement(f.zCB,null):r.createElement(f.pPA,null)),r.createElement("div",{className:x},r.createElement("div",{className:F},r.createElement("span",null," ",r.createElement(I.Ji,{day:"numeric",hour12:!1,month:"short",value:u})," "),r.createElement("span",null," ",r.createElement(D.B,{hour12:!1,value:u})," ")),r.createElement("span",{className:B}," ",a.title," "),r.createElement("span",{className:Z}," ",a.body," "),r.createElement("span",{className:U}," ",a.actionTitle," ")))}));var G=s.e(7361).then(s.t.bind(s,17361,17)),V="_2WOsPk4X0XmJ",W="Ex5ZiZqVcr7x",j="_2sC--aTJ2yOx";const z=e=>{let a=e.className,s=e.onOpenDeepLinkClick;const i=(0,g.G)(NotificationsService),n=(0,_.o)(i.store).notifications;r.useEffect((()=>()=>{(0,E.L)({event:"uaGtmEvents_clicks",eventCategory:"notifications_center",eventAction:"close",eventLabel:"close"})}),[]);const o=r.useCallback((e=>{i.view(e)}),[i]);return r.createElement("div",{className:w()(V,a)},0===n.length?r.createElement("div",{className:W},r.createElement(N.bC,{loader:G}),r.createElement(A._,{defaultMessage:"No new notifications",id:"notifications_center_no_new_notifications"})):r.createElement("div",{className:j},n.map((e=>r.createElement(H,{key:e.id,notification:e,onDeepLinkClick:s,onViewed:o})))))},q=()=>r.createElement(A._,{defaultMessage:"Notifications",id:"notification"}),K=e=>r.createElement(z,d()({},e));var Y=s(2050),X=s(17302),J=s(2243),Q=s.n(J),$="_36DumnwLlWRK";const ee=r.memo((e=>{let a=e.setting,s=e.title,i=e.description,n=e.className,o=e.onToggle;const l=r.useState(!1),c=Q()(l,2),d=c[0],u=c[1],m=r.useCallback((()=>{u(!0),(0,E.L)({event:"uaGtmEvents_clicks",eventCategory:"settings",eventAction:"notifications/".concat(a.category),eventLabel:a.enabled?"off":"on"}),o(a).finally((()=>u(!1)))}),[a,o]);return r.createElement("div",{className:w()($,n)},r.createElement(X.rs,{checked:a.enabled,disabled:d,label:s,name:a.category,subLabel:i,fullWidth:!0,onChange:m}))}));var te=s(81969),ae="_1MDFS93v1psm";const se={promo:{title:r.createElement(A._,{defaultMessage:"Promo",id:"notifications_center_promo_setting_title"}),description:r.createElement(A._,{defaultMessage:"Special offers, news and features",id:"notifications_center_promo_setting_subtitle"})},trading:{title:r.createElement(A._,{defaultMessage:"Trading",id:"notifications_center_trading_setting_title"}),description:r.createElement(A._,{defaultMessage:"Closing trades and price alerts",id:"notifications_center_trading_setting_subtitle"})},tradingSignals:null},ie=(e,a)=>r.createElement(X.xu,{gap:"l",fullWidth:!0},a),re=()=>{const e=(0,g.G)(SettingsService),a=(0,_.o)(e.store).settings,s=(0,_.o)(e.load.pending);r.useEffect((()=>{e.load()}),[e]);const i=r.useCallback((a=>e.toggleSetting(a)),[e]),n=(0,Y.x)(te.v,{wrapper:ie});return s?r.createElement(S.it,null):r.createElement(X.xu,{gap:"s",padding:["m","l"]},r.createElement(X.xv,{variant:"M / Regular"},r.createElement(A._,{defaultMessage:"Select the notifications you want to receive.",id:"notifications_center_description"})),r.createElement(X.xu,{gap:"m"},r.createElement(X.Zb,null,a.map((e=>{const a=se[e.category];return a?r.createElement("div",{className:ae,key:e.category},r.createElement(ee,{description:a.description,setting:e,title:a.title,onToggle:i})):null})))),n)},ne=()=>r.createElement(A._,{defaultMessage:"Notifications",id:"notification"}),oe=e=>r.createElement(re,d()({},e));var le=s(14282),ce=s(26763),de=s(35716),ue=s(96667),me=s(40846),pe=s(27634),he=s(14978);function ve(e,a,s,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.Gc9;function n(){e&&e()}return(0,he.Fv)({id:"example",type:"default",image:r,title:a,description:s,actionText:i,meta:{pushId:"",source:"local"},onClick:n})}class InAppMessageService extends p.t{addMessage(e,a,s,i){this.addMessageFn(e,a,s,i)}constructor(e){super(),this.addMessageFn=e}}var ge=s(30654);class StateTransformer{static parse(e){return e.map(StateTransformer.parseNotification)}static parseNotification(e){return{id:e.id,actionTitle:e.action_title,appDeeplink:e.app_deeplink,category:e.category,createdAt:e.created_at,isViewed:e.is_viewed,name:e.name,title:e.title,body:e.body,webDeeplink:e.web_deeplink}}}class NotificationsRepository{findAll(){return(0,i.Z)((function*(){const e=yield ge.$.getUserNotificationsList();return e?StateTransformer.parse(e):[]}))()}markAsViewed(e){return(0,i.Z)((function*(){yield ge.$.userNotificationsView({ids:e.map((e=>e.id))})}))()}subscribeOnAdd(e){this.webSocket.subscribe(),this.webSocket.onNotificationChange((a=>{a.forEach((a=>e(StateTransformer.parseNotification(a))))}))}constructor(e){this.webSocket=e}}class SettingsTransformer{static parse(e){return[{category:"promo",enabled:e.promo_enabled},{category:"trading",enabled:e.trading_enabled},{category:"tradingSignals",enabled:e.trading_signals_enabled}]}static serialize(e){return e.reduce(((e,a)=>{switch(a.category){case"promo":e.promo_enabled=a.enabled;break;case"trading":e.trading_enabled=a.enabled;break;case"tradingSignals":e.trading_signals_enabled=a.enabled}return e}),{promo_enabled:!1,trading_enabled:!1,trading_signals_enabled:!1})}}class SettingsRepository{findAll(){return(0,i.Z)((function*(){const e=yield ge.$.getUserNotificationsOptions();return e?SettingsTransformer.parse(e):[]}))()}save(e){return(0,i.Z)((function*(){yield ge.$.setUserNotificationsOptions(SettingsTransformer.serialize(e))}))()}}var _e=s(86933);class WebSocket{onNotificationChange(e){this.listeners[_e.mi.NOTIFICATION]=e,this.subscribe()}subscribe(){this.isSubscribed||(this.isSubscribed=!0,this.connect.onPush(((e,a)=>{e===_e.mi.NOTIFICATION&&Array.isArray(a)&&this.listeners[_e.mi.NOTIFICATION](a)})),this.subscribeEvents())}subscribeEvents(){this.connect.subscribeEventList([_e.tN.NOTIFICATION])}constructor(e){this.listeners={[_e.mi.NOTIFICATION]:()=>{}},this.isSubscribed=!1,this.connect=e,this.connect.onRestore((()=>{this.isSubscribed&&this.subscribeEvents()}))}}var fe=s(58952);const Ee=(0,fe.WV)({deeplink_action:(0,fe.t$)("push-settings")}),Se=(0,fe.WV)({deeplink_action:(0,fe.t$)("notification-center")});var ye=s(2771);const be=(0,n.v)({name:"Notifications",dependsOn:[l.u$,pe.im,le.F0],services(e,a){const s=new ye.$A((0,ye.gZ)()),r=(n=(0,i.Z)((function*(e,a,s,i){yield(0,o.ic)(de.GL);const r=(0,o.Sc)(de.GL);null==r||r.addMessage({id:"indicatorsErrorNotice",component:ve((()=>{i&&i()}),a,e,s)})})),function(e,a,s,i){return n.apply(this,arguments)});var n;return{notificationsService:new NotificationsService(a.notificationsRepository),settingsService:new SettingsService(a.settingsRepository),inAppMessageService:new InAppMessageService(r),permissionService:s}}},{repositories:()=>({notificationsRepository:new NotificationsRepository(new WebSocket(ue.Z.add())),settingsRepository:new SettingsRepository}),publicApi:e=>({notificationsPermissionService:e.permissionService,inAppMessageService:e.inAppMessageService})});var Ce;be.use(pe.VJ,((e,a,s)=>e+s.notificationsService.getState().unviewedNotificationsCount)).use(pe.Ox,((e,a)=>{let s=a.profileSidebarService;const i=r.useCallback((()=>{s.openById(me.uW.NOTIFICATION_CENTER)}),[s]);return r.createElement(C,{onClick:i})})).use(pe.Fk,((e,a)=>{let s=a.profileSidebarService;const i=r.useCallback((()=>{s.openById(me.Mm.NOTIFICATION_SETTINGS)}),[s]);return r.createElement(T,{onClick:i})})).use((0,pe.X1)(me.uW.NOTIFICATION_CENTER),(()=>r.createElement(q,null))).use((0,pe.VT)(me.uW.NOTIFICATION_CENTER),((e,a)=>{let s=a.profileSidebarService;const i=r.useCallback((e=>{var a;s.close(),null===(a=(0,o.Sc)(ce.NAVIGATION_SERVICE))||void 0===a||a.tryOpenDeepLink(e,!1)}),[]);return r.createElement(K,{onOpenDeepLinkClick:i,className:e.className})})).use((0,pe.X1)(me.uW.NOTIFICATION_SETTINGS),(()=>r.createElement(ne,null))).use((0,pe.VT)(me.uW.NOTIFICATION_SETTINGS),(e=>r.createElement(oe,{className:e.className}))).onStart((Ce=(0,i.Z)((function*(e){let a=e.notificationsService,s=e.commandService,i=e.profileSidebarService;yield a.load(),s.registerCommand(Se.guard,(()=>{i.openById(me.uW.NOTIFICATION_CENTER)})),s.registerCommand(Ee.guard,(()=>{i.openById(me.uW.NOTIFICATION_SETTINGS)}))})),function(e){return Ce.apply(this,arguments)})).enable((0,i.Z)((function*(){return yield(0,o.ic)(ce.ACCOUNT_SERVICE),!0})))},2771:(e,a,s)=>{"use strict";s.d(a,{$A:()=>PermissionService,gZ:()=>l});var i=s(29257),r=s(7223);const n=(0,s(29229).S)();class PermissionService extends r.t{get permission(){return this.adapter.getPermission()}request(){var e=this;return(0,i.Z)((function*(){return yield e.adapter.requestPermission(),e.updatePermission(),e.adapter.getPermission()}))()}listenChangePermission(){var e=this;return(0,i.Z)((function*(){e.unlistenPermission(),e.unlistenPermission=yield e.adapter.listenPermision(e.updatePermission.bind(e))}))()}updatePermission(){const e=this.adapter.getPermission();this.update({permission:e}),this.applySideEffect(n,{permission:e})}constructor(e){super({permission:e.getPermission()}),this.adapter=e,this.unlistenPermission=()=>{},this.listenChangePermission().catch((()=>{}))}}const o={getPermission:()=>"denied",requestPermission:()=>Promise.resolve("denied"),listenPermision:()=>Promise.resolve((()=>{}))},l=()=>{return"Notification"in window&&"navigator"in window&&"permissions"in window.navigator?{getPermission:()=>window.Notification.permission,requestPermission:()=>window.Notification.requestPermission(),listenPermision:(e=(0,i.Z)((function*(e){var a;const s=null!==(a=yield window.navigator.permissions.query({name:"notifications"}))&&void 0!==a?a:null;return s?(s.addEventListener("change",e),()=>s.removeEventListener("change",e)):()=>{}})),function(a){return e.apply(this,arguments)})}:o;var e}},59925:(e,a,s)=>{"use strict";s.d(a,{P:()=>he});var i=s(27378),r=s(60521),n=s(13243),o=s(94503),l=s(28373),c=s(6680),d=s(17330),u=s(83714),m=s(82844),p=s(26763),h=s(73533),v=s(5182),g=s(71003),_=s(80561),f=s(22895),E=s(4083),S=s(53323),y=s(93824),b=s(25974),C=s(54463),T=s(8275),A=s(12802),k=s(29257),w=s(23934),N=s(62132),R=s(30654),I=s(72785);class OrdersHistoryFttRepository{find(e){return(0,k.Z)((function*(){const a=yield R.g.getOrderHistoryFtt({account_id:e.account_id,cursor:e.cursor,limit:e.limit,pairs:e.pairs||[],from:e.from,status:e.status||[],to:e.to}),s=a.orders,i=a.next_cursor_id;return Promise.resolve({list:s.map((e=>function(e){const a=e.updated;return{id:e.id,pair:e.pair,dir:e.dir,duration:e.duration,status:e.status,group:e.group,createTime:e.created,timeOpen:e.time_open,courseTarget:e.course_target,openCase:e.time_open?I.Ns.TIME_OPEN:I.Ns.COURSE_TARGET,amount:e.amount,dealId:e.deal_id,currency:"demo"===e.group?"demo":e.currency,updateTime:a,winperc:e.winperc,groupDate:"number"==typeof a?new Date(1e3*a):new Date,accountId:e.account_id}}(e))),cursor:i})}))()}constructor(){this.emitter=(0,w.Z)(),N.W.subscribe.fttOrdersChange((e=>{this.emitter.emit("ordersClose",e.map((e=>function(e){const a=e.update_at||e.time;return{id:e.id,pair:e.pair,dir:e.dir,duration:e.duration,status:e.status,group:e.group,createTime:e.time,timeOpen:e.time_open,courseTarget:e.course_target,openCase:e.time_open?I.Ns.TIME_OPEN:I.Ns.COURSE_TARGET,amount:e.amount,dealId:e.deal_id,currency:"demo"===e.group?"demo":e.currency,updateTime:a,winperc:e.winperc,groupDate:"number"==typeof a?new Date(1e3*a):new Date,accountId:e.account_id}}(e))))}))}}var D=s(37323),O=s(7223);class OrdersHistoryFttService extends O.t{init(){this.getState().list.length||this.loadInitial()}loadInitial(){var e=this;return(0,k.Z)((function*(){e.getState().list.length&&e.update({list:[]}),e.cursor=void 0;const a=yield e.load();e.update({list:a})}))()}loadMore(){var e=this;return(0,k.Z)((function*(){if(!e.getState().list.length||!e.cursor)return;const a=yield e.load();e.update({list:[...e.getState().list,...a]})}))()}toggleCard(e){this.update((a=>({selectedCardId:a.selectedCardId===e?null:e})))}showDeal(e){this.inputs.showDeal(e)}toggleActiveFilter(e){const a=this.getState().activeFilter;this.update({activeFilter:null!==a&&a===e?null:e})}setFilter(e){this.update({filter:(0,D.Z)({},this.getState().filter,e)}),this.loadInitial()}getAsset(e){return this.inputs.getAsset(e)}getOrder(e){return this.getState().list.find((a=>a.id===e))}showOrder(e){this.inputs.showOrderTab()}getAccountData(){return this.inputs.getAccountData()}resetFilters(){var e;const a=this.inputs.getAccountData().id,s=null===(e=this.getState().filter)||void 0===e?void 0:e.accountId;this.setFilter({asset:null,result:null,period:null,accountId:s!==a?a:s})}getRequestParams(e){var a,s;const i=this.getState().filter,r="executed"===i.result?["success"]:["expire","cancel","error"];return{account_id:i.accountId,cursor:void 0!==e?e:this.cursor,order:["updated_at"],pairs:i.asset?[i.asset.id]:[],from:null===(a=i.period)||void 0===a?void 0:a.from,to:null===(s=i.period)||void 0===s?void 0:s.to,status:i.result?r:["cancel","expire","success","error"],limit:10}}constructor(e,a){super({list:[],selectedCardId:null,filter:{asset:null,period:null,accountId:a.getAccountData().id,result:null},activeFilter:null,results:["executed","canceled"],assetList:a.getAssetList()}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,k.Z)((function*(){const e=yield s.repository.find(s.getRequestParams());return e?(s.cursor=e.cursor,Promise.resolve(e.list)):Promise.resolve([])}))),this.addDeal=e=>{const a=this.getState().list;this.update({list:[...e,...a]})};var i,r=this;this.addOrders=(i=(0,k.Z)((function*(e){const a=r.getState().list,s=(yield r.repository.find(r.getRequestParams(0))).list.map((e=>e.id)),i=a.map((e=>e.id)),n=e.filter((e=>"wait"!==e.status&&s.includes(e.id)&&!i.includes(e.id)));if(n.length){if(!a.length)return void(yield r.loadInitial());r.update({list:[...n,...a]})}})),function(e){return i.apply(this,arguments)}),this.repository.emitter.on("ordersClose",this.addOrders)}}var L=s(3121),M=s(63967),P=s(97415),x=s(36732),F=s(17302),B=s(26338),Z=s(6228),U=s(18985),H=s(45797),G=s(96937),V=s(64356),W=s(74262);const j=i.memo((e=>{let a=e.itemId,s=e.selected,r=e.onClickCard,n=e.onGoToDeal;const o=(0,M.G)(OrdersHistoryFttService),l=o.getOrder(a),c=i.useMemo((()=>(0,V.Z)((0,D.Z)({},l),{pair:o.getAsset(l.pair)})),[o,l]),d=i.useCallback((()=>{r(l.id)}),[r,l.id]),u=i.useCallback((()=>{n(l)}),[n,l]);return i.createElement(W.Gn,{key:l.id,order:c,selected:s,isOpened:s,selectOrder:d,goToDeal:u,actionAvailable:!0})}));j.displayName="DealsHistoryCard";const z=(0,U.vU)({executed:{id:"orders_history_executed_filter_title",defaultMessage:"Executed"},canceled:{id:"orders_history_canceled_filter_title",defaultMessage:"Canceled"}}),q=e=>{let a=e.panelContainerRef,s=e.activeFilterId,r=e.filterId,n=e.onClick;const o=(0,M.G)(OrdersHistoryFttService),l=(0,P.o)(o.store),c=l.filter,d=l.results,u=i.useCallback((e=>{"all"===(null==e?void 0:e.id)?o.setFilter({result:null}):c.result!==(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&o.setFilter({result:e.id})}),[o,c]);return i.createElement(x.fb,{title:i.createElement(m._,{id:"orders_history_status_selection_title",defaultMessage:"Order Status"}),selectedId:(null==c?void 0:c.result)||"all",defaultItemId:"all",panelContainerRef:a,list:[{id:"all",title:i.createElement(m._,{id:"orders_history_any_status_filter_title",defaultMessage:"Any Status"})},...d.map((e=>({id:e,title:i.createElement(m._,Object.assign({},z[e]))})))],filterId:r,activeFilterId:s,onClick:n,onSetFilter:u})};q.displayName="FilterResult";const K=e=>e.onlyAccountFilter?i.createElement(m._,{id:"trades_history_empty_list_info",defaultMessage:"You don't have any closed or cancelled trades on this account"}):i.createElement(m._,{id:"trades_history_filtered_empty_list_info",defaultMessage:"No trades matching your search parameters found"}),Y=(0,U.vU)({pattern:{id:"trades_history_time_selection_input_tech",defaultMessage:"D/M/Y"},placeholder:{id:"trades_history_time_selection_input",defaultMessage:"dd/mm/yyyy"}}),X=i.memo((e=>{let a=e.isBottom,s=e.accountList,r=e.getServerTime;var n,o;const l=H.NW.formatMessage(Y.pattern),c=H.NW.formatMessage(Y.placeholder),d=(0,M.G)(OrdersHistoryFttService),u=(0,P.o)(d.store),m=u.list,p=u.selectedCardId,h=u.assetList,v=u.filter,g=(0,P.o)(d.load.pending),_=i.useRef(null),f=Boolean(!g&&!m.length),E=Boolean(g&&!m.length),S=Boolean(g&&m.length),y=(0,L.Z)(i.useState(""),2),b=y[0],C=y[1],T=i.useMemo((()=>m.length?(0,Z.B)(m.sort(((e,a)=>Number(a.groupDate)-Number(e.groupDate)))):{}),[m]),A=d.getAccountData().id,k=i.useCallback((e=>{d.toggleCard(e)}),[d]),w=i.useCallback((e=>{d.showDeal(e)}),[d]),N=i.useCallback((e=>{C(e===b?"":e)}),[C,b]),R=i.useCallback((e=>{d.setFilter({asset:e})}),[d]),I=i.useCallback((e=>{(0,B.Z)(v.period,e)||d.setFilter({period:e})}),[d,v]),D=i.useCallback((e=>{v.accountId!==Number(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&d.setFilter({accountId:Number(e.id)})}),[d,v]);return i.useEffect((()=>{a&&d.loadMore()}),[a,d]),i.useEffect((()=>{d.init()}),[d]),i.createElement(x.RH,null,i.createElement(x.RH.Filters,null,i.createElement(x.vO,null,i.createElement(x.vO.Filters,null,i.createElement(F.Z6,null,i.createElement(x.vO.FiltersWrapper,null,i.createElement(x.ev,{defaultItemId:String(A),accountList:s,filter:v.accountId,panelContainerRef:_,filterId:"accounts-1",activeFilterId:b,onSetFilter:D,onClick:N}),i.createElement(x.Tj,{assetList:h,filter:v.asset,panelContainerRef:_,filterId:"asset-1",activeFilterId:b,filterSearchItems:G.cM,onSetFilter:R,onClick:N}),i.createElement(x.nZ,{filter:v.period,panelContainerRef:_,pattern:l,placeholder:c,filterId:"period-1",activeFilterId:b,onSetFilter:I,onClick:N}),i.createElement(q,{activeFilterId:b,filterId:"result-1",panelContainerRef:_,onClick:N}))))),i.createElement(x.vO.PanelContainer,{containerRef:_})),i.createElement(x.RH.Wrapper,null,E?i.createElement(x.RH.Loader,null):null,f?i.createElement(x.RH.NoDeals,{text:i.createElement(K,{onlyAccountFilter:!((null===(n=v.period)||void 0===n?void 0:n.to)||(null===(o=v.period)||void 0===o?void 0:o.from)||v.asset||v.result)})}):null,Object.keys(T).map((e=>{const a=T[e];return i.createElement(i.Fragment,{key:e},i.createElement(x.iz,{now:new Date(1e3*r()),time:a[0].groupDate,moreInfo:null}),a.map((e=>i.createElement(j,{key:e.id,itemId:e.id,selected:p===e.id,onGoToDeal:w,onClickCard:k}))))}))),!!m.length&&i.createElement(i.Fragment,null,i.createElement(x.RH.InfinityLoader,{loading:S})))}));X.displayName="OrdersHistoryList";var J=s(59312),Q=s(10002);class OrderActiveService extends O.t{get collection(){return this.ordersCollectionMap[this.inputs.accountData.id]}get isCanceling(){return this.collection.models.some((e=>e.canceling))}get ordersCount(){return this.collection.models.length}get selectedOrder(){return this.collection&&this.collection.selected}init(){this.load(this.inputs.accountsList),(0,r.reaction)((()=>this.collection.models.filter((e=>e.status!==I.mF.WAIT))),(e=>{e.forEach((e=>{this.collection.remove(e.id)}))})),(0,r.reaction)((()=>this.collection.models.length),(()=>{this.update({count:this.collection.models.length})}),{fireImmediately:!0}),this.initSocketEvents()}createOrder(e){const a=this.inputs.accountData,s=a.type,i=a.id;return this.repository.openOrder({account_id:i,amount:e.sum,dir:e.dir,group:s,pair:e.pair,course_target:"quote"===e.type?e.openQuote:void 0,time_open:"time"===e.type?e.openTimeStamp/1e3:void 0,winperc:e.winperc,duration:e.duration}).then((e=>e.length?(this.updateOrders(e),e[0]):Promise.reject()))}updateOrders(e){e.forEach((e=>{const a=this.ordersCollectionMap[e.accountId];a&&a.update([e],{remove:!1,select:!1})}))}cancelOrders(e){const a=e.map(this.getOrder).filter((e=>e));return Promise.all(a.map((e=>this.cancelOrder(e.id))))}cancelOrder(e){const a=this.getOrder(e);return!a||a.canceling?Promise.reject():(a.canceling=!0,new Promise(((s,i)=>{this.inputs.accountData?this.repository.cancelOrder({id:e,group:a.group,account_id:a.accountId}).then((e=>{(0,r.runInAction)("cancelOrder transaction",(()=>{a.canceling=!1,a.status="cancel",e.length&&(a.updateTime=e[0].updateTime)})),s(e[0])})).catch((e=>{a.canceling=!1,i(e)})):i()})))}selectOrder(e){const a=this.collection.getById(e);a&&(this.selectedOrderId=e,this.selectGroup(a.pair))}selectOrderAsset(e){const a=this.collection.getById(e);a&&this.inputs.selectAsset(a.pair)}unselectOrder(){this.selectedOrderId=null}selectGroup(e){this.selectedGroupId=e}unselectGroup(e){e===this.selectedGroupId&&(this.selectedGroupId=null)}showOrder(e,a){const s=this.getOrder(e);s&&(this.inputs.showOrderTab(),this.selectOrder(s.id),this.selectOrderAsset(s.id),this.selectedGroupId=s.pair,this.scrollOrderData={id:e,delay:a})}hideDeal(){this.unselectOrder(),this.unselectGroup(null)}updateInputs(e){this.inputs=(0,D.Z)({},this.inputs,e),void 0!==e.accountsList&&this.createOrderCollections(e.accountsList)}updateServerTime(e){this.timeTicker.serverTime=e}getAsset(e){return this.inputs.getAsset(e)}showError(e){this.inputs.showError(e)}getOrder(e){return this.collection.getById(e,!0)}load(e){this.createOrderCollections(e)}handleChangeOrder(e){this.updateOrders(e)}initSocketEvents(){this.repository.subscribeEvents(),this.repository.emitter.on("open",(()=>{this.repository.subscribeEvents()})),this.repository.emitter.on("restore",this.handleRestore),this.repository.emitter.on("ordersChange",this.handleChangeOrder)}handleRestore(){this.repository.subscribeEvents();const e=[];Object.keys(this.ordersCollectionMap).forEach((a=>{this.ordersCollectionMap[Number(a)].models.forEach((a=>{let s=a.id,i=a.group;e.push({id:s,group:i})}))})),this.repository.reconnectOrders(e)}createOrderCollections(e){e.forEach((a=>{if(!this.ordersCollectionMap[a.id]){const e=new Q.C([],{sort:"id",order:"desc"});e.onRemove=e=>{e.some((e=>{var a;return e.id===(null===(a=this.collection.selected)||void 0===a?void 0:a.id)}))&&this.unselectOrder()},this.ordersCollectionMap[a.id]=e}this.removeOrderCollections(e)}))}removeOrderCollections(e){Object.keys(this.ordersCollectionMap).filter((a=>e.every((e=>e.id!==Number(a))))).forEach((e=>delete this.ordersCollectionMap[e]))}constructor(e,a){super({count:0}),this.repository=e,this.ordersCollectionMap={},this.timeTicker={serverTime:Math.floor((new Date).getTime()/1e3)},this.userSelectedOrder=null,this.lastClosedOrder=null,this.scrollOrderData=null,this.getOrder=this.getOrder.bind(this),this.handleChangeOrder=this.handleChangeOrder.bind(this),this.handleRestore=this.handleRestore.bind(this),this.inputs=a}}(0,J.gn)([r.observable],OrderActiveService.prototype,"timeTicker",void 0),(0,J.gn)([r.observable.ref],OrderActiveService.prototype,"userSelectedOrder",void 0),(0,J.gn)([r.observable.ref],OrderActiveService.prototype,"lastClosedOrder",void 0),(0,J.gn)([r.observable],OrderActiveService.prototype,"closeConfirmationId",void 0),(0,J.gn)([r.observable],OrderActiveService.prototype,"selectedOrderId",void 0),(0,J.gn)([r.observable],OrderActiveService.prototype,"scrollOrderData",void 0),(0,J.gn)([r.observable],OrderActiveService.prototype,"selectedGroupId",void 0),(0,J.gn)([r.observable],OrderActiveService.prototype,"inputs",void 0),(0,J.gn)([r.computed],OrderActiveService.prototype,"collection",null),(0,J.gn)([r.computed],OrderActiveService.prototype,"isCanceling",null),(0,J.gn)([r.computed],OrderActiveService.prototype,"ordersCount",null),(0,J.gn)([r.computed],OrderActiveService.prototype,"selectedOrder",null),(0,J.gn)([r.action.bound],OrderActiveService.prototype,"updateOrders",null),(0,J.gn)([r.action.bound],OrderActiveService.prototype,"cancelOrders",null),(0,J.gn)([r.action.bound],OrderActiveService.prototype,"cancelOrder",null),(0,J.gn)([r.action.bound],OrderActiveService.prototype,"selectOrder",null),(0,J.gn)([r.action.bound],OrderActiveService.prototype,"selectOrderAsset",null),(0,J.gn)([r.action.bound],OrderActiveService.prototype,"unselectOrder",null),(0,J.gn)([r.action],OrderActiveService.prototype,"selectGroup",null),(0,J.gn)([r.action],OrderActiveService.prototype,"unselectGroup",null),(0,J.gn)([r.action],OrderActiveService.prototype,"showOrder",null);var $=s(86933);function ee(e){const a=e.update_at||e.time;return{id:e.id,pair:e.pair,dir:e.dir,duration:e.duration,status:e.status,group:e.group,createTime:e.time,timeOpen:e.time_open,courseTarget:e.course_target,openCase:e.time_open?I.Ns.TIME_OPEN:I.Ns.COURSE_TARGET,amount:e.amount,dealId:e.deal_id,currency:"demo"===e.group?"demo":e.currency,canceling:!1,updateTime:a,selected:!1,winperc:e.winperc,groupDate:"number"==typeof a?new Date(1e3*a):new Date,accountId:e.account_id}}function te(e,a){return a?Promise.reject(a.message):e.length?Promise.resolve(e.map((e=>ee(e)))):Promise.resolve([])}class OrderActiveRepository{find(e){return Promise.resolve()}openOrder(e){return(0,k.Z)((function*(){const a=(0,L.Z)(yield N.W.request.fttOrdersOpening(e),2);return te(a[0],a[1])}))()}cancelOrder(e){return(0,k.Z)((function*(){const a=(0,L.Z)(yield N.W.request.fttOrdersCanceling(e),2);return te(a[0],a[1])}))()}reconnectOrders(e){N.W.push.fttOrdersReconnect(e)}subscribeEvents(){N.W.push.subscribeChangesSkipBatching([$.WJ.DEALS_ORDER_CHANGE])}constructor(){this.emitter=(0,w.Z)(),N.W.on("open",(()=>{this.emitter.emit("open")})),N.W.on("restore",(()=>{this.emitter.emit("restore")})),N.W.subscribe.fttOrdersChange((e=>{this.emitter.emit("ordersChange",e.map((e=>ee(e))))}))}}var ae=s(73598),se=s(46525),ie=s(8895),re=s(10028);function ne(e,a){return{id:e.id,currency:e.currencyName,isCommon:a,type:e.type}}function oe(e){return{id:e.id,icon:e.icon,title:e.title,precision:e.precision,lockedTrading:e.lockedTrading}}const le=(0,U.vU)({day_today:{id:"day_today",defaultMessage:"Today"},day_tomorrow:{id:"day_tomorrow",defaultMessage:"Tomorrow"},day_yesterday:{id:"day_yesterday",defaultMessage:"Yesterday"}}),ce=(e,a)=>{const s=function(e,a){const s=(0,re.i)(a),i=s.day,r=s.month,n=s.year,o=(Math.floor(e.getTime()/1e3)-Math.floor(new Date(n,r,i).getTime()/1e3))/86400;return o>=0&&o<1?"today":o>0&&o<=2?"tomorrow":o<0&&o>=-1?"yesterday":null}(e,a);switch(s){case"today":return i.createElement(m._,Object.assign({},le.day_today));case"tomorrow":return i.createElement(m._,Object.assign({},le.day_tomorrow));case"yesterday":return i.createElement(m._,Object.assign({},le.day_yesterday));default:return null}},de=i.memo((e=>{let a=e.grouped,s=e.itemId;const r=(0,M.G)(OrderActiveService),n=r.collection.getById(s,!0),o=(0,d.rF)((null==n?void 0:n.pair)||""),l=i.useCallback((()=>{r.selectedOrderId!==s?(r.unselectOrder(),r.selectOrder(s),r.selectOrderAsset(s)):r.unselectOrder()}),[r,s]),c=i.useCallback((e=>{n&&r.cancelOrder(e).catch((e=>{r.showError(e.message)}))}),[r,n]),u=(0,i.useCallback)((e=>{const a=new Date(1e3*e);return i.createElement(i.Fragment,null,ce(a,new Date(1e3*r.timeTicker.serverTime)),","," ",(0,ie.M)(a,{withSeconds:!1}))}),[r]);return i.createElement(ae.Qj,null,(()=>{const e=r.selectedOrderId===s;return n?i.createElement(W.Dx,{order:n,asset:o,grouped:a,selected:e,isOpened:e,selectOrder:l,cancelOrder:c,formatTimeOpen:u}):null}))}));de.displayName="OrderActiveCard";const ue=i.memo((e=>{let a=e.groupId,s=e.items;const r=(0,M.G)(OrderActiveService),n=(0,d.rF)(a),o=i.useCallback((e=>{e===r.selectedGroupId?r.selectGroup(null):r.selectGroup(e)}),[r]),l=i.useCallback((e=>{r.cancelOrders(e).catch((e=>{r.showError(e.message)}))}),[r]);return i.createElement(ae.Qj,null,(()=>{const e=r.selectedGroupId===a;return i.createElement(W.Qb,{id:a,orders:s,asset:n,isOpened:e,toggleGroup:o,cancelOrder:l},(e=>i.createElement(W.nh,null,s.map((a=>i.createElement(de,{modalPortalEl:e,grouped:!0,key:a.id,itemId:a.id}))))))}))}));ue.displayName="DealActiveGroup";const me=e=>{let a=e.scroll,s=e.group,r=e.scrollOrderData;return i.useLayoutEffect((()=>{let e=0;if(r){const s=document.querySelector("[data-id=fx-".concat(r.id,"]"));s&&(r.delay?e=window.setTimeout((()=>{a.toElement(s.getBoundingClientRect(),"center","center","smooth")}),r.delay):a.toElement(s.getBoundingClientRect(),"center","center","smooth"))}return()=>{clearTimeout(e)}}),[a,r]),i.createElement(x.yJ.List,null,Object.keys(s).map((e=>{const a=s[e];return 1===a.length?i.createElement(de,{key:a[0].id,itemId:a[0].id,grouped:!1,collapsible:!0,active:!1}):i.createElement(ue,{groupId:e,items:a,key:e})})))},pe=i.memo((e=>{let a=e.scroll;const s=(0,M.G)(OrderActiveService);return i.createElement(ae.Qj,null,(()=>{const e=(0,se.Z)(s.collection.models,(e=>e.pair));return i.createElement(me,{scroll:a,group:e,scrollOrderData:s.scrollOrderData})}))}));pe.displayName="OrderActiveList";const he=(0,n.v)({name:"OrdersFtt",dependsOn:[_.b,v.K,g.x,h.Kg,d.M7,f.x,u.e8,b.M,o.Ul,A.Q],services(e,a){const s=new OrdersHistoryFttService(a.ordersHistoryFttRepository,{getAccountData:()=>({id:e.commonLegacyServiceList.accountService.selectedAccount.id,group:e.commonLegacyServiceList.accountService.selectedAccount.group||""}),getAsset:a=>oe(e.fttAssetsService.getAsset(a)),getAssetList(){const a=e.fttAssetsService.getState().assets;return Object.keys(a).map((e=>{const s=a[e];return{id:s.id,title:s.title,icon:s.icon}}))},showDeal(a){a.dealId&&(e.dealsActiveFttService.getDeal(a.dealId)?e.dealsActiveFttService.showDeal(a.dealId,1e3):e.dealDetailsFttService.showDealInPopup({id:a.dealId,account_id:a.accountId,group:a.group}))},showOrderTab(){e.commonLegacyServiceList.sideBarService.goTo(T.KO.TRADING_HISTORY_FTT),e.tradingHistoryBarServiceFtt.selectTab("orders")}}),i=e.commonLegacyServiceList.accountService.selectedAccount;return{ordersHistoryFttService:s,orderActiveFttService:new OrderActiveService(a.orderActiveRepository,{accountData:ne(i,e.commonLegacyServiceList.accountService.isCommonAccount(i)),accountsList:e.commonLegacyServiceList.accountService.accountsList.map((a=>ne(a,e.commonLegacyServiceList.accountService.isCommonAccount(a)))),getAsset:a=>oe(e.fttAssetsService.getAsset(a)),showError:e=>{var a;null===(a=(0,c.Sc)(p.NOTICE_SERVICE))||void 0===a||a.add({id:"test",collectionName:S.sm.TOP,layoutProps:{msgType:"error",html:e},notice:{period:6},layout:y.G0})},selectAsset:e=>{var a;null===(a=(0,c.Sc)(p.ASSET_MENU_SERVICE))||void 0===a||a.selectAsset(e,"ftt")},showOrderTab(){e.commonLegacyServiceList.sideBarService.goTo(T.KO.TRADES),e.tradingPanelService.handleChangeMechanic("ftt")}})}}},{repositories:()=>({ordersHistoryFttRepository:new OrdersHistoryFttRepository,orderActiveRepository:new OrderActiveRepository}),publicApi:e=>e}),ve=(0,l.k)(he,(e=>i.createElement(X,{isBottom:e.isBottom,accountList:e.accountList,getServerTime:e.getServerTime})));he.use(E.I,((e,a,s)=>[{count:s.ordersHistoryFttService.getState().list.length,type:"orders",title:i.createElement(m._,{id:"orders",defaultMessage:"Orders"}),component:i.createElement(ve,{isBottom:a.isBottom,accountList:[...s.accountService.getState().activeAccounts,...s.accountService.getState().archivesAccounts].map((e=>({id:e.id,name:e.name,icon:e.currencyIcon,active:"closed"!==e.status,isDemo:"demo"===e.type}))),getServerTime:s.commonLegacyServiceList.timeService.getServerTime}),order:1},...e]));const ge=(0,l.k)(he,(e=>i.createElement(pe,{scroll:e.scroll})));he.use(E._,((e,a,s)=>[{title:i.createElement(m._,{id:"orders",defaultMessage:"Orders"}),content:i.createElement(ge,{scroll:a.scroll}),count:s.orderActiveFttService.getState().count,order:1},...e])),he.use(C.BM,((e,a,s)=>[...e,{mechanic:"ftt",count:s.orderActiveFttService.getState().count}])),he.onStart((e=>{e.orderActiveFttService.init();const a=e.commonLegacyServiceList,s=a.accountService;a.sideBarService.sideBarMajor.onStackChange(((a,s)=>{s===T.KO.TRADING_HISTORY_FTT&&e.ordersHistoryFttService.resetFilters()})),(0,r.reaction)((()=>e.commonLegacyServiceList.accountService.selectedAccount),(()=>{e.orderActiveFttService.updateInputs({accountData:ne(s.selectedAccount,s.isCommonAccount(s.selectedAccount))})})),(0,r.reaction)((()=>[...s.accountsList]),(()=>{e.orderActiveFttService.updateInputs({accountsList:s.accountsList.map((a=>ne(a,e.commonLegacyServiceList.accountService.isCommonAccount(a))))})})),e.timeService.events.on("serverTime",(a=>{e.orderActiveFttService.updateServerTime(a.timestamp)}))})),he.enable((e=>e.tradingMechanicsService.enabled("ftt")))},47932:(e,a,s)=>{"use strict";s.d(a,{o:()=>Se});var i=s(27378),r=s(60521),n=s(13243),o=s(28373),l=s(6680),c=s(94503),d=s(18404),u=s(83714),m=s(82844),p=s(26763),h=s(8275),v=s(73533),g=s(5182),_=s(71003),f=s(16685),E=s(54463),S=s(89172),y=s(9707),b=s(80027),C=s(53323),T=s(93824),A=s(25974),k=s(12802),w=s(29257),N=s(23934),R=s(62132),I=s(30654),D=s(72785),O=s(10028);function L(e,a){return{id:e.id,currency:e.currencyName,isCommon:a,type:e.type}}function M(e){return{id:e.id,icon:e.icon,title:e.title,precision:e.precision,stopLossRate:e.stopLossRate,takeProfitRate:e.takeProfitRate,stopOutRate:e.stopOutRate,minCommission:e.minCommission,openCommissionMax:e.openCommissionMax,lockedTrading:e.lockedTrading}}function P(e){return{type:e.type,value:e.value}}function x(e){return{type:e.type,value:e.value,trailing:e.trailing}}function F(e){const a=e.updated_at;return{id:e.id,pair:e.pair,dir:e.dir,status:e.status,group:e.group,createTime:e.created_at,timeOpen:e.time_target,courseTarget:e.price_target,openCase:e.time_target?D.Ns.TIME_OPEN:D.Ns.COURSE_TARGET,amount:e.amount,dealId:e.deal_id,currency:"demo"===e.group?"demo":e.currency,updateTime:a,groupDate:"number"==typeof a?new Date(1e3*a):new Date,multiplicator:e.multiplicator,accountId:e.account_id,takeProfit:e.take_profit&&P(e.take_profit),stopLoss:e.stop_loss&&x(e.stop_loss)}}class OrdersHistoryFxRepository{find(e){return(0,w.Z)((function*(){const a=yield I.g.getOrderHistoryFx({account_id:e.account_id,cursor:e.cursor,limit:e.limit,pairs:e.pairs||[],from:e.from,statuses:e.status||[],to:e.to}),s=a.orders,i=a.next_cursor_id;return Promise.resolve({list:s.map((e=>F(e))),cursor:i})}))()}constructor(){this.emitter=(0,N.Z)(),R.W.subscribe.fxOrdersChange((e=>{this.emitter.emit("ordersClose",e.map((e=>F(e))))}))}}var B=s(37323),Z=s(7223);class OrdersHistoryFxService extends Z.t{init(){this.getState().list.length||this.loadInitial()}loadInitial(){var e=this;return(0,w.Z)((function*(){e.getState().list.length&&e.update({list:[]}),e.cursor=void 0;const a=yield e.load();e.update({list:a})}))()}loadMore(){var e=this;return(0,w.Z)((function*(){if(!e.getState().list.length||!e.cursor)return;const a=yield e.load();e.update({list:[...e.getState().list,...a]})}))()}toggleCard(e){this.update((a=>({selectedCardId:a.selectedCardId===e?null:e})))}showDeal(e){this.inputs.showDeal(e)}toggleActiveFilter(e){const a=this.getState().activeFilter;this.update({activeFilter:null!==a&&a===e?null:e})}setFilter(e){this.update({filter:(0,B.Z)({},this.getState().filter,e)}),this.loadInitial()}getAsset(e){return this.inputs.getAsset(e)}getOrder(e){return this.getState().list.find((a=>a.id===e))}showOrder(e){this.inputs.showOrderTab()}getAccountData(){return this.inputs.getAccountData()}resetFilters(){var e;const a=this.inputs.getAccountData().id,s=null===(e=this.getState().filter)||void 0===e?void 0:e.accountId;this.setFilter({asset:null,result:null,period:null,accountId:s!==a?a:s})}getRequestParams(e){var a,s;const i=this.getState().filter,r="executed"===i.result?["success"]:["expire","cancel","error"];return{account_id:i.accountId,cursor:void 0!==e?e:this.cursor,order:["updated_at"],pairs:i.asset?[i.asset.id]:[],from:null===(a=i.period)||void 0===a?void 0:a.from,to:null===(s=i.period)||void 0===s?void 0:s.to,status:i.result?r:["cancel","expire","success","error"],limit:10}}constructor(e,a){super({list:[],selectedCardId:null,filter:{asset:null,period:null,accountId:a.getAccountData().id,result:null},activeFilter:null,results:["executed","canceled"],assetList:a.getAssetList()}),this.repository=e,this.inputs=a;var s=this;this.load=this.createTask((0,w.Z)((function*(){const e=yield s.repository.find(s.getRequestParams());return e?(s.cursor=e.cursor,Promise.resolve(e.list)):Promise.resolve([])})));var i,r=this;this.addOrders=(i=(0,w.Z)((function*(e){const a=r.getState().list,s=(yield r.repository.find(r.getRequestParams(""))).list.map((e=>e.id)),i=a.map((e=>e.id)),n=e.filter((e=>"wait"!==e.status&&s.includes(e.id)&&!i.includes(e.id)));if(n.length){if(!a.length)return void(yield r.loadInitial());r.update({list:[...n,...a]})}})),function(e){return i.apply(this,arguments)}),this.repository.emitter.on("ordersClose",this.addOrders)}}var U=s(3121),H=s(63967),G=s(97415),V=s(36732),W=s(17302),j=s(26338),z=s(6228),q=s(18985),K=s(45797),Y=s(96937),X=s(64356),J=s(74262);const Q=i.memo((e=>{let a=e.itemId,s=e.selected,r=e.onClickCard,n=e.onGoToDeal;const o=(0,H.G)(OrdersHistoryFxService),l=o.getOrder(a),c=i.useCallback((()=>{r(l.id)}),[r,l.id]),d=i.useCallback((()=>{n(l)}),[n,l]);return i.createElement(J.p$,{key:l.id,order:(0,X.Z)((0,B.Z)({},l),{pair:o.getAsset(l.pair)}),selected:s,isOpened:s,selectOrder:c,goToDeal:d,actionAvailable:!0})}));Q.displayName="DealsHistoryCard";const $=(0,q.vU)({executed:{id:"orders_history_executed_filter_title",defaultMessage:"Executed"},canceled:{id:"orders_history_canceled_filter_title",defaultMessage:"Canceled"}}),ee=e=>{let a=e.panelContainerRef,s=e.activeFilterId,r=e.filterId,n=e.onClick;const o=(0,H.G)(OrdersHistoryFxService),l=(0,G.o)(o.store),c=l.filter,d=l.results,u=i.useCallback((e=>{"all"===(null==e?void 0:e.id)?o.setFilter({result:null}):c.result!==(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&o.setFilter({result:e.id})}),[o,c]);return i.createElement(V.fb,{title:i.createElement(m._,{id:"orders_history_status_selection_title",defaultMessage:"Order Status"}),selectedId:(null==c?void 0:c.result)||"all",defaultItemId:"all",panelContainerRef:a,list:[{id:"all",title:i.createElement(m._,{id:"orders_history_any_status_filter_title",defaultMessage:"Any Status"})},...d.map((e=>({id:e,title:i.createElement(m._,Object.assign({},$[e]))})))],filterId:r,activeFilterId:s,onClick:n,onSetFilter:u})};ee.displayName="FilterResult";const te=e=>e.onlyAccountFilter?i.createElement(m._,{id:"trades_history_empty_list_info",defaultMessage:"You don't have any closed or cancelled trades on this account"}):i.createElement(m._,{id:"trades_history_filtered_empty_list_info",defaultMessage:"No trades matching your search parameters found"}),ae=(0,q.vU)({pattern:{id:"trades_history_time_selection_input_tech",defaultMessage:"D/M/Y"},placeholder:{id:"trades_history_time_selection_input",defaultMessage:"dd/mm/yyyy"}}),se=i.memo((e=>{let a=e.isBottom,s=e.accountList,r=e.getServerTime;var n,o;const l=K.NW.formatMessage(ae.pattern),c=K.NW.formatMessage(ae.placeholder),d=(0,H.G)(OrdersHistoryFxService),u=(0,G.o)(d.store),m=u.list,p=u.selectedCardId,h=u.assetList,v=u.filter,g=(0,G.o)(d.load.pending),_=i.useRef(null),f=Boolean(!g&&!m.length),E=Boolean(g&&!m.length),S=Boolean(g&&m.length),y=(0,U.Z)(i.useState(""),2),b=y[0],C=y[1],T=d.getAccountData().id,A=i.useMemo((()=>m.length?(0,z.B)(m.sort(((e,a)=>Number(a.groupDate)-Number(e.groupDate)))):{}),[m]),k=i.useCallback((e=>{d.toggleCard(e)}),[d]),w=i.useCallback((e=>{d.showDeal(e)}),[d]),N=i.useCallback((e=>{C(e===b?"":e)}),[C,b]),R=i.useCallback((e=>{d.setFilter({asset:e})}),[d]),I=i.useCallback((e=>{(0,j.Z)(v.period,e)||d.setFilter({period:e})}),[d,v]),D=i.useCallback((e=>{v.accountId!==Number(null==e?void 0:e.id)&&(null==e?void 0:e.id)&&d.setFilter({accountId:Number(e.id)})}),[d,v]);return i.useEffect((()=>{a&&d.loadMore()}),[a,d]),i.useEffect((()=>{d.init()}),[d]),i.createElement(V.RH,null,i.createElement(V.RH.Filters,null,i.createElement(V.vO,null,i.createElement(V.vO.Filters,null,i.createElement(W.Z6,null,i.createElement(V.vO.FiltersWrapper,null,i.createElement(V.ev,{defaultItemId:String(T),accountList:s,filter:v.accountId,panelContainerRef:_,filterId:"accounts-1",activeFilterId:b,onSetFilter:D,onClick:N}),i.createElement(V.Tj,{assetList:h,filter:v.asset,panelContainerRef:_,filterId:"asset-1",activeFilterId:b,filterSearchItems:Y.cM,onSetFilter:R,onClick:N}),i.createElement(V.nZ,{filter:v.period,panelContainerRef:_,pattern:l,placeholder:c,filterId:"period-1",activeFilterId:b,onSetFilter:I,onClick:N}),i.createElement(ee,{activeFilterId:b,filterId:"result-1",panelContainerRef:_,onClick:N}))))),i.createElement(V.vO.PanelContainer,{containerRef:_})),i.createElement(V.RH.Wrapper,null,E?i.createElement(V.RH.Loader,null):null,f?i.createElement(V.RH.NoDeals,{text:i.createElement(te,{onlyAccountFilter:!((null===(n=v.period)||void 0===n?void 0:n.to)||(null===(o=v.period)||void 0===o?void 0:o.from)||v.asset||v.result)})}):null,Object.keys(A).map((e=>{const a=A[e];return i.createElement(i.Fragment,{key:e},i.createElement(V.iz,{now:new Date(1e3*r()),time:a[0].groupDate,moreInfo:null}),a.map((e=>i.createElement(Q,{key:e.id,itemId:e.id,selected:p===e.id,onGoToDeal:w,onClickCard:k}))))}))),!!m.length&&i.createElement(i.Fragment,null,i.createElement(V.RH.InfinityLoader,{loading:S})))}));se.displayName="OrdersHistoryList";var ie=s(59312),re=s(40285),ne=s(10002),oe=s(95029);class OrderActiveService extends Z.t{get isTrailingStop(){return this.inputs.isTrailingStop}get collection(){return this.ordersCollectionMap[this.inputs.accountData.id]}get isCanceling(){return this.collection.models.some((e=>e.canceling))}get ordersCount(){return this.collection.models.length}get selectedOrder(){return this.collection&&this.collection.selected}init(){this.load(this.inputs.accountsList),(0,r.reaction)((()=>this.collection.models.filter((e=>e.status!==D.mF.WAIT))),(e=>{e.forEach((e=>{this.collection.remove(e.id)}))})),(0,r.reaction)((()=>this.collection.models.length),(()=>{this.update({count:this.collection.models.length})}),{fireImmediately:!0}),this.initSocketEvents()}createOrder(e){const a=this.inputs.accountData,s=a.type,i=a.id;return this.repository.openOrder({account_id:i,amount:e.sum,dir:e.dir,group:s,multiplicator:e.multiplicator,pair:e.pair,stop_loss:e.stopLoss,take_profit:e.takeProfit,time_target:"time"===e.type?e.openTimeStamp/1e3:void 0,price_target:"quote"===e.type?e.openQuote:void 0}).then((e=>e.length?(this.updateOrders(e),e[0]):Promise.reject()))}toggleLimitsForm(e){this.limitsFormOpened=null!=e?e:!this.limitsFormOpened}convertLimits(e,a,s,i,r){const n=i.pair;let o=(0,oe.jM)(e,a,s,i.amount);const l=this.inputs.getAsset(n).precision;if(r){const e=this.getLimitsRange(i,a);switch((0,oe.CG)(o,r,a,e,(0,X.Z)((0,B.Z)({},i),{pair:{precision:l}}))){case oe.Xy.SlLessThenMin:case oe.Xy.TpLessThenMin:o=e[r].from;break;case oe.Xy.SlMoreThenMax:case oe.Xy.TpMoreThenMax:o=e[r].to}}return o}getLimitsRange(e,a){const s=this.inputs.getAsset(e.pair),i=s.minCommission,r=s.openCommissionMax,n=s.precision,o=s.stopLossRate,l=s.stopOutRate,c=s.takeProfitRate,d=(0,oe.Iu)(e.amount,e.multiplicator,this.inputs.getCommission(e.pair),i,r).amount;return(0,oe.dn)(a,{dealSum:e.amount,precision:(0,oe.p8)(a,n),stopLossRate:o,stopOutRate:l,takeProfitRate:c,floatingPnl:d?-1*d:0})}getLimitsRangeFormatted(e,a,s){const i=s.pair,r=this.inputs.getAsset(i).precision,n=(0,oe.p8)(a,r),o=(0,oe.nH)(s.currency,n)[a],l=this.getLimitsRange(s,a)[e];return{from:o("".concat(l.from)),to:o("".concat(l.to))}}validateLimits(e,a,s){if(!a)return;const i=s.pair;let r;const n=this.inputs.getAsset(i).precision;return r=String(a.value).length?(0,oe.CG)(Number(a.value),e,a.type,this.getLimitsRange(s,a.type),(0,X.Z)((0,B.Z)({},s),{pair:{precision:n}})):(0,oe.md)(String(a.value),a.trailing),r}saveLimits(e,a){const s=this.collection.getById(e,!0);if(s){this.savePrevious(s),this.setLimitsToOrder(s,(0,B.Z)({},a));const i=function(e){let a=e.takeProfit,s=e.stopLoss,i=e.group;return{id:e.id,account_id:e.accountId,group:i,take_profit:a&&{value:a.value,type:a.type},stop_loss:s&&{value:s.value,type:s.type,trailing:s.trailing}}}((0,B.Z)({id:s.id,group:s.group,accountId:this.inputs.accountData.id,takeProfit:s.takeProfit,stopLoss:s.stopLoss},a));return s.limitPending=!0,new Promise(((a,r)=>{this.repository.changeOrder(i).then((e=>{s.limitPending=!1,this.updateOrders(e),a()})).catch((a=>{this.restoreLimits(e),r(a)})).finally((()=>{s.limitPending=!1}))}))}return Promise.resolve()}getStopOut(e,a){return this.convertLimits(re.$i.AMOUNT,e,(0,oe.VL)(a.amount,this.inputs.getAsset(a.pair).stopOutRate),a)}getTrailingLevel(e,a){if(e&&void 0!==e.value)return e.value;const s=a.pair;return(0,oe.VL)(a.amount,this.inputs.getAsset(s).stopOutRate)}showError(e){this.inputs.showError(e)}cancelOrders(e){const a=e.map(this.getOrder).filter((e=>e));return Promise.all(a.map((e=>this.cancelOrder(e.id))))}cancelOrder(e){const a=this.getOrder(e);return!a||a.canceling?Promise.reject():(a.canceling=!0,new Promise(((s,i)=>{this.inputs.accountData?this.repository.closeOrder({id:e,group:a.group}).then((e=>{(0,r.runInAction)("cancelOrder transaction",(()=>{a.canceling=!1,a.status="cancel",e.length&&(a.updateTime=e[0].updateTime)})),s(e[0])})).catch((e=>{a.canceling=!1,i(e)})):i()})))}selectOrder(e){const a=this.collection.getById(e);a&&(this.selectedOrderId=e,this.selectGroup(a.pair))}selectOrderAsset(e){const a=this.collection.getById(e);a&&this.inputs.selectAsset(a.pair)}unselectOrder(){this.selectedOrderId=null}selectGroup(e){this.selectedGroupId=e}unselectGroup(e){e===this.selectedGroupId&&(this.selectedGroupId=null)}showOrder(e,a){const s=this.getOrder(e);s&&(this.inputs.showOrderTab(),this.selectOrder(s.id),this.selectedGroupId=s.pair,this.scrollOrderData={id:e,delay:a})}hideDeal(){this.unselectOrder(),this.unselectGroup(null)}updateInputs(e){this.inputs=(0,B.Z)({},this.inputs,e),void 0!==e.accountsList&&this.createOrderCollections(e.accountsList)}updateServerTime(e){this.timeTicker.serverTime=e}getAmounts(){return this.inputs.getAmounts()}getAsset(e){return this.inputs.getAsset(e)}getOrder(e){return this.collection.getById(e,!0)}savePrevious(e){this.previousLimits={stopLoss:e.stopLoss?Object.assign({},e.stopLoss):void 0,takeProfit:e.takeProfit?Object.assign({},e.takeProfit):void 0}}setLimitsToOrder(e,a){void 0!==a.takeProfit&&(e.takeProfit=a.takeProfit),void 0!==a.stopLoss&&(e.stopLoss=a.stopLoss)}restoreLimits(e){const a=this.getOrder(e);a&&(a.stopLoss=this.previousLimits.stopLoss?Object.assign({},this.previousLimits.stopLoss):void 0,a.takeProfit=this.previousLimits.takeProfit?Object.assign({},this.previousLimits.takeProfit):void 0)}load(e){this.createOrderCollections(e)}createOrderCollections(e){e.forEach((a=>{if(!this.ordersCollectionMap[a.id]){const e=new ne.C([],{sort:"id",order:"desc"});e.onRemove=e=>{e.some((e=>{var a;return e.id===(null===(a=this.collection.selected)||void 0===a?void 0:a.id)}))&&this.unselectOrder()},this.ordersCollectionMap[a.id]=e}this.removeOrderCollections(e)}))}removeOrderCollections(e){Object.keys(this.ordersCollectionMap).filter((a=>e.every((e=>e.id!==Number(a))))).forEach((e=>delete this.ordersCollectionMap[e]))}updateOrders(e){e.forEach((e=>{const a=this.ordersCollectionMap[e.accountId];a&&a.update([e],{remove:!1,select:!1})}))}handleChangeOrder(e){this.updateOrders(e)}handleRestore(){this.repository.subscribeEvents();const e=[];Object.keys(this.ordersCollectionMap).forEach((a=>{this.ordersCollectionMap[Number(a)].models.forEach((a=>{let s=a.id,i=a.group;e.push({id:s,group:i})}))})),this.repository.reconnectOrders(e)}initSocketEvents(){this.repository.subscribeEvents(),this.repository.emitter.on("open",(()=>{this.repository.subscribeEvents()})),this.repository.emitter.on("restore",this.handleRestore),this.repository.emitter.on("ordersChange",this.handleChangeOrder)}constructor(e,a){super({count:0}),this.repository=e,this.ordersCollectionMap={},this.previousLimits={},this.timeTicker={serverTime:Math.floor((new Date).getTime()/1e3)},this.limitsFormOpened=!1,this.lastClosedOrder=null,this.scrollOrderData=null,this.handleChangeOrder=this.handleChangeOrder.bind(this),this.handleRestore=this.handleRestore.bind(this),this.getOrder=this.getOrder.bind(this),this.inputs=a}}(0,ie.gn)([r.observable],OrderActiveService.prototype,"timeTicker",void 0),(0,ie.gn)([r.observable],OrderActiveService.prototype,"limitsFormOpened",void 0),(0,ie.gn)([r.observable.ref],OrderActiveService.prototype,"lastClosedOrder",void 0),(0,ie.gn)([r.observable],OrderActiveService.prototype,"closeConfirmationId",void 0),(0,ie.gn)([r.observable],OrderActiveService.prototype,"selectedOrderId",void 0),(0,ie.gn)([r.observable],OrderActiveService.prototype,"scrollOrderData",void 0),(0,ie.gn)([r.observable],OrderActiveService.prototype,"selectedGroupId",void 0),(0,ie.gn)([r.observable],OrderActiveService.prototype,"inputs",void 0),(0,ie.gn)([r.computed],OrderActiveService.prototype,"isTrailingStop",null),(0,ie.gn)([r.computed],OrderActiveService.prototype,"collection",null),(0,ie.gn)([r.computed],OrderActiveService.prototype,"isCanceling",null),(0,ie.gn)([r.computed],OrderActiveService.prototype,"ordersCount",null),(0,ie.gn)([r.computed],OrderActiveService.prototype,"selectedOrder",null),(0,ie.gn)([r.action.bound],OrderActiveService.prototype,"toggleLimitsForm",null),(0,ie.gn)([r.action.bound],OrderActiveService.prototype,"cancelOrders",null),(0,ie.gn)([r.action.bound],OrderActiveService.prototype,"cancelOrder",null),(0,ie.gn)([r.action.bound],OrderActiveService.prototype,"selectOrder",null),(0,ie.gn)([r.action.bound],OrderActiveService.prototype,"selectOrderAsset",null),(0,ie.gn)([r.action.bound],OrderActiveService.prototype,"unselectOrder",null),(0,ie.gn)([r.action],OrderActiveService.prototype,"selectGroup",null),(0,ie.gn)([r.action],OrderActiveService.prototype,"unselectGroup",null),(0,ie.gn)([r.action],OrderActiveService.prototype,"showOrder",null),(0,ie.gn)([r.action.bound],OrderActiveService.prototype,"updateOrders",null);var le=s(86933);function ce(e){const a=e.updated_at||e.created_at;return{id:e.id,pair:e.pair,dir:e.dir,status:e.status,group:e.group,createTime:e.created_at,timeOpen:e.time_target,courseTarget:e.price_target,courseOpen:e.price_open,openCase:e.time_target?D.Ns.TIME_OPEN:D.Ns.COURSE_TARGET,amount:e.amount,dealId:e.deal_id,currency:"demo"===e.group?"demo":e.currency,arenaId:null,canceling:!1,limitPending:!1,multiplicator:e.multiplicator,takeProfit:e.take_profit&&P(e.take_profit),stopLoss:e.stop_loss&&x(e.stop_loss),updateTime:a,groupDate:"number"==typeof a?new Date(1e3*a):new Date,selected:!1,accountId:e.account_id}}function de(e,a){return a?Promise.reject(a.message):e.length?Promise.resolve(e.map((e=>ce(e)))):Promise.resolve([])}class OrderActiveRepository{find(e){return Promise.resolve()}openOrder(e){return(0,w.Z)((function*(){const a=(0,U.Z)(yield R.W.request.fxOrdersOpening((0,X.Z)((0,B.Z)({},e),{stop_loss:e.stop_loss,take_profit:e.take_profit})),2);return de(a[0],a[1])}))()}closeOrder(e){return(0,w.Z)((function*(){const a=(0,U.Z)(yield R.W.request.fxOrdersCanceling(e),2);return de(a[0],a[1])}))()}changeOrder(e){let a=e.id,s=e.group,i=e.take_profit,r=e.stop_loss;return(0,w.Z)((function*(){const e=(0,U.Z)(yield R.W.request.fxOrdersChanging({id:a,stop_loss:r,take_profit:i,group:s}),2);return de(e[0],e[1])}))()}reconnectOrders(e){R.W.push.fxOrdersReconnect(e)}subscribeEvents(){R.W.push.subscribeChangesSkipBatching([le.nE.ORDERS_UPDATED])}constructor(){this.emitter=(0,N.Z)(),R.W.on("open",(()=>{this.emitter.emit("open")})),R.W.on("restore",(()=>{this.emitter.emit("restore")})),R.W.subscribe.fxOrdersChange((e=>{this.emitter.emit("ordersChange",e.map((e=>ce(e))))}))}}var ue=s(73598),me=s(46525),pe=s(8895);const he=(0,q.vU)({day_today:{id:"day_today",defaultMessage:"Today"},day_tomorrow:{id:"day_tomorrow",defaultMessage:"Tomorrow"},day_yesterday:{id:"day_yesterday",defaultMessage:"Yesterday"}}),ve=(e,a)=>{const s=function(e,a){const s=(0,O.i)(a),i=s.day,r=s.month,n=s.year,o=(Math.floor(e.getTime()/1e3)-Math.floor(new Date(n,r,i).getTime()/1e3))/86400;return o>=0&&o<1?"today":o>0&&o<=2?"tomorrow":o<0&&o>=-1?"yesterday":null}(e,a);switch(s){case"today":return i.createElement(m._,Object.assign({},he.day_today));case"tomorrow":return i.createElement(m._,Object.assign({},he.day_tomorrow));case"yesterday":return i.createElement(m._,Object.assign({},he.day_yesterday));default:return null}},ge=i.memo((e=>{let a=e.grouped,s=e.itemId;const r=(0,H.G)(OrderActiveService),n=r.collection.getById(s,!0),o=(0,d.D9)((null==n?void 0:n.pair)||""),l=(0,d.L1)((null==n?void 0:n.pair)||""),c=i.useCallback((()=>{r.selectedOrderId!==s?(r.unselectOrder(),r.selectOrder(s),r.selectOrderAsset(s)):r.unselectOrder()}),[r,s]),u=i.useCallback((e=>{n&&r.cancelOrder(e).catch((e=>{r.showError(e.message)}))}),[r,n]),m=i.useCallback((e=>{r.showError(e.mess)}),[r]),p=(0,i.useCallback)((e=>{const a=new Date(1e3*e);return i.createElement(i.Fragment,null,ve(a,new Date(1e3*r.timeTicker.serverTime)),","," ",(0,pe.M)(a,{withSeconds:!1}))}),[r]);return i.createElement(ue.Qj,null,(()=>{const e=r.selectedOrderId===s;return n?i.createElement(J.aN,{order:n,asset:o,commission:l.commission,grouped:a,selected:e,isOpened:e,selectOrder:c,cancelOrder:u,formatTimeOpen:p,handleLimitError:m,limitsFormOpened:r.limitsFormOpened,dealOrderCurrentService:r}):null}))}));ge.displayName="OrderActiveCard";const _e=i.memo((e=>{let a=e.groupId,s=e.items;const r=(0,H.G)(OrderActiveService),n=(0,d.D9)(a),o=i.useCallback((e=>{e===r.selectedGroupId?r.selectGroup(null):r.selectGroup(e)}),[r]),l=i.useCallback((e=>{r.cancelOrders(e).catch((e=>{r.showError(e.message)}))}),[r]);return i.createElement(ue.Qj,null,(()=>{const e=r.selectedGroupId===a;return i.createElement(J.Y_,{id:a,orders:s,asset:n,isOpened:e,toggleGroup:o,cancelOrder:l},(e=>i.createElement(J.nh,null,s.map((a=>i.createElement(ge,{modalPortalEl:e,grouped:!0,key:a.id,itemId:a.id}))))))}))}));_e.displayName="DealActiveGroup";const fe=e=>{let a=e.scroll,s=e.group,r=e.scrollOrderData;return i.useLayoutEffect((()=>{let e=0;if(r){const s=document.querySelector("[data-id=fx-".concat(r.id,"]"));s&&(r.delay?e=window.setTimeout((()=>{a.toElement(s.getBoundingClientRect(),"center","center","smooth")}),r.delay):a.toElement(s.getBoundingClientRect(),"center","center","smooth"))}return()=>{clearTimeout(e)}}),[a,r]),i.createElement(V.yJ.List,null,Object.keys(s).map((e=>{const a=s[e];return 1===a.length?i.createElement(ge,{key:a[0].id,itemId:a[0].id,grouped:!1,collapsible:!0,active:!1}):i.createElement(_e,{groupId:e,items:a,key:e})})))},Ee=i.memo((e=>{let a=e.scroll;const s=(0,H.G)(OrderActiveService);return i.createElement(ue.Qj,null,(()=>{const e=(0,me.Z)(s.collection.models,(e=>e.pair));return i.createElement(fe,{scroll:a,group:e,scrollOrderData:s.scrollOrderData})}))}));Ee.displayName="OrderActiveList";const Se=(0,n.v)({name:"OrdersFx",dependsOn:[f.y,g.K,_.x,v.Kg,d.qS,d.tA,S.o,u.e8,A.M,c.Ul,k.Q],services(e,a){const s=new OrdersHistoryFxService(a.ordersHistoryFxRepository,{getAccountData:()=>({id:e.commonLegacyServiceList.accountService.selectedAccount.id,group:e.commonLegacyServiceList.accountService.selectedAccount.group||""}),getAsset:a=>M(e.fxAssetsService.getAsset(a)),getAssetList(){const a=e.fxAssetsService.getState().assets;return Object.keys(a).map((e=>{const s=a[e];return{id:s.id,title:s.title,icon:s.icon}}))},showDeal(a){a.dealId&&(e.dealsActiveFxService.getDeal(a.dealId)?e.dealsActiveFxService.showDeal(a.dealId,1e3):e.dealDetailsFxService.showDealInPopup({id:a.dealId,account_id:a.accountId}))},showOrderTab(){e.commonLegacyServiceList.sideBarService.goTo(h.KO.TRADING_HISTORY_FX),e.tradingHistoryBarServiceFx.selectTab("orders")}}),i=e.commonLegacyServiceList.accountService.selectedAccount;return{ordersHistoryFxService:s,orderActiveFxService:new OrderActiveService(a.orderActiveRepository,{accountData:L(i,e.commonLegacyServiceList.accountService.isCommonAccount(i)),accountsList:e.commonLegacyServiceList.accountService.accountsList.map((a=>L(a,e.commonLegacyServiceList.accountService.isCommonAccount(a)))),isTrailingStop:e.commonLegacyServiceList.featureToggleService.getFeatureValue(b.y2.OTP_FX_TRADING_TRAILING_STOP)||!1,getAsset:a=>M(e.fxAssetsService.getAsset(a)),getCommission:a=>{var s;return(null===(s=e.tradingLegacyServiceList.pairServiceFx.getPair(a))||void 0===s?void 0:s.commission)||0},showError:e=>{var a;null===(a=(0,l.Sc)(p.NOTICE_SERVICE))||void 0===a||a.add({id:"test",collectionName:C.sm.TOP,layoutProps:{msgType:"error",html:e},notice:{period:6},layout:T.G0})},selectAsset:e=>{var a;null===(a=(0,l.Sc)(p.ASSET_MENU_SERVICE))||void 0===a||a.selectAsset(e,"fx")},getAmounts:()=>e.tradingLegacyServiceList.dealServiceFx.dealAmounts,showOrderTab(){e.commonLegacyServiceList.sideBarService.goTo(h.KO.TRADES),e.tradingPanelService.handleChangeMechanic("fx")}})}}},{repositories:()=>({ordersHistoryFxRepository:new OrdersHistoryFxRepository,orderActiveRepository:new OrderActiveRepository}),publicApi:e=>e}),ye=(0,o.k)(Se,(e=>i.createElement(se,{isBottom:e.isBottom,accountList:e.accountList,getServerTime:e.getServerTime})));Se.use(y.J,((e,a,s)=>[{count:s.ordersHistoryFxService.getState().list.length,type:"orders",title:i.createElement(m._,{id:"orders",defaultMessage:"Orders"}),component:i.createElement(ye,{isBottom:a.isBottom,accountList:[...s.accountService.getState().activeAccounts,...s.accountService.getState().archivesAccounts].map((e=>({id:e.id,name:e.name,icon:e.currencyIcon,active:"closed"!==e.status,isDemo:"demo"===e.type}))),getServerTime:s.commonLegacyServiceList.timeService.getServerTime}),order:1},...e]));const be=(0,o.k)(Se,(e=>i.createElement(Ee,{scroll:e.scroll})));Se.use(y.W,((e,a,s)=>[{title:i.createElement(m._,{id:"orders",defaultMessage:"Orders"}),content:i.createElement(be,{scroll:a.scroll}),count:s.orderActiveFxService.getState().count,order:1},...e])),Se.use(E.BM,((e,a,s)=>[...e,{mechanic:"fx",count:s.orderActiveFxService.getState().count}])),Se.onStart((e=>{e.orderActiveFxService.init();const a=e.commonLegacyServiceList,s=a.accountService;a.sideBarService.sideBarMajor.onStackChange(((a,s)=>{s===h.KO.TRADING_HISTORY_FX&&e.ordersHistoryFxService.resetFilters()})),(0,r.reaction)((()=>e.commonLegacyServiceList.accountService.selectedAccount.id),(()=>{e.orderActiveFxService.updateInputs({accountData:L(s.selectedAccount,s.isCommonAccount(s.selectedAccount))})})),(0,r.reaction)((()=>[...s.accountsList]),(()=>{e.orderActiveFxService.updateInputs({accountsList:s.accountsList.map((a=>L(a,e.commonLegacyServiceList.accountService.isCommonAccount(a))))})})),(0,r.reaction)((()=>!!e.commonLegacyServiceList.featureToggleService.getFeatureValue(b.y2.OTP_FX_TRADING_TRAILING_STOP)),(a=>{e.orderActiveFxService.updateInputs({isTrailingStop:a})})),e.timeService.events.on("serverTime",(a=>{e.orderActiveFxService.updateServerTime(a.timestamp)}))})),Se.enable((e=>e.tradingMechanicsService.enabled("fx")))},27445:(e,a,s)=>{"use strict";s.d(a,{u:()=>o});var i=s(13243),r=s(7223),n=s(83128);class SidebarPanelService extends r.t{constructor(){super({isReady:n.$p.getState().isReady}),n.$p.watch((e=>{let a=e.isReady;return this.update({isReady:a})}))}}const o=(0,i.v)({name:"PayIn",services:()=>({sidebarPanelService:new SidebarPanelService})},{publicApi:e=>({payInSidebarPanelService:e.sidebarPanelService})})},37588:(e,a,s)=>{"use strict";s.d(a,{O:()=>ue,T:()=>me});var i=s(29257),r=s(27378),n=s(13243),o=s(14282),l=s(95601),c=s(6680),d=s(26763),u=s(61681),m=s(7265),p=s(71003),h=s(97422),v=s(16721),g=s(72735),_=s(37323),f=s(64356),E=s(97974),S=s(7223),y=s(74199),b=s(90212),C=s(66713),T=s(49761),A=s(41365),k=s(23735),w=s(30654);const N=()=>{if((0,A.v)()){const e=(()=>{const e=(0,T.e)(b.L0);return"string"==typeof e?e:null})();if(e)return e}return window.innerWidth<960?"adaptive":"web"},R=e=>{let a=e.isWebView;return e=>{try{(e=>{let a=e.id,s=e.data,i=e.entryPoint,r=e.isWebView,n=e.origin;const o="".concat(N(),"_").concat(a);w.g.statLog({name:"payout_action",value:o,test_name:"common",body:JSON.stringify((0,_.Z)({project:C.yy,is_webview:"boolean"==typeof r?r:(0,A.v)(),origin:n,entryPoint:i},s))})})((0,f.Z)((0,_.Z)({},e),{isWebView:a})),(e=>{let a=e.id,s=e.label,i=void 0===s?"":s,r=e.data;(0,k.L)((0,_.Z)({event:"uaEvent",eventCategory:"withdraw",ga4_event_name:a,eventAction:a,eventLabel:i},r))})((0,_.Z)({},e))}catch(e){console.error(e)}}};var I=s(77740),D=s(88875);const O={ArrowRight:I.Ec8,Check:I.NOm,Success:()=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64",width:"64",height:"64"},r.createElement("g",{clipPath:"url(#a)"},r.createElement("circle",{cx:"32",cy:"32",r:"30",stroke:"var(--positive-alpha)",strokeWidth:"4"}),r.createElement("path",{fill:"var(--positive-alpha)",d:"M22.91 30.59a2 2 0 1 0-2.82 2.82l2.82-2.82ZM28.5 39l-1.41 1.41a2 2 0 0 0 2.82 0L28.5 39Zm15.41-12.59a2 2 0 1 0-2.82-2.82l2.82 2.82Zm-23.82 7 7 7 2.82-2.82-7-7-2.82 2.82Zm9.82 7 14-14-2.82-2.82-14 14 2.82 2.82Z"})),r.createElement("defs",null,r.createElement("clipPath",{id:"a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),Error:()=>r.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none"},r.createElement("g",{stroke:"#70808C",strokeWidth:"4",clipPath:"url(#a)"},r.createElement("circle",{cx:"32",cy:"32",r:"30"}),r.createElement("path",{strokeLinecap:"round",d:"m22 22 20 20M42 22 22 42"})),r.createElement("defs",null,r.createElement("clipPath",{id:"a"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))),Wallet:I.nr$,Info:I.Gc9,Help:I.T08,ScreenLoader:D.a};var L=s(82844);const M={localizeAmountErrors:e=>{let a=e.maxAmountFormatted,s=e.minAmountFormatted,i=e.isNotEnoughMoney,n=e.hasCommissions;return{empty:r.createElement(L._,{id:"withdraw_amount_error_non_filled",defaultMessage:"Enter an amount between {min_amount} and {max_amount}",values:{min_amount:s,max_amount:a}}),min:r.createElement(L._,{id:"withdaw_amount_error_min",defaultMessage:"Minimum withdrawal amount: {min_amount}",values:{min_amount:s}}),max:r.createElement(r.Fragment,null,i?n?r.createElement(L._,{id:"not_enough_money_with_commission",defaultMessage:"Your funds are insufficient to cover the commission."}):r.createElement(L._,{id:"not_enough_money",defaultMessage:"You have insufficient funds"}):r.createElement(L._,{id:"maximal_withdrawal_amount",defaultMessage:"Maximum withdrawal amount {s}",values:{s:a}}))}},localizeAccountInfo:e=>{let a=e.accNumber,s=e.accName;return r.createElement(L._,{id:"account_name_with_id",defaultMessage:"{acc_name} #{acc_id}",values:{acc_id:a,acc_name:s}})},createOrderLoadingText:r.createElement(L._,{id:"withdraw_preloader_processing",defaultMessage:"Withdrawal request processing..."}),confirmSelectWalletButton:r.createElement(L._,{id:"withdrawal_alternative_flow_button",defaultMessage:"Change Payment Method"}),walletsListNote:r.createElement(L._,{id:"payment_method_text",defaultMessage:"You can withdraw money using payment methods you made deposits with"}),transferAmountTooltip:r.createElement(L._,{id:"withdraw_transfer_amount_tooltip",defaultMessage:"The amount that you'll receive"}),commissionTooltipBeforeCalc:r.createElement(L._,{id:"withdrawal_commission_tooltip_before_calculation",defaultMessage:"Here you'll be able to see how your commission is calculated based on the information you provide"}),commissionTooltipNotCharged:r.createElement(L._,{id:"withdrawal_commission_tooltip_no_commission",defaultMessage:"No commission will be charged based on the information you provided"}),getFixedCommissionTooltip:e=>r.createElement(L._,{id:"withdrawal_commission_tooltip_fixed_amount",defaultMessage:"A fixed {amount} commission was calculated based on the information you provided",values:{amount:e}}),getComplexCommissionTooltip:e=>r.createElement(L._,{id:"withdrawal_commission_tooltip_formula",defaultMessage:"A {formula} commission was calculated based on the information you provided",values:{formula:e}}),noAvailableWalletsNote:r.createElement(L._,{id:"no_fonds_text",defaultMessage:"To withdraw funds from this account, you first need to top it up"}),maintenanceButtonText:r.createElement(L._,{id:"technical_stub_withdraw_button",defaultMessage:"Got It"}),cancelOrderButton:r.createElement(L._,{id:"cancel_request_button",defaultMessage:"Cancel Request"}),orderDetailsStatusTitle:r.createElement(L._,{id:"withdrawal_information_status",defaultMessage:"Status"}),orderDetailsInfoTitle:r.createElement(L._,{id:"withdrawal_information_title",defaultMessage:"Information"}),mainScreenTitle:r.createElement(L._,{id:"withdraw_title",defaultMessage:"Withdraw"}),transactionType:r.createElement(L._,{id:"active_request_withdrawal",defaultMessage:"Withdrawal"}),activeOrderScreenNote:r.createElement(L._,{id:"withdraw_active_request_description",defaultMessage:"You can create a new withdrawal request once the active request has been completed"}),orderCreateSuccessTitle:r.createElement(L._,{id:"withdrawal_success_title",defaultMessage:"Withdrawal Request Created"}),orderChangeSuccessTitle:r.createElement(L._,{id:"payment_method_changed_title",defaultMessage:"Payment Method Changed"}),doneButtonText:r.createElement(L._,{id:"withdrawal_success_button",defaultMessage:"Done"}),errorButtonText:r.createElement(L._,{id:"withdrawal_fail_button",defaultMessage:"Try Аgain"}),orderCreateRequestErrorTitle:r.createElement(L._,{id:"withdrawal_fail_title",defaultMessage:"Failed to Create Request"}),orderSuccessNote:r.createElement(L._,{id:"withdraw_success_decription",defaultMessage:"97% of withdrawal requests are processed within 24 hours. You can see the current request status in the Withdraw section."}),accountBonus:r.createElement(L._,{id:"cabinet_bonus",defaultMessage:"Bonus"}),noAvailableWalletsButtonTitle:r.createElement(L._,{id:"bat_paywall_button",defaultMessage:"Make Deposit"}),accountsListTitle:r.createElement(L._,{id:"select_account_title",defaultMessage:"Select Account"}),walletsListTitle:r.createElement(L._,{id:"select_payment_method",defaultMessage:"Select Payment Method"}),getExtraFieldsNote:e=>{let a=e.purseName,s=e.noFields;return a&&!s?r.createElement(L._,{id:"withdraw_payment_method_details_screen_description",defaultMessage:"Fill in account details for {payment_method_details}",values:{payment_method_details:a}}):a&&s?r.createElement(L._,{id:"withdrawal_alternative_flow_text",defaultMessage:"Withdrawn funds will be transferred to your account: {payment_method_id}",values:{payment_method_id:a}}):a||s?r.createElement(L._,{id:"withdrawal_alternative_flow_text_without_purse",defaultMessage:"Withdrawn funds will be transferred to your account",values:{payment_method_details:a}}):r.createElement(L._,{id:"withdraw_payment_method_details_screen_description_without_purse",defaultMessage:"Fill in account details",values:{payment_method_details:a}})},accountsListNote:r.createElement(L._,{id:"withdraw_select_account_deposit_bonuses_description",defaultMessage:"Making a withdrawal will remove any deposit bonus on that account"}),extraFieldsFormSubmitButton:r.createElement(L._,{id:"payment_method_button",defaultMessage:"Submit"}),amountFormSubmitButton:e=>r.createElement(L._,{id:"withdraw_button_with_amount",defaultMessage:"Withdraw {amount}",values:{amount:e}}),addWithdrawalMethodButtonTitle:r.createElement(L._,{id:"add_payment_metod_button",defaultMessage:"Add Payment Method"}),orderDetailsDate:r.createElement(L._,{id:"withdrawal_information_time",defaultMessage:"Date and Time"}),orderDetailsTotal:e=>r.createElement(L._,{id:"withdraw_creating_request_total",defaultMessage:"Total, {currency}",values:{currency:e}}),orderDetailsFee:e=>r.createElement(L._,{id:"withdraw_creating_request_commission",defaultMessage:"Commission, {currency}",values:{currency:e}}),orderDetailsBonus:r.createElement(L._,{id:"withdrawal_information_bonuses_expiring",defaultMessage:"Bonuses expiring"}),orderDetailsAccountName:r.createElement(L._,{id:"withdrawal_information_account",defaultMessage:"Account"}),orderDetailsAccountId:r.createElement(L._,{id:"withdrawal_information_trader_ID",defaultMessage:"Trader ID"}),chooseAlternativeMethod:r.createElement(L._,{id:"select_payment_method",defaultMessage:"Select Payment Method"}),payoutMethodUnavailableText:r.createElement(L._,{id:"payment_method_not_available_text",defaultMessage:"We're unable to process your request using this payment method. Please choose a different one to continue the withdrawal process."}),getPayoutMethodUnavailableTitle:e=>r.createElement(L._,{id:"payment_method_not_available_title",defaultMessage:"Withdraw to {method} Unavailable",values:{method:e}}),orderDetailsAmount:e=>r.createElement(L._,{id:"withdraw_creating_request_transfer",defaultMessage:"Transfer Amount, {currency}",values:{currency:e}}),getConfirmationTitle:e=>r.createElement(L._,{id:"withdraw_status_screen_title",defaultMessage:"Withdrawal to {payment_method}",values:{payment_method:e}}),getFromWithLabel:e=>{let a=e.label;return r.createElement(L._,{id:"withdraw_from_account",defaultMessage:"Вывести с {account}",values:{account:a}})},getLimitsMessage:e=>{let a=e.min,s=e.max;return r.createElement(L._,{id:"withdraw_select_payment_method_screen_description",defaultMessage:"From {min_amount} to {max_amount}",values:{min_amount:r.createElement("span",{"data-test":"payout-wallet-limit-min"},a),max_amount:r.createElement("span",{"data-test":"payout-wallet-limit-max"},s)}})},getToWithLabel:e=>{let a=e.label;return r.createElement(L._,{id:"withdraw_to_payment_method",defaultMessage:"To {payment_method}",values:{payment_method:a}})},makeAmountWithCurrency:e=>r.createElement(L._,{id:"amount_label",defaultMessage:"Amount, {currency}",values:{currency:e}}),localizeAmountDescription:e=>{let a=e.from,s=e.to;return r.createElement(L._,{id:"withdraw_select_payment_method_screen_description",defaultMessage:"From {min_amount} to {max_amount}",values:{min_amount:a,max_amount:s}})}};var P=s(13207);const x=()=>r.createElement(P.jL,{noticeName:P.LO.PAY_OUT,style:{marginTop:"16px"}});var F=s(46122),B=s(40114),Z=s(62132);let U=class PayoutError extends Error{constructor(e,a){super(e),this.code=a}};const H={makeErrorReporter:e=>{let a=e.tags;return e=>{let s=e.id,i=e.error,r=e.level;F.b.sendEvent(i,r,s,void 0,a)}},activeOrderFetcher:(G=(0,i.Z)((function*(e){return yield w.$.getActivePayout({accounts:e,project:C.c0})})),function(e){return G.apply(this,arguments)}),walletsFetcher:function(){var e=(0,i.Z)((function*(e){return yield w.$.getPurses({account_id:String(e)})}));return function(a){return e.apply(this,arguments)}}(),createOrder:function(){var e=(0,i.Z)((function*(e){const a=new AbortController,s={method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()},i=yield(0,B.$f)("/cabinet/payout-by-purse-id",s,a.signal);if(i.result)return i.content;if(!i.result&&"error"in i&&"code"in i)throw new U(i.error,i.code)}));return function(a){return e.apply(this,arguments)}}(),cancelOrder:function(){var e=(0,i.Z)((function*(e){const a=new AbortController,s={method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({payout_id:String(e)}).toString()},i=yield(0,B.$f)("/cabinet/payout-cancel",s,a.signal);if("result"in i&&i.result)return i.result;if(!i.result&&"error"in i&&"code"in i)throw new U(i.error,i.code)}));return function(a){return e.apply(this,arguments)}}(),commissionFetcher:function(){var e=(0,i.Z)((function*(e){const a=yield Z.W.request.payoutCommissionGet(e);return Array.isArray(a)?a[0]:a}));return function(a){return e.apply(this,arguments)}}(),maintenanceStatusFetcher:(0,i.Z)((function*(){const e=(yield w.g.getPaymentStatus({names:["withdraw"]})).statuses;return{isActive:!e.withdraw.available,meta:e.withdraw.meta}}))};var G;const V={onPayoutActiveOrderChange:e=>{Z.W.subscribe.payoutHoldChanged((a=>{a.forEach((a=>{let s=a.id,i=a.progress,r=a.status;e.updateOrder({id:s,status:r,progress:i.map((e=>({status:e.status,state:e.state})))})}))}))}};let W=class InitialService extends S.t{open(e){this.panelService.reset(),this.api.stop(),this.api.launchFx(e),this.panelService.openById(this.ui.screens.MAIN)}close(){var e;this.config.isWebViewMode?null===(e=window.commonMethodRunner)||void 0===e||e.close():this.panelService.close()}constructor(e){let a=e.config,s=e.handlers;super();const i=(0,f.Z)((0,_.Z)({},H),{analyticsSender:R({isWebView:a.isWebViewMode})}),r=(0,E.g)({icons:O,handlers:s,translations:M,transport:i,subscriptions:V,config:a}),n=new y.Ku({payOut:{rootId:r.PAY_OUT_SCREENS.MAIN,items:r.screens}});r.api.bindScreenRouter((e=>{n.openById(e)})),r.api.bindCloseFeature(this.close.bind(this)),r.api.slot.set({id:r.SLOT_ID.MAIN_SCREEN_TOP,component:x}),this.config=a,this.api=r.api,this.panelService=n,this.ui={screens:r.PAY_OUT_SCREENS},this.open=this.open.bind(this)}};var j=s(74690);const z=(0,j.Record)({openPayOut:j.Boolean,acc_id:(0,j.Optional)(j.Number)});var q=s(93134),K=s(59343);var Y=s(60042),X=s.n(Y),J=s(73598);const Q="ZixMJaKW",$="n7nWXG4D",ee=r.memo((e=>{let a=e.onClick,s=e.service;return r.createElement(J.Qj,null,(()=>r.createElement("div",{className:X()(Q,s.isOpen&&$),onClick:a})))}));ee.displayName="PayOutBackDrop";const te=(0,r.memo)((e=>{let a=e.showCloseDialog,s=e.payoutService;const n=s.panelService,o=s.api,l=s.ui,c=s.close,d=(0,K.V)(),u=(0,r.useMemo)((()=>d?"rtl":"ltr"),[d]),m=(e=>{let a=e.sendAnalytics,s=e.turnOffFeature;const i=(0,r.useCallback)(((e,s)=>{a({eventId:"forward_screen",label:"navigation",data:{from:e,to:s}})}),[a]),n=(0,r.useCallback)(((e,s)=>{a({eventId:"back_screen",label:"navigation",data:{from:e,to:s}})}),[a]),o=(0,r.useCallback)((()=>{setTimeout((()=>{s()}),300),a({eventId:"close",label:"navigation",data:{}})}),[s,a]);return(0,r.useMemo)((()=>({onForward:i,onBack:n,onClose:o})),[i,n,o])})({sendAnalytics:o.sendAnalytics,turnOffFeature:o.stop}),p=m.onBack,h=m.onClose,v=m.onForward,g=(0,r.useMemo)((()=>[l.screens.ORDER_DETAILS,l.screens.ORDER_CHANGE_RESULT,l.screens.ORDER_CREATE_RESULT]),[l.screens]),_=(0,r.useCallback)((0,i.Z)((function*(){var e;const s=null===(e=n.scope.activeItem)||void 0===e?void 0:e.id,i=yield o.getDataFx(),r=i.order,d=i.maintenance;(r||d.isActive?[...g,l.screens.MAIN]:g).some((e=>e===s))?c():a({handler:c})})),[a,n,o,l,c,g]);return r.createElement("div",{className:"payout-sidebar"},r.createElement(q.f6,{dir:u},r.createElement(ee,{service:n,onClick:_}),r.createElement(y.s_,{type:"detached",animation:"right",panelService:n,className:"payout-sidebar",onForward:v,onBack:p,onClose:h,isStandalone:!1,dir:u,preserveScrollPosition:!1})))}));var ae=s(17302),se=s(63967),ie=s(48083);const re=()=>{const e=(0,se.G)(W),a=(0,r.useCallback)((()=>{(0,ie.qB)(),e.open()}),[e]);return r.createElement(ae.zx,{dataTest:"payments_sidebar_withdraw_button",onClick:a,variant:"secondary",startIcon:r.createElement(I.pYT,null),fullWidth:!0,size:"l"},r.createElement(L._,{id:"cabinet_tab_payout",defaultMessage:"Withdraw"}))};var ne=s(53323),oe=s(5915);const le=(0,r.memo)((e=>{let a=e.notice,s=e.api,i=e.onAgree,n=e.onDisagree,o=e.description,l=e.agreeText,c=e.disagreeText;const d=(0,K.V)(),u=(0,r.useMemo)((()=>d?"rtl":"ltr"),[d]);return r.createElement(q.f6,{dir:u},r.createElement(oe.default,{noticeId:a.id,api:s,content:e=>{let a=e.onClose;return r.createElement(q.f7,{description:r.createElement("span",{"data-test":"payout-confirm-modal-description"},o),agreeButton:{text:r.createElement("span",{"data-test":"payout-confirm-modal-agree-button"},l),clickHandler:()=>{a(),i()}},disagreeButton:{text:r.createElement("span",{"data-test":"payout-confirm-modal-disagree-button"},c),clickHandler:()=>{a(),n()}}})}}))}));le.displayName="memo(PayoutModal)";const ce={closeSidebarPopupAgree:r.createElement(L._,{id:"stop_deposit_procedure_agree",defaultMessage:"Yes"}),closeSidebarPopupDisagree:r.createElement(L._,{id:"stop_deposit_procedure_disagree",defaultMessage:"No"}),cancelOrderPopupAgree:r.createElement(L._,{id:"cancel",defaultMessage:"Cancel"}),cancelOrderPopupDisagree:r.createElement(L._,{id:"back",defaultMessage:"Back"}),closeSidebarPopupDescription:r.createElement(L._,{id:"stop_withdrawal_procedure_description",defaultMessage:"Quit Withdrawal?"}),cancelOrderPopupDescription:r.createElement(L._,{id:"cancel_request_confirmation_text",defaultMessage:"This request will be deleted, and you'll be able to create a new one"})},de=e=>{let a=e.noticeService;const s=R({isWebView:!1});return e=>{let i=e.handler;const n=()=>{s({id:"wd_active_request_cancel_popup_agree",label:"Cancel",entryPoint:""}),i()},o=()=>{s({id:"wd_active_request_cancel_popup_disagree",label:"Back",entryPoint:""})};return a.add({id:"payout_cancel_order_modal",collectionName:ne.sm.CENTER_DIALOG,layout:e=>{let a=e.api,s=e.notice;return r.createElement(le,{api:a,notice:s,onAgree:n,onDisagree:o,description:ce.cancelOrderPopupDescription,agreeText:ce.cancelOrderPopupAgree,disagreeText:ce.cancelOrderPopupDisagree})},notice:{priority:!0}})}};const ue=(0,s(23934).Z)(),me=(0,n.v)({name:"payOut",dependsOn:[o.F0,l.u$,u.G,m.EA,p.x,v.r],services:e=>({init:new W({config:{isWebViewMode:!1,isPayoutRestricted:!1},handlers:{showCancelOrderModal:de({noticeService:e.commonLegacyServiceList.noticeService}),noAvailableWalletsClick:g.gG}})})},{publicApi:e=>e});me.use(l.gj,((e,a)=>{const s=r.useMemo((()=>(0,c.Sc)(d.NOTICE_SERVICE)),[]),i=r.useMemo((()=>(e=>{let a=e.noticeService;const s=R({isWebView:!1});return e=>{let i=e.handler;const n=()=>{s({id:"payout_close_sidebar_dialog_agree",entryPoint:""}),i()},o=()=>{s({id:"payout_close_sidebar_dialog_disagree",entryPoint:""})};return null==a?void 0:a.add({id:"close_payout_sidebar_modal",collectionName:ne.sm.CENTER_DIALOG,layout:e=>{let a=e.api,s=e.notice;return r.createElement(le,{api:a,notice:s,onAgree:n,onDisagree:o,description:ce.closeSidebarPopupDescription,agreeText:ce.closeSidebarPopupAgree,disagreeText:ce.closeSidebarPopupDisagree})},notice:{priority:!0}})}})({noticeService:s})),[s]);return r.createElement(te,{showCloseDialog:i,payoutService:a.init})})).use(h.N,(()=>r.createElement(re,null))).onStart(function(){var e=(0,i.Z)((function*(e){let a=e.commandService,s=e.init;yield(0,c.ic)(d.NOTICE_SERVICE),a.registerCommand(z.guard,(e=>{s.open({accountId:e.acc_id})})),ue.on("openPayout",(e=>{let a=e.accountId;s.open({accountId:a})}))}));return function(a){return e.apply(this,arguments)}}())},93290:(e,a,s)=>{"use strict";s.d(a,{U:()=>v});var i=s(27378),r=s(13243),n=s(95601),o=s(26257),l=s(7223);class PaymentsUiService extends l.t{get paymentButtonDisabled(){return this.getState().paymentButtonDisabled}set paymentButtonDisabled(e){this.update({paymentButtonDisabled:e})}constructor(){super({paymentButtonDisabled:!1})}}var c=s(96481),d=s(87427);class SidebarPanelService extends l.t{constructor(){const e=(0,c.l)(d.q,"isOpen");super({isOpen:e.getState()}),e.subscribe((e=>this.update({isOpen:e})))}}var u=s(63967),m=s(97415);const p=i.lazy((()=>s.e(6995).then(s.bind(s,96995)).then((e=>({default:e.HeaderPayments}))))),h=(0,i.memo)((function(){const e=(0,u.G)(PaymentsUiService),a=(0,m.o)(e.store).paymentButtonDisabled;return i.createElement(p,{disabled:a})})),v=(0,r.v)({name:"Payments",dependsOn:[n.u$,o.Bu],services:()=>({paymentUiService:new PaymentsUiService,sidebarPanelService:new SidebarPanelService})},{publicApi:e=>({paymentUiService:e.paymentUiService,paymentSidebarPanelService:e.sidebarPanelService})});v.use(n.Tb,(()=>i.createElement(h,null))),v.onStart((e=>{let a=e.connectionStubService,s=e.paymentUiService;a.subscribe((e=>{let a=e.offline,i=e.socketFail;const r=a||i;s.paymentButtonDisabled=r}))}))},16721:(e,a,s)=>{"use strict";s.d(a,{d:()=>b,r:()=>y});var i=s(27378),r=s(13243),n=s(28373),o=s(80080),l=s(93134),c=s(95601),d=s(59343),u=s(74199),m=s(87427),p=s(55510),h=s(73598),v=s(48083);function g(){const e=(0,p.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n  transition: ",";\n  opacity: ",";\n  background-color: rgba(0, 0, 0, 0.6);\n  contain: layout;\n"]);return g=function(){return e},e}const _=l.zo.div(g(),(e=>e.isVisible?99:-1),(e=>e.isVisible?"opacity 250ms ease-out, z-index 0ms 0ms":"opacity 225ms ease-in, z-index 0ms 225ms"),(e=>e.isVisible?1:0)),f=(0,i.memo)((e=>{let a=e.service;return i.createElement(h.Qj,null,(()=>i.createElement(_,{isVisible:a.isOpen,onClick:v.xv})))})),E=(0,i.memo)((()=>{const e=(0,d.V)(),a=(0,i.useMemo)((()=>e?"rtl":"ltr"),[e]);return i.useEffect((()=>{let e=null;return(0,o.$)(c.u$,"layout").then((a=>{a&&(e=m.q.onOverlayStateChange((e=>{a.setOverlayState("paymentsSidebar",e)})))})),()=>{null==e||e()}}),[]),i.createElement("div",{className:"payments-sidebar"},i.createElement(l.f6,{dir:a},i.createElement(f,{service:m.q}),i.createElement(u.s_,{type:"detached",animation:"right",panelService:m.q,className:"payments-sidebar",isStandalone:!1,dir:a,preserveScrollPosition:!1})))})),S=()=>i.createElement(E,null),y=(0,r.v)({name:"PaymentsSidebarPlatform"}),b=(0,n.k)(y,(()=>i.createElement(S,null)))},26257:(e,a,s)=>{"use strict";s.d(a,{Bu:()=>i.B,WT:()=>r.W,yD:()=>n.y});var i=s(40685),r=s(41183),n=s(58367);s(83571)},40685:(e,a,s)=>{"use strict";s.d(a,{B:()=>d});var i=s(27378),r=s(13243),n=s(95601),o=s(41183),l=s(83571),c=s(89180);const d=(0,r.v)({name:"platformStub",dependsOn:[n.u$],services:()=>({platformConnectionStubService:new l.x})},{publicApi:e=>({connectionStubService:e.platformConnectionStubService})});d.use(o.W,(()=>i.createElement(c.Q,null)))},83571:(e,a,s)=>{"use strict";s.d(a,{x:()=>PlatformConnectionStubService});var i=s(7223),r=s(62132);class PlatformConnectionStubService extends i.t{constructor(){super({offline:!window.navigator.onLine,socketFail:!1},{onStart:()=>{r.W.on("error",(()=>this.update({socketFail:!0}))),r.W.on("close",(e=>this.update({socketFail:e.code>=1011}))),r.W.on("restore",(()=>this.update({socketFail:!1}))),window.addEventListener("offline",(()=>{this.update({offline:!window.navigator.onLine})})),window.addEventListener("online",(()=>{this.update({offline:!window.navigator.onLine})}))}})}}},41183:(e,a,s)=>{"use strict";s.d(a,{W:()=>i});const i=(0,s(84584).Z)()},5680:(e,a,s)=>{"use strict";s.d(a,{y:()=>m});var i=s(3121),r=s(27378),n=s(97415),o=s(80080),l=s(82322),c=s(693),d=s(40685);const u=(0,r.memo)((function(e){const a=(0,n.o)(e.connectionService.store),s=a.offline,o=a.socketFail,d=(0,r.useMemo)((()=>s||o),[s,o]),u=(0,i.Z)((0,r.useState)(d),2),m=u[0],p=u[1],h=(0,r.useCallback)((()=>{d&&p(!0)}),[d]);return(0,r.useEffect)((()=>{d||p(!1)}),[d]),r.createElement("div",{className:l.Z.container,onClick:h},m&&d?r.createElement("div",{key:"stub",className:l.Z.stub},r.createElement(c.X,{onBack:e.onBack,onClose:e.onClose})):r.createElement("div",{key:"children",className:l.Z.children},e.children))})),m=(0,r.memo)((function(e){const a=(0,i.Z)((0,r.useState)(!1),2),s=a[0],n=a[1],l=(0,i.Z)((0,r.useState)(null),2),c=l[0],m=l[1];return(0,r.useEffect)((()=>{(0,o.$)(d.B,"platformConnectionStubService").then(m).finally((()=>n(!0)))}),[]),s?c?r.createElement(u,{connectionService:c,onBack:e.onBack,onClose:e.onClose},e.children):r.createElement(r.Fragment,null,e.children):null}))},58367:(e,a,s)=>{"use strict";s.d(a,{y:()=>i.y});var i=s(5680)},16606:(e,a,s)=>{"use strict";s.d(a,{Q:()=>p});var i=s(3121),r=s(27378),n=s(63967),o=s(97415),l=s(60042),c=s.n(l),d=s(82844),u=s(83571),m=s(57431);const p=(0,r.memo)((function(){const e=(0,n.G)(u.x),a=(0,o.o)(e.store),s=a.offline,l=a.socketFail,p=(0,r.useMemo)((()=>s||l),[s,l]),h=(0,i.Z)((0,r.useState)(p),2),v=h[0],g=h[1];return(0,r.useEffect)((()=>{let e=-1;return p?g(!0):e=window.setTimeout((()=>g(!1)),1300),()=>{-1!==e&&clearTimeout(e)}}),[p]),r.createElement("div",{"data-test":"platform-connection-stub-overlay",className:c()(m.Z.container,{[m.Z.container__visibled]:v,[m.Z.container__disconnected]:v&&p,[m.Z.container__connected]:v&&!p})},r.createElement("div",{"data-test":"platform-connection-stub-content",className:m.Z.text},r.createElement("span",{"data-test":"platform-connection-stub-text"},p?r.createElement(d._,{id:"status_connection_offline",defaultMessage:"No internet-connection"}):r.createElement(d._,{id:"status_connection_online",defaultMessage:"Connection restored"}))))}))},89180:(e,a,s)=>{"use strict";s.d(a,{Q:()=>i.Q});var i=s(16606)},90250:(e,a,s)=>{"use strict";s.d(a,{X:()=>u});var i=s(27378),r=s(60042),n=s.n(r),o=s(77740),l=s(82844),c=s(17302),d=s(98341);const u=(0,i.memo)((function(e){const a=(0,i.useCallback)((()=>window.location.reload()),[]);return i.createElement("div",{className:n()(d.Z.stub,e.className)},i.createElement("div",{className:d.Z.header},i.createElement("div",null,e.onBack?i.createElement(o.vjc,{className:n()(d.Z.buttonIcon,d.Z.buttonBack),onClick:e.onBack}):null),i.createElement("div",null,e.onClose?i.createElement(o.bMz,{className:n()(d.Z.buttonIcon,d.Z.buttonClose),onClick:e.onClose}):null)),i.createElement("div",{className:d.Z.content},i.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:d.Z.contentIcon},i.createElement("g",null,i.createElement("circle",{cx:"32",cy:"32",r:"30",strokeWidth:"4"}),i.createElement("path",{d:"M22 22L42 42",strokeWidth:"4",strokeLinecap:"round"}),i.createElement("path",{d:"M42 22L22 42",strokeWidth:"4",strokeLinecap:"round"}))),i.createElement(l._,{id:"status_connection_offline_note",defaultMessage:"Error receiving data, check your internet connection or reload the page",className:d.Z.note}),i.createElement(c.zx,{fullWidth:!0,onClick:a},i.createElement(l._,{id:"status_connection_offline_reload",defaultMessage:"Reload"}))))}))},693:(e,a,s)=>{"use strict";s.d(a,{X:()=>i.X});var i=s(90250)},27634:(e,a,s)=>{"use strict";s.d(a,{BO:()=>S,Es:()=>E,Fk:()=>A,Ox:()=>T,P4:()=>b,VJ:()=>y,VT:()=>f,X1:()=>_,cF:()=>k,cl:()=>g,im:()=>N,xO:()=>C,zk:()=>w});var i=s(29257),r=s(27378),n=s(42709),o=s(84584),l=s(76232),c=s(13243),d=s(27544),u=s(6680),m=s(95601),p=s(30681),h=s(40846),v=s(19447);const g=(0,n.g)(),_=(0,n.g)(),f=(0,n.g)(),E=(0,o.Z)(),S=(0,o.Z)(),y=(0,l.t)(),b=(0,l.t)(),C=(0,n.g)(),T=(0,o.Z)(),A=(0,o.Z)(),k=(0,o.Z)(),w=(0,o.Z)(),N=(0,c.v)({name:"Profile",dependsOn:[m.u$],services:()=>({profileSidebarService:(0,d.T)(h.H1,p.K)})},{publicApi:e=>e});N.onStart((e=>{let a=e.layout;e.profileSidebarService.store.map((e=>e.isOpen)).subscribe((e=>{a.setOverlayState("profileSidebar",e)}))})).use(m.Tb,(()=>r.createElement(v.ZP,null))).enable((0,i.Z)((function*(){return yield(0,u.ic)(h.H1),!0})))},84244:(e,a,s)=>{"use strict";s.d(a,{x:()=>F});var i=s(29257),r=s(27378),n=s(99446),o=s(13243),l=s(97415),c=s(17302),d=s(6680),u=s(27544),m=s(81969),p=s(95601),h=s(14282),v=s(26763),g=s(82844),_=s(89119),f=s(35716),E=s(7265),S=s(93627),y=s(27634),b=s(18121),C=s(93290),T=s(40846),A=s(78166),k=s(27445),w=s(3121),N=s(23735);const R=r.memo((function(e){let a=e.notificationService,s=e.profileSidebarService;const n=(0,w.Z)(r.useState(!1),2),o=n[0],l=n[1],d=(0,w.Z)(r.useState(a.getCloudMessagingStatus()),2),u=d[0],m=d[1],p=(0,w.Z)(r.useState(a.getNotificationPermission()),2),h=p[0],v=p[1],_="allowed"===u,f="denied"===h&&a.isDisabledCloundMessaging()||o,E=r.useCallback((0,i.Z)((function*(){try{l(!0),_?yield a.disable("manual"):yield a.allow("manual"),(0,N.L)({event:"uaGtmEvents_clicks",eventCategory:"settings",eventAction:"notifications/push",eventLabel:_?"off":"on"})}finally{l(!1)}})),[_,a]),S=r.useCallback((e=>{e.preventDefault(),s.openById(T.Mm.NOTIFICATION_BENEFITS)}),[s]);return r.useEffect((()=>a.onChangePermission(v)),[a]),r.useEffect((()=>a.onCloudMessagingStatusChanged(m)),[a]),r.createElement(c.Zb,null,r.createElement(c.xu,{gap:"m"},r.createElement(c.rs,{checked:_,disabled:f,name:"push",label:r.createElement(g._,{defaultMessage:"Push Notifications",id:"notifications_center_pushes_setting_title"}),subLabel:r.createElement(r.Fragment,null,r.createElement(g._,{defaultMessage:"Receive push notifications inside your browser",id:"notifications_center_pushes_setting_description"}),r.createElement("br",null),r.createElement(c.xv,{variant:"S / Bold"},r.createElement("a",{onClick:S},r.createElement(g._,{defaultMessage:"Why should I receive them?",id:"n11s_push_benefits_open"})))),onChange:E})))}));var I=s(14978),D=s(7223);class InappService extends D.t{createInapp(e){const a=e({close:()=>{const e=this.notificationService.getState().messages;e.filter((e=>e.id===a.id)).forEach((a=>e.remove(a)))}});var s;this.notificationService.addMessage({id:a.id,component:(s={component:(0,I.Fv)(a),onClose:a.onClose},(0,r.memo)((e=>{const a=e.onClose,i=e.id,n=(0,r.useCallback)((()=>{var e;null==a||a(null,i),null===(e=s.onClose)||void 0===e||e.call(s)}),[a,i]);return r.createElement(s.component,Object.assign({},e,{onClose:n}))})))})}constructor(e){super(),this.notificationService=e}}const O=r.lazy((()=>s.e(951).then(s.bind(s,10951)).then((e=>({default:e.TitleBenefits}))))),L=r.lazy((()=>s.e(951).then(s.bind(s,10951)).then((e=>({default:e.WrapperBenefits})))));var M;const P=null!==(M=[n.i7&&n.nI?"chrome-desktop":null,n.i7&&n.Dt?"chrome-android":null,n.vU?"firefox":null,n.un?"microsoft-edge":null,n.f0?"opera":null].find(Boolean))&&void 0!==M?M:"how-to-enable-browser-notifications",x=()=>{const e=(0,d.Sc)(v.NAVIGATION_SERVICE);e&&e.ovlPlusNavigation&&e.ovlPlusNavigation.goToHelpCenter&&e.ovlPlusNavigation.goToHelpCenter({categoryId:"trading",contentId:P})},F=(0,o.v)({name:"PushNotifications",dependsOn:[p.u$,b.Z,h.F0,y.im,E.EA],optionalDependsOn:[C.U,A.e,k.u],services(){const e=(0,u.T)(f.GL,f.gq);return{pushNotificationsService:e,inappService:new InappService(e)}}},{publicApi:e=>({pushNotifications:e.pushNotificationsService,inappService:e.inappService})});F.use(p.MX,(()=>r.createElement(f.Tx,null))).use(m.v,((e,a)=>{let s=a.pushNotificationsService,i=a.profileSidebarService;return(0,l.o)(s.store).isWebPushSupported?r.createElement(R,{notificationService:s,profileSidebarService:i}):null})).use((0,y.X1)(T.uW.NOTIFICATION_BENEFITS),(()=>r.createElement(O,null))).use((0,y.VT)(T.uW.NOTIFICATION_BENEFITS),((e,a)=>{let s=a.profileSidebarService,i=a.pushNotificationsService;return r.createElement(r.Suspense,{fallback:r.createElement(c.$j,null)},r.createElement(L,{profileSidebarService:s,pushNotificationsService:i,onOpenInstruction:x}))})).onStart((e=>{let a=e.politics,s=e.pushNotificationsService,i=e.paymentSidebarPanelService,n=e.accountTransfersSidebarPanelService,o=e.payInSidebarPanelService,l=e.authentication;!0===a.getPolitic("test_notifications_subscription_v2")?s.setInappRequestConfig({title:r.createElement(g._,{id:"n11s_request_by_time_title",defaultMessage:"Enable notifications"}),description:r.createElement(g._,{id:"n11s_request_by_time_desc",defaultMessage:"Stay up to date with real-time information about closed trades, price alerts and increased profitability"}),actionText:r.createElement(g._,{id:"n11s_request_by_time_actionText",defaultMessage:"Enable"})}):s.handleRequestPermission();const c=e=>e?s.hideMessages():s.showMessages();null==i||i.subscribe((e=>c(e.isOpen))),null==n||n.subscribe((e=>c(e.isFeatureInUse))),null==o||o.subscribe((e=>c(e.isReady))),l.handleLogout((()=>s.clearToken()))})),F.enable((0,i.Z)((function*(){if(null===(0,d.Sc)(f.GL)){(0,_.Z)(new f.gq,{config:f.gq.binderConfig}).start(),yield(0,d.ic)(f.GL)}return yield(0,d.ic)(v.NAVIGATION_SERVICE),!S.H.shouldFeatureBeDisabled("notifications")})))},59234:(e,a,s)=>{"use strict";s.d(a,{Q:()=>L});var i=s(29257),r=s(27378),n=s(13243),o=s(28373),l=s(97415),c=s(95601),d=s(83714),u=s(14282),m=s(98225),p=s(59757),h=s(57615),v=s(29042),g=s(72735),_=s(90569),f=s(77575),E=s(7265),S=s(61681),y=s(38138),b=s(85101);const C={aboutRatings:!0};class BannerVisibilityRepository{update(e){return this.storage.set("bannerVisibility",e),Promise.resolve()}find(){const e=this.storage.get("isBannerClosed");var a;const s=null!==(a=this.storage.get("bannerVisibility"))&&void 0!==a?a:C;var i;return Promise.resolve({aboutRatings:null!==(i=null!=e?e:s.aboutRatings)&&void 0!==i?i:C.aboutRatings})}constructor(){this.storage=new h._({namespace:"@feature/ratings",backend:new v.u})}}var T=s(30654);class LootBoxesRepository{find(e){return(0,i.Z)((function*(){const a=yield T.$.getLootBoxInfo({lootbox:e});return a?class LootBoxTransformer{static parse(e,a){return{id:e,contains:a.contains.map((e=>e))}}}.parse(e,a):null}))()}}var A=s(3121),k=s(57415),w=s(62132);const N=new k.aX(150),R=()=>N.get("getRatingsState",(()=>w.W.request.ratingsStateGet()));class LeaderboardTransformer{static parse(e,a){const s=e.find((e=>e.user_id===a));return{user:s?LeaderboardTransformer.parseLeaderboardPlayer(s,s.position):null,players:e.map((e=>LeaderboardTransformer.parseLeaderboardPlayer(e,e.position)))}}static parseLeaderboardPlayer(e,a){return{id:e.user_id,name:e.name,avatar:e.avatar,country:e.country,position:a,points:e.points}}}class StatisticsTransformer{static parse(e,a,s){return e.filter((e=>s||"battles"!==e.type&&"wins"!==e.type)).map((e=>StatisticsTransformer.parseItem(e,a)))}static parseItem(e,a){const s={type:e.type,icon:e.icon,title:e.title,description:e.description,value:e.value};if("favorite_asset"===e.type){const i=a.find((a=>a.id.toLowerCase()===e.value.toLowerCase()));i&&(s.value=i.title,s.extraImageUrl=i.icon["96x96"])}return s}}class HistoryRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,A.Z)(yield R(),2),s=a[0],i=a[1];if(0===e.cache.userId){const a=yield T.$.userValues(["data","avatar","politics"]),s=a.data,i=a.avatar,r=a.politics;e.cache.userId=s.id,e.cache.avatar=(null==i?void 0:i.small.url)||"",e.cache.battleRoomsEnabled=Boolean(r.ent_battle_rooms_enabled)}if(!s||null!==i)return null;const r=(yield T.$.userValues(["ftt_pairs"])).ftt_pairs,n=e.storage.get(e.cache.userId);var o;return class StateTransformer{static parse(e,a,s,i,r,n){const o=e.leagues.find((a=>a.id===e.user.actual.league_id));if(!e.user.prev||!o)return{nextUpdateAt:e.date_leagues_rebalance,lastTransition:null};const l=e.date_leagues_rebalance;var c,d,u,m;return{nextUpdateAt:e.date_leagues_rebalance,lastTransition:{leaderboard:LeaderboardTransformer.parse(null!==(c=e.user.prev.leaderboard)&&void 0!==c?c:[],i),id:l,place:e.user.prev.position,avatar:s,leagueId:e.user.prev.league_id,status:(u=e.user.prev.league_id,m=e.user.actual.league_id,m>u?"up":m<u?"down":"standoff"),statistics:StatisticsTransformer.parse(null!==(d=e.user.prev.statistics)&&void 0!==d?d:[],r,n),viewed:a===l}}}}.parse(s[0].season,null!==(o=null==n?void 0:n.lastViewedTransitionId)&&void 0!==o?o:null,e.cache.avatar,e.cache.userId,r,e.cache.battleRoomsEnabled)}))()}markAsViewed(e){return this.storage.set(this.cache.userId,{lastViewedTransitionId:e}),Promise.resolve()}constructor(e){this.storage=e,this.cache={userId:0,avatar:"",battleRoomsEnabled:!1}}}class AwardTransformer{static parse(e){return{id:e.id,type:"lootbox",meta:{title:e.meta.title,description:e.meta.description,closedImage:e.meta.closed_image,headerImage:e.meta.header_image,bigWidgetImage:e.meta.big_widget_image},positions:e.positions,positionsCount:e.positions.to-e.positions.from+1}}}const I=(e,a)=>e<a?"completed":e===a?"in-progress":"next";class StateTransformer_StateTransformer{static parse(e,a){const s=LeaderboardTransformer.parse(e.leaderboard,a);if(null===s)return console.error("Fail to parse leaderboard. Not found user: #".concat(a," in ").concat(JSON.stringify(e.leaderboard,null,2))),null;const i=e.leagues.findIndex((a=>a.id===e.user.actual.league_id));return{season:StateTransformer_StateTransformer.parseSeason(e),user:StateTransformer_StateTransformer.parseUser(e),leagues:e.leagues.map(((e,a)=>StateTransformer_StateTransformer.parseLeague(e,a,i))),leaderboard:s,selectedAward:null}}static parseSeason(e){var a;return{id:e.id,dates:{startingAt:e.date_start,endingAt:e.date_end,rebalancingAt:e.date_leagues_rebalance},meta:{title:e.meta.title,rulesStoryId:null!==(a=e.meta.story_id)&&void 0!==a?a:null},welcomeMeta:e.meta.welcome?{description:e.meta.welcome.description,widgetColor:e.meta.welcome.widget_color,bannerImage:e.meta.welcome.banner_image,headerImage:e.meta.welcome.header_image,widgetImage:e.meta.welcome.widget_image}:{description:"",widgetColor:"",bannerImage:"",headerImage:"",widgetImage:""}}}static parseUser(e){const a=e.leagues.findIndex((a=>a.id===e.user.actual.league_id));return{league:-1!==a?StateTransformer_StateTransformer.parseLeague(e.leagues[a],a,a):null}}static parseLeague(e,a,s){const i=e.awards.reduce(((e,a)=>{if(a.positions.from===a.positions.to)e[a.positions.from]=AwardTransformer.parse(a);else for(let s=a.positions.from;s<=a.positions.to;s+=1)e[s]=AwardTransformer.parse(a);return e}),{}),r=i[1];if(void 0===r)throw new Error("Unexpected error: not found main award for league: ".concat(e.id));return{id:e.id,meta:{title:e.meta.title,icon:e.meta.icon,widgetStartColor:e.meta.widget_start_color,widgetStopColor:e.meta.widget_stop_color},status:I(a,s),mainAward:r,awards:i,leaderboardConfig:{moveUpPositions:StateTransformer_StateTransformer.parseLeaderboardConfigPositions(e.leaderboard_config.move_up_positions),moveDownPositions:StateTransformer_StateTransformer.parseLeaderboardConfigPositions(e.leaderboard_config.move_down_positions)},benefits:[]}}static parseLeaderboardConfigPositions(e){return 0===e.from||0===e.to?null:{from:e.from,to:e.to,count:Math.abs(e.from-e.to)+1}}}class RatingsRepository{find(){var e=this;return(0,i.Z)((function*(){const a=(0,A.Z)(yield R(),2),s=a[0],i=a[1];if(0===e.userId){const a=(yield T.$.userValues(["data"])).data;e.userId=a.id}return s&&null===i&&s[0]?StateTransformer_StateTransformer.parse(s[0].season,e.userId):null}))()}subscribeOnLeaderboardChange(e){w.W.subscribe.ratingsLeaderboardChanged((a=>{a.forEach((a=>{const s=LeaderboardTransformer.parse(a.leaderboard,this.userId);s&&e(s)}))})),w.W.on("restore",(()=>{R().then((a=>{let s=(0,A.Z)(a,2),i=s[0];if(null===s[1]&&i&&i[0]){const a=LeaderboardTransformer.parse(i[0].season.leaderboard,this.userId);a&&e(a)}}))}))}constructor(){this.userId=0}}var D=s(58952);const O=(0,D.WV)({deeplink_action:(0,D.t$)("ratings")}),L=(0,n.v)({name:"Ratings",dependsOn:[c.u$,S.G,d.e8,u.F0,_.J,y.$,E.EA,b.t],optionalDependsOn:[f.Q],services:(e,a)=>({lootBoxesService:new m.HM(a.lootBoxesRepository),ratingsService:new m.w_(a.ratingsRepository,e.timeService),historyService:new m.qp(a.historyRepository,e.timeService),settingsService:new m.gb(a.bannerVisibilityRepository)})},{repositories:()=>({bannerVisibilityRepository:new BannerVisibilityRepository,lootBoxesRepository:new LootBoxesRepository,ratingsRepository:new RatingsRepository,historyRepository:new HistoryRepository(new h._({namespace:"feature/ratings/NotificationsRepository",backend:new v.u}))}),publicApi:e=>({ratings:e.ratingsService})}),M=(0,o.k)(L,(e=>r.createElement(m.Yz,Object.assign({},e))));var P;L.use(p.uw,((e,a,s)=>{let i=s.ratingsService,n=s.historyService,o=s.sidebarService;return i.getState().user.league?e:[...e,{order:1,content:r.createElement(M,{onClick:()=>{(0,m.fT)(i,n,"summary").then((e=>e&&o.goTo(e)))}})}]})).use((0,p.ZJ)(p.FL.RATINGS_SUMMARY),((e,a)=>{let s=a.storiesNavigation;const i=r.useCallback((e=>{null==s||s.goToStory(e)}),[s]);return r.createElement(m.oP,Object.assign({},e,{onStoryOpenClick:i}))})).use((0,p.AA)(p.FL.RATINGS_SUMMARY),((e,a)=>{let s=a.storiesNavigation,i=a.gameProfileNavigation,n=a.entityUIService;const o=(0,l.o)(n.store).countries,c=r.useCallback((e=>{null==s||s.goToStory(e)}),[s]);return r.useEffect((()=>{n.loadCountries()}),[n]),r.createElement(m._7,Object.assign({},e,{countries:o,onOpenStoryClick:c,onPlayerClick:i.goToInfo}))})).use((0,p.dk)(p.FL.RATINGS_LOOTBOX),(e=>r.createElement(m.P8,Object.assign({},e)))).use((0,p.AA)(p.FL.RATINGS_LOOTBOX),(e=>r.createElement(m.BC,Object.assign({},e)))).use((0,p.ZJ)(p.FL.RATINGS_RESULTS),(e=>r.createElement(m.vN,Object.assign({},e)))).use((0,p.AA)(p.FL.RATINGS_RESULTS),((e,a)=>{let s=a.gameProfileNavigation,i=a.entityUIService;const n=(0,l.o)(i.store).countries;r.useEffect((()=>{i.loadCountries()}),[i]);const o=r.useCallback((()=>{(0,g.gG)({screenId:"SHOWCASE"})}),[]);return r.createElement(m.Qo,Object.assign({},e,{countries:n,onLootboxClick:o,onPlayerClick:s.goToInfo}))})).use((0,p.AA)(p.FL.RATINGS_WELCOME),((e,a)=>{let s=a.storiesNavigation;const i=r.useCallback((e=>{null==s||s.goToStory(e)}),[s]);return r.createElement(m.CQ,Object.assign({},e,{onOpenStoryClick:i}))})).use(p.eO,((e,a)=>{let s=a.ratingsService,i=a.historyService,n=a.sidebarService;const o=r.useCallback((()=>{(0,m.fT)(s,i,"summary").then((e=>e&&n.goTo(e)))}),[s,i,n]);return r.createElement(m.MH,{onClick:o})})).onStart((P=(0,i.Z)((function*(e){let a=e.ratingsService,s=e.historyService,r=e.sidebarService,n=e.settingsService,o=e.commandService;yield Promise.all([a.load(),s.load(),n.load()]),o.registerCommand(O.guard,(0,i.Z)((function*(){const e=yield(0,m.fT)(a,s,"summary");e&&r.goTo(e)})))})),function(e){return P.apply(this,arguments)})).enable(function(){var e=(0,i.Z)((function*(e,a){let s=e.politics,i=a.ratingsRepository;return s.isEnabled("ent_ratings_enabled")&&null!==(yield i.find())}));return function(a,s){return e.apply(this,arguments)}}())},58471:(e,a,s)=>{"use strict";s.d(a,{M:()=>o,n:()=>l});var i=s(84584),r=s(13243),n=s(95601);const o=(0,i.Z)(),l=(0,r.v)({name:"Stocks",dependsOn:[n.u$]})},85699:(e,a,s)=>{"use strict";s.d(a,{T:()=>o});var i=s(27378),r=s(17302);const n=i.lazy((()=>s.e(5054).then(s.bind(s,45054)).then((e=>({default:e.StoryWeb}))))),o=e=>i.createElement(i.Suspense,{fallback:i.createElement(r.$j,null)},i.createElement(n,Object.assign({},e)))},77428:(e,a,s)=>{"use strict";s.d(a,{e:()=>i});const i=s(27378).lazy((()=>s.e(7130).then(s.bind(s,20107)).then((e=>({default:e.StoriesWidget})))))},498:(e,a,s)=>{"use strict";s.d(a,{T:()=>r,i:()=>n});var i=s(58952);const r=(0,i.WV)({deeplink_action:(0,i.t$)("story"),storyId:i.Mr.optional(),storyName:(0,i.EJ)(i.Ld,i.Mr).optional()}),n=(0,i.WV)({deeplink_action:(0,i.t$)("stories_gallery"),illuminated:i.ge.optional()})},77575:(e,a,s)=>{"use strict";s.d(a,{Q:()=>M});var i=s(29257),r=s(24459),n=s(27378),o=s(97415),l=s(15954),c=s(13243),d=s(6680),u=s(95601),m=s(14282),p=s(10139),h=s(23735),v=s(26763),g=s(27634),_=s(54463),f=s(46768),E=s(93627),S=s(7265),y=s(96667),b=s(53323),C=s(5915),T=s(40846),A=s(91973),k=s(85699),w=s(77428),N=s(42145),R=s(22760),I=s(22176),D=s(15502),O=s(56305),L=s(498);const M=(0,c.v)({name:"Stories",dependsOn:[m.F0,u.u$,g.im,S.EA],optionalDependsOn:[f.n],services(e,a){const s=new I.y({userService:e.user}),i=new R.I(a.storiesRepository);return{stories:i,storiesNavigation:new D.f(i),storiesAnalytics:s}}},{repositories:()=>({storiesRepository:new N.A(new O.X(y.Z.add()))}),publicApi:e=>({storiesNavigation:e.storiesNavigation,stories:e.stories})}),P=(e,a,s)=>{a.tryOpenDeepLink(e.webDeepLink,e.isDeepLinkNewTab).finally((()=>{})).then((a=>{a||e.isDeepLinkNewTab||window.open(e.webDeepLink,"_self")})).catch((()=>{})),e.isDeepLinkNewTab||e.webDeepLink.indexOf("asset")&&s.close()};var x;M.use(S.Yl,(x=(0,i.Z)((function*(e,a){let s=a.stories;yield s.clear()})),function(e,a){return x.apply(this,arguments)})).use(g.Es,((e,a)=>{const s=(0,o.o)(a.stories.store).galleries,i=n.useMemo((()=>(0,d.Sc)(v.NOTICE_SERVICE)),[]),r=n.useMemo((()=>(0,d.Sc)(v.NAVIGATION_SERVICE)),[]),l=n.useCallback((e=>{null!==r&&P(e,r,a.profileSidebarService)}),[r,a.profileSidebarService]);return i&&n.createElement(w.e,{stories:s.default,illuminated:e.isIlluminated,storiesService:a.stories,analyticsService:a.storiesAnalytics,noticeService:i,onOpenDeepLink:l,place:"profile"})})).use(p.Td,((e,a)=>{let s=e.galleryName,i=e.storyNames;var r;const o=(0,l.K)(a.stories.store,((e,a)=>null!==(r=e.galleries[a])&&void 0!==r?r:[]),[s]),c=n.useMemo((()=>(0,d.Sc)(v.NOTICE_SERVICE)),[]),u=n.useMemo((()=>(0,d.Sc)(v.NAVIGATION_SERVICE)),[]);n.useEffect((()=>{a.stories.loadGallery({galleryName:s,storyNames:i})}),[s,i,a.stories]);const m=n.useCallback((e=>{null!==u&&P(e,u,a.profileSidebarService)}),[u,a.profileSidebarService]);return c&&n.createElement(w.e,{stories:o,storiesService:a.stories,analyticsService:a.storiesAnalytics,noticeService:c,onOpenDeepLink:m,place:"events_card"})})).use(u.tJ,((e,a)=>{let s=a.stories,i=a.storiesNavigation,r=a.storiesAnalytics,l=a.profileSidebarService;const c=(0,o.o)(i.store),u=c.story,m=c.storySource,p=c.lastStoryId,h=n.useMemo((()=>(0,d.Sc)(v.NOTICE_SERVICE)),[]),g=n.useMemo((()=>(0,d.Sc)(v.NAVIGATION_SERVICE)),[]);n.useEffect((()=>(null!==p&&g&&(null==h||h.add({id:"story_modal",collectionName:b.sm.FULL_SCREEN,layout:e=>{let a=e.api,o=e.notice;return n.createElement(n.Suspense,{fallback:null},n.createElement(C.default,{noticeId:o.id,api:a,content:e=>{let a=e.onClose;const o=n.useCallback((()=>{i.reset(),a()}),[a]),c=n.useCallback((e=>{P(e,g,l),e.isDeepLinkNewTab||a(),i.reset()}),[a]);return n.createElement(k.T,{onNavigate:c,onClose:o,analyticsService:r,storiesService:s,story:u,storySource:m})}}))},notice:{priority:!0}})),()=>{null==h||h.remove("story_modal")})),[l,h,g,s,r,i,p,u,m])})).use(_.wg,((e,a)=>{var s=e.storyName,i=e.statParams,o=(0,r.Z)(e,["storyName","statParams"]),c=a.stories,d=a.storiesNavigation;const u=(0,l.K)(c.store,(e=>e.stories.find((e=>e.name===s)))),m=n.useCallback(((e,a)=>{d.goToStory(a),(0,h.L)(i)}),[d,i]);return u?n.createElement(A.g,Object.assign({onClick:m,story:u},o)):null})).use(g.VJ,((e,a,s)=>e+s.stories.getState().notifications)).onStart(function(){var e=(0,i.Z)((function*(e){let a=e.stories,s=e.storiesNavigation,r=e.commandService,n=e.profileSidebarService,o=e.storiesAnalytics;yield Promise.all([(0,d.ic)(v.NOTICE_SERVICE),(0,d.ic)(v.NAVIGATION_SERVICE)]),r.registerCommand(L.T.guard,function(){var e=(0,i.Z)((function*(e){const a=void 0!==e.storyName?String(e.storyName):void 0,i=e.storyId||a;void 0!==i&&(s.changeStorySource("deep_link"),yield s.goToStory(i))}));return function(a){return e.apply(this,arguments)}}()),r.load.done.subscribe(function(){var e=(0,i.Z)((function*(e){if(!e)return;const i=e.result,r=i&&L.T.guard(i),n=(yield a.loadAll()).importantStory;r||n&&(s.changeStorySource("app_start"),s.updateStory(n)),s.changeStatus("ready")}));return function(a){return e.apply(this,arguments)}}()),r.registerCommand(L.i.guard,(()=>{n.openById(T.uW.MAIN)})),a.loadOne.fail.subscribe((e=>{e&&o.tracking({name:"story-view-error",category:"stories",errorType:"story_not_found",storyId:"number"==typeof e.params?e.params:-1,storyName:"string"==typeof e.params?e.params:"",slideIndex:0})}))}));return function(a){return e.apply(this,arguments)}}()).enable((()=>!E.H.shouldFeatureBeDisabled("stories")))},64587:(e,a,s)=>{"use strict";s.d(a,{A:()=>StoriesRepository});var i=s(29257),r=s(3121),n=s(57855),o=s(30654),l=s(86933),c=s(68069);const d="story_new_action_has_been_viewed";class StoriesRepository{getLastViewedStory(){const e=(0,n.Ve)(d,n.hO);return e&&e.story_id?Promise.resolve(e.story_id):Promise.resolve(null)}setLastViewedStory(e){return(0,n.XV)(d,{story_id:e},n.hO),Promise.resolve()}clearLastViewedStory(){return(0,n.m0)(d),Promise.resolve()}find(e){return(0,i.Z)((function*(){let a=null;try{if("string"==typeof e)a=(0,r.Z)(yield o.$.getStoriesByNames({list:[e]}),1)[0];else"number"==typeof e&&(a=yield o.$.getStory({id:e}))}catch(e){return null}return a?c.d.parseStory(a):null}))()}findAll(){return(0,i.Z)((function*(){const e=yield o.$.userValues(["stories_v3"]);return Promise.resolve(c.d.parseStories(e.stories_v3))}))()}getStoriesOnce(e){return(0,i.Z)((function*(){const a=yield o.$.getStoriesOnce({list:e});return c.d.parseStories(a)}))()}getStoriesByNames(e){return(0,i.Z)((function*(){const a=yield o.$.getStoriesByNames({list:e});return c.d.parseStories(a)}))()}markAsViewed(e){return o.$.viewStory({id:e.id})}subscribeOnAdded(e){var a;null===(a=this.webSocket)||void 0===a||a.on(l.mi.STORIES_ADDED,(a=>{a.map((a=>e(c.d.parseStory(a))))}))}constructor(e){this.webSocket=e}}},68069:(e,a,s)=>{"use strict";s.d(a,{d:()=>StoriesTransformer});class StoriesTransformer{static updateStories(e,a){return e.map((e=>e.id===a?StoriesTransformer.updateStory(e):e))}static sortStories(e){return e.sort(((e,a)=>Number(e.isViewed)-Number(a.isViewed)))}static updateStory(e){return{index:e.index,id:e.id,title:e.title,name:e.name,imageUrl:e.imageUrl,slides:e.slides,isImportant:e.isImportant,isViewed:!0,isDisplayedInGallery:e.isDisplayedInGallery,trackAppsflyer:StoriesTransformer.TEST_DRIVE_STORIES_ID.includes(e.id)}}static parseStories(e){return e.filter((e=>0!==e.pages.length)).sort(((e,a)=>Number(a.is_important)-Number(e.is_important))).sort(((e,a)=>Number(e.is_viewed)-Number(a.is_viewed))).map((e=>StoriesTransformer.parseStory(e)))}static parseStory(e){return{index:e.index,id:e.id,name:e.name,title:e.title,imageUrl:e.background_image_url,isImportant:e.is_important,isViewed:e.is_viewed,isDisplayedInGallery:e.is_displayed_in_gallery,slides:e.pages.map(StoriesTransformer.parseSlidesFromPages),trackAppsflyer:StoriesTransformer.TEST_DRIVE_STORIES_ID.includes(e.id)}}static parseSlidesFromPages(e,a){const s=[];for(let a=0;a<e.content.length;a+=1){const i=e.content[a],r=StoriesTransformer.constenParsers[i.type],n=r?r(i):null;n&&s.push(n)}var i,r;return{id:a+1,ttl:1e3*e.ttl,verticalAlignment:null!==(i=StoriesTransformer.verticalAlignmentMap[e.vertical_alignment])&&void 0!==i?i:"top",blocks:s,background:{imageUrl:e.background.image_url,microImageUrl:e.background.micro_image_url,theme:null!==(r=StoriesTransformer.backgroundTheme[e.background.theme])&&void 0!==r?r:"default"}}}static parseContentToBlockTitle(e){var a,s;const i=null!==(s=null===(a=e.style)||void 0===a?void 0:a.toLowerCase())&&void 0!==s?s:"";return"title"!==e.type?null:{type:e.type,text:e.text,style:i in StoriesTransformer.TEXT_STYLE?i:"promo"}}static parseContentToBlockDescription(e){return"description"!==e.type?null:{type:e.type,text:e.text}}static parseContentToBlockImage(e){return"image"!==e.type?null:{type:e.type,url:null!==(a=e.url)&&void 0!==a?a:""};var a}static parseContentToBlockButton(e){return"button"!==e.type?null:{type:e.type,text:e.text,style:null!==(s=StoriesTransformer.buttonStyles[null!==(a=e.button_type)&&void 0!==a?a:""])&&void 0!==s?s:"primary",deepLink:null!==(i=e.deep_link)&&void 0!==i?i:"",webDeepLink:null!==(r=e.web_deep_link)&&void 0!==r?r:"",isDeepLinkNewTab:null!==(n=e.is_new_tab)&&void 0!==n&&n};var a,s,i,r,n}static parseContentToBlockLink(e){return"link"!==e.type?null:{type:e.type,text:e.text,deepLink:null!==(a=e.deep_link)&&void 0!==a?a:"",webDeepLink:null!==(s=e.web_deep_link)&&void 0!==s?s:"",isDeepLinkNewTab:null!==(i=e.is_new_tab)&&void 0!==i&&i};var a,s,i}static parseContentToBlockList(e){var a,s,i,r,n;return"list"!==e.type?null:{type:e.type,list:{content:null!==(i=null===(a=e.list)||void 0===a?void 0:a.content)&&void 0!==i?i:[],style:null!==(n=StoriesTransformer.listItemStyles[null!==(r=null===(s=e.list)||void 0===s?void 0:s.style)&&void 0!==r?r:""])&&void 0!==n?n:"ordered"}}}}StoriesTransformer.TEST_DRIVE_STORIES_ID=[6,1275],StoriesTransformer.TEXT_STYLE={promo:!0,h1:!0,h2:!0},StoriesTransformer.verticalAlignmentMap={top:"top",middle:"middle",bottom:"bottom"},StoriesTransformer.backgroundTheme={default:"default"},StoriesTransformer.constenParsers={title:StoriesTransformer.parseContentToBlockTitle,description:StoriesTransformer.parseContentToBlockDescription,image:StoriesTransformer.parseContentToBlockImage,button:StoriesTransformer.parseContentToBlockButton,link:StoriesTransformer.parseContentToBlockLink,list:StoriesTransformer.parseContentToBlockList},StoriesTransformer.buttonStyles={primary:"primary",secondary:"secondary",next:"next"},StoriesTransformer.listItemStyles={ordered:"ordered",unordered:"unordered"}},56305:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(23934),r=s(86933);class WebSocket{on(e,a){this.subscribe(),this.emitter.on(e,a)}subscribe(){this.isSubscribed||(this.isSubscribed=!0,this.connect.onPush(((e,a)=>{e===r.mi.STORIES_ADDED&&Array.isArray(a)&&this.emitter.emit(r.mi.STORIES_ADDED,a)})),this.subscribeEvents())}subscribeEvents(){this.connect.subscribeEventList([r.tN.STORIES_ADDED])}constructor(e){this.connect=e,this.emitter=(0,i.Z)(),this.isSubscribed=!1,this.connect.onRestore((()=>{this.isSubscribed&&this.subscribeEvents()}))}}},42145:(e,a,s)=>{"use strict";s.d(a,{A:()=>i.A});var i=s(64587)},97432:(e,a,s)=>{"use strict";s.d(a,{y:()=>AnalyticsService});var i=s(7035),r=s(7223),n=s(65440);class AnalyticsService extends r.t{static convertToStatSendType(e){return{event:"uaGtmEvents_clicks",eventCategory:e.category,eventAction:AnalyticsService.convertToStatEventAction(e),eventLabel:AnalyticsService.convertToStatEventLabel(e)}}static convertToStatEventAction(e){switch(e.name){case"story-opened":var a;return"open/".concat(e.source,"/").concat(e.place,"/").concat(null!==(a=e.story.index)&&void 0!==a?a:0);case"story-finished":var s;return"finish/".concat(e.reason,"/").concat(null!==(s=e.story.name)&&void 0!==s?s:"");case"story-slide-view":var i;return"slide_view/".concat(AnalyticsService.convertToSeconds(null===(i=e.story.slides[e.slideIndex])||void 0===i?void 0:i.ttl));case"story-slide-click-link":return"link_click/".concat(e.linkType);case"story-view-error":var r;return"error/".concat(e.errorType,"/").concat(null!==(r=e.storyName)&&void 0!==r?r:"");case"profile-pagination-click":return"profile_scroll";case"gallary-pagination-click":return"gallery_scroll";default:return""}}static convertToSeconds(e){return e?e/1e3:-1}static convertToStatEventLabel(e){switch(e.name){case"story-opened":case"story-finished":case"story-slide-view":case"story-slide-click-link":var a;return"".concat(null!==(a=e.story.id)&&void 0!==a?a:"","/").concat(e.slideIndex);case"story-view-error":var s;return"".concat(null!==(s=-1===e.storyId?"":e.storyId)&&void 0!==s?s:"","/").concat(e.slideIndex);case"profile-pagination-click":case"gallary-pagination-click":return e.dir;default:return""}}static convertToWebViewAnalyticsParams(e){const a={};var s,i;("source"in e&&(a.source=e.source),"story"in e&&(a.story_id=e.story.id),"story"in e&&"slideIndex"in e)&&(a.slide_id=null!==(i=null===(s=e.story.slides[e.slideIndex])||void 0===s?void 0:s.id)&&void 0!==i?i:-1);return"reason"in e&&(a.type=e.reason),a}tracking(e){try{this.trackingAmplitude(e),this.webViewAnalytics?this.webViewAnalytics.trackAnalytics(e.name,JSON.stringify(AnalyticsService.convertToWebViewAnalyticsParams(e))):i.S.logProxyFx(AnalyticsService.convertToStatSendType(e))}catch(e){console.error("[@ent/stories] AnalyticsService:",e)}}trackingAmplitude(e){var a,s;"story-slide-view"===e.name&&(0,n._j)("viewed_story_slide",{story_id:e.story.id,story_name:null===(a=e.story)||void 0===a?void 0:a.name,slide_number:null===(s=e.story.slides[e.slideIndex])||void 0===s?void 0:s.id},{userId:this.options.userService.getState().user.id.toString()})}constructor(e){super(),this.options=e,this.webViewAnalytics=window.webViewAnalytics||null,this.tracking=this.tracking.bind(this)}}},22176:(e,a,s)=>{"use strict";s.d(a,{y:()=>i.y});var i=s(97432)},15502:(e,a,s)=>{"use strict";s.d(a,{f:()=>NavigationService});var i=s(29257),r=s(7223);class NavigationService extends r.t{updateStory(e){this.update({story:e,lastStoryId:null==e?void 0:e.id})}handleCloseStory(e){this.update({closedStory:e})}changeStorySource(e){this.update({storySource:e})}changeStatus(e){this.update({status:e})}reset(){this.update({story:null,lastStoryId:null,storySource:null})}constructor(e){super({story:null,status:"busy",storySource:null,lastStoryId:null,closedStory:null}),this.storiesService=e;var a,s=this;this.goToStory=this.createTask((a=(0,i.Z)((function*(e){try{yield s.storiesService.loadOne(e),s.updateStory(s.storiesService.getState().selectedStory)}catch(e){s.updateStory(null)}})),function(e){return a.apply(this,arguments)}),{strategy:r.T.queue});var n=this;this.goToStoryOnce=this.createTask(function(){var e=(0,i.Z)((function*(e){const a=yield n.storiesService.getStoryByName(e);a&&!a.isViewed&&n.updateStory(a)}));return function(a){return e.apply(this,arguments)}}(),{strategy:r.T.queue});var o=this;this.goToStoryByName=this.createTask(function(){var e=(0,i.Z)((function*(e){const a=yield o.storiesService.getStoryByName(e);a&&o.updateStory(a)}));return function(a){return e.apply(this,arguments)}}(),{strategy:r.T.queue})}}},21650:(e,a,s)=>{"use strict";s.d(a,{I:()=>StoriesService,c:()=>c});var i=s(29257),r=s(37323),n=s(64356),o=s(3121),l=s(7223);const c={ACCOUNTS_CFD:"ACCOUNTS_CFD",TRADES_CFD:"TRADES_CFD",TRADE_FORM_CFD:"TRADE_FORM_CFD"};class StoriesService extends l.t{reset(){this.update({stories:[],galleries:{default:[]},selectedStory:null,isUsed:!1})}clear(){var e=this;return(0,i.Z)((function*(){yield e.storiesRepository.clearLastViewedStory()}))()}constructor(e){super({stories:[],galleries:{default:[]},selectedStory:null,isUsed:!1,notifications:0});var a,s=this;this.loadOne=this.createTask((a=(0,i.Z)((function*(e){s.update({isUsed:!0});const a=s.getState().stories,i="string"==typeof e?a.find((a=>a.name===e)):"number"==typeof e?a.find((a=>a.id===e)):void 0;if(i)return void s.update({selectedStory:i});const r=yield s.storiesRepository.find(e);s.update({selectedStory:r})})),function(e){return a.apply(this,arguments)}));var c=this;this.loadAll=this.createTask((0,i.Z)((function*(){const e=Array.from(yield c.storiesRepository.findAll()),a=yield c.storiesRepository.getLastViewedStory();var s;const i=null!==(s=e.find((e=>e.isImportant&&!e.isViewed&&e.id!==a)))&&void 0!==s?s:null;var r;return c.update((a=>({stories:e,selectedStory:null!==(r=null!=i?i:a.selectedStory)&&void 0!==r?r:null}))),c.storiesRepository.subscribeOnAdded(c.handleStoryAdded),{importantStory:i}})),{strategy:l.T.once});var d=this;this.loadGallery=this.createTask(function(){var e=(0,i.Z)((function*(e){let a=e.galleryName,s=e.storyNames;var i;if((null===(i=d.getState().galleries[a])||void 0===i?void 0:i.length)===s.length||0===s.length)return;const o=yield d.storiesRepository.getStoriesByNames(s);d.update((e=>(0,n.Z)((0,r.Z)({},e),{galleries:(0,n.Z)((0,r.Z)({},e.galleries),{[a]:o})})))}));return function(a){return e.apply(this,arguments)}}());var u=this;this.getStoryOnce=this.createTask(function(){var e=(0,i.Z)((function*(e){return(0,o.Z)(yield u.storiesRepository.getStoriesOnce([e]),1)[0]}));return function(a){return e.apply(this,arguments)}}());var m=this;this.getStoryByName=this.createTask(function(){var e=(0,i.Z)((function*(e){const a=(0,o.Z)(yield m.storiesRepository.getStoriesByNames([e]),1)[0];return Promise.resolve(a)}));return function(a){return e.apply(this,arguments)}}());var p=this;this.markAsViewed=this.createTask(function(){var e=(0,i.Z)((function*(e){e.isViewed||(yield Promise.all([p.storiesRepository.markAsViewed(e),p.storiesRepository.setLastViewedStory(e.id)]),p.update((a=>{const s=[];for(let i=0;i<a.stories.length;i++){const o=a.stories[i];s.push(o.id===e.id?(0,n.Z)((0,r.Z)({},e),{isViewed:!0}):o)}return{stories:s}})))}));return function(a){return e.apply(this,arguments)}}()),this.handleStoryAdded=e=>{this.update((a=>(0,n.Z)((0,r.Z)({},a),{stories:a.stories.some((a=>a.id===e.id))?a.stories.map((a=>a.id===e.id?e:a)):[e,...a.stories]})))},this.storiesRepository=e;const h=this.store.map((e=>e.stories)).map((e=>e.filter((e=>e.isDisplayedInGallery)))),v=h.map((e=>e.filter((e=>!e.isViewed)).length));h.subscribe((e=>{this.update((a=>(0,n.Z)((0,r.Z)({},a),{galleries:(0,n.Z)((0,r.Z)({},a.galleries),{default:e})})))})),this.attach(v.map((e=>({notifications:e}))))}}},22760:(e,a,s)=>{"use strict";s.d(a,{I:()=>i.I});var i=s(21650)},91973:(e,a,s)=>{"use strict";s.d(a,{g:()=>d});var i=s(24459),r=s(27378),n=s(60042),o=s.n(n),l=s(77740),c=s(22851);const d=e=>{var a=e.story,s=e.onClick,n=(0,i.Z)(e,["story","onClick"]);const d=r.useCallback((e=>{null==s||s(e,String(a.id))}),[s,a.id]);return r.createElement("button",Object.assign({onClick:d,className:o()(c.Z.host,a.isViewed&&c.Z.viewed)},n),r.createElement(l.BS3,{className:c.Z.icon}))}},47641:(e,a,s)=>{"use strict";s.d(a,{Gp:()=>r,hw:()=>n,tA:()=>i});const i={candles:"candle",line:"line",heiken:"heiken-ashi",bars:"bar"},r="strategies";var n;!function(e){e[e.empty=0]="empty",e[e.loading=1]="loading",e[e.failed=2]="failed",e[e.success=3]="success"}(n||(n={}))},45834:(e,a,s)=>{"use strict";s.d(a,{VI:()=>pt,GP:()=>mt,re:()=>dt,vA:()=>ut,u9:()=>ct,uT:()=>ht,DP:()=>lt});var i=s(29257),r=s(3121),n=s(27378),o=s(13243),l=s(95601),c=s(6680),d=s(28373),u=s(97415),m=s(77740),p=s(26763),h=s(82844),v=s(14803),g=s(64802),_=s(58568),f=s(73533),E=s(71003),S=s(72837),y=s(66511),b=s(46525);const C="SeX4C5Ls",T="wIEvTLne",A="aBD6bZhJ",k="s3Dn65Es",w="_gLBQrgH",N="QjiG2NSw",R=e=>{let a=e.children,s=e.name,i=e.count;return n.createElement("div",{className:T},n.createElement("div",{className:A},n.createElement("span",{className:k,"data-test":"strategy_list_group_title"},s),n.createElement("span",{className:w,"data-test":"strategy_list_group_count"},i)),n.createElement("div",null,a))};R.displayName="Group";const I=e=>{let a=e.children;return n.createElement("div",{className:N},a)};I.displayName="Disclaimer";const D=e=>{let a=e.children;return n.createElement("div",{className:C,"data-test":"strategy_list"},a)};D.Disclaimer=I,D.Group=R,D.displayName="Layout";var O=s(60042),L=s.n(O),M=s(17302);const P=e=>{switch(e){case"ftt":case"bo":return"accent";case"fx":return"negative";default:return"neutral"}},x=e=>{let a=e.mechanics;return n.createElement(M.xu,{display:"grid",gridAutoFlow:"column",gridTemplateColumns:"max-content",gap:"s",dataTest:"strategy_mechanics"},a.map((e=>{if(!e)return null;const a=e.id,s=e.title,i=e.project;return n.createElement(M.Ct,{key:a,content:s,color:P(i)})})))},F="eb_pc2fe",B="Ibqseb5K",Z="EvnpFn5S",U="J55yxiVq",H="yDHQXTnD",G="vNMdNHzN",V="ZdaC6hBn",W="ZCHqvjbn",j="Hw8AiJXf",z="R84zvWkP",q="JeDhU3hv",K=n.memo((e=>{let a=e.item,s=e.mechanics,i=e.categories,r=e.onClick;const o=n.useCallback((()=>{r(a.id)}),[a.id,r]),l=a.mechanics.map((e=>s.get(e))),c=i.get(a.category);return n.createElement("button",{"data-test":"strategy_list_button",className:L()(F,!a.available&&Z),onClick:o},n.createElement("span",{className:B},c&&n.createElement("span",{className:H,style:{backgroundImage:"url(".concat(c.icon.svg,")")}}),n.createElement("span",{className:G,"data-test":"strategy_list_button_text"}," ",a.name)),n.createElement("span",{className:U},!a.available&&n.createElement("span",{className:W,"data-test":"strategy_list_button_unlock"},n.createElement(h._,{id:"strategies_list_unlock",defaultMessage:"Unlock"})),n.createElement(x,{mechanics:l,className:a.available?"":V})))}));K.displayName="ListItem";const Y=n.memo((e=>{let a=e.item,s=e.mechanics,i=e.onClick,r=e.highlighted;const o=n.useCallback((()=>{i(a.id,!0)}),[a.id,i]),l=(0,n.useRef)(null),c=a.mechanics.map((e=>s.get(e)));return(0,n.useEffect)((()=>{var e;r&&(null===(e=l.current)||void 0===e||e.scrollIntoView())}),[r]),n.createElement("button",{"data-test":"strategy_list_button",className:F,onClick:o,ref:l},n.createElement("div",{className:L()(z,{[q]:r})}),n.createElement("span",{className:B},n.createElement(m.ld1,{className:j}),n.createElement("span",{className:G,"data-test":"strategy_list_button_text"},a.name)),n.createElement("span",{className:U},n.createElement(x,{mechanics:c})))}));Y.displayName="CustomListItem";var X=s(24459);const J="jzfOBaRc",Q="zKTw8jO2",$=e=>{let a=e.message,s=e.tooltipContent;return n.createElement(M.u,{placement:"top",triggerOnHover:!0,triggerOnTap:!1,arrow:!0,transition:!0,delay:100,interactive:!1,disablePortal:!1,"data-test":"strategies_info_tooltip",style:{zIndex:11},content:n.createElement("div",{className:Q},s)},(e=>{var s=e.ref,i=(0,X.Z)(e,["ref"]);return n.createElement("span",Object.assign({ref:s},i),n.createElement("span",{className:J,"data-test":"strategies_info"},n.createElement(m.T08,null),n.createElement("span",null,a)))}))};M.u.displayName="Tooltip";const ee=n.memo((e=>{let a=e.strategyListService,s=e.strategyList,i=e.templateList,o=e.isSearch,l=e.onClick;const c=(0,u.o)(a.store),d=c.mechanics,m=c.categories,p=c.highlightedNewStrategyId,v=(0,r.Z)((0,n.useState)(null),2),g=v[0],_=v[1],f=(0,n.useMemo)((()=>(0,b.Z)(s,(e=>e.available?"active":"inactive"))),[s]);(0,n.useEffect)((()=>{p&&(_(p),a.removeHighlightedStrategyId())}),[a,p]);const E=n.useMemo((()=>n.createElement(n.Fragment,null,i.map((e=>n.createElement(Y,{key:e.id,item:e,mechanics:d,onClick:l,highlighted:g===e.id}))))),[i,d,g,l]),S=n.useMemo((()=>n.createElement(D.Group,{name:n.createElement(h._,{id:"strategies_list_custom_section_title",defaultMessage:"Custom"}),count:i.length},E)),[i,E]),y=n.useMemo((()=>f.active&&f.active.length?f.active.map((e=>n.createElement(K,{key:e.id,item:e,mechanics:d,categories:m,onClick:l}))):null),[f,d,m,l]),C=n.useMemo((()=>f.active&&f.active.length?n.createElement(D.Group,{name:n.createElement(h._,{id:"strategies_list_available",defaultMessage:"Available"}),count:f.active.length},y):null),[f,y]),T=o?y:C,A=n.useMemo((()=>f.inactive&&f.inactive.length?f.inactive.map((e=>n.createElement(K,{key:e.id,item:e,mechanics:d,categories:m,onClick:l}))):null),[f,d,m,l]),k=n.useMemo((()=>f.inactive&&f.inactive.length?n.createElement(D.Group,{name:n.createElement(h._,{id:"strategies_list_locked",defaultMessage:"Locked"}),count:f.inactive.length},A):null),[f,A]),w=o?A:k;return n.createElement(D,null,o?null:n.createElement($,{message:n.createElement(h._,{id:"strategies_list_strategy_info_title",defaultMessage:"What Are Strategies?"}),tooltipContent:n.createElement(h._,{id:"strategies_list_strategy_info_description",defaultMessage:"Ready-to-use sets of indicators and oscillators that help you determine when to open and close trades"})}),i.length?S:null,f.active&&f.active.length?T:null,f.inactive&&f.inactive.length?w:null)}));ee.displayName="List";const te=e=>{let a=e.strategyListService,s=e.strategyList,i=e.templateList,r=e.isSearch;n.useEffect((()=>{a.init()}),[a]);const o=n.useCallback((function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s?a.selectCustomStrategy(e):a.selectStrategy(e)}),[a]);let l=null;return s.length&&(l=n.createElement(ee,{strategyList:s,templateList:i,strategyListService:a,isSearch:r,onClick:o})),l};te.displayName="StrategyList";const ae="FUmqfuAg",se=e=>{let a=e.strategyListService;const s=n.useCallback((()=>{a.goToInfo()}),[a]);return n.createElement(M.Xd,{className:ae,onClick:s,"data-test":"strategies_info"},n.createElement(m.Gc9,null))};se.displayName="StrategyListHeaderAction";const ie="nqzrmKoZ",re=()=>n.createElement("div",{className:ie},n.createElement(M.$j,null)),ne={content:"IuE1DpXS",content_center:"v9i3vMuh",playerComponent:"ukmHOUTU",description:"iSAXMHNC",description_warning:"rur49H2o",comment:"llce_tbq",information:"FGs7LkGn",bottom:"WURpquoC",bottomPanel:"qqgORquo"},oe=e=>{let a=e.children;return n.createElement(M.xu,{padding:[0,"l"],dataTest:"strategy_details_top"},a)};oe.displayName="Top";const le=e=>{let a=e.children;return n.createElement("div",{"data-test":"strategy_details_bottom"},a)};le.displayName="Bottom";const ce=e=>{let a=e.children;return n.createElement("div",{className:ne.bottomPanel,"data-test":"strategy_details_bottom_panel"},a)};ce.displayName="BottomPanel";const de=e=>{let a=e.children;return n.createElement(M.xu,{padding:["l","l","xl"],dataTest:"strategy_details_bottom_button"},a)};de.displayName="BottomButton";const ue=e=>{let a=e.children,s=e.className;return n.createElement("div",{className:L()(ne.content,s)},a)};ue.displayName="Content";const me=e=>{let a=e.className,s=e.children;return n.createElement("div",{className:L()(ne.description,a),"data-test":"strategy_description"},s)};me.displayName="Description";const pe=e=>{let a=e.children;return n.createElement(M.xu,{padding:["32px",0,"l"],dataTest:"strategy_video"},a)};pe.displayName="Player";const he=e=>{let a=e.children;return n.createElement("div",{className:ne.comment,"data-test":"strategy_comment"},a)};he.displayName="Comment";const ve=e=>{let a=e.children;return n.createElement("div",{className:ne.indicators,"data-test":"strategy_indicators"},a)};ve.displayName="Indicators";const ge=()=>n.createElement("div",{className:ne.information},n.createElement(m.Gc9,null));ge.displayName="Information";const _e=e=>n.createElement(M.xu,{padding:["xl",0,0,0],horizontalAlign:"space-between",direction:"column",fullHeight:!0,dataTest:e["data-test"]},e.children);_e.Top=oe,_e.Bottom=le,_e.Content=ue,_e.Description=me,_e.Player=pe,_e.Comment=he,_e.Information=ge,_e.Indicators=ve,_e.FormSection=e=>{let a=e.children;return n.createElement(M.xu,{dataTest:"form_section_box"},a)},_e.BottomPanel=ce,_e.BottomButton=de,_e.displayName="Layout";const fe=e=>{let a=e.onClick;return n.createElement(_e,{"data-test":"strategy_load_fail"},n.createElement(_e.Content,{className:ne.content_center},n.createElement(_e.Information,null),n.createElement(_e.Description,{className:ne.description_warning},"The service is temporarily unavailable. Please send your request once again or try again later.")),n.createElement(M.zx,{fullWidth:!0,onClick:a},n.createElement(h._,{id:"try_again",defaultMessage:"Try again"})))};var Ee=s(47641),Se=s(95029);const ye=e=>{let a=e.mechanics;return n.createElement(M.xu,{display:"grid",gridTemplateColumns:"auto 1fr",direction:"row",verticalAlign:"center",gap:"s",dataTest:"available_for_box"},n.createElement(M.xv,{variant:"M / Regular",color:"contrast-beta"},n.createElement(h._,{id:"available_for",defaultMessage:"Available for:"})),n.createElement(x,{mechanics:a}))};ye.displayName="Mechanics";const be={host:"XimKWfhn",title:"HOVpuJBJ",indicators:"afsPfXMf",indicator_set:"U_A6bbAm",indicator_name:"TQ3kkAqc",buble:"FbYhWik3",buble__with_width:"pVw4l4zX",custom_indicators:"NYS2NdtP",custom_indicators_list:"OzGfyg4r",custom_legend_title:"CySAVmLw",custom_indicator_name:"MyMJ9niw",custom_indicator_set:"QY6XH58h",step_weight:"BfrvWjQN"},Ce=e=>{let a=e.availableLineColors,s=e.config,i=e.withSteps;return n.createElement(n.Fragment,null,s.map((e=>{const s=e.defaultColor||0;return a[s]?n.createElement(n.Fragment,{key:e.id},n.createElement("span",{key:e.id,className:L()({[be.buble__with_width]:i},be.buble),style:{backgroundColor:"#".concat(a[s])},"data-test":"indicator-details-circle"}," "),i&&e.steps?n.createElement("span",{className:be.step_weight,"data-test":"indicator-details-weight"},e.steps[0].default):null):null})))};Ce.displayName="IndicatorDetails";const Te=e=>{let a=e.availableLineColors,s=e.indicators,i=0,r=0;const o=s.map(((e,s)=>{const o=e.config.filter((e=>void 0!==e.defaultColor));return 0===e.category?i++:r++,n.createElement("span",{className:be.indicator_set,key:s,"data-test":"indicator-legend-details-container"},n.createElement("span",{className:be.indicator_name,"data-test":"indicator-legend-name"},e.title||e.name),n.createElement(Ce,{availableLineColors:a,config:o}))}));return n.createElement("div",{className:be.host,"data-test":"indicator-legend-container"},n.createElement("div",{className:be.title,"data-test":"indicator-legend-title"},i?n.createElement(n.Fragment,null,n.createElement(h._,{id:"strategies_indicators_number",defaultMessage:"{value, plural, =0 { # indicators } one { # indicator } few { # indicators } many { # indicators } other { # indicators }}",values:{value:i}})):"",i&&r?" + ":"",r?n.createElement(h._,{id:"strategies_oscillators_number",defaultMessage:"{value, plural, =0 { # oscillators } one { # oscillator } few { # oscillators } many { # oscillators } other { # oscillators }}",values:{value:r}}):"",":"),n.createElement("div",{className:be.indicators},o))};Te.displayName="IndicatorLegend";const Ae=e=>{let a=e.availableLineColors,s=e.indicators;const i=[],r=[];return s.forEach(((e,s)=>{const o=n.createElement("span",{className:be.custom_indicator_set,key:s},n.createElement("span",{className:be.custom_indicator_name},e.name),n.createElement(Ce,{availableLineColors:a,config:e.config,withSteps:!0}));0===e.category?i.push(o):r.push(o)})),n.createElement("div",{className:be.host},i.length?n.createElement("div",{className:be.custom_indicators},n.createElement("div",{className:be.custom_legend_title},n.createElement(h._,{id:"trend_indicators",defaultMessage:"Trend Indicators"}),n.createElement("span",{className:be.custom_legend_count},i.length)),n.createElement("div",{className:be.custom_indicators_list},i.map((e=>e)))):null,r.length?n.createElement("div",{className:be.custom_indicators},n.createElement("div",{className:be.custom_legend_title},n.createElement(h._,{id:"oscillators",defaultMessage:"Oscillators"}),n.createElement("span",{className:be.custom_legend_count},r.length)),n.createElement("div",{className:be.custom_indicators_list},r.map((e=>e)))):null)};Ae.displayName="IndicatorLegend";const ke=e=>{let a=e.strategyListService,s=e.selectedStrategyId,i=e.strategyEditService,r=e.strategyDetailsList,o=e.isCustomStrategy;var l,c,d;const p=(0,u.o)(a.store).mechanics,v=(0,u.o)(i.store),g=v.data,_=v.activeTradeFrameId,f=_?null===(l=g[_])||void 0===l?void 0:l.mechanic:void 0,E=_&&(null==g||null===(c=g[_])||void 0===c||null===(d=c.strategy)||void 0===d?void 0:d.model),S=s?r.get(s):void 0,y=E&&E.id===s,b=n.useCallback((()=>!(!S||!f)&&S.mechanics.some((e=>{const a=p.get(e);return(null==a?void 0:a.project)===f||"ftt"===f&&"bo"===(null==a?void 0:a.project)}))),[S,f,p]),C=n.useCallback((()=>{a.inputs.goToList()}),[a]),T=n.useCallback((()=>{s&&S&&i.addStrategy(S)}),[i,s,S]),A=n.useCallback((()=>{s&&S&&i.removeActiveStrategy()}),[i,S,s]),k=n.useCallback((()=>{S&&S.market_feature_uid&&a.goToMarket(S.market_feature_uid)}),[S,a]),w=n.useCallback((()=>S?(null==S?void 0:S.available)?b()||!(null==S?void 0:S.available)&&!o?y?n.createElement(_e.BottomButton,null,n.createElement(M.zx,{variant:"secondary",fullWidth:!0,onClick:A,dataTest:"strategies_disable_strategy"},n.createElement(h._,{id:"strategies_disable_strategy",defaultMessage:"Disable Strategy"}))):n.createElement(_e.BottomPanel,null,n.createElement(_e.Comment,null,n.createElement(m.Gc9,null),n.createElement(h._,{id:"strategies_strategy_add_warnin",defaultMessage:"All previously added indicators will be deleted."})),n.createElement(M.zx,{fullWidth:!0,onClick:T,dataTest:"strategies_enable_strategy"},n.createElement(h._,{id:"strategies_enable_strategy",defaultMessage:"Enable Strategy"}))):n.createElement(_e.BottomPanel,null,n.createElement(_e.Comment,null,n.createElement(m.Gc9,null),n.createElement(h._,{id:"strategies_wrong_mechanics_warning",defaultMessage:"This strategy is unavailable for the current trading mode. Choose another strategy marked with the icon of the selected mode."})),n.createElement(M.zx,{fullWidth:!0,onClick:C,dataTest:"strategies_details_action_go_to_list"},n.createElement(h._,{id:"strategy_open_strategies_list",defaultMessage:"Open Strategies List"}))):n.createElement(_e.BottomButton,null,n.createElement(M.zx,{fullWidth:!0,onClick:k,dataTest:"strategies_go_to_market"},n.createElement(h._,{id:"strategies_unlock_strategy_in_market",defaultMessage:"Unlock Strategy"}))):null),[S,y,o,b,A,T,C,k]);if(!S)return null;const N=(0,Se._L)(S.videos.web);return n.createElement(_e,{"data-test":"strategy_details"},n.createElement(_e.Top,null,n.createElement(ye,{mechanics:null==S?void 0:S.mechanics.map((e=>p.get(e)))})),n.createElement(_e.Content,null,n.createElement(_e.Player,null,n.createElement(Se.eZ,{videoId:N||"",className:ne.playerComponent,playerVars:{autoplay:0,rel:0,controls:1,showinfo:0}})),n.createElement(_e.Description,null,S.description),n.createElement(_e.Indicators,null,n.createElement(Te,{indicators:S.config.indicators,availableLineColors:S.config.availableLineColors}))),n.createElement(_e.Bottom,null,w()))};ke.displayName="Details";const we=e=>{let a=e.strategyListService,s=e.strategyEditService,i=e.selectedStrategyId,r=e.strategyDetailsList;var o,l,c;const d=(0,u.o)(a.store).mechanics,p=(0,u.o)(s.store),v=p.data,g=p.activeTradeFrameId,_=g?null===(o=v[g])||void 0===o?void 0:o.mechanic:void 0,f=g&&(null==v||null===(l=v[g])||void 0===l||null===(c=l.strategy)||void 0===c?void 0:c.model),E=i?r.get(i):void 0,S=f&&f.id===i,y=n.useCallback((()=>!(!E||!_)&&E.mechanics.some((e=>{const a=d.get(e);return(null==a?void 0:a.project)===_||"ftt"===_&&"bo"===(null==a?void 0:a.project)}))),[E,_,d]),b=n.useCallback((()=>{a.inputs.goToList()}),[a]),C=n.useCallback((()=>{i&&E&&s.addStrategy(E,!0)}),[s,i,E]),T=n.useCallback((()=>{i&&E&&s.removeActiveStrategy()}),[s,i,E]),A=n.useMemo((()=>E?!y()&&(null==E?void 0:E.available)?n.createElement(_e.BottomPanel,null,n.createElement(_e.Comment,null,n.createElement(m.Gc9,null),n.createElement(h._,{id:"strategies_wrong_mechanics_warning",defaultMessage:"This strategy is unavailable for the current trading mode. Choose another strategy marked with the icon of the selected mode."})),n.createElement(M.zx,{fullWidth:!0,onClick:b,dataTest:"strategies_details_action_go_to_list"},n.createElement(h._,{id:"strategy_open_strategies_list",defaultMessage:"Open Strategies List"}))):S?n.createElement(_e.BottomButton,null,n.createElement(M.zx,{variant:"secondary",fullWidth:!0,onClick:T,dataTest:"strategies_disable_strategy"},n.createElement(h._,{id:"strategies_disable_strategy",defaultMessage:"Disable Strategy"}))):n.createElement(_e.BottomPanel,null,n.createElement(_e.Comment,null,n.createElement(m.Gc9,null),n.createElement(h._,{id:"strategies_strategy_add_warnin",defaultMessage:"All previously added indicators will be deleted."})),n.createElement(M.zx,{fullWidth:!0,onClick:C,dataTest:"strategies_enable_strategy"},n.createElement(h._,{id:"strategies_enable_strategy",defaultMessage:"Enable Strategy"}))):null),[E,S,y,T,C,b]);return E?n.createElement(_e,{"data-test":"strategy_details"},n.createElement(_e.Top,null,n.createElement(ye,{mechanics:E.mechanics.map((e=>d.get(e)))})),n.createElement(_e.Content,null,n.createElement(_e.Indicators,null,n.createElement(Ae,{indicators:E.config.indicators,availableLineColors:E.config.availableLineColors}))),n.createElement(_e.Bottom,null,A)):null};we.displayName="CustomDetails";const Ne=e=>{let a=e.strategyListService,s=e.strategyEditService,i=e.selectedStrategyId,r=e.strategyDetailsList,o=e.isCustomStrategy;const l=(0,u.o)(a.store).detailsRequestStatus,c=n.useCallback((()=>{i&&a.loadDetails(i)}),[a,i]);if(l===Ee.hw.loading)return n.createElement(re,null);if(l===Ee.hw.failed)return n.createElement(fe,{onClick:c});const d=o?we:ke;return n.createElement(d,{isCustomStrategy:o,strategyListService:a,strategyEditService:s,selectedStrategyId:i,strategyDetailsList:r})};Ne.displayName="StrategyDetails";const Re=e=>{let a=e.selectedStrategyId;const s=e.strategyList.find((e=>e.id===a));return n.createElement(n.Fragment,null,s?s.name:"")};Re.displayName="StrategyDetailsHeader";var Ie=s(63967),De=s(83796),Oe=s(18985),Le=s(2948),Me=s(53323),Pe=s(93824),xe=s(29229),Fe=s(7223),Be=s(78418);function Ze(e){if(!e)return"line";switch(e){case"candle":return"candles";case"bar":return"bars";case"heiken-ashi":return"heiken";default:return e}}(0,xe.S)();class StrategyListService extends Fe.t{init(){const e=this.getState(),a=e.listRequestStatus,s=e.strategyList;a===Ee.hw.loading||s.length||this.loadList()}loadDetails(e){this.update({detailsRequestStatus:Ee.hw.loading,selectedStrategyId:e}),this.strategyRepository.getDetails(e).then((e=>{const a=this.getState().strategyDetailsList;a.set(e.id,e),this.update({detailsRequestStatus:Ee.hw.success,strategyDetailsList:new Map(Array.from(a))})})).catch((()=>{this.update({detailsRequestStatus:Ee.hw.failed})}))}setSearchText(e){this.update({searchText:e})}selectCustomStrategy(e){this.loadCustomStrategyDetails(e),this.inputs.goToCustomDetails()}loadCustomStrategyDetails(e){this.update({detailsRequestStatus:Ee.hw.loading,customSelectedStrategyId:e}),this.customStrategyRepository.find(e).then((e=>{if(null===e)throw new Error("Strategy not found");const a=this.getState().customStrategyDetailsList;a.set(e.id,e),this.update({selectedCustomStrategy:e,detailsRequestStatus:Ee.hw.success,customStrategyDetailsList:new Map(Array.from(a))})})).catch((()=>{this.update({detailsRequestStatus:Ee.hw.failed})}))}selectStrategy(e){this.loadDetails(e),this.inputs.goToDetails()}goToMarket(e){const a=this.getState().selectedStrategyId;this.update({marketRedirectStrategyId:a}),this.inputs.goToMarket(e)}goToInfo(){this.inputs.goToHelp()}redirectToDetails(){const e=this.getState().marketRedirectStrategyId;e&&this.goToDetails(e)}goToDetails(e){const a=this.getState().selectedStrategyId,s=e||a;s&&(this.loadList(),this.selectStrategy(s))}setIndicatorForNewStrategy(e,a,s,i,r,n){const o=r.replace("bo","ftt");this.update({indicatorsForNewStrategy:{indicators:e,colors:a,timeframe:s,chartType:i,mechanic:o,tradeFrameId:n}})}saveNewStrategy(e,a){const s=a.indicators,i=a.timeframe,r=a.chartType,n={name:e.name,mechanics:e.mechanics,indicators:s||[],timeframe:i||1,graph_type:Ze(r)};return this._saveNewStrategy(n).then((e=>{e&&this.updateListAfterCreateStrategy(e)}))}deleteSelectedCustomStrategy(){const e=this.getState().selectedCustomStrategy;e&&this._deleteStrategy(e.id).then((()=>{this.updateListAfterDeleteStrategy()}))}loadMechanics(){var e=this;return(0,i.Z)((function*(){return e.update({getMechanicsRequestStatus:Ee.hw.loading}),e.mechanicsRepository.findAll().then((a=>{e.update({getMechanicsRequestStatus:Ee.hw.success,mechanics:new Map(Array.from(a).map((e=>[e.id,e])))})})).catch((()=>{e.update({getMechanicsRequestStatus:Ee.hw.failed})}))}))()}removeHighlightedStrategyId(){this.update({highlightedNewStrategyId:null})}updateListAfterCreateStrategy(e){this.loadList(),this.inputs.goToStrategyList(),this.update({highlightedNewStrategyId:e||null}),this.inputs.highlightNewStrategy()}updateListAfterDeleteStrategy(){this.update({selectedCustomStrategy:null}),this.loadList(),this.inputs.goToList()}_saveNewStrategy(e){var a=this;return(0,i.Z)((function*(){a.update({createStrategyRequestStatus:Ee.hw.loading});try{const s=(yield a.customStrategyRepository.save(e)).template_id;return yield(0,Be.Xt)(),a.update({createStrategyRequestStatus:Ee.hw.success}),s}catch(e){throw a.update({createStrategyRequestStatus:Ee.hw.failed}),new Error("Network error")}}))()}_deleteStrategy(e){var a=this;return(0,i.Z)((function*(){a.update({deleteStrategyRequestStatus:Ee.hw.loading});try{yield a.customStrategyRepository.delete(e),yield(0,Be.Xt)(),a.update({deleteStrategyRequestStatus:Ee.hw.success})}catch(e){a.update({deleteStrategyRequestStatus:Ee.hw.failed})}}))()}constructor(e,a){super({strategyList:[],templateList:[],categories:new Map,mechanics:new Map,strategyDetailsList:new Map,customStrategyDetailsList:new Map,availableFrames:[],activeStrategies:{},indicatorsForNewStrategy:{},listRequestStatus:Ee.hw.empty,detailsRequestStatus:Ee.hw.empty,createStrategyRequestStatus:Ee.hw.empty,deleteStrategyRequestStatus:Ee.hw.empty,getMechanicsRequestStatus:Ee.hw.empty,selectedCustomStrategy:null,highlightedNewStrategyId:null,searchText:""}),this.disposers=[];var s=this;this.loadList=this.createTask((0,i.Z)((function*(){if(s.getState().listRequestStatus!==Ee.hw.loading){s.update({listRequestStatus:Ee.hw.loading});try{const e=yield s.strategyRepository.getList();return void s.update({strategyList:e.list.sort(((e,a)=>e.position-a.position)),templateList:e.templates,categories:new Map(e.categories.map((e=>[e.id,e]))),mechanics:new Map(e.mechanics.map((e=>[e.id,e]))),listRequestStatus:Ee.hw.success})}catch(e){s.update({listRequestStatus:Ee.hw.failed})}}})));const r=e.customStrategyRepository,n=e.strategyListRepository,o=e.mechanicRepository;this.mechanicsRepository=o,this.customStrategyRepository=r,this.strategyRepository=n,this.inputs=a,this.loadList=this.loadList.bind(this),this.goToDetails=this.goToDetails.bind(this),this.redirectToDetails=this.redirectToDetails.bind(this)}}var Ue=s(37323),He=s(64356),Ge=s(45797);class StrategyEditService extends Fe.t{addStrategy(e,a){const s=this.getState(),i=s.activeTradeFrameId,r=s.data;if(i){this.inputs.removeAllIndicators(i);const s={model:(0,Ue.Z)({},e),position:this.inputs.getEditItemIncrement(),custom:!!a};return this.update({data:(0,He.Z)((0,Ue.Z)({},r),{[i]:(0,He.Z)((0,Ue.Z)({},r[i]),{strategy:s})})}),this.inputs.setChartSettings(i,s.model.graph_type,s.model.timeframe),e.config.indicators.forEach((e=>{this.inputs.addIndicator(e.type,e.config)})),this.updateActiveInstruments(i),this.inputs.goToTechAnalysis(),s}}removeStrategy(e){const a=this.getState().data;a[e]&&this.update({data:(0,He.Z)((0,Ue.Z)({},a),{[e]:(0,He.Z)((0,Ue.Z)({},a[e]),{strategy:void 0})})}),this.inputs.removeAllIndicators(e),this.updateActiveInstruments(e)}removeActiveStrategy(){const e=this.getState().activeTradeFrameId;e&&this.removeStrategy(e)}getCurrentStrategy(){const e=this.getState().activeTradeFrameId;return this.getStrategy(e)}getStrategy(e){if(e){const a=this.getState().data;return a[e]?a[e].strategy:void 0}}isFeatureEnabled(e){const a=this.getState(),s=a.data,i=a.activeTradeFrameId,r=e||i;return!r||(!s[r]||this.isSupportedMechanic(s[r].mechanic))}getDataForNewCustomStrategy(e){var a=this;return(0,i.Z)((function*(){const s=yield a.inputs.getMetaDataForStrategyPreset(e),i=s.availableLineColors,r=s.indicators,n=(0,X.Z)(s,["availableLineColors","indicators"]);return(0,Ue.Z)({indicators:r.map((e=>({category:e.viewType,config:e.config||[],name:e.name,title:Ge.NW.formatMessage(e.title),type:e.type,countOfInstancing:0}))),mechanic:a.getMechanics(e),colors:i,tradeFrameId:e},n)}))()}saveNewStrategy(e,a){var s=this;return(0,i.Z)((function*(){const i=s.getState().activeTradeFrameId,r=a.indicators,n=yield s.inputs.getMetaDataForStrategyPreset(i||""),o=n.timeframe,l=n.chartType,c={name:e.name,mechanics:e.mechanics,indicators:r||[],timeframe:o||1,graph_type:Ze(l)};return s._saveNewStrategy(c).then((e=>{e&&s.inputs.updateListAfterCreateStrategy(e)}))}))()}deleteSelectedCustomStrategy(){const e=this.inputs.getActiveCustomStrategy();e&&this._deleteStrategy(e.id).then((()=>{this.inputs.updateListAfterDeleteStrategy()}))}getCustomStrategyData(){const e=this.getState().activeTradeFrameId;return e?this.getDataForNewCustomStrategy(e):null}_saveNewStrategy(e){var a=this;return(0,i.Z)((function*(){a.update({createStrategyRequestStatus:Ee.hw.loading});try{const s=(yield a.repositories.customStrategyRepository.save(e)).template_id;return yield(0,Be.Xt)(),a.update({createStrategyRequestStatus:Ee.hw.success}),s}catch(e){throw a.update({createStrategyRequestStatus:Ee.hw.failed}),new Error("Network error")}}))()}_deleteStrategy(e){var a=this;return(0,i.Z)((function*(){a.update({deleteStrategyRequestStatus:Ee.hw.loading});try{yield a.repositories.customStrategyRepository.delete(e),yield(0,Be.Xt)(),a.update({deleteStrategyRequestStatus:Ee.hw.success})}catch(e){a.update({deleteStrategyRequestStatus:Ee.hw.failed})}}))()}isSupportedMechanic(e){return"spt"!==e}init(){if(!this.inputs.activeTradeFrameId)return;this.update({activeTradeFrameId:this.inputs.activeTradeFrameId});const e=this.inputs.getFrames();let a={};e.forEach((e=>{a=(0,He.Z)((0,Ue.Z)({},a),{[e.id]:this.getDefaultDataItem(e)})})),this.update({data:a})}getDefaultDataItem(e){return{strategy:void 0,mechanic:e.mechanic}}updateActiveInstruments(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.getStrategy(e);e&&this.inputs.updateActiveInstruments(e,Ee.Gp,s&&this.isFeatureEnabled(e)?[{id:"strategy",type:Ee.Gp,position:s.position}]:[],a)}invalidateDataByFrame(e,a){if(e&&a&&a.length){let s={};return a.forEach((a=>{s=(0,He.Z)((0,Ue.Z)({},s),{[a.id]:(0,He.Z)((0,Ue.Z)({},this.getDefaultDataItem(a),e[a.id]),{mechanic:a.mechanic})})})),s}}getMechanics(e){var a;return(null===(a=this.inputs.getFrames().find((a=>a.id===e)))||void 0===a?void 0:a.mechanic)||"ftt"}constructor(e,a){super({activeTradeFrameId:a.activeTradeFrameId,data:{},createStrategyRequestStatus:Ee.hw.empty,deleteStrategyRequestStatus:Ee.hw.empty}),this.repositories=e,this.inputs=a,this.load=()=>{this.init()},this.updateActiveTradeFrameId=e=>{this.update({activeTradeFrameId:e})},this.updateFrames=e=>{const a=this.getState().data;this.update({data:this.invalidateDataByFrame(a,e)}),e.forEach((e=>{this.updateActiveInstruments(e.id)}))}}}const Ve="pLE7xvLc",We="YaC9UU4l",je="sIHmxSBo",ze="UeaQKSIw",qe=(0,Oe.vU)({defaultStrategyName:{id:"strategies_template_default_preset_name",defaultMessage:"Strategy {number}"},nameErrorContains:{id:"strategies_template_input_name_error",defaultMessage:"Enter custom strategy name"},nameErrorCharacters:{id:"strategies_template_input_name_info_restrictions",defaultMessage:"Use only digits and Latin letters"}}),Ke=e=>{if((e.error||e.submitError)&&e.touched)return e.error||e.submitError},Ye=e=>{let a=e.handleSubmit,s=e.indicators,i=e.colors;const r=(0,Ie.G)(StrategyListService),o=(0,u.o)(r.store),l=o.mechanics,c=o.createStrategyRequestStatus,d=Array.from(l.values()),m=c===Ee.hw.loading;return n.createElement("form",{onSubmit:a,"data-test":"strategy-form-native-form"},n.createElement(M.xu,{display:"grid",gap:"xl"},n.createElement(_e.FormSection,{"data-test":"strategy-form-section"},n.createElement(De.gN,{name:"name","data-test":"strategy-form-name-field"},(e=>{let a=e.input,s=e.meta;return n.createElement(M.oH,{value:a.value,error:Ke(s),onChange:a.onChange,name:a.name,floatingLabel:!0,fullWidth:!0,type:"text","data-test":"strategy-form-name-input",placeholder:n.createElement(h._,{id:"strategies_template_input_name_title",defaultMessage:"Name"})})}))),d.length>1?n.createElement(_e.FormSection,{"data-test":"strategy-form-section"},n.createElement("h4",{className:We,"data-test":"strategy-form-available-for"},n.createElement(h._,{id:"strategies_template_available_for_title",defaultMessage:"Available for:"})),n.createElement("div",{className:Ve,"data-test":"strategy-form-checkboxes"},d.map((e=>n.createElement(De.gN,{key:e.id,name:e.title.toLowerCase(),type:"checkbox","data-test":"strategy-form-checkbox-field"},(a=>{let s=a.input,i=a.meta;return n.createElement("div",{className:je,"data-test":"strategy-form-checkbox-container"},n.createElement(M.XZ,{error:Ke(i),onChange:s.onChange,checked:s.checked,key:e.id,name:e.title.toLowerCase(),label:e.title,"data-test":"strategy-form-checkbox"}))})))))):null,n.createElement(_e.Indicators,{"data-test":"strategy-form-inidicators-container"},n.createElement(Te,{indicators:s||[],availableLineColors:i||[]})),n.createElement(_e.Bottom,null,n.createElement(M.zx,{type:"submit",loading:m,color:"accent",size:"l",fullWidth:!0},n.createElement(h._,{id:"strategies_template_save_button_title",defaultMessage:"Save"})))))},Xe=e=>a=>{let s=!1;const i={name:"",ftt:!1,fx:!1};return a.name&&0!==a.name.length?a.name.length>255?(i.name="Name must be shorter than 255 characters",s=!0):/^[0-9a-zA-Z ]+$/gm.test(a.name)||(i.name=e.nameErrorCharacters,s=!0):(i.name=e.nameErrorContains,s=!0),a.ftt||a.fx||(i.ftt=!0,i.fx=!0,s=!0),s?i:void 0},Je=e=>{let a=e.indicatorsForNewStrategy;const s=(0,Le.Z)(),i=(0,Ie.G)(StrategyListService),r=(0,Ie.G)(StrategyEditService),o=(0,u.o)(i.store),l=o.templateList,c=o.mechanics,d=o.listRequestStatus,m=a.mechanic,p=a.indicators,h=a.colors,v=(0,n.useMemo)((()=>Array.from(c.values()).reduce(((e,a)=>(e[a.title]=a.id,e)),{})),[c]),g=(0,n.useMemo)((()=>({nameErrorContains:s.formatMessage(qe.nameErrorContains),nameErrorCharacters:s.formatMessage(qe.nameErrorCharacters)})),[s]),_=(0,n.useMemo)((()=>{let e={};return m&&(e={[m]:!0}),e.name=s.formatMessage(qe.defaultStrategyName,{number:l.length+1}),e}),[m,l,s]),f=(0,n.useCallback)((e=>{const n=Xe(g)(e);if(n)return n;const o=[];e.ftt&&o.push(v.FTT),e.fx&&o.push(v.FX),r.saveNewStrategy({name:e.name,mechanics:o},a).catch((()=>{var e;const a=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return a<s?e.formatMessage({id:"strategies_template_save_request_error",defaultMessage:"Failed to Save Strategy"}):e.formatMessage({id:"strategies_template_total_amount_limit_error_description",defaultMessage:"You can only save up to ".concat(s," strategies. Delete one of the existing strategies to create a new one.")},{value:s})}(s,l.length);null===(e=i.inputs.noticeService)||void 0===e||e.add({id:"strategyListService",collectionName:Me.sm.TOP,notice:{priority:!0,period:4},layout:Pe.G0,layoutProps:{html:a,msgType:"error"}})}))}),[v]);let E;(0,n.useEffect)((()=>{i.loadList()}),[i]);const S=d===Ee.hw.loading;return E=S?n.createElement(M.$j,{size:"s",dataTest:"strategy-form-loader"}):n.createElement(De.l0,{initialValues:_,validate:Xe(g),onSubmit:f},(e=>n.createElement(Ye,Object.assign({},e,{indicators:p,colors:h})))),n.createElement(_e,null,n.createElement(_e.Content,{className:L()({[ze]:S})},E))};Je.displayName="StrategyForm";var Qe=s(30654);class StrategyRepository{getList(){return Qe.$.getStrategyPresetsList()}getDetails(e){return Qe.$.getStrategyPreset({id:e})}findAll(){throw new Error("Method not implemented.")}}class CustomStrategyRepository{delete(e){return(0,i.Z)((function*(){yield Qe.$.deleteCustomStrategyPreset({template_id:e})}))()}save(e){return(0,i.Z)((function*(){return yield Qe.$.createCustomStrategyPreset(e)}))()}find(e){return(0,i.Z)((function*(){return yield Qe.$.getCustomStrategyPreset({template_id:e})}))()}}class MechanicRepository{findAll(){return(0,i.Z)((function*(){return yield Qe.$.getMechanics()}))()}}const $e="NULLzhpf",et="YMvgBdPO",tt=e=>{let a=e.onClick;return n.createElement("div",{className:$e},n.createElement(M.u,{placement:"bottom",arrow:!0,triggerOnHover:!0,triggerOnTap:!0,transition:!0,delay:300,style:{zIndex:101},content:n.createElement("span",null,n.createElement(h._,{id:"strategies_template_delete_button_title",defaultMessage:"Delete"}))},(e=>n.createElement("span",Object.assign({},e),n.createElement(M.Xd,{className:et,onClick:a,"data-test":"remove-strategy-button"},n.createElement(m.IT9,null))))))};var at=s(47450);function st(e,a){const s=(0,at.O)(e);if(s&&s[1]){const e=new RegExp(s[1],"i");return a.filter((a=>e.test(a.name)))}return null}var it=s(36732);const rt="L0Dy_YyK",nt=e=>{let a=e.indicators;const s=n.useMemo((()=>a.reduce(((e,a)=>({indicators:0===a.category?e.indicators+1:e.indicators,oscillators:1===a.category?e.oscillators+1:e.oscillators})),{indicators:0,oscillators:0})),[a]);return n.createElement("div",{className:rt,"data-test":"techanalysis-active-strategy-preview"},s.indicators?n.createElement(n.Fragment,null,n.createElement(h._,{id:"strategies_indicators_number",defaultMessage:"{value, plural, =0 { # indicators } one { # indicator } few { # indicators } many { # indicators } other { # indicators }}",values:{value:s.indicators}})):"",s.indicators&&s.oscillators?n.createElement(n.Fragment,null,"•"):"",s.oscillators?n.createElement(h._,{id:"strategies_oscillators_number",defaultMessage:"{value, plural, =0 { # oscillators } one { # oscillator } few { # oscillators } many { # oscillators } other { # oscillators }}",values:{value:s.oscillators}}):"")};nt.displayName="ActiveStrategyPreview";const ot=e=>{let a=e.item,s=e.headerTitle,i=e.onClose,r=e.onClick;const o=n.useCallback((()=>{r(a.model.id,a.custom)}),[r,a]),l=n.useCallback((()=>{i()}),[i]);return n.createElement(it.A7,{headerTitle:s,title:a.model.name,onClick:o,onClose:l,content:n.createElement(nt,{indicators:a.model.config.indicators})})};ot.displayName="ActiveStrategyItem";const lt=(0,o.v)({dependsOn:[l.u$,_.y,E.x,f.Kg,S.K,y.UE],name:"strategyList",services(e,a){const s=(0,c.Sc)(p.NAVIGATION_SERVICE),r=new StrategyListService(a,{noticeService:e.commonLegacyServiceList.noticeService,goToDetails:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(v.KO.STRATEGY_DETAILS)},goToCustomDetails:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(v.KO.CUSTOM_STRATEGY_DETAILS)},goToList:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(v.KO.TECH_ANALYSIS_LIST)},goToStrategyList:()=>{r&&e.techAnalysisService.goToInstrumentsList()},goToMarket:a=>{e.marketPlaceService.goToDetails(a)},goToHelp:()=>{var e;null==s||null===(e=s.ovlPlusNavigation)||void 0===e||e.goToHelpCenter()},highlightNewStrategy(){e.techAnalysisService.selectInstruments([Ee.Gp])}}),n=(0,c.Sc)(p.STRATEGY_ADAPTER_SERVICE);n&&(n.addLoadListMethod(r.loadList),n.addGoToDetailsMethod(r.goToDetails),n.addRedirectToDetailsMethod(r.redirectToDetails));const o=new StrategyEditService({customStrategyRepository:a.customStrategyRepository},{activeTradeFrameId:e.techAnalysisService.getActiveTradeFrameId(),updateActiveInstruments:e.techAnalysisService.updateActiveInstruments,addIndicator:e.indicatorProxyService.addIndicator,removeAllIndicators:e.indicatorProxyService.removeAllIndicators,setChartSettings:(a,s,i)=>{(0,g.Ps)(a,e.tradeManagerServiceList).then((e=>{const a=Ee.tA[s],r=e.rateService.rateCollection.models.find((e=>e.format===a&&e.step===i));r&&e.tradeFrameService.selectedRate&&r.id!==e.tradeFrameService.selectedRate.id&&e.zoomService.selectRateById(r.id)}))},getFrames:()=>e.tradeManagerServiceList.getFrames(),getEditItemIncrement:()=>e.techAnalysisService.getEditItemIncrement(),goToTechAnalysis(){e.techAnalysisService.goToTechAnalysis()},getActiveCustomStrategy:()=>r.getState().selectedCustomStrategy,updateListAfterCreateStrategy(e){r.updateListAfterCreateStrategy(e)},updateListAfterDeleteStrategy(){r.updateListAfterDeleteStrategy()},getMetaDataForStrategyPreset:a=>(0,i.Z)((function*(){const s=e.indicatorProxyService.getIndicatorList(a),i=e.indicatorProxyService.getAvailableLineColors(),r=(yield(0,g.Ps)(a,e.tradeManagerServiceList)).tradeFrameService.selectedRate;return{chartType:r.format,timeframe:r.step,indicators:s,availableLineColors:i}}))()});return e.tradeManagerServiceList.emitter.on("updateFrames",o.updateFrames),e.techAnalysisService.emitter.on("searchText",(e=>{r.setSearchText(e)})),e.techAnalysisService.emitter.on("activeTradeFrameId",o.updateActiveTradeFrameId),{strategyListService:r,strategyEditService:o}}},{repositories:()=>({strategyListRepository:new StrategyRepository,customStrategyRepository:new CustomStrategyRepository,mechanicRepository:new MechanicRepository})});lt.use(g.rb,((e,a,s)=>{if(!s.strategyEditService.isFeatureEnabled())return e;const i=s.strategyListService.getState(),r=i.strategyList,o=i.templateList,l=i.searchText,c=l?st(l,r):r,d=l?st(l,o):o;return[...e,...c||d?[{count:(c?c.length:0)+(d?d.length:0),accordionItemId:Ee.Gp,icon:n.createElement(m.I1e,null),title:n.createElement(h._,{id:"education_strategies",defaultMessage:"Strategies"}),list:n.createElement(te,{strategyListService:s.strategyListService,strategyList:c||[],templateList:d||[],isSearch:!!l}),position:g.Cf.strategies}]:[]]})).use(g.MR,((e,a,s)=>{if(!s.strategyEditService.isFeatureEnabled())return e;const i=s.strategyEditService.getState().activeTradeFrameId,r=s.strategyEditService.getStrategy(i);return r?[...e,{position:r.position,id:"strategy",component:n.createElement(ot,{headerTitle:n.createElement(h._,{id:"chart_settings_strategy_title",defaultMessage:"Strategy"}),item:r,onClick:(e,a)=>{a?s.strategyListService.selectCustomStrategy(e):s.strategyListService.selectStrategy(e)},onClose:()=>{s.strategyEditService.removeActiveStrategy()}})}]:e})).use(g.dT,((e,a,s)=>{if(!s.strategyEditService.isFeatureEnabled())return e;const i=s.strategyEditService.getCurrentStrategy();return[...e,...i?[{icon:n.createElement(m.I1e,null),title:n.createElement(h._,{id:"education_strategies",defaultMessage:"Strategies"}),count:1,type:Ee.Gp,position:g.Cf.strategies,onRemove:e=>{e===Ee.Gp&&s.strategyEditService.removeActiveStrategy()}}]:[]]}));(0,d.k)(lt,((e,a)=>null));const ct=(0,d.k)(lt,((e,a)=>{const s=(0,u.o)(a.strategyListService.store),i=s.selectedStrategyId,r=s.strategyDetailsList;return n.createElement(Ne,{strategyListService:a.strategyListService,strategyEditService:a.strategyEditService,selectedStrategyId:i,strategyDetailsList:r,isCustomStrategy:!1})})),dt=(0,d.k)(lt,((e,a)=>{const s=(0,u.o)(a.strategyListService.store),i=s.customSelectedStrategyId,r=s.customStrategyDetailsList;return n.createElement(Ne,{strategyListService:a.strategyListService,strategyEditService:a.strategyEditService,selectedStrategyId:i,strategyDetailsList:r,isCustomStrategy:!0})})),ut=(0,d.k)(lt,((e,a)=>{const s=(0,u.o)(a.strategyListService.store),i=s.selectedStrategyId,r=s.strategyList;return n.createElement(Re,{selectedStrategyId:i,strategyList:r})})),mt=(0,d.k)(lt,((e,a)=>{const s=(0,u.o)(a.strategyListService.store),i=s.customSelectedStrategyId,r=s.templateList;return n.createElement(Re,{selectedStrategyId:i,strategyList:r})})),pt=(0,d.k)(lt,((e,a)=>n.createElement(tt,{onClick:a.strategyEditService.deleteSelectedCustomStrategy}))),ht=((0,d.k)(lt,((e,a)=>n.createElement(se,{strategyListService:a.strategyListService}))),(0,d.k)(lt,((e,a)=>{const s=a.strategyListService.getState().indicatorsForNewStrategy;return n.createElement(Je,{indicatorsForNewStrategy:s})})),(0,d.k)(lt,((e,a)=>{const s=(0,r.Z)((0,n.useState)({}),2),i=s[0],o=s[1];return(0,n.useEffect)((()=>{const e=a.strategyEditService.getCustomStrategyData();e&&e.then((e=>{e&&o(e)}))}),[a.indicatorProxyService]),i.indicators?n.createElement(Je,{indicatorsForNewStrategy:i}):null})));lt.enable((0,i.Z)((function*(){return yield(0,c.ic)(p.NAVIGATION_SERVICE),yield(0,c.ic)(p.STRATEGY_ADAPTER_SERVICE),!0}))),lt.onStart((e=>{e.strategyEditService.load()}))},36970:(e,a,s)=>{"use strict";s.d(a,{C:()=>TasksService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223);class TasksService extends o.t{constructor(e,a,s){super({periods:[],current:null,completed:0,unsupportedMechanics:[]}),this.timeService=a,this.availableMechanics=s;var l=this;this.load=this.createTask((0,i.Z)((function*(){const e=l.tasksRepository.getUnsupportedMechanics(),a=yield l.tasksRepository.findAll(),s=Array.from(a);l.update({periods:s,unsupportedMechanics:e.filter((e=>l.availableMechanics[e]))}),l.updateComputedFields(l.timeService.serverTime),l.timeService.events.on("serverTime",l.updateComputedFields)})),{strategy:o.T.once}),this.updateComputedFields=e=>{var a;const s=null!==(a=this.getState().periods.find((a=>a.endingAt>=e.timestamp)))&&void 0!==a?a:null;var i;const o=null!==(i=null==s?void 0:s.items.filter((e=>e.progress.completed>=e.progress.goal)).length)&&void 0!==i?i:0;this.update((e=>s!==e.current||o!==e.completed?(0,n.Z)((0,r.Z)({},e),{current:s,completed:o}):e))},this.tasksRepository=e,this.tasksRepository.subscribe((e=>{this.update({periods:e})}))}}},37865:(e,a,s)=>{"use strict";s.d(a,{Z:()=>z,D:()=>j});var i=s(37323),r=s(24459),n=s(50649),o=s(27378),l=s(60042),c=s.n(l),d=s(63967),u=s(97415),m=s(84584),p=s(2050),h=s(17302),v=s(77740),g=s(82844),_=s(81971),f=s(87561),E=s(36970),S=s(18985);const y="QyYaZvWt",b="MFqC0K3T",C="lhfAHUe9",T=e=>{var a=e.children,s=e.className,i=e.onClick,n=(0,r.Z)(e,["children","className","onClick"]);return o.createElement("div",Object.assign({className:c()(b,i&&C,s),role:i?"button":void 0,onClick:i},n),a)},A=e=>{var a=e.className,s=e.children,i=(0,r.Z)(e,["className","children"]);return o.createElement("div",Object.assign({className:c()(y,a)},i),s)},k="Yu1EQCHT",w="Iwi4GpIU",N="vDw6LWw6",R="Bsylu4II",I="vHHJK3O8",D="VaY50pt9",O="Bg3YV6I1",L=(0,n.observer)((e=>{let a=e.statusColor,s=e.task,i=e.index,r=e.className,n=e.icon;const l=100===s.progress.percent,d=o.createElement("svg",{width:"8",height:"6",viewBox:"0 0 8 6",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:D},o.createElement("path",{d:"M0 2.10857L4 0L8 2.10857V6L4 3.89143L0 6V2.10857Z"}),";");return o.createElement(A,{className:c()(k,l&&O,r),"data-test":"tas-p-tasks-c-task-".concat(i)},o.createElement(T,{className:w},l&&o.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:N},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.2782 7.67154C19.8876 7.28101 19.2545 7.28101 18.864 7.67154L10.3787 16.1568L6.13608 11.9142C5.74555 11.5237 5.11239 11.5237 4.72186 11.9142C4.33134 12.3047 4.33134 12.9379 4.72186 13.3284L9.66609 18.2726C9.66791 18.2745 9.66973 18.2763 9.67157 18.2781C9.81801 18.4246 9.99858 18.5161 10.1877 18.5527C10.2755 18.5697 10.3651 18.5749 10.454 18.5682C10.6843 18.5509 10.9097 18.4543 11.0858 18.2781C11.0878 18.2761 11.0898 18.2741 11.0918 18.2721L20.2782 9.08575C20.6687 8.69523 20.6687 8.06206 20.2782 7.67154Z",fill:"currentColor"})),o.createElement("span",{className:R,"data-test":"tas-p-tasks-c-task-".concat(i,"-description")},s.description),s.awards.map(((e,s)=>o.createElement("div",{className:I,style:{color:a},key:"".concat(e.type,"_").concat(s),"data-test":"tas-p-tasks-c-task-".concat(i,"-award-").concat(e.type)},n||d,o.createElement(g._,{id:"pro_progress_points",defaultMessage:"{value} XP",values:{value:o.createElement(S.BK,{value:e.value})}})))),o.createElement(h.xu,{fullWidth:!0},o.createElement(h.xu,{fitContainer:!0,horizontalAlign:"center",verticalAlign:"center",padding:[0,0,"xs",0]},o.createElement(h.xv,{variant:"S Compact / Bold",dataTest:"tas-p-tasks-c-task-".concat(i,"-progress-count")},o.createElement("span",null,o.createElement(S.BK,{value:s.progress.completed})),"/",o.createElement("span",null,o.createElement(S.BK,{value:s.progress.goal})))),o.createElement(h.kc,{color:a},o.createElement(h.Ex,{dataTest:"daily-task-card",percent:s.progress.percent})))))})),M="_KmfCZKd",P="ZFsIfQdF",x="fTIBiMOm",F="VEBPlMgW",B="axXj9rKJ",Z=o.createElement("span",{className:P,"data-test":"tas-p-tasks-description"},o.createElement(g._,{id:"pro_tasks_description",defaultMessage:"Complete the tasks, get trading experience, and receive awards on your Trader's Way."})),U={bo:o.createElement(g._,{id:"ftt",defaultMessage:"Fixed Time"}),fx:o.createElement(g._,{id:"fx",defaultMessage:"Forex"}),spt:o.createElement(g._,{id:"ct_spt_trade_mode_name",defaultMessage:"Stocks"})},H=o.memo((e=>o.createElement("span",{className:P,"data-test":"tas-p-tasks-description"},o.createElement(g._,{id:"pro_tasks_description_with_mechanics",defaultMessage:"Complete the tasks, get trading experience, and receive awards on your Trader's Way. Trades in any trading mode are counted, except for {mechanics}.",values:{mechanics:o.createElement(o.Fragment,null,e.mechanics.map((e=>U[e])).reduce(((e,a)=>[e,", ",a])))}})))),G=()=>o.createElement(v.$9Y,{"data-test":"tas-p-tasks-countdown-icon"}),V=(0,n.observer)((e=>{let a=e.timeService;const s=(0,d.G)(E.C),i=(0,u.o)(s.store).current;return o.createElement(h.Wo,{serverTime:a.serverTime,startTime:(null==i?void 0:i.endingAt)||0,"data-test":"tas-p-tasks-countdown-timer"})})),W=(0,_.zt)(V,{helper:e=>(0,i.Z)({},e),services:[f.OY]}),j=(0,m.Z)(),z=e=>{let a=e.statusColor,s=e.className;const i=(0,p.x)(j),n=(0,d.G)(E.C),l=(0,u.o)(n.store),m=l.current,v=l.unsupportedMechanics,_=o.createElement("div",{className:x,"data-test":""},o.createElement(h.u,{placement:"top",fitSizeTo:"viewport",triggerOnHover:!1,triggerOnTap:!0,arrow:!0,transition:!0,disablePortal:!0,content:o.createElement("span",{"data-test":"tas-p-tasks-timer-tooltip-text"},o.createElement(g._,{id:"tas_tooltip_timer",defaultMessage:"When time elapses, you will receive new tasks. Incomplete tasks will be deleted."}))},(e=>{var a=e.ref,s=(0,r.Z)(e,["ref"]);return o.createElement(h.ZJ,Object.assign({color:"shade",className:F,text:o.createElement("span",{"data-test":"tas-p-tasks-countdown-text"},o.createElement(g._,{id:"pro_tasks_timer",defaultMessage:"Time left for completing the tasks"})),IconComponent:G,timerElement:()=>o.createElement(W,null),ref:a,"data-test":"tas-p-tasks-countdown"},s))})));return o.createElement("div",{className:c()(M,s)},0===v.length?Z:o.createElement(H,{mechanics:v}),_,null==m?void 0:m.items.map(((e,s)=>o.createElement(L,{key:e.id,task:e,index:s,statusColor:a,className:B,icon:i}))))}},64802:(e,a,s)=>{"use strict";s.d(a,{Cf:()=>i,MR:()=>o.activeInstrumentsPipe,Ps:()=>d.P,SU:()=>n.SU,rb:()=>r.instrumentListPipe,dT:()=>l.removeInstrumentsPipe,aE:()=>c.a,ZH:()=>n.ZH});var i,r=s(10637),n=s(51610),o=s(19657),l=s(42758),c=s(99904);!function(e){e[e.indicator=0]="indicator",e[e.oscillator=1]="oscillator",e[e.drawings=2]="drawings",e[e.strategies=3]="strategies",e[e.advisors=4]="advisors"}(i||(i={}));var d=s(47450)},58568:(e,a,s)=>{"use strict";s.d(a,{y:()=>b});var i=s(27378),r=s(13243),n=s(95601),o=s(74199),l=s(14803),c=s(61681),d=s(18902),u=s(71003),m=s(73533),p=s(52548),h=s(41354),v=s(99904),g=s(51610),_=s(89570),f=s(41028);const E=i.lazy((()=>s.e(637).then(s.bind(s,10637)).then((e=>({default:e.InstrumentListLayout}))))),S=i.lazy((()=>s.e(9657).then(s.bind(s,19657)).then((e=>({default:e.ActiveInstrumentLayout}))))),y=i.lazy((()=>s.e(2758).then(s.bind(s,42758)).then((e=>({default:e.RemoveInstrumentsLayout}))))),b=(0,r.v)({name:"TechAnalysis",dependsOn:[n.u$,c.G,u.x,m.Kg,d.u],services(e,a){const s=new p.N(a.selectInstrumentsRepository,{getFrames:()=>e.tradeManagerServiceList.getFrames(),goToRemoveInstruments:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(l.KO.TECH_ANALYSIS_REMOVE)},goToActiveInstruments:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(l.KO.TECH_ANALYSIS_ACTIVE)},goToInstrumentsList:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(l.KO.TECH_ANALYSIS_LIST)},isTechAnalysisSidebarActive:()=>{const a=e.commonLegacyServiceList.sideBarService.sideBarMinor,s=a.scope.activeItem;return!(!a.isOpen||!s||s.id!==l.KO.TECH_ANALYSIS_LIST&&s.id!==l.KO.TECH_ANALYSIS_ACTIVE&&s.id!==l.KO.INDICATORS_EDIT&&s.id!==l.KO.DRAWINGS_EDIT&&s.id!==l.KO.TECH_ANALYSIS_REMOVE&&s.id!==l.KO.STRATEGY_DETAILS&&s.id!==l.KO.CUSTOM_STRATEGY_DETAILS&&s.id!==l.KO.CREATE_CUSTOM_STRATEGY&&s.id!==l.KO.CREATE_CUSTOM_STRATEGY_REDESIGN)},isTechAnalysisSidebarMainScreensActive:()=>{const a=e.commonLegacyServiceList.sideBarService.sideBarMinor,s=a.scope.activeItem;return!(!a.isOpen||!s||s.id!==l.KO.TECH_ANALYSIS_LIST&&s.id!==l.KO.TECH_ANALYSIS_ACTIVE)},closeSideBar:()=>{e.commonLegacyServiceList.sideBarService.closeMinor()},goToCustomStrategyForm:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(l.KO.CREATE_CUSTOM_STRATEGY_REDESIGN)}});return e.tradeManagerService,e.tradeManagerServiceList.emitter.on("updateFrames",s.updateFrames),{techAnalysisService:s}}},{repositories:()=>({selectInstrumentsRepository:new f._}),publicApi:e=>({techAnalysisService:e.techAnalysisService})});b.use((0,l.FW)(l.KO.TECH_ANALYSIS_LIST),{component:()=>i.createElement(E,null),loader:()=>i.createElement(o.it,null)}).use((0,l.FW)(l.KO.TECH_ANALYSIS_ACTIVE),{component:()=>i.createElement(S,null),loader:()=>i.createElement(o.it,null)}).use(l.qu,{component:()=>i.createElement(h.r,null),loader:()=>i.createElement(o.it,null)}).use((0,l.FW)(l.KO.TECH_ANALYSIS_REMOVE),{component:()=>i.createElement(y,null),loader:()=>i.createElement(o.it,null)}).use(v.a,(e=>i.createElement(v.s,{tradeFrameId:e.tradeFrameId}))).use(g.ZH,(e=>i.createElement(g.Wp,Object.assign({},e)))).use(l.XG,((e,a)=>i.createElement(_.T,{title:"Instruments",isBackButton:a.techAnalysisService.isActiveInstruments(),onClickBack:()=>{a.techAnalysisService.goToActiveInstruments()}}))),b.onAllChildrenResolved((e=>{let a=e.techAnalysisService;e.commonLegacyServiceList.sideBarService.isTechAnalysisLastOpened&&a.goToTechAnalysis()})),b.enable((()=>!0))},41028:(e,a,s)=>{"use strict";s.d(a,{_:()=>SelectInstrumentsRepository});var i=s(29257),r=s(57615),n=s(29042);class SelectInstrumentsRepository{find(){var e=this;return(0,i.Z)((function*(){return Promise.resolve(e.storage.get("data"))}))()}save(e){return this.storage.set("data",e),Promise.resolve()}constructor(){this.storage=new r._({namespace:"techanalysis-select-instruments",backend:new n.u})}}},52548:(e,a,s)=>{"use strict";s.d(a,{N:()=>TechAnalysisService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223),l=s(23934),c=s(57615),d=s(29042);const u="indicators";class TechAnalysisService extends o.t{load(){var e=this;return(0,i.Z)((function*(){const a=yield e.selectInstrumentsRepository.find();a&&e.update({selectedInstruments:a})}))()}setSearchText(e){this.searchText=e,this.emitter.emit("searchText",e)}selectInstruments(e){this.selectInstrumentsRepository.save(e),this.update({selectedInstruments:e})}setActiveTradeFrameId(e){e!==this.getState().activeTradeFrameId&&(this.update({activeTradeFrameId:e}),this.emitter.emit("activeTradeFrameId",e),this.storage.set("activeTradeFrameId",e))}getEditItemIncrement(){return++this.editItemIncrement}getActiveInstruments(){const e=this.getState(),a=e.activeTradeFrameId;return e.activeInstruments[a]}canCreateStrategy(){const e=this.getActiveInstruments();if(!e)return!1;const a=e.indicators||[],s=e.oscillators||[];return Boolean(a.length||s.length)}getActiveTradeFrameId(){return this.getState().activeTradeFrameId}goToRemoveInstruments(){this.inputs.goToRemoveInstruments()}goToActiveInstruments(){this.inputs.goToActiveInstruments()}goToInstrumentsList(){this.inputs.goToInstrumentsList()}goToTechAnalysis(){this.inputs.isTechAnalysisSidebarMainScreensActive()||this.goToTechAnalysisDefaultScreen()}goToTechAnalysisDefaultScreen(){this.isActiveInstruments()?this.inputs.goToActiveInstruments():this.inputs.goToInstrumentsList()}goToCustomStrategyForm(){this.inputs.goToCustomStrategyForm()}closeSidebar(){this.inputs.closeSideBar()}isTechAnalysisSidebarActive(){return this.inputs.isTechAnalysisSidebarActive()}saveInstruments(){this.goToCustomStrategyForm()}isActiveInstruments(){const e=this.getActiveInstruments();return!(!e||!Object.keys(e).some((a=>{const s=e[a];return s&&!!s.length})))}invalidateActiveInstruments(e){const a=this.getState().activeInstruments;Object.keys(a).forEach((s=>{e.find((e=>e.id===s))||delete a[s]})),this.update({activeInstruments:(0,r.Z)({},a)})}constructor(e,a){var s;super({activeTradeFrameId:"",activeInstruments:{},selectedInstruments:[u]}),s=this,this.selectInstrumentsRepository=e,this.inputs=a,this.searchText="",this.emitter=(0,l.Z)(),this.editItemIncrement=(new Date).getTime(),this.storage=new c._({namespace:"techanalysis-service",backend:new d.u}),this.updateActiveInstruments=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0;const l=s.getState().activeInstruments;s.update({activeInstruments:(0,n.Z)((0,r.Z)({},l),{[e]:(0,n.Z)((0,r.Z)({},l[e]),{[a]:i})})}),!s.isActiveInstruments()&&s.isTechAnalysisSidebarActive()&&s.goToInstrumentsList(),o&&i.length&&(s.editItemIncrement=i.reduce(((e,a)=>a.position>e?a.position:e),s.editItemIncrement))},this.updateFrames=e=>{const a=this.getState().activeTradeFrameId;!!!e.find((e=>e.id===a&&e.active))&&this.inputs.isTechAnalysisSidebarActive()&&this.inputs.closeSideBar(),this.invalidateActiveInstruments(e)};const i=this.storage.get("activeTradeFrameId"),o=this.inputs.getFrames();this.setActiveTradeFrameId(i&&o.find((e=>e.id===i))?i:o[0].id),this.load()}}},19657:(e,a,s)=>{"use strict";s.r(a),s.d(a,{ActiveInstrumentLayout:()=>m,activeInstrumentsPipe:()=>u});var i=s(27378),r=s(46124),n=s(63967),o=s(76232),l=s(17302),c=s(82844),d=s(52548);const u=(0,o.t)(),m=()=>{const e=(0,r.k)(u,[]),a=(0,n.G)(d.N),s=(0,l.Fg)().dir,o=i.useCallback((()=>{a.goToInstrumentsList()}),[a]);return i.createElement("div",{"data-test":"techanalysis-active-instrument-layout",dir:s},i.createElement(l.xu,{display:"grid",gap:"l",padding:"l"},e.sort(((e,a)=>e.position>a.position?1:-1)).map((e=>i.createElement(i.Fragment,{key:e.id},e.component))),i.createElement(l.zx,{fullWidth:!0,onClick:o,dataTest:"techanalysis-open-instrument-list-button"},i.createElement(c._,{id:"user_indicators_open_instrument_list",defaultMessage:"Open Instruments List"}))))}},6016:(e,a,s)=>{"use strict";s.d(a,{r:()=>m});var i=s(3121),r=s(27378),n=s(63967),o=s(17302),l=s(77740),c=s(82844),d=s(52548),u=s(78676);const m=()=>{const e=(0,i.Z)(r.useState(!1),2),a=e[0],s=e[1],m=(0,n.G)(d.N),p=m.canCreateStrategy(),h=r.useCallback((()=>{m.saveInstruments()}),[m]),v=r.useCallback((()=>{m.goToRemoveInstruments()}),[m]),g=r.useCallback((e=>{switch(e){case"save":h();break;case"remove":v()}}),[h,v]);return r.createElement(o.v2,{open:a,onToggle:s,selected:"",onChange:g},r.createElement(o.v2.Trigger,null,r.createElement(o.Xd,{className:u.Z.more,"data-test":"techanalysis-active-instrument-menu-button"},r.createElement(l.nqv,null))),r.createElement(o.v2.Content,null,p?r.createElement(o.v2.Item,{value:"save",label:r.createElement(c._,{id:"user_indicators_add_strategy_template_action",defaultMessage:"Save as Strategy"}),icon:r.createElement(l.PxB,{className:u.Z.plusIcon}),dataTest:"techanalysis-menu-option-save"}):null,r.createElement(o.v2.Item,{value:"remove",label:r.createElement(c._,{className:u.Z.removeText,id:"user_indicators_remove_action",defaultMessage:"Remove All"}),icon:r.createElement(l.IT9,{className:u.Z.removeText}),dataTest:"techanalysis-menu-option-remove"})))};m.displayName="ActiveInstrumentMenu"},41354:(e,a,s)=>{"use strict";s.d(a,{r:()=>i.r});var i=s(6016)},80432:(e,a,s)=>{"use strict";s.d(a,{T:()=>c});var i=s(27378),r=s(74199),n=s(17302),o=s(77740),l=s(41309);const c=e=>{let a=e.isBackButton,s=e.title,c=e.onClickBack;return i.createElement("div",{className:l.Z.host},s&&!a?i.createElement(r.pY,{size:"medium",align:"left",verticalAlign:"center","data-test":"techanalysis-custom-panel-header-title",isClipped:!0},s):null,a?i.createElement(n.Xd,{className:l.Z.button,onClick:c,"data-test":"techanalysis-custom-panel-header-back-button"},i.createElement(o.vjc,null)):null)};c.displayName="CustomPanelHeader"},89570:(e,a,s)=>{"use strict";s.d(a,{T:()=>i.T});var i=s(80432)},10637:(e,a,s)=>{"use strict";s.r(a),s.d(a,{InstrumentListLayout:()=>V,instrumentListPipe:()=>G});var i=s(3121),r=s(27378),n=s(63967),o=s(97415),l=s(46124),c=s(76232),d=s(17302),u=s(82844),m=s(23735),p=s(52548),h=s(60042),v=s.n(h),g=s(2948),_=s(77740);const f="V1k5KDJy",E="ikOZsfWF",S="BvVaYD2W",y=e=>{let a=e.value,s=e.minimized,i=e.onChange;const n=(0,g.Z)(),o=r.useCallback((e=>{i(e.target.value)}),[i]),l=r.useCallback((()=>{i("")}),[i]),c=r.useMemo((()=>a&&!s?r.createElement(d.Xd,{onClick:l,"data-test":"instrument-search-field-close"},r.createElement(_.bMz,{className:v()(E,a&&S)})):null),[a,s,l]);return r.createElement(d.nv,{placeholder:n.formatMessage({id:"search",defaultMessage:"Search"}),type:"text",size:"xsmall",className:f,name:"instrument-search",value:a,"data-test":"techanalysis-instrument-search-field",startIcon:r.createElement(_.jVj,{className:E}),endIcon:c,onChange:o})};y.displayName="SearchTextField";const b="sVn5q2SI",C="Rkl070Ej",T="taMQ2eSx",A=()=>r.createElement("div",{className:b,"data-test":"techanalysis-not-found"},r.createElement("div",{className:T},r.createElement(_.jVj,null)),r.createElement("div",{className:C},r.createElement(u._,{id:"indicators_search_empty_results",defaultMessage:"No results found. Try a different keyword."})));A.displayName="NotFoundItems";const k="WADKvhB0",w="L8v5Ip_s",N="IHMq2FOg",R="DzTjAFTE",I=e=>{let a=e.title,s=e.icon,i=e.count;return r.createElement("div",{className:k,"data-test":"techanalysis-instrument-list-section-header"},r.createElement("span",{className:w},s),r.createElement("span",{className:N,"data-test":"techanalysis-instrument-list-section-title"},a),i?r.createElement("span",{className:R},i):null)};I.displayName="InstrumentListSectionHeader";const D="PS4a2rGe",O="IVIiDuc9",L=e=>{let a=e.title,s=e.count;return r.createElement("div",{className:D,"data-test":"techanalysis-search-instrument-header"},r.createElement("div",{className:O,"data-test":"techanalysis-search-instrument-header-title"},a),r.createElement("div",{"data-test":"techanalysis-search-instrument-header-count"},s))};L.displayName="SearchInstrumentHeader";const M="DWRU2zig",P=e=>{let a=e.title;return r.createElement("h3",{className:M,"data-test":"techanalysis-instrument-list-header"},a)};P.displayName="InstrumentListHeader";const x="VriQRZ7f",F="LK5aS8xe",B="l7DlqMWj",Z="rSDAHSsS",U="PQ8hdQh8",H="FjcT0c9O",G=(0,c.t)();const V=()=>{const e=(0,n.G)(p.N),a=(0,o.o)(e.store).selectedInstruments,s=(0,l.k)(G,[]),c=(0,d.Fg)().dir,h=(0,i.Z)(r.useState(e.searchText),2),v=h[0],g=h[1],_=r.useMemo((()=>s.reduce(((e,a)=>e+a.count),0)),[s]),f=r.useCallback((a=>{/^\s/.test(a)||(g(a),e.setSearchText(a))}),[e]),E=r.useCallback((a=>{const s=function(e){return"strategies"===e?"open_vip_strategies":"advisors"===e?"advisors":void 0}((0,i.Z)(a,1)[0]);s&&(0,m.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"indicators/".concat(s),eventLabel:"indicators/".concat(s)}),e.selectInstruments(a)}),[e]);let S;return S=_?v.length?r.createElement("div",{className:U,"data-test":"techanalysis-instrument-list-search-list"},s.sort(((e,a)=>e.position>a.position?1:-1)).map((e=>r.createElement(r.Fragment,{key:e.position},r.createElement(L,{title:e.title,count:e.count}),r.createElement("div",{"data-test":"techanalysis-instrument-list-search-item"},e.list))))):r.createElement(d.UQ,{appearance:"flat",value:a,onChange:E,"data-test":"techanalysis-instrument-list-accordion"},s.sort(((e,a)=>e.position>a.position?1:-1)).map((e=>r.createElement(d.UQ.Item,{key:e.position,name:e.accordionItemId,dataTestTrigger:"indicators-button-show-".concat(e.accordionItemId),dataTestDetails:"techanalysis-instrument-items",title:r.createElement(I,{icon:e.icon,title:e.title,count:e.activeCount})},e.list)))):r.createElement(A,null),r.createElement("div",{className:x,dir:c},r.createElement("div",{className:F},e.isActiveInstruments()?r.createElement(P,{title:"Instruments"}):null,r.createElement("div",{className:B},r.createElement("div",{className:Z},r.createElement(y,{value:v,onChange:f})),S)),r.createElement("div",{className:H},r.createElement(u._,{id:"trading_signals_bundles_footer",defaultMessage:"All the features offered by the platform can be used for technical analysis. Traders make all trading decisions independently."})))};V.displayName="InstrumentListLayout"},79274:(e,a,s)=>{"use strict";s.d(a,{SU:()=>_,Wp:()=>f,ZH:()=>g});var i=s(27378),r=s(84584),n=s(46124),o=s(76232),l=s(60042),c=s.n(l),d=s(15696),u=s(36732),m=s(17302),p=s(95029),h=s(16146),v=s(3605);const g=(0,r.Z)(),_=(0,o.t)(),f=e=>{let a=e.hasSentiment,s=e.tradeFrameId,r=e.className;const o=(0,m.Fg)().dir,l=(0,n.k)(_,[],{tradeFrameId:s});return i.createElement("div",{className:c()(v.Z.host,a&&v.Z.host_has_sentiment,r),dir:o,"data-test":"techanalysis-instrument-legends"},i.createElement(p.Z6,{classNameContent:v.Z.scrollContent,classNameContainerHasButtons:v.Z.scrollContainer_hasBackButton,classNameWrapperHasButtons:v.Z.scrollWrapper_hasBackButton,autoScrollCorrectionLeft:8,autoScrollCorrectionRight:8,NextButton:h.x,BackButton:h.x},(e=>i.createElement(u._d.Provider,{value:{scrollToRef:e}},i.createElement(d.Z,{className:v.Z.groupContainer},l.sort(((e,a)=>e.position>a.position?1:-1)).map((e=>e.component)))))))};f.displayName="Legends"},16146:(e,a,s)=>{"use strict";s.d(a,{x:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(77740),l=s(63477);const c=e=>{let a=e.next,s=e.disabled,r=e.onClick;return i.createElement("button",{disabled:s,className:n()(l.Z.host,a&&l.Z.next),onClick:r,"data-test":"techanalysis-instrument-legends-scroll-button-".concat(a?"next":"prev")},a?i.createElement(o.Ec8,null):i.createElement(o.D6v,null))};c.displayName="ScrollButton"},51610:(e,a,s)=>{"use strict";s.d(a,{SU:()=>i.SU,Wp:()=>i.Wp,ZH:()=>i.ZH});var i=s(79274)},42758:(e,a,s)=>{"use strict";s.r(a),s.d(a,{RemoveInstrumentsLayout:()=>I,removeInstrumentsPipe:()=>N});var i=s(37323),r=s(64356),n=s(3121),o=s(27378),l=s(63967),c=s(46124),d=s(76232),u=s(17302),m=s(82844),p=s(52548),h=s(60042),v=s.n(h);const g="eu4Dd1es",_="LBwHfwDK",f="NhVMLzGB",E="qVWbDJHx",S="bTwvd5sp",y="Ob6_PgMQ",b=e=>{let a=e.value;return o.createElement("div",{className:y},a)};b.displayName="InstrumentCountLabel";const C=e=>{let a=e.icon,s=e.title,i=e.label,r=e.endContent,n=e.highlight;return o.createElement("div",{className:v()(g,n&&f),"data-test":"techanalysis-instrument-title"},o.createElement("div",{className:_},a),o.createElement("div",{className:E},o.createElement("span",{className:S,"data-test":"techanalysis-instrument-title-text"},s),i),r)};C.displayName="InstrumentTitle";const T="mdigNwuO",A="W22YKyBj",k="Fg4W9dus",w="FLDjYQBl",N=(0,d.t)(),R=e=>{let a=e.icon,s=e.title,i=e.count,r=e.type,l=e.defaultChecked,c=void 0===l||l,d=e.error,m=e.onCheck;const p=(0,n.Z)(o.useState(c),2),h=p[0],v=p[1],g=o.useCallback((e=>{v(e.target.checked),m(e.target.checked,r)}),[m,r]);return o.createElement(C,{icon:a,title:s,highlight:h,label:o.createElement(b,{value:i}),endContent:o.createElement(u.XZ,{name:"checkboxTextChecked",error:d?"1":void 0,hideMeta:!0,checked:h,onChange:g})})},I=()=>{const e=(0,u.Fg)().dir,a=(0,l.G)(p.N),s=(0,c.k)(N,[]),d=s.reduce(((e,a)=>(0,r.Z)((0,i.Z)({},e),{[a.type]:void 0===a.defaultChecked||a.defaultChecked})),{}),h=(0,n.Z)(o.useState(d),2),v=h[0],g=h[1],_=(0,n.Z)(o.useState(!1),2),f=_[0],E=_[1],S=o.useCallback(((e,a)=>{g((0,r.Z)((0,i.Z)({},v),{[a]:e}))}),[v]),y=o.useCallback((()=>{const e=Object.values(v).some((e=>e));let i=!1;E(!e),e&&s.forEach((e=>{v[e.type]&&(e.onRemove(e.type),i=!0)})),i&&a.goToTechAnalysis()}),[v,s,a]),b=o.useCallback((()=>{a.goToActiveInstruments()}),[a]);return o.createElement("div",{className:T,"data-test":"techanalysis-remove-instruments-layout",dir:e},o.createElement("div",{className:A},s.sort(((e,a)=>e.position>a.position?1:-1)).map(((e,a)=>o.createElement("div",{className:k,key:a},o.createElement(R,Object.assign({key:a},e,{error:f,onCheck:S})))))),o.createElement(u.xu,{gap:"s",padding:["l",0,0,0]},o.createElement(u.zx,{fullWidth:!0,variant:"secondary",color:"negative",onClick:y,dataTest:"techanalysis-remove-instrument-button"},o.createElement(m._,{className:w,id:"indicator_settings_remove_action",defaultMessage:"Remove"})),o.createElement(u.zx,{fullWidth:!0,onClick:b,dataTest:"techanalysis-cancel-remove-instrument-button"},o.createElement(m._,{id:"cancel",defaultMessage:"Cancel"}))))};I.displayName="RemoveInstrumentsLayout"},25052:(e,a,s)=>{"use strict";s.d(a,{a:()=>p,s:()=>h});var i=s(27378),r=s(84584),n=s(63967),o=s(97415),l=s(77740),c=s(82844),d=s(21130),u=s(65592),m=s(52548);const p=(0,r.Z)(),h=e=>{let a=e.tradeFrameId;const s=(0,n.G)(m.N),r=(0,o.o)(s.store).activeTradeFrameId,p=r===a,h=s.isTechAnalysisSidebarActive(),v=p&&h,g=i.useCallback((()=>{h&&r===a?s.closeSidebar():(s.setActiveTradeFrameId(a),s.goToTechAnalysisDefaultScreen())}),[a,s,h,r]);return i.createElement(u.P,{content:i.createElement(c._,Object.assign({},u.X.techAnalysis)),disabled:v},i.createElement(d.n,{onClick:g,"data-test":"indicator-menu",active:v},i.createElement(l.Dlp,null)))};h.displayName="TechAnalysisButton"},99904:(e,a,s)=>{"use strict";s.d(a,{a:()=>i.a,s:()=>i.s});var i=s(25052)},47450:(e,a,s)=>{"use strict";s.d(a,{O:()=>n,P:()=>o});var i=s(29257),r=s(26763);function n(e){const a=e.replace(/[.*+?^${}()|[\]\\\/]/g,"");return/([A-z&-]+)?(\d+)?/.exec(a)}function o(e,a){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)((function*(e,a){const s=yield a.getFrameService(e,r.CHART_STORE);return s?(yield s.waitingForChartInit(),Promise.resolve(s)):Promise.reject()}))).apply(this,arguments)}},35377:(e,a,s)=>{"use strict";s.d(a,{JS:()=>i.JS,si:()=>i.si,t0:()=>i.t0});var i=s(41780)},41780:(e,a,s)=>{"use strict";s.d(a,{JS:()=>n,si:()=>i,t0:()=>r});const i={LIGHT:"light",DARK:"dark",CLASSIC:"classic",PURPLEHAZE:"purplehaze",INSPIRE:"inspire",TRIVANDRUM:"trivandrum",JAIPUR:"jaipur",NAGPUR:"nagpur",DARJEELING:"darjeeling",AMRITSAR:"amritsar",CRYPTO:"crypto",FOOTBALL:"football"},r=i.DARK,n="theme"},5343:(e,a,s)=>{"use strict";s.d(a,{w:()=>G});var i=s(27378),r=s(60521),n=s(72021),o=s(13243),l=s(46245),c=s(97415),d=s(95601),u=s(23735),m=s(82844),p=s(72407),h=s(80027),v=s(56283),g=s(66412),_=s(71003),f=s(4093),E=s(17302),S=s(35377),y=s(77740);const b=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#14161A"}),i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint0_linear_27409:17107)"}),i.createElement("path",{d:"M22 10.688V9.16943L20.8981 10.4287H19.4375C19.3675 10.4287 19.2984 10.4434 19.2344 10.4718L15.8594 11.9718C15.7717 12.0108 15.6971 12.0742 15.6445 12.1544L14.1526 14.4278L12.9286 14.117L11.3322 12.6979C11.1427 12.5295 10.8573 12.5295 10.6678 12.6979L9.23506 13.9714L7.85143 13.2687C7.68034 13.1818 7.47462 13.2004 7.32198 13.3167L5.67059 14.5749L4.17581 15.3342L2.09356 14.9376C2.06214 14.9316 2.03085 14.9287 2 14.9286V15.9377L4.15644 16.3485C4.26519 16.3692 4.37774 16.3532 4.47643 16.3031L6.16393 15.4459C6.19086 15.4323 6.2165 15.4162 6.24052 15.3979L7.67838 14.3024L9.08607 15.0174C9.26938 15.1105 9.49101 15.0819 9.64468 14.9453L11 13.7406L12.3553 14.9453C12.4151 14.9985 12.4868 15.0365 12.5644 15.0562L14.2519 15.4848C14.4587 15.5373 14.676 15.4528 14.793 15.2745L16.3999 12.8259L19.5436 11.4287H21.125C21.2692 11.4287 21.4063 11.3665 21.5013 11.258L22 10.688Z",fill:"#02A6F2"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_27409:17107",x1:"12",y1:"10",x2:"12",y2:"28",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#02A6F2",stopOpacity:"0.3"}),i.createElement("stop",{offset:"1",stopColor:"#7BCBF0",stopOpacity:"0"}))))));b.displayName="DarkIcon";const C=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"white"}),i.createElement("path",{d:"M17.625 21.9998H6.37515C3.95893 21.9998 2.0002 20.0411 2.0002 17.6248V16.8498V15.5L4.25 16.0748L5.9375 15.1905L7.625 13.864L9.3125 14.7483L11 13.2007L12.6875 14.7483L14.375 15.1905L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95807V17.6248C22 20.0411 20.0413 21.9998 17.625 21.9998Z",fill:"url(#paint0_linear_17319:23890)"}),i.createElement("path",{d:"M22 10.6878V9.16925L20.8981 10.4285H19.4375C19.3675 10.4285 19.2984 10.4432 19.2344 10.4716L15.8594 11.9716C15.7717 12.0106 15.6971 12.074 15.6445 12.1542L14.1526 14.4276L12.9286 14.1168L11.3322 12.6977C11.1427 12.5293 10.8573 12.5293 10.6678 12.6977L9.23506 13.9713L7.85143 13.2685C7.68034 13.1816 7.47462 13.2002 7.32198 13.3165L5.67059 14.5747L4.17581 15.334L2.09356 14.9374C2.06214 14.9314 2.03085 14.9285 2 14.9285V15.9375L4.15644 16.3483C4.26519 16.369 4.37774 16.353 4.47643 16.3029L6.16393 15.4458C6.19086 15.4321 6.2165 15.416 6.24052 15.3977L7.67838 14.3022L9.08607 15.0172C9.26938 15.1103 9.49101 15.0817 9.64468 14.9451L11 13.7404L12.3553 14.9451C12.4151 14.9983 12.4868 15.0363 12.5644 15.056L14.2519 15.4846C14.4587 15.5371 14.676 15.4527 14.793 15.2743L16.3999 12.8258L19.5436 11.4285H21.125C21.2692 11.4285 21.4063 11.3663 21.5013 11.2578L22 10.6878Z",fill:"#02A6F2"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_17319:23890",x1:"12",y1:"10",x2:"11.9883",y2:"28",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#02A6F2",stopOpacity:"0.3"}),i.createElement("stop",{offset:"1",stopColor:"#7BCBF0",stopOpacity:"0"}))))));C.displayName="LightIcon";const T=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#1C2A3B"}),i.createElement("path",{d:"M17.625 21.9998H6.37515C3.95893 21.9998 2.0002 20.0411 2.0002 17.6248V16.8498V15.5L4.25 16.0748L5.9375 15.1905L7.625 13.864L9.3125 14.7483L11 13.2007L12.6875 14.7483L14.375 15.1905L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95807V17.6248C22 20.0411 20.0413 21.9998 17.625 21.9998Z",fill:"url(#paint0_linear_17319:23905)"}),i.createElement("path",{d:"M22 10.6878V9.16925L20.8981 10.4285H19.4375C19.3675 10.4285 19.2984 10.4432 19.2344 10.4716L15.8594 11.9716C15.7717 12.0106 15.6971 12.074 15.6445 12.1542L14.1526 14.4276L12.9286 14.1168L11.3322 12.6977C11.1427 12.5293 10.8573 12.5293 10.6678 12.6977L9.23506 13.9713L7.85143 13.2685C7.68034 13.1816 7.47462 13.2002 7.32198 13.3165L5.67059 14.5747L4.17581 15.334L2.09356 14.9374C2.06214 14.9314 2.03085 14.9285 2 14.9285V15.9375L4.15644 16.3483C4.26519 16.369 4.37774 16.353 4.47643 16.3029L6.16393 15.4458C6.19086 15.4321 6.2165 15.416 6.24052 15.3977L7.67838 14.3022L9.08607 15.0172C9.26938 15.1103 9.49101 15.0817 9.64468 14.9451L11 13.7404L12.3553 14.9451C12.4151 14.9983 12.4868 15.0363 12.5644 15.056L14.2519 15.4846C14.4587 15.5371 14.676 15.4527 14.793 15.2743L16.3999 12.8258L19.5436 11.4285H21.125C21.2692 11.4285 21.4063 11.3663 21.5013 11.2578L22 10.6878Z",fill:"#02A6F2"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_17319:23905",x1:"12",y1:"10",x2:"12",y2:"28",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#02A6F2",stopOpacity:"0.3"}),i.createElement("stop",{offset:"1",stopColor:"#7BCBF0",stopOpacity:"0"}))))));T.displayName="ClassicIcon";const A=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#1E1E42"}),i.createElement("path",{d:"M17.625 21.9998H6.37515C3.95893 21.9998 2.0002 20.0411 2.0002 17.6248V16.8498V15.5L4.25 16.0748L5.9375 15.1905L7.625 13.864L9.3125 14.7483L11 13.2007L12.6875 14.7483L14.375 15.1905L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95807V17.6248C22 20.0411 20.0413 21.9998 17.625 21.9998Z",fill:"url(#paint0_linear_17319:23895)"}),i.createElement("path",{d:"M22 10.6878V9.16925L20.8981 10.4285H19.4375C19.3675 10.4285 19.2984 10.4432 19.2344 10.4716L15.8594 11.9716C15.7717 12.0106 15.6971 12.074 15.6445 12.1542L14.1526 14.4276L12.9286 14.1168L11.3322 12.6977C11.1427 12.5293 10.8573 12.5293 10.6678 12.6977L9.23506 13.9713L7.85143 13.2685C7.68034 13.1816 7.47462 13.2002 7.32198 13.3165L5.67059 14.5747L4.17581 15.334L2.09356 14.9374C2.06214 14.9314 2.03085 14.9285 2 14.9285V15.9375L4.15644 16.3483C4.26519 16.369 4.37774 16.353 4.47643 16.3029L6.16393 15.4458C6.19086 15.4321 6.2165 15.416 6.24052 15.3977L7.67838 14.3022L9.08607 15.0172C9.26938 15.1103 9.49101 15.0817 9.64468 14.9451L11 13.7404L12.3553 14.9451C12.4151 14.9983 12.4868 15.0363 12.5644 15.056L14.2519 15.4846C14.4587 15.5371 14.676 15.4527 14.793 15.2743L16.3999 12.8258L19.5436 11.4285H21.125C21.2692 11.4285 21.4063 11.3663 21.5013 11.2578L22 10.6878Z",fill:"#E49612"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_17319:23895",x1:"12.0001",y1:"9.95807",x2:"12",y2:"28",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#E49612",stopOpacity:"0.3"}),i.createElement("stop",{offset:"1",stopColor:"#FED082",stopOpacity:"0"}))))));A.displayName="PurpleHazeIcon";const k=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#0F1931"}),i.createElement("path",{d:"M17.625 21.9998H6.37515C3.95893 21.9998 2.0002 20.0411 2.0002 17.6248V16.8498V15.5L4.25 16.0748L5.9375 15.1905L7.625 13.864L9.3125 14.7483L11 13.2007L12.6875 14.7483L14.375 15.1905L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95807V17.6248C22 20.0411 20.0413 21.9998 17.625 21.9998Z",fill:"url(#paint0_linear_17319:23900)"}),i.createElement("path",{d:"M22 10.6878V9.16925L20.8981 10.4285H19.4375C19.3675 10.4285 19.2984 10.4432 19.2344 10.4716L15.8594 11.9716C15.7717 12.0106 15.6971 12.074 15.6445 12.1542L14.1526 14.4276L12.9286 14.1168L11.3322 12.6977C11.1427 12.5293 10.8573 12.5293 10.6678 12.6977L9.23506 13.9713L7.85143 13.2685C7.68034 13.1816 7.47462 13.2002 7.32198 13.3165L5.67059 14.5747L4.17581 15.334L2.09356 14.9374C2.06214 14.9314 2.03085 14.9285 2 14.9285V15.9375L4.15644 16.3483C4.26519 16.369 4.37774 16.353 4.47643 16.3029L6.16393 15.4458C6.19086 15.4321 6.2165 15.416 6.24052 15.3977L7.67838 14.3022L9.08607 15.0172C9.26938 15.1103 9.49101 15.0817 9.64468 14.9451L11 13.7404L12.3553 14.9451C12.4151 14.9983 12.4868 15.0363 12.5644 15.056L14.2519 15.4846C14.4587 15.5371 14.676 15.4527 14.793 15.2743L16.3999 12.8258L19.5436 11.4285H21.125C21.2692 11.4285 21.4063 11.3663 21.5013 11.2578L22 10.6878Z",fill:"#C33960"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_17319:23900",x1:"12",y1:"9.95807",x2:"12",y2:"28",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#C33960",stopOpacity:"0.4"}),i.createElement("stop",{offset:"1",stopColor:"#3A5ED3",stopOpacity:"0"}))))));k.displayName="InspireIcon";const w=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#09090C"}),i.createElement("mask",{id:"mask0_65_22652",maskUnits:"userSpaceOnUse",x:"2",y:"9",width:"20",height:"13"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint0_linear_65_22652)"})),i.createElement("g",{mask:"url(#mask0_65_22652)"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"#18CBC1"})),i.createElement("path",{d:"M22 10.688V9.16943L20.8981 10.4287H19.4375C19.3675 10.4287 19.2984 10.4434 19.2344 10.4718L15.8594 11.9718C15.7717 12.0108 15.6971 12.0742 15.6445 12.1544L14.1526 14.4278L12.9286 14.117L11.3322 12.6979C11.1427 12.5295 10.8573 12.5295 10.6678 12.6979L9.23506 13.9714L7.85143 13.2687C7.68034 13.1818 7.47462 13.2004 7.32198 13.3167L5.67059 14.5749L4.17581 15.3342L2.09356 14.9376C2.06214 14.9316 2.03085 14.9287 2 14.9286V15.9377L4.15644 16.3485C4.26519 16.3692 4.37774 16.3532 4.47643 16.3031L6.16393 15.4459C6.19086 15.4323 6.2165 15.4162 6.24052 15.3979L7.67838 14.3024L9.08607 15.0174C9.26938 15.1105 9.49101 15.0819 9.64468 14.9453L11 13.7406L12.3553 14.9453C12.4151 14.9985 12.4868 15.0365 12.5644 15.0562L14.2519 15.4848C14.4587 15.5373 14.676 15.4528 14.793 15.2745L16.3999 12.8259L19.5436 11.4287H21.125C21.2692 11.4287 21.4063 11.3665 21.5013 11.258L22 10.688Z",fill:"#18CBC1"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_65_22652",x1:"12.0001",y1:"9.95801",x2:"12.0001",y2:"21.9997",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopOpacity:"0.5"}),i.createElement("stop",{offset:"1",stopOpacity:"0"}))))));w.displayName="FlowerMint";const N=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#09090C"}),i.createElement("mask",{id:"mask0_65_22652",maskUnits:"userSpaceOnUse",x:"2",y:"9",width:"20",height:"13"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint0_linear_65_22652)"})),i.createElement("g",{mask:"url(#mask0_65_22652)"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"#8600EF"})),i.createElement("path",{d:"M22 10.688V9.16943L20.8981 10.4287H19.4375C19.3675 10.4287 19.2984 10.4434 19.2344 10.4718L15.8594 11.9718C15.7717 12.0108 15.6971 12.0742 15.6445 12.1544L14.1526 14.4278L12.9286 14.117L11.3322 12.6979C11.1427 12.5295 10.8573 12.5295 10.6678 12.6979L9.23506 13.9714L7.85143 13.2687C7.68034 13.1818 7.47462 13.2004 7.32198 13.3167L5.67059 14.5749L4.17581 15.3342L2.09356 14.9376C2.06214 14.9316 2.03085 14.9287 2 14.9286V15.9377L4.15644 16.3485C4.26519 16.3692 4.37774 16.3532 4.47643 16.3031L6.16393 15.4459C6.19086 15.4323 6.2165 15.4162 6.24052 15.3979L7.67838 14.3024L9.08607 15.0174C9.26938 15.1105 9.49101 15.0819 9.64468 14.9453L11 13.7406L12.3553 14.9453C12.4151 14.9985 12.4868 15.0365 12.5644 15.0562L14.2519 15.4848C14.4587 15.5373 14.676 15.4528 14.793 15.2745L16.3999 12.8259L19.5436 11.4287H21.125C21.2692 11.4287 21.4063 11.3665 21.5013 11.258L22 10.688Z",fill:"#8600EF"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_65_22652",x1:"12.0001",y1:"9.95801",x2:"12.0001",y2:"21.9997",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopOpacity:"0.5"}),i.createElement("stop",{offset:"1",stopOpacity:"0"}))))));N.displayName="FreshBerries";const R=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#09090C"}),i.createElement("mask",{id:"mask0_65_22652",maskUnits:"userSpaceOnUse",x:"2",y:"9",width:"20",height:"13"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint0_linear_65_22652)"})),i.createElement("g",{mask:"url(#mask0_65_22652)"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint1_linear_65_22652)"})),i.createElement("path",{d:"M22 10.688V9.16943L20.8981 10.4287H19.4375C19.3675 10.4287 19.2984 10.4434 19.2344 10.4718L15.8594 11.9718C15.7717 12.0108 15.6971 12.0742 15.6445 12.1544L14.1526 14.4278L12.9286 14.117L11.3322 12.6979C11.1427 12.5295 10.8573 12.5295 10.6678 12.6979L9.23506 13.9714L7.85143 13.2687C7.68034 13.1818 7.47462 13.2004 7.32198 13.3167L5.67059 14.5749L4.17581 15.3342L2.09356 14.9376C2.06214 14.9316 2.03085 14.9287 2 14.9286V15.9377L4.15644 16.3485C4.26519 16.3692 4.37774 16.3532 4.47643 16.3031L6.16393 15.4459C6.19086 15.4323 6.2165 15.4162 6.24052 15.3979L7.67838 14.3024L9.08607 15.0174C9.26938 15.1105 9.49101 15.0819 9.64468 14.9453L11 13.7406L12.3553 14.9453C12.4151 14.9985 12.4868 15.0365 12.5644 15.0562L14.2519 15.4848C14.4587 15.5373 14.676 15.4528 14.793 15.2745L16.3999 12.8259L19.5436 11.4287H21.125C21.2692 11.4287 21.4063 11.3665 21.5013 11.258L22 10.688Z",fill:"url(#paint2_linear_65_22652)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_65_22652",x1:"12.0001",y1:"9.95801",x2:"12.0001",y2:"21.9997",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopOpacity:"0.5"}),i.createElement("stop",{offset:"1",stopOpacity:"0"})),i.createElement("linearGradient",{id:"paint1_linear_65_22652",x1:"22",y1:"10",x2:"2",y2:"22",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#9E00FF"}),i.createElement("stop",{offset:"1",stopColor:"#FF9900"})),i.createElement("linearGradient",{id:"paint2_linear_65_22652",x1:"22",y1:"10",x2:"2.5",y2:"16",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#9E00FF"}),i.createElement("stop",{offset:"1",stopColor:"#FF9900"}))))));R.displayName="HappyHoli";const I=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{fill:"#09090C",d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248c2.4163 0 4.375 1.95873 4.375 4.37496V17.6248c0 2.4163-1.9587 4.375-4.375 4.375Z"}),i.createElement("mask",{id:"b",width:"20",height:"13",x:"2",y:"9",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},i.createElement("path",{fill:"url(#a)",d:"M17.625 21.9997H6.37515c-2.41622 0-4.37495-1.9587-4.37495-4.3749v-2.1249l2.2498.5749 1.6875-.8844 1.6875-1.3265 1.6875.8844L11 13.2006l1.6875 1.5477 1.6875.4421 1.6875-2.653 3.375-1.5476h1.6875L22 9.95801v7.66679c0 2.4162-1.9587 4.3749-4.375 4.3749Z"})),i.createElement("g",{mask:"url(#b)"},i.createElement("path",{fill:"#9DC500",d:"M17.625 21.9997H6.37515c-2.41622 0-4.37495-1.9587-4.37495-4.3749v-2.1249l2.2498.5749 1.6875-.8844 1.6875-1.3265 1.6875.8844L11 13.2006l1.6875 1.5477 1.6875.4421 1.6875-2.653 3.375-1.5476h1.6875L22 9.95801v7.66679c0 2.4162-1.9587 4.3749-4.375 4.3749Z"})),i.createElement("path",{fill:"#9DC500",d:"M22 10.688V9.16943l-1.1019 1.25927h-1.4606c-.07 0-.1391.0147-.2031.0431l-3.375 1.5a.49991.49991 0 0 0-.2149.1826l-1.4919 2.2734-1.224-.3108-1.5964-1.4191c-.1895-.1684-.4749-.1684-.6644 0l-1.43274 1.2735-1.38363-.7027c-.17109-.0869-.37681-.0683-.52945.048l-1.65139 1.2582-1.49478.7593-2.08225-.3966A.50718.50718 0 0 0 2 14.9286v1.0091l2.15644.4108a.5003.5003 0 0 0 .31999-.0454l1.6875-.8572a.4937.4937 0 0 0 .07659-.048l1.43786-1.0955 1.40769.715c.18331.0931.40494.0645.55861-.0721L11 13.7406l1.3553 1.2047a.49937.49937 0 0 0 .2091.1109l1.6875.4286c.2068.0525.4241-.032.5411-.2103l1.6069-2.4486 3.1437-1.3972h1.5814c.1442 0 .2813-.0622.3763-.1707l.4987-.57Z"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"a",x1:"12.0001",x2:"12.0001",y1:"9.95801",y2:"21.9997",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopOpacity:".5"}),i.createElement("stop",{offset:"1",stopOpacity:"0"}))))));I.displayName="SpringGrass";const D=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#09090C"}),i.createElement("mask",{id:"mask0_65_22652",maskUnits:"userSpaceOnUse",x:"2",y:"9",width:"20",height:"13"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint0_linear_65_22652)"})),i.createElement("g",{mask:"url(#mask0_65_22652)"},i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"#FF5F05"})),i.createElement("path",{d:"M22 10.688V9.16943L20.8981 10.4287H19.4375C19.3675 10.4287 19.2984 10.4434 19.2344 10.4718L15.8594 11.9718C15.7717 12.0108 15.6971 12.0742 15.6445 12.1544L14.1526 14.4278L12.9286 14.117L11.3322 12.6979C11.1427 12.5295 10.8573 12.5295 10.6678 12.6979L9.23506 13.9714L7.85143 13.2687C7.68034 13.1818 7.47462 13.2004 7.32198 13.3167L5.67059 14.5749L4.17581 15.3342L2.09356 14.9376C2.06214 14.9316 2.03085 14.9287 2 14.9286V15.9377L4.15644 16.3485C4.26519 16.3692 4.37774 16.3532 4.47643 16.3031L6.16393 15.4459C6.19086 15.4323 6.2165 15.4162 6.24052 15.3979L7.67838 14.3024L9.08607 15.0174C9.26938 15.1105 9.49101 15.0819 9.64468 14.9453L11 13.7406L12.3553 14.9453C12.4151 14.9985 12.4868 15.0365 12.5644 15.0562L14.2519 15.4848C14.4587 15.5373 14.676 15.4528 14.793 15.2745L16.3999 12.8259L19.5436 11.4287H21.125C21.2692 11.4287 21.4063 11.3665 21.5013 11.258L22 10.688Z",fill:"#FF5F05"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_65_22652",x1:"12.0001",y1:"9.95801",x2:"12.0001",y2:"21.9997",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopOpacity:"0.5"}),i.createElement("stop",{offset:"1",stopOpacity:"0"}))))));D.displayName="SunnyLime";const O=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"white"}),i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint0_linear_454_40910)"}),i.createElement("path",{d:"M22 10.688V9.16943L20.8981 10.4287H19.4375C19.3675 10.4287 19.2984 10.4434 19.2344 10.4718L15.8594 11.9718C15.7717 12.0108 15.6971 12.0742 15.6445 12.1544L14.1526 14.4278L12.9286 14.117L11.3322 12.6979C11.1427 12.5295 10.8573 12.5295 10.6678 12.6979L9.23506 13.9714L7.85143 13.2687C7.68034 13.1818 7.47462 13.2004 7.32198 13.3167L5.67059 14.5749L4.17581 15.3342L2.09356 14.9376C2.06214 14.9316 2.03085 14.9287 2 14.9286V15.9377L4.15644 16.3485C4.26519 16.3692 4.37774 16.3532 4.47643 16.3031L6.16393 15.4459C6.19086 15.4323 6.2165 15.4162 6.24052 15.3979L7.67838 14.3024L9.08607 15.0174C9.26938 15.1105 9.49101 15.0819 9.64468 14.9453L11 13.7406L12.3553 14.9453C12.4151 14.9985 12.4868 15.0365 12.5644 15.0562L14.2519 15.4848C14.4587 15.5373 14.676 15.4528 14.793 15.2745L16.3999 12.8259L19.5436 11.4287H21.125C21.2692 11.4287 21.4063 11.3665 21.5013 11.258L22 10.688Z",fill:"#6AF000"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_454_40910",x1:"12.0001",y1:"9.95801",x2:"12",y2:"28",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#6AF000",stopOpacity:"0.5"}),i.createElement("stop",{offset:"1",stopColor:"#00D1FF",stopOpacity:"0.15"}))))));O.displayName="CryptoIcon";const L=i.forwardRef(((e,a)=>i.createElement(y.leh,Object.assign({},e,{ref:a}),i.createElement("path",{d:"M17.6248 21.9998H6.37496C3.95873 21.9998 2 20.0411 2 17.6248V6.37496C2 3.95873 3.95873 2 6.37496 2H17.6248C20.0411 2 21.9998 3.95873 21.9998 6.37496V17.6248C21.9998 20.0411 20.0411 21.9998 17.6248 21.9998Z",fill:"#0154D2"}),i.createElement("path",{d:"M17.625 21.9997H6.37515C3.95893 21.9997 2.0002 20.041 2.0002 17.6248V16.8498V15.4999L4.25 16.0748L5.9375 15.1904L7.625 13.8639L9.3125 14.7483L11 13.2006L12.6875 14.7483L14.375 15.1904L16.0625 12.5374L19.4375 10.9898H21.125L22 9.95801V17.6248C22 20.041 20.0413 21.9997 17.625 21.9997Z",fill:"url(#paint0_linear_2755_1324)"}),i.createElement("path",{d:"M22 10.6879V9.16931L20.8981 10.4286H19.4375C19.3675 10.4286 19.2984 10.4433 19.2344 10.4717L15.8594 11.9717C15.7717 12.0107 15.6971 12.0741 15.6445 12.1543L14.1526 14.4277L12.9286 14.1168L11.3322 12.6978C11.1427 12.5294 10.8573 12.5294 10.6678 12.6978L9.23506 13.9713L7.85143 13.2685C7.68034 13.1816 7.47462 13.2003 7.32198 13.3166L5.67059 14.5748L4.17581 15.3341L2.09356 14.9374C2.06214 14.9315 2.03085 14.9286 2 14.9285V15.9376L4.15644 16.3483C4.26519 16.3691 4.37774 16.3531 4.47643 16.303L6.16393 15.4458C6.19086 15.4321 6.2165 15.4161 6.24052 15.3978L7.67838 14.3022L9.08607 15.0173C9.26938 15.1104 9.49101 15.0818 9.64468 14.9452L11 13.7404L12.3553 14.9452C12.4151 14.9983 12.4868 15.0364 12.5644 15.0561L14.2519 15.4847C14.4587 15.5372 14.676 15.4527 14.793 15.2744L16.3999 12.8258L19.5436 11.4286H21.125C21.2692 11.4286 21.4063 11.3664 21.5013 11.2579L22 10.6879Z",fill:"#0AED75"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_2755_1324",x1:"12",y1:"9.95801",x2:"12",y2:"27.9999",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#0AED75",stopOpacity:"0.4"}),i.createElement("stop",{offset:"1",stopOpacity:"0"}))))));L.displayName="ClassicIcon";const M={[S.si.LIGHT]:{label:i.createElement(m._,{id:"light",defaultMessage:"Light"}),icon:i.createElement(C,null)},[S.si.DARK]:{label:i.createElement(m._,{id:"dark",defaultMessage:"Dark"}),icon:i.createElement(b,null)},[S.si.CLASSIC]:{label:i.createElement(m._,{id:"classic",defaultMessage:"Classic"}),icon:i.createElement(T,null)},[S.si.PURPLEHAZE]:{label:i.createElement(m._,{id:"purplehaze",defaultMessage:"Purple haze"}),icon:i.createElement(A,null)},[S.si.INSPIRE]:{label:i.createElement(m._,{id:"inspire",defaultMessage:"Inspire"}),icon:i.createElement(k,null)},[S.si.TRIVANDRUM]:{label:i.createElement(m._,{id:"theme_fresh_berries",defaultMessage:"Trivandrum"}),icon:i.createElement(N,null)},[S.si.JAIPUR]:{label:i.createElement(m._,{id:"theme_spring_grass",defaultMessage:"Jaipur"}),icon:i.createElement(I,null)},[S.si.NAGPUR]:{label:i.createElement(m._,{id:"theme_sunny_lime",defaultMessage:"Nagpur"}),icon:i.createElement(D,null)},[S.si.DARJEELING]:{label:i.createElement(m._,{id:"theme_flower_mint",defaultMessage:"Darjeeling"}),icon:i.createElement(w,null)},[S.si.AMRITSAR]:{label:i.createElement(m._,{id:"theme_happy_holi",defaultMessage:"Amritsar"}),icon:i.createElement(R,null)},[S.si.CRYPTO]:{label:i.createElement(m._,{id:"theme_crypto",defaultMessage:"Cryptonite"}),icon:i.createElement(O,null)},[S.si.FOOTBALL]:{label:i.createElement(m._,{id:"theme_football",defaultMessage:"Football"}),icon:i.createElement(L,null)}},P=e=>{let a=e.service;const s=(0,c.o)(a.store),r=s.theme,n=s.themeList,o=i.useCallback((e=>{a.handleThemeChange(e)}),[a]);var l,d;const u=i.useMemo((()=>(n||[]).map((e=>{var a;return i.createElement(E.Ph.Option,{key:e,value:e,label:null!==(l=null===(a=M[e])||void 0===a?void 0:a.label)&&void 0!==l?l:e,icon:null!==(d=M[e].icon)&&void 0!==d?d:null,dataTest:"setting_theme_select_item"})}))),[n]);return i.createElement(i.Fragment,null,r&&n?i.createElement(E.Ph,{placeholder:i.createElement(m._,{id:"color-theme",defaultMessage:"Themes"}),floatingLabel:!0,fullWidth:!0,value:r,onChange:o,dataTest:r},u):null)};P.displayName="ThemeSettings";var x=s(29257),F=s(7223);class ThemeService extends F.t{getValidTheme(e){const a=this.getState().themeList;return a&&a.includes(e)?e:a&&a.includes(this.inputs.defaultTheme)?this.inputs.defaultTheme:e}load(){var e=this;return(0,x.Z)((function*(){const a=yield e.repository.find();if(a){const s=e.getValidTheme(a);e.update({theme:s}),e.repository.save(s),e.inputs.onChangeTheme(s)}return Promise.resolve()}))()}handleThemeChange(e){this.update({theme:e}),this.inputs.onChangeTheme(e),this.inputs.onChangeThemeAnalytic(e),this.repository.save(e)}constructor(e,a){super({themeList:a.themeList,isReady:!1},{allChildrenResolved:()=>{this.update({isReady:!0})}}),this.repository=e,this.inputs=a,a.subscribeThemeListChange((e=>{this.update({themeList:e})})),this.load()}}var B=s(30654),Z=s(31418);class ThemeRepository{find(){return(0,x.Z)((function*(){const e=(0,Z.Ii)();if(e)return Promise.resolve(e);const a=(yield B.$.userValues(["options"])).options;return Promise.resolve(a.platform_theme)}))()}save(e){return B.g.setUserOptions({name:"platform_theme",value:e})}}function U(e){return[S.si.LIGHT,S.si.DARK,S.si.CLASSIC,...e.getFeatureValue(h.ik.OTP_THEME_FOOTBALL)?[S.si.FOOTBALL]:[],...e.getFeatureValue(h.ik.OTP_THEME_CRYPTO)?[S.si.CRYPTO]:[],...e.getFeatureValue(h.ik.OTP_THEME_PURPLE_HAZE)?[S.si.PURPLEHAZE]:[],...e.getFeatureValue(h.ik.OTP_THEME_INSPIRE)?[S.si.INSPIRE]:[],...e.getFeatureValue(h.ik.OTP_THEME_HOLI_PINK)?[S.si.JAIPUR]:[],...e.getFeatureValue(h.ik.OTP_THEME_HOLI_PURPLE)?[S.si.TRIVANDRUM]:[],...e.getFeatureValue(h.ik.OTP_THEME_HOLI_ORANGE)?[S.si.NAGPUR]:[],...e.getFeatureValue(h.ik.OTP_THEME_HOLI_MINT)?[S.si.DARJEELING]:[],...e.getFeatureValue(h.ik.OTP_THEME_HOLI_PURPLE_YELLOW)?[S.si.AMRITSAR]:[]]}const H=(0,n.f)(),G=(0,o.v)({name:"PlatformTheme",dependsOn:[g.O,_.x],services(e,a){const s=e.commonLegacyServiceList,i=s.uiService,n=s.featureToggleService;return{themeService:new ThemeService(a.themeRepository,{themeList:U(n),defaultTheme:S.si.DARK,onChangeTheme(e){i.setTheme(e),v.C.set(e)},onChangeThemeAnalytic(e){(0,u.L)({event:"uaGtmEvents_clicks",eventCategory:"settings",eventAction:"change_theme",eventLabel:"".concat(e)})},subscribeThemeListChange(e){(0,r.reaction)((()=>U(n)),(a=>{e(a)}))}})}}},{repositories:()=>({themeRepository:new ThemeRepository}),publicApi:e=>({themeService:e.themeService})});G.use(d.Uc,((e,a)=>{let s=a.themeService;const r=(0,l.P)(H),n=(0,c.o)(s.store).isReady;return r&&n?i.createElement("div",null,i.createElement(p.T,{size:e.size})):null})).use(f.D2,((e,a,s)=>[...e,{component:i.createElement(P,{service:s.themeService}),title:i.createElement(m._,{id:"color-theme",defaultMessage:"Themes"}),dataTestTitle:"settings_theme_name",dataTestHost:"settings_theme_select"}]))},23771:(e,a,s)=>{"use strict";s.d(a,{I:()=>o});var i=s(32960),r=s(35377),n=s(31418);const o=()=>{const e=(0,n.ns)();return e&&(0,i.k)([r.JS]),e}},8227:(e,a,s)=>{"use strict";s.d(a,{n:()=>r});var i=s(35377);const r=()=>{const e=new URLSearchParams(window.location.search).get(i.JS);return e&&(null==e?void 0:e.toUpperCase())in i.si?e:void 0}},31418:(e,a,s)=>{"use strict";s.d(a,{Ii:()=>r.I,ZS:()=>n.Z,ns:()=>i.n});var i=s(8227),r=s(23771),n=s(61940)},61940:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var i=s(35377);const r=e=>{Object.values(i.si).includes(e)&&(document.body.dataset.theme=e)}},12265:(e,a,s)=>{"use strict";var i;s.d(a,{o:()=>i,x:()=>r}),function(e){e[e.line=0]="line",e[e.candles=1]="candles",e[e.heiken=2]="heiken",e[e.bar=3]="bar"}(i||(i={}));const r={line:i.line,candle:i.candles,"heiken-ashi":i.heiken,bar:i.bar}},73533:(e,a,s)=>{"use strict";s.d(a,{Kg:()=>h,oX:()=>m.o,qe:()=>p});var i=s(29257),r=s(84584),n=s(13243),o=s(6680),l=s(95601),c=s(26763),d=s(26257),u=s(32473),m=s(12265);(0,r.Z)();const p=(0,r.Z)(),h=(0,n.v)({name:"TradeManager",dependsOn:[l.u$,d.Bu],services:()=>({tradeManagerServiceList:new u.A({tradeManagerService:(0,o.Sc)(c.TRADE_MANAGER_SERVICE)})})},{publicApi:e=>e});h.onStart((e=>{let a=e.tradeManagerServiceList,s=e.connectionStubService;const r=(n=(0,i.Z)((function*(e){const s=a.getFrames().filter((a=>{let s=a.mechanic;switch(e){case c.DEAL_FORM_STORE:return"ftt"===s||"fx"===s;case c.TRADE_FRAME_SERVICE:return"spt"===s;default:return!1}})),i=yield Promise.all(s.map((s=>a.getFrameService(s.id,e)))),r=[];for(let e=0;e<i.length;e+=1){const a=i[e];a&&r.push(a)}return r})),function(e){return n.apply(this,arguments)});var n;const o=function(){var e=(0,i.Z)((function*(e){let a=e.offline,s=e.socketFail;const i=a||s,n=yield r(c.DEAL_FORM_STORE),o=yield r(c.TRADE_FRAME_SERVICE);n.forEach((e=>{e.setUpButtonLocked(i),e.setDownButtonLocked(i),e.setOrderButtonLocked(i)})),o.forEach((e=>{e.setDisabledForm(i)}))}));return function(a){return e.apply(this,arguments)}}();a.emitter.on("updateFrames",(()=>o(s.getState()))),s.subscribe(o)})),h.enable((0,i.Z)((function*(){return yield(0,o.ic)(c.TRADE_MANAGER_SERVICE),!0})))},32473:(e,a,s)=>{"use strict";s.d(a,{A:()=>TradeManagerServiceList});var i=s(29257),r=s(7223),n=s(60521),o=s(23934),l=s(26763),c=s(95029),d=s(12265);class TradeManagerServiceList extends r.t{getFrames(){return this.tradeManagerService.tradeFrames.map((e=>{var a;const s=(null==e||null===(a=e.serviceInterface)||void 0===a?void 0:a.selectedRate)?d.x[null==e?void 0:e.serviceInterface.selectedRate.format]:void 0;return{id:e.id,active:!!e.serviceInterface,mechanic:e.serviceInterface?(0,c.B5)(e.serviceInterface.project):(0,c.B5)(e.settings.project),meta:e.serviceInterface?{asset:{id:e.serviceInterface.selectedPair.id,precision:e.serviceInterface.selectedPair.precision},chartType:s||d.o.line}:void 0}}))||[]}getSentiment(){const e=[];return this.tradeManagerService.tradeFrames.forEach((a=>{var s;(null===(s=a.serviceInterface)||void 0===s?void 0:s.selectedPair)&&e.push({tradeFrameId:a.id,assetId:a.serviceInterface.selectedPair.id,sentiment:void 0!==a.serviceInterface.selectedPair.sentiment?a.serviceInterface.selectedPair.sentiment:50})})),e}getTradeFrameService(e){var a=this;return(0,i.Z)((function*(){var s;const i=null===(s=a.tradeManagerService)||void 0===s?void 0:s.findTradeFrameById(e);return new Promise(((e,a)=>{i?i.serviceInterface&&i.ready?e(i.serviceInterface):(0,n.when)((()=>!!i.serviceInterface&&i.ready),(()=>{i.serviceInterface&&e(i.serviceInterface)})):a()}))}))()}getFrameService(e,a){var s=this;return(0,i.Z)((function*(){const i=yield s.getTradeFrameService(e);return i?Promise.resolve(i.binder.getService(a)):Promise.resolve()}))()}getChartStore(e){var a=this;return(0,i.Z)((function*(){const s=yield a.getFrameService(e,l.CHART_STORE);return s?(yield s.waitingForChartInit(),Promise.resolve(s)):Promise.reject()}))()}addReactions(){(0,n.reaction)((()=>this.tradeManagerService&&this.tradeManagerService.tradeFrames&&this.tradeManagerService.tradeFrames.map((e=>{var a;const s=(null==e||null===(a=e.serviceInterface)||void 0===a?void 0:a.selectedRate)?d.x[null==e?void 0:e.serviceInterface.selectedRate.format]:void 0;return{id:e.id,serviceInterface:e.serviceInterface,mechanic:e.serviceInterface?(0,c.B5)(e.serviceInterface.project):(0,c.B5)(e.settings.project),meta:e.serviceInterface?{asset:{id:e.serviceInterface.selectedPair.id,precision:e.serviceInterface.selectedPair.precision},chartType:s||d.o.line}:void 0}}))),(e=>{e&&(this.emitter.emit("updateFrames",e.map((e=>({id:e.id,mechanic:e.mechanic,active:!!e.serviceInterface,meta:e.meta})))),this.listenFrameReactions(this.tradeManagerService.tradeFrames))}),{fireImmediately:!0})}listenFrameReactions(e){this.frameDisposers.forEach((e=>e())),this.frameDisposers=[],e.forEach((e=>{var a;e.serviceInterface&&(null===(a=e.serviceInterface.selectedPair)||void 0===a?void 0:a.sentiment)&&this.frameDisposers.push((0,n.reaction)((()=>{var a,s,i,r,n,o;return(null===(a=e.serviceInterface)||void 0===a||null===(s=a.selectedPair)||void 0===s?void 0:s.sentiment)?{tradeFrameId:e.id,id:null===(i=e.serviceInterface)||void 0===i||null===(r=i.selectedPair)||void 0===r?void 0:r.id,sentiment:null===(n=e.serviceInterface)||void 0===n||null===(o=n.selectedPair)||void 0===o?void 0:o.sentiment}:void 0}),(e=>{e&&this.emitter.emit("updateSentiment",{tradeFrameId:e.tradeFrameId,assetId:e.id,sentiment:e.sentiment})}),{fireImmediately:!0}))}))}constructor(e){let a=e.tradeManagerService;super(),this.frameDisposers=[],this.emitter=(0,o.Z)(),this.tradeManagerService=a,this.addReactions()}}},4287:(e,a,s)=>{"use strict";s.d(a,{e3:()=>i});(0,s(37323).Z)({MAIN:"profile",TASKS:"tasks",TRADERS_WAY:"traders_way",ACHIEVEMENTS:"achievements",PLATFORM_SETTINGS:"platform_settings"},{SETTINGS:"profile_settings",PERSONAL:"profile_settings/personal",EDIT_NAME:"profile_settings/edit_name",EDIT_EMAIL:"profile_settings/edit_email",EDIT_PHONE:"profile_settings/edit_phone",CHANGE_PASSWORD:"profile_settings/change_password",NOTIFICATION:"profile_settings/notification",TWO_FACTOR_AUTH:"profile_settings/two_factor_auth",TWO_FACTOR_AUTH_SMS_CONNECT:"profile_settings/two_factor_auth_sms_connect",TWO_FACTOR_AUTH_SMS_DISCONNECT:"profile_settings/two_factor_auth_sms_disconnect",TWO_FACTOR_AUTH_GOOGLE_CONNECT:"profile_settings/two_factor_auth_google_connect",TWO_FACTOR_AUTH_GOOGLE_DISCONNECT:"profile_settings/two_factor_auth_google_disconnect",KYC_VERIFICATION_REQUEST:"profile_settings/verification_request"});const i="ent_experience_enabled"},29006:(e,a,s)=>{"use strict";s.d(a,{TF:()=>NotificationsService,Bj:()=>StatusService,Gd:()=>f,rS:()=>A.r,fV:()=>p,Pj:()=>w.P,Zp:()=>w.Z});var i=s(59312),r=s(27378),n=s(50649),o=s(60042),l=s.n(o),c=s(82844),d=s(81378);let u=class Status extends r.Component{render(){const e=this.props,a=e.status,s=e.timeService,i=e.className;return r.createElement("div",{className:l()("tra-way-w-status",i),"data-test":"tra-way-w-status"},r.createElement("div",{className:"tra-way-w-status__left"},r.createElement("div",{className:"tra-way-w-status__name"},r.createElement(c._,Object.assign({},a.name))),a.endingAt&&r.createElement(d.OJ,{endingAt:a.endingAt,timeService:s,className:"tra-way-w-status__until-date"})),r.createElement("div",{className:"tra-way-w-status__right"},r.createElement("img",{src:a.iconUrl,alt:"",className:"tra-way-w-status__grade"})))}};u=(0,i.gn)([n.observer],u);s(4037),s(51523);var m=s(17302);const p=(0,n.observer)((e=>{let a=e.messageCount,s=e.status,i=e.progress,n=e.className,o=e.timeService,c=e.children;return r.createElement("div",{className:l()("tra-way-w-tw",n),"data-test":"tra-way-w-tw"},r.createElement("div",{className:"tra-way-w-tw__top"},r.createElement(m.xu,{display:"grid",gridAutoFlow:"column",gap:"s",verticalAlign:"center",dataTest:"tra-way-w-tw__level"},r.createElement("img",{src:s.iconUrl,alt:"traders-way status icon"}),r.createElement(m.xv,{variant:"M / Bold",dataTest:"tra-way-user-level"},(u=s.id).charAt(0).toUpperCase()+u.slice(1)),0!==a&&r.createElement(m.AT,{color:"neutralGamma",count:a})),"starter"!==s.id&&r.createElement(d.OJ,{endingAt:i.endingAt,timeService:o,className:"tra-way-w-tw__timer"})),r.createElement("div",{className:"tra-way-w-tw__bottom"},r.createElement(d.uk,{points:i.points,percent:i.percent,level:i.level,nextLevel:i.level.next,gradeColor:s.color})),c);var u}));var h=s(37323),v=s(3121),g=s(44495);const _=e=>{let a=e.x,s=void 0===a?0:a,i=e.y,n=void 0===i?0:i,o=e.rotation,l=void 0===o?0:o,c=e.scale,d=void 0===c?1:c,u=e.timing,m=void 0===u?150:u,p=e.springConfig,h=void 0===p?{tension:300,friction:10}:p;const _=(0,v.Z)(r.useState(!1),2),f=_[0],E=_[1],S=(0,g.useSpring)({transform:f?"translate(".concat(s,"px, ").concat(n,"px)\n         rotate(").concat(l,"deg)\n         scale(").concat(d,")"):"translate(0px, 0px)\n         rotate(0deg)\n         scale(1)",config:h});r.useEffect((()=>{if(!f)return;const e=window.setTimeout((()=>{E(!1)}),m);return()=>{window.clearTimeout(e)}}),[f]);return[S,r.useCallback((()=>{E(!0)}),[])]},f=(0,n.observer)((e=>{let a=e.statusTestDrive,s=e.timeService;const i={timing:100,springConfig:{tension:500,friction:40}},n=(0,v.Z)(_((0,h.Z)({y:1},i)),2),o=n[0],l=n[1],d=(0,v.Z)(_((0,h.Z)({y:2},i)),2),u=d[0],p=d[1];return r.createElement(g.animated.div,{className:"tra-way-t-drive",style:o,onMouseEnter:function(){l(),p()}},r.createElement("div",{className:"tra-way-t-drive__content"},r.createElement(g.animated.div,{style:u,className:"tra-way-t-drive__icon"},r.createElement("img",{src:a.iconUrl,alt:""})),r.createElement("div",{className:"tra-way-t-drive__text-bl"},r.createElement("div",{className:"tra-way-t-drive__timer"},r.createElement(m.Wo,{serverTime:s.serverTime,startTime:a.endingAt||0,timeFormat:"d:h:m:s"})),r.createElement("div",{className:"tra-way-t-drive__text"},r.createElement(c._,{id:"tw-test-drive",defaultMessage:"{value} status for a limited time",values:{value:(f=a.id,f.charAt(0).toUpperCase()+f.slice(1))}})))));var f}));s(9383),s(65484),s(61048);var E=s(29257),S=s(7223),y=s(6680),b=s(26763),C=s(4287),T=s(85116);class BenefitTransformer{static parse(e){return{name:e.name,iconUrl:e.icon_url,description:e.description,descriptionShort:e.description_short}}}class StatusTransformer{static parse(e,a){const s=StatusTransformer.DEFAULT_META;return a[e.name]&&(s.name=a[e.name].name,s.description=a[e.name].description,s.color=a[e.name].color,s.iconUrl=a[e.name].iconUrl),(0,h.Z)({id:e.name,endingAt:e.date_end||e.expiration_date},s)}}StatusTransformer.DEFAULT_META={name:{id:"status_name"},description:{id:"status_description"},color:"#000",iconUrl:""};class StatusService extends S.t{load(e,a,s){this.update({items:a.reduce(((e,a)=>Object.assign(e,{[a.id]:{id:a.id,name:a.name,description:a.description,color:a.color,iconUrl:a.icon_url}})),{}),benefits:a.reduce(((e,a)=>Object.assign(e,{[a.id]:a.benefits.map(BenefitTransformer.parse)})),{})});const i=this.getState().items;this.updateCurrent(e,i),this.updateTestDrive(s,i)}init(){var e=this;return(0,E.Z)((function*(){const a=(0,y.Sc)(b.APP_SERVICE);if(!(null==a?void 0:a.serviceLevels))throw new Error;const s=a.serviceLevels,i=s.level,r=s.test_drive,n=a.getPolitic(C.e3)?e.handleStatusDateChange.bind(e):e.handleStatusChange.bind(e);e.statusRepository.subscribe(e.handleChangeState.bind(e),n,e.handleChangeTestDrive.bind(e));const o=r?{name:r.name,date_end:r.expiration_date}:{name:null,date_end:null},l=yield(0,T.w)();e.load({name:(null==i?void 0:i.name)||"",date_end:(null==i?void 0:i.expiration_date)||void 0},l,o)}))()}updateCurrent(e,a){this.update({current:StatusTransformer.parse(e,a)})}updateTestDrive(e,a){this.update({testDrive:null===e.name?null:StatusTransformer.parse(e,a)})}handleChangeState(e){const a=this.getState().items;this.updateCurrent(e.service_level||e,a)}handleStatusDateChange(e){const a=this.getState().items;Object.keys(a).length&&this.updateCurrent(e,a)}handleChangeTestDrive(e){const a=this.getState().items;this.updateTestDrive(e,a)}handleStatusChange(e){let a=e.level;const s=this.getState().testDrive,i=s?{name:s.id,date_end:s.endingAt}:{name:null,date_end:null};(0,T.w)().then((e=>this.load({name:a},e,i))).catch((()=>{}))}constructor(e){super({current:{id:"",name:{id:"pro_status_advanced_name"},description:{id:"pro_status_advanced_description"},color:"",iconUrl:""},testDrive:null,items:{},benefits:{}}),this.statusRepository=e,this.init()}}var A=s(66047),k=s(64356);class NamespaceItemsTransformer{static map(e){return e.reduce(((e,a)=>(e[a.namespace]||(e[a.namespace]=[]),e[a.namespace].push(a),e)),{awards:[]})}}class NotificationsService extends S.t{static makeTs(){return Math.floor(Date.now()/1e3)}static createNotification(e){if("awards"===e.namespace)return{id:e.id,rawId:e.rawId,name:e.name,namespace:e.namespace,status:e.status,createdAt:NotificationsService.makeTs(),params:e.params}}add(e){const a=this.getState().items,s=NotificationsService.createNotification(e),i=a.find((e=>e.id===s.id));if(i){const e=[...a.filter((e=>e.id!==s.id)),(0,k.Z)((0,h.Z)({},i),{params:(0,h.Z)({},i.params,s.params)})];return void this.update({items:e,namespaceItems:NamespaceItemsTransformer.map(e)})}const r=[...a,s];this.update({items:r,namespaceItems:NamespaceItemsTransformer.map(r)})}remove(e){const a=this.getState().items.filter((a=>a.id!==e));this.update({items:a,namespaceItems:NamespaceItemsTransformer.map(a)})}removeBy(e){const a=this.getState().items.filter((a=>!e(a)));this.update({items:a,namespaceItems:NamespaceItemsTransformer.map(a)})}setItemReadStatus(e,a){const s=this.getState().items,i=s.find((a=>a.id===e));if(i){const r=[...s.filter((a=>a.id!==e)),(0,k.Z)((0,h.Z)({},i),{status:a})];this.update({items:r,namespaceItems:NamespaceItemsTransformer.map(r)})}}read(e){const a=this.getState().items.find((a=>a.id===e));if(a&&(this.setItemReadStatus(e,"read"),"awards"===a.namespace))this.notificationsRepository.readNotification(a.rawId,a.name).catch((()=>{this.setItemReadStatus(e,"new")}))}handleNotificationsReceived(e){if("gamification"===e.category&&"award_unlocked"===e.name)this.add({id:"".concat(e.model.service_level,"_").concat(e.model.step_id,"_").concat(e.model.award_id),rawId:e.id,name:e.name,namespace:"awards",status:"new",params:{id:e.model.award_id,status_id:e.model.service_level,level_id:e.model.step_id,action:"unlocked"}})}handleNotificationsRemoved(e){if("award_unlocked"===e.name)this.removeBy((a=>a.name===e.name&&a.rawId===e.id))}constructor(e){super({items:[],namespaceItems:{awards:[]}}),this.notificationsRepository=e,this.notificationsRepository.subscribe(this.handleNotificationsReceived.bind(this),this.handleNotificationsRemoved.bind(this))}}var w=s(11410)},32308:(e,a,s)=>{"use strict";s.d(a,{m:()=>ne,mn:()=>oe,hh:()=>ie});var i=s(29257),r=s(27378),n=s(37488),o=s.n(n),l=s(72021),c=s(13243),d=s(46245),u=s(97415),m=s(2050),p=s(95601),h=s(77740),v=s(17302),g=s(6680),_=s(60521),f=s(26763),E=s(87601),S=s(23735),y=s(82844),b=s(66257),C=s(86321),T=s(5915),A=s(30729),k=s(27634),w=s(61681),N=s(7265),R=s(53323),I=s(19447),D=s(40846),O=s(35295),L=s(81378),M=s(9383),P=s(37323),x=s(3121),F=s(73598),B=s(83920),Z=s(12484),U=s(81971),H=s(51523),G=s(60042),V=s.n(G);const W=(0,r.memo)((e=>{let a=e.statusId,s=e.profileNavigation;const i=(0,x.Z)((0,r.useState)(!1),2),n=i[0],o=i[1],l=(0,x.Z)((0,r.useState)(!1),2),c=l[0],d=l[1],u=(0,v.Fg)().isRtl,m=(0,r.useCallback)((()=>{(0,S.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/traders_way",eventAction:"settings/statuses",eventLabel:a}),window.open("/statuses")}),[a]),p=(0,r.useCallback)((()=>{(0,S.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/traders_way",eventAction:"settings/traders_way",eventLabel:a}),null==s||s.goToTradersWay()}),[a,s]),g=(0,r.useCallback)((e=>{switch(e){case"tw":p();break;case"status":m()}}),[m,p]),_=(0,r.useCallback)((()=>{n||(0,S.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/traders_way",eventAction:"settings_open",eventLabel:"".concat(a)}),o((()=>!n))}),[n]);return r.createElement("div",{className:"sl-tw-progress__more",onClick:_},r.createElement(v.v2,{open:c,onToggle:d,onChange:g,placement:u?"top-start":"top-end"},r.createElement(v.v2.Trigger,null,r.createElement("button",{className:V()("sl-tw-progress__more-button",c&&"sl-tw-progress__more-button_active")},r.createElement(h.q3n,null))),r.createElement(v.v2.Content,null,r.createElement(v.v2.Item,{value:"tw",label:r.createElement(y._,{id:"pro_traders_way",defaultMessage:"Trader's Way"})}),r.createElement(v.v2.Item,{value:"status",label:r.createElement(y._,{id:"user_tpl_statuses",defaultMessage:"Statuses"})}))))})),j=(0,U.zt)((e=>{let a=e.tradersWayService,s=e.statusService,i=e.navigationService;const n=i.navigation,o=i.chartNavigation,l=i.profileNavigation,c=(0,u.o)(a.store),d=c.levels,m=c.awards,p=c.progress,h=(0,u.o)(s.store).current,v=p.level,g=p.percent,_=p.points,f=(0,x.Z)((0,r.useState)(!0),2),E=f[0],y=f[1],b=(0,r.useRef)(null),C=(0,r.useCallback)((e=>{const a=m.find((a=>a.id===e));if(!a||v.id<a.levelId)return;const s=a.params&&a.params.code||"",r=new Map([["advisor",()=>null==o?void 0:o.goToAdvisors()],["indicator",()=>null==o?void 0:o.goToIndicators()],["status_discount",()=>n.goToDeposit({promo:s})],["deposit_bonus",()=>n.goToDeposit({promo:s})],["signals",()=>n.goToTradingSignals()],["sound_pack",()=>n.goToSettings()],["consultation",()=>n.goToConsultantCallback()]]),l=a.link?()=>{i.tryOpenDeepLink(a.link||"",!1).finally((()=>{}))}:r.get(a.type);return l?((0,S.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/traders_way",eventAction:"use_reward",eventLabel:"".concat(a.statusId,"_").concat(a.levelId,"_").concat(a.id)}),l()):void 0}),[i,m,v.id,o,n]),T=(0,r.useCallback)((e=>{let a=e.levelId,s=e.awardId;(0,S.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/traders_way",eventAction:"open",eventLabel:"".concat(h.id,"_").concat(a,"_").concat(s)})}),[h]);return(0,r.useEffect)((()=>{const e=new ResizeObserver((e=>{requestAnimationFrame((()=>{e.forEach((e=>function(e){e>540&&E||e<540&&!E||y((()=>e>540))}(e.contentRect.width)))}))}));return()=>{e&&e.disconnect()}}),[E]),(0,F.SZ)((()=>h.id?r.createElement(Z.SV,{code:"serviceLevelTWProgress"},r.createElement("div",{className:"sl-tw-progress",ref:b},E&&r.createElement(H.k,{tradersWayServiceState:c,onClickAward:C,itemsLength:d.length||0,awards:m,level:v,percent:g,points:_,onOpenTooltip:T,status:h,onBuySaveStatus:a.openSaveStatusPurchaseFlow}),E&&r.createElement(W,{statusId:h.id,profileNavigation:l}))):null))}),{helper:(e,a)=>(0,P.Z)({},e,a),services:[B.f]});var z=s(4287),q=s(57615),K=s(29042),Y=s(96667),X=s(30654),J=s(85116),Q=s(64356);class AwardTransformer{static parse(e,a,s,i){const r=[];let n,o;const l=AwardTransformer.toClaimedMap(a,s);for(let a=0;a<e.length;a+=1){n=e[a];for(let e=0;e<n.availability.length;e+=1){if(o=n.availability[e],!n.platforms.some((e=>e.name===AwardTransformer.SUPPORTED_PLATFORM)))continue;if(o.service_level!==s)continue;const a={id:n.id,category:n.category,name:n.name,description:n.description,descriptionShort:n.description_short,statusId:o.service_level,levelId:o.step_id,icons:n.image_urls.icons,endingAt:void 0,isUsed:!1},c=l[AwardTransformer.makeClaimedMapId(o.service_level,o.step_id,n.id)];let d,u={};switch(c&&(c.is_used&&(a.isUsed=c.is_used),c.params&&(u=c.params),c.link&&(a.link=c.link)),u.date_end&&(a.endingAt=u.date_end),n.type){case"next_service_level":d=(0,Q.Z)((0,P.Z)({},a),{type:"next_status",params:{statusId:n.params.service_level}});break;case"save_service_level":d=(0,Q.Z)((0,P.Z)({},a),{type:"save_status",params:{statusId:n.params.service_level}});break;case"service_level_test_drive":d=(0,Q.Z)((0,P.Z)({},a),{type:"status_test_drive",params:{statusId:n.params.service_level}});break;case"indicator":case"advisor":d=(0,Q.Z)((0,P.Z)({},a),{type:n.type,params:{type:n.params.type}});break;case"riskfree_deals":{let e;if(void 0!==u.account_id&&u.deals)e={accountId:u.account_id,currencyDefault:i,deals:u.deals.sort(((e,a)=>a.amount-e.amount))};else{const a=n.params.fixed.find((e=>e.currency===i));if(a){const s={};a.values.forEach((e=>{s[e]=s[e]?s[e]+1:1}));const r=[];Object.keys(s).forEach((e=>{r.push({count:s[e],amount:Number(e)})})),e={currencyDefault:i,deals:r}}}d=(0,Q.Z)((0,P.Z)({},a),{type:n.type,params:e});break}case"deposit_bonus":{const e={code:""};u.code&&(e.code=u.code),d=(0,Q.Z)((0,P.Z)({},a),{params:e,type:n.type});break}case"service_level_discount":{const e={code:""};u.code&&(e.code=u.code),d=(0,Q.Z)((0,P.Z)({},a),{params:e,type:"status_discount"});break}default:d=(0,Q.Z)((0,P.Z)({},a),{type:n.type})}r.push(d)}}return r}static toClaimedMap(e,a){return e.reduce(((e,s)=>(e[AwardTransformer.makeClaimedMapId(a,s.step_id,s.award_id)]=s,e)),{})}static makeClaimedMapId(e,a,s){return"".concat(e,"_").concat(a,"_").concat(s)}}AwardTransformer.SUPPORTED_PLATFORM="web";class ProgressTransformer{static parse(e){return{points:e.points,percent:ProgressTransformer.computePercent(e.points,e.step),level:ProgressTransformer.parseLevel(e.step),endingAt:e.date_end}}static parseLevel(e){return{id:e.id,points:e.points,next:e.next&&{id:e.next.id,points:e.next.points}}}static computePercent(e,a){const s=a.next&&a.next.points,i=a.points;return s?Math.ceil((e-i)/(s-i)*100):100}}var $=s(86933);class WebSocket{onTradersWayStateChange(e){this.listeners[$.U3.STATUS_STATE_CHANGED]=e}subscribe(){this.connect.onPush(((e,a)=>{e===$.U3.STATUS_STATE_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$.U3.STATUS_STATE_CHANGED](e)}))})),this.connect.subscribeEventList([$.WJ.STATUS_STATE_CHANGED])}constructor(e){this.listeners={[$.U3.STATUS_STATE_CHANGED]:()=>{}},this.connect=e}}class TradersWayRepository{find(e){throw new Error("Method not implemented.")}findAll(){throw new Error("Method not implemented.")}buySaveStatus(e){return(0,i.Z)((function*(){yield X.g.buySaveStatus({account_id:e})}))()}load(e,a){var s=this;return(0,i.Z)((function*(){const i=yield s.loadState(),r=i.state,n=i.progress,o=yield s.loadConfig(),l=s.mapConfig(o,r,e,a);return{progress:n,awards:l.awards,levels:l.levels,saveStatus:l.saveStatus}}))()}loadState(){return(0,i.Z)((function*(){const e=yield X.$.getExperienceState();return{state:e,progress:ProgressTransformer.parse(e.traders_way)}}))()}loadConfig(){return(0,i.Z)((function*(){const e=(0,x.Z)(yield Promise.all([X.$.getExperienceConfig(),(0,J.w)()]),2),a=e[0],s=e[1];return{version:a.version,service_levels:a.service_levels.map((e=>{const a=s.find((a=>a.id===e.name));return a?(0,P.Z)({},a,e):e})),awards:a.awards}}))()}mapConfig(e,a,s,i){let r=a.claimed_awards,n=a.save_status;const o=AwardTransformer.parse(e.awards,r,i,s),l=class SaveStatusTransformer{static parse(e){return e?{maxPoints:e.max_points,minPoints:e.min_points,paymentTypes:e.payment_types.map((e=>{let a=e.price;return{currency:e.currency,price:Number(a)}}))}:null}}.parse(n),c=e.service_levels.find((e=>e.id===i)),d=[];if(c)for(let e=1;e<=c.max_step;e+=1)d.push({id:e});return{awards:o,levels:d,saveStatus:l}}constructor(){this.socket=new WebSocket(Y.Z.add()),this.storageService=new q._({namespace:"TW",backend:new K.u}),this.getVideoIsWatched=()=>!!this.storageService.get("isWatched"),this.setVideoIsWatched=()=>{this.storageService.set("isWatched",!0),X.g.watchExperienceEducationVideo()},this.subscribe=(e,a)=>{this.socket.subscribe();var s,r=this;this.socket.onTradersWayStateChange((s=(0,i.Z)((function*(s){const i=ProgressTransformer.parse(s.traders_way),n=yield r.loadConfig(),o=r.mapConfig(n,s,e,s.service_level.name),l=o.awards,c=o.levels,d=o.saveStatus;a({progress:i,awards:l,levels:c,saveStatus:d})})),function(e){return s.apply(this,arguments)}))}}}class WebSocket_WebSocket{onStatusTestDriveChange(e){this.listeners[$.U3.STATUS_TEST_DRIVE_CHANGED]=e}onStatusStateChange(e){this.listeners[$.U3.STATUS_STATE_CHANGED]=e}onStatusChange(e){this.listeners[$.U3.STATUS_CHANGED]=e}subscribe(){this.connect.onPush(((e,a)=>{e===$.U3.STATUS_TEST_DRIVE_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$.U3.STATUS_TEST_DRIVE_CHANGED](e)})),e===$.U3.STATUS_STATE_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$.U3.STATUS_STATE_CHANGED](e)})),e===$.U3.STATUS_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$.U3.STATUS_CHANGED](e)}))})),this.connect.subscribeEventList([$.WJ.STATUS_TEST_DRIVE_CHANGED,$.WJ.STATUS_STATE_CHANGED,$.WJ.STATUS_CHANGED])}constructor(e){this.listeners={[$.U3.STATUS_CHANGED]:e=>{},[$.U3.STATUS_STATE_CHANGED]:e=>{},[$.U3.STATUS_TEST_DRIVE_CHANGED]:e=>{}},this.connect=e}}class StatusRepository{find(e){throw new Error("Method not implemented.")}findAll(){throw new Error("Method not implemented.")}constructor(){this.socket=new WebSocket_WebSocket(Y.Z.add()),this.subscribe=(e,a,s)=>{this.socket.subscribe(),this.socket.onStatusStateChange(e),this.socket.onStatusChange(a),this.socket.onStatusTestDriveChange(s)}}}class Notifications_WebSocket_WebSocket{onNotificationReceived(e){this.listeners[$.U3.NOTICE_SHOW]=e}onNotificationRemoved(e){this.listeners[$.U3.NOTICE_CLOSE]=e}subscribe(){this.connect.onPush(((e,a)=>{e===$.U3.NOTICE_SHOW&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$.U3.NOTICE_SHOW](e)})),e===$.U3.NOTICE_CLOSE&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$.U3.NOTICE_CLOSE](e)}))})),this.connect.subscribeEventList([$.WJ.NOTICE_SHOW,$.WJ.NOTICE_CLOSE])}constructor(e){this.connect=e,this.listeners={[$.U3.NOTICE_SHOW]:e=>{},[$.U3.NOTICE_CLOSE]:e=>{}},this.connect=e}}class NotificationsRepository{find(e){throw new Error("Method not implemented.")}findAll(){throw new Error("Method not implemented.")}constructor(){this.socket=new Notifications_WebSocket_WebSocket(Y.Z.add()),this.readNotification=(e,a)=>X.$.noticeAction({operation_type:"hide",notice_id:e,notice_name:a}),this.subscribe=(e,a)=>{this.socket.onNotificationReceived(e),this.socket.onNotificationRemoved(a),this.socket.subscribe()}}}var ee=s(61048),te=s(4037),ae=s(29006);const se=r.lazy((()=>s.e(8364).then(s.bind(s,25023)))),ie=(0,l.f)(),re="traders_way_good_purchase_",ne=(0,O.JH)({screenIds:{MAIN:"".concat(re,"main"),ONCE:"".concat(re,"once"),SUBSCRIPTION:"".concat(re,"subscription"),PERIOD:"".concat(re,"period"),AUTO_RENEWAL:"".concat(re,"auto_renewal"),FAKE:"".concat(re,"fake"),SUCCESS:"".concat(re,"success"),TRIAL:"".concat(re,"trial")},analyticEvents:{deposit:e=>({event:"uaGtmEvents_clicks",eventCategory:"save_status",eventAction:"deposit_click",eventLabel:String(e)}),purchase:e=>({event:"uaGtmEvents_clicks",eventCategory:"save_status",eventAction:"confirm_payment_click",eventLabel:String(e)}),successOnce:e=>({event:"uaGtmEvents_clicks",eventCategory:"save_status",eventAction:"confirm_payment_success",eventLabel:String(e)})}}),oe=(0,c.v)({name:"TradersWay",dependsOn:[p.u$,w.G,k.im,N.EA],services:(e,a)=>{const s=(0,g.Sc)(f.ACCOUNT_SERVICE),i=(0,g.Sc)(f.NAVIGATION_SERVICE),r=new ae.rS(a.tradersWay,e.appService.getState(),{subscribeToSelectedAccount(e){(0,_.reaction)((()=>null==s?void 0:s.selectedAccount),(a=>{if(!s||!a)return;let i,r;const n=s.accountsList.filter((e=>(e.type===b.Q.REAL||e.type===b.Q.SOFT)&&"open"===e.status));var o;a.currencyName!==b.Q.DEMO?(r=a.id,i=a.currencyName):(r=null==a?void 0:a.id,i=(null===(o=n[0])||void 0===o?void 0:o.currencyName)||s.currencyDefault||"usd");e(r,i||"usd")}),{fireImmediately:!0})},goToBuyGood(){e.profileSidebarService.openById(ne.SCREEN_ID.MAIN)}}),n=new ae.Bj(a.status),o=new ae.TF(a.notifications);return ne.setHandlers({onSelectAccount:e=>null==s?void 0:s.api.setAccountById(e),onRechargeAccount:(e,a)=>null==i?void 0:i.navigation.goToDeposit({amount:a}),onSendAnalytics:e=>{let a=e.id,s=e.data;return(0,S.L)({event:"".concat(null==s?void 0:s.event),eventCategory:"".concat(null==s?void 0:s.eventCategory),eventAction:a,eventLabel:"".concat(null==s?void 0:s.eventLabel)})},onSuccessfullyCompletePurchaseFlow:()=>e.profileSidebarService.openById(D.uW.TRADERS_WAY),onBuyGood:e=>{let a=e.accountId;return r.buySaveStatus(a)}}),{tradersWay:r,status:n,notifications:o}}},{repositories:()=>({status:new StatusRepository,tradersWay:new TradersWayRepository,notifications:new NotificationsRepository}),publicApi:e=>({tradersWay:e.tradersWay,status:e.status})});var le;oe.use(p.fs,((e,a)=>{let s=a.tradersWay,i=a.status;return(0,d.P)(ie)&&r.createElement(o(),{minWidth:E.j$.BREAKPOINT_768},r.createElement("div",{className:"platform-container-panels__tw-container"},r.createElement(j,{tradersWayService:s,statusService:i})))})).use((0,k.xO)(D.uW.TRADERS_WAY),((e,a)=>{let s=a.status;return r.createElement(L.dm,{statusService:s})})).use((0,k.VT)(D.uW.TRADERS_WAY),((e,a)=>{let s=e.className,i=e.scroll,n=e.onClose,o=a.status,l=a.tradersWay,c=a.notifications;const d=(0,u.o)(o.store),p=(0,u.o)(l.store),h=(0,u.o)(c.store),v=(0,m.x)(ae.Zp);return r.createElement(se,{className:s,upperSlot:v,statusServiceState:d,tradersWayServiceState:p,notificationsServiceState:h,notificationsService:c,scroll:i,onClose:n,onBuySaveStatus:l.openSaveStatusPurchaseFlow})})).use((0,k.X1)(D.uW.TRADERS_WAY),(()=>r.createElement(M.t,null))).use(A.rootPanelFeaturesSlot,((e,a)=>{let s=e.handleSlotClick,i=e.tradersWayPanelId,n=e.noticeService,o=e.ref,l=e.timeService,c=a.tradersWay,d=a.status,m=a.notifications;const p=(0,u.o)(d.store),g=p.current,_=p.testDrive,f=(0,u.o)(c.store),E=f.progress,b=f.isWatched,A=(0,u.o)(m.store).namespaceItems.awards.filter((e=>"new"===e.status&&e.params.status_id===g.id&&e.params.level_id<=E.level.id)).length,k=(0,r.useCallback)((e=>{e.stopPropagation(),_&&(n.add({id:"status",collectionName:R.sm.FULL_SCREEN,layout:e=>{let a=e.api,s=e.notice;return r.createElement(T.default,{noticeId:s.id,api:a,content:e=>{let a=e.onClose;return r.createElement(ee.Z,{statusId:_.id,onClose:a,statusServiceState:d.getState()})}})},notice:{priority:!0}}),c.watchEducationVideo(),(0,S.L)({event:"uaGtmEvents_clicks",eventCategory:"profile",eventAction:"open",eventLabel:"statuses"}))}),[_,n,d,c]),w=(0,r.useCallback)((()=>{s(i),c.watchEducationVideo()}),[i,c,s]);return r.createElement(r.Fragment,null,r.createElement(C.tE.Group,null,r.createElement(C.tE.Card,{onClick:w},(e=>{let a=e.className;return r.createElement(ae.fV,{className:a,messageCount:A,status:g,progress:E,timeService:l},_&&r.createElement("div",{onClick:k},r.createElement(ae.Gd,{statusTestDrive:_,timeService:l})))})),r.createElement("a",{"data-test":"profile-menu-statuses",href:"/statuses",target:"_blank",className:"pro-p-root-sb-group__sublink"},r.createElement(y._,{id:"what_are_the_statuses",defaultMessage:"What are the Statuses?"}),r.createElement(h.T08,null))),_&&!b&&r.createElement("div",{className:"root-t-d__tooltip-container"},r.createElement(v._v,{placement:"bottom",className:"root-t-d__tooltip",classNameContent:"root-t-d__tooltip-content",arrowProps:{ref:o},color:"accent"},r.createElement(y._,{id:"tw-privileges",defaultMessage:"Try all privileges of bonus status for a limited time!"}))))})).use(I.N8,((e,a)=>{let s=a.status,i=a.tradersWay,n=a.profileSidebarService;const o=s.getState().current,l=i.getState().progress,c=(0,r.useCallback)((()=>{n.openById(D.EX.PROFILE)}),[n]);return r.createElement(te.Z,{progress:l,status:o,className:"pro-w-profile__left",handleClick:c})})).use(k.VJ,((e,a,s)=>{let i=s.tradersWay,r=s.notifications;const n=s.status.getState().current,o=i.getState().progress;return e+r.getState().namespaceItems.awards.filter((e=>"new"===e.status&&e.params.status_id===n.id&&e.params.level_id<=o.level.id)).length})).enable((le=(0,i.Z)((function*(e){return!!e.politics.isEnabled(z.e3)&&(yield(0,g.ic)(f.ACCOUNT_SERVICE),yield(0,g.ic)(f.NAVIGATION_SERVICE),!0)})),function(e){return le.apply(this,arguments)}))},85116:(e,a,s)=>{"use strict";function i(){return s.e(5701).then(s.bind(s,11181)).then((e=>e.STATUSES))}s.d(a,{w:()=>i})},66047:(e,a,s)=>{"use strict";s.d(a,{r:()=>TradersWayService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223),l=s(99950),c=s(32308);class TradersWayService extends o.t{init(){var e=this;return(0,i.Z)((function*(){const a=e.initialState.serviceLevels,s=null==a?void 0:a.level;e.statusId=(null==s?void 0:s.name)||"",e.tradersWayRepository.subscribe(e.getState().currency,(a=>{e.update((0,r.Z)({},a))})),yield e.load()}))()}load(e){var a=this;return(0,i.Z)((function*(){const s=yield a.tradersWayRepository.load(a.getState().currency,e||a.statusId);a.update((0,r.Z)({},s))}))()}buySaveStatus(e){var a=this;return(0,i.Z)((function*(){e&&(yield a.tradersWayRepository.buySaveStatus(e))}))()}openSaveStatusPurchaseFlow(e){const a=this.getState().saveStatus;a&&(c.m.api.launch({good:{id:e,paymentFlow:l.M7.ONCE,paymentTypes:a.paymentTypes.map((e=>(0,n.Z)((0,r.Z)({},e),{type:l.dx.ONCE})))}}),this.inputs.goToBuyGood())}watchEducationVideo(){this.tradersWayRepository.setVideoIsWatched(),this.update({isWatched:!0})}constructor(e,a,s){super({isWatched:!0,levels:[],awards:[],saveStatus:null,newVal:0,currency:"usd",accountId:null,progress:{points:0,percent:0,level:{id:1,points:0},endingAt:0}},{onStart:()=>{this.init()}}),this.tradersWayRepository=e,this.initialState=a,this.statusId="",this.inputs=s,this.inputs.subscribeToSelectedAccount(((e,a)=>{this.update({currency:a,accountId:e})}))}}},11410:(e,a,s)=>{"use strict";s.d(a,{P:()=>n,Z:()=>r});var i=s(84584);const r=(0,i.Z)(),n=(0,i.Z)()},81378:(e,a,s)=>{"use strict";s.d(a,{D0:()=>v,Zb:()=>y,uk:()=>C,qZ:()=>w,OJ:()=>L,Vp:()=>M,dm:()=>V});var i=s(27378),r=s(17302),n=s(82844),o=s(77740),l=s(8141),c=s(23735),d=s(95029);const u="O9WBeZAU",m="xpbeTBBT",p="CZ9uoGG3",h="LDNVjjuw",v=e=>{let a=e.size,s=void 0===a?"normal":a,v=e.awardId,g=e.levelIndex,_=e.tradersWayServiceState,f=e.onClick;const E=(0,l.L)(),S="normal"===s,y=(0,r.Fg)().theme,b=_.currency,C=_.saveStatus,T=_.progress.points,A=i.useCallback((e=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"save_status",eventAction:"boost_level_click",eventLabel:String(v)}),e.stopPropagation(),f(v)}),[f,v]);if(!C)return null;const k=C.minPoints,w=C.maxPoints,N=C.paymentTypes;if(T>=w)return null;const R=T>=k&&T<w,I=N.find((e=>e.currency===b));return i.createElement("div",{className:(0,r.AK)(u,!S&&m)},i.createElement(r.kc,{backgroundColor:!R&&(null==y?void 0:y["base-alpha"])||void 0},i.createElement(r.zx,{color:"accent",variant:"primary",fullWidth:!0,endText:i.createElement("span",{dir:E,className:h,"data-test":"tra-way-save-status-price"},i.createElement(d.ih,{value:I.price,currency:I.currency})),size:S?"m":"s",horizontalAlign:"start",disabled:!R,onClick:A,dataTest:"tra-way-buy-save-status"},i.createElement(r.xu,{direction:"column",gap:"xs"},i.createElement(r.xv,{variant:S?"M Compact / Bold":"S Compact / Bold",color:"inherit"},i.createElement(n._,{id:"profile_traders_way_save_status_purchase_button_title",defaultMessage:"Buy Level {value} Now",values:{value:g}})),i.createElement(r.xv,{variant:S?"S Compact / Regular":"XS / Regular",color:"inherit"},i.createElement(n._,{id:"profile_traders_way_save_status_purchase_button_subtitle",defaultMessage:"Get {value} Bonus Days",values:{value:30}}))))),!R&&S&&i.createElement("div",{className:p},i.createElement(r.xu,{direction:"row",verticalAlign:"flex-start",gap:"l"},i.createElement(o.lpD,null),i.createElement(r.xu,{direction:"column"},i.createElement(r.xv,{variant:"S / Bold",color:"contrast-alpha"},i.createElement(n._,{id:"profile_traders_way_save_status_unavailable_hint_title",defaultMessage:"{current} / {max} XP",values:{current:T,max:k}})),i.createElement(r.xv,{variant:"S / Regular",color:"contrast-alpha"},i.createElement(n._,{id:"profile_traders_way_save_status_unavailable_hint_subtitle",defaultMessage:"Get XP and get access to level boost. Level boost will save your time and progress for next {value} days.",values:{value:30}}))))),R&&S&&i.createElement(r.xv,{variant:"S Compact / Regular",color:"contrast-beta",align:"center"},i.createElement(n._,{id:"profile_traders_way_save_status_available_description",defaultMessage:"Buy this feature to keep your current status for a month longer"})))},g=new Map([["signals",i.createElement(n._,{key:1,id:"pro_award_open",defaultMessage:"Open"})],["chat",i.createElement(n._,{key:2,id:"pro_award_open",defaultMessage:"Open"})],["status_test_drive",i.createElement(n._,{key:3,id:"pro_award_open",defaultMessage:"Open"})],["next_status",i.createElement(n._,{key:4,id:"pro_award_details",defaultMessage:"Learn more"})]]),_=e=>{let a=e.award,s=e.onClick,o=e.isLocked,l=e.levelIndex,c=e.tradersWayServiceState,d=e.onBuySaveStatus;const u=a.id,m=a.isUsed,p=a.name,h=a.category,_=a.icons,f=a.type,E=a.endingAt,S=(0,i.useMemo)((()=>(e=>["advisor","indicator","signals","chat","sound_pack","consultation","deposit_bonus","status_discount","tournament_spin"].includes(e))(f)),[f]),y=(0,i.useMemo)((()=>Boolean(E&&new Date>new Date(1e3*E))),[E]),b=(0,i.useMemo)((()=>m?i.createElement(n._,{id:"pro_award_used",defaultMessage:"Used"}):g.get(f)||i.createElement(n._,{id:"pro_award_use",defaultMessage:"Use"})),[m,f]),C=(0,i.useCallback)((()=>{s&&s(u)}),[s,u]);return i.createElement("div",{className:"tw-c-award"},i.createElement("img",{className:"tw-c-award__image",src:_.small,alt:p}),i.createElement("p",{className:"tw-c-award__category"},h),i.createElement("h3",{className:"tw-c-award__title"},p),s&&S&&!o&&!y&&i.createElement(r.zx,{fullWidth:!0,disabled:m,onClick:C,dataTest:"tw-c-award-button-submit-control"},b),"save_status"===a.type&&i.createElement(v,{awardId:a.id,levelIndex:l,tradersWayServiceState:c,onClick:d,size:"small"}))};var f=s(24459),E=s(60042),S=s.n(E);const y=e=>{var a=e.className,s=e.children,r=(0,f.Z)(e,["className","children"]);return i.createElement("div",Object.assign({className:S()("tra-way-c-card",a)},r),s)};y.Content=e=>{var a=e.children,s=e.className,r=e.disabled,n=(0,f.Z)(e,["children","className","disabled"]);return i.createElement("div",Object.assign({className:S()("tra-way-c-card__content",{"tra-way-c-card__content_disabled":r},s)},n),a)};var b=s(18985);const C=e=>{var a=e.points,s=e.percent,o=e.gradeColor,l=e.level,c=e.nextLevel,d=e.hostRef,u=e.className,m=(0,f.Z)(e,["points","percent","gradeColor","level","nextLevel","hostRef","className"]);return i.createElement("div",Object.assign({className:u,ref:d},m),i.createElement("div",{style:{color:o||"inherit"}},i.createElement(r.xu,{direction:"row",horizontalAlign:"space-between",fullWidth:!0},i.createElement(r.xv,{as:"span",color:"inherit",variant:"S / Bold",dataTest:"pro_status_level_text"},i.createElement(n._,{id:"pro_status_level",defaultMessage:"Level {level}",values:{level:"".concat(l.id)}})),i.createElement(r.xv,{as:"span",color:"inherit",variant:"S / Bold"},i.createElement(n._,{id:"pro_progress_points",defaultMessage:"{value} XP",values:{value:c?i.createElement(i.Fragment,null,i.createElement(b.BK,{value:a-l.points}),"/",i.createElement(b.BK,{value:c.points-l.points})):i.createElement(b.BK,{value:a})}})))),i.createElement(r.xu,{padding:["xs",0],fullWidth:!0},i.createElement(r.kc,{color:o},i.createElement(r.Ex,{percent:s}))))},T={starter:i.createElement("path",{fill:"currentColor",d:"M5 10.1L12 8l7 2.1V15l-7-2.1L5 15v-4.9z"}),advanced:i.createElement("path",{fill:"currentColor",d:"M5 14.1l7-2.1 7 2.1V19l-7-2.1L5 19v-4.9zM5 7.1L12 5l7 2.1V12l-7-2.1L5 12V7.1z"}),expert:i.createElement("path",{fill:"currentColor",d:"M5 17.1l7-2.1 7 2.1V22l-7-2.1L5 22v-4.9zM5 10.1L12 8l7 2.1V15l-7-2.1L5 15v-4.9zM5 3.1L12 1l7 2.1V8l-7-2.1L5 8V3.1z"})},A=i.memo((e=>{let a=e.status,s=e.className;return i.createElement("svg",{className:s,xmlns:"http://www.w3.org/2000/svg",fill:"none",width:"16",height:"16",viewBox:"0 0 24 24"},T[a||"starter"])}));A.displayName="StatusIcon";const k={starter:"advanced",advanced:"expert"},w=(0,i.memo)((e=>{let a=e.last,s=e.current,n=e.status,o=e.activeId,c=e.awards,d=e.isHovered,u=e.onClickAward,m=e.tradersWayServiceState,p=e.onBuySaveStatus;const h=(0,i.useMemo)((()=>({next:a&&k[n],current:a&&k[n]||n})),[a,n]),v=(0,i.useMemo)((()=>({isFirst:1===s,isLast:a,isFinish:!h.next&&a,isStatus:(1===s||a)&&!(!h.next&&a),isActive:o===s,isColored:1===s||o>=s})),[o,a,s,h.next]),g=(0,l.L)(),f=(0,i.useMemo)((()=>S()("tw-c-p-point",{["tw-c-p-point_last tw-c-p-point_last-".concat(n)]:h.next,"tw-c-p-point_last-active":h.next&&v.isActive,["tw-c-p-point_".concat(n)]:v.isColored,"tw-c-p-point_big":v.isStatus||v.isActive})),[h.next,v,n]),E=(0,i.useMemo)((()=>v.isStatus&&!v.isFinish?i.createElement(A,{className:"tw-c-p-point__icon",status:h.current}):i.createElement("div",{className:"tw-c-p-point__icon"},s)),[v,h,s]),y=(0,i.useMemo)((()=>v.isFirst?"top-start":v.isLast?g?"top-start":"top-end":"top"),[v,g]),b=(0,i.useMemo)((()=>v.isFirst?g?10:-10:v.isLast?g?-10:10:0),[v,g]),C=(0,i.useMemo)((()=>({arrow:!0,placement:y,distance:10,skidding:b,triggerOnHover:!1,triggerOnTap:!1,transition:!0,open:d,interactive:!0,style:{zIndex:10}})),[y,b,d]);return(null==c?void 0:c.length)?i.createElement(r.u,Object.assign({},C,{content:c.map((e=>i.createElement(_,{key:e.id,tradersWayServiceState:m,award:e,isLocked:!v.isColored,onClick:u,levelIndex:s,onBuySaveStatus:p})))}),(e=>i.createElement("div",Object.assign({},e,{className:f}),E))):i.createElement("div",{className:f},E)}));w.displayName="ProgressPoint";var N,R=s(59312),I=s(60521),D=s(73598),O=s(50649);let L=((N=class RemainDays extends i.Component{get daysLeft(){return Math.floor((1e3*this.props.endingAt-Date.now())/864e5)}renderTimer(e){const a=24*Number(e.days)+Number(e.hours);return i.createElement("span",null,"".concat(a).padStart(2,"0"),":",e.minutes,":",e.seconds)}render(){const e=this.props,a=e.endingAt,s=e.minDays,o=e.timeService;return i.createElement(r.xv,{color:"contrast-beta",variant:"S / Regular"},this.daysLeft>s?i.createElement(r.Wo,{serverTime:o.serverTime,startTime:a||0,timeFormat:"d:h:m:s"}):i.createElement(i.Fragment,null,i.createElement(n._,{id:"pro_remain_time",defaultMessage:"Осталось: {time}",values:{time:i.createElement(D.Qj,null,(()=>i.createElement(r.Wo,{serverTime:o.serverTime,startTime:a||0,render:this.renderTimer})))}})))}}).defaultProps={minDays:1},N);(0,R.gn)([I.computed],L.prototype,"daysLeft",null),L=(0,R.gn)([O.observer],L);const M=e=>i.createElement("span",{className:S()("tra-way-c-tag","tra-way-c-tag_type_".concat(e.type||"default"),e.isAnimatable&&"tra-way-c-tag_is_animatable",e.className),style:e.style},e.children);var P=s(37323),x=s(97415),F=s(74199),B=s(81971),Z=s(53323),U=s(87561),H=s(61048),G=s(5915);const V=(0,B.zt)((e=>{let a=e.timeService,s=e.noticeService,r=e.statusService;const n=(0,x.o)(r.store).current.id,l=(0,x.o)(r.store),c=(0,i.useCallback)((e=>{let s=e.onClose;return i.createElement(H.q,{timeService:a,statusId:n,onClose:s,statusServiceState:l})}),[n]),d=(0,i.useCallback)((()=>{s.add({id:"status",collectionName:Z.sm.FULL_SCREEN,layout:e=>{let a=e.api,s=e.notice.id;return i.createElement(G.default,{noticeId:s,api:a,content:c})},notice:{priority:!0}})}),[s,c]);return i.createElement(F.Qe,{onClick:d},i.createElement(o.Gc9,null))}),{helper:(e,a)=>(0,P.Z)({},e,a),services:()=>[Z.L$,U.OY]})},65484:(e,a,s)=>{"use strict";s.d(a,{Z:()=>M});var i=s(37323),r=s(59312),n=s(27378),o=s(60521),l=s(73598),c=s(50649),d=s(60042),u=s.n(d),m=s(17302),p=s(77740),h=s(21182),v=s(28373),g=s(95601),_=s(82844),f=s(23735),E=s(83920),S=s(53323),y=s(87561),b=s(55121),C=s(54172),T=s(78585),A=s(57474),k=s(61048),w=s(81378),N=s(11410),R=s(18985);const I=e=>{let a=e.currency,s=e.deals,i=e.className;return n.createElement("div",{className:u()("tra-way-m-award-c-rfd",i)},s.map(((e,s)=>n.createElement(w.Vp,{key:s,className:"tra-way-m-award-c-rfd__item"},n.createElement(m.xu,{direction:"row",verticalAlign:"center",gap:"m"},n.createElement(m.xv,{variant:"M / Bold",color:"contrast-alpha"},n.createElement(R.BK,{key:s,value:e.amount,style:"currency",currency:a,minimumFractionDigits:0,maximumFractionDigits:0})),n.createElement("span",{className:"tra-way-m-award-c-rfd__count"},"x",e.count))))))},D=(0,h.W)(N.P);let O=class Award extends n.Component{get status(){const e=this.props,a=e.award,s=e.timeService;return a.endingAt&&s.serverTime>=a.endingAt?"expired":"available"}get accounts(){return this.props.accountService.accountsList.map((e=>({id:e.id,currency:e.currencyName})))}static makeButtonText(e){switch(e){case"signals":case"chat":return n.createElement(_._,{id:"pro_award_open",defaultMessage:"Open"});case"status_test_drive":case"next_status":return n.createElement(_._,{id:"pro_award_details",defaultMessage:"Learn more"});default:return n.createElement(_._,{id:"pro_award_use",defaultMessage:"Use"})}}renderAdditionalContent(e){let a=null;switch(e.type){case"riskfree_deals":{var s;if(!e.params)break;const i=e.params,r=(null===(s=this.accounts.find((e=>e.id===i.accountId)))||void 0===s?void 0:s.currency)||"";a=n.createElement(I,{currency:r||i.currencyDefault,deals:i.deals});break}}return a&&n.createElement("div",{className:"tra-way-m-award__meta"},a)}renderTimer(){const e=this.props,a=e.timeService,s=e.award;return n.createElement(l.Qj,null,(()=>n.createElement(m.Wo,{serverTime:a.serverTime,startTime:s.endingAt||0,timeFormat:"d:h:m:s"})))}clickHandler(e,a,s,i){if(null!==e)return()=>{(0,f.L)({event:"uaGtmEvents_clicks",eventCategory:"profile/traders_way",eventAction:"use_reward",eventLabel:"".concat(a.statusId,"_").concat(a.levelId,"_").concat(a.id)}),s&&s(),i&&i(),e&&e()}}buySaveStatusHandler(e){const a=this.props,s=a.onBuySaveStatus,i=a.onClose;s(e),i()}makeNavigationHandler(e,a,s,i){const r=a.navigation,n=a.chartNavigation;let o=null;switch(e.type){case"advisor":n&&(o=()=>n.goToAdvisors());break;case"indicator":n&&(o=()=>n.goToIndicators());break;case"status_discount":case"deposit_bonus":o=()=>r.goToDeposit({promo:e.params.code});break;case"signals":o=()=>r.goToTradingSignals();break;case"sound_pack":o=()=>r.goToSettings();break;case"consultation":o=()=>r.goToConsultantCallback()}return this.clickHandler(o,e,s,i)}makeDeeplinkHandler(e,a,s,i){return this.clickHandler((()=>{e.link&&a.tryOpenDeepLink(e.link,!1).finally((()=>{}))}),e,s,i)}render(){const e=this.props,a=e.award,s=e.className,i=e.levelId,r=e.onBeforeClose,o=e.onClose,l=e.navigationService,c=e.levelIndex,d=e.tradersWayServiceState;let h;"next_status"!==a.type&&"status_test_drive"!==a.type||(h=this.makeOpenStatusHandler(a.params.statusId,o)),i>=a.levelId&&(h=a.link?this.makeDeeplinkHandler(a,l,r,o):this.makeNavigationHandler(a,l,r,o));const v=Boolean(h&&"expired"!==this.status),g=a.levelId<d.progress.level.id;return n.createElement(T.u,{className:u()("tra-way-m-award",v&&"tra-way-m-award_has_footer",s)},n.createElement(T.u.Close,{onClick:o}),n.createElement(T.u.Block,{type:"centered",className:"tra-way-m-award__block"},n.createElement(n.Fragment,null,n.createElement("img",{className:"tra-way-m-award__image",src:a.icons.big,alt:""}),n.createElement("span",{className:"tra-way-m-award__label"},n.createElement("span",null,a.category)),n.createElement("h2",{className:"tra-way-m-award__title"},a.name),this.renderAdditionalContent(a),n.createElement("p",{className:"tra-way-m-award__description"},a.description),"save_status"===a.type&&n.createElement("div",{className:"tra-way-m-award__save-status"},n.createElement(w.D0,{awardId:a.id,levelIndex:c,tradersWayServiceState:d,onClick:this.buySaveStatusHandler})),n.createElement(D,{props:{award:a,isBlocked:g,hasFooter:v}}))),void 0!==a.endingAt&&!a.isUsed&&n.createElement("div",{className:u()("tra-way-m-award__timer","expired"===this.status&&"tra-way-m-award__timer_expired")},n.createElement(m.ZJ,{color:"shade",text:n.createElement(_._,{id:"pro_award_expired_at",defaultMessage:"Expires in"}),IconComponent:p.$9Y,timerElement:this.renderTimer})),v&&n.createElement("div",{className:"tra-way-m-award__footer"},a.isUsed?n.createElement("span",{className:"tra-way-m-award__footer-used"},n.createElement(_._,{id:"pro_award_used",defaultMessage:"Used"})):n.createElement(m.zx,{fullWidth:!0,onClick:null==h?void 0:h.bind(this),dataTest:"tra-way-m-award-use"},Award.makeButtonText(a.type))))}constructor(e){super(e),this.makeOpenStatusHandler=(e,a)=>{const s=this.props,i=s.noticeService,r=s.timeService,o=s.statusServiceState;return()=>{a(),i.add({id:"status",collectionName:S.sm.FULL_SCREEN,layout:a=>{let s=a.api,i=a.notice;return n.createElement(A.Z,{noticeId:i.id,api:s,content:a=>{let s=a.onClose;return n.createElement(k.q,{statusId:e,onClose:s,timeService:r,statusServiceState:o})}})},notice:{priority:!0}})}},this.renderTimer=this.renderTimer.bind(this),this.buySaveStatusHandler=this.buySaveStatusHandler.bind(this)}};(0,r.gn)([o.computed],O.prototype,"status",null),O=(0,r.gn)([c.observer],O);const L=(0,v.k)(g.u$,(e=>n.createElement(O,Object.assign({},e)))),M=(0,C.zt)(L,{helper:(e,a)=>(0,i.Z)({},e,a),services:[E.f,b.BR,S.L$,y.OY]})},57474:(e,a,s)=>{"use strict";s.d(a,{Z:()=>u});var i=s(27378),r=s(31542),n=s(31906),o=s(45797),l=s(34660),c=s(86321);let d=class LayoutModal extends i.Component{componentDidMount(){document.addEventListener("keydown",this.onKeyPress,{capture:!0})}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyPress,{capture:!0})}render(){const e=this.props,a=e.content,s=e.direction,l=e.animationOnClose,d=document.body;return d?(0,r.createPortal)(i.createElement(n.zt,{value:o.NW.getInstance()},i.createElement(c.l9,{onClose:this.handleClose,content:a,animationOnClose:l,dir:s})),d):null}constructor(...e){super(...e),this.handleClose=()=>{const e=this.props,a=e.noticeId;e.api.closeNotice(a)},this.onKeyPress=e=>{("code"in e&&e.code===LayoutModal.KEYBOARD_KEYS.ESC_CODE||e.keyCode===LayoutModal.KEYBOARD_KEYS.ESC_KEY)&&(this.handleClose(),e.stopPropagation())}}};d.KEYBOARD_KEYS={ESC_KEY:27,ESC_CODE:"Escape"};const u=(0,l.I)(d)},78585:(e,a,s)=>{"use strict";s.d(a,{u:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(77740);const c=e=>{let a=e.children,s=e.size,r=e.className;return i.createElement("div",{className:n()("tra-way-m-c-modal","tra-way-m-c-modal_size_".concat(s||"content"),r)},a)};c.Block=e=>{let a=e.children,s=e.overflow,r=e.type,l=e.className;return i.createElement(o.Xs,{className:n()("tra-way-m-c-modal__block-scroll"),style:{overflowY:s}},i.createElement("div",{className:n()("tra-way-m-c-modal__block-content",r&&"tra-way-m-c-modal__block-content_".concat(r),l)},a))},c.Close=e=>{let a=e.className,s=e.onClick;return i.createElement("div",{className:"tra-way-m-c-modal__close-container"},i.createElement(o.Xd,{className:n()("tra-way-m-c-modal__close",a),onClick:s,"data-test":"tra-way-m-c-modal-close"},i.createElement(l.bMz,null)))}},61048:(e,a,s)=>{"use strict";s.d(a,{q:()=>E,Z:()=>S});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(82844),c=s(23735),d=s(87561),u=s(54172),m=s(81378),p=s(78585);const h=e=>{let a=e.name,s=e.description,r=e.iconUrl,o=e.className,l=e.timerElement;return i.createElement("header",{className:n()("tra-way-m-status-c-header",o)},i.createElement("img",{src:r,alt:"",className:"tra-way-m-status-c-header__icon"}),null==l?void 0:l({className:"tra-way-m-status-c-header__timer"}),i.createElement("h2",{className:"tra-way-m-status-c-header__name"},a),i.createElement("span",{className:"tra-way-m-status-c-header__description"},s))};var v=s(3121),g=s(29609),_=s(77740);const f=(0,i.memo)((e=>{const a=e.item,s=e.position,r=e.onClick,o=e.className,c=(0,v.Z)((0,i.useState)(!0),2),d=c[0],u=c[1],m=(0,i.useCallback)((()=>{u((()=>!d))}),[d]);return(0,i.useEffect)((()=>{r&&r(a,s,d)}),[d,r,a,s]),i.createElement("div",{className:n()("tra-way-m-status-c-benefit",o),role:"button",onClick:m},i.createElement("img",{src:a.iconUrl,alt:"",className:"tra-way-m-status-c-benefit__icon"}),i.createElement(_.BDo,{className:n()("tra-way-m-status-c-benefit__arrow",d&&"tra-way-m-status-c-benefit__arrow_collapsed")}),i.createElement("div",{className:"tra-way-m-status-c-benefit__content"},i.createElement("h4",{className:"tra-way-m-status-c-benefit__name"},i.createElement(l._,Object.assign({},a.name))),i.createElement("div",{className:"tra-way-m-status-c-benefit__description-short"},i.createElement("span",null,i.createElement(l._,Object.assign({},a.descriptionShort)))),i.createElement("div",{className:n()("tra-way-m-status-c-benefit__description",d&&"tra-way-m-status-c-benefit__description_collapsed")},i.createElement(g.Z,{in:!d,timeout:300,classNames:"tra-way-m-status-c-benefit-slide",unmountOnExit:!0},i.createElement("span",{className:"tra-way-m-status-c-benefit__description-text"},i.createElement(l._,Object.assign({},a.description)))))))}));f.displayName="Benefit";const E=e=>{const a=e.className,s=e.onClose,r=e.statusId,d=e.timeService,u=e.statusServiceState,v=u.current,g=u.items,_=u.benefits,E=r===v.id?v:g[r];function S(e,a,s){s||(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"profile/status",eventAction:"open",eventLabel:"".concat(r,"_").concat(a)})}const y=(0,i.useCallback)((e=>E.endingAt?i.createElement(m.OJ,{endingAt:E.endingAt,timeService:d,className:e.className}):null),[E.endingAt,d]);(0,i.useEffect)((()=>()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"profile",eventAction:"close",eventLabel:"status"})}),[]);const b=(0,i.useMemo)((()=>_[E.id].map(((e,a)=>i.createElement(f,{key:a,item:e,position:a,className:"tra-way-m-status__benefit",onClick:S})))),[_]);return i.createElement(p.u,{className:n()("tra-way-m-status",a)},i.createElement(p.u.Close,{onClick:s}),i.createElement(p.u.Block,{className:"tra-way-m-status__block",overflow:"scroll",type:"centered"},i.createElement(h,{name:i.createElement(l._,Object.assign({},E.name)),description:i.createElement(l._,Object.assign({},E.description)),iconUrl:E.iconUrl,className:"tra-way-m-status__header",timerElement:y}),i.createElement("main",{className:"tra-way-m-status__main"},b)),i.createElement("div",{className:"tra-way-m-status__footer-button"},i.createElement(o.rU,{onClick:function(){(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"profile/status",eventAction:"open",eventLabel:"all_statuses"}),s(),window.open("/statuses","_blank")},"data-test":"tra-way-m-status-show-all"},i.createElement(l._,{id:"pro_show_status_all",defaultMessage:"Show all statuses"}))))},S=(0,u.zt)(E,{services:[d.OY]})},25023:(e,a,s)=>{"use strict";s.r(a),s.d(a,{TradersWay:()=>TradersWay_TradersWay,default:()=>B});var i=s(37323),r=s(24459),n=s(27378),o=s(73598),l=s(60042),c=s.n(l),d=s(77740),u=s(17302),m=s(23735),p=s(82844),h=s(87561),v=s(53323),g=s(54172),_=s(81378),f=s(57474),E=s(65484),S=s(63967),y=s(97415),b=s(66047);const C="ORz0wh0G",T="m1WKF7Xv",A="DiYbWest",k="_2RfaMmI",w="iGeZS7_V",N="kDIFCzmM",R="duzN9IUJ",I="VOal0mEj",D="kfFFPE3N",O=e=>{let a=e.awards,s=e.onClick,i=e.notifications,r=e.levelIndex;const o=(0,S.G)(b.r),l=(0,y.o)(o.store),d=l.progress.level;return n.createElement(n.Fragment,null,a.map(((e,a)=>{const m=d.id<e.levelId,h="next_status"===e.type;return n.createElement(n.Fragment,{key:a},n.createElement("div",{className:c()(C,m&&T,h&&A),"data-test":"award-card",onClick:function(){s(e,r)}},n.createElement("div",{className:c()(k,m&&w)},n.createElement("img",{"data-test":"award-icon",className:c()(N,h&&R),src:e.icons.small,alt:""}),n.createElement(u.xu,{direction:"column",gap:"s",verticalAlign:"center",horizontalAlign:"center"},n.createElement(u.xv,{variant:"S Compact / Bold",color:"contrast-alpha",as:"span",align:"center",dataTest:"award-name"},e.name),e.descriptionShort&&n.createElement(u.xv,{variant:"S Compact / Bold",color:"contrast-beta",as:"span",align:"center",dataTest:"award-description"},e.descriptionShort)),n.createElement("div",{className:I},i&&i[e.id]&&n.createElement(_.Vp,{className:D,type:"accent",isAnimatable:!0},n.createElement(p._,{key:"pro_traders_way_level_unlocked",id:"pro_traders_way_level_unlocked",defaultMessage:"Available"})))),"save_status"===e.type&&n.createElement(_.D0,{awardId:e.id,levelIndex:r,tradersWayServiceState:l,onClick:o.openSaveStatusPurchaseFlow})))})))};const L=e=>{let a=e.levelId,s=e.position,i=e.children,r=e.band,o=e.className,l=e.blocked;return n.createElement(_.Zb,{className:c()("tra-way-p-tw-c-level",l&&"tra-way-p-tw-c-level_blocked",o),"data-test":"tra-way-p-tw-c-level-".concat(a),"data-level-id":a},r&&n.createElement("span",{className:"tra-way-p-tw-c-level__band",style:r.style}),n.createElement(_.Zb.Content,{className:"tra-way-p-tw-c-level__content"},n.createElement("span",{className:c()("tra-way-p-tw-c-level__position",l&&"tra-way-p-tw-c-level__position-blocked")},s),i))};L.getElementIdSelector=function(e){return".tra-way-p-tw-c-level[data-level-id='".concat(e,"']")};const M={starter:"https://youtu.be/P91Ee6vI418",advanced:"https://youtu.be/HyqRNMxZsxE"},P=e=>e.charAt(0).toUpperCase()+e.slice(1),x={starter:"advanced",advanced:"expert"},F={starter:n.createElement(p._,{id:"profile_tooltip_traders_way_timer_starter_description",defaultMessage:"When this counter reaches zero, your current stage of the Trader’s Way will end and a new one will begin. Keep trading and thereby earning XP to collect both familiar and new rewards on your path toward the Advanced and Expert statuses."}),advanced:n.createElement(p._,{id:"profile_tooltip_traders_way_timer_advanced_description",defaultMessage:"When this counter reaches zero, your current stage of the Trader’s Way will end and a new one will begin. To extend Advanced status for another 30 days, be sure to get a “Save” reward. Otherwise, your status will be downgraded. Keep trading and thereby earning XP to collect both familiar and new rewards on your path toward Expert status."}),expert:n.createElement(p._,{id:"profile_tooltip_traders_way_timer_expert_description",defaultMessage:"When this counter reaches zero, your current stage of the Trader’s Way will end and a new one will begin. To extend Expert status for another 30 days, be sure to get a “Save” reward. Otherwise, your status will be downgraded. Keep trading and thereby earning XP to collect both familiar and new rewards including the Expert status extension."})};class TradersWay_TradersWay extends n.Component{get awards(){const e=this.props.tradersWayServiceState,a=e.awards,s=e.levels,r={};return s.forEach((e=>{let a=e.id;r[a]=[]})),a.forEach((e=>{r[e.levelId].push((0,i.Z)({},e))})),r}get notificationsForAward(){const e=this.props,a=e.notificationsServiceState.namespaceItems,s=e.tradersWayServiceState.progress,i=e.statusServiceState.current,r={};return a.awards.forEach((e=>{if(!this.isActualNotification(e,i,s))return;const a=e.id,n=e.params,o=n.id,l=n.level_id;r[l]||(r[l]={}),r[l][o]=a})),r}disposer(){0!==this.props.tradersWayServiceState.levels.length&&this.handleLevelsReady()}isActualNotification(e,a,s){return"new"===e.status&&e.params.status_id===a.id&&e.params.level_id<=s.level.id}handleAwardClick(e,a){const s=(this.notificationsForAward[e.levelId]||{})[e.id];s&&this.props.notificationsService.read(s);const i=this.props,r=i.noticeService,o=i.tradersWayServiceState,l=i.statusServiceState,c=i.onClose,d=i.onBuySaveStatus,u=o.progress;r.add({id:"award",collectionName:v.sm.FULL_SCREEN,layout:s=>{let i=s.api,r=s.notice;return n.createElement(f.Z,{noticeId:r.id,api:i,content:s=>{let i=s.onClose;return n.createElement(E.Z,{statusServiceState:l,tradersWayServiceState:o,onBuySaveStatus:d,award:e,levelId:u.level.id,onBeforeClose:c,onClose:i,levelIndex:a})}})},notice:{priority:!0}}),(0,m.L)({event:"uaGtmEvents_clicks",eventCategory:"profile/traders_way",eventAction:"open",eventLabel:"".concat(e.statusId,"_").concat(e.levelId,"_").concat(e.id)})}handleLevelsReady(){const e=this.props.tradersWayServiceState.progress.level;this.scrollToLevel(e.id,!1)}handleVideoClick(){const e=this.props.statusServiceState.current,a=M[e.id];a&&window.open(a)}scrollToLevel(e,a){const s=this.levelsRef.current;if(!s)return;const i=s.querySelector(L.getElementIdSelector(e));i&&this.props.scroll.toElement(i.getBoundingClientRect(),"center","center",a?"smooth":"auto")}renderTimer(){const e=this.props,a=e.timeService,s=e.tradersWayServiceState.progress;return n.createElement(o.Qj,null,(()=>n.createElement(u.Wo,{serverTime:a.serverTime,startTime:s.endingAt,timeFormat:"d:h:m:s"})))}renderTimerStatus(){const e=this.props,a=e.timeService,s=e.statusServiceState.current,i=Math.ceil((1e3*(s.endingAt||0)-Date.now())/864e5);return i>1?n.createElement(p._,{id:"pro_status_ending_at",defaultMessage:"Days left: {days}",values:{days:"".concat(i)}}):n.createElement(o.Qj,null,(()=>n.createElement(u.Wo,{serverTime:a.serverTime,startTime:s.endingAt||0,timeFormat:"d:h:m:s"})))}render(){const e=this.props,a=e.tradersWayServiceState,s=a.progress,i=a.levels,o=e.statusServiceState.current,l=e.upperSlot,m=e.className;return n.createElement("div",{className:c()("tra-way-p-tw",m)},n.createElement(u.xu,{direction:"column",gap:"l"},n.createElement(u.xv,{variant:"M / Regular",color:"contrast-beta"},n.createElement(p._,{id:"tw-main-info",defaultMessage:"Traders of different statuses have different Trader's Ways. Each Trader's Way consists of several levels. Trade and complete daily tasks to advance from level to level, reach new statuses and get more rewards. The progress will reset every 30 days."})),l,!l&&("starter"===o.id||"advanced"===o.id)&&n.createElement(u.zx,{startIcon:n.createElement(d.BHy,null),onClick:this.handleVideoClick,horizontalAlign:"start",variant:"secondary",fullWidth:!0,understring:n.createElement(p._,{id:"profile-tw-video-description",defaultMessage:"Trading Guide"}),dataTest:"tra-trading-guide-video-button"},n.createElement(p._,{id:"profile-tw-video-title",defaultMessage:"From {value1} to {value2}",values:{value1:"".concat(P(o.id)),value2:"".concat(P(x[o.id]))}})),o.endingAt&&o.endingAt>s.endingAt&&n.createElement(n.Fragment,null,n.createElement("div",{className:"tra-way-p-tw__tooltip"},n.createElement(u.u,{placement:"top",fitSizeTo:"viewport",triggerOnHover:!1,triggerOnTap:!0,arrow:!0,transition:!0,disablePortal:!0,content:n.createElement(p._,{id:"tw-milestone-info",defaultMessage:"Status milestone is a status you won't go beyond after the Trader's Way period runs out."})},(e=>{var a=e.ref,s=(0,r.Z)(e,["ref"]);return n.createElement(u.ZJ,Object.assign({color:"shade",text:n.createElement(p._,{id:"tw-milestone",defaultMessage:"Status milestone: {value}",values:{value:o.id.charAt(0).toUpperCase()+o.id.slice(1)}}),IconComponent:d.rF,className:"tra-way-p-tw__timer",timerElement:this.renderTimerStatus,ref:a,"data-test":"tra-days-left-count-down"},s))})))),n.createElement("div",{className:"tra-way-p-tw__sticky"},n.createElement(u.xu,{direction:"column",gap:"m"},n.createElement(u.u,{placement:"top",fitSizeTo:"viewport",triggerOnHover:!1,triggerOnTap:!0,arrow:!0,transition:!0,disablePortal:!0,content:F[o.id]},(e=>{var a,s=e.ref,i=(0,r.Z)(e,["ref"]);return n.createElement(u.ZJ,Object.assign({color:"shade",text:n.createElement(p._,{id:"tw-resets",defaultMessage:"Time left till Trader's Way resets"}),IconComponent:(a=o.iconUrl,()=>n.createElement("img",{src:a,alt:""})),className:"tra-way-p-tw__timer",timerElement:this.renderTimer,ref:s,"data-test":"tra-time-left-count-down"},i))})),n.createElement(u.u,{placement:"top",fitSizeTo:"viewport",triggerOnHover:!1,triggerOnTap:!0,arrow:!0,transition:!0,disablePortal:!0,content:n.createElement(p._,{id:"tra_way_tooltip_progress",defaultMessage:"XP means points. To earn points, complete tasks and trade. The larger the trade amount is, the more points you get. Profitable trades earn more points."})},(e=>{var a=e.ref,i=(0,r.Z)(e,["ref"]);return n.createElement(u.xu,{padding:["m","l","l","l"]},n.createElement(_.uk,Object.assign({points:s.points,percent:s.percent,level:s.level,nextLevel:s.level.next,gradeColor:o.color,className:"tra-way-p-tw__progress",hostRef:a},i)))})))),n.createElement(u.xu,{direction:"column",gap:"s",ref:this.levelsRef},i.map(((e,a)=>{const i=a+1,r=s.level.id===e.id?{style:{backgroundColor:o.color}}:void 0,l=s.level.id<e.id;return this.awards[e.id]?n.createElement(L,{key:e.id,levelId:e.id,position:i,band:r,blocked:l},n.createElement(O,{awards:this.awards[e.id],onClick:this.handleAwardClick,notifications:this.notificationsForAward[e.id],levelIndex:i})):n.createElement(L,{key:e.id,levelId:e.id,position:i,band:r,blocked:l})})))))}constructor(e){super(e),this.levelsRef=n.createRef(),this.handleLevelsReady=this.handleLevelsReady.bind(this),this.handleAwardClick=this.handleAwardClick.bind(this),this.handleVideoClick=this.handleVideoClick.bind(this),this.renderTimer=this.renderTimer.bind(this),this.renderTimerStatus=this.renderTimerStatus.bind(this)}}const B=(0,g.zt)(TradersWay_TradersWay,{helper:(e,a)=>(0,i.Z)({},e,a),services:[h.OY,v.L$]})},9383:(e,a,s)=>{"use strict";s.d(a,{t:()=>n});var i=s(27378),r=s(82844);s(25023);const n=()=>i.createElement(r._,{id:"pro_traders_way",defaultMessage:"Trader's Way"})},51523:(e,a,s)=>{"use strict";s.d(a,{k:()=>S});var i=s(3121),r=s(27378),n=s(73598),o=s(17302),l=s(60042),c=s.n(l),d=s(81378);const u=(0,r.memo)((e=>{let a=e.last,s=e.current,n=e.activeId,o=e.status,l=e.awards,u=e.onClickAward,m=e.onOpenTooltip,p=e.tradersWayServiceState,h=e.onBuySaveStatus;const v=(0,i.Z)((0,r.useState)(!1),2),g=v[0],_=v[1],f=(0,i.Z)((0,r.useState)(0),2),E=f[0],S=f[1],y=(0,r.useCallback)((()=>{S((()=>window.setTimeout((()=>{if(_((()=>!0)),l&&l[0]){const e=l[0],a=e.id,s=e.levelId;m({awardId:a,levelId:s})}}),350)))}),[l,m]),b=(0,r.useCallback)((()=>{clearTimeout(E),_((()=>!1))}),[E]);return r.createElement("div",{className:c()("tw-w-progress-step",{"tw-w-progress-step_last":a}),onMouseEnter:y,onMouseLeave:b},r.createElement(d.qZ,{onBuySaveStatus:h,tradersWayServiceState:p,awards:l,onClickAward:u,current:s,isHovered:g,activeId:n,status:o,last:a}),!a&&r.createElement("div",{className:c()("tw-w-progress-step__line",1===s||n>=s&&"tw-w-progress-step__line_".concat(o))}))}));u.displayName="ProgressBarStep";var m=s(29257),p=s(44495);const h=(0,r.memo)((e=>{let a=e.colors,s=a.alpha,i=a.delta,n=a.gamma,o=e.percent,l=e.points,d=e.disableAnimation;const u=(0,p.useSpring)({from:{opacity:0,transform:"translateY(0px)",color:n},to:(h=(0,m.Z)((function*(e){yield e({opacity:1,color:i,config:{duration:100}}),yield e({transform:"translateY(5px)",color:s,config:{duration:500}}),yield e({config:{duration:100}}),yield e({opacity:0,transform:"translateY(-10px)",config:{duration:1e3}})})),function(e){return h.apply(this,arguments)}),immediate:d||!o,config:{tension:180,friction:18}});var h;return l&&o?r.createElement(p.animated.span,{style:u,className:c()("tw-w-progress-bar__exp",o>8&&"tw-w-progress-bar__exp_stick-to-right")},"+",l," XP"):null}));h.displayName="AnimatedExp";var v=s(37323),g=s(64356);const _=(0,r.memo)((e=>{let a=e.percent,s=e.colors,i=s.beta,n=s.gamma,o=s.delta,l=s.shadow,c=e.children;const d=(0,p.useSpring)({from:{width:"0%",backgroundColor:n,boxShadow:"0px 0px 10px rgba(".concat(l,", 0.5)")},to:(u=(0,m.Z)((function*(e){yield e({backgroundColor:o,config:{duration:100}}),yield e({backgroundColor:i,boxShadow:"0px 0px 0px rgba(".concat(l,", 0.5)"),config:{duration:500}}),yield e({config:{duration:100}}),yield e({backgroundColor:n,width:"".concat(a,"%"),config:{duration:1e3}}),yield e({config:{duration:150}})})),function(e){return u.apply(this,arguments)}),config:p.config.molasses});var u;const h=(0,p.useSpring)({from:{width:"0%"},width:"".concat(a,"%"),delay:600,backgroundColor:"white",config:(0,g.Z)((0,v.Z)({},p.config.molasses),{duration:100})}),_=(0,p.useSpring)({from:{width:"0%"},width:"".concat(a,"%"),config:p.config.molasses,delay:1700});return r.createElement("div",null,r.createElement(p.animated.div,{className:"tw-w-progress-bar__exp-wrapper",style:_},c),r.createElement(p.animated.div,{className:"tw-w-progress-bar__line",style:h}),r.createElement(p.animated.div,{className:"tw-w-progress-bar__line",style:d}))}));_.displayName="AnimatedLine";const f={starter:{alpha:"#0094FF",beta:"#33A9FF",gamma:"#0E6EB5",delta:"#83CBFF",shadow:"131, 203, 255"},advanced:{alpha:"#1FBF75",beta:"#35DF90",gamma:"#0E9254",delta:"#85FFC6",shadow:"133, 255, 198"},expert:{alpha:"#F9B42E",beta:"#FAC661",gamma:"#AA8132",delta:"#FFDD9A",shadow:"255, 221, 15"}},E=e=>{let a=e.percent,s=e.points,i=e.status,n=e.disableAnimation;const o=f[i];return r.createElement(_,{colors:o,percent:a},r.createElement(h,{colors:o,percent:a,points:s,disableAnimation:n}))},S=e=>{let a=e.level,s=e.points,l=e.percent,c=e.awards,d=e.onClickAward,m=e.onOpenTooltip,p=e.status.id,h=e.itemsLength,v=e.tradersWayServiceState,g=e.onBuySaveStatus;const _=(0,i.Z)((0,r.useState)(0),2),f=_[0],S=_[1],y=(0,o.D9)(s),b=(0,r.useMemo)((()=>(e=>{let a=e.percent,s=e.level;const i=e.length-1,r=s.id-1;if(i>0){const e=(a/100+r)/i*100;return e<100?parseFloat(e.toFixed(1)):100}return 0})({percent:l,level:a,length:h})),[l,a,h]);(0,r.useEffect)((()=>{s&&y&&y<s&&S((()=>s-y))}),[s,y,S]);const C=(0,r.useCallback)((e=>{const s=e+1,i={tradersWayServiceState:v,onBuySaveStatus:g,current:s,activeId:a.id,awards:c.filter((e=>e.levelId===s)),last:s===h,onClickAward:d,onOpenTooltip:m,status:p};return r.createElement(u,Object.assign({key:e},i))}),[v,a.id,c,h,d,m,p]),T=r.useMemo((()=>Array.from(new Array(h).keys()).map(C)),[h,C]);return(0,n.SZ)((()=>r.createElement("div",{className:"tw-w-progress-bar"},r.createElement("div",{className:"tw-w-progress-bar__container"},r.createElement("div",{className:"tw-w-progress-bar__bar"},T),r.createElement(E,{percent:b,points:f,status:p,disableAnimation:void 0===y})),r.createElement("div",{className:"tw-w-progress-bar__counter"},r.createElement("span",null,a.id)," / ",h))))}},4037:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var i=s(27378),r=s(50649),n=s(60042),o=s.n(n),l=s(17302),c=s(8141);const d=(0,r.observer)((e=>{let a=e.status,s=e.progress,r=e.className,n=e.handleClick;const d=(0,c.L)();return i.createElement("div",{className:o()("tra-way-w-progress-small",r),dir:d,onClick:n},i.createElement("div",{className:"tra-way-w-progress-small__status"},i.createElement("img",{src:a.iconUrl,alt:"",className:"tra-way-w-progress-small__status-image"}),s&&i.createElement("span",null,s.level.id)),s&&i.createElement(l.xu,{shrink:0,fullWidth:!0},i.createElement(l.kc,{color:a.color,borderRadius:0},i.createElement(l.Ex,{percent:s.percent}))))}))},54463:(e,a,s)=>{"use strict";s.d(a,{BM:()=>o.BM,GS:()=>r.tradingSettingsItemsPipe,Gj:()=>o.Gj,QT:()=>n.Q,dy:()=>i.dy,wH:()=>i.wH,wg:()=>i.wg});var i=s(85133),r=(s(25254),s(48278)),n=(s(21444),s(1875)),o=s(18038)},25974:(e,a,s)=>{"use strict";s.d(a,{M:()=>_});var i=s(27378),r=s(13243),n=s(95601),o=s(14282),l=s(74199),c=s(61681),d=s(27634),u=s(40846),m=s(63427),p=s(1875),h=s(18038),v=s(62815);const g=i.lazy((()=>Promise.resolve().then(s.bind(s,48278)).then((e=>({default:e.SettingsLayout}))))),_=(0,r.v)({name:"Trading",dependsOn:[o.F0,n.u$,c.G],services:()=>({tradingPanelService:new v.p})},{publicApi:e=>e});_.use((0,d.VT)(u.uW.TRADING_SETTINGS),{component:()=>i.createElement(g,null),loader:()=>i.createElement(l.it,null)}),_.use(n.eM,((e,a,s)=>(a.isDesktop||e.push({id:"terminal",selected:null===s.sidebarService.getMajorActiveScope(),dataTest:"sidebar-btn-terminal",icon:i.createElement(p.N,null),onClick:()=>s.sidebarService.close()}),e))),_.use(m.v5,((e,a)=>i.createElement(h.hI,{currentTab:a.tradingPanelService.getState().currentMechanic,onClick:a.tradingPanelService.handleChangeMechanic,scroll:e.scroll})))},62815:(e,a,s)=>{"use strict";s.d(a,{p:()=>TradingPanelService});var i=s(7223);class TradingPanelService extends i.t{constructor(){super({currentMechanic:"ftt"}),this.handleChangeMechanic=e=>{this.update({currentMechanic:e})}}}},85133:(e,a,s)=>{"use strict";s.d(a,{dy:()=>r.d,wH:()=>r.w,wg:()=>n});var i=s(84584),r=s(25254);(0,i.Z)();const n=(0,i.Z)()},46202:(e,a,s)=>{"use strict";s.d(a,{BM:()=>d,Gj:()=>c,hI:()=>u});var i=s(27378),r=s(76232),n=s(46124),o=s(17302),l=s(8141);const c=(0,r.t)(),d=(0,r.t)(),u=i.memo((e=>{let a=e.currentTab,s=e.scroll,r=e.onClick;const u=(0,n.k)(c,[],{scroll:s}),m=(0,n.k)(d,[]),p=(0,l.L)(),h=i.useCallback((e=>{r(e)}),[r]);return i.createElement("div",{dir:p},i.createElement(o.xu,{padding:[0,"l",0,"l"]},u.length>1?i.createElement(o.mQ,{selected:a,tabGap:"xl",onSelect:h},u.sort(((e,a)=>e.order-a.order)).map((e=>{const a=m.reduce(((a,s)=>s.mechanic===e.mechanic?a+s.count:a),0);return i.createElement(o.mQ.Item,{counter:a||void 0,key:e.mechanic,label:e.title,name:e.mechanic},e.content)}))):i.createElement(i.Fragment,null,u.map((e=>i.createElement(i.Fragment,null,e.content))))))}));u.displayName="ActiveTradePanel"},18038:(e,a,s)=>{"use strict";s.d(a,{BM:()=>i.BM,Gj:()=>i.Gj,hI:()=>i.hI});var i=s(46202)},79303:(e,a,s)=>{"use strict";s.d(a,{s:()=>o});var i=s(27378),r=s(86321),n=s(41620);const o=e=>{let a=e.onChange,s=e.onClose,o=e.content;const l=i.useCallback((e=>{let s=e.onClose;return i.createElement(r.u_,{size:"parent",className:n.Z.host},i.createElement(r.u_.Block,null,i.createElement(o,{onChange:a,onClose:s})))}),[o,a,s]);return i.createElement(r.l9,{content:l,onClose:s})}},96502:(e,a,s)=>{"use strict";s.d(a,{t:()=>n});var i=s(3121),r=s(27378);const n=e=>{let a=e.confirmation,s=e.onChange;const n=Boolean(a),o=(0,i.Z)(r.useState(!1),2),l=o[0],c=o[1],d=r.useCallback((e=>{s(e),n&&c(!1)}),[]),u=r.useCallback((()=>{n&&c(!1)}),[]);return{isNeedModal:n,isShowModal:l,setIsShowModal:c,handleChange:d,handleCancel:u}}},21444:(e,a,s)=>{"use strict";s.d(a,{s:()=>r.s,t:()=>i.t});var i=s(96502),r=s(79303)},46219:(e,a,s)=>{"use strict";s.d(a,{N:()=>d,Q:()=>l});var i=s(27378),r=s(76232),n=s(46124),o=s(77740);const l=(0,r.t)(),c=i.createElement(o.l2O,{key:"original"}),d=i.memo((()=>{const e=(0,n.k)(l,[c],{originalIcon:c});return i.createElement(i.Fragment,null,e[e.length-1])}));d.displayName="NavigationIcon"},1875:(e,a,s)=>{"use strict";s.d(a,{N:()=>i.N,Q:()=>i.Q});var i=s(46219)},39104:(e,a,s)=>{"use strict";s.d(a,{d:()=>h,w:()=>p});var i=s(3121),r=s(27378),n=s(76232),o=s(46124),l=s(60042),c=s.n(l),d=s(17302),u=s(21444),m=s(64750);const p=(0,n.t)(),h=e=>{let a=e.id,s=e.title,n=e.checked,l=e.description,h=e.dataTestId,v=e.enableConfirmation,g=e.disableConfirmation,_=e.onChange;const f=(0,i.Z)((0,r.useState)(!1),2),E=f[0],S=f[1],y=(0,r.useRef)(null),b=(0,o.k)(p,{});(0,r.useEffect)((()=>{b.id===a&&y.current&&S(!0)}),[b]),(0,r.useEffect)((()=>{E&&y.current&&y.current.scrollIntoView()}),[E]);const C=(0,u.t)({confirmation:v,onChange:_}),T=C.isNeedModal,A=C.isShowModal,k=C.setIsShowModal,w=C.handleChange,N=C.handleCancel,R=(0,u.t)({confirmation:g,onChange:_}),I=R.isNeedModal,D=R.isShowModal,O=R.setIsShowModal,L=R.handleChange,M=R.handleCancel,P=r.useCallback((e=>{T&&e?k(!0):I&&!e?O(!0):_(e)}),[T,_]);return r.createElement(r.Fragment,null,A&&v?r.createElement(u.s,{onChange:w,onClose:N,content:v}):null,D&&g?r.createElement(u.s,{onChange:L,onClose:M,content:g}):null,r.createElement("div",{className:c()(m.Z.host,{[m.Z.highlighted]:E}),ref:y},r.createElement("div",{"data-test":"settings-list-item-".concat(h),className:m.Z.item},r.createElement(d.rs,{fullWidth:!0,textPosition:"start",dataTest:"settings-list-switcher-".concat(a),name:"settings-list-switcher-".concat(a),checked:n,onChange:P,label:s,subLabel:l}))))};h.displayName="SettingsItem"},25254:(e,a,s)=>{"use strict";s.d(a,{d:()=>i.d,w:()=>i.w});var i=s(39104)},48278:(e,a,s)=>{"use strict";s.r(a),s.d(a,{SettingsLayout:()=>c,tradingSettingsItemsPipe:()=>l});var i=s(27378),r=s(76232),n=s(46124),o=s(17302);const l=(0,r.t)(),c=()=>{const e=(0,n.k)(l,[]);return i.createElement(o.xu,{padding:["m","l"],dataTest:"settings-layout-box"},e.map(((e,a)=>i.createElement(o.xu,{display:"grid",key:a,gap:"s",shrink:0,padding:[0,0,"xl",0],fullWidth:!0},i.createElement(o.xv,{as:"h3",variant:"L / Bold"},e.title),i.createElement(o.Zb,null,i.createElement(o.xu,{display:"grid",gap:"m"},e.component)))))," ")};c.displayName="SettingsLayout"},43387:(e,a,s)=>{"use strict";s.d(a,{u:()=>i});const i=(0,s(23934).Z)()},4083:(e,a,s)=>{"use strict";s.d(a,{I:()=>i.I,_:()=>r._});var i=s(5022),r=s(32726)},80561:(e,a,s)=>{"use strict";s.d(a,{b:()=>_});var i=s(27378),r=s(13243),n=s(94503),o=s(61681),l=s(25974),c=s(54463),d=s(63427),u=s(8275),m=s(12802),p=s(71003),h=s(5022),v=s(99772),g=s(32726);const _=(0,r.v)({name:"TradingFtt",dependsOn:[p.x,o.G,l.M,n.Ul,m.Q],services:()=>({tradingHistoryBarServiceFtt:new v.$})},{publicApi:e=>e});_.use(d.a2,(e=>i.createElement(h.H,{scrollRef:e.scroll.scrollRef}))),_.use(c.Gj,((e,a,s)=>[{mechanic:"ftt",order:0,title:"Fixed Time",content:i.createElement(g.B,{scroll:a.scroll,onShowHistory:()=>{s.commonLegacyServiceList.sideBarService.goTo(u.KO.TRADING_HISTORY_FTT)}})},...e])),_.enable((e=>e.tradingMechanicsService.enabled("ftt")))},99772:(e,a,s)=>{"use strict";s.d(a,{$:()=>TradingHistoryBarServiceFtt});var i=s(7223);class TradingHistoryBarServiceFtt extends i.t{selectTab(e){this.update({historyPanelTab:e})}constructor(){super({historyPanelTab:"trades"})}}},34484:(e,a,s)=>{"use strict";s.d(a,{B:()=>u,_:()=>d});var i=s(27378),r=s(76232),n=s(46124),o=s(36732),l=s(17302),c=s(82844);const d=(0,r.t)(),u=e=>{let a=e.scroll,s=e.onShowHistory;const r=(0,n.k)(d,[],{scroll:a});return i.createElement(o.yJ,{scrollRef:a.scrollRef},r.sort(((e,a)=>e.order-a.order)).map(((e,a)=>e.count||e.showEmptyContent?i.createElement(i.Fragment,{key:a},i.createElement(o.yJ.Title,null,e.title),e.content):null)),r.length?i.createElement(l.zx,{fullWidth:!0,variant:"secondary",dataTest:"trades_open_full_history_action_button_title",onClick:s},i.createElement(c._,{id:"trades_open_full_history_action_button_title",defaultMessage:"Open Full History"})):null)};u.displayName="ActiveTradePanel"},32726:(e,a,s)=>{"use strict";s.d(a,{B:()=>i.B,_:()=>i._});var i=s(34484)},64801:(e,a,s)=>{"use strict";s.d(a,{H:()=>h,I:()=>m});var i=s(27378),r=s(63967),n=s(97415),o=s(46124),l=s(76232),c=s(17302),d=s(36732),u=s(99772);const m=(0,l.t)(),p=e=>{let a=e.isBottom;const s=(0,r.G)(u.$),l=(0,n.o)(s.store).historyPanelTab,d=i.useCallback((e=>{s.selectTab(e)}),[s]),p=(0,o.k)(m,[],{isBottom:a});return i.createElement(c.mQ,{selected:l,onSelect:d,tabGap:"xl"},p.sort(((e,a)=>e.order-a.order)).map((e=>i.createElement(c.mQ.Item,{key:e.type,label:e.title,name:e.type},e.component))))};p.displayName="TradePanelComponent";const h=e=>{let a=e.scrollRef;return i.createElement(d.Wd,{scrollRef:a},(e=>i.createElement(p,{isBottom:e})))};h.displayName="HistoryTradePanel"},5022:(e,a,s)=>{"use strict";s.d(a,{H:()=>i.H,I:()=>i.I});var i=s(64801)},9707:(e,a,s)=>{"use strict";s.d(a,{J:()=>i.J,W:()=>r.W});var i=s(55053),r=s(3294)},16685:(e,a,s)=>{"use strict";s.d(a,{y:()=>f});var i=s(29257),r=s(27378),n=s(13243),o=s(94503),l=s(61681),c=s(63427),d=s(25974),u=s(54463),m=s(12802),p=s(71003),h=s(8275),v=s(3294),g=s(58445),_=s(55053);const f=(0,n.v)({name:"TradingFx",dependsOn:[p.x,l.G,d.M,o.Ul,m.Q],services:()=>({tradingHistoryBarServiceFx:new g.g})},{publicApi:e=>e});var E;f.use(c.yw,(e=>r.createElement(_.H,{scrollRef:e.scroll.scrollRef}))),f.onStart((E=(0,i.Z)((function*(e){let a=e.tradingHistoryBarServiceFx;return yield a.load()})),function(e){return E.apply(this,arguments)})),f.use(u.Gj,((e,a,s)=>[{mechanic:"fx",order:1,title:"Forex",content:r.createElement(v.B,{scroll:a.scroll,onShowHistory:()=>{s.commonLegacyServiceList.sideBarService.goTo(h.KO.TRADING_HISTORY_FX)}})},...e])),f.enable((e=>e.tradingMechanicsService.enabled("fx")))},58445:(e,a,s)=>{"use strict";s.d(a,{g:()=>TradingHistoryBarServiceFx});var i=s(29257),r=s(7223);class TradingHistoryBarServiceFx extends r.t{selectTab(e){this.update({historyPanelTab:e})}load(){return(0,i.Z)((function*(){return Promise.resolve()}))()}constructor(){super({historyPanelTab:"trades"})}}},6071:(e,a,s)=>{"use strict";s.d(a,{B:()=>u,W:()=>d});var i=s(27378),r=s(76232),n=s(46124),o=s(36732),l=s(17302),c=s(82844);const d=(0,r.t)(),u=e=>{let a=e.scroll,s=e.onShowHistory;const r=(0,n.k)(d,[],{scroll:a});return i.createElement(o.yJ,{scrollRef:a.scrollRef},r.sort(((e,a)=>e.order-a.order)).map(((e,a)=>e.count||e.showEmptyContent?i.createElement(i.Fragment,{key:a},i.createElement(o.yJ.Title,null,e.title),e.content):null)),r.length?i.createElement(l.zx,{fullWidth:!0,variant:"secondary",dataTest:"trades_open_full_history_action_button_title",onClick:s},i.createElement(c._,{id:"trades_open_full_history_action_button_title",defaultMessage:"Open Full History"})):null)};u.displayName="ActiveTradePanel"},3294:(e,a,s)=>{"use strict";s.d(a,{B:()=>i.B,W:()=>i.W});var i=s(6071)},95597:(e,a,s)=>{"use strict";s.d(a,{H:()=>h,J:()=>m});var i=s(27378),r=s(17302),n=s(63967),o=s(97415),l=s(46124),c=s(76232),d=s(36732),u=s(58445);const m=(0,c.t)(),p=e=>{let a=e.isBottom;const s=(0,n.G)(u.g),c=(0,o.o)(s.store).historyPanelTab,d=i.useCallback((e=>{s.selectTab(e)}),[s]),p=(0,l.k)(m,[],{isBottom:a});return i.createElement(r.mQ,{selected:c,onSelect:d,tabGap:"xl"},p.sort(((e,a)=>e.order-a.order)).map((e=>i.createElement(r.mQ.Item,{key:e.type,label:e.title,name:e.type},e.component))))},h=e=>{let a=e.scrollRef;return i.createElement(d.Wd,{scrollRef:a},(e=>i.createElement(p,{isBottom:e})))};h.displayName="HistoryTradePanel"},55053:(e,a,s)=>{"use strict";s.d(a,{H:()=>i.H,J:()=>i.J});var i=s(95597)},58246:(e,a,s)=>{"use strict";s.d(a,{E3:()=>r,KA:()=>n,Q_:()=>o,d0:()=>c,pe:()=>l});var i=s(66713);const r=10,n=[i.Fw.FOREX,i.Fw.BINARY],o={TRADING_SIGNALS:"tradingSignals",TRADING_SIGNALS_ASSETS:"tradingSignalsAssets",TRADING_SIGNALS_PRODUCTS:"tradingSignalsProducts",TRADING_SIGNALS_DETAILS:"tradingSignalsDetails"};var l;!function(e){e.SEARCH="SEARCH",e.LOCKED="LOCKED",e.SPT="SPT",e.NOT_SUPPORTED="NOT_SUPPORTED",e.MARKET="MARKET"}(l||(l={}));const c={section:"help",categoryId:"market-place",contentId:"what-is-a-trading-signal"}},87764:(e,a,s)=>{"use strict";s.d(a,{G:()=>CategoriesService});var i=s(7223);class CategoriesService extends i.t{set(e,a){const s=this.getState(),i=s.selectedCategory,r=s.additionalCategories;this.update({categories:e});const n=[...e.map((e=>e.id)),...r.map((e=>e.id))];i&&n.includes(i)||this.update({selectedCategory:a})}add(e){this.update((a=>({additionalCategories:a.additionalCategories.find((a=>a.id===e.id))?a.additionalCategories:[...a.additionalCategories,e]})))}select(e){this.update({selectedCategory:e})}constructor(){super({categories:[],additionalCategories:[],selectedCategory:null})}}},61624:(e,a,s)=>{"use strict";s.d(a,{I:()=>TradingSignalsService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223),l=s(58246);class TradingSignalsService extends o.t{init(){if(this.getState().isInit)return;const e=this.uiStorageRepository.isCloseContentInfo(),a=this.uiStorageRepository.isCloseDetailsInfo();this.uiStorageRepository.setUserAgreement(),this.update({isUserAgreementAccepted:!0,loadingTimeframes:!0});var s,o=this;this.timeframeRepository.onTimeframeStateChange((s=(0,i.Z)((function*(s){if(!s.length)return;const i=s.sort(((e,a)=>e.id-a.id)),r=o.timeframeRepository.getActiveTimeframeId();o.timeframeRepository.setActiveTimeframeId(r);const n=i.flatMap((e=>e.assets.map((e=>e.feature_uid)).filter(Boolean))),l=yield o.fetchFeatures(n),c=i.find((e=>e.id===r))||i[0];o.update({timeframes:i,activeTimeframe:c,isCloseContentInfo:e,isCloseDetailsInfo:a,marketFeature:l,loadingTimeframes:!1,isInit:!0}),o.inputs.subscribeToCurrentTradingAssets((e=>{o.updateAssetsData(e)})),o.inputs.setCategories(o.getCategories(i),String(c.category.id)),o.onChangeTimeframeId(c.id)})),function(e){return s.apply(this,arguments)})),this.tradingSignalsRepository.subscribeActiveSignals((e=>{this.update((a=>{const s=e.filter((e=>!a.signals.some((a=>a.au===e.au))));return(0,n.Z)((0,r.Z)({},a),{signals:[...s,...a.signals]})}))}))}fetchFeatures(e){var a=this;return(0,i.Z)((function*(){return yield a.inputs.fetchFeatures(e)}))()}getUserAgreementAccepted(){return this.uiStorageRepository.getUserAgreement()}getCategories(e){return Object.values(e.reduce(((e,a)=>{const s=e[a.category.id],i=a.category.id;return s?s.timeframes.push(a):e[i]={id:"".concat(i),timeframes:[a],title:a.category.name},e}),{}))}onSelectAsset(e){const a=this.getState().pairListProject,s=this.inputs.getPair(e,a);s&&(s.locked&&this.update({signalsStatus:l.pe.LOCKED}),this.inputs.selectPair(e,a),this.inputs.goToContent())}onChangeTimeframeId(e){this.tradingSignalsRepository.unSubscribe(),this.timeframeRepository.setActiveTimeframeId(e);const a=this.getState(),s=a.timeframes,i=a.selectedPair,r=a.project,n=a.marketFeature,o=s.find((a=>a.id===e));if(this.update({signals:[],activeTimeframe:o}),!l.KA.includes(r))return;const c=this.getAssetsDataOfCurrentTimeframe(o.assets,i),d=c.availableAssets,u=c.notAvailableAssets,m=c.featureUid;this.update({availableAssets:d,notAvailableAssets:u,offeredFeature:m?n.find((e=>e.uid===m)):null}),i&&u.includes(i.id)&&!i.locked?this.update({signalsStatus:l.pe.MARKET}):this.onPairSubscribe(e)}onCloseContentInfo(){this.uiStorageRepository.setCloseContentInfo(),this.update({isCloseContentInfo:!0})}onCloseDetailsInfo(){this.uiStorageRepository.setCloseDetailsInfo(),this.update({isCloseDetailsInfo:!0})}goToAssets(){const e=this.getState(),a=e.project,s=e.availableAssets,i=e.activeTimeframe;let r=a,n=s;const o=l.KA.includes(r);if(!n.length&&o)return void this.goToProducts("all");o||(r="bo",n=((null==i?void 0:i.assets)||[]).reduce(((e,a)=>{let s=a.list;return a.available?[...e,...s]:e}),[])),this.update({loadingPairList:!0});const c=this.inputs.getPairList(n,r);if(!c.length)return this.update({loadingPairList:!1,errorLoadingPairList:!0,pairListProject:r}),void this.inputs.goToAssets();this.update({pairList:c,loadingPairList:!1,errorLoadingPairList:!1,pairListProject:r}),this.inputs.goToAssets()}setSignalData(e){e?this.inputs.setSignalData({advice:e.ad,adviceTime:e.at,actualUntil:e.au}):this.inputs.setSignalData(null)}goToProducts(e){const a=this.getState(),s=a.marketFeature,i=a.timeframes,r=a.activeTimeframe,n=i.filter((a=>"activeCategory"!==e||!r||a.category.id===r.category.id)).map((e=>({title:e.name,list:e.assets.flatMap((e=>s.filter((a=>a.uid===e.feature_uid))))})));this.update({featureList:n}),this.inputs.goToProducts()}goToHelp(){this.uiStorageRepository.setCloseContentInfo(),this.update({isCloseContentInfo:!0}),this.inputs.goToHelp()}goToMarket(e){this.inputs.goToMarket(e)}selectSignal(e){this.update({selectedSignal:e}),this.inputs.goToDetails()}onPairSubscribe(e){const a=this.getState().selectedPair;a&&!a.locked&&this.tradingSignalsRepository.onPairSubscribe([{asset:a.id,timeframe_id:e}],this.updateHistory)}updateAssetsData(e){this.tradingSignalsRepository.unSubscribe(),this.update({isMultiChart:e.length>1});const a=e[0],s=a.selectedPair,i=a.project,r=this.getState(),n=r.selectedPair,o=r.project,c=r.activeTimeframe,d=r.selectedSignal,u=r.marketFeature;if(n&&n.id===s.id&&o===i)return;if(d&&this.inputs.goToContent(),!l.KA.includes(i))return void this.update({signals:[],project:i,selectedPair:s,selectedSignal:null,signalsStatus:l.pe.SPT});const m=this.getAssetsDataOfCurrentTimeframe(c.assets,s),p=m.availableAssets,h=m.notAvailableAssets,v=m.featureUid;!c||p.includes(s.id)||h.includes(s.id)?s.locked?this.update({signals:[],selectedPair:s,project:i,selectedSignal:null,signalsStatus:l.pe.LOCKED}):(this.update({signals:[],project:i,selectedPair:s,selectedSignal:null,offeredFeature:v?u.find((e=>e.uid===v)):null}),this.onPairSubscribe(c.id)):this.update({signals:[],project:i,selectedPair:s,selectedSignal:null,signalsStatus:l.pe.NOT_SUPPORTED})}updateHistory(e){const a=this.getState(),s=a.selectedPair,i=a.availableAssets,r=a.notAvailableAssets;if(s){if(!e.length){if(!i.includes(s.id)&&!r.includes(s.id))return void this.update({signalsStatus:l.pe.NOT_SUPPORTED});if(r.includes(s.id))return void this.update({signalsStatus:l.pe.MARKET})}this.update({signals:e,signalsStatus:l.pe.SEARCH})}}getAssetsDataOfCurrentTimeframe(e,a){return e.reduce(((e,s)=>{let i=s.available,o=s.list,l=s.feature_uid;if(!i){let s=null;return!e.featureUid&&o.includes(null==a?void 0:a.id)&&(s=l),(0,n.Z)((0,r.Z)({},e),{notAvailableAssets:[...e.notAvailableAssets,...o],featureUid:e.featureUid?e.featureUid:s})}return(0,n.Z)((0,r.Z)({},e),{availableAssets:[...e.availableAssets,...o]})}),{availableAssets:[],notAvailableAssets:[],featureUid:null})}constructor(e,a,s,i){super({isUserAgreementAccepted:!1,isCloseContentInfo:!1,isCloseDetailsInfo:!1,loadingPairList:!1,errorLoadingPairList:!0,timeframes:[],signals:[],selectedSignal:null,selectedPair:null,project:"bo",currency:"usd",loadingTimeframes:!1,activeTimeframe:null,pairList:[],pairListProject:"bo",marketFeature:[],featureList:[],isInit:!1,signalsStatus:l.pe.NOT_SUPPORTED,isMultiChart:!1,availableAssets:[],notAvailableAssets:[],offeredFeature:null}),this.timeframeRepository=e,this.tradingSignalsRepository=a,this.uiStorageRepository=s,this.inputs=i,this.update({isUserAgreementAccepted:this.getUserAgreementAccepted()}),this.inputs.subscribeToAccountCurrencyChange((e=>{this.update({currency:e})}))}}},3991:(e,a,s)=>{"use strict";s.d(a,{Eh:()=>p,hZ:()=>u,jL:()=>S,em:()=>ce,x$:()=>he,h4:()=>c,AN:()=>k,aN:()=>b,j3:()=>Z,Hr:()=>ge,HR:()=>Ae,B7:()=>Y});var i=s(27378),r=s(18985),n=s(82844);const o="i8s5fC0p",l=(0,r.vU)({agreement:{id:"trading_signals_client_agreement_title",defaultMessage:"Service Agreement"},products:{id:"trading_signals",defaultMessage:"Trading Signals"}}),c=e=>{let a=e.type,s=e.dataTest;return i.createElement("div",{className:o,"data-test":s},i.createElement(n._,Object.assign({},l[a])))};c.displayName="Header";const d="MSZ5U6PO",u=e=>{let a=e.type;return i.createElement("div",{className:d,"data-test":"ts-p-assets-title"},i.createElement(n._,{id:"trading_signals_assets_title",defaultMessage:"Signal Assets",values:{type:a}}))};u.displayName="AssetsHeader";var m=s(77740);const p=e=>{let a=e.dir,s=e.className;return"ltr"===a?i.createElement(m.Ec8,{className:s}):i.createElement(m.D6v,{className:s})};p.displayName="Arrow";var h=s(17302),v=s(8141);const g="XL5JC6Gw",_="nIsmm9AK",f="pl9aFA0I",E="k7iNCyTo",S=i.memo((e=>{let a=e.title,s=e.description,r=e.onClick,o=e.onClose;const l=(0,v.L)();return i.createElement("div",{className:g,dir:l},o&&i.createElement("div",{className:f,onClick:o},i.createElement(m.bMz,{fontSize:"inherit"})),i.createElement("div",{className:_},i.createElement(h.xu,{direction:"column",gap:"s"},i.createElement(h.xu,{direction:"column",gap:"xs"},i.createElement(h.xv,{variant:"M / Bold"},a),i.createElement(h.xv,{variant:"S / Regular"},s)),r&&i.createElement("button",{onClick:r,className:E},i.createElement(h.xv,{variant:"M Compact / Bold",as:"span"},i.createElement(n._,{defaultMessage:"Learn more",id:"learn_more"}))))))}));S.displayName="Banner";const y="v2HAE6lL",b=()=>i.createElement("div",{className:y},i.createElement(h.$j,null));b.displayName="Loader";const C="gBvUXW8J",T="SVgO8yUr",A="pSG7mpOf",k=e=>{let a=e.onClick;return i.createElement("div",{className:C},i.createElement("div",{className:T},i.createElement(m.Gc9,{className:A}),i.createElement(n._,{id:"statuses_service_plan_error",defaultMessage:"The service is temporarily unavailable. Please send your request once again or try again later."})),i.createElement(h.zx,{fullWidth:!0,onClick:a},i.createElement(n._,{id:"try_again",defaultMessage:"Try again"})))};k.displayName="LoadError";var w=s(95029),N=s(16332),R=s(51116);const I="oouHl94v",D="ClKefaxD",O="nIjMcHXp",L="iKYpr1MO",M="sBZFko8o",P="qnYDxIZQ",x="zY_pWYbo",F="rpk8V4FO",B="o9GNlT6q",Z=i.memo((e=>{let a=e.feature,s=e.currency,r=void 0===s?"usd":s,o=e.dir,l=e.onClick;const c=a.uid,d=a.imgUrl,u=a.name,m=a.paymentTypes.find((e=>e.currency===r)).price,h=(0,N.KL)(a.ownership),v=i.useMemo((()=>{var e;return h&&a.ownership&&(0,R.p6)(1e3*(null===(e=a.ownership)||void 0===e?void 0:e.activeTill),"d.m.Y")}),[a.ownership,h]),g=i.useCallback((()=>{l(c)}),[c,l]);return i.createElement("div",{className:I,onClick:g,"data-test":"ts-market-card"},i.createElement("img",{className:D,src:d,alt:""}),i.createElement("div",{className:O},i.createElement("div",{className:L},u),i.createElement("div",{className:P},h?i.createElement(i.Fragment,null,i.createElement(n._,{id:"mp_subscription_active",defaultMessage:"Active",className:M})," ",i.createElement(n._,{className:x,id:"mp_subscription_till",defaultMessage:"until {value}",values:{value:v}})):i.createElement(i.Fragment,null,i.createElement(w.ih,{value:m,currency:r})," ",i.createElement(n._,{className:x,id:"mp_per_month",defaultMessage:"/ mos."}))),i.createElement(n._,{className:F,id:"trading_signals_list_marketplace_description",defaultMessage:"Open in Marketplace"})),i.createElement(p,{dir:o,className:B}))}));Z.displayName="MarketCard";var U=s(60042),H=s.n(U),G=s(11717);const V="Srr1ZjNv",W="K1aJE4KZ",j="AzleGGU6",z=(0,r.vU)({up:{id:"trading_signals_advice_up",defaultMessage:"Up"},down:{id:"trading_signal_advice_down",defaultMessage:"Down"}}),q=e=>{let a=e.direction;return i.createElement(n._,Object.assign({className:H()(V,"up"===a?W:j)},z[a]))};q.displayName="DirectionIcon";var K=s(83714);const Y=i.memo((e=>{let a=e.startTime,s=e.className;const r=(0,K.w6)();return i.createElement(h.Wo,{className:s,serverTime:r.timestamp,startTime:a,timeFormat:"m:s"})}));Y.displayName="Timer";const X="quQgbttJ",J="U1KERszy",Q="GlLOzUcx",$="ggy85NGo",ee="zRppm6ES",te="jqBFR1NG",ae="XahxMwTS",se=i.memo((e=>{let a=e.signal,s=e.title,r=e.type,o=void 0===r?"active":r,l=e.onClick;const c=i.useCallback((()=>{l(a)}),[a,l]);let d;return d="history"===o?(0,R.p6)(1e3*a.au,"d M H:i"):i.createElement(Y,{startTime:a.au}),i.createElement("div",{className:H()(X,"history"===o&&J),onClick:c,"data-test":"ts-signal-card-".concat(o)},i.createElement("div",{className:Q},i.createElement(G.Y,{pairName:a.as}),i.createElement("span",{className:$},s)),i.createElement("div",{className:ee},i.createElement("div",{className:ae},i.createElement(n._,{id:"trading_signals_advice",defaultMessage:"{time} {direction} Trade Signal",values:{time:(0,w.yC)(a.at),direction:i.createElement(q,{direction:a.ad})}})),i.createElement("span",{className:te},d)))}));se.displayName="Card";const ie="whKWMjoF",re=e=>{let a=e.children,s=e.className;const r=(0,v.L)();return i.createElement("div",{dir:r,className:H()(ie,s)},a)},ne="YCjCbbah",oe="Akuke2Oh",le="HG6l3N_N",ce=e=>{let a=e.description,s=e.onClose,r=e.className;return i.createElement(re,{className:r},i.createElement(m.Gc9,{className:ne}),i.createElement("div",{className:le},i.createElement(h.xv,{variant:"S / Regular",color:"inherit"},a)),i.createElement("button",{className:oe,onClick:s},i.createElement(m.bMz,null)))},de=()=>i.createElement("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M5.16097 3.80126C4.781 3.39958 4.16495 3.39958 3.78498 3.80126C3.40501 4.20294 3.40501 4.8542 3.78498 5.25588L4.88028 6.3436C3.40145 7.99234 2.5 10.1428 2.5 12.5C2.5 15.0917 3.58976 17.4335 5.33856 19.1333C5.73459 19.5183 6.36769 19.5093 6.75263 19.1133C7.13756 18.7172 7.12857 18.0841 6.73254 17.6992C5.34446 16.35 4.5 14.5153 4.5 12.5C4.5 10.7026 5.1717 9.04891 6.30167 7.75514L7.55431 8.99911C6.63949 9.91933 6.05681 11.1369 6.05681 12.5C6.05681 14.0635 6.82346 15.4356 7.97865 16.3871C8.40495 16.7382 9.03518 16.6772 9.3863 16.2509C9.73741 15.8246 9.67646 15.1944 9.25016 14.8433C8.48291 14.2114 8.05681 13.377 8.05681 12.5C8.05681 11.7349 8.38109 11.0023 8.97324 10.4082L10.5656 11.9896C10.5227 12.1525 10.4999 12.3236 10.4999 12.5C10.4999 13.6046 11.3953 14.5 12.4999 14.5C12.6812 14.5 12.8568 14.4759 13.0238 14.4307L19.839 21.1987C20.219 21.6004 20.8351 21.6004 21.215 21.1987C21.595 20.7971 21.595 20.1458 21.215 19.7441L5.16097 3.80126Z"}),i.createElement("path",{d:"M21.039 17.6248L19.5911 16.1769C20.2441 15.0894 20.6143 13.8343 20.6143 12.5C20.6143 10.4847 19.7698 8.64998 18.3818 7.30079C17.9857 6.91585 17.9767 6.28275 18.3617 5.88672C18.7466 5.49069 19.3797 5.48169 19.7758 5.86663C21.5245 7.56643 22.6143 9.90826 22.6143 12.5C22.6143 14.3924 22.0333 16.1515 21.039 17.6248Z"}),i.createElement("path",{d:"M16.8801 13.4659L18.3723 14.9581C18.8053 14.2305 19.0575 13.3967 19.0575 12.5C19.0575 10.9365 18.2908 9.56437 17.1357 8.61292C16.7094 8.2618 16.0791 8.32275 15.728 8.74906C15.3769 9.17536 15.4378 9.80559 15.8641 10.1567C16.6314 10.7886 17.0575 11.623 17.0575 12.5C17.0575 12.8309 16.9968 13.1557 16.8801 13.4659Z"})),ue=e=>{let a=e.icon,s=e.title,r=e.content;return i.createElement(re,null,i.createElement(h.xu,{direction:"column",gap:"xs",fullWidth:!0},i.createElement(h.xu,{direction:"row",verticalAlign:"center",gap:"m",fullWidth:!0},a,i.createElement(h.xv,{variant:"M / Bold",color:"inherit"},s)),r))},me="OWkAcmY2",pe="timeframe",he=i.memo((e=>{let a=e.timeframes,s=e.activeTimeframe,r=e.onChange;const o=i.useMemo((()=>i.createElement(n._,{id:"transaction_duration",defaultMessage:"Trade duration"})),[]),l=i.useCallback((e=>{const a=e.timeframe,i=a?Number(a):null;null!==i&&(null==s?void 0:s.id)!==i&&r(i)}),[s,r]),c=i.useMemo((()=>{if(!s)return{};const e=String(s.id);return{[pe]:e}}),[s]);return a.length&&s?i.createElement("div",{className:me},i.createElement(h.wn,{selected:c,onChange:l},[i.createElement(h.wn.Select,{name:pe,placeholder:o,key:pe},i.createElement(h.v2.Group,{label:o},a.map((e=>{let a=e.id,s=e.name,r=e.frame_label;return i.createElement(h.v2.Item,{key:a,label:s,value:"".concat(a),description:r})}))))])):null}));he.displayName="Filters";var ve=s(23735);const ge=e=>{let a=e.signals,s=e.type,r=e.selectedPair,n=e.onClick;const o=i.useCallback((e=>{"active"===s&&(0,ve.L)({event:"uaGtmEvents_clicks",eventCategory:"signals",eventAction:"signals_active_click",eventLabel:String(e.tid)}),n(e,s)}),[s,n]);return i.createElement(h.xu,{padding:[0,0,"l"]},a.map(((e,a)=>i.createElement(se,{key:a,signal:e,title:(null==r?void 0:r.title)||e.as,type:s,onClick:o}))))};ge.displayName="List";var _e=s(97415);const fe="IOutaxLF",Ee="EIk4rjHJ",Se=()=>i.createElement("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{className:fe,fillRule:"evenodd",clipRule:"evenodd",d:"M6.45185 6.3765C6.83678 6.77253 6.82779 7.40563 6.43176 7.79057C5.04368 9.13976 4.19922 10.9745 4.19922 12.9898C4.19922 15.005 5.04368 16.8398 6.43176 18.189C6.82779 18.5739 6.83678 19.207 6.45185 19.603C6.06691 19.9991 5.43381 20.0081 5.03777 19.6231C3.28898 17.9233 2.19922 15.5815 2.19922 12.9898C2.19922 10.398 3.28898 8.05621 5.03777 6.35641C5.43381 5.97147 6.06691 5.98046 6.45185 6.3765ZM18.0609 6.3765C18.4458 5.98046 19.0789 5.97147 19.475 6.35641C21.2238 8.05621 22.3135 10.398 22.3135 12.9898C22.3135 15.5815 21.2238 17.9233 19.475 19.6231C19.0789 20.0081 18.4458 19.9991 18.0609 19.603C17.676 19.207 17.685 18.5739 18.081 18.189C19.4691 16.8398 20.3135 15.005 20.3135 12.9898C20.3135 10.9745 19.4691 9.13976 18.081 7.79057C17.685 7.40563 17.676 6.77253 18.0609 6.3765Z"}),i.createElement("path",{className:Ee,fillRule:"evenodd",clipRule:"evenodd",d:"M9.08552 9.23879C9.43664 9.66509 9.37569 10.2953 8.94939 10.6464C8.18214 11.2784 7.75604 12.1127 7.75604 12.9897C7.75604 13.8667 8.18214 14.7011 8.94939 15.333C9.37569 15.6841 9.43664 16.3144 9.08552 16.7407C8.73441 17.167 8.10418 17.2279 7.67788 16.8768C6.52269 15.9253 5.75604 14.5532 5.75604 12.9897C5.75604 11.4262 6.52269 10.0541 7.67788 9.10265C8.10418 8.75153 8.73441 8.81248 9.08552 9.23879ZM15.4272 9.23879C15.7784 8.81248 16.4086 8.75153 16.8349 9.10265C17.9901 10.0541 18.7567 11.4262 18.7567 12.9897C18.7567 14.5532 17.9901 15.9253 16.8349 16.8768C16.4086 17.2279 15.7784 17.167 15.4272 16.7407C15.0761 16.3144 15.1371 15.6841 15.5634 15.333C16.3306 14.7011 16.7567 13.8667 16.7567 12.9897C16.7567 12.1127 16.3306 11.2784 15.5634 10.6464C15.1371 10.2953 15.0761 9.66509 15.4272 9.23879Z"}),i.createElement("path",{d:"M14.1991 12.9897C14.1991 14.0943 13.3037 14.9897 12.1991 14.9897C11.0945 14.9897 10.1991 14.0943 10.1991 12.9897C10.1991 11.8852 11.0945 10.9897 12.1991 10.9897C13.3037 10.9897 14.1991 11.8852 14.1991 12.9897Z"}));var ye=s(58246);const be="D4qyGuur",Ce={multiChart:{title:i.createElement(n._,{id:"chart_button_tooltip_chart_multichart",defaultMessage:"Multiple Charts"}),description:i.createElement(n._,{id:"trading_signals_multichart_enabled",defaultMessage:"Trading signals only work with one chart at a time, so other charts won't receive any signals while it is in progress"})},search:{title:i.createElement(n._,{id:"signals_searching_for_signals_title",defaultMessage:"Searching for Signals..."}),description:(e,a)=>i.createElement(n._,{id:"signals_searching_for_signals_description",defaultMessage:"Searching for a signal for {asset}. Average time: {time}",values:{asset:e,time:a}})},locked:{title:i.createElement(n._,{id:"signals_asset_closed_title",defaultMessage:"Asset Closed"}),description:(e,a,s)=>i.createElement(n._,{id:"signals_asset_closed_text",defaultMessage:"{asset} is unavailable for trading until {date}, {time}",values:{asset:e,date:a,time:s}})},market:{title:i.createElement(n._,{id:"trading_signals_no_subscription_title",defaultMessage:"Subscription Required"}),description:e=>i.createElement(n._,{id:"signals_no_subscription_description",defaultMessage:"Try signals for {asset} as a free trial or subscribe to them in the Market section",values:{asset:e}}),goToMarket:i.createElement(n._,{id:"signals_view_subscription_button",defaultMessage:"View Options"})},notSupported:{title:i.createElement(n._,{id:"signals_no_signals_title",defaultMessage:"No Signals"}),descriptionAnotherAsset:e=>i.createElement(n._,{id:"signals_no_signals_different_asset_text",defaultMessage:"There are no signals available for {asset}. You can try a different asset.",values:{asset:e}}),descriptionNoAnotherAsset:e=>i.createElement(n._,{id:"signals_no_signals_text",defaultMessage:"There are no signals currently available in the {section} section",values:{section:e}}),goToMarket:i.createElement(n._,{id:"signals_go_to_market_button",defaultMessage:"View Signal Packages"})},spt:{title:i.createElement(n._,{id:"signals_wrong_platform_title",defaultMessage:"FTT or Forex Modes Required"}),description:e=>i.createElement(n._,{id:"signals_wrong_platform_description",defaultMessage:"Select an asset in FTT or Forex modes to see signals in the {section} section",values:{section:e}})},selectDifferentAsset:i.createElement(n._,{id:"signals_different_asset_button",defaultMessage:"Select Different Asset"})},Te={default:i.createElement(m.az_,null),search:i.createElement(Se,null),locked:i.createElement(m.bpu,null),market:i.createElement(m.GVU,null),notSupported:i.createElement(de,null),spt:i.createElement(m._V1,null)},Ae=e=>{let a=e.isActive,s=e.timeframes,r=e.tradingSignalsService;const n=(0,_e.o)(r.store),o=n.isMultiChart,l=n.selectedPair,c=n.activeTimeframe,d=n.signalsStatus,u=n.offeredFeature,m=n.availableAssets,p=i.useMemo((()=>((null==c?void 0:c.assets)||[]).reduce(((e,a)=>{let s=a.available,i=a.list;return s?e+i.length:e}),0)),[c]),v=i.useCallback((()=>{u&&((0,ve.L)({event:"uaGtmEvents_clicks",eventCategory:"signals",eventAction:"signals_openmarket_click",eventLabel:String(u.id)}),r.goToMarket(u.uid))}),[u,r]),g=i.useCallback((()=>{(0,ve.L)({event:"uaGtmEvents_clicks",eventCategory:"signals",eventAction:"signals_allassets_click",eventLabel:"signals_allassets_click"}),r.goToAssets()}),[r]),_=i.useCallback((()=>{r.goToProducts("activeCategory")}),[r]),f=i.useMemo((()=>o?i.createElement(ue,{icon:Te.default,title:Ce.multiChart.title,content:Ce.multiChart.description}):null),[o]),E=i.useMemo((()=>{if(a||!c||!l)return null;switch(d){case ye.pe.SEARCH:default:return i.createElement(ue,{icon:Te.search,title:Ce.search.title,content:Ce.search.description(i.createElement("b",null,l.title),i.createElement(h.xv,{variant:"S / Regular",color:"contrast-beta",as:"span",inline:!0},(0,w.yC)(c.average_waiting_time)))});case ye.pe.LOCKED:{const e=1e3*l.timeOpen;return i.createElement(ue,{icon:Te.locked,title:Ce.locked.title,content:Ce.locked.description(i.createElement("b",null,l.title),i.createElement("span",{className:be},(0,R.p6)(e,"d M")),i.createElement("span",{className:be},(0,R.p6)(e,"H:i")))})}case ye.pe.MARKET:return i.createElement(ue,{icon:Te.market,title:Ce.market.title,content:i.createElement(h.xu,{direction:"column",gap:"m"},Ce.market.description(i.createElement("b",null,l.title)),i.createElement(h.zx,{fullWidth:!0,onClick:v},Ce.market.goToMarket))});case ye.pe.NOT_SUPPORTED:return i.createElement(ue,{icon:Te.notSupported,title:Ce.notSupported.title,content:i.createElement(h.xu,{direction:"column",gap:"m"},m.length?i.createElement(i.Fragment,null,Ce.notSupported.descriptionAnotherAsset(l.title),i.createElement(h.zx,{horizontalAlign:"start",fullWidth:!0,endIcon:i.createElement(h.xv,{variant:"S Compact / Bold",color:"inherit"},m.length),onClick:g,"data-test":"ts-content-all-assets-btn"},Ce.selectDifferentAsset)):i.createElement(i.Fragment,null,Ce.notSupported.descriptionNoAnotherAsset(c.category.name),i.createElement(h.zx,{fullWidth:!0,onClick:_},Ce.notSupported.goToMarket)))});case ye.pe.SPT:return i.createElement(ue,{icon:Te.spt,title:Ce.spt.title,content:i.createElement(h.xu,{direction:"column",gap:"m"},Ce.spt.description(c.category.name),Boolean(p)&&i.createElement(h.zx,{horizontalAlign:"start",fullWidth:!0,endIcon:i.createElement(h.xv,{variant:"S Compact / Bold",color:"inherit"},p),onClick:g,"data-test":"ts-content-all-assets-btn"},Ce.selectDifferentAsset))})}}),[a,c,l,d,v,m.length,g,_,p]);return s.length&&(f||E)?i.createElement(h.xu,{direction:"column",gap:"l",padding:[0,0,"l"]},f,E):null}},89452:(e,a,s)=>{"use strict";s.d(a,{y:()=>N,k:()=>w});var i=s(27378),r=s(76232),n=s(13243),o=s(46124),l=s(6680),c=s(83714),d=s(52338),u=s(95601),m=s(46482),p=s(82844),h=s(26763),v=s(26323),g=s(7265),_=s(27634),f=s(53323),E=s(5915),S=s(40846),y=s(88114),b=s(29257),C=s(37323),T=s(64356),A=s(3121),k=s(30654);class Http{getTwoFactorAuthState(){return(0,b.Z)((function*(){const e=(0,A.Z)(yield Promise.all([k.$.userValues(["duo_auth_state"]),k.$.platformValues(["auth_messengers"])]),2),a=e[0].duo_auth_state,s=e[1].auth_messengers;return(0,T.Z)((0,C.Z)({},a),{facebook_messenger_link:s.fb_bot_link})}))()}changeTwoFactorAuth(e){return(0,b.Z)((function*(){return k.$.changeStateOfTwoFactorAuth(e)}))()}getTwoFactorAuthGoogleQrCode(){return k.$.getTwoFactorAuthQRCode()}requestConfirmPhone(e){return k.$.requestPhoneConfirmCode(e)}confirmPhone(e,a){return k.$.confirmPhone({phone:e,code:a})}getTwoFactorMethods(){return k.$.getTwoFactorMethods()}}const w=(0,r.t)(),N=(0,n.v)({name:"2FA",dependsOn:[u.u$,c.e8,g.EA,_.im],services:(e,a)=>({twoFactorAuth:new d.to(a.twoFactorAuth)})},{repositories:()=>({twoFactorAuth:new d.I2(new Http)}),publicApi:e=>e});N.use(_.cF,(e=>i.createElement(d.SN,Object.assign({},e)))).use((0,_.X1)(S.uW.TWO_FACTOR_AUTH),(()=>i.createElement(d.XZ,null))).use((0,_.VT)(S.uW.TWO_FACTOR_AUTH),(e=>{const a=(0,o.k)(w,null);return i.createElement(d.uu,Object.assign({},e,{captchaProvided:a,openByIdWithWarning:(a,s)=>{var r;(null===(r=(0,l.Sc)(y.N))||void 0===r?void 0:r.providers.find((e=>"fb"===e.id&&e.isConnected)))?(e=>{const a=(0,l.Sc)(h.NOTICE_SERVICE);null==a||a.add({id:"oAuthProvider",collectionName:f.sm.FULL_SCREEN,notice:{priority:!0},layout:a=>{let s=a.api,r=a.notice;return i.createElement(E.default,{noticeId:r.id,api:s,content:a=>{let s=a.onClose;return i.createElement(m.YV,{title:i.createElement(p._,{id:"profile_two_fa_modal_fb_warning_title",defaultMessage:"Enable Facebook Messenger 2FA"}),content:i.createElement(p._,{id:"profile_two_fa_modal_fb_warning_text",defaultMessage:"This security method will only be secure if your Facebook profile is properly protected"}),negativeButtonTitle:i.createElement(p._,{id:"cancel",defaultMessage:"Cancel"}),positiveButtonTitle:i.createElement(p._,{id:"profile_settings_two_fa_modal_warning_accept_button",defaultMessage:"Enable"}),onConfirm:()=>{e(),s()},onCancel:s})}})}})})((()=>e.onOpenById(a,s))):e.onOpenById(a,s)}}))})).use((0,_.X1)(S.uW.TWO_FACTOR_AUTH_SMS_CONNECT),(()=>i.createElement(d.q1,null))).use((0,_.VT)(S.uW.TWO_FACTOR_AUTH_SMS_CONNECT),(e=>{const a=i.useMemo((()=>(0,l.Sc)(S.Zx)),[]),s=(0,o.k)(w,null),r=i.useMemo((()=>(null==a?void 0:a.phone)||{value:"",isConfirmed:!1}),[a]),n=i.useCallback((e=>{a&&a.load({id:a.id,email:a.email,avatar:a.avatar,fullName:a.fullName,phone:{value:e,isConfirmed:!0}})}),[a]);return i.createElement(d.xp,Object.assign({excludeCountries:v.nA,phone:r,captchaProvided:s,onPhoneConfirmed:n},e))})).use((0,_.X1)(S.uW.TWO_FACTOR_AUTH_SMS_DISCONNECT),(()=>i.createElement(d.OA,null))).use((0,_.VT)(S.uW.TWO_FACTOR_AUTH_SMS_DISCONNECT),(e=>i.createElement(d.wL,Object.assign({},e)))).use((0,_.X1)(S.uW.TWO_FACTOR_AUTH_GOOGLE_CONNECT),(()=>i.createElement(d.rk,null))).use((0,_.VT)(S.uW.TWO_FACTOR_AUTH_GOOGLE_CONNECT),(e=>i.createElement(d.Y1,Object.assign({},e)))).use((0,_.X1)(S.uW.TWO_FACTOR_AUTH_GOOGLE_DISCONNECT),(()=>i.createElement(d.J,null))).use((0,_.VT)(S.uW.TWO_FACTOR_AUTH_GOOGLE_DISCONNECT),(e=>i.createElement(d.PF,Object.assign({},e)))).use((0,_.X1)(S.uW.TWO_FACTOR_AUTH_FACEBOOK_MESSENGER_CONNECT),(()=>i.createElement(d.NF,null))).use((0,_.VT)(S.uW.TWO_FACTOR_AUTH_FACEBOOK_MESSENGER_CONNECT),(e=>i.createElement(d.Ch,Object.assign({},e)))).use((0,_.X1)(S.uW.TWO_FACTOR_AUTH_FACEBOOK_MESSENGER_DISCONNECT),(()=>i.createElement(d.gC,null))).use((0,_.VT)(S.uW.TWO_FACTOR_AUTH_FACEBOOK_MESSENGER_DISCONNECT),(e=>i.createElement(d.Vv,Object.assign({},e)))).onStart((e=>{e.twoFactorAuth.load()}))},71385:(e,a,s)=>{"use strict";s.d(a,{d:()=>f});var i=s(29257),r=s(27378),n=s(13243),o=s(23735),l=s(82844),c=s(66412),d=s(71003),u=s(4093),m=s(7223);class UiScaleService extends m.t{load(){var e=this;return(0,i.Z)((function*(){const a=yield e.repository.find(),s=e.getState().scales,i=s[s.length-1];e.update({scale:a||i})}))()}handleScaleChange(e){this.update({scale:e}),this.repository.save(e),this.inputs.onScaleChange(e)}constructor(e,a){super({scales:[.8,.9,1]}),this.repository=e,this.inputs=a}}var p=s(97415),h=s(17302);const v=e=>{let a=e.service;const s=(0,p.o)(a.store),i=s.scale,n=s.scales,o=r.useCallback((e=>{a.handleScaleChange(e)}),[a]),c=(0,r.useMemo)((()=>n.map((e=>r.createElement(h.zx,{key:e,fullWidth:!0,size:"s",variant:i===e?"primary":"secondary",dataTest:"setting-interface-scale",onClick:()=>o(e)},100*e,"%")))),[o,i,n]);return r.createElement(r.Fragment,null,r.createElement(h.xv,{variant:"S / Regular",color:"contrast-beta",dataTest:"interface_scale_title"},r.createElement(l._,{id:"interface_scale",defaultMessage:"Interface scale"})),r.createElement(h.eQ,{fullWidth:!0},c))};v.displayName="UiScale";var g=s(57615),_=s(29042);class UiScaleRepository{find(){return Promise.resolve(this.storage.get("scale"))}save(e){return this.storage.set("scale",e),Promise.resolve()}constructor(){this.storage=new g._({namespace:"@feature/uiScale/UiScaleRepository",backend:new _.u})}}const f=(0,n.v)({name:"UiScale",dependsOn:[c.O,d.x],services:(e,a)=>({uiScaleService:new UiScaleService(a.uiScaleRepository,{onScaleChange(a){e.commonLegacyServiceList.uiService.setScale(a),(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"settings",eventAction:"change_scale",eventLabel:"".concat(a)})}})})},{repositories:()=>({uiScaleRepository:new UiScaleRepository}),publicApi:e=>({uiScaleService:e.uiScaleService})});var E;f.use(u.D2,((e,a,s)=>[...e,{component:r.createElement(v,{service:s.uiScaleService}),title:r.createElement(l._,{id:"interface_scale",defaultMessage:"Interface scale"})}])).onStart((E=(0,i.Z)((function*(e){return e.uiScaleService.load()})),function(e){return E.apply(this,arguments)}))},41213:(e,a,s)=>{"use strict";s.d(a,{Y:()=>n,i:()=>o});var i=s(27378),r=s(82844);const n="ent_universal_events_enabled",o={id:"events",title:i.createElement(r._,{id:"tou_events"})}},43578:(e,a,s)=>{"use strict";s.d(a,{d:()=>r});var i=s(58952);const r=(0,i.WV)({deeplink_action:(0,i.t$)("event"),id:i.Mr,join:i.ge.optional()})},46768:(e,a,s)=>{"use strict";s.d(a,{n:()=>y});var i=s(29257),r=s(24459),n=s(27378),o=s(13243),l=s(97415),c=s(59757),d=s(14282),u=s(83714),m=s(10139),p=s(61681),h=s(90569),v=s(7265),g=s(85101),_=s(86007),f=s(95212),E=s(43578),S=s(41213);const y=(0,o.v)({name:"UniversalEvents",dependsOn:[h.J,p.G,u.e8,d.F0,v.EA,g.t],services(e,a){const s=new m.bR(a.eventsListRepository,e.timeService);return{eventLeaderboard:new m.bp(a.eventLeaderboardRepository,s),eventList:s}}},{repositories:()=>({eventsListRepository:new _.X,eventLeaderboardRepository:new f.J}),publicApi:e=>({eventList:e.eventList})}),b=n.memo((e=>{var a=e.sidebarService,s=(0,r.Z)(e,["sidebarService"]);const i=n.useCallback((()=>{a.goTo(c.FL.UNIVERSAL_EVENT)}),[a]);return n.createElement(m.n3,Object.assign({},s,{onClick:i}))}));y.use(c.k7,((e,a)=>{let s=a.eventList;e.mounted&&s.load()})).use((0,c.AA)(c.FL.UNIVERSAL_EVENT),((e,a)=>{let s=a.entityUIService;const i=(0,l.o)(s.store).countries;return n.useEffect((()=>{s.loadCountries()}),[s]),n.createElement(m.pr,Object.assign({},e,{countries:i,stickyJoin:!0}))})).use(c.p7,((e,a,s)=>{let i=s.eventList,r=s.analyticsService,o=s.sidebarService;const l=i.getState().current;return 0!==l.length?[...e,...l.map(((e,a)=>({order:e.joined?a:e.dates.startingAt,content:n.createElement(b,{event:e,eventListService:i,analyticsService:r,sidebarService:o})})))]:e})).use((0,c.Xw)(S.i.id),((e,a)=>{let s=a.sidebarService;const i=n.useCallback((()=>{s.goTo(c.FL.UNIVERSAL_EVENT)}),[s]);return n.createElement(m.QQ,{onItemClick:i})})).onStart((e=>{let a=e.events,s=e.commandService,r=e.eventList,n=e.sidebarService,o=e.user,l=e.eventLeaderboard;var d;a.addCategory(S.i),s.registerCommand(E.d.guard,(d=(0,i.Z)((function*(e){yield r.load();const s=yield r.select(e.id);s&&(e.join&&!s.joined&&r.join(e.id),a.selectCategory(S.i.id),"ended"===s.status&&n.goTo(c.FL.EVENTS_HISTORY),n.goTo(c.FL.UNIVERSAL_EVENT))})),function(e){return d.apply(this,arguments)})),o.subscribe((e=>l.setCurrUserId(e.user.id))),l.setCurrUserId(o.store.getState().user.id)})).enable((e=>e.politics.isEnabled(S.Y)))},72754:(e,a,s)=>{"use strict";s.d(a,{J:()=>EventLeaderboardRepository});var i=s(29257),r=s(39211);class EventLeaderboardRepository{find(e){return(0,i.Z)((function*(){const a=yield r.g.getEventLeaderboard({event_id:e}),s=a.prize_fund.map((e=>new Array(e.to+1-e.from).fill(e.prize))).flat();return{users:a.leaderboard.map(((e,a)=>({avatar:e.avatar,country:e.country,name:e.name,points:e.points,position:e.position,id:e.user_id,prize:s[a]}))),header:{name:a.meta.name,nameTooltip:a.meta.name_tooltip,value:a.meta.value,valueTooltip:a.meta.value_tooltip},settings:{showAratars:a.settings.show_avatars,showPosition:a.settings.show_position}}}))()}}},95212:(e,a,s)=>{"use strict";s.d(a,{J:()=>i.J});var i=s(72754)},63511:(e,a,s)=>{"use strict";s.d(a,{X:()=>EventsListRepository});var i=s(29257),r=s(22128),n=s(39211),o=s(79482);class EventsListRepository{findAll(){return(0,i.Z)((function*(){var e;return(null!==(e=(yield n.g.getEventsList()).events)&&void 0!==e?e:[]).map((e=>o.W.parse(e)))}))()}join(e){return(0,i.Z)((function*(){try{yield n.g.eventsJoin({event_id:e})}catch(e){if(e instanceof r.P)return{message:e.meta.msg}}}))()}}},1134:(e,a,s)=>{"use strict";s(72255),s(90117)},86007:(e,a,s)=>{"use strict";s.d(a,{X:()=>i.X});var i=s(63511);s(1134)},79482:(e,a,s)=>{"use strict";s.d(a,{W:()=>EventsTransformer});var i=s(37323),r=s(64356);class EventsTransformer{static parse(e){var a;return{id:e.id,status:"announced",dates:{startingAt:e.date_start,endingAt:e.date_end},meta:{title:e.title,description:e.description,widgetColor:e.widget_color,widgetImage:e.widget_image,headerImage:e.header_image},storyNames:e.story_names,slider:(null!==(a=e.slider)&&void 0!==a?a:[]).map(((e,a)=>EventsTransformer.parseSliderItem(e,a))).filter((e=>null!==e)),joined:e.joined,hasLeaderboard:e.has_leaderboard}}static parseSliderItem(e,a){const s={id:"".concat(a),title:String(e.title)};switch(e.type){case"number":return(0,r.Z)((0,i.Z)({},s),{type:"number",value:Number(e.value)});case"string":return(0,r.Z)((0,i.Z)({},s),{type:"string",value:String(e.value)});case"currency":return(0,r.Z)((0,i.Z)({},s),{type:"currency",currency:e.currency,value:Number(e.value)});case"percent":return(0,r.Z)((0,i.Z)({},s),{type:"percent",value:Number(e.value)})}return null}}},58287:(e,a,s)=>{"use strict";s.d(a,{S:()=>l});var i=s(29257),r=s(98159);const n=(o=(0,i.Z)((function*(e){var a,s;const i=null===(a=e.user)||void 0===a?void 0:a.getState().user,n=(yield null===(s=e.locale)||void 0===s?void 0:s.getLocale())||"en_US";r.B.update({country:(null==i?void 0:i.registrationCountry.toLocaleLowerCase())||"",lang:n.split("_")[0]||"en",locale:n||null,id:(null==i?void 0:i.id)||null,email:(null==i?void 0:i.email)||null,restrictions:{payIn:null==i?void 0:i.restrictions.payIn,payOut:null==i?void 0:i.restrictions.payOut,supportChat:null==i?void 0:i.restrictions.supportChat}})})),function(e){return o.apply(this,arguments)});var o;const l=e=>{var a,s;const i=null===(a=e.user)||void 0===a?void 0:a.subscribe((()=>n(e))),r=null===(s=e.locale)||void 0===s?void 0:s.subscribe((()=>n(e)));return()=>{null==i||i(),null==r||r()}}},7265:(e,a,s)=>{"use strict";s.d(a,{EA:()=>E,Yl:()=>p.Y});var i=s(29257),r=s(27378),n=s(13243),o=s(95601),l=s(86321),c=s(13954),d=s(34007),u=s(77605),m=s(2785),p=s(17891),h=s(12831),v=s(29071),g=s(67554),_=s(27650),f=s(58287);s(50617);const E=(0,n.v)({name:"User",dependsOn:[o.u$],optionalDependsOn:[c.j],services:(e,a)=>{let s=a.politics,i=a.userOptions,r=a.user;return{authentication:new p.$(r),politics:new h.a(s),userOptions:new v.S(i),user:new g.K(r)}}},{repositories:()=>({politics:new u.A,userOptions:new m.d,user:new d.j}),publicApi:e=>({politics:e.politics,userOptions:e.userOptions,user:e.user,authentication:e.authentication})});var S;E.use(l.LJ,(()=>r.createElement(_.G,null))).onStart((S=(0,i.Z)((function*(e){(0,f.S)({user:e.user,locale:e.locale}),yield Promise.all([e.politics.loadPolitics(),e.user.authenticate(),e.userOptions.loadUserOptions()])})),function(e){return S.apply(this,arguments)}))},50617:(e,a,s)=>{"use strict";s.d(a,{E:()=>o,n:()=>l});var i=s(37323),r=s(64356);const n={payin:"payIn",payout:"payOut",fx_deals:"dealsFx",bo_deals:"dealsFtt",support_chat:"supportChat",marketplace_purchase:"marketplacePurchase"},o=Object.values(n).reduce(((e,a)=>(0,r.Z)((0,i.Z)({},e),{[a]:{restricted:!1}})),{}),l=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return e.reduce(((e,a)=>{let s=a.operation,i=a.status;const r=n[s];return r&&(e[r]={restricted:2===i}),e}),a)}},77605:(e,a,s)=>{"use strict";s.d(a,{A:()=>PoliticsRepository});var i=s(29257),r=s(30654);class PoliticsRepository{findAll(){return(0,i.Z)((function*(){const e=(yield r.$.userValues(["politics"])).politics;return Object.entries(e)}))()}}},2785:(e,a,s)=>{"use strict";s.d(a,{d:()=>UserOptionsRepository});var i=s(29257),r=s(30654);class UserOptionsRepository{findAll(){return(0,i.Z)((function*(){const e=(yield r.$.userValues(["options"])).options;return Object.entries(e)}))()}save(e){return(0,i.Z)((function*(){return r.$.setUserOption(e)}))()}}},34007:(e,a,s)=>{"use strict";s.d(a,{j:()=>UserRepository});var i=s(29257),r=s(23934),n=s(62981),o=s(62132),l=s(30654),c=s(27413),d=s(32121),u=s(50617);class UserRepository{find(){return(0,i.Z)((function*(){const e=yield l.$.userValues(["data","restrictions"]),a=(0,u.n)(e.restrictions);return{id:e.data.id,registrationCountry:e.data.registration_country,name:e.data.name,restrictions:a,isIslamic:!0===e.data.is_islamic,email:e.data.email}}))()}save(e){return e.isIslamic?l.$.changeIslamicOption({is_islamic:e.isIslamic}):Promise.resolve()}subscribeUnauthorized(e){return l.$.caughtErrors.forEach((a=>{"status"in a&&401===a.status&&e()})),this.emitter.on("logout",e),()=>this.emitter.off("logout",e)}logOut(){var e=this;return(0,i.Z)((function*(){try{const a=yield(0,d.O)();yield l.$.logout({hardwareId:a}),e.emitter.all.clear(),yield l.$.dispose(),yield c.h.dispose(),yield o.W.close({force:!0})}catch(e){return void console.error(e)}}))()}constructor(){this.emitter=(0,r.Z)(),l.$.events.on("error",(e=>{"status"in e&&401===e.status&&this.emitter.emit("logout")})),o.W.on("close",(e=>{e.code===n._.userLogout&&this.emitter.emit("logout")})),o.W.subscribe.restrictionsChange((e=>{this.emitter.emit("restrictionsChange",e)}))}}},17891:(e,a,s)=>{"use strict";s.d(a,{$:()=>AuthenticationService,Y:()=>c});var i=s(29257),r=s(29229),n=s(7223),o=s(72124),l=s(38702);const c=(0,r.S)();class AuthenticationService extends n.t{handleLogout(e){return this.logoutHandlers.add(e),()=>{this.logoutHandlers.delete(e)}}logOut(){var e=this;return(0,i.Z)((function*(){yield e.userRepository.logOut(),yield e.callLogoutHandlers(),e.applySideEffect(c,{}),(0,l.YY)(),window.location.replace("/home")}))()}callLogoutHandlers(){var e=this;return(0,i.Z)((function*(){try{yield Promise.all(Array.from(e.logoutHandlers).map((e=>e())))}catch(e){}}))()}constructor(e){super(),this.userRepository=e,this.logoutHandlers=new Set;var a=this;e.subscribeUnauthorized((0,i.Z)((function*(){yield a.callLogoutHandlers(),a.applySideEffect(c,{}),(0,l.YY)(),window.location.href=(0,o.stringifyUrl)({url:"/auth".concat(window.location.hash),query:{redirect_url:window.location.href}})})))}}},12831:(e,a,s)=>{"use strict";s.d(a,{a:()=>PoliticsService});var i=s(29257),r=s(7223);class PoliticsService extends r.t{loadPolitics(){var e=this;return(0,i.Z)((function*(){const a=yield e.repository.findAll();e.update({politics:Object.fromEntries(a)})}))()}getPolitic(e){return this.getState().politics[e]}isEnabled(e){return!!this.getPolitic(e)}constructor(e){super({politics:{}}),this.repository=e}}},29071:(e,a,s)=>{"use strict";s.d(a,{S:()=>UserOptionsService});var i=s(29257),r=s(7223);class UserOptionsService extends r.t{loadUserOptions(){var e=this;return(0,i.Z)((function*(){const a=yield e.repository.findAll();e.update({options:Object.fromEntries(a)})}))()}getUserOption(e){return this.getState().options[e]}setUserOption(e,a){return this.repository.save({name:e,value:a})}constructor(e){super({options:{}}),this.repository=e}}},67554:(e,a,s)=>{"use strict";s.d(a,{K:()=>UserService});var i=s(29257),r=s(37323),n=s(64356),o=s(7223),l=s(98159),c=s(50617);class UserService extends o.t{saveUserData(e){this.repository.save(e)}getCountry(){return this.getState().user.registrationCountry}getName(){return this.getState().user.name}getRestrictions(){return this.getState().user.restrictions}constructor(e){super({user:{id:0,name:"",email:"",registrationCountry:"",restrictions:(0,r.Z)({},c.E)}}),this.repository=e;var a=this;this.authenticate=this.createTask((0,i.Z)((function*(){const e=yield a.repository.find();a.update({user:e})})),{strategy:o.T.once}),e.emitter.on("restrictionsChange",(e=>{const a=(0,c.n)(e,this.getRestrictions()),s=this.getState();this.update({user:(0,n.Z)((0,r.Z)({},s.user),{restrictions:a})}),l.B.update({restrictions:{payIn:a.payIn,payOut:a.payOut,supportChat:a.supportChat}})}))}}},27650:(e,a,s)=>{"use strict";s.d(a,{G:()=>_});var i=s(29257),r=s(27378),n=s(63967),o=s(6680),l=s(82844),c=s(17302),d=s(77740),u=s(23735),m=s(26763),p=s(5915),h=s(53323),v=s(17891),g=s(89190);const _=r.memo((()=>{const e=(0,n.G)(v.$),a=r.useMemo((()=>(0,o.Sc)(m.NOTICE_SERVICE)),[]),s=r.useCallback((0,i.Z)((function*(){return(0,u.L)({event:"logout",eventCategory:"logout",eventAction:"logout",eventLabel:"logout"}),e.logOut()})),[e]),_=r.useCallback((()=>{null==a||a.add({id:"logOut",collectionName:h.sm.FULL_SCREEN,layout:e=>{let a=e.api,i=e.notice;return r.createElement(p.default,{noticeId:i.id,api:a,content:e=>{let a=e.onClose;return r.createElement(g.v,{onCancel:a,onConfirm:s})}})},notice:{priority:!0}}),(0,u.L)({event:"uaGtmEvents_clicks",eventCategory:"logout_form",eventAction:"open",eventLabel:"from_profile"})}),[a,s]);return r.createElement(c.zx,{color:"negative",variant:"secondary",fullWidth:!0,onClick:_,startIcon:r.createElement(d.gtU,null),dataTest:"pro-p-root-c-log-out"},r.createElement(l._,{id:"pro_log_out",defaultMessage:"Log out"}))}))},89927:(e,a,s)=>{"use strict";s.d(a,{v:()=>d});var i=s(3121),r=s(27378),n=s(82844),o=s(17302),l=s(23735),c=s(11303);const d=e=>{let a=e.onCancel,s=e.onConfirm;const d=(0,i.Z)(r.useState(!1),2),u=d[0],m=d[1],p=r.useCallback((()=>{(0,l.L)({event:"uaGtmEvents_clicks",eventCategory:"logout_form",eventAction:"cancel",eventLabel:"logout"}),a()}),[a]),h=r.useCallback((()=>{u||(m(!0),s().finally((()=>m(!1))))}),[u,s]);return r.createElement(c.V,{text:r.createElement(n._,{id:"pro_dialog_log_out_description",defaultMessage:"Are you sure you want to log out?"}),footer:r.createElement(r.Fragment,null,r.createElement(o.zx,{variant:"secondary",fullWidth:!0,onClick:p,dataTest:"pro-d-log-out-cancel"},r.createElement(n._,{id:"pro_dialog_log_out_cancel",defaultMessage:"Cancel"})),r.createElement(o.zx,{fullWidth:!0,color:"negative",onClick:h,dataTest:"pro-d-log-out-confirm",loading:u},r.createElement(n._,{id:"pro_dialog_log_out_confirm",defaultMessage:"Log out"})))})}},11303:(e,a,s)=>{"use strict";s.d(a,{V:()=>l});var i=s(27378),r=s(60042),n=s.n(r),o=s(41485);const l=e=>{let a=e.text,s=e.footer,r=e.className;return i.createElement("div",{className:n()(o.Z.host,r)},i.createElement("div",{className:o.Z.container},i.createElement("div",{className:o.Z.content},a)),i.createElement("div",{className:o.Z.footer},s))}},89190:(e,a,s)=>{"use strict";s.d(a,{v:()=>i.v});var i=s(89927)},19200:(e,a,s)=>{"use strict";s.d(a,{X:()=>n});var i=s(27378),r=s(24892);const n=()=>i.createElement("svg",{className:r.Z.host,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},i.createElement("circle",{cx:"26",cy:"26",r:"25",fill:"none"}),i.createElement("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"}))},16657:(e,a,s)=>{"use strict";s.d(a,{c:()=>l});var i=s(27378),r=s(77740),n=s(88875),o=s(19200);const l={Alert:r.az_,Refresh:r.QHu,Complete:o.X,Arrow:()=>i.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16"},i.createElement("path",{d:"M9 1a1 1 0 00-1 1l5 5H2a1 1 0 000 2h11l-5 5a1 1 0 001 1l8-7-8-7z",fill:"currentColor"})),RightArrow:r.Ec8,Alarm:r.az_,Wallet:r.nr$,ArrowLongRight:()=>i.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M3 8a1 1 0 011-1h8a1 1 0 110 2H4a1 1 0 01-1-1z",fill:"currentColor"}),i.createElement("rect",{x:"9.097",y:"3.404",width:"6.5",height:"2",rx:"1",transform:"rotate(45 9.097 3.404)",fill:"currentColor"}),i.createElement("rect",{x:"7.682",y:"11.182",width:"6.5",height:"2",rx:"1",transform:"rotate(-45 7.682 11.182)",fill:"currentColor"})),Help:r.T08,Loader:n.a}},20175:(e,a,s)=>{"use strict";s.d(a,{Nr:()=>m.Nr,Tz:()=>v,l1:()=>m.l1});var i=s(37323),r=s(64356),n=s(54289),o=s(93134),l=s(27378),c=s(59343),d=s(74199),u=s(16657),m=s(79338),p=s(33139);s(30237);const h=(0,l.memo)((e=>{let a=e.isWebView,i=e.service;const r=a?()=>null:(0,l.lazy)((()=>s.e(2850).then(s.bind(s,42850))));return l.createElement(l.Suspense,{fallback:null},l.createElement(r,{service:i}))})),v=e=>{let a=e.isWebView;const s=()=>n.al.turnOffFeature(),v=(0,n.ac)((0,r.Z)((0,i.Z)({},m.tV),{isWebView:a,webViewCloseHandler:()=>location.assign("/platform"),icons:u.c,translations:p.I})).screens,g=new d.Ku({accountTransfers:{rootId:n.VS.MAIN,items:v}});return{Layout:()=>{const e=(0,c.V)(),i=(0,l.useMemo)((()=>e?"rtl":"ltr"),[e]);return l.createElement("div",{className:"account-transfers-sidebar"},l.createElement(o.f6,{dir:i},l.createElement(h,{isWebView:a,service:g}),l.createElement(d.s_,{type:a?"none":"detached",animation:"right",panelService:g,onClose:s,className:"account-transfers ".concat(a?"web-view":""),isStandalone:a,dir:i,preserveScrollPosition:!1})))},open:e=>{n.al.launch(e),g.openById(n.VS.MAIN)},close:s}}},33139:(e,a,s)=>{"use strict";s.d(a,{I:()=>n});var i=s(27378),r=s(82844);const n={technical_error:i.createElement(r._,{id:"technical_error",defaultMessage:"Technical error"}),account_transfers_temporary_unavailable:i.createElement(r._,{id:"account_transfers_temporary_unavailable",defaultMessage:"Transfers between accounts are temporarily unavailable"}),refresh:i.createElement(r._,{id:"refresh",defaultMessage:"Refresh"}),bonus:i.createElement(r._,{id:"cabinet_bonus",defaultMessage:"Bonus"}),to:i.createElement(r._,{id:"to",defaultMessage:"To"}),where_from:i.createElement(r._,{id:"where_from",defaultMessage:"From"}),close:i.createElement(r._,{id:"close",defaultMessage:"Close"}),own_funds:i.createElement(r._,{id:"own_funds",defaultMessage:"Own funds"}),conversion_rate:i.createElement(r._,{id:"conversion_rate",defaultMessage:"Rate"}),transfer_completed:i.createElement(r._,{id:"transfer_completed",defaultMessage:"Transfer completed"}),transfer:i.createElement(r._,{id:"transfer",defaultMessage:"Transfer"}),bonuses_recalculation_explanation:i.createElement(r._,{id:"bonuses_recalculation_explanation",defaultMessage:"When you transfer your balance, bonus funds don't expire. They are instead re-calculated and transferred proportionally to the amount you're sending."}),transfer_between_these_accs_not_possible:i.createElement(r._,{id:"transfer_between_these_accs_not_possible",defaultMessage:"Transfer between these accounts is not possible."}),instant_money_transfer:i.createElement(r._,{id:"instant_money_transfer",defaultMessage:"Instant money transfer"}),not_enough_funds:i.createElement(r._,{id:"mp_not_enough_funds",defaultMessage:"Not enough funds"}),not_enough_accounts:i.createElement(r._,{id:"account_transfers_not_enough_accounts",defaultMessage:"Transfers between accounts are not available. You must have at least two live accounts."}),select_account:i.createElement(r._,{id:"select_account",defaultMessage:"Select the account"}),transferable_bonuses:i.createElement(r._,{id:"transferable_bonuses",defaultMessage:"Transferable bonuses"}),minLimitError:e=>i.createElement(r._,{id:"minimum_transfer_amount",defaultMessage:"Minimum transfer amount: {amount}",values:{amount:e}}),makeInputLabel:e=>i.createElement(r._,{id:"amount_with_currency",defaultMessage:"Amount, {currency}",values:{currency:e.toUpperCase()}}),makeTransferButtonText:e=>i.createElement(r._,{id:"transfer_amount",defaultMessage:"Transfer {amount}",values:{amount:e}}),makeFromTitle:e=>i.createElement(r._,{id:"from_account",defaultMessage:"From: {account}",values:{account:e}}),makeToTitle:e=>i.createElement(r._,{id:"to_account",defaultMessage:"To: {account}",values:{account:e}})}},79338:(e,a,s)=>{"use strict";s.d(a,{Nr:()=>p,l1:()=>m,tV:()=>d});var i=s(58952),r=s(54289),n=s(66713),o=s(86933),l=s(71978),c=s(46122);const d={accountsFetcher:()=>l.Z.post("/transfers/account-list",{data:{},version:"v1",project:n.Fw.OTP}),calculationFetcher:e=>l.Z.post("/transfers/calculate",{data:e,version:"v1",project:n.Fw.OTP}),makeErrorReporter:e=>{let a=e.tags;return e=>{let s=e.id,i=e.error,r=e.level;c.b.sendEvent(i,r,s,void 0,a)}},transferFetcher:e=>l.Z.post("/transfers/process",{data:e,version:"v1",project:n.Fw.OTP})},u=(0,i.mJ)((0,i.WV)({account_id:i.Mr,amount:i.Mr,amount_free:i.Mr,amount_real:i.Mr,amount_bonus:i.Mr,amount_bonus_free:i.Mr})),m=function(e,a){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s&&e===o.mi.BALANCE_CHANGE&&u.guard(a)&&a.forEach((e=>{let a=e.account_id,s=e.amount_bonus_free,i=e.amount_real;r.al.syncAvailableAmount({accountId:a,amount:i}),r.al.syncAvailableBonus({accountId:a,bonus:s})}))},p=function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&[o.mi.BALANCE_ACCOUNT_CREATED,o.mi.BALANCE_ACCOUNT_CLOSED,o.mi.BALANCE_ACCOUNT_UPDATED].includes(e)&&r.al.fetchList()}},77554:(e,a,s)=>{"use strict";s.d(a,{Bf:()=>o,Nr:()=>i.Nr,d2:()=>n,l1:()=>i.l1});var i=s(20175),r=(0,i.Tz)({isWebView:!1});const n=r.Layout,o=r.open;var l=(0,i.Tz)({isWebView:!0});l.Layout,l.open},43701:(e,a,s)=>{"use strict";s.d(a,{D:()=>n,v:()=>r.v});var i=s(44275),r=s(11013);const n=(0,i.R)({name:"payment_action"})},11013:(e,a,s)=>{"use strict";s.d(a,{v:()=>o});var i=s(37323),r=s(83128),n=s(14305);const o=(0,n.ub)({effect:(0,n.GW)(r.KK.sendAnalytics),source:r.$p,mapParams:(e,a)=>{let s=e.eventId,r=e.data;var n,o;return{eventId:s,data:(0,i.Z)({ps_system:null===(n=a.psp)||void 0===n?void 0:n.aggregatorName,ps_type:null===(o=a.psp)||void 0===o?void 0:o.name,amount:a.amount.payment},r)}}})},38516:(e,a,s)=>{"use strict";s.d(a,{v:()=>r});var i=s(39211);const r=e=>{i.g.activatePromoCode({code:e})}},15078:(e,a,s)=>{"use strict";s.d(a,{P:()=>o});var i=s(29257),r=s(39211);const n={status:"invalid",statusMessage:"code not found"},o=(l=(0,i.Z)((function*(e){let a=e.code,s=e.noshelf;return r.g.getPromoCodeInfo({code:a,account_id:0,noshelf:s}).then((e=>e||n)).catch((()=>n))})),function(e){return l.apply(this,arguments)});var l},99320:(e,a,s)=>{"use strict";s.d(a,{j:()=>r});var i=s(30654);const r=()=>i.$.userValues(["promo"])},79945:(e,a,s)=>{"use strict";s.d(a,{f:()=>l});var i=s(29257),r=s(66713),n=s(71978);const o={deals:{},min_payment_amount:0},l=(c=(0,i.Z)((function*(e){let a=e.amounts,s=e.code,i=e.accountId;return n.Z.post("/cabinet/risk-free-payment-info",{data:{amount:a,bonus_code:"DEFAULT"!==s?s:"",account_id:i},version:"v1",project:r.yy}).then((e=>e||o)).catch((()=>o))})),function(e){return c.apply(this,arguments)});var c},57734:(e,a,s)=>{"use strict";s.d(a,{P8:()=>i.P,f1:()=>r.f,jm:()=>n.j,v:()=>o.v});var i=s(15078),r=s(79945),n=s(99320),o=s(38516)},5939:(e,a,s)=>{"use strict";s.d(a,{Z:()=>n});var i=s(27378),r=s(56694);const n=()=>i.createElement("img",{src:r,alt:"no_code",width:"96",height:"96",loading:"lazy"})},62601:(e,a,s)=>{"use strict";s(27378),s(94051)},19395:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i.Z});s(62601);var i=s(5939)},21016:(e,a,s)=>{"use strict";s.d(a,{FB:()=>v,Ux:()=>S,Yc:()=>_,fU:()=>f,gB:()=>E,xs:()=>g});var i=s(27378),r=s(1347),n=s(17302),o=s(77740),l=s(33479),c=s(43701),d=s(57734),u=s(92013),m=s(19395),p=(0,r.UY)({translations:u.I,icons:{advanced:()=>i.createElement(o.TA1,{"data-test":"level_advanced-icon"}),bonus:o.Lmt,expert:()=>i.createElement(o.tps,{"data-test":"level_expert-icon"}),riskFree:()=>i.createElement(o.rF,{"data-test":"risk_free-icon",color:"var(--accent-alpha)"}),tooltip:()=>i.createElement(o.T08,{color:"var(--contrast-beta)"}),noCode:m.Z,phone:o.S9Z,email:o.haR,check:o.NOm,spinner:n.$j,Trash:()=>i.createElement(o.IT9,{color:"var(--contrast-beta)"}),IconClose:o.bMz},transport:{riskFree:d.f1,codeInfo:d.P8,analyticsSender:c.D,crashReportsSender:l.i}}),h=p.widgets;const v=p.screens,g=h.GoShowcaseButtonWidget,_=h.BenefitsWidget,f=h.IconsWidget,E=h.WelcomeOfferWidget,S=p.callbacks.bootstrap},92013:(e,a,s)=>{"use strict";s.d(a,{I:()=>n});var i=s(27378),r=s(82844);const n={reward_expiration:e=>{let a=e.date;return i.createElement(r._,{id:"until_date",defaultMessage:"Until {date}",values:{date:a}})},get_prize:i.createElement(r._,{id:"get_prize",defaultMessage:"Get prize"}),your_prize:i.createElement(r._,{id:"your_prize",defaultMessage:"Your prize"}),promo_codes:i.createElement(r._,{id:"promo_codes",defaultMessage:"Promo Codes"}),benefits_label:i.createElement(r._,{id:"cabinet_bonus",defaultMessage:"Bonus"}),risk_free_info:e=>{let a=e.amount;return i.createElement(r._,{id:"risk_free_deals_in_amount",defaultMessage:"Risk-Free for {amount}",values:{amount:a}})},risk_free_tooltip:i.createElement(r._,{id:"risk_free_trades_description",defaultMessage:"Trades with no risk of losing money. If the prediction proves wrong, we’ll return the full trade amount to your account."}),levels_tooltip:i.createElement(r._,{id:"level_status_info",defaultMessage:"This is a set of instruments for comfortable and profitable trading. The larger the deposit, the higher the status."}),level_info:i.createElement(r._,{id:"level_status_title",defaultMessage:"Level Status"}),bonus_tooltip:i.createElement(r._,{id:"cabinet_payout_bonus_withdrawal",defaultMessage:"You cannot withdraw bonuses, but you can use them for trading and to withdraw profit."}),bonuses_info:i.createElement(r._,{id:"bonuses_to_account",defaultMessage:"Bonuses as a gift"}),conditions_not_met:i.createElement(r.g,{id:"promo_code_conditions_not_met",defaultMessage:'<span class="c">Conditions</span>for the validity of promo code not met'}),loot_box_screen_title:i.createElement(r._,{id:"loot_box_lunar22_title",defaultMessage:"Loot Box"}),loot_box_description:i.createElement(r._,{id:"loot_box_description",defaultMessage:"Let's see what you come across today! Know that inside there is a promo code for a bonus up to 70% to the deposit"}),no_promo_code:i.createElement(r._,{id:"no_promo_code",defaultMessage:"Promo Codes are Finished"}),loot_box_try_again:i.createElement(r._,{id:"no_promo_code_good_luck",defaultMessage:"Promo codes are finished. Better luck next time."}),close:i.createElement(r._,{id:"close",defaultMessage:"Close"}),enter_promo_code_screen_title:i.createElement(r._,{id:"cabinet_promo-code",defaultMessage:"Enter the promo-code"}),enter_promo_code_placeholder:i.createElement(r._,{id:"enter_your_promo_code",defaultMessage:"Enter your promo code"}),check_promo_code:i.createElement(r._,{id:"check_promo_code",defaultMessage:"Check promo code"}),field_is_empty:i.createElement(r._,{id:"field_is_empty",defaultMessage:"The field is blank"}),confirmation_screen_title:i.createElement(r._,{id:"bonus_code_title",defaultMessage:"Promo code"}),cancel_promo:i.createElement(r._,{id:"cancel_promo",defaultMessage:"Cancel promo code"}),activate:i.createElement(r._,{id:"activate",defaultMessage:"Activate"}),promo_code:i.createElement(r._,{id:"promo_code",defaultMessage:"Promo code"}),showcase_screen_title:i.createElement(r._,{id:"bonuses_and_promo_codes",defaultMessage:"Bonuses and promo codes"}),promo_code_showcase_description:i.createElement(r.g,{id:"promo_code_showcase_description",defaultMessage:"Here you'll find new, attractive offers and available bonuses."}),enter_promo_code:i.createElement(r._,{id:"enter_promo_code",defaultMessage:"Enter promo code"}),applied:i.createElement(r._,{id:"applied",defaultMessage:"Applied"}),open:i.createElement(r._,{id:"open",defaultMessage:"Open"}),email:i.createElement(r._,{id:"pro_settings_security_level_email",defaultMessage:"Confirm email"}),twoFactor:i.createElement(r._,{id:"welcome_offer_two_fa_not_enabled",defaultMessage:"Enable two-factor authentication"}),welcome_offer_title:i.createElement(r._,{id:"profile_settings_security_banner_title",defaultMessage:"Enhance your account security"}),welcome_offer_description:i.createElement(r._,{id:"profile_settings_security_banner_description",defaultMessage:"Add extra protection to your account and get a {percent} deposit bonus",values:{percent:50}}),get_offer:i.createElement(r._,{id:"get_offer",defaultMessage:"Get offer"}),TimerPattern:e=>{let a=e.days,s=e.hours,n=e.minutes;return i.createElement(r._,{id:"day_hour_min_timer",defaultMessage:"{days} d {hours} h {minutes} m",values:{days:a,hours:s,minutes:n}})},days_plurals:{one:i.createElement(r._,{id:"days_one",defaultMessage:"day"}),other:i.createElement(r._,{id:"days_other",defaultMessage:"days"}),many:i.createElement(r._,{id:"days_many",defaultMessage:"days"})}}},34338:(e,a,s)=>{"use strict";s.d(a,{E:()=>n});var i=s(83128),r=s(1347);const n=e=>{let a=e.customScreenId;return"string"==typeof(s=a)&&[i.H0.MAIN,i.H0.PSP_SELECT,r.Mm.SHOWCASE,r.Mm.ENTER_PROMO_CODE].includes(s)?a:i.H0.MAIN;var s}},72735:(e,a,s)=>{"use strict";s.d(a,{gG:()=>d,m6:()=>u,rq:()=>m});var i=s(83128),r=s(44441),n=s(68230),o=s(34338),l=s(74594),c=s(14305);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.amount,s=e.promoCode,i=e.origin,r=e.psp,c=e.accountId,d=e.screenId,u=e.isWebView;n.X.reset(),n.X.openById((0,o.E)({customScreenId:d})),(0,l.u)({accountId:c,amount:a,origin:i,promoCode:s,psp:r,isWebView:u})},u=()=>{n.X.close(),(0,r.x8)()},m=(0,c.ub)({effect:(0,c.GW)((e=>{e&&n.X.openById(i.H0.MAIN)})),source:i.$p,mapParams:(e,a)=>a.isReady})},74594:(e,a,s)=>{"use strict";s.d(a,{u:()=>h});var i=s(29257),r=s(37323),n=s(64356),o=s(87137),l=s(51649),c=s(1347),d=s(83128),u=s(14305);const m=(0,u.GW)((p=(0,i.Z)((function*(e){let a=e.account,s=e.amount,i=e.origin,r=e.promoCode,n=e.psp,o=e.isWebView;const u=(yield d.KK.launch({amount:s,origin:i,paymentSystem:n,account:a,isWebView:o})).account;(0,l.kK)(u)||(yield c.Ow.launch({promoCode:r,account:u}))})),function(e){return p.apply(this,arguments)}));var p;const h=(0,u.ub)({effect:(0,u.GW)(function(){var e=(0,i.Z)((function*(e){if((0,l.kK)(e.account))return yield new Promise((e=>setTimeout(e,300))),void h(e);m(e)}));return function(a){return e.apply(this,arguments)}}()),source:o.Jw,mapParams:(e,a)=>{var s,i,o;const l=null!==(o=null!==(i=null!==(s=null==e?void 0:e.accountId)&&void 0!==s?s:a.selectedId)&&void 0!==i?i:a.list[0].id)&&void 0!==o?o:null,c=a.list.find((e=>e.id===l));return(0,n.Z)((0,r.Z)({},e),{account:c})}})},68230:(e,a,s)=>{"use strict";s.d(a,{X:()=>d});var i=s(83128),r=s(1347),n=s(74199),o=s(18764),l=s(21016);const c={recharge:{rootId:i.H0.MAIN,items:[...o.u,...Object.values(l.FB)]}},d=new n.Ku(c);d.onStackChange(((e,a)=>{a!==r.Mm.CONFIRMATION&&r.Ow.resetPreselectedCoupon()})),r.U3.onApplyCoupon.watch((()=>d.openById(i.H0.MAIN)))},18764:(e,a,s)=>{"use strict";s.d(a,{Q:()=>r,u:()=>n});var i=s(20869);const r=i.y.initScreensSwitcher,n=i.y.screensConfigs},94167:(e,a,s)=>{"use strict";s.d(a,{y:()=>l});var i=s(27378),r=s(8141),n=s(82844),o=s(74199);const l=()=>i.createElement(o.V9,{className:"cor-w-panel-c-header__center-inner rsb-default-header",dir:(0,r.L)()},i.createElement(o.pY,{size:"medium",isClipped:!0},i.createElement(n._,{id:"cabinet_tab_recharge",defaultMessage:"Deposit"})))},70893:(e,a,s)=>{"use strict";s.d(a,{q:()=>d});var i=s(29257),r=s(66713),n=s(71978);const o=(0,s(18803).vl)().origin,l=Array.isArray(o)?void 0:o;var c;const d={requestFn:(c=(0,i.Z)((function*(e){let a=e.url,s=e.version,i=e.data;try{return{data:yield n.Z.post(a,{version:s,project:r.yy,data:i})}}catch(e){return e}})),function(e){return c.apply(this,arguments)}),searchParameters:"?origin=".concat(l||"direct"),processingNewTabURL:"/billing/processing"}},83211:(e,a,s)=>{"use strict";s.d(a,{y:()=>v});var i=s(29257),r=s(83128),n=s(43701),o=s(33479),l=s(70893),c=s(66318),d=s(94167),u=s(39148),m=s(96254),p=s(82797),h=s(39211);const v=(0,r.Tk)({maintenanceStatusFetcher:(0,i.Z)((function*(){const e=(yield h.g.getPaymentStatus({names:["deposit"]})).statuses;return{value:!e.deposit.available,meta:e.deposit.meta}})),defaultHeader:d.y,formSubmitParameters:l.q,analyticsSender:n.D,makeErrorReporter:o.i,unsubscribeMethod:c.u,translations:p.I,paymentSystemsFetcher:m.V,icons:u.c})},39148:(e,a,s)=>{"use strict";s.d(a,{c:()=>o});var i=s(77740),r=s(17302),n=s(27378);const o={Footer:i._V1,ScreenLoader:()=>n.createElement(r.$j,{size:"s"}),Trash:i.IT9,Close:i.bMz,Alert:i.az_,Check:i.NOm,ArrowRight:i.Ec8,ArrowLeft:i.D6v,Video:i.OiJ}},20869:(e,a,s)=>{"use strict";s.d(a,{y:()=>i.y});var i=s(83211)},96254:(e,a,s)=>{"use strict";s.d(a,{V:()=>r});var i=s(30654);const r=e=>i.$.getBillingPaymentSystems(e)},82797:(e,a,s)=>{"use strict";s.d(a,{I:()=>c});var i=s(82844),r=s(27378),n=s(63691),o=s(92276),l=s(12523);const c={all:r.createElement(i._,{id:"group_all",defaultMessage:"All"}),amount_screen_title:r.createElement(i._,{id:"recharge_cabinet_way_to_sum",defaultMessage:"Select a payment amount"}),cancel:r.createElement(i._,{id:"cancel",defaultMessage:"Cancel"}),confirm:r.createElement(i._,{id:"confirm",defaultMessage:"Confirm"}),confirm_payment:r.createElement(i._,{id:"confirm",defaultMessage:"Confirm"}),confirm_screen_title:r.createElement(i._,{id:"confirm_payment",defaultMessage:"Confirm Payment"}),crediting_time:r.createElement(i._,{id:"crediting_time",defaultMessage:"Crediting Time"}),currency:r.createElement(i._,{id:"currency",defaultMessage:"Currency"}),delete:r.createElement(i._,{id:"remove",defaultMessage:"Delete"}),deposit_amount:r.createElement(i._,{id:"cabinet_recharge_deposit_amount",defaultMessage:"Deposit amount"}),deposit_to_account:r.createElement(i._,{id:"deposit_to_account",defaultMessage:"Deposit to Account"}),extra_fields_screen_title:r.createElement(i._,{id:"recharge_cabinet_way_to_extra_fields",defaultMessage:"Fill extra fields"}),footer:r.createElement(i.g,{id:"billing_connection_protected",defaultMessage:"The connection is encrypted with<br/>SSL certified <br/> 256 bit Secure Processing"}),how_to_make_deposit:r.createElement(i._,{id:"video_title_how_make_deposit",defaultMessage:"How do I make a deposit?"}),localizeAccountInfo:n.L,localizeAmountErrors:o.G,makeAmountWithCurrency:e=>r.createElement(i._,{id:"amount_with_currency",defaultMessage:"Amount, {currency}",values:{currency:e}}),next:r.createElement(i._,{id:"next",defaultMessage:"Next"}),payment_amount:r.createElement(i._,{id:"payment_amount",defaultMessage:"Payment Amount"}),payment_failed_description:r.createElement(i._,{id:"billing_fail_payment_error",defaultMessage:"Payment processing error. Please try again or contact our client support department."}),payment_processing_description:r.createElement(i._,{id:"billing_pending_payment_msg",defaultMessage:"The payment is being processed..."}),payment_method:r.createElement(i._,{id:"payment_method",defaultMessage:"Payment method"}),payment_hang_up_description:r.createElement(i._,{id:"payment_in_process_screen_description",defaultMessage:"Your payment is being processed. You can close this screen."}),payment_hang_up_title:r.createElement(i._,{id:"payment_in_process_screen_heading",defaultMessage:"Processing..."}),payment_success_description:r.createElement(i._,{id:"billing_success_payment_ok_msg",defaultMessage:"Your payment has been processed"}),proceed_to_trading:r.createElement(i._,{id:"proceed_to_trading",defaultMessage:"Proceed to Trading"}),psp_select_screen_title:r.createElement(i._,{id:"payment_method",defaultMessage:"Payment method"}),redirect_to_psp_warning:r.createElement(i._,{id:"redirect_to_psp_warning",defaultMessage:"You will be redirected to the payment system page afterwards."}),save_method:l.w,support_button_text:r.createElement(i._,{id:"support_button_trigger_head",defaultMessage:"Support Department"}),try_again:r.createElement(i._,{id:"refill",defaultMessage:"Try again"}),unsubscribe_card_description:r.createElement(i._,{id:"card_remove_desc",defaultMessage:"If you delete the selected card, you will not be able to use it for quick deposits to your account."}),ok:r.createElement(i._,{id:"technical_stub_deposit_button",defaultMessage:"Ok"})}},63691:(e,a,s)=>{"use strict";s.d(a,{L:()=>n});var i=s(82844),r=s(27378);const n=e=>{let a=e.accNumber,s=e.accName;return r.createElement(i._,{id:"account_name_with_id",defaultMessage:"{acc_name} #{acc_id}",values:{acc_id:a,acc_name:s}})}},92276:(e,a,s)=>{"use strict";s.d(a,{G:()=>n});var i=s(27378),r=s(82844);const n=e=>{let a=e.maxAmountFormatted,s=e.minAmountFormatted;return{min:i.createElement(r._,{id:"wrong_pay_sum_min",defaultMessage:"Minimum payment amount: {min}",values:{min:s}}),max:i.createElement(r._,{id:"wrong_pay_sum_max",defaultMessage:"Maximum payment amount: {max}",values:{max:a}})}}},12523:(e,a,s)=>{"use strict";s.d(a,{w:()=>o});var i=s(27378),r=s(82844),n=s(99175);const o=Object.freeze({hint:i.createElement(r._,{id:"1click_terms_and_agreements_on_storage",defaultMessage:"You can make a deposit with one click. <one-click>One click T&C</one-click> and <agreement>Cardholder’s credential storage T&C.</agreement>",values:{"one-click":e=>i.createElement("a",{target:"_blank",rel:"noreferrer",href:"".concat(n.Z.TERMS).concat(n.Z.TERMS_ONE_CLICK)},e),agreement:e=>i.createElement("a",{target:"_blank",rel:"noreferrer",href:"".concat(n.Z.TERMS).concat(n.Z.TERMS_AGREEMENT_ON_THE_STORAGE)},e)}}),label:i.createElement(r._,{id:"save_card",defaultMessage:"Save card"})})},66318:(e,a,s)=>{"use strict";s.d(a,{u:()=>o});var i=s(29257),r=s(66713),n=s(71978);const o=(l=(0,i.Z)((function*(e){let a=e.subscribeId;try{return yield n.Z.post("/cabinet/unsubscribe",{version:"v1",project:r.yy,data:{subscribe_id:a}})}catch(e){return e}})),function(e){return l.apply(this,arguments)});var l},44441:(e,a,s)=>{"use strict";s.d(a,{V6:()=>o,VX:()=>c,x8:()=>l});var i=s(83128),r=s(1347),n=s(43701);const o=(e,a)=>{(0,n.v)({eventId:"back_screen",data:{from:e,to:a}})},l=()=>{(0,n.v)({eventId:"close",data:{}}),setTimeout((()=>{i.KK.turnOffFeature(),r.Ow.resetSelectedCoupon()}),210)},c=(e,a)=>{e!==a&&(0,n.v)({eventId:"forward_screen",data:{from:e,to:a}})}},44275:(e,a,s)=>{"use strict";s.d(a,{R:()=>p});var i=s(37323),r=s(64356),n=s(23735),o=s(90212),l=s(66713),c=s(49761),d=s(41365),u=s(30654);const m=()=>{if((0,d.v)()){const e=(()=>{const e=(0,c.e)(o.L0);return"string"==typeof e?e:null})();if(e)return e}return window.innerWidth<960?"adaptive":"web"},p=e=>{let a=e.name;return e=>{try{(e=>{let a=e.id,s=e.data,r=e.entryPoint,n=e.isWebView,o=e.origin,c=e.name;const p="".concat(m(),"_").concat(a);u.g.statLog({name:c,value:p,test_name:"common",body:JSON.stringify((0,i.Z)({project:l.yy,is_webview:"boolean"==typeof n?n:(0,d.v)(),origin:o,entryPoint:r},s))})})((0,r.Z)((0,i.Z)({},e),{name:a})),(e=>{let a=e.name,s=e.id,i=e.data;const r="".concat(a,"~").concat(s),o=(null==i?void 0:i.to)?"".concat(r,"=").concat(null==i?void 0:i.to):r;(0,n.L)({event:o,eventCategory:a,eventAction:s,eventLabel:r})})((0,r.Z)((0,i.Z)({},e),{name:a}))}catch(e){console.error(e)}}}},33479:(e,a,s)=>{"use strict";s.d(a,{H:()=>o,i:()=>n});var i=s(46122),r=s(90007);const n=e=>{let a=e.tags;return e=>{let s=e.id,r=e.error,n=e.level;i.b.sendEvent(r,n,s,void 0,a)}},o=(0,r.Jw)({team:"front-end",feature:""},{makeHandler:n}).report},88875:(e,a,s)=>{"use strict";s.d(a,{a:()=>n});var i=s(27378),r=s(17302);const n=()=>i.createElement(r.$j,{size:"m"})},52433:(e,a,s)=>{"use strict";s.d(a,{GC:()=>o,iO:()=>r.i,pX:()=>n.p});var i=s(35377),r=(s(44275),s(33479)),n=s(78637);const o=e=>e===i.si.LIGHT},78637:(e,a,s)=>{"use strict";s.d(a,{p:()=>A});var i=s(29257),r=s(61744),n=s(83128),o=s(21696),l=s(51649),c=s(14305),d=s(72735);const u="@payIn/getActionsList",m="openKYC",p="@payIn/openSupportChat",h="@payIn/close",v="@payIn/openMainScreen",g="@payIn/getLayoutParameters",_={WuTL44enr:[h,u,g,m,v,p]},f=(0,c.GW)((e=>{let a=e.senderId;return Promise.resolve(_[a])})),E=(0,c.ub)({effect:(0,c.GW)(l.yR),source:r.vs,mapParams:(e,a)=>({themeName:document.body.dataset.theme,isLightTheme:a.isLightScheme,isRTL:a.isRTL})}),S=(0,c.GW)((y=(0,i.Z)((function*(e){return yield(0,d.rq)(),Promise.resolve(!0)})),function(e){return y.apply(this,arguments)}));var y;const b=(0,c.GW)((e=>(e?window.commonMethodRunner.close():(0,d.m6)(),Promise.resolve(!0)))),C=(0,c.GW)((e=>(e?window.commonMethodRunner.resolveDeepLink("https://ul.".concat(location.hostname,"/kyc-proof")):window.open("/verification?request_kyc=true"),Promise.resolve(!0)))),T=(0,c.GW)((e=>(e?window.commonMethodRunner.resolveDeepLink("https://ul.".concat(location.hostname,"/support")):n.KK.openSupportChat(),Promise.resolve(!0)))),A=e=>{let a=e.isWebView;const s={[u]:f,[g]:E,[v]:S,[m]:()=>C(a),[h]:()=>b(a),[p]:()=>T(a)};(0,o.p)({handlers:s,accessList:_})}},63339:(e,a,s)=>{"use strict";s.d(a,{Y:()=>p});var i=s(37323),r=s(64356),n=s(3121),o=s(27378),l=s(60042),c=s.n(l),d=s(95029),u=s(30654),m=s(38197);const p=e=>{let a=e.className,s=e.size,l=e.pairName;const p=l?l.toLocaleLowerCase():"",h=(0,n.Z)(o.useState(),2),v=h[0],g=h[1];return o.useEffect((()=>{u.$.userValues(["ftt_pairs","fx_pairs","spt_pairs"]).then((e=>{const a=(e=>{let a={};return Object.values(e).filter((e=>!!e)).map((e=>a=e.reduce(((e,a)=>(0,r.Z)((0,i.Z)({},e),{[a.id.toLowerCase()]:a.icon_vector||a.icon["0x0"]||null})),a))),a})(e);g(a[p])})).catch((()=>null))}),[u.$,p]),o.createElement(d.JO,{className:c()(m.Z.assetIcon,a),size:s,dataTest:"pair-name-".concat(p),src:v||d.DI})}},11717:(e,a,s)=>{"use strict";s.d(a,{Y:()=>i.Y});var i=s(63339)},55503:(e,a,s)=>{"use strict";s.d(a,{r:()=>h});var i=s(3121),r=s(27378),n=s(73598),o=s(23735),l=s(32678),c=s(54172),d=s(55121),u=s(30681),m=s(40846);const p=e=>{let a=e.amount,s=e.floatingPnl,n=e.marginLevel,c=e.currency,d=e.type,u=e.lastAddAccount,m=e.isAccountChanging,p=e.compact,h=e.covered,v=e.accountName,g=e.isIslamic,_=e.onClick;const f=(0,i.Z)(r.useState(!1),2),E=f[0],S=f[1];r.useEffect((()=>{let e=0;return u&&(S(!0),e=window.setTimeout((()=>{S(!1)}),3e3)),()=>{clearTimeout(e)}}),[u]);const y=r.useCallback((()=>{_(),(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"menu_accounts",eventAction:"open",eventLabel:v})}),[_,v]);return r.createElement(l.r2,{amount:a,pnl:s,marginLevel:n,type:d,currency:c,title:v,onClick:y,isTooltip:E,isLoading:m,isIslamic:g,accentTitle:"demo"===d,compact:p,covered:h})},h=(0,c.zt)((e=>{let a=e.accountService,s=e.panelService;const i=r.useCallback((()=>{s.openById(m.EX.ACCOUNT)}),[s]);return r.createElement(n.Qj,null,(()=>{const e=a.selectedAccount,s=a.hiddenBalance,n=e.amount,o=e.currencyName,l=e.name,c=e.type,d=e.isIslamic;return r.createElement(p,{amount:null!=n?n:0,currency:o,accountName:l,isIslamic:d,onClick:i,lastAddAccount:a.lastAddAccount,isAccountChanging:a.isAccountChanging,covered:"demo"!==e.type&&s,type:c})}))}),{helper(e){let a=e.panelService;return{accountService:e.accountService,panelService:a}},services:[d.BR,u.K]});h.displayName="AccountBalance"},17771:(e,a,s)=>{"use strict";s.d(a,{ZA:()=>S,m3:()=>T});var i=s(27378),r=s(84584),n=s(21182),o=s(23735),l=s(82844),c=s(95029),d=s(54172),u=s(82334),m=s(6262),p=s(3893),h=s(82824),v=s(13424),g=s(55121),_=s(23680),f=s(50071),E=s(30518);const S=(0,r.Z)(),y=(0,n.W)(S),b=()=>{const e=i.useRef(null);return i.createElement("div",{ref:e,"data-test":"promotion-fx-tab-tooltip",style:{width:"100%"}},i.createElement(l._,{id:"fx",defaultMessage:"Forex"}),i.createElement(y,{props:{anchorEl:e.current}}))};let C=0;const T=(0,d.zt)((e=>{let a=e.isFx,s=e.isFtt,r=e.isSpt,n=e.iShowRecommended,d=e.assetMenuService,v=e.accountService,g=e.minimized,_=e.selectedTab,f=e.selectTab,S=e.onMount;const y=i.useCallback((e=>{_!==e&&(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/change_platform",eventLabel:"to_".concat(e)}),f(e)}),[_,f]);i.useEffect((()=>(C=window.setTimeout((()=>{S(!0)}),1e3),()=>{window.clearTimeout(C),S(!1)})),[S]);const T=function(e,a,s,r,n,o){const c=a.isCommonAccount(a.selectedAccount),d={};return r&&c&&(d[E.Rp.FTT]={component:i.createElement(u.Ho,{assetMenuService:e}),title:i.createElement(l._,{id:"ftt",defaultMessage:"Fixed Time"})}),s&&c&&(d[E.Rp.FX]={component:i.createElement(m.Nc,null),title:i.createElement(b,null)}),n&&c&&(d[E.Rp.SPT]={component:i.createElement(p.GY,{iShowRecommended:o}),title:i.createElement(h.u,{iShowRecommended:o})}),d}(d,v,a,s,r,n);var A;return T[_]&&(g||1===Object.keys(T).length)?null===(A=T[_])||void 0===A?void 0:A.component:T.fx||T.ftt?i.createElement(c.Ps,{tabs:T,currentTab:_,clickTab:y,position:"static",className:"trading-tabulator_lighter"}):null}),{helper(e){let a=e.assetMenuService,s=e.sideBarService,i=e.appService,r=e.accountService;const n=i.getPolitic("toggles");return{isFx:i.availableProjects.fx&&(!n||n.asset_fx_tab),isFtt:i.availableProjects.bo&&(!n||n.asset_ftt_tab),isSpt:i.availableProjects.spt&&i.getPolitic("stock_price_trades_enabled")&&(!n||n.asset_spt_tab),iShowRecommended:i.politics.test_stocks_retention,selectedTab:a.selectedTab,selectTab:a.selectTab,minimized:s.sideBarMinor.minimized,assetMenuService:a,accountService:r,onMount:a.onMount}},services:[f.l,v.G,_.z,g.BR]})},62799:(e,a,s)=>{"use strict";s.d(a,{A:()=>u});var i=s(3121),r=s(27378),n=s(15696),o=s(82844),l=s(25123),c=s(11717),d=s(57581);const u=e=>{let a=e.id,s=e.title,u=e.badge,m=e.badgeColor,p=e.isMobile,h=e.showTip,v=e.showTipDelay,g=void 0===v?1500:v,_=e.active,f=e.onClick,E=e.onTipOpen,S=e.onTipClose;const y=(0,i.Z)(r.useState(null),2),b=y[0],C=y[1],T=(0,i.Z)(r.useState(!1),2),A=T[0],k=T[1],w=r.useCallback((e=>{null==S||S(e)}),[S]);return r.useEffect((()=>{let e=-1;return h?e=window.setTimeout((()=>{k((e=>e!==h?h:e))}),g):k(!1),()=>window.clearTimeout(e)}),[h,g]),r.createElement(r.Fragment,null,r.createElement(l.Hk,{icon:r.createElement(c.Y,{pairName:a}),title:s,badge:u,badgeColor:m,active:_,ref:C,onClick:f}),r.createElement(n.Z,{component:null},A?r.createElement(d.B,{anchorEl:b,fitSizeTo:p?"viewport":"content",distance:8,placement:"bottom-start",onEnter:E,onCloseAction:w},r.createElement(o._,{id:"tip_assets_here",defaultMessage:"You can find the full list of assets here."})):null))};u.displayName="AssetMenu(components)(AssetSelectorComponent)"},35145:(e,a,s)=>{"use strict";s.d(a,{G:()=>n});var i=s(3121),r=s(27378);const n=e=>{let a=e.items,s=e.scrollRef,n=e.windowHeight,o=e.children;const l=(0,i.Z)(r.useState((()=>Math.ceil(n/48))),2),c=l[0],d=l[1],u=r.useCallback((()=>{d(a.length);const e=null==s?void 0:s.current;e&&e.removeEventListener("scroll",u)}),[a.length,s]);return r.useEffect((()=>{const e=null==s?void 0:s.current;if(e)return e.addEventListener("scroll",u),()=>{e.removeEventListener("scroll",u)}}),[u,s]),r.createElement(r.Fragment,null,a.map(((e,a)=>r.createElement(r.Fragment,{key:e.id},o(e,a<=c,a)))))};n.displayName="AssetMenu(components)(AssetVirtualizedList)"},95973:(e,a,s)=>{"use strict";s.d(a,{F:()=>c});var i=s(3121),r=s(27378),n=s(64489),o=s(98442),l=s(70182);const c=e=>{let a=e.scrollRef;const s=(0,i.Z)(r.useState(!1),2),c=s[0],d=s[1],u=(0,n.Z)((()=>{var e;const s=null==a||null===(e=a.current)||void 0===e?void 0:e.scrollTop;d(!!(s&&s>=100))}),100),m=r.useCallback((()=>{var e;return null==a||null===(e=a.current)||void 0===e?void 0:e.scrollTo({top:0,behavior:"smooth"})}),[a]);return r.useEffect((()=>{const e=null==a?void 0:a.current;if(e)return e.addEventListener("scroll",u),()=>{e.removeEventListener("scroll",u)}}),[]),r.createElement(r.Fragment,null,r.createElement("div",{className:l.Z.gap}),r.createElement(o.e,{dataTest:"assets-list-scroll-top-button",className:l.Z.button,onTop:c,onClick:m}))};c.displayName="AssetMenu(components)(ScrollTopButton)"},30518:(e,a,s)=>{"use strict";s.d(a,{Bd:()=>l,C$:()=>m,JV:()=>o,Rp:()=>u,U3:()=>d,W7:()=>r,q4:()=>c,qi:()=>n});var i=s(20986);const r={TITLE_ASC:"asset_title_asc",TITLE_DESC:"asset_title_desc",CHANGES_ASC:"asset_changes_asc",CHANGES_DESC:"asset_changes_desc",WINPERC_DESC:"asset_winperc_desc",RATE_ASC:"asset_rate_asc",RATE_DESC:"asset_rate_desc"},n={ASSET:"ASSET",LAST_CHANGES:"LAST_CHANGES",WINPERC:"WINPERC",QUANTITY:"QUANTITY",RATE:"RATE",LOCKED:"LOCKED"},o={[r.TITLE_ASC]:"name_asc",[r.TITLE_DESC]:"name_desc",[r.CHANGES_ASC]:"changes_asc",[r.CHANGES_DESC]:"changes_desc",[r.WINPERC_DESC]:"rate_win_desc",[r.RATE_ASC]:"mid_price_asc",[r.RATE_DESC]:"mid_price_desc"},l={[n.LOCKED]:e=>e.locked,[n.ASSET]:e=>e.title.toLowerCase(),[n.WINPERC]:e=>e.winperc,[n.QUANTITY]:e=>e.quantity,[n.RATE]:e=>e.rate,[n.LAST_CHANGES]:e=>{var a;return(null==e||null===(a=e.previewData)||void 0===a?void 0:a.change)?Math.abs(e.previewData.change):0}},c=[l[n.LOCKED]],d=[i.B8.ASC],u={FX:"fx",FTT:"ftt",SPT:"spt"},m="asset_menu"},64312:(e,a,s)=>{"use strict";s.d(a,{_:()=>v});var i=s(37323),r=s(59312),n=s(60521),o=s(28660),l=s(62540),c=s(20986),d=s(66713),u=s(26763),m=s(44481),p=s(30518),h=s(70215);let v=class AssetListServiceFtt extends m.R{onStart(e){e.pairsGroupsBo&&(this.tags=[...this.tags,...(0,l.Z)(e.pairsGroupsBo)])}onBind(e,a,s){this.pairTrendsService=a,this.pairService=e,this.assetMenuService=s,this.isReady=!0,this.sortFieldName=p.qi.WINPERC,this.sortFieldDirection=c.B8.DESC,this.initialize()}initialize(){this.loading=!0,this.setPreviewsCollection(),this.loading=!1,super.initialize(),this.initReactions()}setPreviewsCollection(){this.previewsCollection=[],this.pairService.pairCollection.models.forEach((e=>{var a;null===(a=this.previewsCollection)||void 0===a||a.push(h.Z.parse(e,this.pairTrendsService.previews.getById(e.id),"",this.pairService.favoriteAssets))}))}getPairModel(e){return this.pairService.pairCollection.getById(e)}initReactions(){this.disposers=[(0,n.reaction)((()=>this.pairService.pairCollection.models.map((e=>({id:e.id,aliases:e.aliases,winperc:e.winperc,locked:e.locked,lockedReason:e.lockedReason,timeOpen:e.timeOpen,selected:e.selected,favorite:this.pairService.favoriteAssets.has(e.id)})))),(e=>{(0,n.runInAction)((()=>{e.forEach((e=>{var a;const s=null===(a=this.previewsCollection)||void 0===a?void 0:a.find((a=>a.id===e.id));s&&(s.aliases=e.aliases,s.winperc=e.winperc,s.locked=e.locked,s.timeOpen=e.timeOpen,s.lockedReason=e.lockedReason,s.favorite=e.favorite)}))}))})),(0,n.reaction)((()=>this.pairTrendsService.previews.models.map((e=>(0,i.Z)({},e)))),(()=>{this.setPreviewsCollection()})),(0,n.reaction)((()=>{var e;return null===(e=this.assetMenuService)||void 0===e?void 0:e.tradeFrameId}),(()=>{this.clearFilters()}))]}constructor(...e){super(...e),this.project=d.yy,this.disposers=[],this.sortings=[{id:p.W7.TITLE_ASC,field:p.qi.ASSET,dir:c.B8.ASC},{id:p.W7.TITLE_DESC,field:p.qi.ASSET,dir:c.B8.DESC},{id:p.W7.WINPERC_DESC,field:p.qi.WINPERC,dir:c.B8.DESC}],this.loading=!1}};(0,r.gn)([n.observable],v.prototype,"loading",void 0),(0,r.gn)([(0,o.onStart)(u.APP_SERVICE)],v.prototype,"onStart",null),(0,r.gn)([(0,o.onBind)(u.PAIR_SERVICE_BO,u.PAIR_TRENDS_SERVICE_BINARY,u.ASSET_MENU_SERVICE)],v.prototype,"onBind",null),(0,r.gn)([n.action],v.prototype,"setPreviewsCollection",null),v=(0,r.gn)([(0,o.bindAs)(u.ASSET_LIST_SERVICE_FTT)],v)},70215:(e,a,s)=>{"use strict";s.d(a,{Z:()=>AssetPreviewModelFtt});var i=s(37323);class AssetPreviewModelFtt{static parse(e,a,s,r){return{id:e.id,title:e.title,aliases:e.aliases,transTrim:e.transTrim,winperc:e.winperc,group:e.group,groupView:e.groupView,locked:e.locked,lockedReason:e.lockedReason,timeOpen:e.timeOpen,selected:e.id===s,previewData:a?(0,i.Z)({},a):void 0,favorite:r.has(e.id),isNew:e.quick,rate:0,precision:0}}static parseAll(e,a,s,i){return e.map((e=>AssetPreviewModelFtt.parse(e,a.getById(e.id),s,i)))}}},5120:(e,a,s)=>{"use strict";s.d(a,{_:()=>i._});var i=s(64312)},96913:(e,a,s)=>{"use strict";s.d(a,{Ho:()=>f});var i=s(27378),r=s(73598),n=s(25123),o=s(54172),l=s(13424),c=s(95973),d=s(5120),u=s(73181),m=s(62217),p=s(57982),h=s(8052),v=s(12281);const g=e=>{let a=e.assetListServiceFtt,s=e.hasNewAssets;const o=i.useRef(null);return i.createElement(n.mc,null,i.createElement(n.mc.List,null,i.createElement(n.mc.ListScroll,{ref:o},i.createElement(n.mc.Header,null,i.createElement(n.mc.HeaderSearch,null,i.createElement(u.b,null),i.createElement(v.v,null)),i.createElement(r.Qj,null,(()=>a.searchInput?null:i.createElement(n.mc.HeaderTags,null,i.createElement(h.A,null))))),i.createElement(r.Qj,null,(()=>a.searchInput?null:i.createElement(i.Fragment,null,s&&i.createElement(p.R,{scrollRef:o})))),i.createElement(m.l,{scrollRef:o}),i.createElement(c.F,{scrollRef:o}))))},_=e=>{let a=e.assetListServiceFtt,s=e.hasNewAssets;const o=i.useRef(null);return i.createElement(n.mc,null,i.createElement(n.mc.Header,null,i.createElement(n.mc.HeaderSearch,null,i.createElement(u.b,{minimized:!0}))),i.createElement(n.mc.List,null,i.createElement(n.mc.ListScroll,{ref:o},i.createElement(r.Qj,null,(()=>a.searchInput?null:i.createElement(i.Fragment,null,s&&i.createElement(p.R,{minimized:!0,scrollRef:o})))),i.createElement(m.l,{minimized:!0,scrollRef:o}),i.createElement(c.F,{scrollRef:o}))))},f=(0,o.zt)((e=>{let a=e.assetListServiceFtt,s=e.minimized,r=e.hasNewAssets;return s?i.createElement(_,{assetListServiceFtt:a,hasNewAssets:r}):i.createElement(g,{assetListServiceFtt:a,hasNewAssets:r})}),{helper(e){let a=e.assetListServiceFtt,s=e.sideBarService;const i=a.previewsCollection.filter((e=>e.groupView.includes("new")));return{hasNewAssets:!(!i||!i.length),minimized:s.sideBarMinor.minimized,assetListServiceFtt:a}},services:[[d._,()=>new d._],l.G]})},87209:(e,a,s)=>{"use strict";s.d(a,{l:()=>h});var i=s(27378),r=s(73598),n=s(17302),o=s(23735),l=s(82844),c=s(25123),d=s(95029),u=s(11717),m=s(29063),p=s(35145);const h=e=>{let a=e.items,s=e.selectedAssetId,h=e.onToggleFavorite,v=e.onSelect,g=e.onClickInfo,_=e.minimized,f=e.isFavorite,E=e.searchInput,S=void 0===E?"":E,y=e.scrollRef,b=e.windowHeight;const C=i.useCallback(((e,a)=>{h(e,a)}),[h]),T=i.useCallback((e=>{v(e)}),[v]),A=i.useCallback((e=>{g(e),(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/info_click",eventLabel:"bo_".concat(e)})}),[g]),k=i.useRef(null),w=(0,m.o)(S,f);return a.length?i.createElement(p.G,{items:a,scrollRef:y,windowHeight:b},((e,a)=>{const o=s===e.id,m=e.locked&&e.timeOpen?i.createElement(c.gU,{timeOpen:e.timeOpen}):null;return i.createElement(r.Qj,null,(()=>_?i.createElement(c.Rm,{ref:o?k:null,key:e.id,id:e.id,icon:i.createElement(u.Y,{pairName:e.id}),title:e.title,selected:s===e.id,locked:e.locked,subtitle:e.winperc&&!e.locked?i.createElement(c.hE,{value:i.createElement(d.p7,{value:e.winperc}),isHighlight:!0}):"-",isFavorite:e.favorite,highlightFavorite:!0,onClick:T,toggleFavorite:C,onClickInfo:A}):i.createElement(c.si,{ref:o?k:null,key:e.id,id:e.id,icon:i.createElement(u.Y,{pairName:e.id}),title:e.title,selected:o,locked:e.locked,timeOpen:e.timeOpen,value:e.winperc&&!e.locked?i.createElement(n.Ct,{content:i.createElement(i.Fragment,null,i.createElement(d.p7,{value:e.winperc})),color:e.winperc>50?"accent":"neutral"}):"-",isFavorite:e.favorite,highlightFavorite:!0,invisible:!a,toggleFavorite:C,onClick:T,subtitle:e.isNew?i.createElement(l._,{id:"asset_quickler_subtitle",defaultMessage:"5 second trading"}):m,onClickInfo:A})))})):i.createElement(i.Fragment,null,w)};h.displayName="AssetMenu(ftt)(components)(AssetList)"},62217:(e,a,s)=>{"use strict";s.d(a,{l:()=>g});var i=s(24459),r=s(27378),n=s(66713),o=s(54172),l=s(83920),c=s(41520),d=s(5120),u=s(50071),m=s(61119),p=s(87209),h=s(30518),v=s(80913);const g=(0,o.zt)((e=>{var a=e.showHeader,s=(0,i.Z)(e,["showHeader"]);return r.createElement(r.Fragment,null,a?r.createElement(v.e,{minimized:s.minimized}):null,r.createElement(p.l,Object.assign({},s)))}),{helper(e,a){let s=e.assetListServiceFtt,i=e.assetMenuService,r=e.navigationService,o=e.uiService,l=a.minimized,c=a.scrollRef;const d=(0,m.G)(s.previewsCollection,s.sortFieldName,s.sortFieldDirection,s.searchInput,s.tags.find((e=>e.value===s.selectedTag)))||[];return!1===s.loading?{showHeader:d.length>0,windowHeight:o.windowHeight,isFavorite:s.isFavoritesSelectedTag&&!s.searchInput,searchInput:s.searchInput,minimized:l,scrollRef:c,selectedAssetId:"ftt"===i.project&&i.asset?i.asset:null,items:d,onToggleFavorite(e){s.toggleFavorite(e)},onClickInfo:e=>{var a;null==r||null===(a=r.ovlPlusNavigation)||void 0===a||a.goToAssets({assetId:e,embeddedLocation:h.C$,project:n.yy})},onSelect:e=>{i.handleSelect(e,"ftt")}}:void 0},services:[d._,u.l,l.f,c.Fz]})},80913:(e,a,s)=>{"use strict";s.d(a,{e:()=>o});var i=s(27378),r=s(82844),n=s(25123);const o=e=>{let a=e.minimized;return i.createElement(n.By,{headerStart:!a&&i.createElement(r._,{id:"assets_list_sort_name",defaultMessage:"Name"}),headerEnd:i.createElement(r._,{id:"assets_list_header_profit",defaultMessage:"Profitability"}),headerEndTooltip:i.createElement(r._,{id:"assets_list_sort_ftt_tooltip",defaultMessage:"This percentage of the asset's value is the profit you will receive as a result of a correct forecast."})})}},57982:(e,a,s)=>{"use strict";s.d(a,{R:()=>g});var i=s(27378),r=s(82844),n=s(66713),o=s(25123),l=s(54172),c=s(41520),d=s(83920),u=s(49756),m=s(5120),p=s(50071),h=s(87209),v=s(30518);const g=(0,l.zt)((e=>i.createElement(i.Fragment,null,e.showHeader?i.createElement(o.By,{headerStart:i.createElement(r._,{id:"tab_new_asset",defaultMessage:"New asset"})}):null,i.createElement(h.l,Object.assign({},e)))),{helper(e,a){let s=e.assetListServiceFtt,i=e.assetMenuService,r=e.navigationService,o=e.gamblingAssetService,l=e.uiService,c=a.minimized,d=a.scrollRef;if(!1===s.loading){const e=s.previewsCollection.filter((e=>e.groupView.includes("new")));return{showHeader:!!e.length,windowHeight:l.windowHeight,isFavorite:!0,minimized:c,scrollRef:d,selectedAssetId:"ftt"===i.project&&i.asset?i.asset:null,items:e,onToggleFavorite:s.toggleFavorite,onClickInfo:e=>{var a;null==r||null===(a=r.ovlPlusNavigation)||void 0===a||a.goToAssets({assetId:e,embeddedLocation:v.C$,project:n.yy})},onSelect:e=>{const a=s.getPairModel(e);a&&a.quick&&o.goToStory(),i.handleSelect(e,"ftt")}}}},services:[m._,p.l,d.f,u.o,c.Fz]})},73181:(e,a,s)=>{"use strict";s.d(a,{b:()=>l});var i=s(27378),r=s(25123),n=s(54172),o=s(5120);const l=(0,n.zt)((e=>{let a=e.value,s=e.minimized,n=e.onChange;return i.createElement(r.LW,{value:a,onChange:n,minimized:s})}),{helper(e,a){let s=e.assetListServiceFtt;return{minimized:a.minimized,value:s.displayingSearchInput,onChange:s.searchInputEnter}},services:[o._]})},65607:(e,a,s)=>{"use strict";s.d(a,{V:()=>p});var i=s(27378),r=s(23735),n=s(95029),o=s(28963),l=s(54172),c=s(13424),d=s(14803),u=s(62799),m=s(50071);const p=(0,l.zt)(u.A,{helper(e,a){let s=e.assetMenuService,o=e.tradeFrameService,l=e.sideBarService,c=a.isMobile;const u=o.selectedPair,m=u.id,p=u.title,h=u.winperc,v=u.locked,g=l.sideBarMinor.isPanelOpened("assets")&&o.tradeFrameId===s.tradeFrameId,_=h>50?"accent":"neutral";return{id:m,title:p,isMobile:c,badge:v?null:i.createElement(n.p7,{value:h}),badgeColor:_,winperc:i.createElement(n.p7,{value:h}),active:g,showTip:s.showTip,showTipDelay:s.showTipDelay,onTipOpen:s.handleTipOpen,onTipClose:s.handleTipClose,onClick:()=>{o.tradeFrameId===s.tradeFrameId?l.toggleMinor(d.KO.ASSETS):(s.setTradeFrame(o.tradeFrameId),l.goToMinor(d.KO.ASSETS)),l.sideBarMinor.isPanelOpened("assets")&&(0,r.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/open_menu",eventLabel:"from_chart"})}}},services:[m.l,o.z2,c.G]})},12281:(e,a,s)=>{"use strict";s.d(a,{v:()=>l});var i=s(27076),r=s(25123),n=s(54172),o=s(5120);const l=(0,n.zt)(r.du,{helper(e){let a=e.assetListServiceFtt;var s;return{items:a.sortings,selectSorting:a.selectSorting,selectedSorting:null!==(s=a.sortings.find((e=>{let s=e.field,i=e.dir;return s===a.sortFieldName&&i===a.sortFieldDirection})))&&void 0!==s?s:(0,i.Z)(a.sortings)}},services:[o._]})},8052:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var i=s(27378),r=s(25123),n=s(54172),o=s(5120);const l=(0,n.zt)((e=>{let a=e.tags,s=e.selectedTag,n=e.onTagSelect;return i.createElement(r.Id,{items:a,selectedTag:s,onClick:n})}),{helper(e){let a=e.assetListServiceFtt;return{tags:a.tags,selectedTag:a.selectedTag,onTagSelect:a.handleTagToggle}},services:[o._]})},82334:(e,a,s)=>{"use strict";s.d(a,{Ho:()=>i.Ho});var i=s(96913)},63582:(e,a,s)=>{"use strict";s.d(a,{e:()=>g});var i=s(29257),r=s(37323),n=s(59312),o=s(62540),l=s(60521),c=s(28660),d=s(66713),u=s(20986),m=s(26763),p=s(44481),h=s(30518),v=s(56825);let g=class AssetListServiceFx extends p.R{onStart(e){e.pairsGroupsFx&&(this.tags=[...this.tags,...(0,o.Z)(e.pairsGroupsFx)])}onBind(e,a,s){this.pairTrendsService=a,this.pairService=e,this.pairsRateUpdateService=s,this.isReady=!0,this.initialize()}initialize(){var e=this,a=()=>super.initialize;return(0,i.Z)((function*(){e.loading=!0,yield e.pairTrendsService.updateAssetsPreviews(),e.setPreviewsCollection(),e.loading=!1,e.pairsRateUpdateService.startUpdatePairRates(),a().call(e),e.initReactions()}))()}initReactions(){this.disposers=[(0,l.reaction)((()=>this.pairService.pairCollection.models.map((e=>({id:e.id,aliases:e.aliases,locked:e.locked,lockedReason:e.lockedReason,selected:e.selected,timeOpen:e.timeOpen,favorite:this.pairService.favoriteAssets.has(e.id)})))),(e=>{(0,l.runInAction)((()=>{e.forEach((e=>{var a;const s=null===(a=this.previewsCollection)||void 0===a?void 0:a.find((a=>a.id===e.id));s&&(s.aliases=e.aliases,s.locked=e.locked,s.lockedReason=e.lockedReason,s.selected=e.selected,s.timeOpen=e.timeOpen,s.favorite=e.favorite)}))}))})),(0,l.reaction)((()=>this.pairTrendsService.previews.models.map((e=>(0,r.Z)({},e)))),(()=>{(0,l.runInAction)((()=>{this.setPreviewsCollection()}))})),(0,l.reaction)((()=>(0,r.Z)({},this.pairsRateUpdateService.pairsRateHash)),(e=>{(0,l.runInAction)((()=>{Object.keys(e).forEach((a=>{var s;const i=null===(s=this.previewsCollection)||void 0===s?void 0:s.find((e=>e.id===a));var r;i&&(i.rate=null===(r=e[a])||void 0===r?void 0:r.rate)}))}))})),(0,l.reaction)((()=>this.pairService.favoriteAssets.size),(()=>{this.setPreviewsCollection()}))]}setPreviewsCollection(){this.previewsCollection=[],this.pairService.pairCollection.models.forEach((e=>{var a;null===(a=this.previewsCollection)||void 0===a||a.push(v.G.parse(e,this.pairTrendsService.previews.getById(e.id),this.pairsRateUpdateService.pairsRateHash,"",this.pairService.favoriteAssets))}))}onStop(){this.disposers.forEach((e=>{e()})),this.disposers=[],this.pairsRateUpdateService.stopUpdatePairRates()}constructor(...e){super(...e),this.project=d.c0,this.disposers=[],this.sortings=[{id:h.W7.TITLE_ASC,field:h.qi.ASSET,dir:u.B8.ASC},{id:h.W7.TITLE_DESC,field:h.qi.ASSET,dir:u.B8.DESC},{id:h.W7.CHANGES_ASC,field:h.qi.LAST_CHANGES,dir:u.B8.ASC},{id:h.W7.CHANGES_DESC,field:h.qi.LAST_CHANGES,dir:u.B8.DESC}],this.loading=!1}};(0,n.gn)([l.observable],g.prototype,"loading",void 0),(0,n.gn)([(0,c.onStart)(m.APP_SERVICE)],g.prototype,"onStart",null),(0,n.gn)([(0,c.onBind)(m.PAIR_SERVICE_FX,m.PAIR_TRENDS_SERVICE_FOREX,m.PAIRS_RATE_UPDATE_SERVICE_FX)],g.prototype,"onBind",null),(0,n.gn)([c.onStop],g.prototype,"onStop",null),g=(0,n.gn)([(0,c.bindAs)(m.ASSET_LIST_SERVICE_FX)],g)},56825:(e,a,s)=>{"use strict";s.d(a,{G:()=>AssetPreviewModelFx});var i=s(37323);class AssetPreviewModelFx{static parse(e,a,s,r,n){var o;return{id:e.id,title:e.title,rate:s?null===(o=s[e.id])||void 0===o?void 0:o.rate:0,aliases:e.aliases,precision:e.precision,transTrim:e.transTrim,group:e.group,groupView:e.groupView,locked:e.locked,lockedReason:e.lockedReason,timeOpen:e.timeOpen,selected:e.id===r,previewData:a?(0,i.Z)({},a):void 0,favorite:n.has(e.id)}}}},93615:(e,a,s)=>{"use strict";s.d(a,{e:()=>i.e});var i=s(63582)},46811:(e,a,s)=>{"use strict";s.d(a,{Nc:()=>C,si:()=>E});var i=s(27378),r=s(73598),n=s(84584),o=s(21182),l=s(25123),c=s(96667),d=s(54172),u=s(13424),m=s(72655),p=s(95973),h=s(93615),v=s(98530),g=s(42317),_=s(59337),f=s(21332);const E=(0,n.Z)(),S=(0,o.W)(E),y=e=>{let a=e.assetListServiceFx;const s=i.useRef(null);return i.createElement(l.mc,null,i.createElement(l.mc.List,null,i.createElement(l.mc.ListScroll,{ref:s},i.createElement(l.mc.Header,null,i.createElement(l.mc.HeaderSearch,null,i.createElement(v.b,null),i.createElement(f.v,null)),i.createElement(r.Qj,null,(()=>a.searchInput?null:i.createElement(S,null))),i.createElement(r.Qj,null,(()=>a.searchInput?null:i.createElement(i.Fragment,null,i.createElement(l.mc.HeaderTags,null,i.createElement(_.A,null)))))),i.createElement(g.l,{scrollRef:s}),i.createElement(p.F,{scrollRef:s}))))},b=()=>{const e=i.useRef(null);return i.createElement(l.mc,null,i.createElement(l.mc.List,null,i.createElement(l.mc.ListScroll,{ref:e},i.createElement(l.mc.Header,null,i.createElement(l.mc.HeaderSearch,null,i.createElement(v.b,{minimized:!0}))),i.createElement(g.l,{minimized:!0,scrollRef:e}),i.createElement(p.F,{scrollRef:e}))))},C=(0,d.zt)((e=>{let a=e.assetListServiceFx;return e.minimized?i.createElement(b,{assetListServiceFx:a}):i.createElement(y,{assetListServiceFx:a})}),{helper(e){let a=e.assetListServiceFx;return{minimized:e.sideBarService.sideBarMinor.minimized,assetListServiceFx:a}},services:[[h.e,()=>new h.e],[m.g,()=>new m.g(c.Z)],u.G]})},56169:(e,a,s)=>{"use strict";s.d(a,{l:()=>p});var i=s(27378),r=s(73598),n=s(23735),o=s(25123),l=s(29063),c=s(35145),d=s(64622),u=s(5099),m=s(11717);const p=e=>{let a=e.items,s=e.selectedAssetId,p=e.minimized,h=e.onToggleFavorite,v=e.onSelect,g=e.onClickInfo,_=e.isFavorite,f=e.searchInput,E=e.scrollRef,S=e.windowHeight;const y=i.useCallback(((e,a)=>{h(e,a)}),[h]),b=i.useCallback((e=>{v(e)}),[v]),C=i.useCallback((e=>{g(e),(0,n.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/info_click",eventLabel:"fx_".concat(e)})}),[g]),T=i.useRef(null),A=(0,l.o)(f,_);return a.length?i.createElement(c.G,{items:a,scrollRef:E,windowHeight:S},((e,a)=>{const n=s===e.id;return i.createElement(r.Qj,null,(()=>p?i.createElement(o.Rm,{ref:n?T:null,key:e.id,id:e.id,icon:i.createElement(m.Y,{pairName:e.id}),title:e.title,selected:n,locked:e.locked,subtitle:i.createElement(d.B,{asset:e}),isFavorite:e.favorite,highlightFavorite:!0,toggleFavorite:y,onClickInfo:C,onClick:b}):i.createElement(o.si,{key:e.id,id:e.id,icon:i.createElement(m.Y,{pairName:e.id}),title:e.title,selected:s===e.id,locked:e.locked,timeOpen:e.timeOpen,subtitle:i.createElement(u.d,{asset:e}),value:i.createElement(d.B,{asset:e}),isFavorite:e.favorite,highlightFavorite:!0,invisible:!a,toggleFavorite:y,onClick:b,onClickInfo:C})))})):i.createElement(i.Fragment,null,A)};p.displayName="AssetMenu(fx)(components)(AssetList)"},64622:(e,a,s)=>{"use strict";s.d(a,{B:()=>o});var i=s(27378),r=s(50649),n=s(25123);const o=(0,r.observer)((e=>{let a=e.asset;return a.previewData&&a.previewData.change&&!a.locked?i.createElement(n.uJ,{value:a.previewData.change,isSign:!0,sufix:"%"}):i.createElement(i.Fragment,null,"-")}));o.displayName="AssetMenu(fx)(components)(AssetListRate)"},5099:(e,a,s)=>{"use strict";s.d(a,{d:()=>o});var i=s(27378),r=s(50649),n=s(25123);const o=(0,r.observer)((e=>{let a=e.asset;const s=a.rate&&a.precision?a.rate.toFixed(a.precision):a.rate,r=a.rate?s:"-",o=void 0!==a.rate?r:"";return a.locked&&a.timeOpen?i.createElement(n.gU,{timeOpen:a.timeOpen}):i.createElement(i.Fragment,null,o)}));o.displayName="AssetMenu(fx)(components)(AssetListSubTitle)"},42317:(e,a,s)=>{"use strict";s.d(a,{l:()=>g});var i=s(24459),r=s(27378),n=s(66713),o=s(54172),l=s(83920),c=s(41520),d=s(93615),u=s(50071),m=s(61119),p=s(56169),h=s(30518),v=s(52006);const g=(0,o.zt)((e=>{var a=e.showHeader,s=(0,i.Z)(e,["showHeader"]);return r.createElement(r.Fragment,null,a?r.createElement(v.e,{minimized:s.minimized}):null,r.createElement(p.l,Object.assign({},s)))}),{helper(e,a){let s=e.assetListServiceFx,i=e.assetMenuService,r=e.navigationService,o=e.uiService,l=a.minimized,c=a.scrollRef;const d=(0,m.G)(s.previewsCollection,s.sortFieldName,s.sortFieldDirection,s.searchInput,s.tags.find((e=>e.value===s.selectedTag)))||[];return!1===s.loading?{showHeader:d.length>0,minimized:l,scrollRef:c,windowHeight:o.windowHeight,isFavorite:s.isFavoritesSelectedTag&&!s.searchInput,searchInput:s.searchInput,selectedAssetId:"fx"===i.project&&i.asset?i.asset:null,items:d,onToggleFavorite(e){s.toggleFavorite(e)},onClickInfo:e=>{var a;null==r||null===(a=r.ovlPlusNavigation)||void 0===a||a.goToAssets({assetId:e,embeddedLocation:h.C$,project:n.c0})},onSelect:e=>{i.handleSelect(e,"fx")}}:void 0},services:[d.e,u.l,l.f,c.Fz]})},52006:(e,a,s)=>{"use strict";s.d(a,{e:()=>o});var i=s(27378),r=s(82844),n=s(25123);const o=e=>{let a=e.minimized;return i.createElement(n.By,{headerStart:!a&&i.createElement(r._,{id:"fx_assets_title_name_price",defaultMessage:"Name, Mid Price"}),headerEnd:i.createElement(r._,{defaultMessage:"24 h changes",id:"assets_list_sort_ftt_daily_changes"})})}},98530:(e,a,s)=>{"use strict";s.d(a,{b:()=>l});var i=s(27378),r=s(25123),n=s(54172),o=s(93615);const l=(0,n.zt)((e=>{let a=e.value,s=e.minimized,n=e.onChange;return i.createElement(r.LW,{value:a,onChange:n,minimized:s})}),{helper(e,a){let s=e.assetListServiceFx;return{minimized:a.minimized,value:s.displayingSearchInput,onChange:s.searchInputEnter}},services:[o.e]})},37517:(e,a,s)=>{"use strict";s.d(a,{K:()=>u});var i=s(23735),r=s(28963),n=s(54172),o=s(13424),l=s(14803),c=s(62799),d=s(50071);const u=(0,n.zt)(c.A,{helper(e,a){let s=e.assetMenuService,r=e.tradeFrameService,n=e.sideBarService,o=a.isMobile;const c=r.selectedPair,d=c.id,u=c.title,m=n.sideBarMinor.isPanelOpened("assets")&&r.tradeFrameId===s.tradeFrameId;return{id:d,title:u,isMobile:o,badge:"fx",badgeColor:"negative",showTip:s.showTip,active:m,onTipOpen:s.handleTipOpen,onTipClose:s.handleTipClose,onClick:()=>{r.tradeFrameId===s.tradeFrameId?n.toggleMinor(l.KO.ASSETS):(s.setTradeFrame(r.tradeFrameId),n.goToMinor(l.KO.ASSETS)),n.sideBarMinor.isPanelOpened("assets")&&(0,i.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/open_menu",eventLabel:"from_chart"})}}},services:[d.l,r.z2,o.G]})},21332:(e,a,s)=>{"use strict";s.d(a,{v:()=>l});var i=s(27076),r=s(25123),n=s(54172),o=s(93615);const l=(0,n.zt)(r.du,{helper(e){let a=e.assetListServiceFx;var s;return{items:a.sortings,selectSorting:a.selectSorting,selectedSorting:null!==(s=a.sortings.find((e=>{let s=e.field,i=e.dir;return s===a.sortFieldName&&i===a.sortFieldDirection})))&&void 0!==s?s:(0,i.Z)(a.sortings)}},services:[o.e]})},59337:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var i=s(27378),r=s(25123),n=s(54172),o=s(93615);const l=(0,n.zt)((e=>{let a=e.tags,s=e.selectedTag,n=e.onTagSelect;return i.createElement(r.Id,{items:a,selectedTag:s,onClick:n})}),{helper(e){let a=e.assetListServiceFx;return{tags:a.tags,selectedTag:a.selectedTag,onTagSelect:a.handleTagToggle}},services:[o.e]})},6262:(e,a,s)=>{"use strict";s.d(a,{Nc:()=>i.Nc});var i=s(46811)},38010:(e,a,s)=>{"use strict";s.d(a,{Kx:()=>o.K,NY:()=>l.N,Rp:()=>c.Rp,Vj:()=>n.V,j6:()=>r.j,l$:()=>r.l,m3:()=>i.m3});var i=s(17771),r=s(50071),n=s(65607),o=s(37517),l=s(67190),c=s(30518)},29063:(e,a,s)=>{"use strict";s.d(a,{o:()=>n});var i=s(27378),r=s(25123);const n=(e,a)=>i.useMemo((()=>e.length>0?i.createElement(r.u,null):a?i.createElement(r.ww,null):i.createElement(r.lq,null)),[e,a])},70726:(e,a,s)=>{"use strict";s.d(a,{R:()=>AssetListService});var i=s(37323),r=s(59312),n=s(60521),o=s(84829),l=s(28660),c=s(23735),d=s(57615),u=s(29042),m=s(66713),p=s(20986),h=s(4780),v=s(30518),g=s(90924);const _="AssetListService";class AssetListService{get isFavoritesSelectedTag(){return"favorites"===this.selectedTag}initialize(){this.initSortField(),this.initCache()}onStop(){this.disposers.forEach((e=>{e()})),this.disposers=[]}handleTagToggle(e){this.selectedTag=e===this.selectedTag?void 0:e,this.selectedTag?((0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/filters",eventLabel:"".concat(this.project,"_").concat(e)}),void 0!==this.project&&this.storages[this.project].set("selectedTag",e)):void 0!==this.project&&this.storages[this.project].delete("selectedTag")}selectTag(e){this.selectedTag=e}clearFilters(){this.searchInput="",this.displayingSearchInput=""}selectSorting(e){let a=e.field,s=e.dir;this.sortFieldName===a&&this.sortFieldDirection===s||(this.sortFieldName=a,this.sortFieldDirection=s,this.saveSorting())}saveSorting(){void 0!==this.project&&(this.storages[this.project].set("sortFieldName",this.sortFieldName),this.storages[this.project].set("sortFieldDirection",this.sortFieldDirection));const e=this.sortings.find((e=>{let a=e.field,s=e.dir;return a===this.sortFieldName&&s===this.sortFieldDirection}));e&&(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/sort",eventLabel:"".concat(this.project,"_").concat((0,g.U)(e.id))})}setSortField(e,a){this.sortFieldName=e,this.sortFieldDirection=a,this.saveSorting()}searchInputEnter(e){/^\s/.test(e)||(this.setSearchInput(),this.displayingSearchInput=e,this.sendAnalytics(e))}toggleFavorite(e){this.pairService.toggleFavorite(e);this.pairService.favoriteAssets.has(e)?(0,c.L)((0,i.Z)({event:this.project===m.ik?"events_with_project_param":"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/add_to_favorite",eventLabel:"".concat(this.project,"_").concat(e)},this.project?{project_name:this.project}:{})):(0,c.L)((0,i.Z)({event:this.project===m.ik?"events_with_project_param":"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/delete_from_favorite",eventLabel:"".concat(this.project,"_").concat(e)},this.project?{project_name:this.project}:{}))}initCache(){if(!this.project)return;const e=h.N.getAllParams(),a=e.project,s=e.group;this.isCurrentProject(a)&&this.isTagExist(s)&&this.someOpenedAssetOfGroupExist(s)&&this.storages[this.project].set("selectedTag",s);const i=this.storages[this.project].get("selectedTag");i&&(this.selectedTag=i)}initSortField(){if(!this.project)return;const e=this.storages[this.project].get("sortFieldName"),a=this.storages[this.project].get("sortFieldDirection");e&&a&&(this.sortFieldName=e,this.sortFieldDirection=a)}isCurrentProject(e){return this.project===e}isTagExist(e){return!!e&&this.tags.some((a=>a.value===e))}someOpenedAssetOfGroupExist(e){const a=Number(e);return a>0?this.previewsCollection.some((e=>e.winperc&&e.winperc>=a)):"favorites"===e?this.previewsCollection.some((e=>e.favorite)):this.previewsCollection.some((a=>a.group===e&&!a.locked))}constructor(){this.sortings=[],this.disposers=[],this.storages={[m.c0]:new d._({namespace:"".concat(_,"_").concat(m.c0),backend:new u.u}),[m.yy]:new d._({namespace:"".concat(_,"_").concat(m.yy),backend:new u.u}),[m.ik]:new d._({namespace:"".concat(_,"_").concat(m.ik),backend:new u.u})},this.tags=[{name:"favorites",type:"favorites",value:"favorites"}],this.gaTM=0,this.sendAnalytics=(0,o.Z)((e=>{""!==e&&(0,c.L)((0,i.Z)({event:this.project===m.ik?"events_with_project_param":"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/search",eventLabel:"".concat(this.project,"_").concat(e)},this.project===m.ik?{project_name:"spt"}:{}))}),400),this.setSearchInput=(0,o.Z)((()=>{this.searchInput=this.displayingSearchInput}),300),this.previewsCollection=[],this.searchInput="",this.displayingSearchInput="",this.isReady=!1,this.sortFieldName=v.qi.ASSET,this.sortFieldDirection=p.B8.ASC}}(0,r.gn)([n.observable],AssetListService.prototype,"previewsCollection",void 0),(0,r.gn)([n.observable],AssetListService.prototype,"searchInput",void 0),(0,r.gn)([n.observable],AssetListService.prototype,"displayingSearchInput",void 0),(0,r.gn)([n.observable],AssetListService.prototype,"isReady",void 0),(0,r.gn)([n.observable],AssetListService.prototype,"sortFieldName",void 0),(0,r.gn)([n.observable],AssetListService.prototype,"sortFieldDirection",void 0),(0,r.gn)([n.observable],AssetListService.prototype,"selectedTag",void 0),(0,r.gn)([n.computed],AssetListService.prototype,"isFavoritesSelectedTag",null),(0,r.gn)([l.onStop],AssetListService.prototype,"onStop",null),(0,r.gn)([n.action.bound],AssetListService.prototype,"handleTagToggle",null),(0,r.gn)([n.action.bound],AssetListService.prototype,"selectTag",null),(0,r.gn)([n.action.bound],AssetListService.prototype,"clearFilters",null),(0,r.gn)([n.action.bound],AssetListService.prototype,"selectSorting",null),(0,r.gn)([n.action.bound],AssetListService.prototype,"setSortField",null),(0,r.gn)([n.action.bound],AssetListService.prototype,"searchInputEnter",null),(0,r.gn)([n.action.bound],AssetListService.prototype,"toggleFavorite",null)},44481:(e,a,s)=>{"use strict";s.d(a,{R:()=>i.R});var i=s(70726)},50071:(e,a,s)=>{"use strict";s.d(a,{j:()=>_,l:()=>g});var i=s(59312),r=s(60521),n=s(84829),o=s(28660),l=s(57615),c=s(29042),d=s(23735),u=s(26763),m=s(71662),p=s(4780),h=s(30518);function v(e){return!(!e||!["do","fx","spt"].includes(e))}let g=class AssetMenuService{onStart(e){e.availableProjects.ftt?this.selectTab("ftt"):e.availableProjects.fx?this.selectTab("fx"):e.availableProjects.spt&&this.selectTab("spt")}onBind(e,a,s,i){switch(p.N.getAllParams().tab){case"do":this.selectTab("ftt");break;case"fx":this.selectTab("fx");break;case"spt":this.selectTab("spt")}this.tradeManagerService=e,this.sideBarService=a,this.uiService=s,this.accountService=i,this.scenario=this.tradeManagerService.applyScenario(new m.O),this.createReaction()}createReaction(){this.disposers=[(0,r.reaction)((()=>this.project),(e=>{e&&e!==this.selectedTab&&this.selectTab(e)})),(0,r.reaction)((()=>{var e;return null===(e=this.tradeManagerService)||void 0===e?void 0:e.lastStartedFrame}),(0,n.Z)((e=>{e&&(0,r.runInAction)((()=>{this.framesStarted=!0}))}),300)),(0,r.reaction)((()=>this.framesStarted),(()=>{this.init()})),(0,r.reaction)((()=>{var e;return null===(e=this.tradeManagerService)||void 0===e?void 0:e.lastStoppedFrame}),(e=>{if(e&&e===this.tradeFrameId&&!this.isAssetSelecting){var a;const s=null===(a=this.tradeManagerService)||void 0===a?void 0:a.findTradeFrameByIdExept(e),i=p.N.getAllParams().tab;s&&!v(i)&&this.setTradeFrame(s.id)}})),(0,r.reaction)((()=>this.accountService.isCommonAccount(this.accountService.selectedAccount)),(()=>{var e;null===(e=this.sideBarService)||void 0===e||e.sideBarMinor.close()}))]}createTradeFrameReaction(){this.tradeFrameDisposers=[(0,r.reaction)((()=>{var e;return null===(e=this.tradeFrameService)||void 0===e?void 0:e.selectedPair.id}),(e=>{e&&e!==this.asset&&this.project&&this.updateAsset(e,this.project)}))]}init(){v(p.N.getAllParams().tab)||this.setTradeFrame(this.getTradeFrame()),this.initTip(),this.inited=!0}selectAsset(e,a){const s=this.getIntProject(a);return this.isAssetSelecting=!0,this.tradeManagerService.selectPairWithTradeFrameId(e,this.getExtProject(s),this.tradeFrameId).then((a=>(this.setTradeFrameService(a),this.updateAsset(e,s),(0,r.runInAction)((()=>{this.isAssetSelecting=!1})),a)))}handleSelect(e,a){var s,i,r;(this.selectAsset(e,a),(null===(s=this.uiService)||void 0===s?void 0:s.isMobilePortrait())||(null===(i=this.uiService)||void 0===i?void 0:i.isMobileLandscape()))&&(null===(r=this.sideBarService)||void 0===r||r.sideBarMinor.close());(0,d.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/open_asset",eventLabel:"".concat(this.getExtProject(a),"_").concat(e)})}handleTipOpen(e){void 0!==e&&(this.showTipDelay=e),this.showTip=!0,(0,d.L)({event:"uaGtmEvents_clicks",eventCategory:"tutorial_tip",eventAction:"show",eventLabel:"assets_here"})}handleTipClose(e){this.storage.delete("showTip"),this.showTip=!1,(0,d.L)({event:"uaGtmEvents_clicks",eventCategory:"tutorial_tip",eventAction:"hide/".concat(e),eventLabel:"assets_here"})}selectTab(e){this.selectedTab=e}setTradeFrame(e){const a=this.scenario.getFrameSettings(e);this.tradeFrameId=e,this.setTradeFrameService(this.scenario.getFrameService(e)),a&&(this.selectTab(this.getIntProject(a.project)),this.selectAsset(a.pairId,this.getIntProject(a.project)),this.storage.set("tradeFrameId",e))}setTradeFrameService(e){e&&(this.clearTradeFrameReaction(),this.tradeFrameService=e,this.createTradeFrameReaction())}onStop(){this.scenario=null,this.disposers.forEach((e=>{e()})),this.disposers=[]}onMount(e){this.isMounted=e}initTip(){var e;p.N.getAllParams().group&&this.storage.set("showTip",!0),this.showTip=null!==(e=this.storage.get("showTip"))&&void 0!==e&&e}updateAsset(e,a){this.asset=e,this.project=a}getTradeFrame(){var e,a;const s=this.storage.get("tradeFrameId");return(null===(e=this.tradeManagerService)||void 0===e?void 0:e.findTradeFrameById(s))?s:null===(a=this.tradeManagerService)||void 0===a?void 0:a.getSuitableFrame().id}clearTradeFrameReaction(){this.tradeFrameDisposers.forEach((e=>{e()})),this.tradeFrameDisposers=[]}getExtProject(e){return"fx"===e||"spt"===e?e:"bo"}getIntProject(e){return"fx"===e||"spt"===e?e:"ftt"}constructor(){this.isMounted=!1,this.disposers=[],this.tradeFrameDisposers=[],this.storage=new l._({namespace:u.ASSET_MENU_SERVICE,backend:new c.u}),this.inited=!1,this.selectedTab=h.Rp.FX,this.framesStarted=!1,this.isAssetSelecting=!1,this.showTip=!1,this.showTipDelay=1500,this.handleTipOpen=this.handleTipOpen.bind(this),this.handleTipClose=this.handleTipClose.bind(this)}};function _(e){return e(new g,{config:g.binderConfig})}(0,i.gn)([r.observable],g.prototype,"tradeFrameId",void 0),(0,i.gn)([r.observable],g.prototype,"asset",void 0),(0,i.gn)([r.observable],g.prototype,"inited",void 0),(0,i.gn)([r.observable],g.prototype,"project",void 0),(0,i.gn)([r.observable],g.prototype,"selectedTab",void 0),(0,i.gn)([r.observable],g.prototype,"framesStarted",void 0),(0,i.gn)([r.observable],g.prototype,"isAssetSelecting",void 0),(0,i.gn)([r.observable],g.prototype,"showTip",void 0),(0,i.gn)([r.observable],g.prototype,"showTipDelay",void 0),(0,i.gn)([(0,o.onStart)(u.APP_SERVICE)],g.prototype,"onStart",null),(0,i.gn)([(0,o.onBind)(u.TRADE_MANAGER_SERVICE,u.SIDEBAR_SERVICE,u.UI_SERVICE,u.ACCOUNT_SERVICE)],g.prototype,"onBind",null),(0,i.gn)([r.action],g.prototype,"selectAsset",null),(0,i.gn)([r.action],g.prototype,"handleSelect",null),(0,i.gn)([r.action],g.prototype,"handleTipClose",null),(0,i.gn)([r.action.bound],g.prototype,"selectTab",null),(0,i.gn)([o.onStop],g.prototype,"onStop",null),(0,i.gn)([r.action.bound],g.prototype,"onMount",null),(0,i.gn)([r.action],g.prototype,"initTip",null),(0,i.gn)([r.action],g.prototype,"updateAsset",null),g=(0,i.gn)([(0,o.bindAs)(u.ASSET_MENU_SERVICE)],g)},54892:(e,a,s)=>{"use strict";s.d(a,{c:()=>_});var i=s(37323),r=s(59312),n=s(60521),o=s(28660),l=s(62540),c=s(27076),d=s(66713),u=s(20986),m=s(26763),p=s(53088),h=s(44481),v=s(30518),g=s(86717);let _=class AssetListServiceSpt extends h.R{onStart(e){e.pairsGroupsSpt&&(this.tags=[...this.tags,...(0,l.Z)(e.pairsGroupsSpt)])}onBind(e,a,s,i){this.pairTrendsService=a,this.pairService=e,this.pairsRateUpdateService=s,this.stocksPortfolioService=i,this.isReady=!0,this.initialize()}initialize(){this.loading=!0,this.setPreviewsCollection(),this.loading=!1,this.pairsRateUpdateService.startUpdatePairRates(),super.initialize(),this.initReactions()}initReactions(){this.disposers=[(0,n.reaction)((()=>this.pairService.pairCollection.models.map((e=>({id:e.id,locked:e.locked,lockedReason:e.lockedReason,aliases:e.aliases,selected:e.selected,timeOpen:e.timeOpen,favorite:this.pairService.favoriteAssets.has(e.id)})))),(e=>{(0,n.runInAction)((()=>{e.forEach((e=>{var a;const s=null===(a=this.previewsCollection)||void 0===a?void 0:a.find((a=>a.id===e.id));s&&(s.aliases=e.aliases,s.locked=e.locked,s.lockedReason=e.lockedReason,s.selected=e.selected,s.timeOpen=e.timeOpen,s.favorite=e.favorite)}))}))})),(0,n.reaction)((()=>this.pairTrendsService.previews.models.map((e=>(0,i.Z)({},e)))),(()=>{(0,n.runInAction)((()=>{this.setPreviewsCollection()}))})),(0,n.reaction)((()=>(0,i.Z)({},this.pairsRateUpdateService.pairsRateHash)),(e=>{(0,n.runInAction)((()=>{Object.keys(e).forEach((a=>{var s;const i=null===(s=this.previewsCollection)||void 0===s?void 0:s.find((e=>e.id===a));var r,n;i&&(i.rate=null===(r=e[a])||void 0===r?void 0:r.rate,i.minRate=null===(n=e[a])||void 0===n?void 0:n.minRate)}))}))})),(0,n.reaction)((()=>this.pairService.favoriteAssets.size),(()=>{this.setPreviewsCollection()})),(0,n.reaction)((()=>(0,i.Z)({},this.stocksPortfolioService.positionsDetailsByCurrentAccountId)),(e=>{e&&this.previewsCollection.forEach((a=>{var s,i;a.quantity=null!==(i=null===(s=e[a.id])||void 0===s?void 0:s.quantity)&&void 0!==i?i:0}))})),(0,n.reaction)((()=>this.stocksPortfolioService.checkIsPortfolioExistForSelectedAccount()),(()=>{const e=(0,c.Z)(this.sortings);e&&this.selectSorting(e)}))]}setPreviewsCollection(){this.previewsCollection=[],this.pairService.pairCollection.models.forEach((e=>{var a;null===(a=this.previewsCollection)||void 0===a||a.push(g.k.parse(e,this.pairTrendsService.previews.getById(e.id),this.pairsRateUpdateService.pairsRateHash,"",this.pairService.favoriteAssets,this.stocksPortfolioService.getPositionQuantity(e.id)))}))}onStop(){this.disposers.forEach((e=>{e()})),this.disposers=[],this.pairsRateUpdateService.stopUpdatePairRates()}constructor(...e){super(...e),this.project=d.ik,this.disposers=[],this.sortings=[{id:v.W7.TITLE_ASC,field:v.qi.ASSET,dir:u.B8.ASC},{id:v.W7.TITLE_DESC,field:v.qi.ASSET,dir:u.B8.DESC},{id:v.W7.RATE_DESC,field:v.qi.RATE,dir:u.B8.DESC},{id:v.W7.RATE_ASC,field:v.qi.RATE,dir:u.B8.ASC}],this.loading=!1}};(0,r.gn)([n.observable],_.prototype,"loading",void 0),(0,r.gn)([(0,o.onStart)(m.APP_SERVICE)],_.prototype,"onStart",null),(0,r.gn)([(0,o.onBind)(m.PAIR_SERVICE_SPT,m.PAIR_TRENDS_SERVICE_FOREX,m.PAIRS_RATE_UPDATE_SERVICE_SPT,p.oi)],_.prototype,"onBind",null),(0,r.gn)([o.onStop],_.prototype,"onStop",null),_=(0,r.gn)([(0,o.bindAs)(m.ASSET_LIST_SERVICE_SPT)],_)},86717:(e,a,s)=>{"use strict";s.d(a,{k:()=>AssetPreviewModelSpt});var i=s(37323);class AssetPreviewModelSpt{static parse(e,a,s,r,n,o){var l,c;return{id:e.id,title:e.title,rate:s?null===(l=s[e.id])||void 0===l?void 0:l.rate:0,minRate:s?null===(c=s[e.id])||void 0===c?void 0:c.minRate:0,aliases:e.aliases,currency:e.currency,precision:e.precision,transTrim:e.transTrim,group:e.group,groupView:e.groupView,locked:e.locked,lockedReason:e.lockedReason,timeOpen:e.timeOpen,selected:e.id===r,previewData:a?(0,i.Z)({},a):void 0,favorite:n.has(e.id),quantity:o}}}},51275:(e,a,s)=>{"use strict";s.d(a,{c:()=>i.c});var i=s(54892)},22921:(e,a,s)=>{"use strict";s.d(a,{GY:()=>S});var i=s(27378),r=s(73598),n=s(25123),o=s(54172),l=s(96667),c=s(13424),d=s(72655),u=s(95973),m=s(42163),p=s(51275),h=s(13636),v=s(9446),g=s(77063),_=s(27465);const f=e=>{let a=e.iShowRecommended,s=e.assetListServiceSpt;const o=i.useRef(null);return i.createElement(n.mc,null,i.createElement(n.mc.List,null,i.createElement(n.mc.ListScroll,{ref:o},i.createElement(n.mc.Header,null,a&&i.createElement(h.r,null),i.createElement(n.mc.HeaderSearch,null,i.createElement(v.b,null),i.createElement(_.v,null)),i.createElement(r.Qj,null,(()=>s.searchInput?null:i.createElement(i.Fragment,null,i.createElement(n.mc.HeaderTags,null,i.createElement(m.A,null)))))),i.createElement(g.l,{scrollRef:o}),i.createElement(u.F,{scrollRef:o}))))};f.displayName="spt(AssetMenuSptLayout)";const E=()=>{const e=i.useRef(null);return i.createElement(n.mc,null,i.createElement(n.mc.Header,null,i.createElement(n.mc.HeaderSearch,null,i.createElement(v.b,{minimized:!0}))),i.createElement(n.mc.List,null,i.createElement(n.mc.ListScroll,{ref:e},i.createElement(g.l,{minimized:!0,scrollRef:e}),i.createElement(u.F,{scrollRef:e}))))};E.displayName="spt(AssetMenuSptLayoutMin)";const S=(0,o.zt)((e=>{let a=e.assetListServiceSpt,s=e.iShowRecommended;return e.minimized?i.createElement(E,null):i.createElement(f,{iShowRecommended:s,assetListServiceSpt:a})}),{helper(e,a){let s=e.assetListServiceSpt,i=e.sideBarService;return{iShowRecommended:a.iShowRecommended,minimized:i.sideBarMinor.minimized,assetListServiceSpt:s,sideBarService:i}},services:[[p.c,()=>new p.c],[d.o,()=>new d.o(l.Z)],c.G]})},38253:(e,a,s)=>{"use strict";s.d(a,{l:()=>m});var i=s(27378),r=s(73598),n=s(23735),o=s(25123),l=s(18207),c=s(11717),d=s(29063),u=s(35145);const m=e=>{let a=e.items,s=e.selectedAssetId,m=e.minimized,p=e.onToggleFavorite,h=e.onSelect,v=e.onClickInfo,g=e.isFavorite,_=e.searchInput,f=e.scrollRef,E=e.windowHeight;const S=i.useCallback(((e,a)=>{p(e,a)}),[p]),y=i.useCallback((e=>{h(e)}),[h]),b=i.useCallback((e=>{v(e),(0,n.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/info_click",eventLabel:"spt_".concat(e)})}),[v]),C=i.useRef(null),T=(0,d.o)(_,g);return a.length?i.createElement(u.G,{items:a,scrollRef:f,windowHeight:E},((e,a)=>{const n=s===e.id;return i.createElement(r.Qj,null,(()=>m?i.createElement(o.Rm,{ref:n?C:null,key:e.id,id:e.id,icon:i.createElement(c.Y,{pairName:e.id}),title:e.title,selected:n,locked:e.locked,subtitle:i.createElement(l.px,{value:e.minRate,currency:e.currency,contrasted:!0}),isFavorite:e.favorite,highlightFavorite:!0,toggleFavorite:S,onClickInfo:b,onClick:y}):i.createElement(o.si,{key:e.id,id:e.id,icon:i.createElement(c.Y,{pairName:e.id}),title:e.title,subtitle:e.locked&&e.timeOpen?i.createElement(o.gU,{timeOpen:e.timeOpen}):i.createElement(l.px,{value:e.rate,currency:e.currency,contrasted:!0}),selected:s===e.id,locked:e.locked,timeOpen:e.timeOpen,value:i.createElement(l.px,{value:e.minRate,currency:e.currency}),isFavorite:e.favorite,highlightFavorite:!0,invisible:!a,toggleFavorite:S,onClick:y,onClickInfo:b})))})):i.createElement(i.Fragment,null,T)};m.displayName="AssetMenu(spt)(components)(AssetList)"},67806:(e,a,s)=>{"use strict";s.d(a,{u:()=>l});var i=s(27378),r=s(17302),n=s(82844),o=s(60561);const l=e=>e.iShowRecommended?i.createElement("span",{className:o.Z.title},i.createElement(n._,{id:"ct_spt_trade_mode_name",defaultMessage:"Stocks"}),i.createElement(r.Ct,{color:"accent",content:"NEW"})):i.createElement(n._,{id:"ct_spt_trade_mode_name",defaultMessage:"Stocks"});l.displayName="AssetMenu(spt)(components)(AssetsMenuTitle)"},82824:(e,a,s)=>{"use strict";s.d(a,{u:()=>i.u});var i=s(67806)},94532:(e,a,s)=>{"use strict";s.d(a,{e:()=>u});var i=s(27378),r=s(82844),n=s(25123),o=s(18207),l=s(27967),c=s(11717),d=s(41400);const u=e=>{let a=e.onClick,s=e.assets,u=e.selectedAssetId;const m=i.useMemo((()=>null==s?void 0:s.filter((e=>{var a;return null===(a=e.groupView)||void 0===a?void 0:a.includes(l.Qm.STOCKS_RECOMMENDED)}))),[s]);return i.createElement("div",null,i.createElement("div",{className:d.Z.textBlock},i.createElement(r._,{className:d.Z.text,id:"stocks_list_banner_description",defaultMessage:"The stocks our users choose to purchase most often."})),(null==m?void 0:m.length)&&i.createElement(n.By,{headerStart:i.createElement(r._,{id:"assets_list_sort_name",defaultMessage:"Name"}),headerEnd:i.createElement(r._,{id:"assets_list_sort_spt_mid",defaultMessage:"Mid Price"})}),null==m?void 0:m.map((e=>i.createElement(n.si,{key:e.id,id:e.id,icon:i.createElement(c.Y,{pairName:e.id}),title:e.title,selected:u===e.id,locked:e.locked,timeOpen:e.timeOpen,value:i.createElement(o.px,{value:e.rate,currency:e.currency}),isFavorite:e.favorite,highlightFavorite:!0,onClick:a}))))};u.displayName="AssetMenu(spt)(components)(AssetsRecommended)"},30077:(e,a,s)=>{"use strict";s.d(a,{e:()=>i.e});var i=s(94532)},75366:(e,a,s)=>{"use strict";s.d(a,{r:()=>u});var i=s(27378),r=s(82844),n=s(11717),o=s(27967),l=s(7242),c=s(87401),d=s(7657);const u=e=>{let a=e.assets,s=e.onClick;var u;const m=i.useMemo((()=>null==a?void 0:a.filter((e=>{var a;return null===(a=e.groupView)||void 0===a?void 0:a.includes(o.Qm.STOCKS_RECOMMENDED)}))),[a]);return i.createElement("div",{className:l.Z.preview},i.createElement("div",{className:l.Z.infoBlock,onClick:s},i.createElement("div",{className:l.Z.textBlock},i.createElement("div",{className:l.Z.title},i.createElement(d.G,null)),i.createElement("div",{className:l.Z.text},i.createElement(r._,{id:"stocks_list_banner_description",defaultMessage:"The stocks our users choose to purchase most often."}))),i.createElement("div",null,i.createElement("img",{className:l.Z.arrow,src:c,alt:""}))),i.createElement("div",{className:l.Z.infoIcons},null===(u=null==m?void 0:m.slice(0,8))||void 0===u?void 0:u.map((e=>i.createElement(n.Y,{className:l.Z.image,key:e.id,pairName:e.id})))))};u.displayName="AssetMenu(spt)(components)(AssetsRecommendedPreview)"},69384:(e,a,s)=>{"use strict";s.d(a,{r:()=>i.r});var i=s(75366)},7657:(e,a,s)=>{"use strict";s.d(a,{G:()=>n});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{id:"stocks_list_banner_title",defaultMessage:"Most Popular Stocks"});n.displayName="AssetMenu(spt)(components)(AssetRecommendedTitle)"},22183:(e,a,s)=>{"use strict";s.d(a,{Ge:()=>r.G,eN:()=>i.e,r7:()=>n.r});var i=s(30077),r=s(7657),n=s(69384)},77063:(e,a,s)=>{"use strict";s.d(a,{l:()=>_});var i=s(24459),r=s(27378),n=s(23735),o=s(66713),l=s(54172),c=s(83920),d=s(41520),u=s(51275),m=s(50071),p=s(61119),h=s(38253),v=s(30518),g=s(69391);const _=(0,l.zt)((e=>{var a=e.showHeader,s=(0,i.Z)(e,["showHeader"]);return r.createElement(r.Fragment,null,a?r.createElement(g.e,{minimized:s.minimized}):null,r.createElement(h.l,Object.assign({},s)))}),{helper(e,a){let s=e.assetListServiceSpt,i=e.assetMenuService,r=e.navigationService,l=e.uiService,c=a.minimized,d=a.scrollRef;const u=(0,p.G)(s.previewsCollection,s.sortFieldName,s.sortFieldDirection,s.searchInput,s.tags.find((e=>e.value===s.selectedTag)))||[];return s.loading?void 0:{showHeader:u.length>0,windowHeight:l.windowHeight,minimized:c,scrollRef:d,isFavorite:s.isFavoritesSelectedTag&&!s.searchInput,searchInput:s.searchInput,selectedAssetId:"spt"===i.project&&i.asset?i.asset:null,items:u,onToggleFavorite(e){s.toggleFavorite(e)},onClickInfo:e=>{var a;null==r||null===(a=r.ovlPlusNavigation)||void 0===a||a.goToAssets({assetId:e,embeddedLocation:v.C$,project:o.ik})},onSelect:e=>{i.handleSelect(e,"spt"),(0,n.L)({event:"events_with_project_param",eventCategory:"main_chart",eventAction:"assets_menu/open_asset",eventLabel:"spt_".concat(e),project_name:"spt"})}}},services:[u.c,m.l,c.f,d.Fz]})},69391:(e,a,s)=>{"use strict";s.d(a,{e:()=>o});var i=s(27378),r=s(82844),n=s(25123);const o=e=>{let a=e.minimized;return i.createElement(n.By,{headerStart:!a&&i.createElement(r._,{id:"st_assets_list_name_price",defaultMessage:"Name, Ask Price"}),headerEnd:a?null:i.createElement(r._,{id:"st_list_minimum",defaultMessage:"Min purchase amount"}),headerEndTooltip:a?null:i.createElement(r._,{id:"st_list_minimum_tooltip",defaultMessage:"The price of the minimum share fraction available for purchase"})})};o.displayName="spt(AssetListHeaderComponent)"},9446:(e,a,s)=>{"use strict";s.d(a,{b:()=>c});var i=s(27378),r=s(25123),n=s(54172),o=s(51275);const l=e=>{let a=e.value,s=e.minimized,n=e.onChange;return i.createElement(r.LW,{value:a,onChange:n,minimized:s})};l.displayName="spt(AssetSearchComponent)";const c=(0,n.zt)(l,{helper(e,a){let s=e.assetListServiceSpt;return{minimized:a.minimized,value:s.displayingSearchInput,onChange:s.searchInputEnter}},services:[o.c]})},67190:(e,a,s)=>{"use strict";s.d(a,{N:()=>u});var i=s(23735),r=s(54172),n=s(28963),o=s(13424),l=s(14803),c=s(62799),d=s(50071);const u=(0,r.zt)(c.A,{helper(e,a){let s=e.assetMenuService,r=e.tradeFrameService,n=e.sideBarService,o=a.isMobile;const c=r.selectedPair;return{id:c.id,title:c.title,isMobile:o,badge:"st",badgeColor:"positive",active:n.sideBarMinor.isPanelOpened("assets")&&r.tradeFrameId===s.tradeFrameId,onClick:()=>{r.tradeFrameId===s.tradeFrameId?n.toggleMinor(l.KO.ASSETS):(s.setTradeFrame(r.tradeFrameId),n.goToMinor(l.KO.ASSETS)),n.sideBarMinor.isPanelOpened("assets")&&(0,i.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/open_menu",eventLabel:"from_chart"})}}},services:[d.l,n.z2,o.G]})},27465:(e,a,s)=>{"use strict";s.d(a,{v:()=>l});var i=s(27076),r=s(25123),n=s(54172),o=s(51275);const l=(0,n.zt)(r.du,{helper(e){let a=e.assetListServiceSpt;var s;return{items:a.sortings,selectSorting:a.selectSorting,selectedSorting:null!==(s=a.sortings.find((e=>{let s=e.field,i=e.dir;return s===a.sortFieldName&&i===a.sortFieldDirection})))&&void 0!==s?s:(0,i.Z)(a.sortings)}},services:[o.c]})},42163:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var i=s(27378),r=s(25123),n=s(54172),o=s(51275);const l=(0,n.zt)((e=>{let a=e.tags,s=e.selectedTag,n=e.onTagSelect;return i.createElement(r.Id,{items:a,selectedTag:s,onClick:n})}),{helper(e){let a=e.assetListServiceSpt;return{tags:a.tags,selectedTag:a.selectedTag,onTagSelect:a.handleTagToggle}},services:[o.c]})},13636:(e,a,s)=>{"use strict";s.d(a,{r:()=>d});var i=s(54172),r=s(23735),n=s(51275),o=s(13424),l=s(22183),c=s(14803);const d=(0,i.zt)(l.r7,{helper(e){let a=e.assetListServiceSpt,s=e.sideBarService;return{onClick:()=>{(0,r.L)({event:"events_with_project_param",eventCategory:"top_first_purchases",eventAction:"banner_click",eventLabel:"banner_click",project_name:"spt"}),s.sideBarMinor.openById(c.KO.ASSETS_RECOMMENDED)},assets:a.previewsCollection}},services:[n.c,o.G]})},3893:(e,a,s)=>{"use strict";s.d(a,{GY:()=>i.GY});var i=s(22921)},61119:(e,a,s)=>{"use strict";s.d(a,{G:()=>l});var i=s(10008),r=s(30518),n=s(72725),o=s(24715);function l(e,a,s,l,c){let d=r.q4,u=r.U3;r.Bd[a]&&(d=[...r.q4,r.Bd[a]],u=[...r.U3,s]);let m=(0,i.Z)(e,d,u);return l?m=(0,n.T)(m,l):c&&(m=(0,o.z)(m,c)),m}},72725:(e,a,s)=>{"use strict";s.d(a,{T:()=>r});var i=s(54551);function r(e,a){if(0===a.length)return e;const s=a.replace(/[.*+?^${}()|[\]\\\/]/g,""),r={winperc:/^(\d)(\d)$/.exec(s),trans:/([A-z&-]+)?(\d+)?/.exec(s)};let n=[],o=[],l=[];if(r.trans){if(r.trans[1]){const a=new RegExp(r.trans[1],"i");n=e.filter((e=>a.test(e.transTrim)||a.test(e.id)||a.test(e.aliases.join(" "))))}if(r.trans[2]){const a=new RegExp(r.trans[2],"i");o=e.filter((e=>a.test(e.transTrim)||a.test(e.aliases.join(" "))))}}if(r.winperc&&Array.isArray(r.winperc)){const a=new RegExp("".concat(r.winperc[1],"[").concat(r.winperc[2],"-9]"),"i");l=e.filter((e=>a.test("".concat(e.winperc))&&!e.locked))}return(0,i.Z)(n.concat(o,l),"id")}},24715:(e,a,s)=>{"use strict";s.d(a,{z:()=>r});var i=s(27967);function r(e,a){switch(a.type){case"group":return((e,a)=>{const s=Object.values(i.Qm).includes(a)?a:null;return s?e.filter((e=>e.groupView.includes(s))):e})(e,a.value);case"winperc":return((e,a)=>{const s=Number(a)>0?Number(a):null;return s?e.filter((e=>"number"==typeof e.winperc&&e.winperc>=s)):e})(e,a.value);case"favorites":return(e=>e.filter((e=>e.favorite)))(e);default:return e}}},90924:(e,a,s)=>{"use strict";s.d(a,{U:()=>r});var i=s(30518);const r=e=>i.JV[e]},58659:(e,a,s)=>{"use strict";s.d(a,{Hs:()=>q});var i=s(59312),r=s(27076),n=s(98064),o=s(63247),l=s(60521),c=s(28660),d=s(80080),u=s(68472),m=s(26763),p=s(57615),h=s(29042),v=s(19669),g=s(49181),_=s(93979),f=s(82571),E=s(37323),S=s(98484);function y(e,a){let s=a.libType;const i=e.id,r=e.amount,n=e.dir,o=e.timeOpen,l=e.priceOpen,c=e.duration,d=e.currency;return{id:i,cursOpen:l,amount:r,timeOpen:o,timeClose:o+c,direction:"up"===n?0:1,trailingStop:0,libType:s,stopLoss:0,takeProfit:0,commission:0,multiplicator:0,takeProfitMax:0,takeProfitMin:0,stopLossMax:0,stopLossMin:0,currency:(0,S.Y)(d),currencyName:d,stopOut:0,riskfree:0,return:0,attractDealToChart:!0}}class BattleRoomDealsService{updateInputs(e){if(this.inputs=(0,E.Z)({},this.inputs,e),e.dealAdded&&(this.deals.some((a=>e.dealAdded&&a.id===e.dealAdded.id))||this.deals.push((0,E.Z)({},e.dealAdded)),e.dealAdded.asset.id===this.inputs.asset&&this.api.addDeal(y(e.dealAdded,{libType:1}),1)),e.dealRemoved){const a=this.deals.findIndex((a=>e.dealRemoved&&a.id===e.dealRemoved.id));void 0!==a&&(this.deals=[...this.deals.slice(0,a),...this.deals.slice(a+1)]),e.dealRemoved.asset.id===this.inputs.asset&&this.api.removeDeal(e.dealRemoved.id)}e.deals&&(this.deals=[...e.deals],this.setDeal(this.deals))}reset(){this.api.removeAllDealsWithType(1),this.setDeal(this.deals)}setDeal(e){if(e&&e.length){const a=e.filter((e=>this.inputs.asset===e.asset.id));a.length&&this.api.setDeals(a.map((e=>y(e,{libType:1}))),1)}}constructor(e,a){this.deals=[],this.api=e,this.inputs=a}}var b=s(84974),C=s(5131),T=s(15221),A=s(29019),k=s(37363),w=s(8275),N=s(53323),R=s(22895),I=s(59925),D=s(57307),O=s(65307),L=s(6143),M=s(35770),P=s(71221),x=s(72785);var F=s(74209),B=s(93824),Z=s(33795),U=s(91226),H=s(23735),G=s(80123),V=s(15209);const W=class Actions{constructor(e){e.em.actions.on({quickDealSaleCallback:a=>{e.dealsService.handleDealSell(a)},onDealSelect:a=>{e.dealsService.handleDealSelect(a)},onDealUnSelect:()=>{e.dealsService.handleDealUnSelect(1)},onOrderSelect:a=>{e.ordersService.handleOrderSelect(a)},onOrderCanceled:a=>{e.ordersService.handleOrderCancel(a)},onStrikeSelect:a=>{e.strikeService.selectStrike(a)},onGetHistory:a=>{(0,G.A)(e,a)},onClearDrawingPoints:()=>{},onDrawingPointEdited:a=>{let s=a.drawingId,i=a.timestamp,r=a.quote;V.s.emit("drawingPointEdit",{tradeFrameId:e.tradeFrameId,payload:{drawingId:s,point:{timestamp:i,quote:r}}}),e.drawingService.handleDrawingPointEdited(s,i,r)},onDrawingEdited:a=>{let s=a.drawingId;V.s.emit("drawingEdited",{tradeFrameId:e.tradeFrameId,payload:{drawingId:s}}),e.drawingService.handleDrawingEdited(s)},onSetAdviserPosition(a){let s=a.position,i=a.id;e.advisorService.handleSetAdvisorPosition(s,i),V.s.emit("adviserPosition",{tradeFrameId:e.tradeFrameId,payload:{position:s,id:i}})},onAdviserSignal(a){let s=a.signal,i=a.direction,r=a.expiration,n=a.stopLoss,o=a.id;e.advisorService.handleAdvisorSignal(s,i,r,n,o),V.s.emit("adviserSignal",{tradeFrameId:e.tradeFrameId,payload:{signal:s,direction:i,expiration:r,stopLoss:n,id:o}})},onTimeIntervalChange(a){let s=a.timeInterval,i=a.timeFrame,r=a.startDate,n=a.endDate;e.zoomService.handleTimeIntervalChange(s,i,r,n)},onSaveChartState(a){e.saveChartSettings(a)},restoreActualData(){e.zoomService.initialSubscribe()},onAddNotificationLevel:a=>{e.priceLevelService.createSub({price:Number(a.toFixed(e.tradeFrameService.selectedPair.precision)),pair:String(e.candleService.pair),project:"ftt"}).catch((a=>{a&&a.mess&&e.showNotice("NotificationLevel",{type:"error",message:a.mess})})),(0,H.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/notifications",eventAction:"amount_level/click",eventLabel:"ftt_".concat(e.candleService.pair)})},onEditNotificationLevel:(a,s)=>{e.priceLevelService.updateSub(a,s).catch((a=>{a&&a.mess&&e.showNotice("NotificationLevel",{type:"error",message:a.mess})}))},onRemoveNotificationLevel:a=>{e.priceLevelService.removeSub(a).catch((a=>{a&&a.mess&&e.showNotice("NotificationLevel",{type:"error",message:a.mess})})),(0,H.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/notifications",eventAction:"amount_level/delete",eventLabel:"ftt_".concat(e.candleService.pair)})},onChartVerticalZoomChanged(a){e.zoomService.handleChartVerticalZoomChanged(a)},onLastCandlePositionChanged(a){e.zoomService.handleLastCandlePositionChanged(a)},onRequestData(a){let s=a.timeFrame,i=a.startDate,r=a.count;e.handleRequestData({timeFrame:s,startDate:i,count:r})},onDrawingSelected(a){V.s.emit("selectDrawing",{tradeFrameId:e.tradeFrameId,payload:{drawingId:a}}),e.drawingService.selectDrawing(a)},onDrawingUnselected(){V.s.emit("unSelectDrawing",{tradeFrameId:e.tradeFrameId}),e.drawingService.selectDrawing(void 0)}},this)}},j="zoomSettings",z="chartState";let q=class ChartStore{get timeFrames(){return this.rateService.rateCollection?this.rateService.rateCollection.models.filter((e=>e.format===this.tradeFrameService.selectedRate.format)).map((e=>({id:e.id,step:e.step,range:e.range,format:e.format}))):[]}get deals(){return this.loadingRate?[]:this.dealCurrentService?this.dealCurrentService.collection.models.filter((e=>e.pair===this.candleService.pair)):[]}get precision(){return this.tradeFrameService.selectedPair.precision}get loadingRate(){return this.candleService.isSubscribeAndHistory}get loadingPair(){return this.candleService.pair!==this.tradeFrameService.selectedPair.id}get orders(){return this.loadingRate?[]:this.dealOrderService?this.dealOrderService.collection.models.filter((e=>e.pair===this.candleService.pair)):[]}get strikes(){return this.dealService.strikesVisible&&!this.strikeService.strikeCollection?[]:this.tradeFrameService.selectedPair.locked||!this.dealService.strikesVisible||this.strikeService.locked||this.loadingRate||this.loadingPair?[{id:0,delta:0,selected:!0,winpercUp:0,winpercDown:0}]:this.strikeService.strikeCollection.models.map((e=>({id:e.id,delta:e.delta,selected:e.selected,winpercUp:e.winpercUp,winpercDown:e.winpercDown})))}get news(){if(this.loadingRate)return[];const e="EURUSD"===this.candleService.pair,a=Number(this.candleService.rate)>=2419200;return this.chartNewsService.chartNewsCollection.filter((s=>e&&!a||s.type!==k.k9.NON_FARM))}get zoomStateKey(){var e;return this.candleService.selectedRate&&"line"===(null===(e=this.candleService)||void 0===e?void 0:e.selectedRate.format)?j:j+String(this.candleService.rate)}waitingForChartInit(){return new Promise((e=>{(0,l.when)((()=>this.inited&&!this.zoomService.isChartUpdating&&!this.candleService.isSubscribeAndHistory),(()=>{e()}))}))}showDealOnChart(e){this.dealsService.showHistoryDealWithScroll(e)}removeDealFromChart(){(0,l.when)((()=>this.inited),(()=>{this.dealsService.removeHistoryDeal()}))}onStart(e){return this.appService=e,!0}onBind(e,a,s,i,r,n,o,l,c,d,u,m,p,h,v,g){this.candleService=e,this.chartNewsService=a,this.dealService=s,this.languageService=i,this.priceLevelService=r,this.rateService=n,this.strikeService=o,this.timeService=l,this.tradeFrameService=c,this.tradeManagerService=d,this.uiService=u,this.navigationService=m,this.sideBarService=p,this.accountService=v,this.noticeService=h,this.pairService=g}onBindDealFormStore(e){this.dealFormStore=e}componentDidMount(e,a,s,i){if(!this.candleService)return;const r=this;this.height=s,this.width=a,this.em.init(i).then((()=>{var e=this;if(i){const e=i.getAttribute("id");e&&this.em.api.commonApi.setInputCallbacksTarget(e)}window.__chartGlInfo={version:String(this.em.api.commonApi.getChartVersion()),commitSHA:String(this.em.api.commonApi.getChartCommitSHA())},(0,Z.vs)(this.em._instance),this.drawingService=new b.T(this.em.api.drawingApi,(()=>{}),(()=>{}),((e,a)=>{this.tradeManagerService.localStorageCache.setCache(e,this.tradeFrameId,a)}),(e=>this.tradeManagerService.localStorageCache.getCache(e,this.tradeFrameId))),this.advisorService=new C.q(this.em.api.advisorApi,((e,a)=>{this.tradeManagerService.localStorageCache.setCache(e,this.tradeFrameId,a)}),(e=>this.tradeManagerService.localStorageCache.getCache(e,this.tradeFrameId)),((e,a)=>{a&&(this.dealFormStore.setPickerTypeByApi("duration"),this.dealFormStore.setDurationByApi(a),this.dealFormStore.setTimePickerLocked(!0)),e?this.dealFormStore.setUpButtonLocked(!0):this.dealFormStore.setDownButtonLocked(!0),this.dealFormStore.setOrderButtonLocked(!0)}),(()=>{this.dealFormStore.setUpButtonLocked(!1),this.dealFormStore.setDownButtonLocked(!1),this.dealFormStore.setOrderButtonLocked(!1),this.dealFormStore.setTimePickerLocked(!1)})),this.dealsService=new A.D(this.em.api.dealsApi,{deals:[],userSelectedId:null,get serverTime(){return r.timeService.serverTime},duration:this.dealFormStore.duration,timeClose:this.dealFormStore.timeClose,pickerType:this.dealFormStore.pickerType,getParseOptions:()=>({libType:1,locked:this.tradeFrameService.selectedPair.locked,lockedTrading:this.tradeFrameService.selectedPair.lockedTrading}),parseDeal:(e,a)=>function(e,a,s){let i=a.libType,r=a.locked,n=a.lockedTrading;const o=e.id,l=e.sum,c=e.dir,d=e.timeOpen,u=e.timeCourseOpen,m=e.timeClose,p=e.cursOpen,h=e.currency,v=e.riskfree,g=e.category,_=e.cursStrike,f=u||d,E=s&&e.sum<s.min;return{id:o,cursOpen:(g===x.TP.DIGITAL?_:p)||-1,amount:l,timeOpen:f,timeClose:m||0,direction:"up"===c?0:1,trailingStop:0,libType:i,stopLoss:0,takeProfit:0,commission:0,multiplicator:0,takeProfitMax:0,takeProfitMin:0,stopLossMax:0,stopLossMin:0,currency:(0,S.Y)(h),currencyName:h,stopOut:0,riskfree:v?1:0,return:r||n||!e.return||E?0:e.return,attractDealToChart:e.cursStrike===e.cursOpen}}(e,a,this.dealService.dealAmounts[e.currency]),onDealSelect:e=>{var a;e&&(null===(a=this.dealCurrentService)||void 0===a||a.selectDeal(e,!0))},onDealUnSelect:()=>{var e;null===(e=this.dealCurrentService)||void 0===e||e.unselectDeal()},onDealSell:e=>{var a;e&&(null===(a=this.dealCurrentService)||void 0===a||a.cancelDeal(e).catch((e=>{this.showNotice("chart-deal-cancel",{type:"error",message:e.message})})))},prepareGamblingDeals:e=>{this.zoomService&&(this.zoomService.api.setHorizontalZoomEnabled(!e),this.zoomService.api.setVerticalZoomEnabled(!e),this.zoomService.api.setScrollEnabled(Number(!e)))},setMaxZoom:()=>{this.setMaxZoom()},restoreMaxZoom:()=>{this.zoomService.setZoom(600),this.zoomService.api.setVisibleTimeInterval(600)},scrollToDeal:e=>{this.zoomService.scrollToTimestamp(e.timeOpen,this.pairService.getOrGeneratePair(e.pair).quick)},getPair:e=>this.pairService.getOrGeneratePair(e)}),this.battleRoomDealsService=new BattleRoomDealsService(this.em.api.dealsApi,{emModule:this.em._instance,asset:this.tradeFrameService.selectedPair.id}),this.ordersService=new F.N(this.em.api.ordersApi,{orders:[],userSelectedId:null,parseOrder:e=>(0,F.f)(e),onOrderSelect:e=>{var a;e&&(null===(a=this.dealOrderService)||void 0===a||a.selectOrder(e))},onOrderCancel:e=>{var a;e&&(null===(a=this.dealOrderService)||void 0===a||a.cancelOrder(e))}}),this.zoomService=new T.B(this.em.api.viewportApi,{getPair:()=>this.candleService.pair||"",getRate:e=>{if(e.id)this.rateService.getRate(e.id);else{if(e.step)return this.rateService.getRateByTimeFrameAndFormat(e.step,this.tradeFrameService.selectedRate.format);if(e.format)return this.tradeFrameService.getRateByFormat(e.format)}},getSelectedRate:()=>this.tradeFrameService.selectedRate,subscribeAndHistory:(e,a)=>this.candleService.subscribeAndHistory({id:this.tradeFrameService.selectedPair.id,locked:this.tradeFrameService.selectedPair.locked},this.tradeFrameService.rateId,e,a),selectRateById:e=>this.tradeFrameService.selectedRate.id!==e&&(this.tradeFrameService.selectRate(e),!0),updateChart:function(a,s,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.initChart(a,s,i,r)},setChartType:()=>{this.initChart()}}),this.zoomService.updateChartWidth(a),this.notificationLevelService=new D.m(this.em.api.notificationLevelApi),(0,l.runInAction)((()=>{this.chartActions=new W(this),this.chartReady=!0,(0,u.x)("bo"),this.candleService.socketOpened?(this.createReactions(),this.createReactionsCandles()):this.disposers.push((0,l.when)((()=>this.candleService.socketOpened),(()=>{this.createReactions(),this.createReactionsCandles()})))})),this.handleBattleRoomDeals(),this.rendererLoaded=!0,v.Sv.stopMark(v.Sv.PerformanceMetric.FirstChartContent)}))}onResizeWidth(e){this.width=e,this.zoomService&&this.zoomService.updateChartWidth(e)}onResizeHeight(e){this.height=e}createOrdersReactions(){this.dealOrderService&&this.disposers.push((0,l.reaction)((()=>this.dealOrderService&&this.dealOrderService.userSelectedOrder),(e=>{e&&this.ordersService.updateInputs({userSelectedId:e.id})})),(0,l.reaction)((()=>this.orders.map((e=>"".concat(e.id," ").concat(String(e.selected)))).join(",")),(()=>{this.ordersService.updateInputs({orders:this.orders})})))}createDealsReactions(){this.dealCurrentService&&this.disposers.push((0,l.reaction)((()=>this.deals.map((e=>"".concat(e.id," ").concat(String(e.selected)," ").concat(String(e.return)," ").concat(String(e.balanceChange)))).join(",")),(()=>{this.zoomService.isChartUpdating||this.dealsService.updateInputs({deals:this.deals})})),(0,l.reaction)((()=>this.dealCurrentService&&this.dealCurrentService.userSelectedDeal),(e=>{this.dealsService.updateInputs({userSelectedId:e?e.id:null})})),(0,l.reaction)((()=>this.sideBarService.sideBarMajor.isOpen),(e=>{const a=this.sideBarService.sideBarMajor;var s;a.scope.activeItem&&a.scope.activeItem.id===w.KO.TRADES&&this.uiService.isMobilePortrait()&&!e&&((null===(s=this.dealCurrentService)||void 0===s?void 0:s.selectedDeal)&&this.dealsService.api.unselectDeal(this.dealCurrentService.selectedDeal.id))}),{name:"ReactionSideBarIsOpenChanged"}))}createReactions(){this.disposers.push((0,l.reaction)((()=>this.candleService.serverTime),(e=>{!e||this.candleService.connectionError||this.tradeFrameService.selectedPair.locked||this.em.api.commonApi.setServerTime(e)}),{fireImmediately:!0}),(0,l.reaction)((()=>this.news.map((e=>"".concat(e.id," ").concat(e.time," ").concat(e.title))).join(",")),(()=>{this.setNews(this.news)}),{fireImmediately:!0}),(0,l.reaction)((()=>this.strikes.map((e=>"".concat(e.id," ").concat(e.delta," ").concat(String(e.selected)," ").concat(e.winpercUp," ").concat(e.winpercDown))).join(",")),(()=>{this.em.api.strikesApi.setStrikes((0,l.toJS)(this.strikes).map(U.Xb))})),(0,l.reaction)((()=>this.uiService.theme),(e=>{this.em.api.commonApi.setJsonColorScheme((0,L.H0)(e),{borderEnabled:!0})}),{fireImmediately:!0}),(0,l.reaction)((()=>"".concat(this.width," ").concat(this.height)),(()=>{this.chartReady&&this.em.api.commonApi.resize(this.width,this.height)})),(0,l.reaction)((()=>this.tradeFrameService.selectedPair.locked),(()=>{this.tradeFrameService.selectedPair.locked&&this.em.api.strikesApi.setStrikes([{id:0,delta:0,selected:!0}].map(U.Xb))})),(0,l.reaction)((()=>"".concat(this.dealFormStore.duration," ").concat(this.dealFormStore.timeClose,"\n        ").concat(this.dealFormStore.pickerType)),(()=>{this.dealsService.updateInputs({duration:this.dealFormStore.duration,timeClose:this.dealFormStore.timeClose,pickerType:this.dealFormStore.pickerType})}),{fireImmediately:!0}),(0,l.reaction)((()=>this.loadingRate||!this.inited?[]:this.getLevelNotifications()),(e=>{this.inited&&this.notificationLevelService.setNotificationLevels(e)}),{equals:l.comparer.structural}),(0,l.reaction)((()=>this.zoomState),(e=>{this.tradeManagerService.localStorageCache.setCache(this.zoomStateKey,this.tradeFrameId,e)}),{equals:l.comparer.structural}),(0,l.reaction)((()=>this.tradeFrameService.selectedPair.locked),(e=>{this.em.api.commonApi.setChartStatus(e),this.dealsService.updateInputs({locked:e})})),(0,l.reaction)((()=>this.tradeFrameService.selectedPair.lockedTrading),(e=>{this.dealsService.updateInputs({lockedTrading:e})})),(0,l.reaction)((()=>this.tradeFrameService.selectedPair.sentiment),(e=>{this.setSentiment(e)}),{fireImmediately:!0}),(0,l.reaction)((()=>{var e;return null===(e=this.tradeFrameService.selectedRate)||void 0===e?void 0:e.id}),(()=>{const e=this.tradeFrameService.selectedRate;this.zoomService&&"line"===e.format&&e.range&&this.zoomService.setZoom(e.range)}),{fireImmediately:!0}),(0,l.reaction)((()=>this.accountService.selectedAccount),(()=>{this.dealsService.removeHistoryDeal(),this.dealsService.clearDeals()})))}createReactionsCandles(){this.disposers.push((0,l.reaction)((()=>this.tradeFrameService.selectedPair),(()=>{this.dealsService.removeHistoryDeal();if(this.tradeFrameService.selectedPair.quick){const e=this.rateService.rateCollection.models.reduce(((e,a)=>e&&"line"===a.format&&a.step<e.step||!e&&"line"===a.format?a:e),null);e&&e.id!==this.tradeFrameService.selectedRate.id?this.zoomService.selectRateById(e.id):this.zoomService.initialSubscribe()}else this.zoomService.initialSubscribe();this.battleRoomDealsService.updateInputs({asset:this.tradeFrameService.selectedPair.id}),this.resetAdvisor()}),{fireImmediately:!0}),(0,l.reaction)((()=>this.candleService.addData&&[this.candleService.addData,this.candleService.addData.quotes.length]),(()=>{this.candleService.addData&&this.em.api.candlesApi.addCandle((0,U.p$)(this.candleService.addData))}),{equals:l.comparer.structural,fireImmediately:!0}),(0,l.reaction)((()=>this.candleService.updateData&&[this.candleService.updateData,this.candleService.updateData.quotes.length]),(()=>{this.candleService.updateData&&this.em.api.candlesApi.updateCandle((0,U.p$)(this.candleService.updateData))}),{equals:l.comparer.structural,fireImmediately:!0}),(0,l.reaction)((()=>this.candleService.addTick),(()=>{if(this.candleService.addTick){"line"===this.tradeFrameService.selectedRate.format&&1===this.candleService.rate&&this.em.api.candlesApi.addTick((0,U.UZ)(this.candleService.addTick))}}),{equals:l.comparer.structural,fireImmediately:!0,name:"ChartStore addTick reaction"}),(0,l.reaction)((()=>this.candleService.connectionRestored),(()=>{this.zoomService.initialSubscribe()})))}setActualLevelNotifications(){this.notificationLevelService.setNotificationLevels(this.getLevelNotifications())}activeFlatMarketProtection(){var e;null===(e=this.dealsService)||void 0===e||e.setQuoteIconFlatMarketProtection()}disableFlatMarketProtection(){var e;null===(e=this.dealsService)||void 0===e||e.setQuoteIconDefault()}getLevelNotifications(){return this.priceLevelService.subsList.filter((e=>e.pair===this.tradeFrameService.selectedPair.id&&e.project===f.$.FTT)).map((e=>({id:e.localId,quote:e.price})))}setSentiment(e){void 0!==e&&this.em.api.indicatorsApi.setSentiment(e)}initChart(e,a,s){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.em.api.commonApi.setLocale(this.languageService.langFull);const r=this.storageService.get(z);r&&this.em.api.commonApi.loadChartState(r);const n=this.candleService,o=n.candles,c=n.rate,d=this.tradeFrameService,u=d.selectedRate,m=d.selectedPair,p=O.dW[u.format.toUpperCase()]||O.dW.LINE,h=(0,P.IA)(this.getMaxAmount(o),m.precision);this.zoomService.api.setAvailableTimeIntervals(this.timeFrames),this.em.api.commonApi.setLibType(O.RZ.DIGITAL),this.em.api.commonApi.setChartType(p),this.em.api.commonApi.setChartStatus(m.locked),this.em.api.viewportApi.setTimeFrame(c),this.em.api.viewportApi.setPrecision(h[0],h[1]),this.em.api.viewportApi.setDynamicZoomEnabled(!0),this.dealsService.toggleGamblingMode(this.tradeFrameService.selectedPair.quick),e&&a&&this.updateHistory(e,a,s,i),this.em.api.strikesApi.setStrikes((0,l.toJS)(this.strikes).map(U.Xb)),this.notificationLevelService.api.setNotificationLevelsEnabled(!0),this.setNews(this.news),this.setAdvisorsAvailable(),this.dealsService.init(this.deals),this.ordersService.init(this.orders),this.setActualLevelNotifications(),this.battleRoomDealsService.reset(),this.inited=!0,this.dealsService.showHistoryDeal(),this.toggleChartType(p)}updateHistory(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.candleService.lastCandle,i=arguments.length>3?arguments[3]:void 0;const o=(0,U.p$)((0,l.toJS)(s)),c=(0,l.toJS)(e).map(U.p$),d=(0,l.toJS)(a).map(U.UZ);if(this.em.api.candlesApi.addHistory(c,d,e.length<600,i,o),["EURUSD","GBPUSD","USDJPY","USDCHF"].includes(this.candleService.pair||"")&&void 0!==this.candleService.candles&&this.candleService.candles&&this.candleService.candles.length){const e=void 0!==this.candleService.candles?(0,r.Z)(this.candleService.candles):null,a=void 0!==this.candleService.candles?(0,n.Z)(this.candleService.candles):null;e&&a&&this.chartNewsService.fetch({from:e.Date,to:a.Date+2592e6})}}setNews(e){this.em.api.newsApi.removeAllNews(),e.forEach((e=>{this.em.api.newsApi.addNews((0,U.Ai)(e))}))}getMaxAmount(e){const a=(0,o.Z)(e,"max");return a&&a.max||0}bindToCoordinates(){}stopChart(){this.chart.api.stop()}setHorizontalZoom(e){this.em.api.viewportApi.changeHorizontalZoom(e)}saveChartSettings(e){this.storageService.set(z,e)}showNotice(e,a){this.noticeService.add({id:e,collectionName:N.sm.TOP,layoutProps:{msgType:a.type,html:a.message},notice:{period:3},layout:B.G0})}setMaxZoom(){this.zoomService.api.setMinCandlesCountForCurveChart(20),this.zoomService.api.zoomChartToMax()}toggleChartType(e){const a=this.tradeFrameService.selectedPair.quick;this.chartType&&this.chartType!==e&&a&&this.setMaxZoom(),this.chartType=e}handleRequestData(e){let a=e.timeFrame,s=e.startDate,i=e.count;this.zoomService.handleRequestData(a,s,i).then((()=>{this.dealsService.showHistoryDeal()}))}setHasSentiment(e){this.hasSentiment=e}onStop(){var e;(this.disposers.forEach((e=>e())),this.em&&this.em.destroy(),this.drawingService)&&(null===(e=this.drawingService)||void 0===e||e.stop())}setBattleRoomDeals(){if(this.battleRoomDealsDataService){const e=this.battleRoomDealsDataService.getState().deals;this.battleRoomDealsService.updateInputs({deals:e})}}resetAdvisor(){(0,d.$)(_.c,"advisorEditService").then((e=>{e&&e.resetAdvisor(this.tradeFrameId)}))}setAdvisorsAvailable(){(0,d.$)(_.c,"advisorEditService").then((e=>{e&&e.setAdvisorsAvailable(this.tradeFrameId)}))}handleBattleRoomDeals(){(0,d.$)(g.BB,"dealsService").then((e=>{e&&(this.battleRoomDealsDataService=e,this.setBattleRoomDeals(),e.subscribe(((e,a)=>{e.dealAdded&&e.dealAdded!==a.dealAdded&&this.battleRoomDealsService.updateInputs({dealAdded:e.dealAdded}),e.dealRemoved&&e.dealRemoved!==a.dealRemoved&&this.battleRoomDealsService.updateInputs({dealRemoved:e.dealRemoved});null===e.dealAdded&&null===e.dealRemoved&&e.deals.length!==a.deals.length&&(this.battleRoomDealsService.updateInputs({deals:e.deals}),this.battleRoomDealsService.reset())})))}))}constructor(e){let a=e.tradeFrameId;this.disposers=[],this.dealCurrentService=null,this.dealOrderService=null,this.editedConfig={},this.storageService=new p._({namespace:"chart",backend:new h.u}),this.api={bindToCoordinates:this.bindToCoordinates,componentDidMount:this.componentDidMount,onResizeHeight:this.onResizeHeight,onResizeWidth:this.onResizeWidth,stopChart:this.stopChart},this.scrollToRight=()=>{this.zoomService.initialSubscribe(!1)},this.chartReady=!1,this.inited=!1,this.rendererLoaded=!1,this.width=0,this.height=0,this.hasSentiment=!1,this.em=new M.V(a),this.tradeFrameId=a,Object.keys(this.api).forEach((e=>{this.api[e]=this.api[e].bind(this)})),(0,d.$)(R.x,"dealsActiveFttService").then((e=>{this.dealCurrentService=e,this.inited&&this.dealsService.init(this.deals),this.createDealsReactions()})),(0,d.$)(I.P,"orderActiveFttService").then((e=>{this.dealOrderService=e,this.inited&&this.ordersService.init(this.orders),this.createOrdersReactions()}))}};(0,i.gn)([l.observable],q.prototype,"chartReady",void 0),(0,i.gn)([l.observable],q.prototype,"inited",void 0),(0,i.gn)([l.observable],q.prototype,"rendererLoaded",void 0),(0,i.gn)([l.observable],q.prototype,"width",void 0),(0,i.gn)([l.observable],q.prototype,"height",void 0),(0,i.gn)([l.observable],q.prototype,"hasSentiment",void 0),(0,i.gn)([l.observable],q.prototype,"zoomState",void 0),(0,i.gn)([l.computed],q.prototype,"deals",null),(0,i.gn)([l.computed],q.prototype,"precision",null),(0,i.gn)([l.computed],q.prototype,"orders",null),(0,i.gn)([l.computed],q.prototype,"strikes",null),(0,i.gn)([l.computed],q.prototype,"news",null),(0,i.gn)([(0,c.onStart)(m.APP_SERVICE)],q.prototype,"onStart",null),(0,i.gn)([(0,c.onBind)(m.CANDLE_SERVICE,m.CHART_NEWS_SERVICE,m.DEAL_SERVICE_BO,m.LANGUAGE_SERVICE,m.PRICE_LEVEL_SERVICE,m.RATE_SERVICE,m.STRIKE_SERVICE,m.TIME_SERVICE,m.TRADE_FRAME_SERVICE,m.TRADE_MANAGER_SERVICE,m.UI_SERVICE,m.NAVIGATION_SERVICE,m.SIDEBAR_SERVICE,m.NOTICE_SERVICE,m.ACCOUNT_SERVICE,m.PAIR_SERVICE_BO)],q.prototype,"onBind",null),(0,i.gn)([(0,c.onBind)(m.DEAL_FORM_STORE)],q.prototype,"onBindDealFormStore",null),(0,i.gn)([l.action],q.prototype,"componentDidMount",null),(0,i.gn)([l.action],q.prototype,"onResizeWidth",null),(0,i.gn)([l.action],q.prototype,"onResizeHeight",null),(0,i.gn)([c.onStop],q.prototype,"onStop",null),q=(0,i.gn)([(0,c.bindAs)(m.CHART_STORE)],q)},15209:(e,a,s)=>{"use strict";s.d(a,{s:()=>i});const i=(0,s(23934).Z)()},99166:(e,a,s)=>{"use strict";s.d(a,{P:()=>c});var i=s(24459),r=s(3121),n=s(27378),o=s(17302),l=s(77936);const c=e=>{let a=e.content,s=e.delay,c=void 0===s?750:s,d=e.children,u=e.placement,m=void 0===u?"right":u,p=e.distance,h=void 0===p?8:p,v=e.disabled,g=void 0!==v&&v,_=e.triggerOnTap,f=void 0!==_&&_;const E=(0,r.Z)((0,n.useState)(!1),2),S=E[0],y=E[1],b=n.useRef(void 0),C=n.useCallback((()=>{window.clearTimeout(b.current)}),[]),T=n.useCallback((()=>{g||y(!0)}),[g]),A=n.useCallback((()=>{y(!1)}),[]),k=n.useCallback((()=>{C(),f||(b.current=window.setTimeout(T,c))}),[C,c,T,f]),w=n.useCallback((()=>{C(),A()}),[C,A]),N=n.useCallback((()=>{C(),f?y(!S):A()}),[C,A,f,S]);return n.useEffect((()=>()=>{C()}),[C]),n.createElement(o.u,{open:S,placement:m,content:n.createElement("div",{className:l.Z.host},a),arrow:!0,transition:!0,distance:h,interactive:!1,triggerOnHover:!1,triggerOnTap:!1,hideOnOutsideClick:!0,style:{zIndex:101}},(e=>{var a=e.ref,s=(0,i.Z)(e,["ref"]);return n.createElement("span",Object.assign({ref:a},s,{onClick:N,onMouseEnter:k,onMouseLeave:w}),d)}))}},65592:(e,a,s)=>{"use strict";s.d(a,{P:()=>i.P,X:()=>r.X});var i=s(99166),r=s(72615)},72615:(e,a,s)=>{"use strict";s.d(a,{X:()=>i});const i=(0,s(18985).vU)({chart_type:{id:"chart_button_tooltip_chart_type",defaultMessage:"Chart Types"},techAnalysis:{id:"chart_button_tooltip_chart_tech_analysis",defaultMessage:"Technical Analysis"},multichart:{id:"chart_button_tooltip_chart_multichart",defaultMessage:"Multiple Charts"},timeframe:{id:"chart_button_tooltip_chart_timeframe",defaultMessage:"Timeframe"},return_full_screen:{id:"chart_button_tooltip_return_full_screen",defaultMessage:"Return to Full Screen"},return_position:{id:"chart_button_tooltip_return_position",defaultMessage:"Return to Current Position"},return_vertical_zoom:{id:"chart_button_tooltip_return_full_screen",defaultMessage:"Return to Full Screen"},trading_signals:{id:"trading_signals",defaultMessage:"Trading signals"}})},21130:(e,a,s)=>{"use strict";s.d(a,{n:()=>d});var i=s(24459),r=s(27378),n=s(60042),o=s.n(n),l=s(17302),c=s(16554);const d=e=>{var a=e.children,s=e.badge,n=e.readonly,d=e.active,u=e.onClick,m=(0,i.Z)(e,["children","badge","readonly","active","onClick"]);return r.createElement(l.Xd,{className:o()(c.Z.host,n&&c.Z.host_readonly,d&&c.Z.host_active),onClick:n?void 0:u,"data-test":m["data-test"]},s&&r.createElement("span",{className:"chart-selector-button__badge"},s),a)};d.displayName="ChartSelectorButton"},54059:(e,a,s)=>{"use strict";s.d(a,{o:()=>v});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(29609);const c="hvIkEPXk",d="yrgWM_KX",u="Ny7_vznT",m="c0FAbeFd",p=e=>{let a=e.TransitionProps,s=e.children;const r=i.useCallback((e=>{null==e||e.scrollTop,null==a||a.onEnter()}),[a]);return i.createElement(l.Z,Object.assign({appear:!0,classNames:{appear:c,appearActive:d,enter:c,enterActive:d,exit:u,exitActive:m},timeout:{enter:250,exit:250}},a,{onEnter:r}),s)},h="FLirV8ML",v=e=>{let a=e.anchorEl,s=e.open,r=e.skidding,l=e.distance,c=void 0===l?2:l,d=e.children,u=e.className,m=e.placement,v=void 0===m?"right-end":m;return i.createElement(o.rD,{anchorEl:a,open:s,transition:!0,placement:v,disablePortal:!0,distance:c,tethered:!0,fitSizeTo:"content",skidding:r,style:{zIndex:101}},(e=>i.createElement(p,{TransitionProps:e.TransitionProps},i.createElement(o._v,{classNameContent:n()(h,u),placement:e.basePlacement},d))))};v.displayName="FloatingPanel"},33795:(e,a,s)=>{"use strict";s.d(a,{YJ:()=>i,vs:()=>r});s(71221);function i(e){0}function r(e){window._chartDebug&&(window._chartDebug.emModule=e)}},5131:(e,a,s)=>{"use strict";s.d(a,{q:()=>AdvisorService});var i=s(37323),r=s(59312),n=s(60521);const o="surfingTheAverages",l="macdProfessional",c="predatoryGaze",d={[o]:0,[l]:1,[c]:2};var u;!function(e){e.waiting="waiting",e.newSignal="newSignal",e.signalActivated="signalActivated"}(u||(u={}));const m={active:!1,status:u.waiting,signal:null},p="bo_advisor_els_v2",h="advisor_settings_copied_new";class AdvisorService{get activeAdvisors(){const e=[];return this.collection.forEach((a=>{a.active&&e.push(a)})),e}setAvailable(e){e&&(this.api.setAdviserLowTimeframeLimit(60),this.api.setAdviserHighTimeframeLimit(14400)),e&&!this.activeAdvisors.length?this.restoreAdvisor():this.activeAdvisors.length&&this.activeAdvisors.forEach((e=>{this.deactivateSignal(e.id,e.status)})),this.isAvailable=e}restoreAdvisor(){if(this.restored&&!this.isAvailable)return;let e=this.getActualCache()||[];if(!(e&&e.length||this.isOldSettingsCopied())){const a=this.getCacheLegacy();Array.isArray(a)&&(e=a.reduce(((e,a)=>{const s=-1!==(i=a.type).indexOf("surfingTheAverages")?d.surfingTheAverages:-1!==i.indexOf("macdProfessional")?d.macdProfessional:-1!==i.indexOf("predatoryGaze")?d.predatoryGaze:void 0;var i;return"advisor"===a.viewType&&void 0!==s?[s]:e}),[]))}this.setCopyOldCacheFlag(),e.forEach((e=>{this.addAdvisor(e)})),this.restored=!0}toggleAdvisor(e){const a=d[e],s=this.collection.get(a);s&&(s.active?this.removeAdvisor(a):this.addAdvisor(a))}addAdvisor(e){const a=this.collection.get(e);a&&(a.active||(this.collection.forEach((e=>{e.active=!1})),a.active=!0,this.api.addAdvisor(e,a.type),this.saveCache()))}removeAdvisor(e){const a=this.resetAdvisor(e);a&&a.active&&(this.deactivateSignal(e),a.active=!1,this.saveCache(),this.api.removeAdvisor(e))}removeAllAdvisor(){this.collection.forEach((e=>{this.removeAdvisor(e.id)}))}toggleActivateSignal(e){const a=this.collection.get(e);a&&a.active&&a.signal&&(a.status===u.signalActivated?this.deactivateSignal(e,u.newSignal):this.activateSignal(e))}activateSignal(e){const a=this.collection.get(e);a&&a.active&&a.signal&&(a.status=u.signalActivated,this.applySignal(a.signal.dir,a.signal.duration,a.signal.stopLoss))}deactivateSignal(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.waiting;const s=this.collection.get(e);s&&(s.status=a,this.cancelSignal())}handleSetAdvisorPosition(e,a){this.advisorPosition=e}handleAdvisorSignal(e,a,s,i,r){const n=this.collection.get(r);n&&n.active&&(e?(n.status=u.newSignal,n.signal={dir:a,duration:s,stopLoss:i}):(this.resetAdvisor(r),this.deactivateSignal(r)))}resetAllAdvisers(){this.collection.forEach((e=>{this.resetAdvisor(e.id),this.deactivateSignal(e.id)}))}saveCache(){this.setCache(p,this.activeAdvisors.map((e=>e.id)))}resetAdvisor(e){const a=this.collection.get(e);if(a)return a.status=u.waiting,a.signal=null,a}getActualCache(){return this.getCache(p)}getCacheLegacy(){return this.getCache("indicator_settings")}isOldSettingsCopied(){return Boolean(this.getCache(h))}setCopyOldCacheFlag(){this.setCache(h,!0)}constructor(e,a,s,r,n){this.setCache=a,this.getCache=s,this.applySignal=r,this.cancelSignal=n,this.restored=!1,this.advisorPosition=0,this.isAvailable=!1,this.collection=new Map([[d.surfingTheAverages,(0,i.Z)({id:d.surfingTheAverages,type:o},m)],[d.macdProfessional,(0,i.Z)({id:d.macdProfessional,type:l},m)],[d.predatoryGaze,(0,i.Z)({id:d.predatoryGaze,type:c},m)]]),this.api=e}}(0,r.gn)([n.observable],AdvisorService.prototype,"advisorPosition",void 0),(0,r.gn)([n.observable],AdvisorService.prototype,"isAvailable",void 0),(0,r.gn)([n.computed],AdvisorService.prototype,"activeAdvisors",null),(0,r.gn)([n.observable],AdvisorService.prototype,"collection",void 0),(0,r.gn)([n.action],AdvisorService.prototype,"setAvailable",null),(0,r.gn)([n.action],AdvisorService.prototype,"addAdvisor",null),(0,r.gn)([n.action],AdvisorService.prototype,"removeAdvisor",null),(0,r.gn)([n.action],AdvisorService.prototype,"activateSignal",null),(0,r.gn)([n.action],AdvisorService.prototype,"deactivateSignal",null),(0,r.gn)([n.action],AdvisorService.prototype,"handleSetAdvisorPosition",null),(0,r.gn)([n.action],AdvisorService.prototype,"saveCache",null),(0,r.gn)([n.action],AdvisorService.prototype,"resetAdvisor",null)},38246:(e,a,s)=>{"use strict";s.d(a,{zr:()=>L,lR:()=>DealToppingService,wz:()=>P});var i=s(29257),r=s(37323),n=s(59312),o=s(60521);class DealToppingService{handleDealTopUpPosition(e){this.dealToppingDialog.stopLossCordsTop=e}showDealToppingDialog(e){this.dealToppingDialog=(0,r.Z)({isVisible:!0,stopLossCordsTop:this.dealToppingDialog.stopLossCordsTop},e)}hideDealToppingDialog(){this.dealToppingDialog.isVisible=!1}submitDealToppingDialog(e,a,s){var r=this;return(0,i.Z)((function*(){yield r.inputs.onDialogSubmit(e,a,s),r.hideDealToppingDialog()}))()}cancelDealToppingDialog(){var e;this.inputs.onDialogCancel(null===(e=this.dealToppingDialog.deal)||void 0===e?void 0:e.id),this.hideDealToppingDialog()}constructor(e,a){this.dealToppingDialog={isVisible:!1,stopLossCordsTop:200},this.api=e,this.inputs=a}}(0,n.gn)([o.observable],DealToppingService.prototype,"inputs",void 0),(0,n.gn)([o.observable],DealToppingService.prototype,"dealToppingDialog",void 0),(0,n.gn)([o.action.bound],DealToppingService.prototype,"handleDealTopUpPosition",null),(0,n.gn)([o.action.bound],DealToppingService.prototype,"showDealToppingDialog",null),(0,n.gn)([o.action.bound],DealToppingService.prototype,"hideDealToppingDialog",null),(0,n.gn)([o.action.bound],DealToppingService.prototype,"submitDealToppingDialog",null),(0,n.gn)([o.action.bound],DealToppingService.prototype,"cancelDealToppingDialog",null);var l=s(27378),c=s(50649),d=s(97057),u=s(3121),m=s(77740),p=s(17302),h=s(72785),v=s(8141),g=s(82844),_=s(95029),f=s(40285),E=s(74262);const S=e=>{let a=e.currency,s=e.dealAmount,i=e.multiplicator,r=e.stopLoss;const n=l.useCallback((e=>{switch(e){case f.$i.AMOUNT:return l.createElement(_.ih,{currency:a,minimumFractionDigits:2,value:r.value});case f.$i.PERCENT:return l.createElement(_.p7,{value:r.value});default:return r.value}}),[a,r.value]);return l.createElement(l.Fragment,null,l.createElement(E.nN,{"data-test":"deal-topping-dialog-amount",data:l.createElement(g._,{id:"deal_topping_dialog_amount",defaultMessage:"Trade Amount"}),value:l.createElement(_.ih,{currency:a,minimumFractionDigits:2,value:s})}),l.createElement(E.nN,{"data-test":"deal-topping-dialog-multiplicator",data:l.createElement(g._,{id:"multiplikator",defaultMessage:"Multiplier"}),value:"x".concat(i)}),l.createElement(E.nN,{"data-test":"deal-topping-dialog-limit",data:l.createElement(g._,{id:"fx_stopLoss",defaultMessage:"Stop Loss"}),value:n(r.type)}))},y="yWAMArhu",b="NQwi2Lau",C="IdJS8yH_",T="FLELyODa",A="PUceboIi",k="sGTy4zp4",w=(0,c.observer)((e=>{let a=e.dealToppingDialog,s=e.selectedDeal,i=e.onHide,r=e.onCancel,n=e.onSubmit;const o=a.diffAmount,c=a.dealAmount,d=a.stopLoss,f=a.multiplicator,E=a.stopLossCordsTop,w=(0,u.Z)(l.useState(!1),2),N=w[0],R=w[1],I=(0,v.L)(),D=(0,u.Z)(l.useState({dealDir:null==s?void 0:s.dir,dealAmount:c,diffAmount:o,multiplicator:f,stopLoss:d,currency:null==s?void 0:s.currency,dealId:null==s?void 0:s.id}),1)[0];l.useEffect((()=>{void 0!==o&&o!==D.diffAmount&&i()}),[o,i,D.diffAmount]),l.useEffect((()=>{D.dealId!==(null==s?void 0:s.id)&&r()}),[r,null==s?void 0:s.id,D.dealId]);const O=l.useRef(null);(0,_.yd)(O,r);const L=(0,u.Z)(l.useState(),2),M=L[0],P=L[1];l.useEffect((()=>{var e;const a=(null===(e=O.current)||void 0===e?void 0:e.getBoundingClientRect().height)||280,s=D.dealDir===h.em.DOWN?E+24:E-24-a;P(s)}),[D.dealDir,E]);const x=l.useCallback((()=>{r(),R(!1)}),[r]),F=l.useCallback((()=>{R(!0),n(D.dealAmount,D.dealId,D.stopLoss)}),[D.dealAmount,D.dealId,D.stopLoss,n]);return l.createElement("div",{"data-test":"deal-topping-dialog",style:{top:M},ref:O,dir:I,className:y},l.createElement("button",{"data-test":"deal-topping-dialog-close",className:b,onClick:x},l.createElement(m.bMz,null)),l.createElement("div",{className:C},l.createElement(g._,{id:"deal_topping_dialog_title",defaultMessage:"Your trade parameters will be changed:"})),l.createElement("div",{className:T},l.createElement(S,{dealAmount:Number(D.dealAmount),currency:(null==D?void 0:D.currency)||"usd",multiplicator:D.multiplicator||1,stopLoss:D.stopLoss||{value:0,type:"price"}})),l.createElement("div",{className:A},l.createElement(p.O6,{loading:N,"data-test":"deal-topping-dialog-button",fullWidth:!0,color:"accent",className:k,onClick:F},l.createElement(g._,{id:"deal_topping_dialog_button",defaultMessage:"Add {value} to the trade amount",values:{value:l.createElement(_.ih,{currency:(null==D?void 0:D.currency)||"usd",minimumFractionDigits:2,value:Number(D.diffAmount)})}})," ")))})),N="wcre3eOt",R="OWX3T7Qx",I="VZwNsltl",D="enHeHq_K",O=(0,c.observer)((e=>{let a=e.width,s=e.dealToppingDialog,i=e.selectedDeal,r=e.onCancel,n=e.onSubmit;const o=s.isVisible,c=s.diffAmount,d=s.dealAmount,u=s.stopLoss,m=s.multiplicator,h=(0,v.L)(),f=l.useRef(null),E=l.useRef(null),y=(0,_.xE)(o?f:E).height,b=l.useCallback((e=>{e===p.tW.HIDDEN&&r()}),[r]),C=l.useCallback((()=>{n(d,i.id,u)}),[n,d,i,u]);return l.createElement(p.yo,{state:o?p.tW.EXPANDED:p.tW.HIDDEN,onChangeState:b,width:a,height:Math.max(y+18,190),className:R,containerSelector:".bottom-sheet"},(()=>o?l.createElement("div",{className:N,dir:h,ref:f,"data-test":"deal-topping-sheet"},l.createElement("div",{className:I},l.createElement(g._,{id:"deal_topping_dialog_title",defaultMessage:"Your trade parameters will be changed:"})),l.createElement("div",{className:D},l.createElement(S,{dealAmount:Number(d),currency:(null==i?void 0:i.currency)||"usd",multiplicator:m||1,stopLoss:u||{value:0,type:"price"}})),l.createElement(p.O6,{"data-test":"deal-topping-dialog-button",fullWidth:!0,color:"accent",size:"large",onClick:C},l.createElement(g._,{id:"deal_topping_dialog_button",defaultMessage:"Add {value} to the trade amount",values:{value:l.createElement(_.ih,{currency:(null==i?void 0:i.currency)||"usd",minimumFractionDigits:2,value:Number(c)})}}))):null))})),L=(0,c.observer)((e=>{let a=e.chartStore,s=e.dealCurrentService;const i=a.dealToppingService;return s?l.createElement(d.dj,{in:i.dealToppingDialog.isVisible,timeout:300,animType:"slideUp"},l.createElement(w,{selectedDeal:s.selectedDeal,dealToppingDialog:i.dealToppingDialog,onHide:i.hideDealToppingDialog,onCancel:i.cancelDealToppingDialog,onSubmit:i.submitDealToppingDialog})):null}));var M=s(50439);const P=(0,c.observer)((e=>{let a=e.chartStore,s=e.dealCurrentService,i=e.uiService;const r=a.dealToppingService;return s?l.createElement(O,{width:(0,M.Z)(i.windowWidth,768),selectedDeal:s.selectedDeal,dealToppingDialog:r.dealToppingDialog,onCancel:r.cancelDealToppingDialog,onSubmit:r.submitDealToppingDialog}):null}))},29019:(e,a,s)=>{"use strict";s.d(a,{D:()=>DealsServiceFtt,x:()=>DealsServiceFx});var i=s(59312),r=s(60521),n=s(62540),o=s(72785),l=s(95029),c=s(20845),d=s(37323),u=s(64356),m=s(57371),p=s(15705);class DealsService{init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setDealsAndSelect((0,r.toJS)(e))}handleDealSelect(e){this.inputs.onDealSelect(e)}handleDealUnSelect(e){this.inputs.onDealUnSelect(e)}handleDealSell(e){this.inputs.onDealSell(e)}parseDeals(e){return e.map((e=>this.inputs.parseDeal(e,this.inputs.getParseOptions())))}updateDeal(e){const a=(0,m.Z)(this.deals,(a=>a.id===e.id));-1!==a&&(this.api.updateDeal(this.inputs.parseDeal(e,this.inputs.getParseOptions())),this.deals[a]=(0,n.Z)(e))}clearDeals(){clearTimeout(this.dealsQueueTM),this.deals.forEach((e=>{this.api.removeDeal(e.id)})),this.deals=[]}showHistoryDeal(){if(!this.historyDeal)return;const e=this.getHistoryDealBalanceChange(),a=(0,u.Z)((0,d.Z)({},this.historyDeal),{sum:e}),s=e>0?"+".concat(l.wX):l.wX;this.api.addDeal(this.inputs.parseDeal(a,this.inputs.getParseOptions()),2,{formatCurrencyOptions:{mask:s}})}showHistoryDealWithScroll(e){this.historyDeal=e,this.historyDeal&&(this.showHistoryDeal(),this.inputs.scrollToDeal(this.historyDeal))}removeHistoryDeal(){this.historyDeal&&(this.removeDeal(this.historyDeal),this.historyDeal=null)}removeDeal(e){this.api.removeDeal(e.id)}updateUserSelectDeals(e){e?this.api.selectDeal(e):this.api.unselectDeal()}groupDealsByAction(e){return{remove:(0,p.hD)(e,this.deals),add:(0,p.hD)(this.deals,e),update:(0,p.tT)(e,this.deals)}}updateDeals(e){const a=this.groupDealsByAction(e),s=a.remove,i=a.add,r=a.update;s.forEach((e=>{this.api.removeDeal(e.id),this.inputs.userSelectedId&&this.api.selectDeal(this.inputs.userSelectedId)})),i.forEach((e=>{this.api.addDeal(this.inputs.parseDeal(e,this.inputs.getParseOptions()),0)})),r.map((e=>this.inputs.parseDeal(e,this.inputs.getParseOptions()))).forEach((e=>{this.api.updateDeal(e)})),this.deals=(0,n.Z)(e)}setDealsAndSelect(e){e.length>0&&this.api.setDeals(e.map((e=>this.inputs.parseDeal(e,this.inputs.getParseOptions()))),0),this.inputs.userSelectedId&&this.api.selectDeal(this.inputs.userSelectedId),this.deals=(0,n.Z)(e)}removeDealsWithPnl(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.api.setDeals(this.parseDeals([e]),0),this.api.removeDealWithPnl(e.id,a,s)}addToQueue(e,a){clearTimeout(this.dealsQueueTM),this.dealsQueue.push(e),this.dealsQueueTM=window.setTimeout((()=>{a(this.dealsQueue),this.dealsQueue=[]}),500)}constructor(e,a){this.cachedDeals=[],this.dealsQueue=[],this.dealsQueueTM=0,this.deals=[],this.historyDeal=null,this.api=e,this.inputs=a}}(0,i.gn)([r.observable],DealsService.prototype,"deals",void 0),(0,i.gn)([r.observable],DealsService.prototype,"historyDeal",void 0),(0,i.gn)([r.observable],DealsService.prototype,"inputs",void 0);const h=!1;class DealsServiceFtt extends DealsService{static parseGamblingDeal(e){return{id:e.id,cursOpen:(e.category===o.TP.DIGITAL?e.cursStrike:e.cursOpen)||-1,dir:"up"===e.dir?0:1,timeOpen:e.timeOpen,timeClose:e.timeClose,labelText:(0,l.xG)(e.amount,{currency:e.currency,minimumFractionDigits:2})}}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const a=(0,r.toJS)(e);a&&a.length?this.setDealsAndSelect(a):this.setDealsAndSelect([])}updateInputs(e){(0,r.set)(this.inputs,e);const a=(0,r.toJS)(e.deals);a&&(a.length?this.updateDeals(a):this.updateDeals([])),void 0===e.lockedTrading&&void 0===e.locked||!this.deals.length||this.deals.map((e=>this.proceedUpdate(e))),void 0!==e.userSelectedId&&this.updateUserSelectDeals(e.userSelectedId),(e.pickerType||e.timeClose||e.duration)&&this.setTransaction()}setTransaction(){"time"===this.inputs.pickerType?this.inputs.timeClose>=this.inputs.serverTime&&this.api.setDealExpiration(this.inputs.timeClose):this.api.setDealDuration(this.inputs.duration)}setQuoteIconFlatMarketProtection(){this.api.setIconTypeForActivePrice(1)}setQuoteIconDefault(){this.api.setIconTypeForActivePrice(0)}addGamblingDeal(e){this.api.addQuickDeal(DealsServiceFtt.parseGamblingDeal(e))}removeGamblingDeal(e){const a=e.status===c.cY.flat?1:0;this.api.removeQuickDealWithPnl(e.id,e.balanceChange,a)}switchGamblingAsset(e){e?this.inputs.setMaxZoom():this.inputs.restoreMaxZoom(),this.inputs.prepareGamblingDeals(e),this.isGamblingAsset=e}toggleGamblingMode(e){return!this.isGamblingAsset&&e?(this.switchGamblingAsset(!0),!0):(this.isGamblingAsset&&!e&&this.switchGamblingAsset(!1),!1)}clearDeals(){clearTimeout(this.dealsQueueTM),this.deals.forEach((e=>{const a=e.pair;this.inputs.getPair(a).quick,this.api.removeDeal(e.id)})),this.deals=[]}getHistoryDealBalanceChange(){return this.historyDeal?this.historyDeal.balanceChange:0}isGamblingDeal(e){const a=e.pair;return this.inputs.getPair(a).quick&&h}updateDeals(e){const a=this.groupDealsByAction(e),s=a.remove,i=a.add,r=a.update;s.forEach((e=>{this.proceedRemove(e)})),i.forEach((e=>{this.proceedAdd(e)})),r.forEach((e=>{this.proceedUpdate(e)})),this.deals=(0,n.Z)(e)}proceedAdd(e){this.isGamblingDeal(e)?this.addGamblingDeal(e):this.api.addDeal(this.inputs.parseDeal(e,this.inputs.getParseOptions()),0)}proceedUpdate(e){if(this.isGamblingDeal(e))return;const a=this.inputs.parseDeal(e,this.inputs.getParseOptions());this.api.updateDeal(a)}proceedRemove(e){this.isGamblingDeal(e)?this.removeGamblingDeal(e):(this.addToQueue(e,this.removeQueueDeals),this.inputs.userSelectedId&&this.api.selectDeal(this.inputs.userSelectedId))}removeQueueDeals(e){if(e&&e.length){const a=e[e.length-1],s=e.reduce(((e,a)=>e+a.balanceChange),0);let i=1;e.forEach(((a,s)=>{a.status!==c.cY.flat&&(i=0),s+1<e.length&&this.api.removeDeal(a.id)})),this.removeDealsWithPnl(a,s,i)}}constructor(e,a){super(e,a),this.isGamblingAsset=!1,this.removeQueueDeals=this.removeQueueDeals.bind(this)}}(0,i.gn)([r.action],DealsServiceFtt.prototype,"updateInputs",null);class DealsServiceFx extends DealsService{updateInputs(e){(0,r.set)(this.inputs,e),e.deals&&this.updateDeals((0,r.toJS)(e.deals)),void 0===e.stopOutRate&&void 0===e.lockedTrading&&void 0===e.locked||!this.deals.length||this.deals.map((e=>this.inputs.parseDeal(e,this.inputs.getParseOptions()))).forEach((e=>{this.api.updateDeal(e)})),void 0!==e.userSelectedId&&this.updateUserSelectDeals(e.userSelectedId)}getHistoryDealBalanceChange(){return this.historyDeal?this.historyDeal.realizedPnl:0}updateDeals(e){const a=this.groupDealsByAction(e),s=a.remove,i=a.add,r=a.update;s.forEach((e=>{this.addToQueue(e,this.removeQueueDeals),this.inputs.userSelectedId&&this.api.selectDeal(this.inputs.userSelectedId)})),i.forEach((e=>{this.api.addDeal(this.inputs.parseDeal(e,this.inputs.getParseOptions()),0)})),r.map((e=>this.inputs.parseDeal(e,this.inputs.getParseOptions()))).forEach((e=>{this.api.updateDeal(e)})),this.deals=(0,n.Z)(e)}removeQueueDeals(e){if(e&&e.length){const a=e[e.length-1],s=e.reduce(((e,a)=>e+a.realizedPnl),0);e.forEach(((a,s)=>{s+1<e.length&&this.api.removeDeal(a.id)})),this.removeDealsWithPnl(a,s)}}constructor(e,a){super(e,a),this.removeQueueDeals=this.removeQueueDeals.bind(this)}}(0,i.gn)([r.action],DealsServiceFx.prototype,"updateInputs",null)},15705:(e,a,s)=>{"use strict";s.d(a,{cU:()=>u,e1:()=>d,hD:()=>l,tT:()=>c});var i=s(26338),r=s(40285),n=s(95029);function o(e){return e===r.$i.PRICE?1:e===r.$i.PERCENT?2:0}function l(e,a){const s=e.map((e=>e.id));return a.filter((e=>!s.includes(e.id)))}function c(e,a){const s=a.map((e=>e.id));return e.filter((e=>s.includes(e.id))).filter(((e,s)=>!(0,i.Z)(e,a[s])))}function d(e,a){return e?o(e.type):a?o(a.type):0}function u(e,a,s){if(s)switch(s.type){case r.$i.AMOUNT:return(0,n.xG)(s.value,{currency:e,minimumFractionDigits:2});case r.$i.PERCENT:return"".concat(s.value,"%");case r.$i.PRICE:return String((0,n.lu)(s.value,a))}return""}},84974:(e,a,s)=>{"use strict";s.d(a,{T:()=>DrawingService});var i=s(37323),r=s(64356),n=s(59312),o=s(84829),l=s(60521);const c=s(66807).GW,d=["#1FBF75","#EE9F07","#FE4995","#F15131","#776BF8","#EDD502","#2B64F8","#09E5D7","#E1310F"],u=1,m={[c.horizontalLine]:{color:d[0],width:u},[c.verticalLine]:{color:d[0],width:u},[c.trendLine]:{color:d[0],width:u},[c.ray]:{color:d[0],width:u},[c.fibonacciLevelsRays]:{color:d[0],width:u},[c.fibResistanceFan]:{color:d[0],width:u},[c.fixedTrend]:{color:d[0],width:u}},p="draw_els_v2",h="draw_els_copy_status_new";class DrawingService{selectDrawing(e){this.selectedDrawing=e}handleSelect(e){this.selectDrawing(e),this.api.selectDrawing(e)}restoreDrawings(e){var a;this.clearDrawingsFromChart();let s=null!==(a=this.getActualCache())&&void 0!==a?a:[];if(!this.isOldCacheCopied(e)){var i;const a=(null!==(i=this.getOldCache())&&void 0!==i?i:[]).filter((a=>a.pairName===e)).map(this.trasformOldItem.bind(this));s=this.mergeOldAndNewDrawingItems(s,a),this.setOldCacheCopyStatus(e)}if(s&&s.length){this.incrementId=0,s.forEach((e=>{this.incrementId=Math.max(this.incrementId,e[1].id)}));const a=s.filter((a=>a[1].pair===e));this.collection=new Map(s),a.forEach((e=>{this.api.addDrawing(e[1])}))}}addDrawing(e,a){const s=this.generateId(),r=c[e],n={id:s,pair:a,type:e,settings:(0,i.Z)({},m[r]),points:[],edited:{points:[]}};this.collection.set(s,n),this.api.addDrawing(n)}editDrawing(e){this.editedId=e,this.openSidebarEditor()}updateDrawingSettings(e,a){const s=this.collection.get(e);s&&(s.settings=(0,i.Z)({},s.settings,a),this.api.editDrawing(e,c[s.type],s.settings.color,s.settings.width,(0,l.toJS)(s.points)))}updateDrawingPoints(e){const a=this.collection.get(e);a&&(a.points=(0,l.toJS)(a.edited.points),a.edited.points=[])}getEditedDrawing(){if(void 0!==this.editedId)return this.collection.get(this.editedId)}removeDrawing(e){this.collection.delete(e),this.api.removeDrawing(e),this.closeSidebarEditor()}removeAllDrawing(){this.collection.forEach((e=>{this.removeDrawing(e.id)}))}clearDrawingsFromChart(){this.collection.forEach((e=>{this.api.removeDrawing(e.id)}))}handleDrawingPointEdited(e,a,s){const i=this.collection.get(e);i&&i.edited.points.push({time:a,quote:s})}handleDrawingEdited(e){this.updateDrawingPoints(e)}handleLegendHoverOn(e){this.api.hoverDrawing(e,!0)}handleLegendHoverOff(e){this.api.hoverDrawing(e,!1)}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}generateId(){return this.incrementId++,this.incrementId}addReactions(){this.disposers=[(0,l.reaction)((()=>Array.from(this.collection).map((e=>[e[0],(0,l.toJS)(e[1])]))),(()=>{this.saveCache()}))]}trasformOldItem(e){const a=e=>Math.floor(e/1e3),s={type:e.type,id:0,pair:e.pairName,points:[],edited:{points:[]}};var r;(e.type||(s.type="horizontalLine"),s.settings=(0,i.Z)({},m[c[s.type]]),e.stroke&&(e.stroke.width||e.stroke.color?s.settings=(0,i.Z)({},s.settings,e.stroke):e.stroke.strokeMain&&e.stroke.strokeWidthMain&&(s.settings={width:e.stroke.strokeWidthMain,color:e.stroke.strokeMain})),e.rate1&&e.time1)&&(null===(r=s.points)||void 0===r||r.push({time:a(e.time1),quote:e.rate1}));var n,o,l;e.rate2&&e.time1&&e.time2&&(null===(n=s.points)||void 0===n||n.push({time:a(Math.max(e.time2,e.time1+6e5)),quote:e.rate2}));"horizontalLine"===s.type&&(null===(o=s.points)||void 0===o||o.push({quote:e.curs,time:0}));"verticalLine"===s.type&&(null===(l=s.points)||void 0===l||l.push({quote:0,time:a(e.curs)}));return[s.id,s]}mergeOldAndNewDrawingItems(e,a){return[...e,...a].map(((e,a)=>[a,(0,r.Z)((0,i.Z)({},e[1]),{id:a})]))}getActualCache(){return this.getCache(p)}getOldCache(){return this.getCache("draw_els")}isOldCacheCopied(e){const a=this.getCache(h);return!!a&&Boolean(a[e])}setOldCacheCopyStatus(e){const a=this.getCache(h),s=(0,r.Z)((0,i.Z)({},a||{}),{[e]:!0});this.setCache(h,s)}constructor(e,a,s,i,r){this.incrementId=-1,this.saveCache=(0,o.Z)((()=>{this.setCache(p,Array.from(this.collection))}),200),this.collection=new Map,this.api=e,this.openSidebarEditor=a,this.closeSidebarEditor=s,this.handleLegendHoverOn=this.handleLegendHoverOn.bind(this),this.handleLegendHoverOff=this.handleLegendHoverOff.bind(this),this.setCache=i,this.getCache=r,this.addReactions()}}(0,n.gn)([l.observable],DrawingService.prototype,"collection",void 0),(0,n.gn)([l.observable],DrawingService.prototype,"selectedDrawing",void 0),(0,n.gn)([l.observable],DrawingService.prototype,"editedId",void 0),(0,n.gn)([l.action],DrawingService.prototype,"updateDrawingSettings",null),(0,n.gn)([l.action],DrawingService.prototype,"updateDrawingPoints",null)},57307:(e,a,s)=>{"use strict";s.d(a,{m:()=>NotificationLevelService});var i=s(59312),r=s(60521),n=s(89215);class NotificationLevelService{setNotificationLevels(e){this.notificationLevels.update(e,{merge:!0,add:!0,remove:!0})}constructor(e){this.notificationLevels=new n.F,this.api=e,this.notificationLevels.onAdd=e=>{e.forEach((e=>{this.api.addNotificationLevel(e.id,e.quote)}))},this.notificationLevels.onUpdate=e=>{e.forEach((e=>{this.api.updateNotificationLevel(e.id,e.quote)}))},this.notificationLevels.onRemove=e=>{e.forEach((e=>{this.api.removeNotificationLevel(e.id)}))}}}(0,i.gn)([r.action],NotificationLevelService.prototype,"setNotificationLevels",null)},74209:(e,a,s)=>{"use strict";s.d(a,{N:()=>OrdersService,f:()=>r});var i=s(72785);function r(e){let a=e.id,s=e.dir,r=e.openCase,n=e.timeOpen,o=e.courseTarget;return{id:a,dir:"up"===s?0:1,openCase:r===i.Ns.COURSE_TARGET?1:2,timeOpen:n||0,courseTarget:o||0}}var n=s(59312),o=s(60521),l=s(62540),c=s(15705);class OrdersService{init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setOrdersAndSelect((0,o.toJS)(e))}updateInputs(e){(0,o.set)(this.inputs,e),e.orders&&this.updateOrders((0,o.toJS)(e.orders)),e.userSelectedId&&this.updateUserSelectOrder(e.userSelectedId)}handleOrderSelect(e){this.inputs.onOrderSelect(e)}handleOrderUnSelect(e){this.inputs.onOrderUnSelect&&this.inputs.onOrderUnSelect(e)}handleOrderCancel(e){this.inputs.onOrderCancel(e)}updateUserSelectOrder(e){e?this.api.selectOrder(e):this.api.selectOrder()}updateOrders(e){const a=(0,c.hD)(e,this.orders),s=(0,c.hD)(this.orders,e);a.forEach((e=>{this.api.removeOrder(e.id),this.inputs.userSelectedId&&this.api.selectOrder(this.inputs.userSelectedId)})),s.forEach((e=>{this.api.addOrder(this.inputs.parseOrder(e))})),this.orders=(0,l.Z)(e)}setOrdersAndSelect(e){e.length>0&&this.api.addOrders(e.map((e=>this.inputs.parseOrder(e)))),this.inputs.userSelectedId&&this.api.selectOrder(this.inputs.userSelectedId),this.orders=(0,l.Z)(e)}constructor(e,a){this.cachedOrders=[],this.orders=[],this.api=e,this.inputs=a}}(0,n.gn)([o.observable],OrdersService.prototype,"orders",void 0),(0,n.gn)([o.observable],OrdersService.prototype,"inputs",void 0),(0,n.gn)([o.action],OrdersService.prototype,"updateInputs",null)},92401:(e,a,s)=>{"use strict";s.d(a,{B:()=>S,R:()=>_});var i=s(27378),r=s(84584),n=s(21182),o=s(28373),l=s(6680),c=s(95601),d=s(77740),u=s(26763),m=s(82844),p=s(23735),h=s(21130),v=s(93616),g=s(65592);const _=(0,r.Z)(),f=(0,n.W)(_),E=i.memo((()=>{const e=i.createRef(),a=i.useMemo((()=>(0,l.Sc)(u.SIDEBAR_SERVICE)),[]),s=i.useMemo((()=>({containerRef:e})),[e]),r=i.useCallback((()=>{null==a||a.sideBarMajor.openById(v.uN.TRADING_SIGNALS),(0,p.L)({event:"uaGtmEvents_clicks",eventAction:"signals_chart_click",eventCategory:"signals",eventLabel:"signals_chart_click"})}),[null==a?void 0:a.sideBarMajor]);return i.createElement("div",{ref:e},i.createElement(f,{props:s}),i.createElement(g.P,{content:i.createElement(m._,Object.assign({},g.X.trading_signals))},i.createElement(h.n,{onClick:r,"data-test":"signals-menu"},i.createElement(d.cBf,null))))})),S=(0,o.k)(c.u$,(()=>i.createElement(E,null)))},65525:(e,a,s)=>{"use strict";s.d(a,{T:()=>b});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(97558),c=s(54059);const d="vtAmyITD",u="nK1dYJF8",m="WqRwmgow",p="rEnWrCSc",h=e=>{let a=e.time,s=e.id,r=e.selected,c=e.onClick;const d=i.useCallback((()=>{c(s)}),[c,s]);return i.createElement(o.Xd,{className:n()(u,r&&m),onClick:d},(0,l.f3)(a))};h.displayName="TimeFrameButton";const v=e=>{let a=e.timeframes,s=e.selectedTimeFrame,r=e.open,n=e.anchorEl,o=e.onSelect;return i.createElement(c.o,{open:r,anchorEl:n,className:p,placement:"top"},i.createElement("div",{className:d,"data-test":"zoom-timeframe-selector-panel"},a.map(((e,a)=>i.createElement(h,{key:a,time:e.time,id:e.id,onClick:o,selected:s===e.time})))))};v.displayName="TimeFrameSelectorPanel";var g=s(3121),_=s(82844);const f="QZVHslpk",E="BarhcdmQ",S=e=>{let a=e.children,s=e.open,r=e.onClick;return i.createElement(o.Xd,{"data-test":"zoom-timeframe-selector",className:n()(f,s&&E),onClick:r},a)};S.displayName="TimeFrameSelectorButton";var y=s(65592);const b=e=>{let a=e.selectedTimeFrame,s=e.timeframes,r=e.onSelect;const n=(0,g.Z)(i.useState(!1),2),c=n[0],d=n[1],u=(0,g.Z)(i.useState(null),2),m=u[0],p=u[1],h=i.useRef(null),f=i.useCallback((e=>{r(e),d(!1)}),[r]),E=i.useCallback((()=>{d(!c)}),[c]),b=i.useCallback((()=>{d(!1)}),[]);return(0,o.O3)(h.current,b),i.createElement("div",{ref:h},i.createElement(v,{open:c,anchorEl:m,timeframes:s,onSelect:f,selectedTimeFrame:a}),i.createElement("div",{ref:p},i.createElement(y.P,{placement:"top",content:i.createElement(_._,Object.assign({},y.X.timeframe)),disabled:c,distance:15},i.createElement(S,{onClick:E,open:c},(0,l.f3)(a)))))};b.displayName="TimeFrameSelector"},15221:(e,a,s)=>{"use strict";s.d(a,{L:()=>I,B:()=>ZoomService});var i=s(59312),r=s(60521);class ZoomService{initialSubscribe(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const a=this.inputs.getSelectedRate().step;this.timeFrameChanging=a,e&&this.api.clearData(),this.setChartUpdate(!0,"initialSubscribe"),this.inputs.subscribeAndHistory().then((e=>{let a=e.rawCandles,s=e.rawTicks,i=e.lastCandle;this.inputs.updateChart(a,s,i,!0),this.setChartUpdate(!1,"initialSubscribe")}))}setZoom(e){this.zoom=e}setHorizontalZoom(e){this.api.setHorizontalZoom(e)}selectRateById(e){const a=this.inputs.getSelectedRate(),s=a.id,i=a.range,r=a.format;s!==e?(this.inputs.selectRateById(e),this.initialSubscribe()):"line"===r&&i&&i!==this.zoom&&(this.setZoom(i),this.api.setVisibleTimeInterval(i))}selectRateByIdAsync(e){return new Promise((a=>{const s=this.inputs.getSelectedRate().id;this.selectRateById(e),s!==e?(0,r.when)((()=>!this.isChartUpdating),(()=>{a()})):a()}))}selectRateByFormat(e){const a=this.inputs.getSelectedRate(),s=a.format,i=a.step;if(e!==s){const a=this.inputs.getRate({format:e});a&&(this.inputs.selectRateById(a.id),a.step!==i?this.initialSubscribe():this.inputs.setChartType&&this.inputs.setChartType(a.format))}}returnToLastCandle(){this.mayReturnToLastCandle=!1,this.lastCandlePosition=0,this.api.returnToLastCandle()}resetDefaultVerticalZoom(){this.mayResetDefaultVerticalZoom=!1,this.api.resetDefaultVerticalZoom()}selectRateByTimeFrame(e){const a=this.inputs.getRate({step:e}),s=this.inputs.getSelectedRate();a&&a.id!==s.id&&this.inputs.selectRateById(a.id)}setChartUpdate(e,a){(e||this.lastUpdatingKey===a)&&(this.lastUpdatingKey=a,this.isChartUpdating=e)}handleTimeIntervalChange(e,a,s,i){if(this.timeFrameChanging&&this.timeFrameChanging!==a){const e=(i-s)/a,r=e<600?s-Math.ceil(600-e)*a:s;this.selectRateByTimeFrame(a),this.setChartUpdate(!0,"handleTimeIntervalChange"),this.inputs.subscribeAndHistory(r,i).then((e=>{let a=e.rawCandles,s=e.rawTicks,i=e.lastCandle;if(a.length){this.inputs.updateChart(a,s,i,!0);const e=this.inputs.getSelectedRate();"line"===e.format&&e.range&&this.setZoom(e.range)}})).finally((()=>{this.setChartUpdate(!1,"handleTimeIntervalChange")}))}this.timeFrameChanging=a,this.setZoom(e)}handleChartVerticalZoomChanged(e){this.mayResetDefaultVerticalZoom=e}handleLastCandlePositionChanged(e){this.lastCandlePosition=e,this.updateReturnToLastCandle()}updateChartWidth(e){e!==this.chartWidth&&(this.chartWidth=e,this.updateReturnToLastCandle())}updateReturnToLastCandle(){this.chartWidth&&this.lastCandlePosition&&(this.mayReturnToLastCandle=this.lastCandlePosition>this.chartWidth-75)}scrollToTimestamp(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.zoom;a&&(s=20),this.api.scrollToTime(e-.15*s)}handleRequestData(e,a,s){const i=e*s+a,r=s<600?a-Math.ceil(600-s)*e:a;return this.setChartUpdate(!0,"handleRequestData"),this.timeFrameChanging=e,this.inputs.subscribeAndHistory(r,i).then((e=>{let a=e.rawCandles,s=e.rawTicks,i=e.lastCandle;a.length&&this.inputs.updateChart(a,s,i,!0)})).finally((()=>{this.setChartUpdate(!1,"handleRequestData")}))}constructor(e,a){this.lastUpdatingKey="",this.lastCandlePosition=0,this.chartWidth=0,this.timeFrameChanging=0,this.isChartUpdating=!0,this.mayReturnToLastCandle=!1,this.mayResetDefaultVerticalZoom=!1,this.zoom=0,this.api=e,this.inputs=a}}(0,i.gn)([r.observable],ZoomService.prototype,"isChartUpdating",void 0),(0,i.gn)([r.observable],ZoomService.prototype,"mayReturnToLastCandle",void 0),(0,i.gn)([r.observable],ZoomService.prototype,"mayResetDefaultVerticalZoom",void 0),(0,i.gn)([r.observable],ZoomService.prototype,"zoom",void 0);var n=s(3121),o=s(27378),l=s(50649),c=s(37488),d=s(60042),u=s.n(d),m=s(77740),p=s(17302);const h="Oe3O7bbv",v=e=>{const a=e.color;return o.createElement("div",{className:h},o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},o.createElement("path",{fill:a,fillOpacity:".131",d:"M58 32c0 14.4-11.6 26-26 26S6 46.4 6 32 17.6 6 32 6s26 11.6 26 26zM0 32c0 17.7 14.3 32 32 32s32-14.3 32-32S49.7 0 32 0 0 14.3 0 32z",className:"satir-spinner__path-1"}),o.createElement("linearGradient",{id:"satir-gradient-1",x1:"-91.457",x2:"-91.981",y1:"101.232",y2:"102.114",gradientTransform:"matrix(35 0 0 -57.055 3259 5822.275)",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{offset:"0",stopColor:a}),o.createElement("stop",{offset:".839",stopColor:a,stopOpacity:"0"}),o.createElement("stop",{offset:"1",stopColor:a,stopOpacity:"0"})),o.createElement("path",{fill:"url(#satir-gradient-1)",d:"M58 32c0 7.7-3.4 14.9-9.1 19.8-1.3 1.1-1.4 3-.3 4.2 1.1 1.3 3 1.4 4.2.3 7-6 11.2-14.8 11.2-24.3C64 14.3 49.7 0 32 0c-1.7 0-3 1.3-3 3s1.3 3 3 3c14.4 0 26 11.6 26 26z",className:"satir-spinner__path-2"}),o.createElement("linearGradient",{id:"satir-gradient-2",x1:"-92.119",x2:"-91.583",y1:"101.863",y2:"100.97",gradientTransform:"matrix(35 0 0 -57.055 3230 5829.22)",gradientUnits:"userSpaceOnUse"},o.createElement("stop",{offset:"0",stopColor:a}),o.createElement("stop",{offset:".839",stopColor:a,stopOpacity:"0"}),o.createElement("stop",{offset:"1",stopColor:a,stopOpacity:"0"})),o.createElement("path",{fill:"url(#satir-gradient-2)",d:"M6 32c0-7.7 3.4-14.9 9.1-19.8 1.3-1.1 1.4-3 .3-4.2s-3-1.4-4.2-.3C4.2 13.7 0 22.5 0 32c0 17.7 14.3 32 32 32 1.7 0 3-1.3 3-3s-1.3-3-3-3C17.6 58 6 46.4 6 32z",className:"satir-spinner__path-3"})))},g="txJtdCTa",_="f1Qex4ON",f="s9Z4y0ki",E="iDIx5fao",S="qWsQjOGJ",y=e=>{let a=e.loading,s=e.isDisabled,i=e.type,r=e.active,n=void 0===r||r,l=e.onClick;const c="plus"===i,d=c?o.createElement(m.iU,{className:f}):o.createElement(m.fOs,{className:f}),h=a?o.createElement(v,{color:"#fff"}):d,y=c?"chart-zoom-button_plus":"chart-zoom-button_minus";return o.createElement(p.Xd,{className:u()(g,c?S:E,!n&&_),onClick:l,disabled:s,"data-test":y},h)};var b=s(82844),C=s(65592);const T="W3n1LBhc",A=e=>{let a=e.children,s=e.onClick;return o.createElement(p.Xd,{className:T,onClick:s},a)},k=e=>{let a=e.onClick;return o.createElement(C.P,{content:o.createElement(b._,Object.assign({},C.X.return_vertical_zoom)),placement:"top",distance:15},o.createElement(A,{onClick:a},o.createElement(m.leD,null)))},w=e=>{let a=e.onClick;return o.createElement(C.P,{content:o.createElement(b._,Object.assign({},C.X.return_position)),placement:"top",distance:15},o.createElement(A,{onClick:a},o.createElement(m.Ec8,null)))},N="o3QL4jzT",R="MXRLaxxU",I=(0,l.observer)((e=>{let a=e.zoomService,s=e.timeFrameSelector;const i=(0,n.Z)(o.useState(!1),2),r=i[0],l=i[1],d=o.useCallback((()=>{a.setHorizontalZoom(1)}),[a]),u=o.useCallback((()=>{a.setHorizontalZoom(-1)}),[a]),m=o.useCallback((()=>{l(!0)}),[]),p=o.useCallback((()=>{a.returnToLastCandle()}),[a]),h=o.useCallback((()=>{a.resetDefaultVerticalZoom()}),[a]),v=(0,c.useMediaQuery)({maxWidth:480}),g=!v||r;return o.createElement("div",{className:N,onClick:m},o.createElement(y,{active:!v,type:"minus",onClick:u,loading:!1}),s(g),o.createElement(y,{active:!v,type:"plus",onClick:d,loading:!1}),a.mayResetDefaultVerticalZoom||a.mayReturnToLastCandle?o.createElement("div",{className:R},a.mayResetDefaultVerticalZoom?o.createElement(k,{onClick:h}):null,a.mayReturnToLastCandle?o.createElement(w,{onClick:p}):null):null)}))},70325:(e,a,s)=>{"use strict";s.d(a,{L:()=>N,Z:()=>D});var i,r=s(59312),n=s(27378),o=s(21182),l=s(84584),c=s(60042),d=s.n(c),u=s(73598),m=s(50649),p=s(37488),h=s.n(p),v=s(87601),g=s(3166),_=s(54172),f=s(65525),E=s(28963),S=s(32299),y=s(15221),b=s(64802),C=s(25017),T=s(38246),A=s(80820);const k=(0,o.W)(b.ZH),w=(0,o.W)(g.A),N=(0,l.Z)(),R=(0,o.W)(N);let I=((i=class Chart extends n.Component{componentDidMount(){this.mounted=!0,this.resizeObserver=new ResizeObserver((e=>{e.forEach((e=>{const a=e.contentRect,s=a.width,i=a.height;this.onResize(s,i)}))})),this.chartRef.current&&this.resizeObserver.observe(this.chartRef.current)}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}init(e,a){"number"==typeof e&&"number"==typeof a&&this.mounted&&this.canvasRef.current&&this.props.api.componentDidMount(this.props.tradeFrameId,e,a,this.canvasRef.current)}render(){const e=this.props,a=e.chartStore,s=e.pairPrecision,i=e.isNotFirstChart,r=window.devicePixelRatio||1,o=this.state.width?this.state.width:200,l=this.state.height?this.state.height:200,c=Boolean(!this.props.rendererLoaded||this.props.chartStore.loadingRate),m=a.hasSentiment;return n.createElement("div",{className:"chart-gl-wrapper"},n.createElement("div",{id:"chart-".concat(this.props.tradeFrameId),className:d()("chart light chart_gl",{"chart-sidebar":this.props.isSideBarCollapsed,[a.uiService.theme]:!0}),ref:this.chartRef},n.createElement("canvas",{id:"chart-canvas-".concat(this.props.tradeFrameId),width:"".concat(o*r,"px"),height:"".concat(l*r,"px"),ref:this.canvasRef}),c?n.createElement(S.a,null):null,n.createElement("div",{className:d()("js-main-chart-container main-chart-container main-chart-container_gl",{"main-chart-container_has-sentiment":m})},this.props.inited?n.createElement(w,{props:{tradeFrameId:this.props.tradeFrameId,chartWidth:a.width,pairPrecision:s}}):null,this.props.inited?n.createElement(h(),{maxWidth:v.j$.BREAKPOINT_960},(e=>n.createElement(u.Qj,null,(()=>e&&a.uiService.wasFirstTouch?n.createElement(T.wz,{chartStore:a,dealCurrentService:a.dealCurrentService,uiService:a.uiService}):n.createElement(T.zr,{chartStore:a,dealCurrentService:a.dealCurrentService}))))):null,n.createElement(h(),{minWidth:v.j$.BREAKPOINT_769},a.inited?n.createElement(k,{props:{hasSentiment:m,className:d()(i&&"chart-top-gl_is-not-first-chart"),tradeFrameId:this.props.tradeFrameId}}):null),this.props.inited?this.props.children:null),n.createElement("div",{className:"chart-bottom",ref:this.chartBottomRef},n.createElement(h(),{minWidth:480},a.inited?n.createElement(y.L,{zoomService:a.zoomService,timeFrameSelector:this.getTimeFrameSelector}):null),n.createElement(R,{props:{anchorEl:this.chartBottomRef.current}}))))}constructor(e){super(e),this.state={width:0,height:0},this.inited=!1,this.mounted=!1,this.chartRef=(0,n.createRef)(),this.canvasRef=(0,n.createRef)(),this.onResize=(e,a)=>{this.state.width!==e&&(this.setState({width:e}),this.props.api.onResizeWidth(e)),this.state.height!==a&&(this.setState({height:a}),this.props.api.onResizeHeight(a)),this.inited||(this.init(e,a),this.inited=!0)},this.onTimeFrameSelect=e=>{this.props.chartStore.zoomService.selectRateById(e)},this.getTimeFrameSelector=e=>{const a=this.props,s=a.chartStore,i=a.tradeFrameService,r=i.selectedRate.range||i.selectedRate.step,o="line"===i.selectedRate.format?s.zoomService.zoom:r;return i?n.createElement(f.T,{timeframes:s.timeFrames.map((e=>({id:e.id,time:e.range||e.step}))),selectedTimeFrame:o,onSelect:this.onTimeFrameSelect}):null},this.chartBottomRef=n.createRef()}}).displayName="Chart",i.defaultProps={hasSentiment:!1},i);I=(0,r.gn)([m.observer],I);const D=(0,_.zt)(I,{helper(e,a){let s=e.chartStore,i=e.tradeFrameService,r=e.uiService,n=a.tradeFrameId,o=a.isNotFirstChart,l=a.children;return{inited:s.inited,rendererLoaded:s.rendererLoaded,pairPrecision:i.selectedPair.precision,tradeFrameService:i,tradeFrameId:n,api:s.api,children:l,chartStore:s,isNotFirstChart:o,uiService:r}},services:[A.Hs,E.jF,C.F]})},80820:(e,a,s)=>{"use strict";s.d(a,{Hs:()=>se});var i=s(29257),r=s(37323),n=s(64356),o=s(24459),l=s(59312),c=s(27076),d=s(98064),u=s(63247),m=s(60521),p=s(28660),h=s(80080),v=s(45797),g=s(68472),_=s(40285),f=s(72785),E=s(26763),S=s(57615),y=s(29042),b=s(19669),C=s(95029),T=s(29019),A=s(5131),k=s(84974),w=s(53323),N=s(80027),R=s(82571),I=s(93824),D=s(37363),O=s(15221),L=s(8275),M=s(93979),P=s(89172),x=s(47932),F=s(91226),B=s(98484);function Z(e,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;const r=(0,C.jM)(e.type,i,e.value,a.sum,a);return s?(0,C.lu)(r,(0,C.p8)(i,a.pair.precision)):r}var U=s(15705);function H(e,a,s,i){return i&&i.type===_.$i.PERCENT?(0,C.xG)(Z(i,s,!0,_.$i.AMOUNT),{currency:e,minimumFractionDigits:2}):(0,U.cU)(e,a,i)}function G(e,a,s,i){let r=a.libType,n=a.stopOutRate,o=void 0===n?0:n,l=a.lockedTrading,c=a.locked,d=a.balance;const u=e.id,m=e.sum,p=e.dir,h=e.timeOpen,v=e.timeClose,g=e.cursOpen,E=e.currency,S=function(e){var a,s;const i=(null==e||null===(a=e.stopLoss)||void 0===a?void 0:a.type)||(null==e||null===(s=e.takeProfit)||void 0===s?void 0:s.type)||_.$i.AMOUNT,r=(0,C.dn)(i,{dealSum:e.sum,precision:(0,C.p8)(_.$i.PRICE,e.pair.precision),stopLossRate:e.pair.stopLossRate,stopOutRate:e.pair.stopOutRate,takeProfitRate:e.pair.takeProfitRate,floatingPnl:e.floatingPnl,deal:e}),n=Z({type:i,value:r[_.FM.TAKE_PROFIT].from},e,!1,_.$i.PRICE),o=Z({type:i,value:r[_.FM.TAKE_PROFIT].to},e,!1,_.$i.PRICE),l=Z({type:i,value:r[_.FM.STOP_LOSS].from},e,!1,_.$i.PRICE),c=Z({type:i,value:r[_.FM.STOP_LOSS].to},e,!1,_.$i.PRICE);return{takeProfitPriceMin:e.dir===f.em.UP?Math.min(n,o):-1,takeProfitPriceMax:e.dir===f.em.UP?-1:Math.max(n,o),stopLossPriceMin:Math.min(l,c),stopLossPriceMax:Math.max(l,c)}}(e),y=S.takeProfitPriceMin,b=S.takeProfitPriceMax,T=S.stopLossPriceMin,A=S.stopLossPriceMax,k=function(e,a,s,i,r,n){if(!n)return-1;const o=Z({type:_.$i.AMOUNT,value:(0,C.VL)(Math.min(a+e.sum,e.volume),s)},e,!1,_.$i.PRICE);return e.dir===f.em.UP?Math.min(o,i):Math.max(o,r)}(e,d,o,T,A,s),w=e.stopLoss&&e.stopLoss.value?String(e.stopLoss.value):"",N=e.takeProfit&&e.takeProfit.value?String(e.takeProfit.value):"",R=i&&e.sum<i.min;return{id:u,cursOpen:g||-1,amount:m,timeOpen:h,timeClose:v||0,direction:p===f.em.UP?0:1,trailingStop:e.stopLoss?Number(e.stopLoss.trailing):0,libType:r,stopLoss:e.stopLoss&&(e.stopLoss.type===_.$i.PRICE?e.stopLoss.value:Z(e.stopLoss,e,!1,_.$i.PRICE))||0,takeProfit:e.takeProfit&&(e.takeProfit.type===_.$i.PRICE?e.takeProfit.value:Z(e.takeProfit,e,!1,_.$i.PRICE))||0,commission:e.commission,multiplicator:e.multiplicator,currency:(0,B.Y)(E),currencyName:E,stopOut:(0,C.VL)(e.sum,o),riskfree:0,return:c||l||void 0===e.floatingPnl||R?0:e.floatingPnl+e.sum,limitType:(0,U.e1)(e.stopLoss,e.takeProfit),stopLossTitle:"SL ",stopLossValue:H(E,e.pair.precision,e,e.stopLoss),stopLossSubTitle:e.stopLoss&&e.stopLoss.type!==_.$i.PERCENT?"".concat(Z(e.stopLoss,e,!0,_.$i.PERCENT),"%"):"".concat(w,"%"),stopLossMax:-1,stopLossMin:-1,stopLossPriceMin:T,stopLossPriceMax:A,stopLossBoundQuote:k,takeProfitTitle:"TP ",takeProfitValue:H(E,e.pair.precision,e,e.takeProfit),takeProfitSubTitle:e.takeProfit&&e.takeProfit.type!==_.$i.PERCENT?"".concat(Z(e.takeProfit,e,!0,_.$i.PERCENT),"%"):"".concat(N,"%"),takeProfitMax:-1,takeProfitMin:-1,takeProfitPriceMin:y,takeProfitPriceMax:b,attractDealToChart:!0}}var V=s(74209),W=s(6143),j=s(71221),z=s(35770),q=s(38246),K=s(65307),Y=s(57307),X=s(33795),J=s(23735),Q=s(80123),$=s(15209);const ee=class Actions{constructor(e){e.em.actions.on({quickDealSaleCallback:a=>{e.dealCurrentService&&e.dealCurrentService.cancelDeal(a)},onDealSelect:a=>{e.dealsService.handleDealSelect(a)},onDealUnSelect:()=>{e.dealsService.handleDealUnSelect(1)},onOrderSelect:a=>{e.ordersService.handleOrderSelect(a)},onOrderCanceled:a=>{e.ordersService.handleOrderCancel(a)},onGetHistory:a=>{(0,Q.A)(e,a)},onLimitEdit:a=>{let s=a.limitName,i=a.dealId,r=a.value;e.onLimitEdit(s,i,r)},onClearDrawingPoints:()=>{},onDrawingPointEdited:a=>{let s=a.drawingId,i=a.timestamp,r=a.quote;$.s.emit("drawingPointEdit",{tradeFrameId:e.tradeFrameId,payload:{drawingId:s,point:{timestamp:i,quote:r}}}),e.drawingService.handleDrawingPointEdited(s,i,r)},onDrawingEdited:a=>{let s=a.drawingId;$.s.emit("drawingEdited",{tradeFrameId:e.tradeFrameId,payload:{drawingId:s}}),e.drawingService.handleDrawingEdited(s)},onSetAdviserPosition(a){let s=a.position,i=a.id;e.advisorService.handleSetAdvisorPosition(s,i),$.s.emit("adviserPosition",{tradeFrameId:e.tradeFrameId,payload:{position:s,id:i}})},onAdviserSignal(a){let s=a.signal,i=a.direction,r=a.expiration,n=a.stopLoss,o=a.id;e.advisorService.handleAdvisorSignal(s,i,r,n,o),$.s.emit("adviserSignal",{tradeFrameId:e.tradeFrameId,payload:{signal:s,direction:i,expiration:r,stopLoss:n,id:o}})},onTimeIntervalChange(a){let s=a.timeInterval,i=a.timeFrame,r=a.startDate,n=a.endDate;e.zoomService.handleTimeIntervalChange(s,i,r,n)},onSaveChartState(a){e.saveChartSettings(a)},onSwitchTrailingStop(a){let s=a.value,i=a.dealId;e.switchTrailing(1===s,i)},restoreActualData(){e.zoomService.initialSubscribe()},onAddNotificationLevel:a=>{e.priceLevelService.createSub({price:Number(a.toFixed(e.tradeFrameService.selectedPair.precision)),pair:e.candleService.pair||"",project:"fx"}).catch((a=>{a&&a.mess&&e.showNotice("createSubFx",{type:"error",message:a.mess})})),(0,J.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/notifications",eventAction:"amount_level/click",eventLabel:"fx_".concat(e.candleService.pair)})},onEditNotificationLevel:(a,s)=>{e.priceLevelService.updateSub(a,s).catch((a=>{a&&a.mess&&e.showNotice("updateSubFx",{type:"error",message:a.mess})}))},onRemoveNotificationLevel:a=>{e.priceLevelService.removeSub(a).catch((a=>{a&&a.mess&&e.showNotice("removeSubFx",{type:"error",message:a.mess})})),(0,J.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/notifications",eventAction:"amount_level/delete",eventLabel:"fx_".concat(e.candleService.pair)})},onDealTopup:(a,s)=>{var i,o,l;const c=null===(i=e.dealCurrentService)||void 0===i?void 0:i.collection.getById(a,!0);if(!c)return;const d=e.pairService.getOrGeneratePair(c.pair),u=null===(o=e.dealCurrentService)||void 0===o?void 0:o.processDealToppingUp({type:_.$i.AMOUNT,trailing:!!(null===(l=c.stopLoss)||void 0===l?void 0:l.trailing),value:(s+c.sum)*-(1-d.stopOutRate)});e.dealToppingService.showDealToppingDialog((0,n.Z)((0,r.Z)({},u),{deal:c}))},onDealTopUpPosition:a=>{e.dealToppingService.handleDealTopUpPosition(e.height-a)},onChartVerticalZoomChanged(a){e.zoomService.handleChartVerticalZoomChanged(a)},onLastCandlePositionChanged(a){e.zoomService.handleLastCandlePositionChanged(a)},onRequestData(a){let s=a.timeFrame,i=a.startDate,r=a.count;e.handleRequestData({timeFrame:s,startDate:i,count:r})},onDrawingSelected(a){$.s.emit("selectDrawing",{tradeFrameId:e.tradeFrameId,payload:{drawingId:a}}),e.drawingService.selectDrawing(a)},onDrawingUnselected(){$.s.emit("unSelectDrawing",{tradeFrameId:e.tradeFrameId}),e.drawingService.selectDrawing(void 0)}},this)}},te="zoomSettings",ae="chartState";let se=class ChartStore{get timeFrames(){return this.rateService.rateCollection?this.rateService.rateCollection.models.filter((e=>e.format===this.tradeFrameService.selectedRate.format)).map((e=>({id:e.id,step:e.step,range:e.range,format:e.format}))):[]}get deals(){return this.loadingRate?[]:this.dealCurrentService?this.dealCurrentService.collection.models.filter((e=>e.pair===this.candleService.pair)):[]}get precision(){return this.tradeFrameService.selectedPair.precision}get loadingRate(){return this.candleService.isSubscribeAndHistory}get loadingPair(){return this.candleService.pair!==this.tradeFrameService.selectedPair.id}get orders(){return this.loadingRate?[]:this.dealOrderService?this.dealOrderService.collection.models.filter((e=>e.pair===this.candleService.pair)):[]}get news(){if(this.loadingRate)return[];const e="EURUSD"===this.candleService.pair,a=Number(this.candleService.rate)>=2419200;return this.chartNewsService.chartNewsCollection.filter((s=>e&&!a||s.type!==D.k9.NON_FARM))}get zoomStateKey(){return this.candleService.selectedRate&&"line"===this.candleService.selectedRate.format?te:te+String(this.candleService.rate)}waitingForChartInit(){return new Promise((e=>{(0,m.when)((()=>this.inited&&!this.zoomService.isChartUpdating&&!this.candleService.isSubscribeAndHistory),(()=>{e()}))}))}showDealOnChart(e){this.dealsService.showHistoryDealWithScroll(e)}removeDealFromChart(){(0,m.when)((()=>this.inited),(()=>{this.dealsService.removeHistoryDeal()}))}onStart(e){return this.appService=e,!0}onBind(e,a,s,i,r,n,o,l,c,d,u,m,p,h,v,g){this.accountService=e,this.candleService=a,this.chartNewsService=s,this.featureToggleService=i,this.languageService=r,this.noticeService=n,this.priceLevelService=o,this.rateService=l,this.timeService=c,this.tradeFrameService=d,this.tradeManagerService=u,this.uiService=m,this.dealServiceFx=p,this.navigationService=h,this.sideBarService=v,this.pairService=g,this.isTrailingStop=Boolean(i.getFeatureValue(N.y2.OTP_FX_TRADING_TRAILING_STOP))}onBindDealFormStore(e){this.dealFormStore=e}initDealFormReactions(){this.disposers.push((0,m.reaction)((()=>this.dealServiceFx.showLimits),(e=>{this.dealsService.api.setStopOrderEditModeEnabled(e)}),{fireImmediately:!0}),(0,m.reaction)((()=>this.tradeFrameService.settings.dealSum),(e=>{this.dealsService.api.setDealAmount(e)}),{fireImmediately:!0}),(0,m.reaction)((()=>(0,C.Iu)(this.tradeFrameService.settings.dealSum,this.tradeFrameService.settings.multiplicator||1,this.tradeFrameService.selectedPair.commission,this.tradeFrameService.selectedPair.minCommission,this.tradeFrameService.selectedPair.openCommissionMax)),(e=>{e&&e.amount&&this.dealsService.api.setDealCommission(e.amount)}),{fireImmediately:!0}),(0,m.reaction)((()=>this.tradeFrameService.settings.multiplicator),(e=>{this.dealsService.api.setDealMultiplier(e)}),{fireImmediately:!0}))}getLimitsDiapason(e,a){const s=this.pairService.getOrGeneratePair(a.pair),i=s.precision,o=s.stopLossRate,l=s.takeProfitRate,c=s.stopOutRate;return(0,C.dn)(e,{dealSum:a.sum,precision:(0,C.p8)(e,i),stopLossRate:o,stopOutRate:c,takeProfitRate:l,floatingPnl:a.floatingPnl,deal:(0,n.Z)((0,r.Z)({},a),{pair:s})})}validateLimit(e,a,s,i){const l=this.pairService.getOrGeneratePair(s.pair),c=l.precision,d=l.stopLossRate,u=l.takeProfitRate,m=l.stopOutRate,p=(0,C.dn)(a,{dealSum:s.sum,precision:(0,C.p8)(a,c),stopLossRate:d,stopOutRate:m,takeProfitRate:u,floatingPnl:s.floatingPnl,deal:(0,n.Z)((0,r.Z)({},s),{pair:l})}),h=(0,C.CG)(i,e,a,p,(0,n.Z)((0,r.Z)({},s),{pair:l}));if(h){const i=(0,C.lB)(h,this.getFormattedLimitsRange(a,p[e],s.currency),(0,C.p8)(a));if(i){const e=i.values,a=(0,o.Z)(i,["values"]);return v.NW.formatMessage(a,e)}}}getFormattedLimitsRange(e,a,s){const i=(0,C.p8)(e),r=(0,C.nH)(s,i)[e];return{from:r("".concat(a.from)),to:r("".concat(a.to))}}onLimitEdit(e,a,s){if(this.dealCurrentService){const i=this.dealCurrentService.collection.getById(a,!0);if(i){const a=this.getNewLimit(e,s,i),r=this.validateLimit(e,a.type,i,a.value);if(r){this.showNotice("limitEditError",{type:"error",message:r},6);const e=this.dealsService.deals.find((e=>e.id===i.id));e&&this.dealsService.updateInputs({deals:[e]})}else this.dealCurrentService.saveLimits(i.id,{[e]:a}).catch((e=>{let a=e.mess;this.showNotice("limitSaveError",{type:"error",message:a},6)}))}}}getNewLimit(e,a,s){var i,o;const l=e===_.FM.STOP_LOSS?s.stopLoss:s.takeProfit,c=this.pairService.getOrGeneratePair(s.pair);if(l){const i=Z({type:_.$i.PRICE,value:a,trailing:l.trailing},(0,n.Z)((0,r.Z)({},s),{pair:c}),!0,l.type);return e===_.FM.STOP_LOSS?{type:l.type,value:i,trailing:l.trailing}:{type:l.type,value:i}}const d=(e===_.FM.STOP_LOSS?null==s||null===(i=s.takeProfit)||void 0===i?void 0:i.type:null==s||null===(o=s.stopLoss)||void 0===o?void 0:o.type)||_.$i.AMOUNT;return{type:d,value:Z({type:_.$i.PRICE,value:a},(0,n.Z)((0,r.Z)({},s),{pair:c}),!0,d)}}componentDidMount(e,a,s,o){this.candleService&&(this.height=s,this.width=a,this.em.init(o).then((()=>{var e=this;if(o){const e=o.getAttribute("id");e&&this.em.api.commonApi.setInputCallbacksTarget(e)}window.__chartGlInfo={version:String(this.em.api.commonApi.getChartVersion()),commitSHA:String(this.em.api.commonApi.getChartCommitSHA())},(0,X.vs)(this.em._instance),this.drawingService=new k.T(this.em.api.drawingApi,(()=>{}),(()=>{}),((e,a)=>{this.tradeManagerService.localStorageCache.setCache(e,this.tradeFrameId,a)}),(e=>this.tradeManagerService.localStorageCache.getCache(e,this.tradeFrameId))),this.advisorService=new A.q(this.em.api.advisorApi,((e,a)=>{this.tradeManagerService.localStorageCache.setCache(e,this.tradeFrameId,a)}),(e=>this.tradeManagerService.localStorageCache.getCache(e,this.tradeFrameId)),(e=>{e?this.dealFormStore.setUpButtonLocked(!0):this.dealFormStore.setDownButtonLocked(!0),this.dealFormStore.setOrderButtonLocked(!0)}),(()=>{this.dealFormStore.setUpButtonLocked(!1),this.dealFormStore.setDownButtonLocked(!1),this.dealFormStore.setOrderButtonLocked(!1)})),this.dealsService=new T.x(this.em.api.dealsApi,{deals:[],userSelectedId:null,getParseOptions:()=>({libType:0,stopOutRate:this.tradeFrameService.selectedPair.stopOutRate,lockedTrading:this.tradeFrameService.selectedPair.lockedTrading,locked:this.tradeFrameService.selectedPair.locked,balance:this.accountService.isCommonAccount(this.accountService.selectedAccount)?this.accountService.selectedAccount.amount:0}),parseDeal:(e,a)=>{var s,i;const o=this.pairService.getOrGeneratePair(e.pair),l=(null===(s=this.dealCurrentService)||void 0===s?void 0:s.selectedDealId)===e.id;return this.dealToppingService.dealToppingDialog.isVisible&&(null===(i=this.dealToppingService.dealToppingDialog.deal)||void 0===i?void 0:i.id)===e.id?G((0,n.Z)((0,r.Z)({},this.dealToppingService.dealToppingDialog.deal),{pair:o}),a,l,this.dealServiceFx.dealAmounts[e.currency]):G((0,n.Z)((0,r.Z)({},e),{pair:o}),a,l)},onDealSelect:e=>{e&&this.dealCurrentService&&this.dealCurrentService.selectDeal(e,!0)},onDealUnSelect:()=>{this.dealCurrentService&&this.dealCurrentService.unselectDeal()},onDealSell:e=>{e&&this.dealCurrentService&&this.dealCurrentService.cancelDeal(e).catch((e=>{this.showNotice("chart-deal-cancel",{type:"error",message:e.message})}))},scrollToDeal:e=>{this.zoomService.scrollToTimestamp(e.timeOpen)},getPair:e=>this.pairService.getOrGeneratePair(e)});var s,l=this;this.dealToppingService=new q.lR(this.em.api.dealToppingApi,{emModule:this.em._instance,onDialogSubmit:(s=(0,i.Z)((function*(e,a,s){var i;try{var r;yield null===(r=l.dealCurrentService)||void 0===r?void 0:r.updateDealAmount(e,a,s)}catch(e){const a=e;(null==a?void 0:a.mess)&&l.showNotice("submitDealToppingDialog",{type:"error",message:a.mess})}null===(i=l.dealCurrentService)||void 0===i||i.toggleLimitsForm(!1);const n=l.deals.find((e=>e.id===a));n&&l.dealsService.updateDeal(n)})),function(e,a,i){return s.apply(this,arguments)}),onDialogCancel:e=>{const a=this.deals.find((a=>a.id===e));a&&this.dealsService.updateDeal(a)}}),this.ordersService=new V.N(this.em.api.ordersApi,{orders:[],userSelectedId:null,parseOrder:e=>(0,V.f)(e),onOrderSelect:e=>{var a;e&&(null===(a=this.dealOrderService)||void 0===a||a.selectOrder(e))},onOrderCancel:e=>{var a;e&&(null===(a=this.dealOrderService)||void 0===a||a.cancelOrder(e))}}),this.notificationLevelService=new Y.m(this.em.api.notificationLevelApi),this.zoomService=new O.B(this.em.api.viewportApi,{getPair:()=>this.candleService.pair||"",getRate:e=>{if(e.id)this.rateService.getRate(e.id);else{if(e.step)return this.rateService.getRateByTimeFrameAndFormat(e.step,this.tradeFrameService.selectedRate.format);if(e.format)return this.tradeFrameService.getRateByFormat(e.format)}},getSelectedRate:()=>this.tradeFrameService.selectedRate,subscribeAndHistory:(e,a)=>this.candleService.subscribeAndHistory({id:this.tradeFrameService.selectedPair.id,locked:this.tradeFrameService.selectedPair.locked},this.tradeFrameService.rateId,e,a),selectRateById:e=>this.tradeFrameService.selectedRate.id!==e&&(this.tradeFrameService.selectRate(e),!0),updateChart:function(a,s,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.initChart(a,s,i,r)},setChartType:()=>{this.initChart()}}),this.zoomService.updateChartWidth(a),(0,m.runInAction)((()=>{this.chartActions=new ee(this),this.chartReady=!0,(0,g.x)("fx"),this.candleService.socketOpened?(this.createReactions(),this.createReactionsCandles(),this.initDealFormReactions()):this.disposers.push((0,m.when)((()=>this.candleService.socketOpened),(()=>{this.createReactions(),this.createReactionsCandles(),this.initDealFormReactions()})))})),this.rendererLoaded=!0,b.Sv.stopMark(b.Sv.PerformanceMetric.FirstChartContent)})))}onResizeWidth(e){this.width=e,this.zoomService&&this.zoomService.updateChartWidth(e)}onResizeHeight(e){this.height=e}createReactions(){this.disposers.push((0,m.reaction)((()=>this.candleService.serverTime),(e=>{!e||this.candleService.connectionError||this.tradeFrameService.selectedPair.locked||this.em.api.commonApi.setServerTime(e)}),{fireImmediately:!0}),(0,m.reaction)((()=>this.news.map((e=>"".concat(e.id," ").concat(e.time," ").concat(e.title))).join(",")),(()=>{this.setNews(this.news)}),{fireImmediately:!0}),(0,m.reaction)((()=>this.uiService.theme),(e=>{this.em.api.commonApi.setJsonColorScheme((0,W.H0)(e),{borderEnabled:!0})}),{fireImmediately:!0}),(0,m.reaction)((()=>"".concat(this.width," ").concat(this.height)),(()=>{this.chartReady&&this.em.api.commonApi.resize(this.width,this.height)})),(0,m.reaction)((()=>this.loadingRate||!this.inited?[]:this.getLevelNotifications()),(e=>{this.inited&&this.notificationLevelService.setNotificationLevels(e)}),{equals:m.comparer.structural}),(0,m.reaction)((()=>this.zoomState),(e=>{this.tradeManagerService.localStorageCache.setCache(this.zoomStateKey,this.tradeFrameId,e)}),{equals:m.comparer.structural}),(0,m.reaction)((()=>this.tradeFrameService.selectedPair.locked),(e=>{this.dealsService.updateInputs({locked:e}),this.em.api.commonApi.setChartStatus(e)})),(0,m.reaction)((()=>this.tradeFrameService.selectedPair.lockedTrading),(e=>{this.dealsService.updateInputs({lockedTrading:e})})),(0,m.reaction)((()=>this.tradeFrameService.selectedPair.stopOutRate),(e=>{this.dealsService.updateInputs({stopOutRate:e})})),(0,m.reaction)((()=>this.tradeFrameService.selectedPair.sentiment),(e=>{this.setSentiment(e)}),{fireImmediately:!0}),(0,m.reaction)((()=>{var e;return null===(e=this.tradeFrameService.selectedRate)||void 0===e?void 0:e.id}),(()=>{const e=this.tradeFrameService.selectedRate;this.zoomService&&"line"===e.format&&e.range&&this.zoomService.setZoom(e.range)}),{fireImmediately:!0}),(0,m.reaction)((()=>this.accountService.isCommonAccount(this.accountService.selectedAccount)?this.accountService.selectedAccount.amount:null),(()=>{this.dealToppingService.dealToppingDialog.isVisible&&this.dealToppingService.cancelDealToppingDialog(),this.accountService.isCommonAccount(this.accountService.selectedAccount)&&this.dealToppingService.api.setBalance(this.accountService.selectedAccount.amount)}),{fireImmediately:!0}),(0,m.reaction)((()=>this.accountService.selectedAccount),(()=>{this.dealsService.removeHistoryDeal(),this.dealsService.clearDeals()})))}createReactionsCandles(){this.disposers.push((0,m.reaction)((()=>this.tradeFrameService.selectedPair),(()=>{this.dealsService.removeHistoryDeal(),this.zoomService.initialSubscribe(),this.resetAdvisor()}),{fireImmediately:!0}),(0,m.reaction)((()=>this.candleService.addData&&[this.candleService.addData,this.candleService.addData.quotes.length]),(()=>{this.candleService.addData&&this.em.api.candlesApi.addCandle((0,F.p$)(this.candleService.addData))}),{equals:m.comparer.structural,fireImmediately:!0}),(0,m.reaction)((()=>this.candleService.updateData&&[this.candleService.updateData,this.candleService.updateData.quotes.length]),(()=>{this.candleService.updateData&&this.em.api.candlesApi.updateCandle((0,F.p$)(this.candleService.updateData))}),{equals:m.comparer.structural,fireImmediately:!0}),(0,m.reaction)((()=>this.candleService.addTick),(()=>{if(this.candleService.addTick){"line"===this.tradeFrameService.selectedRate.format&&this.em.api.candlesApi.addTick((0,F.UZ)(this.candleService.addTick))}}),{equals:m.comparer.structural,fireImmediately:!0}),(0,m.reaction)((()=>this.candleService.connectionRestored),(()=>{this.zoomService.initialSubscribe()})))}createOrdersReactions(){this.disposers.push((0,m.reaction)((()=>this.dealOrderService&&this.dealOrderService.selectedOrder),(e=>{e&&this.ordersService.updateInputs({userSelectedId:e.id})})),(0,m.reaction)((()=>this.orders.map((e=>"".concat(e.id," ").concat(String(e.selected)))).join(",")),(()=>{this.ordersService.updateInputs({orders:this.orders})})))}createDealsReactions(){this.disposers.push((0,m.reaction)((()=>this.deals.map((e=>"".concat(e.id," ").concat(String(e.selected)," ").concat(JSON.stringify(e.takeProfit||"")," \n                ").concat(JSON.stringify(e.stopLoss||"")," ").concat(e.commission," ").concat(e.floatingPnl," ").concat(e.realizedPnl))).join(",")),(()=>{this.zoomService.isChartUpdating||this.dealsService.updateInputs({deals:this.deals})})),(0,m.reaction)((()=>this.dealCurrentService&&this.dealCurrentService.userSelectedDeal),(e=>{this.dealsService.updateInputs({userSelectedId:e?e.id:null})})),(0,m.reaction)((()=>{if(this.dealCurrentService){const e=this.dealCurrentService.selectedDeal;if(!e)return;const a=this.pairService.getOrGeneratePair(e.pair);return{dealId:e.id,dealLimitProfitabilityQuote:(0,C.jM)(_.$i.AMOUNT,_.$i.PRICE,0,e.sum,(0,n.Z)((0,r.Z)({},e),{pair:a})),isProfitAreaHigher:e.dir===f.em.UP}}return null}),(e=>{if(!e)return;const a=e.dealId,s=e.dealLimitProfitabilityQuote,i=e.isProfitAreaHigher;this.dealsService.api.setDealLimitProfitabilityQuote(a,s,i)}),{fireImmediately:!0,equals:m.comparer.structural}),(0,m.reaction)((()=>this.sideBarService.sideBarMajor.isOpen),(e=>{const a=this.sideBarService.sideBarMajor;var s;a.scope.activeItem&&a.scope.activeItem.id===L.KO.TRADES&&this.uiService.isMobilePortrait()&&!e&&((null===(s=this.dealCurrentService)||void 0===s?void 0:s.selectedDeal)&&this.dealsService.api.unselectDeal(this.dealCurrentService.selectedDeal.id))}),{name:"ReactionSideBarIsOpenChanged"}))}setActualLevelNotifications(){this.notificationLevelService.setNotificationLevels(this.getLevelNotifications())}getLevelNotifications(){return this.priceLevelService.subsList.filter((e=>e.pair===this.tradeFrameService.selectedPair.id&&e.project===R.$.FX)).map((e=>({id:e.localId,quote:e.price})))}setSentiment(e){void 0!==e&&this.em.api.indicatorsApi.setSentiment(e)}initChart(e,a,s){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.em.api.commonApi.setLocale(this.languageService.langFull);const r=this.storageService.get(ae);r&&this.em.api.commonApi.loadChartState(r);const n=this.tradeFrameService,o=n.selectedRate,l=n.selectedPair,c=K.dW[o.format.toUpperCase()]||K.dW.LINE,d=(0,j.IA)(this.getMaxAmount(this.candleService.candles||[]),l.precision);this.zoomService.api.setAvailableTimeIntervals(this.timeFrames),this.em.api.commonApi.setLibType(K.RZ.FOREX),this.em.api.commonApi.setChartType(c),this.em.api.commonApi.setChartStatus(l.locked),this.em.api.viewportApi.setTimeFrame(this.candleService.rate),this.em.api.viewportApi.setPrecision(d[0],d[1]),this.dealsService.api.setStopOrderEditModeEnabled(this.dealServiceFx.showLimits),this.dealsService.api.setTrailingStopLossEnabled(this.isTrailingStop),this.em.api.viewportApi.setDynamicZoomEnabled(!0),e&&a&&this.updateHistory(e,a,s,i),this.em.api.strikesApi.setStrikes([{id:0,delta:0,selected:!0,winpercUp:0,winpercDown:0}].map(F.Xb)),this.em.api.commonApi.setProfitScaleEnabled(!0),this.notificationLevelService.api.setNotificationLevelsEnabled(!0),this.dealToppingService.api.setDealTopUpEnabled(!0),this.setNews(this.news),this.setAdvisorsAvailable(),this.dealsService.init(this.deals),this.ordersService.init(this.orders),this.setActualLevelNotifications(),this.inited=!0,this.dealsService.showHistoryDeal()}updateHistory(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.candleService.lastCandle,i=arguments.length>3?arguments[3]:void 0;const r=(0,F.p$)((0,m.toJS)(s)),n=(0,m.toJS)(e).map(F.p$),o=(0,m.toJS)(a).map(F.UZ);if(this.em.api.candlesApi.addHistory(n,o,e.length<600,i,r),["EURUSD","GBPUSD","USDJPY","USDCHF"].includes(this.candleService.pair||"")&&this.candleService.candles&&this.candleService.candles.length){const e=void 0!==this.candleService.candles?(0,c.Z)(this.candleService.candles):null,a=void 0!==this.candleService.candles?(0,d.Z)(this.candleService.candles):null;e&&a&&this.chartNewsService.fetch({from:e.Date,to:a.Date+2592e6})}}setNews(e){this.em.api.newsApi.removeAllNews(),e.forEach((e=>{this.em.api.newsApi.addNews((0,F.Ai)(e))}))}getMaxAmount(e){const a=(0,u.Z)(e,"max");return a&&a.max||0}bindToCoordinates(e){return this.chart.api.bindToCoordinates(e)}setHorizontalZoom(e){this.em.api.viewportApi.changeHorizontalZoom(e)}stopChart(){this.chart.api.stop()}setDrawingTheme(){}showNotice(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;this.noticeService.add({id:e,collectionName:w.sm.TOP,layoutProps:{msgType:a.type,html:a.message},notice:{period:s},layout:I.G0})}switchTrailing(e,a){var s;const i=null===(s=this.dealCurrentService)||void 0===s?void 0:s.collection.get(a);var o;i&&i.stopLoss&&(null===(o=this.dealCurrentService)||void 0===o||o.saveLimits(i.id,{stopLoss:(0,n.Z)((0,r.Z)({},i.stopLoss),{trailing:e})}).catch((e=>{let a=e.mess;this.showNotice("switchTrailingError",{type:"error",message:a},6)})))}saveChartSettings(e){this.storageService.set(ae,e)}handleRequestData(e){let a=e.timeFrame,s=e.startDate,i=e.count;this.zoomService.handleRequestData(a,s,i).then((()=>{this.dealsService.showHistoryDeal()}))}setHasSentiment(e){this.hasSentiment=e}getDealCommission(){const e=this.tradeFrameService,a=e.settings,s=e.selectedPair;return(0,C.Iu)(a.dealSum,a.multiplicator,s.commission,s.minCommission,s.openCommissionMax).amount}setProfitScaleAnimation(e){var a,s;if(null===(a=this.dealCurrentService)||void 0===a?void 0:a.selectedDealId)return;const i=this.tradeFrameService,r=i.settings,n=i.selectedPair;null===(s=this.em.api.experimentalApi)||void 0===s||s.showProfitScaleForSelectedDeal(r.dealSum,r.multiplicator||void 0,this.getDealCommission(),this.candleService.lastHistoryRate||void 0,-(n.stopOutRate*r.dealSum||r.dealSum),e),this.profitScaleAnimationDisposer=(0,m.reaction)((()=>this.timeService.serverTime),(()=>{var a;null===(a=this.em.api.experimentalApi)||void 0===a||a.showProfitScaleForSelectedDeal(r.dealSum,r.multiplicator||void 0,this.getDealCommission(),this.candleService.lastHistoryRate||void 0,-(n.stopOutRate*r.dealSum||r.dealSum),e)}))}unsetProfitScaleAnimation(){var e,a,s;(null===(e=this.dealCurrentService)||void 0===e?void 0:e.selectedDealId)||(null===(a=this.profitScaleAnimationDisposer)||void 0===a||a.call(this),null===(s=this.em.api.experimentalApi)||void 0===s||s.hideProfitScaleForSelectedDeal())}onStop(){var e;(this.disposers.forEach((e=>e())),this.em&&this.em.destroy(),this.drawingService)&&(null===(e=this.drawingService)||void 0===e||e.stop())}resetAdvisor(){(0,h.$)(M.c,"advisorEditService").then((e=>{e&&e.resetAdvisor(this.tradeFrameId)}))}setAdvisorsAvailable(){(0,h.$)(M.c,"advisorEditService").then((e=>{e&&e.setAdvisorsAvailable(this.tradeFrameId)}))}constructor(e){let a=e.tradeFrameId;this.disposers=[],this.dealCurrentService=null,this.dealOrderService=null,this.editedConfig={},this.storageService=new S._({namespace:"chart",backend:new y.u}),this.profitScaleAnimationDisposer=void 0,this.api={bindToCoordinates:this.bindToCoordinates,componentDidMount:this.componentDidMount,onResizeHeight:this.onResizeHeight,onResizeWidth:this.onResizeWidth,setDrawingTheme:this.setDrawingTheme,stopChart:this.stopChart},this.scrollToRight=()=>{this.zoomService.initialSubscribe(!1)},this.chartReady=!1,this.inited=!1,this.rendererLoaded=!1,this.width=0,this.height=0,this.isTrailingStop=!1,this.hasSentiment=!1,this.em=new z.V(a),this.tradeFrameId=a,Object.keys(this.api).forEach((e=>{this.api[e]=this.api[e].bind(this)})),(0,h.$)(P.o,"dealsActiveFxService").then((e=>{this.dealCurrentService=e,this.inited&&this.dealsService.init(this.deals),this.createDealsReactions()})),(0,h.$)(x.o,"orderActiveFxService").then((e=>{this.dealOrderService=e,this.inited&&this.ordersService.init(this.orders),this.createOrdersReactions()}))}};(0,l.gn)([m.observable],se.prototype,"chartReady",void 0),(0,l.gn)([m.observable],se.prototype,"inited",void 0),(0,l.gn)([m.observable],se.prototype,"rendererLoaded",void 0),(0,l.gn)([m.observable],se.prototype,"width",void 0),(0,l.gn)([m.observable],se.prototype,"height",void 0),(0,l.gn)([m.observable],se.prototype,"zoomState",void 0),(0,l.gn)([m.observable],se.prototype,"isTrailingStop",void 0),(0,l.gn)([m.observable],se.prototype,"hasSentiment",void 0),(0,l.gn)([m.computed],se.prototype,"deals",null),(0,l.gn)([m.computed],se.prototype,"precision",null),(0,l.gn)([m.computed],se.prototype,"orders",null),(0,l.gn)([m.computed],se.prototype,"news",null),(0,l.gn)([(0,p.onStart)(E.APP_SERVICE)],se.prototype,"onStart",null),(0,l.gn)([(0,p.onBind)(E.ACCOUNT_SERVICE,E.CANDLE_SERVICE,E.CHART_NEWS_SERVICE,E.FEATURE_TOGGLE_SERVICE,E.LANGUAGE_SERVICE,E.NOTICE_SERVICE,E.PRICE_LEVEL_SERVICE,E.RATE_SERVICE,E.TIME_SERVICE,E.TRADE_FRAME_SERVICE,E.TRADE_MANAGER_SERVICE,E.UI_SERVICE,E.DEAL_SERVICE_FX,E.NAVIGATION_SERVICE,E.SIDEBAR_SERVICE,E.PAIR_SERVICE_FX)],se.prototype,"onBind",null),(0,l.gn)([(0,p.onBind)(E.DEAL_FORM_STORE)],se.prototype,"onBindDealFormStore",null),(0,l.gn)([m.action],se.prototype,"componentDidMount",null),(0,l.gn)([m.action],se.prototype,"onResizeWidth",null),(0,l.gn)([m.action],se.prototype,"onResizeHeight",null),(0,l.gn)([p.onStop],se.prototype,"onStop",null),se=(0,l.gn)([(0,p.bindAs)(E.CHART_STORE)],se)},35770:(e,a,s)=>{"use strict";s.d(a,{V:()=>Api});var i=s(21681);class ChartEventsEmitter{constructor(e){this.config=e}on(e,a){this.config["emscripten_".concat(e)]=a}}var r=s(66807),n=s(89204);class AdvisorApi extends n.e{constructor(){super(...arguments),this.cache={}}addAdvisor(e,a){this.emModule.ccall("emscripten_addAdviser","number",["number","number"],[e,r.Ds[a]]),this.cache[e]=1}removeAdvisor(e){this.cache[e]&&(this.emModule.ccall("emscripten_removeAdviser","number",["number"],[e]),delete this.cache[e])}setAdviserHighTimeframeLimit(e){this.emModule.ccall("emscripten_setAdviserHighTimeframeLimit","number",["number"],[e])}setAdviserLowTimeframeLimit(e){this.emModule.ccall("emscripten_setAdviserLowTimeframeLimit","number",["number"],[e])}}var o=s(51881);class DrawingApi extends n.e{constructor(){super(...arguments),this.cache={}}addDrawing(e){let a=e.id,s=e.type,i=e.settings,n=i.color,o=i.width,l=e.points;this.cache[a]||(this.processDrawing(a,r.GW[s],n,o,l),this.emModule.ccall("emscripten_pushAddedDrawingToChart","number",[],[]),this.cache[a]=1)}editDrawing(e,a,s,i,r){this.processDrawing(e,a,s,i,r),this.emModule.ccall("emscripten_pushEditedDrawingToChart","number",[],[])}removeDrawing(e){this.cache[e]&&(this.emModule.ccall("emscripten_removeDrawing","number",["number"],[e]),delete this.cache[e])}clearCache(){this.cache={}}hoverDrawing(e,a){this.emModule.ccall("emscripten_hoverDrawing","number",["number","number"],[e,Number(a)])}selectDrawing(e){this.emModule.ccall("emscripten_selectDrawing","number",["number"],[e])}processDrawing(e,a,s,i,r){const n=(0,o.B1)(s);this.emModule.ccall("emscripten_addOrEditDrawing","number",["number","number","number","number"],[e,a,n,i]),r.forEach((a=>{this.emModule.ccall("emscripten_addPointToDrawing","number",["number","number","number"],[e,a.time,a.quote])}))}}var l=s(95029);class DealsApi extends n.e{static parseDealModelToArguments(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.id,i=e.cursOpen,r=e.amount,n=e.timeOpen,c=e.timeClose,d=e.direction,u=e.trailingStop,m=e.libType,p=e.commission,h=e.multiplicator,v=e.currency,g=e.currencyName,_=e.stopOut,f=e.riskfree,E=e.limitType,S=void 0===E?0:E,y=e.stopLoss,b=e.stopLossTitle,C=void 0===b?"":b,T=e.stopLossValue,A=void 0===T?"":T,k=e.stopLossSubTitle,w=void 0===k?"":k,N=e.stopLossMax,R=e.stopLossMin,I=e.stopLossPriceMin,D=void 0===I?-1:I,O=e.stopLossPriceMax,L=void 0===O?-1:O,M=e.stopLossBoundQuote,P=void 0===M?-1:M,x=e.takeProfit,F=e.takeProfitTitle,B=void 0===F?"":F,Z=e.takeProfitValue,U=void 0===Z?"":Z,H=e.takeProfitSubTitle,G=void 0===H?"":H,V=e.takeProfitMax,W=e.takeProfitMin,j=e.takeProfitPriceMin,z=void 0===j?-1:j,q=e.takeProfitPriceMax,K=void 0===q?-1:q,Y=e.takeProfitBoundQuote,X=void 0===Y?-1:Y,J=e.attractDealToChart,Q=e.amountFormatted,$=f?0:e.return;return(0,o.VE)(["number",s],["number",i],["number",r],["number",n],["number",c],["number",d],["number",u],["number",m],["number",y],["number",x],["number",p],["number",h],["number",V],["number",W],["number",N],["number",R],["string",v],["number",_],["number",$],["string",Q||(0,l.xG)(r,{currency:g,minimumFractionDigits:2},a.formatCurrencyOptions)],["string",(0,l.xG)($,{currency:g,minimumFractionDigits:2},a.formatCurrencyOptions)],["string",U],["string",G],["string",B],["string",A],["string",w],["string",C],["number",S],["number",K],["number",z],["number",X],["number",L],["number",D],["number",P],["number",Number(J)])}setDeals(e,a){this.emModule.ccall("emscripten_initDealsArray","number",["number"],[e.length]);for(let s=0;s<e.length;s+=1){const i=DealsApi.parseDealModelToArguments(e[s]);this.emModule.ccall("emscripten_addDealWithTypeToArray","number",["number",...i.types,"number"],[s,...i.arguments,a])}this.emModule.ccall("emscripten_flushDealsArray","number",[],[])}addDeal(e,a,s){const i=DealsApi.parseDealModelToArguments(e,s);this.emModule.ccall("emscripten_addDealWithType","number",[...i.types,"number"],[...i.arguments,a])}removeAllDeals(){this.emModule.ccall("emscripten_removeDeal","number",[],[])}removeAllDealsWithType(e){this.emModule.ccall("emscripten_removeAllDealsWithType","number",["number"],[e])}updateDeal(e){const a=DealsApi.parseDealModelToArguments(e);this.emModule.ccall("emscripten_updateDeal","number",a.types,a.arguments)}removeDeal(e){this.emModule.ccall("emscripten_removeDeal","number",["number"],[e])}selectDeal(e){this.emModule.ccall("emscripten_selectDeal","number",["number"],[e])}unselectDeal(e){this.emModule.ccall("emscripten_unselectDeal","number",["number"],[e||0])}setDealDuration(e){this.emModule.ccall("emscripten_setDealDuration","number",["number"],[e])}setDealExpiration(e){this.emModule.ccall("emscripten_setDealExpiration","number",["number"],[e])}removeDealWithPnl(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.emModule.ccall("emscripten_removeDealWithPnlAndIcon","number",["number","number","number"],[e,a,s])}setTrailingStopLossEnabled(e){this.emModule.ccall("emscripten_setTrailingStopLossEnabled","number",["number"],[e?1:0])}setDealCommission(e){this.emModule.ccall("emscripten_setDealCommission","number",["number"],[e])}setDealAmount(e){this.emModule.ccall("emscripten_setDealAmount","number",["number"],[e])}setDealMultiplier(e){this.emModule.ccall("emscripten_setDealMultiplier","number",["number"],[e])}setStopOrderEditModeEnabled(e){this.emModule.ccall("emscripten_setStopOrderEditModeEnabled","number",["number"],[Number(e)])}addQuickDeal(e){let a=e.id,s=e.cursOpen,i=e.dir,r=e.timeOpen,n=e.timeClose,o=e.labelText;try{this.emModule.ccall("emscripten_addQuickDeal","number",["number","number","number","number","number","string"],[a,s,i,r,n,o])}catch(e){console.error(e)}}removeQuickDeal(e){try{this.emModule.ccall("emscripten_removeQuickDeal","number",["number"],[e])}catch(e){console.error(e)}}removeQuickDealWithPnl(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{this.emModule.ccall("emscripten_removeQuickDealWithPnlAndIcon","number",["number","number","number"],[e,a,s])}catch(e){console.error(e)}}setIconTypeForActivePrice(e){this.emModule.ccall("emscripten_setIconTypeForActivePrice","number",["number"],[e])}setDealLimitProfitabilityQuote(e,a,s){try{this.emModule.ccall("emscripten_setDealLimitProfitabilityQuote","number",["number","number","number"],[e,a,s])}catch(e){console.error(e)}}}class BidAskApi extends n.e{setBidValue(e){this.emModule.ccall("emscripten_setBidValue","number",["number"],[e])}setAskValue(e){this.emModule.ccall("emscripten_setAskValue","number",["number"],[e])}enableBidAsk(e){this.emModule.ccall("emscripten_enableBidAsk","number",["number"],[Number(e)])}}class DealToppingApi extends n.e{setBalance(e){this.emModule.ccall("emscripten_setBalance","number",["number"],[e])}setDealTopUpEnabled(e){this.emModule.ccall("emscripten_setDealTopUpEnabled","number",["number"],[Number(e)])}}class NotificationLevelApi extends n.e{setNotificationLevelsEnabled(e){this.emModule.ccall("emscripten_setNotificationLevelsEnabled","number",["number"],[Number(e)])}addNotificationLevel(e,a){this.emModule.ccall("emscripten_addNotificationLevel","number",["number","number"],[e,a])}updateNotificationLevel(e,a){this.emModule.ccall("emscripten_updateNotificationLevel","number",["number","number"],[e,a])}removeNotificationLevel(e){this.emModule.ccall("emscripten_removeNotificationLevel","number",["number"],[e])}}class OrdersApi extends n.e{removeOrders(e){e.forEach((e=>{let a=e.id;this.emModule.ccall("emscripten_removeOrder","number",["number"],[a])}))}removeOrder(e){this.emModule.ccall("emscripten_removeOrder","number",["number"],[e])}addOrders(e){e.forEach((e=>{this.addOrder(e)}))}addOrder(e){let a=e.id,s=e.dir,i=e.openCase,r=e.timeOpen,n=e.courseTarget;this.emModule.ccall("emscripten_addOrder","number",["number","number","number","number","number"],[a,s,i,r,n])}selectOrder(e){this.emModule.ccall("emscripten_selectOrder","number",["number"],[null!=e&&e])}unSelectOrder(e){this.emModule.ccall("emscripten_unSelectOrder","number",["number"],[e])}}class ViewportApi extends n.e{setHorizontalZoom(e){this.emModule.ccall("emscripten_changeHorizontalZoomBy","number",["number"],[e])}addHistory(e,a,s,i){let r;r=this.emModule.ccall("emscripten_clearHistoryModel","number",[],[]);for(let a=e.length-1;a>-1;a--){const s=e[a];r=this.emModule.ccall("emscripten_addCandleToHistoryModel","number",["number","number","number","number","number"],[s.open,s.close,s.high,s.low,s.timestamp])}for(let e=a.length-1;e>-1;e--){const s=a[e];r=this.emModule.ccall("emscripten_addTickToHistoryModel","number",["number","number","number","number"],[s.value,s.fraction,s.timestamp,0])}return r=this.emModule.ccall("emscripten_pushHistoryModel","number",["number","number"],[+s,+i]),r}setHorizontalZoomEnabled(e){try{this.emModule.ccall("emscripten_setHorizontalZoomEnabled","number",["number"],[Boolean(e)])}catch(e){console.error(e)}}setVerticalZoomEnabled(e){try{this.emModule.ccall("emscripten_setVerticalZoomEnabled","number",["number"],[Boolean(e)])}catch(e){console.error(e)}}setScrollEnabled(e){try{this.emModule.ccall("emscripten_setScrollEnabled","number",["number"],[Boolean(e)])}catch(e){console.error(e)}}setAvailableTimeIntervals(e){e.forEach((e=>{let a=e.step,s=e.range;this.emModule.ccall("emscripten_addTimeInterval","number",["number","number"],[a,s])})),this.emModule.ccall("emscripten_pushTimeIntervalsToChart","number",[],[])}setMinCandlesCountForCurveChart(e){this.emModule.ccall("emscripten_setMinCandlesCountForCurveChart","number",["number"],[e])}zoomChartToMax(){this.emModule.ccall("emscripten_zoomChartToMax","number",[],[])}clearData(){this.emModule.ccall("emscripten_clearData","number",[],[])}resetDefaultVerticalZoom(){this.emModule.ccall("emscripten_resetDefaultVerticalZoom","number",[],[])}returnToLastCandle(){this.emModule.ccall("emscripten_returnToLastCandle","number",[],[])}setVisibleTimeInterval(e){this.emModule.ccall("emscripten_setVisibleTimeInterval","number",["number"],[e])}scrollToTime(e){this.emModule.ccall("emscripten_setStartPositionTime","number",["number"],[e])}changeHorizontalZoom(e){this.emModule.ccall("emscripten_changeHorizontalZoomBy","number",["number"],[e])}setPrecision(e,a){this.emModule.ccall("emscripten_setPrecision","number",["number","number"],[e,a])}setTimeFrame(e){return this.emModule.ccall("emscripten_setTimeframe","number",["number"],[e])}setVerticalMagnificationClamp(e,a){return this.emModule.ccall("emscripten_setVerticalMagnificationClamp","number",["number","number"],[e,a])}setDynamicZoomEnabled(e){this.emModule.ccall("emscripten_setDynamicZoomEnabled","number",["number"],[Number(e)])}}class CommonApi extends n.e{setChartType(e){this.emModule.ccall("emscripten_changeChartType","number",["number"],[e])}setLibType(e){this.emModule.ccall("emscripten_setLibType","number",["number"],[e])}setServerTime(e){this.emModule.ccall("emscripten_setServerTime","number",["number"],[e])}resize(e,a){const s=(0,o.mM)();this.emModule.ccall("emscripten_resize","number",["number","number","number"],[Number(e*s),Number(a*s),Number(s)])}setColorScheme(e){let a=e.backgroundAlphaColor,s=e.contrastGammaColor,i=e.contrastBetaColor,r=e.contrastAlphaColor,n=e.accentColor,l=e.positiveColor,c=e.negativeColor,d=e.warningColor,u=e.curveChartBaseColor,m=e.curveChartGradientColor,p=e.chartGridLinesColor,h=e.buttonContrastAlphaColor,v=e.buttonContrastGammaColor,g=e.bordersColor;this.emModule.ccall("emscripten_setColorScheme","number",["number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[(0,o.B1)(a),(0,o.B1)(s),(0,o.B1)(i),(0,o.B1)(r),(0,o.B1)(n),(0,o.B1)(l),(0,o.B1)(c),(0,o.B1)(d),(0,o.B1)(u),(0,o.B1)(m),(0,o.B1)(p),(0,o.B1)(h),(0,o.B1)(v),(0,o.B1)(g)])}setJsonColorScheme(e,a){const s={colors:e,options:a};this.emModule.ccall("emscripten_setJsonColorScheme","number",["string"],[JSON.stringify(s)])}setInputCallbacksTarget(e){this.emModule.ccall("emscripten_setInputCallbacksTarget","number",["string"],[e])}setChartStatus(e){const a=Number(e);this.emModule.ccall("emscripten_setChartStatus","number",["number"],[a])}loadChartState(e){this.emModule.ccall("emscripten_loadChartState","number",["string"],[e])}setLocale(e){this.emModule.ccall("emscripten_setLocale","number",["string"],[e])}getChartVersion(){return this.emModule.ccall("emscripten_getChartVersion","string",[],[])}getChartCommitSHA(){return this.emModule.ccall("emscripten_getChartCommitSHA","string",[],[])}setProfitScaleEnabled(e){this.emModule.ccall("emscripten_setProfitScaleEnabled","number",["number"],[e])}}function c(e,a){return"".concat(a?a+"=":"").concat(new Date(e).toLocaleTimeString(),"(").concat(new Date(e).getDate(),")")}function d(e){return e?e.timestamp?1e3*e.timestamp:e.t?1e3*e.t:e.Date?e.Date:0:0}function u(e){return c(d(e))}function m(e,a){window._chartDebug&&window._chartDebug.enabled&&(!function(){let e="";for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];s.forEach((a=>{Array.isArray(a)&&a.length&&d(a[0])?e+="[".concat(u(a[0]),"...").concat(u(a[a.length-1]),"](").concat(a.length,"), "):d(a)?e+="".concat(u(a),", "):e+=a}))}(e),window._chartDebug.cacheLog.history={rawCandles:e,rawTicks:a})}function p(e,a,s,i){return i.apply(e,s)}function h(e,a){try{if(!e[a])return e[a];if("function"!=typeof e[a])return e[a];if(window._chartDebug.logMethods.includes(a)){const s=e[a];return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return p(e,0,i,s)}}}catch(e){console.error(e)}return e[a]}function v(e,a){try{return window.Proxy&&a&&window._chartDebug?(window._chartDebug.logMethods||(window._chartDebug.logMethods=[]),window._chartDebug.availableMethods||(window._chartDebug.availableMethods={}),Object.keys(e).reduce(((a,s)=>(function(e){return[...Object.getOwnPropertyNames(Object.getPrototypeOf(e)),...Object.getOwnPropertyNames(e)].filter((a=>"function"==typeof e[a]))}(e[s]).forEach((e=>{window._chartDebug.availableMethods[e]=e})),a[s]=new Proxy(e[s],{get:h}),a)),{})):e}catch(a){return console.error(a),e}}class CandlesApi extends n.e{addHistory(e,a,s,i,r){m(e=e||[],a);let n=this.emModule.ccall("emscripten_clearHistoryModel","number",[],[]);for(let a=e.length-1;a>-1;a--){const s=e[a];n=this.emModule.ccall("emscripten_addCandleToHistoryModel","number",["number","number","number","number","number"],[s.open,s.close,s.high,s.low,s.timestamp])}for(let e=a.length-1;e>-1;e--){const s=a[e];n=this.emModule.ccall("emscripten_addTickToHistoryModel","number",["number","number","number","number"],[s.value,s.fraction,s.timestamp,0])}return r&&this.emModule.ccall("emscripten_addLastCandleToHistoryModel","number",["number","number","number","number","number"],[r.open,r.close,r.high,r.low,r.timestamp]),n=this.emModule.ccall("emscripten_pushHistoryModel","number",["number","number"],[+s,+i]),n}addCandle(e){!function(e){window._chartDebug&&window._chartDebug.enabled&&"".concat("%c em_addCandle   "," ").concat(c(1e3*e.timestamp))}(e),this.emModule.ccall("emscripten_addCandle","number",["number","number","number","number","number"],[e.open,e.close,e.high,e.low,e.timestamp])}updateCandle(e){!function(e){window._chartDebug&&window._chartDebug.enabled&&"".concat("%c em_updateCandle"," ").concat(c(1e3*e.timestamp))}(e),this.emModule.ccall("emscripten_updateCandle","number",["number","number","number","number","number"],[e.open,e.close,e.high,e.low,e.timestamp])}addTick(e){!function(e){window._chartDebug&&window._chartDebug.enabled&&"".concat("%c em_addTick     "," ").concat(c(1e3*e.timestamp))}(e),this.emModule.ccall("emscripten_addTick","number",["number","number","number","number"],[e.value,e.fraction,e.timestamp,0])}clearData(){this.emModule.ccall("emscripten_clearData","number",[],[])}}const g=Object.freeze({adx:20,alligator:8,aroon:9,awesome:21,bearspower:10,bollinger:6,bullspower:11,cci:12,demarker:13,detrendedPrice:17,ema:4,gator:19,ichimoku:7,macd:0,momentum:16,parabolic:1,rateOfChange:15,rsi:5,sma:3,stochastic:2,williamsr:18,wma:22,zigZag:14,pivotPoints:25,bwFractals:23,donchianChannel:27,stochrsi:24,inversionBollinger:26,moonPhasesIndicator:28});class IndicatorsApi extends n.e{addIndicator(e){const a=e.type,s=e.id,i=g[a];return this.log("emscripten_addIndicator: [ ".concat(s," | ").concat(i,"]")),this.emModule.ccall("emscripten_addIndicator","number",["number","number"],[s,i])}addIndicatorById(e,a){this.log("emscripten_addIndicator: [ ".concat(e," | ").concat(a,"]")),this.emModule.ccall("emscripten_addIndicator","number",["number","number"],[e,a])}removeIndicator(e){this.emModule.ccall("emscripten_removeIndicator","number",["number"],[e])}setIndicatorsActive(e,a,s){const i=Number(s);this.log("emscripten_setIndicatorsComponentActive: [ ".concat(e," | ").concat(a," | ").concat(i," ]")),this.emModule.ccall("emscripten_setIndicatorsComponentActive","number",["number","number","number"],[e,a,s])}setIndicatorsColor(e,a,s,i){if(!s)return;const r=(0,o.B1)(s);this.log("emscripten_setIndicatorsComponentColor: [ ".concat(e," | ").concat(a," | ").concat(r," | ").concat(i," ]")),this.emModule.ccall("emscripten_setIndicatorsComponentColor","number",["number","number","number","number"],[e,a,r,i])}setIndicatorsOpacity(e,a,s,i){this.emModule.ccall("emscripten_setIndicatorsComponentOpacity","number",["number","number","number","number"],[e,a,s,i])}setIndicatorsPeriods(e,a,s,i){if(this.log("emscripten_setIndicatorsComponentPeriods: [ ".concat(e," | ").concat(a," | ").concat(s," | ").concat(i," ]")),0===s.length)return;const r=s;let n,o;try{const s=new Float32Array(r.length);for(let e=0;e<r.length;e++)s[e]=r[e];n=this.emModule._malloc(s.length*s.BYTES_PER_ELEMENT),this.emModule.HEAPF32.set(s,n/4),this.emModule.ccall("emscripten_setIndicatorsComponentPeriods","number",["number","number","number","number"],[e,a,n,i])}catch(e){o=e}finally{this.emModule._free(n)}if(o)throw o}setIndicatorsStyle(e,a,s){this.log("emscripten_setIndicatorsComponentStyle: [ ".concat(e," | ").concat(a," | ").concat(s," ]")),this.emModule.ccall("emscripten_setIndicatorsComponentStyle","number",["number","number","number"],[e,a,s])}setIndicatorsWidth(e,a,s,i){"number"==typeof s&&(this.log("emscripten_setIndicatorsComponentWidth: [ ".concat(e," | ").concat(a," | ").concat(s," | ").concat(i," ]")),this.emModule.ccall("emscripten_setIndicatorsComponentWidth","number",["number","number","number","number"],[e,a,s,i]))}setSentiment(e){const a=e?e/100:0;this.emModule.ccall("emscripten_setSentiment","number",["number"],[a])}switchSentiment(e){this.emModule.ccall("emscripten_switchSentiment","number",["number"],[+e])}setIndicatorsType(e,a,s){this.log("emscripten_setIndicatorsComponentType: [ ".concat(e," | ").concat(a," | ").concat(s,"]")),this.emModule.ccall("emscripten_setIndicatorsComponentType","number",["number","number","number"],[e,a,s])}hoverIndicator(e,a){const s=Number(a);this.log("emscripten_hoverIndicator: [ ".concat(e," | ").concat(s," ]")),this.emModule.ccall("emscripten_hoverIndicator","number",["number","number"],[e,s])}}class NewsApi extends n.e{addNews(e){let a=e.time,s=e.type,i=e.text;this.emModule.ccall("emscripten_addNews","number",["number","number","string"],[a,s,i])}removeAllNews(){this.emModule.ccall("emscripten_removeAllNews","number",[],[])}}class StrikesApi extends n.e{setStrikes(e){this.emModule.ccall("emscripten_initStrikesArray","number",["number"],[e.length]);for(let a=0;a<e.length;a+=1){const s=e[a];this.emModule.ccall("emscripten_addStrike2Array","number",["number","number","number","number","number"],[a,s.id,s.delta,s.selected,s.rateUp,s.rateDown])}this.emModule.ccall("emscripten_flushStrikesArray","number",[],[])}selectStrike(e){this.emModule.ccall("emscripten_selectStrike","number",["number"],[e])}}class OnboardingApi extends n.e{startOnboarding(){this.emModule.ccall("emscripten_startOnboarding","number",[],[])}finishOnboarding(){this.emModule.ccall("emscripten_finishOnboarding","number",[],[])}showPossibleCharts(){this.emModule.ccall("emscripten_showPossibleCharts","number",[],[])}hidePossibleCharts(){this.emModule.ccall("emscripten_hidePossibleCharts","number",[],[])}showDirectionsAreas(){this.emModule.ccall("emscripten_showDirectionsAreas","number",[],[])}hideDirectionsAreas(){this.emModule.ccall("emscripten_hideDirectionsAreas","number",[],[])}stopLastCandleAnimation(){this.emModule.ccall("emscripten_stopLastCandleAnimation","number",[],[])}startLastCandleAnimation(){this.emModule.ccall("emscripten_startLastCandleAnimation","number",[],[])}finishOnboardingDeal(e){this.emModule.ccall("emscripten_finishOnboardingDeal","number",["string"],[e])}}var _=s(30339),f=s(15942),E=s(87701),S=s(33882),y=s(4837),b=(s(3952),s(35316));s(89658),s(84910),s(22743);var C=s(86584);class ExperimentalApi extends n.e{constructor(e,a){super(e,a),this.flatbuffersController=new C.k(e)}getVersion(){var e;return null===(e=function(e){const a=e.resultType(),s=(0,E.UW)(a,e.result.bind(e));var i,r;return s instanceof E.rO?{type:a,data:{version:s.version(),gitSha:s.gitSha(),api:{major:null===(i=s.api())||void 0===i?void 0:i.major(),minor:null===(r=s.api())||void 0===r?void 0:r.minor()}}}:{type:a}}(this.flatbuffersController.call(_.x7.version_Request,(e=>_.cf.createRequest(e,E.Kl.Version))).reply).data)||void 0===e?void 0:e.version}removeAllIndicators(){this.flatbuffersController.call(_.x7.indicator_Request,(e=>_.wO.createRequest(e,S.fq.RemoveAllIndicatorsMethod,S.AF.createRemoveAllIndicatorsMethod(e))))}removeDeal(e){this.flatbuffersController.call(_.x7.deals_Request,(a=>_.Fc.createRequest(a,f.fq.RemoveDeal,f.ln.createRemoveDeal(a,f.QE.createDealId(a,BigInt(e))))))}showProfitScaleForSelectedDeal(e,a,s,i,r,n){this.flatbuffersController.call(_.x7.deal_profit_scale_Request,(o=>{const l=new y.WE(new y.vn(new b.gZ(e),new b.gZ(a),new b.gZ(s),new b.gZ(i),new b.gZ(r),n));return new y.hX(y.fq.ShowProfitScaleForSelectedDeal,l).pack(o)}))}hideProfitScaleForSelectedDeal(){this.flatbuffersController.call(_.x7.deal_profit_scale_Request,(e=>{const a=new y._R;return new y.hX(y.fq.HideProfitScaleForSelectedDeal,a).pack(e)}))}}var T=s(74480);var A,k=s(44175);!function(e){e.onFlatCallback="onFlatCallback",e.quickDealSaleCallback="quickDealSaleCallback",e.onDealSelected="onDealSelected",e.onDealUnselected="onDealUnselected",e.onDealTopup="onDealTopup",e.onDealTopUpPosition="onDealTopUpPosition",e.onOrderSelected="onOrderSelected",e.onOrderUnSelected="onOrderUnSelected",e.onOrderCanceled="onOrderCanceled",e.onStrikeSelected="onStrikeSelected",e.onStrikeUnselected="onStrikeUnselected",e.getBackwardHistory="getBackwardHistory",e.getForwardHistory="getForwardHistory",e.onEngineDidLoad="onEngineDidLoad",e.onEditStopOrderValue="onEditStopOrderValue",e.onClearDrawingPoints="onClearDrawingPoints",e.onDrawingPointEdited="onDrawingPointEdited",e.onDrawingEdited="onDrawingEdited",e.onSetAdviserPosition="onSetAdviserPosition",e.onAdviserSignal="onAdviserSignal",e.onTimeIntervalChange="onTimeIntervalChange",e.saveChartState="saveChartState",e.onSwitchTrailingStop="onSwitchTrailingStop",e.onDrawingUnselected="onDrawingUnselected",e.restoreActualData="restoreActualData",e.onAddNotificationLevel="onAddNotificationLevel",e.onEditNotificationLevel="onEditNotificationLevel",e.onRemoveNotificationLevel="onRemoveNotificationLevel",e.onChartVerticalZoomChanged="onChartVerticalZoomChanged",e.onLastCandlePositionChanged="onLastCandlePositionChanged",e.onRequestData="onRequestData",e.onDrawingSelected="onDrawingSelected"}(A||(A={}));var w=s(40285);class Api{init(e){return new Promise(((a,i)=>{const r={canvas:e,doNotCaptureKeyboard:!0,noExitRuntime:!1,onRuntimeInitialized:()=>{}};var n,o;n=new ChartEventsEmitter(r),o=this.actions,n.on(A.quickDealSaleCallback,(e=>{o.trigger("quickDealSaleCallback",e)})),n.on(A.onDealSelected,(e=>{o.trigger("onDealSelect",e)})),n.on(A.onDealUnselected,(e=>{o.trigger("onDealUnSelect",Array.isArray(e)?e[0]:e)})),n.on(A.onDealTopup,((e,a)=>{o.trigger("onDealTopup",e,a)})),n.on(A.onDealTopUpPosition,(e=>{o.trigger("onDealTopUpPosition",e)})),n.on(A.onOrderSelected,(e=>{o.trigger("onOrderSelect",e)})),n.on(A.onOrderUnSelected,(e=>{o.trigger("onOrderUnSelected",e)})),n.on(A.onOrderCanceled,(e=>{o.trigger("onOrderCanceled",e)})),n.on(A.onStrikeSelected,(e=>{o.trigger("onStrikeSelect",e)})),n.on(A.onStrikeUnselected,(e=>{o.trigger("onStrikeUnSelect",Array.isArray(e)?e[0]:e)})),n.on(A.getBackwardHistory,((e,a,s,i)=>{o.trigger("onGetHistory",{to:1e3*e,limit:a,firstIndex:s,lastIndex:i})})),n.on(A.getForwardHistory,((e,a,s,i)=>{o.trigger("onGetHistory",{from:1e3*e,limit:a,firstIndex:s,lastIndex:i})})),n.on(A.onEngineDidLoad,(()=>{o.trigger("onEngineDidLoad")})),n.on(A.onEditStopOrderValue,((e,a,s)=>{o.trigger("onLimitEdit",{limitName:e?w.FM.TAKE_PROFIT:w.FM.STOP_LOSS,dealId:a,value:s})})),n.on(A.onClearDrawingPoints,(e=>{o.trigger("onClearDrawingPoints",{drawingId:e})})),n.on(A.onDrawingPointEdited,((e,a,s)=>{o.trigger("onDrawingPointEdited",{drawingId:e,timestamp:a,quote:s})})),n.on(A.onDrawingEdited,(e=>{o.trigger("onDrawingEdited",{drawingId:e})})),n.on(A.onSetAdviserPosition,((e,a)=>{o.trigger("onSetAdviserPosition",{position:e,id:a})})),n.on(A.onAdviserSignal,((e,a,s,i,r)=>{o.trigger("onAdviserSignal",{signal:e,direction:a,expiration:s,stopLoss:i,id:r})})),n.on(A.onTimeIntervalChange,((e,a,s,i)=>{o.trigger("onTimeIntervalChange",{timeInterval:e,timeFrame:a,startDate:s,endDate:i})})),n.on(A.saveChartState,(e=>{o.trigger("onSaveChartState",e)})),n.on(A.onSwitchTrailingStop,((e,a)=>{o.trigger("onSwitchTrailingStop",{value:e,dealId:a})})),n.on(A.onDrawingUnselected,(()=>{o.trigger("onDrawingUnselected")})),n.on(A.restoreActualData,(()=>{o.trigger("restoreActualData")})),n.on(A.onAddNotificationLevel,(e=>{o.trigger("onAddNotificationLevel",e)})),n.on(A.onEditNotificationLevel,((e,a)=>{o.trigger("onEditNotificationLevel",e,a)})),n.on(A.onRemoveNotificationLevel,(e=>{o.trigger("onRemoveNotificationLevel",e)})),n.on(A.onChartVerticalZoomChanged,(e=>{o.trigger("onChartVerticalZoomChanged",Boolean(e))})),n.on(A.onLastCandlePositionChanged,(e=>{o.trigger("onLastCandlePositionChanged",e)})),n.on(A.onRequestData,((e,a,s)=>{o.trigger("onRequestData",{timeFrame:e,startDate:a,count:s})})),n.on(A.onDrawingSelected,(e=>{o.trigger("onDrawingSelected",e)})),n.on(A.onDrawingUnselected,(e=>{o.trigger("onDrawingUnselected",e)})),k.q.getActual().then((e=>{let a="";return a="".concat(e.services.chart.url,"/remote"),window.chartArtifactUrl=a,s.e(3774).then(s.t.bind(s,83774,23))})).then((e=>(0,e.bootstrap)(r))).then((e=>{var s,i;this._instance=e,this.api=(s=this._instance,i={debug:this._debug,tradeFrameId:this.tradeFrameId},v({drawingApi:new DrawingApi(s,i),advisorApi:new AdvisorApi(s,i),dealsApi:new DealsApi(s,i),bidAskApi:new BidAskApi(s,i),dealToppingApi:new DealToppingApi(s,i),notificationLevelApi:new NotificationLevelApi(s,i),ordersApi:new OrdersApi(s,i),viewportApi:new ViewportApi(s,i),commonApi:new CommonApi(s,i),candlesApi:new CandlesApi(s,i),indicatorsApi:new IndicatorsApi(s,i),newsApi:new NewsApi(s,i),strikesApi:new StrikesApi(s,i),experimentalApi:new ExperimentalApi(s,i),drawingFbApi:new T.O(s,i),onboardingApi:new OnboardingApi(s,i)},i.debug)),a()})).catch(i)}))}destroy(){try{this._instance.abort("destroy")}catch(e){}}constructor(e){this.tradeFrameId=e,this._debug=!0,this._instance={},this.actions=Object.assign({},i.vp),this.indicatorsKey=0,this.addedIndicators=[],this.api={}}}},91226:(e,a,s)=>{"use strict";function i(e){return{id:e.id,delta:e.delta,selected:e.selected?1:0,rateUp:e.winpercUp||0,rateDown:e.winpercDown||0}}function r(e){return{open:e.open,close:e.close,high:e.max,low:e.min,timestamp:e.Date/1e3}}function n(e){const a=e.Date/1e3,s=Math.floor(a);return{value:e.q,fraction:Math.round(1e3*(a-s))/1e3,timestamp:s,heartbeat:e.heartbeat}}function o(e){let a=e.time;return{text:e.text,type:0,time:Math.floor(a/1e3)}}s.d(a,{Ai:()=>o,UZ:()=>n,Xb:()=>i,p$:()=>r})},66460:(e,a,s)=>{"use strict";s.d(a,{$G:()=>O,qF:()=>L.Z,Yq:()=>me,i9:()=>k.Hs,YY:()=>M.Hs,fl:()=>le,Dp:()=>R});var i=s(27378),r=s(29229),n=s(21182),o=s(13225),l=s(28373),c=s(50649),d=s(60042),u=s.n(d),m=s(37488),p=s.n(m),h=s(87601),v=s(95029),g=s(18902),_=s(54172),f=s(28963),E=s(32299),S=s(15221),y=s(64802),b=s(3166),C=s(73598),T=s(65525);const A=e=>{let a=e.chartStore,s=e.tradeFrameService;const r=i.useCallback((e=>a.zoomService.selectRateById(e)),[]);return i.createElement(C.Qj,null,(()=>{const e=s.selectedRate.range||s.selectedRate.step,n="line"===s.selectedRate.format?a.zoomService.zoom:e;return s?i.createElement(T.T,{timeframes:a.timeFrames.map((e=>({id:e.id,time:e.range||e.step}))),selectedTimeFrame:n,onSelect:r}):null}))};A.displayName="TimeFrameSelector";var k=s(58659);const w=(0,n.W)(y.ZH),N=(0,n.W)(b.A),R=(0,r.S)(),I=(0,c.observer)((e=>{let a=e.api,s=e.chartStore,r=e.children,n=e.isNotFirstChart,l=e.isSideBarCollapsed,c=e.pairPrecision,d=e.tradeFrameId,m=e.tradeFrameService;const g=i.useRef(null),_=i.useRef(null),f=i.useRef(!1),y=i.useRef({width:null,height:null}),b=(0,v.xE)(g,100),C=b.width,T=b.height;i.useEffect((()=>{y.current.width!==C&&(y.current.width=C,a.onResizeWidth(C)),y.current.height!==T&&(y.current.height=T,a.onResizeHeight(T)),!f.current&&_.current&&(a.componentDidMount(d,C,T,_.current),f.current=!0)}),[C,T]);const k=(0,o.z)(R),I=!s.rendererLoaded||s.loadingRate;i.useEffect((()=>{I||k({})}),[k,I]);const D=i.useCallback((e=>i.createElement(A,{chartStore:s,tradeFrameService:m})),[s,m]),O=window.devicePixelRatio||1,L=s.hasSentiment;return i.createElement("div",{className:"chart-gl-wrapper"},i.createElement("div",{id:"chart-".concat(d),className:u()("chart light chart_gl",{"chart-sidebar":l,[s.uiService.theme]:!0}),ref:g},i.createElement("canvas",{id:"chart-canvas-".concat(d),width:"".concat((C||200)*O,"px"),height:"".concat((T||200)*O,"px"),ref:_}),I?i.createElement(E.a,null):null,i.createElement("div",{className:u()("js-main-chart-container main-chart-container main-chart-container_gl",{"main-chart-container_has-sentiment":L})},s.inited?i.createElement(N,{props:{tradeFrameId:d,chartWidth:s.width,pairPrecision:c}}):null,i.createElement(p(),{minWidth:h.j$.BREAKPOINT_769},s.inited?i.createElement(w,{props:{hasSentiment:L,className:u()(n&&"chart-top-gl_is-not-first-chart"),tradeFrameId:d}}):null),s.inited?r:null),i.createElement("div",{className:"chart-bottom"},s.inited?i.createElement(p(),{minWidth:480},i.createElement(S.L,{zoomService:s.zoomService,timeFrameSelector:D})):null)))}));I.displayName="Chart";const D=(0,l.k)(g.u,(e=>i.createElement(I,Object.assign({},e)))),O=(0,_.zt)(D,{helper(e,a){let s=e.chartStore,i=e.tradeFrameService,r=a.tradeFrameId,n=a.isNotFirstChart,o=a.children;return{tradeFrameService:i,pairPrecision:i.selectedPair.precision,tradeFrameId:r,api:s.api,children:o,chartStore:s,isNotFirstChart:n}},services:[k.Hs,f.z2]});var L=s(70325),M=s(80820),P=s(59312),x=s(25017),F=s(63247),B=s(60521),Z=s(28660),U=s(68472),H=s(26763),G=s(57615),V=s(29042),W=s(19669),j=s(53323),z=s(84974),q=s(93824),K=s(82571),Y=s(65307),X=s(6143),J=s(35770),Q=s(71221),$=s(57307),ee=s(33795),te=s(91226),ae=s(23735),se=s(80123),ie=s(15209);const re=class Actions{constructor(e){e.em.actions.on({onGetHistory:a=>{(0,se.A)(e,a)},onDrawingPointEdited:a=>{let s=a.drawingId,i=a.timestamp,r=a.quote;ie.s.emit("drawingPointEdit",{tradeFrameId:e.tradeFrameId,payload:{drawingId:s,point:{timestamp:i,quote:r}}}),e.drawingService.handleDrawingPointEdited(s,i,r)},onDrawingEdited:a=>{let s=a.drawingId;ie.s.emit("drawingEdited",{tradeFrameId:e.tradeFrameId,payload:{drawingId:s}}),e.drawingService.handleDrawingEdited(s)},onTimeIntervalChange(a){let s=a.timeInterval,i=a.timeFrame,r=a.startDate,n=a.endDate;e.zoomService.handleTimeIntervalChange(s,i,r,n)},onSaveChartState(a){e.saveChartSettings(a)},onChartVerticalZoomChanged(a){e.zoomService.handleChartVerticalZoomChanged(a)},onLastCandlePositionChanged(a){e.zoomService.handleLastCandlePositionChanged(a)},onAddNotificationLevel:a=>{e.priceLevelService.createSub({price:Number(a.toFixed(e.tradeFrameService.selectedPair.precision)),pair:e.candleService.pair||"",project:"spt"}).catch((a=>{a&&a.mess&&e.showNotice("createSubSpt",{type:"error",message:a.mess})})),(0,ae.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/notifications",eventAction:"amount_level/click",eventLabel:"spt_".concat(e.candleService.pair)})},onEditNotificationLevel:(a,s)=>{e.priceLevelService.updateSub(a,s).catch((a=>{a&&a.mess&&e.showNotice("updateSubSpt",{type:"error",message:a.mess})}))},onRemoveNotificationLevel:a=>{e.priceLevelService.removeSub(a).catch((a=>{a&&a.mess&&e.showNotice("removeSubSpt",{type:"error",message:a.mess})})),(0,ae.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/notifications",eventAction:"amount_level/delete",eventLabel:"spt_".concat(e.candleService.pair)})},onDrawingSelected(a){ie.s.emit("selectDrawing",{tradeFrameId:e.tradeFrameId,payload:{drawingId:a}}),e.drawingService.selectDrawing(a)},onDrawingUnselected(){ie.s.emit("unSelectDrawing",{tradeFrameId:e.tradeFrameId}),e.drawingService.selectDrawing(void 0)},quickDealSaleCallback:()=>null,onDealSelect:()=>null,onDealUnSelect:()=>null,onClearDrawingPoints:()=>null,onAdviserSignal:()=>null,onSetAdviserPosition:()=>null,onOrderSelect:()=>null,onOrderCanceled:()=>null,onLimitEdit:()=>null,onSwitchTrailingStop:()=>null},this)}},ne="zoomSettings",oe="chartState";let le=class ChartStore{get timeFrames(){return this.rateService.rateCollection?this.rateService.rateCollection.models.filter((e=>e.format===this.tradeFrameService.selectedRate.format)).map((e=>({id:e.id,step:e.step,range:e.range,format:e.format}))):[]}get precision(){return this.tradeFrameService.selectedPair.precision}get loadingRate(){return this.candleService.isSubscribeAndHistory}get loadingPair(){return this.candleService.pair!==this.tradeFrameService.selectedPair.id}get zoomStateKey(){var e;return"line"===(null===(e=this.candleService.selectedRate)||void 0===e?void 0:e.format)?ne:ne+String(this.candleService.rate)}onStart(e){return this.appService=e,!0}onBind(e,a,s,i,r,n,o,l,c,d,u,m){this.candleService=e,this.featureToggleService=a,this.languageService=s,this.noticeService=i,this.rateService=r,this.timeService=n,this.tradeFrameService=o,this.tradeManagerService=l,this.uiService=c,this.navigationService=d,this.sideBarService=u,this.priceLevelService=m}showErrorMessage(e){this.noticeService.add({layout:q.G0,layoutProps:{msgType:"error",html:e},notice:{collectionName:j.sm.TOP,period:6}})}componentDidMount(e,a,s,i){this.candleService&&(this.height=s,this.width=a,this.em.init(i).then((()=>{var e=this;if(i){const e=i.getAttribute("id");e&&this.em.api.commonApi.setInputCallbacksTarget(e)}window.__chartGlInfo={version:String(this.em.api.commonApi.getChartVersion()),commitSHA:String(this.em.api.commonApi.getChartCommitSHA())},(0,ee.vs)(this.em._instance),this.drawingService=new z.T(this.em.api.drawingApi,(()=>{}),(()=>{}),((e,a)=>{this.tradeManagerService.localStorageCache.setCache(e,this.tradeFrameId,a)}),(e=>this.tradeManagerService.localStorageCache.getCache(e,this.tradeFrameId))),this.notificationLevelService=new $.m(this.em.api.notificationLevelApi),this.zoomService=new S.B(this.em.api.viewportApi,{getPair:()=>String(this.candleService.pair),getRate:e=>{if(e.id)this.rateService.getRate(e.id);else{if(e.step)return this.rateService.getRateByTimeFrameAndFormat(e.step,this.tradeFrameService.selectedRate.format);if(e.format)return this.tradeFrameService.getRateByFormat(e.format)}},getSelectedRate:()=>this.tradeFrameService.selectedRate,subscribeAndHistory:(e,a)=>this.candleService.subscribeAndHistory({id:this.tradeFrameService.selectedPair.id,locked:this.tradeFrameService.selectedPair.locked},this.tradeFrameService.rateId,e,a),selectRateById:e=>this.tradeFrameService.selectedRate.id!==e&&(this.tradeFrameService.selectRate(e),!0),updateChart:function(a,s,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.initChart(a,s,i,r)},setChartType:()=>{this.initChart()}}),this.zoomService.updateChartWidth(a),this.bidAskApi=this.em.api.bidAskApi,(0,B.runInAction)((()=>{this.chartActions=new re(this),this.chartReady=!0,(0,U.x)("spt"),this.candleService.socketOpened?(this.createReactions(),this.createReactionsCandles()):this.disposers.push((0,B.when)((()=>this.candleService.socketOpened),(()=>{this.createReactions(),this.createReactionsCandles()})))})),this.rendererLoaded=!0,W.Sv.stopMark(W.Sv.PerformanceMetric.FirstChartContent)})))}onResizeWidth(e){this.width=e,this.zoomService&&this.zoomService.updateChartWidth(e)}onResizeHeight(e){this.height=e}createReactions(){this.disposers.push((0,B.reaction)((()=>this.candleService.serverTime),(e=>{!e||this.candleService.connectionError||this.tradeFrameService.selectedPair.locked||this.em.api.commonApi.setServerTime(e)}),{fireImmediately:!0}),(0,B.reaction)((()=>this.uiService.theme),(e=>{this.em.api.commonApi.setJsonColorScheme((0,X.H0)(e),{borderEnabled:!0})}),{fireImmediately:!0}),(0,B.reaction)((()=>"".concat(this.width," ").concat(this.height)),(()=>{this.chartReady&&this.em.api.commonApi.resize(this.width,this.height)})),(0,B.reaction)((()=>this.zoomState),(e=>{this.tradeManagerService.localStorageCache.setCache(this.zoomStateKey,this.tradeFrameId,e)}),{equals:B.comparer.structural}),(0,B.reaction)((()=>this.tradeFrameService.selectedPair.locked),(e=>{this.em.api.commonApi.setChartStatus(e)})),(0,B.reaction)((()=>{var e;return null===(e=this.tradeFrameService.selectedRate)||void 0===e?void 0:e.id}),(()=>{const e=this.tradeFrameService.selectedRate;this.zoomService&&"line"===e.format&&e.range&&this.zoomService.setZoom(e.range)}),{fireImmediately:!0}),(0,B.reaction)((()=>this.loadingRate||!this.inited?[]:this.getLevelNotifications()),(e=>{this.inited&&this.notificationLevelService.setNotificationLevels(e)}),{equals:B.comparer.structural}))}createReactionsCandles(){this.disposers.push((0,B.reaction)((()=>this.tradeFrameService.selectedPair),(()=>{this.zoomService.initialSubscribe()}),{fireImmediately:!0}),(0,B.reaction)((()=>this.candleService.addData&&[this.candleService.addData,this.candleService.addData.quotes.length]),(()=>{this.candleService.addData&&this.em.api.candlesApi.addCandle((0,te.p$)(this.candleService.addData))}),{equals:B.comparer.structural,fireImmediately:!0}),(0,B.reaction)((()=>this.candleService.updateData&&[this.candleService.updateData,this.candleService.updateData.quotes.length]),(()=>{this.candleService.updateData&&this.em.api.candlesApi.updateCandle((0,te.p$)(this.candleService.updateData))}),{equals:B.comparer.structural,fireImmediately:!0}),(0,B.reaction)((()=>this.candleService.addTick),(()=>{if(this.candleService.addTick){"line"===this.tradeFrameService.selectedRate.format&&this.em.api.candlesApi.addTick((0,te.UZ)(this.candleService.addTick))}}),{equals:B.comparer.structural,fireImmediately:!0}),(0,B.reaction)((()=>this.candleService.connectionRestored),(()=>{this.zoomService.initialSubscribe()})),(0,B.reaction)((()=>this.candleService.lastTick),(e=>{e&&(this.bidAskApi.setAskValue(e.ask),this.bidAskApi.setBidValue(e.bid))})))}initChart(e,a,s){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.em.api.commonApi.setLocale(this.languageService.langFull);const r=this.storageService.get(oe);r&&this.em.api.commonApi.loadChartState(r);const n=this.tradeFrameService,o=n.selectedRate,l=n.selectedPair,c=Y.dW[o.format.toUpperCase()]||Y.dW.LINE,d=(0,Q.IA)(this.getMaxAmount(this.candleService.candles),l.precision);this.notificationLevelService.api.setNotificationLevelsEnabled(!0),this.zoomService.api.setAvailableTimeIntervals(this.timeFrames),this.em.api.commonApi.setLibType(Y.RZ.FOREX),this.em.api.commonApi.setChartType(c),this.em.api.commonApi.setChartStatus(l.locked),this.em.api.viewportApi.setTimeFrame(this.candleService.rate),this.em.api.viewportApi.setPrecision(d[0],d[1]),this.em.api.viewportApi.setDynamicZoomEnabled(!0),e&&a&&this.updateHistory(e,a,s,i),this.em.api.strikesApi.setStrikes([{id:0,delta:0,selected:!0,winpercUp:0,winpercDown:0}].map(te.Xb)),this.bidAskApi.enableBidAsk(!0),this.inited=!0}updateHistory(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.candleService.lastCandle,i=arguments.length>3?arguments[3]:void 0;const r=(0,te.p$)((0,B.toJS)(s)),n=(0,B.toJS)(e).map(te.p$),o=(0,B.toJS)(a).map(te.UZ);this.em.api.candlesApi.addHistory(n,o,e.length<600,i,r)}getMaxAmount(e){const a=(0,F.Z)(e,"max");return a&&a.max||0}bindToCoordinates(e){return this.chart.api.bindToCoordinates(e)}setHorizontalZoom(e){this.em.api.viewportApi.changeHorizontalZoom(e)}stopChart(){this.chart.api.stop()}setDrawingTheme(e){this.chart.api.setDrawingTheme(e)}saveChartSettings(e){this.storageService.set(oe,e)}setActualLevelNotifications(){this.notificationLevelService.setNotificationLevels(this.getLevelNotifications())}getLevelNotifications(){return this.priceLevelService.subsList.filter((e=>e.pair===this.tradeFrameService.selectedPair.id&&e.project===K.$.SPT)).map((e=>({id:e.localId,quote:e.price})))}showNotice(e,a){this.noticeService.add({id:e,collectionName:j.sm.TOP,layoutProps:{msgType:a.type,html:a.message},notice:{period:3},layout:q.G0})}setHasSentiment(e){this.hasSentiment=e}waitingForChartInit(){return new Promise((e=>{(0,B.when)((()=>this.inited&&!this.zoomService.isChartUpdating&&!this.candleService.isSubscribeAndHistory),(()=>{e()}))}))}onStop(){var e;this.disposers.forEach((e=>e())),this.em&&this.em.destroy(),null===(e=this.drawingService)||void 0===e||e.stop()}constructor(e){let a=e.tradeFrameId;this.disposers=[],this.editedConfig={},this.storageService=new G._({namespace:"chart",backend:new V.u}),this.api={bindToCoordinates:this.bindToCoordinates,componentDidMount:this.componentDidMount,onResizeHeight:this.onResizeHeight,onResizeWidth:this.onResizeWidth,setDrawingTheme:this.setDrawingTheme,stopChart:this.stopChart},this.scrollToRight=()=>{this.zoomService.initialSubscribe(!1)},this.chartReady=!1,this.inited=!1,this.rendererLoaded=!1,this.width=0,this.height=0,this.hasSentiment=!1,this.em=new J.V(a),this.tradeFrameId=a,Object.keys(this.api).forEach((e=>{this.api[e]=this.api[e].bind(this)}))}};var ce;(0,P.gn)([B.observable],le.prototype,"chartReady",void 0),(0,P.gn)([B.observable],le.prototype,"inited",void 0),(0,P.gn)([B.observable],le.prototype,"rendererLoaded",void 0),(0,P.gn)([B.observable],le.prototype,"width",void 0),(0,P.gn)([B.observable],le.prototype,"height",void 0),(0,P.gn)([B.observable],le.prototype,"zoomState",void 0),(0,P.gn)([B.observable],le.prototype,"hasSentiment",void 0),(0,P.gn)([B.computed],le.prototype,"precision",null),(0,P.gn)([(0,Z.onStart)(H.APP_SERVICE)],le.prototype,"onStart",null),(0,P.gn)([(0,Z.onBind)(H.CANDLE_SERVICE,H.FEATURE_TOGGLE_SERVICE,H.LANGUAGE_SERVICE,H.NOTICE_SERVICE,H.RATE_SERVICE,H.TIME_SERVICE,H.TRADE_FRAME_SERVICE,H.TRADE_MANAGER_SERVICE,H.UI_SERVICE,H.NAVIGATION_SERVICE,H.SIDEBAR_SERVICE,H.PRICE_LEVEL_SERVICE)],le.prototype,"onBind",null),(0,P.gn)([B.action],le.prototype,"componentDidMount",null),(0,P.gn)([B.action],le.prototype,"onResizeWidth",null),(0,P.gn)([B.action],le.prototype,"onResizeHeight",null),(0,P.gn)([Z.onStop],le.prototype,"onStop",null),le=(0,P.gn)([(0,Z.bindAs)(H.CHART_STORE)],le);const de=(0,n.W)(y.ZH);let ue=((ce=class Chart extends i.Component{componentDidMount(){this.mounted=!0,this.resizeObserver=new ResizeObserver((e=>{e.forEach((e=>{const a=e.contentRect,s=a.width,i=a.height;this.onResize(s,i)}))})),this.resizeObserver.observe(this.chartRef.current)}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}init(e,a){!1!==e&&!1!==a&&!1!==this.mounted&&this.props.api.componentDidMount(this.props.tradeFrameId,e,a,this.canvasRef.current)}render(){const e=this.props,a=e.chartStore,s=e.isNotFirstChart,r=window.devicePixelRatio||1,n=this.state.width?this.state.width:200,o=this.state.height?this.state.height:200,l=Boolean(!this.props.rendererLoaded||this.props.chartStore.loadingRate),c=a.hasSentiment;return i.createElement("div",{id:"chart-".concat(this.props.tradeFrameId),className:u()("chart light chart_gl",{"chart-sidebar":this.props.isSideBarCollapsed,[a.uiService.theme]:!0}),ref:this.chartRef},i.createElement("canvas",{id:"chart-canvas-".concat(this.props.tradeFrameId),width:"".concat(n*r,"px"),height:"".concat(o*r,"px"),ref:this.canvasRef}),l?i.createElement(E.a,null):null,i.createElement("div",{className:u()("js-main-chart-container main-chart-container main-chart-container_gl",s&&"main-chart-container_is-not-first-chart")},i.createElement(p(),{minWidth:h.j$.BREAKPOINT_769},a.inited?i.createElement(de,{props:{hasSentiment:c,className:u()(s&&"chart-top-gl_is-not-first-chart"),tradeFrameId:this.props.tradeFrameId}}):null),this.props.inited?this.props.children:null),i.createElement("div",{className:"chart-bottom"},a.inited?i.createElement(p(),{minWidth:480},i.createElement(S.L,{zoomService:a.zoomService,timeFrameSelector:this.getTimeFrameSelector})):null))}constructor(...e){super(...e),this.state={width:!1,height:!1},this.mounted=!1,this.inited=!1,this.chartRef=i.createRef(),this.canvasRef=i.createRef(),this.onResize=(e,a)=>{this.state.width!==e&&(this.setState({width:e}),this.props.api.onResizeWidth(e)),this.state.height!==a&&(this.setState({height:a}),this.props.api.onResizeHeight(a)),this.inited||(this.init(e,a),this.inited=!0)},this.onTimeFrameSelect=e=>{this.props.chartStore.zoomService.selectRateById(e)},this.getTimeFrameSelector=e=>{const a=this.props,s=a.chartStore,r=a.tradeFrameService,n=r.selectedRate.range||r.selectedRate.step,o="line"===r.selectedRate.format?s.zoomService.zoom:n;return r?i.createElement(T.T,{timeframes:s.timeFrames.map((e=>({id:e.id,time:e.range||e.step}))),selectedTimeFrame:o,onSelect:this.onTimeFrameSelect}):null}}}).displayName="Chart",ce);ue=(0,P.gn)([c.observer],ue);const me=(0,_.zt)(ue,{helper(e,a){let s=e.chartStore,i=e.tradeFrameService,r=e.uiService,n=a.tradeFrameId,o=a.children,l=a.isNotFirstChart;return{inited:s.inited,rendererLoaded:s.rendererLoaded,pairPrecision:i.selectedPair.precision,tradeFrameService:i,tradeFrameId:n,api:s.api,children:o,chartStore:s,isNotFirstChart:l,uiService:r}},services:[le,f.xs,x.F]});var pe,he=s(21681),ve=s(35377),ge=s(29258);let _e=((pe=class ChartGradients extends i.Component{render(){const e=this.props.theme,a=ge.yJ.includes(e)?"var(--accent-alpha)":"var(--chart-line-1)";return i.createElement("div",null,i.createElement("svg",{display:"block",width:"0",height:"0"},i.createElement("defs",null,i.createElement("linearGradient",{id:"area-fill-gradient",x1:"0%",x2:"0%",y1:"0%",y2:"100%"},i.createElement("stop",{offset:"0%",stopColor:a,stopOpacity:"0.1"}),i.createElement("stop",{offset:"100%",stopColor:a,stopOpacity:"0"})),i.createElement(he.pD,{theme:e}))))}}).defaultProps={theme:ve.si.DARK},pe);_e=(0,P.gn)([c.observer],_e)},6143:(e,a,s)=>{"use strict";s.d(a,{gh:()=>h,H0:()=>v});var i=s(81439),r=s(35377);function n(e){const a={};return Object.keys(e).forEach((s=>{const i=e[s];a[s]=/#/.test(i)?function(e){if(e.length>4)return e;{let a="#";for(let s=1,i=e.length;s<i;s++){const i=e.charAt(s);a+="".concat(i).concat(i)}return a}}(i):i})),a}function o(e){const a=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);if(a&&5===a.length)return function(e,a,s,i){let r=e.toString(16),n=a.toString(16),o=s.toString(16),l=Math.round(255*i).toString(16);return r=1===r.length?"0"+r:r,n=1===n.length?"0"+n:n,o=1===o.length?"0"+o:o,l=1===l.length?"0"+l:l,"#"+r+n+o+l}(Number(a[1]),Number(a[2]),Number(a[3]),Number(a[4]));throw new Error("RGBA parse fail for '".concat(e,"'"))}function l(e){const a={};return Object.keys(e).forEach((s=>{/-rgba$/.test(s)&&(a[s.replace(/-rgba$/,"")]=o(e[s]))})),a}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"olymp";const a="doto"===e?{[r.si.DARK]:l(i.dark),[r.si.LIGHT]:l(i.light),[r.si.INSPIRE]:l(i.inspire),[r.si.PURPLEHAZE]:l(i.purplehaze),[r.si.CLASSIC]:l(i.classic),[r.si.TRIVANDRUM]:l(i.trivandrum),[r.si.JAIPUR]:l(i.jaipur),[r.si.NAGPUR]:l(i.nagpur),[r.si.DARJEELING]:l(i.darjeeling),[r.si.AMRITSAR]:l(i.amritsar),[r.si.CRYPTO]:l(i.crypto),[r.si.FOOTBALL]:l(i.football)}:{[r.si.DARK]:l(i.dark),[r.si.LIGHT]:l(i.light),[r.si.CLASSIC]:l(i.classic),[r.si.INSPIRE]:l(i.inspire),[r.si.PURPLEHAZE]:l(i.purplehaze),[r.si.TRIVANDRUM]:l(i.trivandrum),[r.si.JAIPUR]:l(i.jaipur),[r.si.NAGPUR]:l(i.nagpur),[r.si.DARJEELING]:l(i.darjeeling),[r.si.AMRITSAR]:l(i.amritsar),[r.si.CRYPTO]:l(i.crypto),[r.si.FOOTBALL]:l(i.football)};return a}const d=c(),u=c("doto");function m(e,a){return{chartColors:{backgroundAlphaColor:e["bg-alpha"],contrastGammaColor:e["contrast-gamma"],contrastBetaColor:e["contrast-beta"],contrastAlphaColor:e["contrast-alpha"],accentColor:e["accent-alpha"],positiveColor:e["positive-alpha"],negativeColor:e["negative-alpha"],warningColor:e["warning-alpha"],curveChartBaseColor:a.curveChartBaseColor,curveChartGradientColor:a.curveChartGradientColor,chartGridLinesColor:a.chartGridLinesColor,buttonContrastAlphaColor:a.buttonContrastAlphaColor,buttonContrastGammaColor:a.buttonContrastGammaColor,bordersColor:a.bordersColor},indicatorColors:[e["indicator-1"],e["indicator-3"],e["indicator-5"],e["indicator-7"],e["indicator-9"],e["indicator-2"],e["indicator-4"],e["indicator-6"],e["indicator-8"]],signal:{fill:a.bg1,color:a.c1,hovered:{fill:a.bg2,color:a.c1},selected:{up:{fill:e["positive-beta"],color:e["contrast-alpha"]},down:{fill:e["negative-alpha"],color:e["contrast-alpha"]}}}}}const p={dark:m(n(i.dark),{bg1:"#2a405b",c1:"#0094ff",bg2:"#2f4765",curveChartBaseColor:"#02a6f2",curveChartGradientColor:"#7bcbf0",chartGridLinesColor:"#22303f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#000000"}),light:m(i.light,{bg1:"#283e57",c1:"#0094ff",bg2:"#2b435e",curveChartBaseColor:"#3654f4",curveChartGradientColor:"#7bcbf0",chartGridLinesColor:"#e6e9eD",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),classic:m(n(i.dark),{bg1:"#2a405b",c1:"#0094ff",bg2:"#2f4765",curveChartBaseColor:"#02a6f2",curveChartGradientColor:"#7bcbf0",chartGridLinesColor:"#22303f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#000000"}),crypto:m(n(i.crypto),{bg1:"#2a405b",c1:"#0094ff",bg2:"#2f4765",curveChartBaseColor:"#02a6f2",curveChartGradientColor:"#7bcbf0",chartGridLinesColor:"#22303f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#000000"}),purplehaze:m(i.purplehaze,{bg1:"#283e57",c1:"#0094ff",bg2:"#2b435e",curveChartBaseColor:"#e49612",curveChartGradientColor:"#fed082",chartGridLinesColor:"#22303f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),inspire:m(i.inspire,{bg1:"#283e57",c1:"#3A5ED3",bg2:"#2b435e",curveChartBaseColor:"#c33960",curveChartGradientColor:"#c33960",chartGridLinesColor:"#0f192f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),trivandrum:m(i.trivandrum,{bg1:"#283e57",c1:"#3A5ED3",bg2:"#2b435e",curveChartBaseColor:"#c33960",curveChartGradientColor:"#c33960",chartGridLinesColor:"#0f192f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),jaipur:m(i.jaipur,{bg1:"#283e57",c1:"#3A5ED3",bg2:"#2b435e",curveChartBaseColor:"#c33960",curveChartGradientColor:"#c33960",chartGridLinesColor:"#0f192f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),nagpur:m(i.nagpur,{bg1:"#283e57",c1:"#3A5ED3",bg2:"#2b435e",curveChartBaseColor:"#c33960",curveChartGradientColor:"#c33960",chartGridLinesColor:"#0f192f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),darjeeling:m(i.darjeeling,{bg1:"#283e57",c1:"#3A5ED3",bg2:"#2b435e",curveChartBaseColor:"#c33960",curveChartGradientColor:"#c33960",chartGridLinesColor:"#0f192f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),amritsar:m(i.amritsar,{bg1:"#283e57",c1:"#3A5ED3",bg2:"#2b435e",curveChartBaseColor:"#c33960",curveChartGradientColor:"#c33960",chartGridLinesColor:"#0f192f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"}),football:m(i.football,{bg1:"#283e57",c1:"#3A5ED3",bg2:"#2b435e",curveChartBaseColor:"#c33960",curveChartGradientColor:"#c33960",chartGridLinesColor:"#0f192f",buttonContrastAlphaColor:"#ffffff",buttonContrastGammaColor:"#000000",bordersColor:"#dde6ee"})};function h(e){return p[e]||p.dark}function v(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"olymp";return"doto"===a?u[e]:d[e]}},80123:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var i=s(60521),r=s(13531),n=s(91226);function o(e,a){const s=e.candleService,o=s.pair,l=s.rate,c=(s.isSubscribeAndHistory,a.limit||600);if(!o||!l)return;const d={id:+new Date,pair:o,size:l,to:a.to?Math.ceil(a.to/1e3)-l:void 0,from:a.from?Math.floor(a.from/1e3)+l:void 0,solid:!0};e.candleService.sendRequest(d).then((a=>{if(o!==e.candleService.pair||l!==e.candleService.rate)return void e.candleService.rate;let s=d.from?a.candles.reverse():a.candles;const u=d.from?a.quotes.reverse():a.quotes,m=1===e.candleService.rate,p=e.candleService.ticksBuffer.bufferArray,h=a.candles.length<c,v=e.candleService.ticksBuffer.capacity;if(m&&h&&p.length&&u.length&&function(e,a,s){return!(!e||!a)&&e.Date+Math.min(1e3*s,1e3)>=a.Date}(u[0],p[p.length-1],v)){for(let e=p.length-1;e>=0;e--){const a=p[e];a.Date>u[0].Date&&u.unshift(a)}s=(0,r.kO)(l,u,s)}e.em.api.candlesApi.addHistory(s.map(n.p$),u.length?(0,r.pl)(e.candleService.rate,u,s).map(n.UZ):[],h,!1,(0,n.p$)((0,i.toJS)(e.candleService.lastCandle)))}))}},97558:(e,a,s)=>{"use strict";s.d(a,{f3:()=>u});var i=s(18985),r=s(45797),n=s(95029);const o=(0,i.vU)({d:{id:"day_short",defaultMessage:"d"},h:{id:"hour_short",defaultMessage:"h"},m:{id:"min_short",defaultMessage:"m"},s:{id:"sec_short",defaultMessage:"s"},month:{id:"month_short",defaultMessage:"M"}}),l=3600,c=86400,d=2332800;function u(e){return e/86400>27?"1".concat(r.NW.formatMessage(o.month)):(0,n.yC)(function(e){return e>=60&&e<l?60*Math.floor(e/60):e>=l&&e<c?Math.floor(e/l)*l:e>=c&&e<d?Math.floor(e/c)*c:e>=d?Math.floor(e/d)*d:e}(e),"d h m s",{d:r.NW.formatMessage(o.d),h:r.NW.formatMessage(o.h),m:r.NW.formatMessage(o.m),s:r.NW.formatMessage(o.s)}).replace(" ","")}},93824:(e,a,s)=>{"use strict";s.d(a,{NC:()=>NoticeLayoutBottomLeftDark,xF:()=>NoticeLayoutDialog,G0:()=>NoticeLayoutTop,$X:()=>NoticeLayoutTopPlatform});var i=s(27378),r=s(77740);class NoticeLayoutBottomLeft extends i.Component{render(){return i.createElement("div",{className:"notice-layout-wrapper"},i.createElement("div",{className:"notice-layout"},i.createElement(r.bMz,{className:"notice-layout__close",onClick:this.closeHandler}),i.createElement("div",{className:"notice-layout__content"},this.props.children)))}constructor(...e){super(...e),this.closeHandler=()=>("function"==typeof this.props.onClose&&!1===this.props.onClose()||this.props.api.closeNotice(this.props.notice),!1)}}NoticeLayoutBottomLeft.displayName="otp(features)(NoticeSystem)(NoticeLayoutBottomLeft)";class NoticeLayoutBottomLeftDark extends i.Component{render(){const e=(this.props||{}).className||"";return i.createElement("div",{className:"note-win ".concat(e)},i.createElement("div",{className:"close-frame"},i.createElement("a",{className:"close-link sprite icon-close-frame",href:"javascript:;",onClick:this.closeHandler}," ")),i.createElement("div",{className:"content"},this.props.children))}constructor(...e){super(...e),this.closeHandler=()=>("function"==typeof this.props.onClose&&!1===this.props.onClose()||this.props.api.closeNotice(this.props.notice),!1)}}NoticeLayoutBottomLeftDark.displayName="otp(features)(NoticeSystem)(NoticeLayoutBottomLeftDark)";var n=s(49491),o=s.n(n),l=s(50391),c=s.n(l),d=s(31542),u=s(82844);const m=u._;const p=function(e){let a=e.dlgHeaderClass,s=e.title,r=null;return s.text?r=s.text:"object"==typeof s&&Object.prototype.hasOwnProperty.call(s,"id")&&Object.prototype.hasOwnProperty.call(s,"defaultMessage")?s.translated&&(r=i.createElement(m,s)):"string"==typeof s&&(r=i.createElement(m,{id:s,value:{}})),i.createElement("div",{className:a},r)};class DialogPopup extends i.Component{constructor(){super(...arguments),c()(this,"state",{centerDialog:void 0}),c()(this,"closeTM",null),c()(this,"onCloseClick",(e=>{if(e){if(!e.nativeEvent.target.getAttribute("data-close"))return!1;e.stopPropagation()}return"function"==typeof this.props.onClose&&!1===this.props.onClose()||this.close(),null})),c()(this,"onInited",(()=>{const e=this.needCenterDialog();this.setState({centerDialog:e})}))}autoClose(){this.props.onAutoClose&&!1===this.props.onAutoClose()||this.close()}close(){d.unmountComponentAtNode(document.querySelector(".dialogs-container.level-".concat(this.props.level)))}componentDidMount(){document.body.classList.toggle(this.props.bodyClassName,!0),"number"==typeof this.props.autoClose&&(this.closeTM=setTimeout((()=>{this.autoClose()}),this.props.autoClose)),this.onComponentDidMount&&this.onComponentDidMount(),this.setState({centerDialog:this.needCenterDialog()}),this.body=document.body,function(e,a){let s,i=e.clientHeight;!function r(){s=e.clientHeight,i!==s&&a(),i=s,e.onElementHeightChangeTimer&&clearTimeout(e.onElementHeightChangeTimer),e.onElementHeightChangeTimer=setTimeout(r,200)}()}(this.body,(()=>{this.setState({centerDialog:this.needCenterDialog()})}))}componentDidUpdate(e,a){const s=this.needCenterDialog();void 0!==a.centerDialog&&a.centerDialog!==s&&this.setState({centerDialog:s})}componentWillUnmount(){document.body.classList.toggle(this.props.bodyClassName,!1),clearTimeout(this.body.onElementHeightChangeTimer),clearTimeout(this.closeTM)}needCenterDialog(){const e=document.documentElement.clientHeight,a=this.dialog.offsetHeight;return e===a||a<=e-100}render(){const e="popup-dialog ".concat(this.props.className);let a;this.props.overlayClass?this.props.overlayClass&&(a="popup-dialog-overlay__inner ".concat(this.props.overlayClass)):a="popup-dialog-overlay__inner ".concat(this.state.centerDialog?"popup-dialog-overlay__inner_centered":"");const s=o()({},this.props.style)||{};let r=this.props.children;return this.props.component?r=this.props.component:this.props.passPropsToChild&&this.props.children&&(r=i.Children.map(this.props.children,(e=>i.cloneElement(e,{closeDialog:this.onCloseClick,onInited:this.onInited})))),i.createElement("div",{className:"popup-dialog-overlay"},i.createElement("div",{"data-close":"click-to-close",className:a,onClick:e=>{this.props.canClose&&this.onCloseClick(e)}},i.createElement("div",{id:this.props.id,className:e,style:s,ref:e=>{this.dialog=e}},this.props.canClose?i.createElement("button",{type:"button",className:"popup-dialog__close","data-close":"click-to-close",onClick:this.onCloseClick},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"popup-dialog__close-icon",viewBox:"0 0 10 10"},i.createElement("path",{fillRule:"evenodd",d:"M4.95 3.536L2.123.709A.999.999 0 1 0 .71 2.123L3.536 4.95.709 7.776A.999.999 0 1 0 2.123 9.19L4.95 6.365l2.826 2.827A.999.999 0 1 0 9.19 7.777L6.365 4.95l2.827-2.827A.999.999 0 1 0 7.777.71L4.95 3.536z"})),i.createElement("span",{className:"popup-dialog__close-text"},i.createElement(u._,{id:"popup_windows_btn_close",defaultMessage:"Close window"}))):null,this.props.title?i.createElement(p,{key:"dialogHeader",title:this.props.title,dlgHeaderClass:"popup-dialog__header ".concat(this.props.dlgHeaderClass)}):null,i.createElement("div",{className:"popup-dialog__content ".concat(this.props.dlgContentClass)},this.props.component?i.createElement(r,this.props.componentProps):r))))}}c()(DialogPopup,"defaultProps",{id:"",canClose:!0,className:"",passPropsToChild:!1,onClose:void 0,autoClose:!1,level:1,bodyClassName:"page-overflow-hidden"}),DialogPopup.displayName="DialogPopup";const h=DialogPopup;class NoticeLayoutDialog extends i.Component{render(){const e=this.props||{},a=e.className||"";return i.createElement(h,{id:e.id,className:"".concat(a," ").concat(e.noLegacyClassNames?"":"risk-popup"),overlayClass:e.overlayClass,dlgHeaderClass:e.dlgHeaderClass,dlgContentClass:e.dlgContentClass,onClose:this.closeHandler,passPropsToChild:e.passPropsToChild,title:e.title,canClose:!e.notice||e.notice.canClose,style:e.style,transitionName:e.transitionName,transitionTimeout:e.transitionTimeout,component:this.props.component,componentProps:this.props.componentProps},this.props.component?null:this.props.children)}constructor(...e){super(...e),this.closeHandler=()=>("function"==typeof this.props.onClose&&!1===this.props.onClose()||this.props.api.closeNotice(this.props.notice),!1)}}NoticeLayoutDialog.displayName="otp(features)(NoticeSystem)(NoticeLayoutDialog)";var v=s(51116);class NoticeLayoutTop extends i.Component{render(){const e=(0,v.u1)("notice-top","notice-top_".concat(this.props.msgType),this.props.className);let a="";return a="error"===this.props.msgType?'<svg class="notice-top__svg" width="22" height="20" viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.52.872c.265-.481.7-.472.96 0l10.04 18.256c.265.481.04.872-.522.872H1.002c-.553 0-.782-.4-.522-.872L10.52.872zM11 7c-.552 0-1 .438-1 1.003v4.994A.999.999 0 0 0 11 14c.552 0 1-.438 1-1.003V8.003A.999.999 0 0 0 11 7zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" fill="#FFF" fill-rule="evenodd"/></svg>':"success"===this.props.msgType?'<svg class="notice-top__svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000000" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>':'<svg class="notice-top__svg" width="20" height="24" viewBox="0 0 20 24" xmlns="http://www.w3.org/2000/svg"><title>E364CB50-3943-41EF-AC66-A9818A076782</title><path d="M18 17v-7c0-3.7-2.6-6.9-6-7.7V2c0-1.1-.9-2-2-2S8 .9 8 2v.3c-3.5.9-6 4-6 7.7v7H0v2h5c0 2.8 2.2 5 5 5s5-2.2 5-5h5v-2h-2zm-8 5c-1.7 0-3-1.3-3-3h6c0 1.7-1.3 3-3 3zm-6-5v-7c0-3.3 2.7-6 6-6s6 2.7 6 6v7H4z" fill="#FFF" fill-rule="evenodd"/></svg>',i.createElement("div",{className:e},i.createElement("div",{className:"notice-top__inner"},i.createElement("span",{className:"notice-top__icon",dangerouslySetInnerHTML:{__html:a}}),(()=>this.props.html?i.createElement("div",{className:"notice-top__content"},i.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.html}})):this.props.trans?i.createElement("div",null,i.createElement(u._,Object.assign({},this.props.trans,{className:"notice-top__content"}))):i.createElement("div",{className:"notice-top__content"},i.createElement("div",null,this.props.children)))(),i.createElement("button",{className:"notice-top__close",onClick:this.onClick},i.createElement(r.bMz,{className:"notice-top__svg"}))))}constructor(...e){super(...e),this.onClick=()=>{if("function"==typeof this.props.onClick)return this.props.onClick();this.props.api.closeNotice(this.props.notice,"userClose")}}}NoticeLayoutTop.displayName="otp(features)(NoticeSystem)(NoticeLayoutTop)",NoticeLayoutTop.defaultProps={msgType:"error",className:"",html:"",trans:{id:""}};var g=s(28660);class NoticeLayoutTopPlatform extends g.BaseComponent{render(){const e=this.props.children||null;return i.createElement("div",{className:"layout-top-platform"},i.createElement("span",{className:"layout-top-platform__close",onClick:this.closeHandler},i.createElement(r.bMz,{className:"svg"})),e)}constructor(...e){super(...e),this.closeHandler=()=>{"function"==typeof this.props.onClose&&!1===this.props.onClose()||this.props.api.closeNotice(this.props.notice,"userClose")}}}NoticeLayoutTopPlatform.displayName="otp(features)(NoticeSystem)(NoticeLayoutTopPlatform)"},17329:(e,a,s)=>{"use strict";s.d(a,{w:()=>NoticeCollectionModel});var i=s(29257),r=s(59312),n=s(24598),o=s(98064),l=s(84902),c=s(1204),d=s(60521),u=s(89215);class NoticeCollectionModel extends u.F{add(e,a){const s=this.getById(e.id,!0),i=e.notice;if(s)(0,n.Z)(s,e);else{this.models.push(e),e=(0,o.Z)(this.models),this.sort();const s=i?i.priority:null;if(!this.selected||this.selected.notice.priority===s||s){const s=(0,l.Z)(this.models,{selected:!0});s&&s.id!==e.id&&(s.selected=!1,this.selected=null,(this.options&&this.options.remove||a&&a.remove)&&this.remove(s.id)),e.selected=!0,this.selected=e}}}get(e){return(0,l.Z)(this.models,{id:e})}remove(e){const a=[],s=this.removeModel(e);if(s.isRemoved&&a.push(s.removedModel),a&&a.length>0&&(this.updateHash(a),this.onRemove((0,d.toJS)(a)),a[0].selected)){const e=(0,c.Z)(this.models,(e=>e.notice.active));this.selected=null,e&&(e.selected=!0,this.selected=e)}}constructor(e){e&&e.sort||(0,n.Z)(e,{sort:"id"}),super([],e),this.options=e;const a=e?e.handlers:null;this.shouldAdd=a&&a.shouldAdd?a.shouldAdd:()=>!0,this.setNotice=a&&a.setNotice?a.setNotice:null,this.onBeforeAdd=a&&a.onBeforeAdd?a.onBeforeAdd:(0,i.Z)((function*(){})),this.onAfterAdd=a&&a.onAfterAdd?a.onAfterAdd:(0,i.Z)((function*(){})),this.onClose=a&&a.onClose?a.onClose:()=>{},this.onTimeout=a&&a.onTimeout?a.onTimeout:()=>{}}}(0,r.gn)([d.action],NoticeCollectionModel.prototype,"add",null),(0,r.gn)([d.action],NoticeCollectionModel.prototype,"remove",null)},65200:(e,a,s)=>{"use strict";s.d(a,{Df:()=>l,rd:()=>c});var i=s(46188),r=s(24598),n=s(80969),o=s(51116);let l=class NoticeModel extends n.Z{parseAttrs(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.Z)(e,((e,i)=>{"object"===e.type&&e.value?(s[i]={},this.parseAttrs(e.value,a[i],s[i])):a&&void 0!==a[i]?s[i]=a[i]:"id"===i?s[i]=(0,o.sq)():"id"!==i&&(s[i]=e.value)})),s}prepareToParse(e,a,s){const i={};let n;return e.config&&e.config.auto_close?n=e.config.auto_close:e.expired_at&&(n=e.expired_at-s,i.isExpired=n<=0),e.id&&(i.id=e.id),i.layout=null==a?void 0:a.layout,i.component=null==a?void 0:a.component,i.layoutProps={},i.notice={period:n,startTime:s,name:e.name,saveOpen:!(!e.notice||"boolean"!=typeof e.notice.saveOpen)&&e.notice.saveOpen,saveAutoClose:e.notice&&"boolean"==typeof e.notice.saveAutoClose?e.notice.saveAutoClose:!!e.id,saveClose:e.notice&&"boolean"==typeof e.notice.saveClose?e.notice.saveClose:!!e.id,collectionName:null==a?void 0:a.collectionName,model:e.model,expiredAt:e.expired_at,createdAt:e.created_at},(0,r.Z)(i.notice,null==a?void 0:a.notice),(0,r.Z)(i.layoutProps,null==a?void 0:a.layoutProps),(null==a?void 0:a.callback)&&a.callback(i.notice.model),i}constructor(...e){super(...e),this.attributes={id:{type:"string",value:(0,o.sq)()},layout:{type:"function",value:null},component:{type:"function",value:null},selected:{type:"boolean",value:!1},notice:{type:"object",value:{expiredAt:{type:"number",value:0},createdAt:{type:"number",value:0},collectionName:{type:"string",value:"centerCollection"},priority:{type:"boolean",value:!1},name:{type:"string",value:"defaultNoticeName"},statUrl:{type:"string",value:"/notice/action"},active:{type:"boolean",value:!0},canClose:{type:"boolean",value:!0},multiple:{type:"boolean",value:!1},autoClose:{type:"boolean",value:!1},onAutoClose:{type:"function",value:null},className:{type:"string",value:null},startTime:{type:"number",value:null},period:{type:"number",value:null},saveOpen:{type:"boolean",value:!1},saveClose:{type:"boolean",value:!1},saveAutoClose:{type:"boolean",value:!1},noticeWidth:{type:"number",value:null},isVisible:{type:"boolean",value:!1},model:{type:"plainObject",value:{}},isHashingClose:{type:"boolean",value:!1}}},layoutProps:{type:"object",value:{dlgHeaderClass:{type:"string",value:""},dlgContentClass:{type:"string",value:""},className:{type:"string",value:null},transitionName:{type:"string",value:null},transitionTimeout:{type:"number",value:400},title:{type:"string",value:null},passPropsToChild:{type:"boolean",value:!1},style:{type:"plainObject",value:{}},id:{type:"string",value:"layout_".concat((0,o.sq)())},onClose:{type:"function",value:null},html:{type:"string",value:null},msgType:{type:"string",value:null},trans:{type:"string",value:null},level:{type:"number",value:1},events:{type:"plainObject",value:{}},componentInProps:{type:"boolean",value:!1},noLegacyClassNames:{type:"boolean",value:!1}}}},this.parse=(e,a,s)=>{let i;if(s){const r=this.prepareToParse(e,s,a);i=this.parseAttrs(this.attributes,r),i.props=Object.assign({},s.props)}else i=this.parseAttrs(this.attributes,e),i.props={};return i.id&&i.notice&&(i.notice.id=i.id,i.layoutProps.id=i.id),e.collectionName?(i.collectionName=e.collectionName,i.notice&&(i.notice.collectionName=e.collectionName)):i.notice&&i.notice.collectionName&&(i.collectionName=i.notice.collectionName),i.notice&&i.notice.period&&(i.period=i.notice.period),i.notice&&s&&s.notice&&s.notice.isHashingClose&&(i.notice.isHashingClose=s.notice.isHashingClose),(0,r.Z)(i.layoutProps,{notice:i.notice}),"object"==typeof e.props&&Object.keys(e.props).forEach((a=>{i.props[a]=e.props[a]})),(0,r.Z)(i.props,{notice:i.notice}),i}}};const c=new l},65457:(e,a,s)=>{"use strict";s.d(a,{X:()=>v,M:()=>ce});var i=s(96667),r=s(86933),n=s(65200),o=s(59312),l=s(28660),c=s(57855),d=s(3319),u=s(26763),m=s(42377);const p="@prm",h=2678400;let v=class NoticeSocketService{static addHideHashNotice(e){const a=(0,c.rV)(p,u.NOTICE_SOCKET_SERVICE,c.hO)||[];if(e instanceof Array)for(let s=0;s<e.length;s++){const i=e[s];i&&i.notice&&i.notice.isHashingClose&&a.push({id:i.id,ttl:i.expired_at?i.expired_at:Date.now()/1e3+h})}else e&&e.notice&&e.notice.isHashingClose&&a.push({id:e.id,ttl:e.expired_at?e.expired_at:Date.now()/1e3+h});(0,c.LS)(p,u.NOTICE_SOCKET_SERVICE,a)}static getActualHideHashNotices(){const e=(0,c.rV)(p,u.NOTICE_SOCKET_SERVICE,c.hO)||[],a=Date.now()/1e3,s=e.filter((e=>e.ttl>a));return(0,c.LS)(p,u.NOTICE_SOCKET_SERVICE,s),s}static filterHideNotice(e,a){const s=a.reduce(((e,a)=>(e[a.id]=a.ttl,e)),{});return e instanceof Array?e.filter((e=>!s[e.id])):s[e.id]?[]:e}onStart(e){this.appService=e,this.noticesSettings="function"==typeof this.noticeSettingsList?this.noticeSettingsList():this.noticeSettingsList}show(e){const a=this.parse(e),s=NoticeSocketService.getActualHideHashNotices(),i=NoticeSocketService.filterHideNotice(a,s);this.noticeService.add(i)}close(e){const a=this.parse(e);NoticeSocketService.addHideHashNotice(a),this.noticeService.remove(a,d.H.TIME_IS_OVER)}filterData(e){return e.filter((e=>!!(0,m.M)(this.appService.regDate,30)||e.model&&"webinar"!==e.model.view_type))}subscribe(){this.socket.onPush(((e,a)=>{Array.isArray(a)&&(this.showEvents.find((a=>a===e))&&this.show(this.filterData(a)),this.closeEvents.find((a=>a===e))&&this.close(a))})),this.socket.subscribeEventList([r.WJ.NOTICE_SHOW,r.WJ.NOTICE_CLOSE])}onBind(e,a){this.noticeService=e,this.timeService=a,this.subscribe()}onStop(){this.socket.clear()}constructor(e){let a=e.showEvents,s=e.closeEvents,i=e.socket,r=e.noticeModel,n=e.noticeSettingsList;this.parse=e=>{const a=[];if(e instanceof Array){for(let s=0;s<e.length;s++){const i=this.noticesSettings[e[s].name];a.push(this.noticeModel.parse(e[s],this.timeService.serverTime,i))}return a}const s=this.noticesSettings[e.name];return this.noticeModel.parse(e,this.timeService.serverTime,s)},this.showEvents=a,this.closeEvents=s,this.socket=i,this.noticeModel=r,this.noticeSettingsList=n}};(0,o.gn)([(0,l.onStart)(u.APP_SERVICE)],v.prototype,"onStart",null),(0,o.gn)([(0,l.onBind)(u.NOTICE_SERVICE,u.TIME_SERVICE)],v.prototype,"onBind",null),(0,o.gn)([l.onStop],v.prototype,"onStop",null),v=(0,o.gn)([(0,l.bindAs)(u.NOTICE_SOCKET_SERVICE)],v);var g=s(27378),_=s(18985),f=s(45797),E=s(50391),S=s.n(E),y=s(17498),b=s(82844),C=s(86269);class ForexPush extends y.Z{constructor(){super(...arguments),S()(this,"closeHandler",(()=>("function"==typeof this.props.onClose&&!1===this.props.onClose()||this.props.api.closeNotice(this.props.notice),!1)))}render(){return g.createElement("div",{className:"action-notice action-notice_forex-push"},g.createElement("button",{className:"action-notice__close-button",onClick:this.closeHandler},"x"),g.createElement("i",{className:"action-notice__icon action-notice__icon_forex"}),g.createElement("div",{className:"action-notice__subtitle"},g.createElement(b._,{id:"forex_push_increase_trade_amount",defaultMessage:"Increase a trade amount 200 times"})),g.createElement("a",{href:"/".concat(C.q.PLATFORM,"?project=fx"),className:"action-notice__button"},g.createElement(b._,{id:"forex_ab_try",defaultMessage:"Try"})))}}S()(ForexPush,"defaultProps",{api:{closeNotice:()=>{}},onClose:()=>{},notice:{}});var T,A=s(11326),k=s(54172);let w=(0,l.bindAs)(u.SURVEY_ABOUT_FOREX_SERVICE)(T=class SurveyAboutForexService{constructor(){S()(this,"api",{onClick:this.onClick})}onClick(e){this.callApi(u.NOTICE_SERVICE,"remove",e),window.open("https://olymptrade.typeform.com/to/J3NujA")}})||T;class SurveyAboutForex extends g.Component{constructor(){super(...arguments),S()(this,"onClick",(()=>{this.props.api.onClick(this.props.notice.id)}))}render(){const e=this.props.trans,a=e.surveyAboutForexText,s=e.passSurvey;return g.createElement("div",null,g.createElement("h3",null,g.createElement(b._,a)),g.createElement("button",{type:"button",className:"btn btn_default btn_white",onClick:this.onClick},g.createElement(b._,s)))}}S()(SurveyAboutForex,"displayName","SurveyAboutForex");const N=(0,_.vU)({survey_about_forex_text:{id:"survey_about_forex_text",defaultMessage:"Survey about forex text"},pass_survey:{id:"pass_survey",defaultMessage:"Take the survey"}}),R=(0,k.zt)(SurveyAboutForex,{helper(e,a){let s=e.surveyAboutForexService,i=a.notice;return{api:s.api,notice:i,trans:{surveyAboutForexText:N.survey_about_forex_text,passSurvey:N.pass_survey}}},services:[w]});var I=s(90386),D=s(14999);class PromoMobileApps extends g.Component{componentDidMount(){void 0!==window.dataLayer&&"function"==typeof window.dataLayer.push&&window.dataLayer.push({event:"uaGtmEvents_clicks",eventCategory:"popup_app_banner",eventAction:"popup_app_banner_view",eventLabel:"popup_app_banner_view",ga_action_part1:"popup_app_banner_view",ga_action_part2:void 0,ga_label_part1:"popup_app_banner_view",ga_label_part2:void 0})}componentWillUnmount(){void 0!==window.dataLayer&&"function"==typeof window.dataLayer.push&&window.dataLayer.push({event:"uaGtmEvents_clicks",eventCategory:"popup_app_banner",eventAction:"popup_app_banner_close",eventLabel:"app_banner_close",ga_action_part1:"popup_app_banner_close",ga_action_part2:void 0,ga_label_part1:"app_banner_close",ga_label_part2:void 0})}render(){const e=this.props,a=e.api,s=e.notice;return g.createElement("div",{className:"action-notice action-notice_mobile-promo"},g.createElement("button",{className:"action-notice__close-button",onClick:()=>{a.closeNotice(s,d.H.USER_CLOSE)}},"x"),g.createElement("div",{className:"action-notice__subtitle"},g.createElement(b._,{id:"platform_banner_notice_promo_app_title",defaultMessage:"The trading market is always nearby!"})),g.createElement("div",{className:"action-notice__description"},g.createElement(b._,{id:"platform_banner_notice_promo_app_description",defaultMessage:"Download the best mobile app for trading! "})),g.createElement("a",{"data-tracking":"yes","data-product":"app_banner","data-action":"popup_app_banner_click","data-label":"app_store",target:"_blank",rel:"nofollow noopener noreferrer",href:(0,I.k)(D.ZL.IOS.OPTIONS,"ios"),className:"action-notice__icon-app action-notice__icon-app_appstore"}," "),g.createElement("a",{"data-tracking":"yes","data-product":"app_banner","data-action":"popup_app_banner_click","data-label":"google_play",target:"_blank",rel:"nofollow noopener noreferrer",href:(0,I.k)(D.ZL.ANDROID.OPTIONS,"android"),className:"action-notice__icon-app action-notice__icon-app_gstore"}," "))}}(0,l.Connector)(PromoMobileApps);var O=s(23680),L=s(1729);var M=s(71028);const P=(0,k.zt)((e=>g.createElement("button",{onClick:function(){e.api.closeNotice(e.notice,"userClose"),(0,L.Oz)().catch((()=>null))}},g.createElement(b._,{id:"long_payout_warn",defaultMessage:"Error while processing a withdrawal request. Please contact us via {a}",values:{a:g.createElement("a",{href:"mailto:sup@olymptrade.com"},"sup@olymptrade.com")}}))),{helper(e,a){let s=e.appService,i=e.noticeStore,r=a.notice;return{api:i.api,notice:r,supportChat:s.currentSupportChat,lang:s.lang,id:s.id,email:s.email,name:s.name,phone:s.phone,serviceLevel:s.serviceLevels.level.name}},services:[O.z,M.P]});var x=s(85676),F=s.n(x),B=(s(13893),s(32952)),Z=s.n(B),U=s(60521);var H=s(80969);class SurveyAnswerModel extends H.Z{parse(e){return{answer:"test",id:e.id,isChecked:"1"===e.is_checked,voteId:e.vote_id}}constructor(...e){super(...e),this.attributes={answer:"",id:"",isChecked:!1,voteId:""}}}const G=new SurveyAnswerModel;var V,W,j,z,q,K,Y,X,J=s(89215);let Q=(V=(0,l.bindAs)(u.SURVEY_SERVICE),W=(0,l.onStart)(u.APP_SERVICE),V((z=class SurveyService{constructor(){S()(this,"api",{check:this.check}),F()(this,"answerCollection",q,this),F()(this,"question",K,this),F()(this,"done",Y,this),F()(this,"surveyId",X,this)}get userId(){return this.appService.id}get vote(){return this.appService.vote}onStart(e){return this.appService=e,this.answerCollection.update(this.vote.answers.map((e=>G.parse(e)))),this.question=this.vote.question,this.surveyId=this.vote.id,!0}check(e){var a,s,i;this.answerCollection.get(e,!0).isChecked=!0,this.done=!0,setTimeout((()=>{this.callApi(u.NOTICE_SERVICE,"remove",this.surveyId)}),2e3),a=this.surveyId,s=e,i=this.userId,fetch("/users/".concat(i,"/set-vote"),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({vote_id:a,answer_ids:s})})}},Z()(z.prototype,"userId",[U.computed],Object.getOwnPropertyDescriptor(z.prototype,"userId"),z.prototype),Z()(z.prototype,"vote",[U.computed],Object.getOwnPropertyDescriptor(z.prototype,"vote"),z.prototype),q=Z()(z.prototype,"answerCollection",[U.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new J.F}}),K=Z()(z.prototype,"question",[U.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=Z()(z.prototype,"done",[U.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=Z()(z.prototype,"surveyId",[U.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z()(z.prototype,"onStart",[W],Object.getOwnPropertyDescriptor(z.prototype,"onStart"),z.prototype),j=z))||j);var $=s(93749),ee=s.n($),te=s(16890);const ae=(0,_.vU)({thank_you_for_your_response:{id:"thank_you_for_your_response",defaultMessage:"Thank you for your response!"}});class Item extends g.Component{constructor(){super(...arguments),S()(this,"onClick",(()=>{this.props.onClick(this.props.id)}))}render(){const e=this.props,a=e.isChecked,s=e.answer;return g.createElement("button",{className:"btn  btn_survey ".concat(a?"-checked":""),onClick:this.onClick},s)}}class Survey extends y.Z{constructor(){super(),S()(this,"check",(e=>{this.props.api.check(e)})),this.answers=g.createRef()}componentDidMount(){this.answers.current&&Object.assign(this.answers.current.style,{height:"".concat((0,te.Pb)(this.answers.current),"px")})}render(){return g.createElement("div",{ref:this.answers},g.createElement("h3",null,this.props.done?f.NW.formatMessage(ae.thank_you_for_your_response):this.props.question),g.createElement("div",null,this.props.done?"":g.createElement("div",null,this.props.answers.map((e=>{const a="survey_".concat(e.voteId,"_").concat(e.id);return g.createElement(Item,ee()({key:a},e,{onClick:this.check}))})))))}}Survey.displayName="Survey";const se=(0,k.zt)(Survey,{helper(e,a){let s=e.surveyService,i=a.notice;return{api:s.api,notice:i,answers:s.answerCollection.models,question:s.question,done:s.done}},services:[Q]});var ie=s(93824),re=s(53323),ne=s(43345);const oe=(0,_.vU)({details_in_cabinet:{id:"details_in_cabinet",defaultMessage:"See profile for details"},enter_phone_and_get_a_code:{id:"enter_phone_and_get_a_code",defaultMessage:"Enter your telephone number and get a promocode for 50% bonus"},error_payout_header:{id:"error_payout_header",defaultMessage:"Your withdrawal request has been cancelled."},get_a_bonus_from_manager:{id:"get_a_bonus_from_manager",defaultMessage:"Get 50% bonus from your manager"},get_bonus:{id:"get_bonus",defaultMessage:"Get a bonus"},i_got_it:{id:"i_got_it",defaultMessage:"I got it"},open_profile:{id:"open_profile",defaultMessage:"Open profile"},update_docs_in_cabinet:{id:"update_docs_in_cabinet",defaultMessage:"Update profile documents for verification"},verification_complete:{id:"verification_complete",defaultMessage:"Verification is complete"},verification_status_changed:{id:"verification_status_changed",defaultMessage:"The verification status has changed"},verification_successfully_complete:{id:"verification_successfully_complete",defaultMessage:"You have successfully passed the verification"}}),le={[ne.aW]:{component:()=>g.createElement("a",{href:(0,I.k)(D.ZL.ANDROID.OPTIONS,"android"),target:"_blank",rel:"nofollow noopener noreferrer",className:"android-update-notify notice-top-platform-theme"},g.createElement("div",{className:"android-update-notify__group"},g.createElement("div",{className:"android-update-notify__title"},g.createElement(b._,{id:"user_update_notify_title",defaultMessage:"An important update"}),g.createElement("div",{className:"android-update-notify__logo"},g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,viewBox:"0 0 15 18"},g.createElement("path",{fill:"#AAC148",fillRule:"nonzero",d:"M12.027 5.943c.202 0 .365.164.365.367v7.658a.366.366 0 0 1-.365.367h-1.636v2.58A1.08 1.08 0 0 1 9.316 18a1.08 1.08 0 0 1-1.075-1.084v-2.58H6.737v2.58A1.08 1.08 0 0 1 5.662 18a1.08 1.08 0 0 1-1.075-1.084v-2.58H2.973a.366.366 0 0 1-.365-.368V6.31c0-.203.163-.367.365-.367h9.054zM1.075 5.94A1.08 1.08 0 0 1 2.15 7.025v4.403a1.08 1.08 0 0 1-1.075 1.084A1.08 1.08 0 0 1 0 11.428V7.025a1.08 1.08 0 0 1 1.075-1.084zm12.85 0A1.08 1.08 0 0 1 15 7.025v4.403a1.08 1.08 0 0 1-1.075 1.084 1.08 1.08 0 0 1-1.075-1.084V7.025a1.08 1.08 0 0 1 1.075-1.084zM3.046 5.406a.367.367 0 0 1-.357-.445A4.95 4.95 0 0 1 5.085 1.67L4.325.288A.195.195 0 0 1 4.4.024.191.191 0 0 1 4.662.1l.765 1.393a4.852 4.852 0 0 1 2.062-.458c.737 0 1.436.164 2.063.458L10.317.1a.191.191 0 0 1 .261-.076c.093.052.127.17.075.264l-.76 1.382a4.95 4.95 0 0 1 2.397 3.291.368.368 0 0 1-.357.445H3.046zm7.095-2.06a.415.415 0 0 0-.413-.417.415.415 0 0 0-.414.417c0 .23.186.416.414.416a.415.415 0 0 0 .413-.416zm-4.89-.417a.415.415 0 0 0-.413.417c0 .23.185.416.413.416a.415.415 0 0 0 .413-.416.415.415 0 0 0-.413-.417z"}))),"Android"),g.createElement("div",{className:"android-update-notify__text"},g.createElement(b._,{id:"user_update_notify_text",defaultMessage:"Update the application to the latest version for correct performance"}))),g.createElement("div",{className:"android-update-notify__capture"})),layout:ie.$X,notice:{collectionName:re.sm.TOP_PLATFORM,saveOpen:!1,saveAutoClose:!1}},ads_mobile_apps:{component:PromoMobileApps,notice:{collectionName:re.sm.BOTTOM_LEFT}},payout_canceled:{layout:ie.G0,notice:{collectionName:re.sm.TOP},layoutProps:{msgType:"error",html:f.NW.formatMessage(oe.error_payout_header)}},server_connection_error:{component:function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return g.createElement(A.Z,Object.assign({},a))},notice:{collectionName:re.sm.CENTER,priority:!0}},system_long_payout:{component:P,layout:ie.G0,notice:{collectionName:re.sm.TOP_PLATFORM},props:{api:(new M.P).api}},survey:{component:se,layout:ie.NC,notice:{collectionName:re.sm.BOTTOM_LEFT},layoutProps:{className:"notice-survey"}},questionnaire_forex:{component:R,layout:ie.NC,layoutProps:{className:"note-win_survey"},notice:{collectionName:re.sm.BOTTOM_LEFT,priority:!0}},show_bo_fx:{component:ForexPush,notice:{collectionName:re.sm.BOTTOM_LEFT}}};function ce(e){return e(new v({showEvents:[r.U3.NOTICE_SHOW],closeEvents:[r.U3.NOTICE_CLOSE],noticeModel:new n.Df,noticeSettingsList:()=>le,socket:i.Z.add()}),{config:v.binderConfig})}},73483:(e,a,s)=>{"use strict";s.d(a,{v:()=>NotificationServicesMediator});var i=s(29257);class NotificationServicesMediator{start(){if(this.notificationService.isWebPushSupported)switch("allPermission"!==this.notificationService.getPermissionStatus()&&(this.showRequestHandler=this.notificationRequestService.onShowNotificationRequest(this.handleShowNotificationRequest),this.notificationRequestService.start()),this.notificationService.initializeCloudMessaging(),this.notificationService.getPermissionStatus()){case"allPermission":return void this.notificationService.startCloudMessaging().finally((()=>{}));case"systemPermissionInProcess":return;case"systemPermissionBlocked":return void this.notificationService.allowCloudMessaging().finally((()=>{}));case"noOnePermissionYet":this.acceptRequestHandler=this.notificationRequestService.onRequestAccept(this.handleRequestAccept)}}stop(){this.showRequestHandler&&(this.showRequestHandler=null),this.acceptRequestHandler&&(this.acceptRequestHandler=null)}handleRequestAccept(){var e=this;return(0,i.Z)((function*(){return yield e.notificationService.checkCloudMessaging()}))()}handleShowNotificationRequest(e){"allPermission"!==this.notificationService.getPermissionStatus()&&this.notificationService.addMessage({component:e,id:"notification-request"})}constructor(e,a){this.notificationService=e,this.notificationRequestService=a,this.acceptRequestHandler=null,this.showRequestHandler=null,this.handleRequestAccept=this.handleRequestAccept.bind(this),this.handleShowNotificationRequest=this.handleShowNotificationRequest.bind(this)}}},674:(e,a,s)=>{"use strict";s.d(a,{Z:()=>v});var i=s(37323),r=s(59312),n=s(27378),o=s(31542),l=s(50649),c=s(14978),d=s(54172),u=s(73483),m=s(66386),p=s(11796);let h=class Notifications extends n.Component{componentDidMount(){this.mediator&&this.mediator.start()}componentWillUnmount(){this.mediator&&(this.mediator.stop(),this.mediator=null)}render(){if(!document.body)return null;const e=this.props,a=e.notificationService,s=e.notificationRequestService;return o.createPortal(n.createElement(c.dr,{notificationService:a,notificationRequestService:s}),document.body)}constructor(e){super(e),this.mediator=null,this.mediator=new u.v(e.notificationService,e.notificationRequestService)}};h=(0,r.gn)([l.observer],h);const v=(0,d.zt)(h,{helper:(e,a)=>(0,i.Z)({},e,a),services:[m.g,p._]})},57186:(e,a,s)=>{"use strict";s.d(a,{B:()=>r,G:()=>i});const i="NotificationService",r="NotificationRequestService"},35716:(e,a,s)=>{"use strict";s.d(a,{GL:()=>i.G,Tx:()=>n.Z,gq:()=>r.g});s(17291),s(11796);var i=s(57186),r=s(66386),n=s(674)},35497:(e,a,s)=>{"use strict";s.d(a,{t:()=>CloudMessagingService});var i=s(14978),r=s(32591);class CloudMessagingService extends i.tO{static fromFirebase(e){var a;return new CloudMessagingService(new i.Km,new r.e,e,null!==(a=window.Notification)&&void 0!==a?a:{permission:"denied",requestPermission:()=>Promise.resolve("denied")})}static fromElectron(e,a){return new CloudMessagingService(e,new r.e,a,{permission:"granted",requestPermission:()=>Promise.resolve("granted")},{status:"allowed",token:null,typeChange:"auto",tokenCreatedAt:null})}onForegroundMessage(e){return super.onForegroundMessage((a=>{a.data.id=this.generateId(),e(a)}))}generateId(){return this.currentGeneratedId+=1,this.currentGeneratedId}constructor(...e){super(...e),this.currentGeneratedId=0}}},96572:(e,a,s)=>{"use strict";s.d(a,{d:()=>CloudMessagingServiceFallback});var i=s(86933),r=s(30654);class CloudMessagingServiceFallback{readMessageHook(e){return r.$.noticeAction({operation_type:"hide",notice_id:e,notice_name:"push"})}onForegroundMessage(e){return this.listener=e,this.subscribeToPush(),()=>{this.unsubscribeFromPush(),this.listener=null}}subscribeToPush(){this.connect.onPush(this.handlePush),this.connect.subscribeEventList([i.WJ.NOTICE_SHOW])}unsubscribeFromPush(){this.connect.unSubscribe("onPush",this.handlePush),this.connect.unSubscribeEventList([i.WJ.NOTICE_SHOW])}handlePush(e,a){e===i.U3.NOTICE_SHOW&&Array.isArray(a)&&a.forEach((e=>{this.listener&&"push"===e.category&&"push"===e.name&&e.model&&(e.model.data.id=e.id,this.listener(e.model))}))}constructor(e){this.listener=null,this.connect=e,this.handlePush=this.handlePush.bind(this)}}},32591:(e,a,s)=>{"use strict";s.d(a,{e:()=>Http});var i=s(29257),r=s(32121),n=s(12484),o=s(30654);class Http{saveToken(e){return(0,i.Z)((function*(){try{const a=yield(0,r.O)();return yield o.$.pushToken({token:e,hardwareId:a}),!0}catch(e){return n.bR.sendEvent(e,n.x3.ERROR,"jOG0oidp"),!1}}))()}deleteToken(){return(0,i.Z)((function*(){try{const e=yield(0,r.O)();return yield o.$.deletePushToken({hardwareId:e}),!0}catch(e){return n.bR.sendEvent(e,n.x3.ERROR,"jOG0oidp"),!1}}))()}}},1155:(e,a,s)=>{"use strict";s.d(a,{d:()=>r.d,t:()=>i.t});var i=s(35497),r=s(96572)},56834:(e,a,s)=>{"use strict";s.d(a,{_:()=>u});var i=s(59312),r=s(60521),n=s(28660),o=s(99446),l=s(14978),c=s(26763),d=s(57186);let u=class NotificationRequestService extends l.q_{onStart(e){this.init("".concat(d.B,"_").concat(e.id),o.i7&&!o.tq,this.firstDealOpenHandler)}onStop(){this.stop()}start(){this.load(this.onFirstDealOpen)}showNotification(e,a){this.show(e,a)}onDealServiceBoBind(e){this.dealServiceBo=e}onDealServiceFxBind(e){this.dealServiceFx=e}onFirstDealOpen(){this.firstDealOpenHandler=(0,r.when)((()=>{var e,a;return!!(null===(e=this.dealServiceBo)||void 0===e?void 0:e.lastOpenedDealRaw)||!!(null===(a=this.dealServiceFx)||void 0===a?void 0:a.lastOpenedDealRaw)}),(()=>{this.show("requesting",!0)}))}constructor(){super(),this.firstDealOpenHandler=null,this.onFirstDealOpen=this.onFirstDealOpen.bind(this)}};(0,i.gn)([r.observable.ref],u.prototype,"dealServiceBo",void 0),(0,i.gn)([r.observable.ref],u.prototype,"dealServiceFx",void 0),(0,i.gn)([(0,n.onStart)(c.APP_SERVICE)],u.prototype,"onStart",null),(0,i.gn)([n.onStop],u.prototype,"onStop",null),(0,i.gn)([(0,n.onBind)(c.DEAL_SERVICE_BO)],u.prototype,"onDealServiceBoBind",null),(0,i.gn)([(0,n.onBind)(c.DEAL_SERVICE_FX)],u.prototype,"onDealServiceFxBind",null),u=(0,i.gn)([(0,n.bindAs)(d.B)],u)},11796:(e,a,s)=>{"use strict";s.d(a,{_:()=>i._});var i=s(56834)},66386:(e,a,s)=>{"use strict";s.d(a,{g:()=>_});var i=s(29257),r=s(59312),n=s(60521),o=s(28660),l=s(6680),c=s(14978),d=s(57615),u=s(29042),m=s(26763),p=s(96667),h=s(14819),v=s(1155),g=s(57186);let _=class NotificationService extends c._t{initializeCloudMessaging(){var e;(this.cloudMessagingService.initialize(),this.cloudMessagingService.syncSettings().finally((()=>{})),this.cloudMessagingService.updateToken().catch((()=>{})),this.setupListeningPermissions().catch(this.emitChangePermission),this.onCloudMessagingStatusChanged((e=>{var a;"idle"!==e&&(null===(a=this.notificationRequestService)||void 0===a||a.stop())})),"idle"!==this.getCloudMessagingStatus())&&(null===(e=this.notificationRequestService)||void 0===e||e.stop())}addMessage(e){super.addMessage(e)}addSkippedMessage(e){this.skippedMessageNames.add(e)}isAllowedCloudMessaging(){return this.cloudMessagingService.isAllowed()}isDisabledCloundMessaging(){return this.cloudMessagingService.isDisabled()}getCloudMessagingStatus(){return this.isAllowedCloudMessaging()?"allowed":this.isDisabledCloundMessaging()?"disabled":"idle"}allow(e){var a=this;return(0,i.Z)((function*(){"default"!==a.getNotificationPermission()?yield a.cloudMessagingService.allow(e):yield a.cloudMessagingService.requestPermission()}))()}disable(e){var a=this;return(0,i.Z)((function*(){yield a.cloudMessagingService.disable(e)}))()}resetCloudMessaging(){var e=this;return(0,i.Z)((function*(){return yield e.cloudMessagingService.reset("manual"),Promise.resolve(!1)}))()}allowCloudMessaging(){var e=this;return(0,i.Z)((function*(){return yield e.allow("manual"),Promise.resolve(!1)}))()}startCloudMessaging(){return this.cloudMessagingService.start()}disableCloudMessaging(){var e=this;return(0,i.Z)((function*(){return yield e.disable("manual"),Promise.resolve(!1)}))()}onCloudMessagingStatusChanged(e){return this.cloudMessagingService.onStatusChanged(e)}checkCloudMessaging(){var e=this;return(0,i.Z)((function*(){return!!(yield e.allowCloudMessaging())&&(e.startCloudMessaging().finally((()=>{})),!0)}))()}clearToken(){var e=this;return(0,i.Z)((function*(){e.isWebPushSupported&&(yield e.cloudMessagingService.clearToken())}))()}hasAllPermission(){return this.cloudMessagingService.isSystemNotificationGranted()&&this.cloudMessagingService.isAllowed()}hasSystemPermissionInProcess(){return!this.cloudMessagingService.isSystemNotificationDenied()&&this.cloudMessagingService.isAllowed()}hasSystemPermissionBlocked(){return(!this.cloudMessagingService.isSystemNotificationGranted()||this.cloudMessagingService.isSystemNotificationDenied())&&this.cloudMessagingService.isAllowed()}hasNoOnePermissionYet(){return!this.cloudMessagingService.isAllowed()&&!this.cloudMessagingService.isDisabled()}getPermissionStatus(){return this.hasAllPermission()?"allPermission":this.hasSystemPermissionInProcess()?"systemPermissionInProcess":this.hasSystemPermissionBlocked()?"systemPermissionBlocked":this.hasNoOnePermissionYet()?"noOnePermissionYet":null}getNotificationPermission(){return this.cloudMessagingService.getPermission()}onStart(e){const a=new d._({namespace:"".concat(g.G,"_").concat(e.id),backend:new u.u});(0,h.P)()&&window.desktopWebPush?this.cloudMessagingService=v.t.fromElectron(window.desktopWebPush,a):this.cloudMessagingService=v.t.fromFirebase(a),this.cloudMessagingServiceFallback=new v.d(p.Z.add()),this.listenMessaging()}onStop(){return this.unlistenMessaging(),!0}onChangePermission(e){return this.changePermissionHandler=e,()=>{this.changePermissionHandler=null}}requestPermission(e){return"granted"!==this.getNotificationPermission()&&(this.requestPermissionHandlers.forEach((a=>a(e))),!0)}onRequestPermission(e){return this.requestPermissionHandlers.add(e),()=>{this.requestPermissionHandlers.delete(e)}}get notificationRequestService(){return(0,l.Sc)(g.B)}handleRequestPermission(){this.onRequestPermission((()=>{if(this.isWebPushSupported&&"allPermission"!==this.getPermissionStatus())switch(this.getPermissionStatus()){case"noOnePermissionYet":var e;null===(e=this.notificationRequestService)||void 0===e||e.showNotification("requesting");break;case"systemPermissionInProcess":this.checkCloudMessaging().finally((()=>{}));break;case"systemPermissionBlocked":var a;null===(a=this.notificationRequestService)||void 0===a||a.showNotification("blocked")}}))}setInappRequestConfig(e){(0,l.ic)(g.B).then((a=>{a.setInappRequestConfig(e)}))}listenMessaging(){const e=(0,l.Sc)(m.NAVIGATION_SERVICE);this.foregroundMessageHandler||(this.foregroundMessageHandler=this.cloudMessagingService.onForegroundMessage((a=>{this.isShowMessages&&this.addForegroundMessage(a,e)}))),this.foregroundMessageFallbackHandler||(this.foregroundMessageFallbackHandler=this.cloudMessagingServiceFallback.onForegroundMessage((a=>{this.isShowMessages&&(this.skippedMessageNames.has(a.data.push_name)||this.addForegroundMessageByFallback(a,this.handleMessageByFallbackShown,e))})))}unlistenMessaging(){this.foregroundMessageHandler&&(this.foregroundMessageHandler(),this.foregroundMessageHandler=null),this.foregroundMessageFallbackHandler&&(this.foregroundMessageFallbackHandler(),this.foregroundMessageFallbackHandler=null)}showMessages(){this.isShowMessages=!0}hideMessages(){this.isShowMessages=!1}handleMessageByFallbackShown(e){this.cloudMessagingServiceFallback.readMessageHook(Number(e))}setupListeningPermissions(){var e=this;return(0,i.Z)((function*(){if(!("permissions"in window.navigator))return!1;try{const a=yield window.navigator.permissions.query({name:"notifications"});return e.subscirbeChangePermission(a),e.emitChangePermission(),!0}catch(a){return e.emitChangePermission(),!1}}))()}changeCloudPermission(e){var a=this;return(0,i.Z)((function*(){switch(e.state){case"prompt":yield a.cloudMessagingService.reset();break;case"granted":yield a.cloudMessagingService.allow();break;case"denied":yield a.cloudMessagingService.disable()}return e}))()}emitChangePermission(){var e;null===(e=this.changePermissionHandler)||void 0===e||e.call(this,this.cloudMessagingService.getPermission())}subscirbeChangePermission(e){this.changeEventListener&&e.removeEventListener("change",this.changeEventListener);var a=this;return this.changeEventListener=(0,i.Z)((function*(){var s;(yield a.changeCloudPermission(e),a.emitChangePermission(),"prompt"!==e.state)&&(null===(s=a.notificationRequestService)||void 0===s||s.stop())})),e.addEventListener("change",this.changeEventListener),e}constructor(){super(),this.foregroundMessageHandler=null,this.foregroundMessageFallbackHandler=null,this.changeEventListener=null,this.changePermissionHandler=null,this.requestPermissionHandlers=new Set,this.skippedMessageNames=new Set,this.isShowMessages=!0,this.isWebPushSupported=(0,c.Iv)(),this.handleMessageByFallbackShown=this.handleMessageByFallbackShown.bind(this),this.emitChangePermission=this.emitChangePermission.bind(this)}};(0,r.gn)([n.observable],_.prototype,"isWebPushSupported",void 0),(0,r.gn)([(0,o.onStart)(m.APP_SERVICE)],_.prototype,"onStart",null),(0,r.gn)([o.onStop],_.prototype,"onStop",null),_=(0,r.gn)([(0,o.bindAs)(g.G)],_)},17291:(e,a,s)=>{"use strict";s(66386)},83946:(e,a,s)=>{"use strict";s.d(a,{m:()=>r});var i=s(27378);const r=e=>{const a=e.isAccentTheme?"var(--accent-alpha)":"var(--chart-line-1)";return i.createElement("svg",{width:"104",height:"80",viewBox:"0 0 104 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 4a4 4 0 0 1 4-4h96a4 4 0 0 1 4 4v72a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4z",fill:"var(--bg-alpha)"}),i.createElement("g",null,i.createElement("path",{d:"M0 79l3.75-2.843 3.127-2.275 3.125-2.843 2.5-8.196L15.004 60l1.876 5.118 5.313-2.275 1.876 2.275 1.563 5.117 2.813-5.117 2.813 2.274 1.875-2.274 5.002-2.04 3.438-7.96 3.438-2.275 3.215 4.55 4.823 5.685 2.41-5.686 2.412 2.843 2.412-7.392L64.3 50l4.019 2.843 4.019 4.55 6.028 2.842 2.01 5.265 2.812 5.54 3.044-3.648 5.58 2.843 2.536-2.843 3.043-4.549 2.03 2.657 2.028-2.657L105 55.118",stroke:a}),i.createElement("path",{d:"M3.75 76.157L0 79v26.5h105V55.118l-3.551 7.725L99.42 65.5l-2.029-2.657-3.043 4.55-2.536 2.842-5.58-2.843-3.044 3.647-2.813-5.539-2.01-5.265-6.027-2.843-4.019-4.549L64.3 50l-4.018 2.843-2.412 7.392-2.411-2.843-2.411 5.686-4.823-5.686-3.215-4.549-3.438 2.275-3.438 7.96-5.002 2.04-1.875 2.274-2.813-2.274-2.813 5.117-1.563-5.117-1.876-2.275-5.313 2.275L15.003 60l-2.5 2.843-2.5 8.196-3.126 2.843-3.126 2.275z",fill:"url(#oozzx)"})),i.createElement("rect",{x:"4",y:"4",width:"55",height:"28",rx:"4",fill:"var(--base-alpha)"}),i.createElement("rect",{x:"29",y:"14",width:"22",height:"8",rx:"4",fill:"var(--high-alpha)"}),i.createElement("rect",{x:"61",y:"4",width:"28",height:"28",rx:"4",fill:"var(--base-alpha)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M74.065 21.048a1.12 1.12 0 0 0 .857-.552l4.584-6.39c.046-.073.08-.095.118-.098a.12.12 0 0 1 .102.04l.082.074 2.54 1.824a.5.5 0 1 0 .584-.812l-2.502-1.797a1.12 1.12 0 0 0-1.762.228l-4.584 6.388c-.046.074-.08.096-.118.1a.12.12 0 0 1-.102-.04l-.093-.082-2.355-1.598a1.12 1.12 0 0 0-1.755.217l-2.581 3.704a.5.5 0 1 0 .82.572l2.6-3.734c.04-.063.074-.084.112-.088a.12.12 0 0 1 .101.04l.096.086 2.356 1.599c.237.234.566.352.9.319z",fill:"var(--contrast-alpha)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M74.065 21.048a1.12 1.12 0 0 0 .857-.552l4.584-6.39c.046-.073.08-.095.118-.098a.12.12 0 0 1 .102.04l.082.074 2.54 1.824a.5.5 0 1 0 .584-.812l-2.502-1.797a1.12 1.12 0 0 0-1.762.228l-4.584 6.388c-.046.074-.08.096-.118.1a.12.12 0 0 1-.102-.04l-.093-.082-2.355-1.598a1.12 1.12 0 0 0-1.755.217l-2.581 3.704a.5.5 0 1 0 .82.572l2.6-3.734c.04-.063.074-.084.112-.088a.12.12 0 0 1 .101.04l.096.086 2.356 1.599c.237.234.566.352.9.319z",fill:"var(--contrast-alpha)"}),i.createElement("g",null),i.createElement("g",{clipPath:"url(#sdfd)"},i.createElement("path",{d:"M15.812 11h-5.624A2.2 2.2 0 0 0 8 13.21v5.685c0 1.22.98 2.21 2.188 2.21h5.624A2.2 2.2 0 0 0 18 18.895V13.21A2.2 2.2 0 0 0 15.812 11z",fill:"#0A48B6"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.16 13.224l-.084-.253a.035.035 0 0 0-.067 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.211.158-.08.254c-.01.033.027.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.013-.065-.02-.065l-.264-.002zm0 5.426l-.084-.253a.035.035 0 0 0-.067 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.211.158-.08.254c-.01.033.027.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.013-.065-.02-.065l-.264-.002zm2.6-2.966l.084.253.264.002c.034 0 .048.044.02.065l-.212.158.08.254c.01.033-.027.06-.055.04l-.214-.155-.215.155c-.027.02-.064-.007-.054-.04l.08-.254-.213-.158c-.027-.02-.013-.065.021-.065l.264-.002.083-.253a.035.035 0 0 1 .068 0zm-5.284.253l-.084-.253a.035.035 0 0 0-.067 0l-.084.253-.263.002c-.034 0-.048.044-.021.065l.212.158-.08.254c-.01.033.027.06.055.04l.214-.155.215.155c.028.02.065-.007.054-.04l-.08-.254.213-.158c.027-.02.013-.065-.02-.065l-.264-.002zm.32-1.67l.083.253.264.002c.034 0 .048.044.02.065l-.211.158.08.254c.01.033-.028.06-.055.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.064.02-.065l.264-.002.083-.252a.035.035 0 0 1 .068 0zm4.732 2.966l-.083-.253a.035.035 0 0 0-.068 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.212.158-.08.254c-.01.033.027.06.055.04l.214-.155.215.155c.027.02.064-.007.054-.04l-.08-.254.213-.158c.027-.02.013-.065-.021-.065l-.264-.002zm-1.066-3.959l.083.253.264.002c.034 0 .048.045.02.065l-.212.158.08.254c.01.033-.027.06-.054.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.064.02-.065l.264-.002.083-.252a.035.035 0 0 1 .068 0zm-2.601 4.952l-.084-.253a.035.035 0 0 0-.067 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.211.158-.08.254c-.01.033.028.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.014-.065-.02-.065l-.264-.002zm3.516-3.958l-.083.252-.264.002c-.034 0-.048.044-.02.065l.212.158-.08.254c-.01.033.027.06.055.04l.214-.155.215.155c.027.02.064-.007.054-.04l-.08-.254.213-.158c.027-.02.013-.064-.021-.065l-.264-.002-.083-.252a.035.035 0 0 0-.068 0zm-4.732 2.965l.083-.253a.035.035 0 0 1 .068 0l.083.253.264.002c.034 0 .048.044.02.065l-.211.158.08.254c.01.033-.028.06-.055.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.065.02-.065l.264-.002zm1.065-3.959l-.083.253-.264.002c-.034 0-.048.045-.02.065l.211.158-.08.254c-.01.033.028.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.014-.064-.02-.065l-.264-.002-.084-.252a.035.035 0 0 0-.067 0zm2.601 4.952l.083-.253a.035.035 0 0 1 .068 0l.083.253.264.002c.034 0 .048.044.02.065l-.212.158.08.254c.01.033-.027.06-.054.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.065.02-.065l.264-.002z",fill:"#FFE15A"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.522 15.146h8.956c.19.225.335.488.424.777h-9.804c.089-.289.235-.552.424-.777zM14 16.701h10v.777H14V16.7zm10 1.554H14v.778h10v-.778zM14 19.81h10v.777H14v-.777zm10 1.555H14v.777h10v-.777zm-9.902 1.554h9.804a2.214 2.214 0 0 1-.424.778h-8.956a2.212 2.212 0 0 1-.424-.778z",fill:"#F5F5F5"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.812 14.368h-5.625c-.667 0-1.264.302-1.665.778h8.956a2.173 2.173 0 0 0-1.666-.778zM24 17.478H14v.777h10v-.777zm-.098-1.555c.064.208.098.428.098.656v.122H14v-.122c0-.228.034-.448.098-.656h9.804zm.098 3.11H14v.777h10v-.778zm0 3.109v.121c0 .229-.034.449-.098.656h-9.804a2.229 2.229 0 0 1-.098-.656v-.121h10zm-.522 1.554h-8.956c.401.476.998.778 1.665.778h5.625c.667 0 1.264-.302 1.666-.778zM14 20.587h10v.777H14v-.777z",fill:"#FA4051"}),i.createElement("path",{d:"M19.333 14.368h-3.166c-1.197 0-2.167.99-2.167 2.21v3.232h5.333v-5.442z",fill:"#1939C9"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.742 14.854l.041.126.131.001c.017 0 .024.022.01.033l-.105.078.04.127c.005.016-.013.03-.027.02l-.107-.078-.107.078c-.014.01-.032-.004-.027-.02l.04-.127-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.028-.016.034 0zm-1.162.365c-.005.016.014.03.027.02l.107-.078.107.078c.014.01.032-.004.027-.02l-.04-.127.106-.078c.013-.01.006-.032-.01-.033h-.132l-.022-.069c-.056.05-.11.102-.16.157l.03.023-.04.127zm.15.684l.042.126h.131c.017 0 .024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.042 1.29l-.041-.127a.018.018 0 0 0-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.125c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032h-.132zm-.041.942l.041.126.131.001c.017 0 .024.022.01.032l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.098l-.041-.125a.018.018 0 0 0-.034 0l-.041.125-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.126c-.005.016.014.03.027.02l.107-.078.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.078c.013-.01.006-.033-.01-.033h-.132zm.463-3.882l.042.126h.13c.018.001.025.023.011.033l-.105.079.04.126c.004.017-.014.03-.028.02l-.106-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126a.018.018 0 0 1 .033 0zm.042 1.289l-.042-.126c-.005-.016-.028-.016-.033 0l-.042.126h-.13c-.018.001-.025.023-.011.033l.105.079-.04.126c-.004.017.014.03.028.02l.107-.077.106.077c.014.01.033-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032l-.131-.001zm-.042.98l.042.125h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.028.02l-.106-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126c.005-.016.028-.016.033 0zm.042 1.117l-.042-.125c-.005-.016-.028-.016-.033 0l-.042.126h-.13c-.018 0-.025.023-.011.033l.105.078-.04.127c-.004.016.014.03.028.02l.107-.077.106.077c.014.01.033-.004.027-.02l-.04-.127.106-.078c.014-.01.007-.032-.01-.033h-.131zm.506-2.708l-.041-.126c-.006-.016-.028-.016-.034 0l-.041.126h-.131c-.017 0-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041 1.037l.041.126.131.001c.017 0 .024.022.01.032l-.105.08.04.125c.005.017-.013.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.028-.016.034 0zm.041 1.195l-.041-.126c-.006-.016-.028-.016-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041.847l.041.125.131.001c.017 0 .024.022.01.032l-.105.08.04.126c.005.016-.013.03-.027.02l-.107-.078-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.078c-.013-.01-.006-.033.01-.033h.132l.041-.127c.006-.016.028-.016.034 0zm.545-3.631l-.041-.126a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.013.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041 1.037l.041.126h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.23l-.041-.125a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.013.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041.868l.041.126h.131c.017 0 .024.023.01.033l-.105.078.04.127c.005.016-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.004-.027-.02l.04-.127-.106-.078c-.014-.01-.006-.032.01-.033h.132l.041-.126a.018.018 0 0 1 .034 0zm.548-3.632l-.042-.126a.018.018 0 0 0-.033 0l-.042.126-.13.001c-.018 0-.025.022-.011.033l.105.078-.04.127c-.005.016.014.03.028.02l.106-.078.107.078c.014.01.032-.004.027-.02l-.04-.127.106-.079c.014-.01.007-.032-.01-.032h-.131zm-.042.923l.042.126h.13c.018 0 .025.023.011.033l-.105.079.04.126c.004.016-.014.03-.028.02l-.107-.077-.106.077c-.014.01-.033-.004-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126a.018.018 0 0 1 .033 0zm.042 1.29l-.042-.127a.018.018 0 0 0-.033 0l-.042.126-.13.001c-.018 0-.025.022-.011.032l.105.08-.04.125c-.005.017.014.03.028.02l.106-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032h-.131zm-.042.942l.042.126.13.001c.018 0 .025.022.011.032l-.105.079.04.126c.004.017-.014.03-.028.02l-.107-.077-.106.077c-.014.01-.033-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126a.018.018 0 0 1 .033 0zm.042 1.098l-.042-.125a.018.018 0 0 0-.033 0l-.042.125-.13.001c-.018 0-.025.022-.011.032l.105.08-.04.126c-.005.016.014.03.028.02l.106-.078.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.078c.014-.01.007-.033-.01-.033h-.131zm.463-3.882l.041.126h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.289l-.041-.126a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.013.03.027.02l.107-.077.107.077c.013.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041.98l.041.125h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.117l-.041-.125a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017 0-.024.023-.01.033l.105.078-.04.127c-.005.016.013.03.027.02l.107-.077.107.077c.013.01.032-.004.027-.02l-.04-.127.106-.078c.013-.01.006-.032-.01-.033h-.132zm.464-3.882l.041.125.132.001c.017 0 .024.022.01.033l-.105.078.039.127c.005.016-.013.03-.027.02l-.107-.078-.107.078c-.013.01-.032-.004-.027-.02l.04-.127-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.029-.016.034 0zm.041 1.174l-.041-.126c-.005-.016-.028-.016-.034 0l-.041.126h-.131c-.017 0-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032l-.131-.001zm-.041 1.037l.041.126.132.001c.017 0 .024.022.01.032l-.105.08.039.125c.005.017-.013.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.029-.016.034 0zm.041 1.195l-.041-.126c-.005-.016-.028-.016-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032l-.131-.001zm-.041.847l.041.125.132.001c.017 0 .024.022.01.032l-.105.08.039.126c.005.016-.013.03-.027.02l-.107-.078-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.078c-.013-.01-.006-.033.01-.033h.132l.041-.127c.006-.016.029-.016.034 0zm.545-3.631l-.041-.126a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.006-.032-.01-.032l-.132-.001zm-.041 1.037l.041.126h.132c.017.001.024.023.01.033l-.106.079.04.126c.005.017-.013.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.23l-.041-.125a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.006-.032-.01-.032l-.132-.001zm-.041.868l.041.126h.132c.017 0 .024.023.01.033l-.106.078.04.127c.005.016-.013.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.004-.027-.02l.04-.127-.106-.078c-.013-.01-.006-.032.01-.033h.132l.041-.126a.018.018 0 0 1 .034 0zm.547-3.632l-.041-.126a.018.018 0 0 0-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.033l.105.078-.04.127c-.005.016.014.03.027.02l.107-.078.107.078c.014.01.032-.004.027-.02l-.04-.127.106-.079c.013-.01.006-.032-.01-.032h-.132zm-.041.923l.041.126h.131c.017 0 .024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.29l-.041-.127a.018.018 0 0 0-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.125c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032h-.132zm-.041.942l.041.126.131.001c.017 0 .024.022.01.032l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.098l-.041-.125a.018.018 0 0 0-.034 0l-.041.125-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.126c-.005.016.014.03.027.02l.107-.078.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.078c.013-.01.006-.033-.01-.033h-.132z",fill:"#F5F5F5"})),i.createElement("defs",null,i.createElement("linearGradient",{id:"oozzx",x1:"52.5",y1:"50",x2:"52.942",y2:"89.509",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:a,stopOpacity:".3"}),i.createElement("stop",{offset:"1",stopColor:a,stopOpacity:"0"})),i.createElement("clipPath",{id:"sdfd"},i.createElement("path",{fill:"#fff",transform:"translate(8 11)",d:"M0 0h16v13.474H0z"}))))}},65095:(e,a,s)=>{"use strict";s.d(a,{E:()=>r});var i=s(27378);const r=e=>{const a=e.isAccentTheme?"var(--accent-alpha)":"var(--chart-line-1)";return i.createElement("svg",{width:"104",height:"80",viewBox:"0 0 104 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 4a4 4 0 0 1 4-4h96a4 4 0 0 1 4 4v72a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4z",fill:"var(--bg-alpha)"}),i.createElement("rect",{x:"4",y:"4",width:"55",height:"28",rx:"4",fill:"var(--base-alpha)"}),i.createElement("rect",{x:"29",y:"14",width:"22",height:"8",rx:"4",fill:"var(--high-alpha)"}),i.createElement("rect",{x:"61",y:"4",width:"28",height:"28",rx:"4",fill:"var(--base-alpha)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M74.703 15.807l2.566 4.276h1.764a.417.417 0 0 1 0 .834H77.77l1.622 2.702a.417.417 0 1 1-.715.429l-1.879-3.131H71.27l-1.913 3.189a.417.417 0 1 1-.714-.429l1.656-2.76h-1.266a.417.417 0 0 1 0-.834h1.765l2.566-4.276a2.084 2.084 0 1 1 1.34 0zm1.594 4.276l-2.263-3.773-2.264 3.773h4.528zm-2.264-5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5z",fill:"var(--contrast-alpha)"}),i.createElement("g",{clipPath:"url(#sdjhfshdfk)"},i.createElement("path",{d:"M15.812 11h-5.624A2.2 2.2 0 0 0 8 13.21v5.685c0 1.22.98 2.21 2.188 2.21h5.624A2.2 2.2 0 0 0 18 18.895V13.21A2.2 2.2 0 0 0 15.812 11z",fill:"#0A48B6"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.16 13.224l-.084-.253a.035.035 0 0 0-.067 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.211.158-.08.254c-.01.033.027.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.013-.065-.02-.065l-.264-.002zm0 5.426l-.084-.253a.035.035 0 0 0-.067 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.211.158-.08.254c-.01.033.027.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.013-.065-.02-.065l-.264-.002zm2.6-2.966l.084.253.264.002c.034 0 .048.044.02.065l-.212.158.08.254c.01.033-.027.06-.055.04l-.214-.155-.215.155c-.027.02-.064-.007-.054-.04l.08-.254-.213-.158c-.027-.02-.013-.065.021-.065l.264-.002.083-.253a.035.035 0 0 1 .068 0zm-5.284.253l-.084-.253a.035.035 0 0 0-.067 0l-.084.253-.263.002c-.034 0-.048.044-.021.065l.212.158-.08.254c-.01.033.027.06.055.04l.214-.155.215.155c.028.02.065-.007.054-.04l-.08-.254.213-.158c.027-.02.013-.065-.02-.065l-.264-.002zm.32-1.67l.083.253.264.002c.034 0 .048.044.02.065l-.211.158.08.254c.01.033-.028.06-.055.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.064.02-.065l.264-.002.083-.252a.035.035 0 0 1 .068 0zm4.732 2.966l-.083-.253a.035.035 0 0 0-.068 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.212.158-.08.254c-.01.033.027.06.055.04l.214-.155.215.155c.027.02.064-.007.054-.04l-.08-.254.213-.158c.027-.02.013-.065-.021-.065l-.264-.002zm-1.066-3.959l.083.253.264.002c.034 0 .048.045.02.065l-.212.158.08.254c.01.033-.027.06-.054.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.064.02-.065l.264-.002.083-.252a.035.035 0 0 1 .068 0zm-2.601 4.952l-.084-.253a.035.035 0 0 0-.067 0l-.083.253-.264.002c-.034 0-.048.044-.02.065l.211.158-.08.254c-.01.033.028.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.014-.065-.02-.065l-.264-.002zm3.516-3.958l-.083.252-.264.002c-.034 0-.048.044-.02.065l.212.158-.08.254c-.01.033.027.06.055.04l.214-.155.215.155c.027.02.064-.007.054-.04l-.08-.254.213-.158c.027-.02.013-.064-.021-.065l-.264-.002-.083-.252a.035.035 0 0 0-.068 0zm-4.732 2.965l.083-.253a.035.035 0 0 1 .068 0l.083.253.264.002c.034 0 .048.044.02.065l-.211.158.08.254c.01.033-.028.06-.055.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.065.02-.065l.264-.002zm1.065-3.959l-.083.253-.264.002c-.034 0-.048.045-.02.065l.211.158-.08.254c-.01.033.028.06.055.04l.215-.155.214.155c.028.02.065-.007.055-.04l-.08-.254.212-.158c.028-.02.014-.064-.02-.065l-.264-.002-.084-.252a.035.035 0 0 0-.067 0zm2.601 4.952l.083-.253a.035.035 0 0 1 .068 0l.083.253.264.002c.034 0 .048.044.02.065l-.212.158.08.254c.01.033-.027.06-.054.04l-.215-.155-.214.155c-.028.02-.065-.007-.055-.04l.08-.254-.212-.158c-.028-.02-.014-.065.02-.065l.264-.002z",fill:"#FFE15A"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.522 15.146h8.956c.19.225.335.488.424.777h-9.804c.089-.289.235-.552.424-.777zM14 16.701h10v.777H14V16.7zm10 1.554H14v.778h10v-.778zM14 19.81h10v.777H14v-.777zm10 1.555H14v.777h10v-.777zm-9.902 1.554h9.804a2.214 2.214 0 0 1-.424.778h-8.956a2.212 2.212 0 0 1-.424-.778z",fill:"#F5F5F5"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.812 14.368h-5.625c-.667 0-1.264.302-1.665.778h8.956a2.173 2.173 0 0 0-1.666-.778zM24 17.478H14v.777h10v-.777zm-.098-1.555c.064.208.098.428.098.656v.122H14v-.122c0-.228.034-.448.098-.656h9.804zm.098 3.11H14v.777h10v-.778zm0 3.109v.121c0 .229-.034.449-.098.656h-9.804a2.229 2.229 0 0 1-.098-.656v-.121h10zm-.522 1.554h-8.956c.401.476.998.778 1.665.778h5.625c.667 0 1.264-.302 1.666-.778zM14 20.587h10v.777H14v-.777z",fill:"#FA4051"}),i.createElement("path",{d:"M19.333 14.368h-3.166c-1.197 0-2.167.99-2.167 2.21v3.232h5.333v-5.442z",fill:"#1939C9"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.742 14.854l.041.126.131.001c.017 0 .024.022.01.033l-.105.078.04.127c.005.016-.013.03-.027.02l-.107-.078-.107.078c-.014.01-.032-.004-.027-.02l.04-.127-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.028-.016.034 0zm-1.162.365c-.005.016.014.03.027.02l.107-.078.107.078c.014.01.032-.004.027-.02l-.04-.127.106-.078c.013-.01.006-.032-.01-.033h-.132l-.022-.069c-.056.05-.11.102-.16.157l.03.023-.04.127zm.15.684l.042.126h.131c.017 0 .024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.042 1.29l-.041-.127a.018.018 0 0 0-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.125c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032h-.132zm-.041.942l.041.126.131.001c.017 0 .024.022.01.032l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.098l-.041-.125a.018.018 0 0 0-.034 0l-.041.125-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.126c-.005.016.014.03.027.02l.107-.078.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.078c.013-.01.006-.033-.01-.033h-.132zm.463-3.882l.042.126h.13c.018.001.025.023.011.033l-.105.079.04.126c.004.017-.014.03-.028.02l-.106-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126a.018.018 0 0 1 .033 0zm.042 1.289l-.042-.126c-.005-.016-.028-.016-.033 0l-.042.126h-.13c-.018.001-.025.023-.011.033l.105.079-.04.126c-.004.017.014.03.028.02l.107-.077.106.077c.014.01.033-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032l-.131-.001zm-.042.98l.042.125h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.028.02l-.106-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126c.005-.016.028-.016.033 0zm.042 1.117l-.042-.125c-.005-.016-.028-.016-.033 0l-.042.126h-.13c-.018 0-.025.023-.011.033l.105.078-.04.127c-.004.016.014.03.028.02l.107-.077.106.077c.014.01.033-.004.027-.02l-.04-.127.106-.078c.014-.01.007-.032-.01-.033h-.131zm.506-2.708l-.041-.126c-.006-.016-.028-.016-.034 0l-.041.126h-.131c-.017 0-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041 1.037l.041.126.131.001c.017 0 .024.022.01.032l-.105.08.04.125c.005.017-.013.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.028-.016.034 0zm.041 1.195l-.041-.126c-.006-.016-.028-.016-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041.847l.041.125.131.001c.017 0 .024.022.01.032l-.105.08.04.126c.005.016-.013.03-.027.02l-.107-.078-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.078c-.013-.01-.006-.033.01-.033h.132l.041-.127c.006-.016.028-.016.034 0zm.545-3.631l-.041-.126a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.013.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041 1.037l.041.126h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.23l-.041-.125a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.013.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041.868l.041.126h.131c.017 0 .024.023.01.033l-.105.078.04.127c.005.016-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.004-.027-.02l.04-.127-.106-.078c-.014-.01-.006-.032.01-.033h.132l.041-.126a.018.018 0 0 1 .034 0zm.548-3.632l-.042-.126a.018.018 0 0 0-.033 0l-.042.126-.13.001c-.018 0-.025.022-.011.033l.105.078-.04.127c-.005.016.014.03.028.02l.106-.078.107.078c.014.01.032-.004.027-.02l-.04-.127.106-.079c.014-.01.007-.032-.01-.032h-.131zm-.042.923l.042.126h.13c.018 0 .025.023.011.033l-.105.079.04.126c.004.016-.014.03-.028.02l-.107-.077-.106.077c-.014.01-.033-.004-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126a.018.018 0 0 1 .033 0zm.042 1.29l-.042-.127a.018.018 0 0 0-.033 0l-.042.126-.13.001c-.018 0-.025.022-.011.032l.105.08-.04.125c-.005.017.014.03.028.02l.106-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032h-.131zm-.042.942l.042.126.13.001c.018 0 .025.022.011.032l-.105.079.04.126c.004.017-.014.03-.028.02l-.107-.077-.106.077c-.014.01-.033-.003-.027-.02l.04-.126-.106-.079c-.014-.01-.007-.032.01-.032l.131-.001.042-.126a.018.018 0 0 1 .033 0zm.042 1.098l-.042-.125a.018.018 0 0 0-.033 0l-.042.125-.13.001c-.018 0-.025.022-.011.032l.105.08-.04.126c-.005.016.014.03.028.02l.106-.078.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.078c.014-.01.007-.033-.01-.033h-.131zm.463-3.882l.041.126h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.289l-.041-.126a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.013.03.027.02l.107-.077.107.077c.013.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032l-.132-.001zm-.041.98l.041.125h.131c.017.001.024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.117l-.041-.125a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017 0-.024.023-.01.033l.105.078-.04.127c-.005.016.013.03.027.02l.107-.077.107.077c.013.01.032-.004.027-.02l-.04-.127.106-.078c.013-.01.006-.032-.01-.033h-.132zm.464-3.882l.041.125.132.001c.017 0 .024.022.01.033l-.105.078.039.127c.005.016-.013.03-.027.02l-.107-.078-.107.078c-.013.01-.032-.004-.027-.02l.04-.127-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.029-.016.034 0zm.041 1.174l-.041-.126c-.005-.016-.028-.016-.034 0l-.041.126h-.131c-.017 0-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032l-.131-.001zm-.041 1.037l.041.126.132.001c.017 0 .024.022.01.032l-.105.08.039.125c.005.017-.013.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032h.132l.041-.127c.006-.016.029-.016.034 0zm.041 1.195l-.041-.126c-.005-.016-.028-.016-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.007-.032-.01-.032l-.131-.001zm-.041.847l.041.125.132.001c.017 0 .024.022.01.032l-.105.08.039.126c.005.016-.013.03-.027.02l-.107-.078-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.078c-.013-.01-.006-.033.01-.033h.132l.041-.127c.006-.016.029-.016.034 0zm.545-3.631l-.041-.126a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.006-.032-.01-.032l-.132-.001zm-.041 1.037l.041.126h.132c.017.001.024.023.01.033l-.106.079.04.126c.005.017-.013.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.23l-.041-.125a.018.018 0 0 0-.034 0l-.041.126h-.131c-.017.001-.024.023-.01.033l.105.079-.04.126c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.014-.01.006-.032-.01-.032l-.132-.001zm-.041.868l.041.126h.132c.017 0 .024.023.01.033l-.106.078.04.127c.005.016-.013.03-.027.02l-.107-.077-.107.077c-.013.01-.032-.004-.027-.02l.04-.127-.106-.078c-.013-.01-.006-.032.01-.033h.132l.041-.126a.018.018 0 0 1 .034 0zm.547-3.632l-.041-.126a.018.018 0 0 0-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.033l.105.078-.04.127c-.005.016.014.03.027.02l.107-.078.107.078c.014.01.032-.004.027-.02l-.04-.127.106-.079c.013-.01.006-.032-.01-.032h-.132zm-.041.923l.041.126h.131c.017 0 .024.023.01.033l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.29l-.041-.127a.018.018 0 0 0-.034 0l-.041.126-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.125c-.005.017.014.03.027.02l.107-.077.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.079c.013-.01.006-.032-.01-.032h-.132zm-.041.942l.041.126.131.001c.017 0 .024.022.01.032l-.105.079.04.126c.005.017-.014.03-.027.02l-.107-.077-.107.077c-.014.01-.032-.003-.027-.02l.04-.126-.106-.079c-.013-.01-.006-.032.01-.032l.132-.001.041-.126a.018.018 0 0 1 .034 0zm.041 1.098l-.041-.125a.018.018 0 0 0-.034 0l-.041.125-.131.001c-.017 0-.024.022-.01.032l.105.08-.04.126c-.005.016.014.03.027.02l.107-.078.107.077c.014.01.032-.003.027-.02l-.04-.126.106-.078c.013-.01.006-.033-.01-.033h-.132z",fill:"#F5F5F5"})),i.createElement("g",null,i.createElement("path",{d:"M0 80l5.04-10.44 2.918 5.4 6.631-9.359h3.448l2.123-3.24h3.183l3.713 5.04 2.918 2.16 2.653-7.2 5.305 5.04 3.978-1.8 3.449-3.24 2.387-4.68 4.51 2.88 2.387-2.88 2.678-4.679 3.215 7.56 2.143-4.32L64.888 53l3.148 1.802h2.678l2.174 2.88 2.648-4.68 2.143 7.56 2.678-5.76H82.5l2.143 7.56 2.143-3.24 2.678 1.44 1.607-2.88 1.608 2.88 2.142 3.24L97.5 67.4l1.607-3.6 2.143-6.12 1.607 6.12 2.143 3.6",stroke:a}),i.createElement("path",{d:"M7.958 74.96l-2.918-5.4L0 81.5V112h105V67.4l-2.143-3.599-1.607-6.12-2.143 6.12-1.607 3.6-2.679-3.6-2.142-3.24-1.608-2.88-1.607 2.88-2.678-1.44-2.143 3.24-2.143-7.56h-2.143l-2.678 5.76-2.143-7.559-2.648 4.68-2.174-2.88h-2.678L64.888 53l-2.21 3.242-2.142 4.32-3.215-7.56-2.678 4.68-2.388 2.88-4.509-2.88-2.387 4.68-3.449 3.24-3.978 1.799-5.305-5.04-2.653 7.2-2.918-2.16-3.713-5.04H20.16l-2.123 3.24H14.59l-6.631 9.36z",fill:"url(#rtryrr)"})),i.createElement("defs",null,i.createElement("linearGradient",{id:"rtryrr",x1:"52.5",y1:"53",x2:"53",y2:"95",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:a,stopOpacity:".3"}),i.createElement("stop",{offset:"1",stopColor:a,stopOpacity:"0"})),i.createElement("clipPath",{id:"sdjhfshdfk"},i.createElement("path",{fill:"#fff",transform:"translate(8 11)",d:"M0 0h16v13.474H0z"}))))}},65423:(e,a,s)=>{"use strict";s.d(a,{h:()=>r});var i=s(27378);const r=e=>{const a=e.isAccentTheme?"var(--accent-alpha)":"var(--chart-line-1)";return i.createElement("svg",{width:"104",height:"80",viewBox:"0 0 104 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"104",height:"80",rx:"4",fill:"var(--bg-alpha)"}),i.createElement("g",null,i.createElement("path",{d:"M-10 37.5l2.2-2 2.1 9.5 2.2-5 2.1 2 2.5-3 3.6-1.5L7.2 26l2.2-2 2.2 4.5h2.1L18 32l2.2 6 2.1-1 2.2-3.5 2.2 3.5 2.1-2 2.2 3 2.1 2 2.9-1",stroke:a,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("path",{d:"M-7.8 35.6l-2.2 2V81h46V40.1h-2.9l-2.1-2-2.2-3-2.1 2-2.2-3.5-2.2 3.5-2.1 1-2.2-6-4.3-3.6h-2.1L9.4 24l-2.2 2-2.5 11.6-3.6 1.5-2.5 3-2.1-2-2.2 5-2.1-9.5z",fill:"url(#orderPic)"})),i.createElement("path",{fill:"var(--positive-alpha)",fillOpacity:".4",d:"M0 39h67v1H0z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.5 43l3.5-3.5-3.5-3.5-3.5 3.5 3.5 3.5z",fill:"var(--accent-alpha)"}),i.createElement("rect",{x:"69",y:"4",width:"31",height:"11",rx:"1.5",fill:"var(--high-beta)"}),i.createElement("rect",{x:"69",y:"18",width:"31",height:"11",rx:"1.5",fill:"var(--high-alpha)"}),i.createElement("rect",{x:"69",y:"32",width:"31",height:"10",rx:"1.5",fill:"var(--high-gamma)"}),i.createElement("rect",{x:"69",y:"45",width:"31",height:"14",rx:"1.5",fill:"var(--positive-alpha)"}),i.createElement("rect",{x:"69",y:"62",width:"31",height:"15",rx:"1.5",fill:"var(--negative-alpha)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"orderPic",x1:"13",y1:"24",x2:"13",y2:"76.9",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:a,stopOpacity:".3"}),i.createElement("stop",{offset:"1",stopColor:a,stopOpacity:"0"}))))}},2387:(e,a,s)=>{"use strict";s.d(a,{f:()=>r});var i=s(27378);const r=e=>{const a=e.isAccentTheme?"var(--accent-alpha)":"var(--chart-line-1)";return i.createElement("svg",{width:"104",height:"80",viewBox:"0 0 104 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"104",height:"80",rx:"4",fill:"var(--bg-alpha)"}),i.createElement("g",null,i.createElement("path",{d:"M36.849 39.12L38 41.803V81H0V48.505l1.92-4.022 2.44 4.023 2.442-2.011L8.16 22.363 10.6 19.01l2.17 5.363L16.89 17l2.121 13.407 2.17 2.01 2.442-5.362 1.899 3.352 2.441-3.352 3.256 8.044 2.17-4.692 2.17 2.01 1.29 6.704z",fill:"url(#yipd)"}),i.createElement("path",{d:"M0 49l1.907-4.085L4.334 49l2.426-2.043 1.348-24.51 2.426-3.404 2.157 5.446L16.783 17l2.108 13.617 2.157 2.043 2.427-5.447 1.887 3.404 2.426-3.404 3.235 8.17 2.157-4.766 2.157 2.043L37 40.83",stroke:a,strokeLinecap:"round",strokeLinejoin:"round"})),i.createElement("path",{fill:"var(--positive-alpha)",opacity:".5",d:"M0 39h67v1H0z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.5 43l3.5-3.5-3.5-3.5-3.5 3.5 3.5 3.5z",fill:a}),i.createElement("rect",{x:"69",y:"4",width:"31",height:"11",rx:"1.5",fill:"var(--high-beta)"}),i.createElement("rect",{x:"69",y:"18",width:"31",height:"11",rx:"1.5",fill:"var(--high-alpha)"}),i.createElement("rect",{x:"69",y:"32",width:"31",height:"10",rx:"1.5",fill:"var(--high-gamma)"}),i.createElement("rect",{x:"69",y:"45",width:"31",height:"14",rx:"1.5",fill:"var(--positive-alpha)"}),i.createElement("rect",{x:"69",y:"62",width:"31",height:"15",rx:"1.5",fill:"var(--negative-alpha)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"yipd",x1:"19",y1:"17",x2:"19",y2:"78",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:a,stopOpacity:".3"}),i.createElement("stop",{offset:"1",stopColor:a,stopOpacity:"0"}))))}},38925:(e,a,s)=>{"use strict";s.d(a,{D:()=>r});var i=s(27378);const r=e=>{const a=e.isAccentTheme?"var(--accent-alpha)":"var(--chart-line-1)";return i.createElement("svg",{width:"104",height:"80",viewBox:"0 0 104 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"104",height:"80",rx:"4",fill:"var(--bg-alpha)"}),i.createElement("g",null,i.createElement("path",{d:"M-2 36.5l2.484-2L2.97 44l2.484-5 2.484 2 2.899-3 4.14-1.5L17.876 25l2.484-2 2.485 4.5h2.484l4.969 3.5 2.484 6 2.485-1 2.484-3.5 2.484 3.5 2.485-2 2.484 3 2.484 2L51 38",stroke:a,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("path",{d:"M.484 34.594L-2 36.61V80h53V39.13h-3.313l-2.484-2.016-2.484-3.024-2.485 2.016-2.484-3.528-2.484 3.528-2.485 1.008-2.484-6.049-4.969-3.528h-2.484L20.359 23l-2.484 2.016-2.898 11.594-4.141 1.512-2.899 3.025-2.484-2.016-2.484 5.04-2.485-9.577z",fill:"url(#pxqk)"})),i.createElement("path",{fill:"var(--accent-alpha)",d:"M97 39H50v1h47z"}),i.createElement("path",{fill:"var(--positive-alpha)",fillOpacity:".4",d:"M0 39h50v1H0z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.5 43l3.5-3.5-3.5-3.5-3.5 3.5 3.5 3.5zM85.408 36.726c.21-.444.65-.726 1.134-.726h16.199A1.27 1.27 0 0 1 104 37.28v5.44a1.27 1.27 0 0 1-1.259 1.28H86.542c-.484 0-.925-.282-1.134-.726l-1.284-2.72a1.3 1.3 0 0 1 0-1.108l1.284-2.72z",fill:"var(--accent-alpha)"}),i.createElement("rect",{x:"86",y:"25",width:"18",height:"7",rx:"3.5",fill:"var(--high-gamma)"}),i.createElement("rect",{x:"86",y:"48",width:"18",height:"7",rx:"3.5",fill:"var(--high-gamma)"}),i.createElement("rect",{x:"86",y:"59",width:"18",height:"7",rx:"3.5",fill:"var(--high-gamma)"}),i.createElement("rect",{x:"86",y:"14",width:"18",height:"7",rx:"3.5",fill:"var(--high-gamma)"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"pxqk",x1:"24.5",y1:"23",x2:"24.5",y2:"75.929",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:a,stopOpacity:".3"}),i.createElement("stop",{offset:"1",stopColor:a,stopOpacity:"0"}))))}},73304:(e,a,s)=>{"use strict";s.d(a,{n:()=>h});var i=s(27378),r=s(73598),n=s(60042),o=s.n(n),l=s(37488),c=s(74199),d=s(87601),u=s(54172),m=s(13424),p=s(41520);s(94096),s(40907);const h=(0,u.zt)((e=>{let a=e.sideBarService,s=e.ContentWrapper;const n=(0,l.useMediaQuery)({query:"(max-width: ".concat(d.j$.BREAKPOINT_768,"px) and (orientation: ").concat(d.eh.PORTRAIT,")")}),u=(0,l.useMediaQuery)({query:"(max-width: ".concat(d.j$.BREAKPOINT_960,"px) and (orientation: ").concat(d.eh.LANDSCAPE,")")}),m=n||u,h=(0,l.useMediaQuery)({query:"(orientation: ".concat(d.eh.LANDSCAPE,")")});let v=(0,p.oj)(320);return m&&(v="100%"),i.createElement(r.Qj,null,(()=>i.createElement(c.s_,{type:m?"detached":"embedded",style:{width:v,backgroundColor:"var(--bg-gamma)"},animation:h||!m?"left":"bottom",panelService:a.sideBarMajor,className:o()("sidebar-platform sidebar-platform-major",!a.sideBarMinor.hasAnimation&&"cor-w-panel_no-animation"),ContentWrapper:s})))}),{helper:(e,a)=>({sideBarService:e.sideBarService,ContentWrapper:a.ContentWrapper}),services:[m.G]})},40850:(e,a,s)=>{"use strict";s.d(a,{N:()=>SidebarPlatformMajorService});var i=s(59312),r=s(60521),n=s(80080),o=s(95601),l=s(74199),c=s(23735);class SidebarPlatformMajorService extends l.Ku{switchAnimation(e){this.hasAnimation=e}close(){String(this.scope.id).toLowerCase().includes("marketplace")?(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"marketplace_close",eventLabel:"marketplace_close"}):(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar",eventAction:"close",eventLabel:this.scope.id}),this.inputs.onClose(),super.close()}back(){var e,a;null===(a=(e=this.inputs).onBack)||void 0===a||a.call(e),super.back()}constructor(e,a){super(a),this.hasAnimation=!0,this.inputs=e,(0,n.$)(o.u$,"layout").then((e=>{e&&this.onOverlayStateChange((a=>{e.setMajorSidebar(a)}))}))}}(0,i.gn)([r.observable],SidebarPlatformMajorService.prototype,"hasAnimation",void 0),(0,i.gn)([r.action],SidebarPlatformMajorService.prototype,"switchAnimation",null)},94769:(e,a,s)=>{"use strict";s.d(a,{KO:()=>p,lS:()=>u.l,x0:()=>h});var i=s(37323),r=s(64356),n=s(59757),o=s(18985),l=s(18545),c=s(58246),d=s(79151),u=s(95502);const m=(0,i.Z)({TRADES:"trades",TRADING_HISTORY_FX:"tradingHistoryFx",TRADING_HISTORY_FTT:"tradingHistoryFtt",MORE:"more",HELP:"help",PROFILE:"profile"},l.SJ,n.tW),p=(0,i.Z)((0,r.Z)((0,i.Z)({},m),{HIDDEN_PHONE_COLLECTOR:"phoneCollector",EDUCATION:"education",FAQ:"faq",HELP_CENTER:"helpCenter",SUPPORT:"support",SUPPORT_CALL:"supportCall",TERMINAL:"terminal",TRADING_BAR:"tradingBar",VIDEO_GALLERY:"videoGallery",VIP_SUPPORT:"vipSupport",HOW_TO_TRADE:"howToTrade",ANALYSER:"analyser",ANALYSER_LOCKED:"analyserLocked"}),{PLUS_ASSETS:"assets",PLUS_MARKET_ANALYSIS:"marketAnalysis"},l.ys,n.FL,c.Q_,d.Qw),h=(0,o.vU)({trades:{id:"sidebar_menu_title_deals",defaultMessage:"Trades"},tradeHistory:{id:"history",defaultMessage:"History"},help:{id:"sidebar_menu_title_overlay",defaultMessage:"Help"},more:{id:"plf_learn_more",defaultMessage:"More"},cabinet:{id:"cabinet",defaultMessage:"Cabinet"}})},95502:(e,a,s)=>{"use strict";s.d(a,{l:()=>i});const i=(0,s(18985).vU)({support:{id:"support",defaultMessage:"Support"},support_call:{id:"phone_call_support",defaultMessage:"Phone Call"},vip_consultant:{id:"vip_consultant",defaultMessage:"Personal analyst"},assistant:{id:"assistant",defaultMessage:"Assistant"},video_lessons:{id:"video_lessons",defaultMessage:"Video tutorials"},callback_order:{id:"callback_order",defaultMessage:"Request a callback"},op_insights_title:{id:"op_insights_title",defaultMessage:"Insights"},how_to_trade:{id:"how_to_trade",defaultMessage:"How to trade"},ct_helpcenter_title:{id:"ct_helpcenter_title",defaultMessage:"Help Center"},plus_assets:{id:"stocksup_assets",defaultMessage:"Assets"},plus_marketwatch:{id:"marketwatch_title",defaultMessage:"Market Watch"}})},8275:(e,a,s)=>{"use strict";s.d(a,{KO:()=>i.KO,N:()=>r.N,x0:()=>i.x0});var i=s(94769),r=s(40850)},98870:(e,a,s)=>{"use strict";s.d(a,{kO:()=>C,zt:()=>S,Jz:()=>y,ub:()=>T,nW:()=>b,BG:()=>$});var i=s(37323),r=s(27378),n=s(42709),o=s(21182),l=s(82844),c=s(74199),d=s(59757),u=s(24459),m=s(60042),p=s.n(m),h=s(17302);const v="jlOBqrWb",g="LRvJOOen";var _=s(16332),f=s(94769),E=s(63427);const S=(0,n.g)(),y=(0,n.g)(),b=(0,n.g)(),C=(0,n.g)(),T=(0,n.g)(),A=(0,o.W)(T(f.KO.HELP)),k=(0,o.W)(T(f.KO.SUPPORT)),w=(0,o.W)(T(f.KO.SUPPORT_CALL)),N=(0,o.W)(E.a2),R=(0,o.W)(E.yw),I=(0,o.W)(E.v5),D=(0,o.W)(E.Fe),O=(0,o.W)(E.fE),L=(0,o.W)(E.uE),M=r.createElement(c.it,null),P=(0,o.W)(b(f.KO.TRADING_SIGNALS)),x=(0,o.W)(C(f.KO.TRADING_SIGNALS)),F=(0,o.W)(T(f.KO.TRADING_SIGNALS)),B=(0,o.W)(y(f.KO.TRADING_SIGNALS_ASSETS)),Z=(0,o.W)(T(f.KO.TRADING_SIGNALS_ASSETS)),U=(0,o.W)(T(f.KO.TRADING_SIGNALS_DETAILS)),H=(0,o.W)(y(f.KO.TRADING_SIGNALS_PRODUCTS)),G=(0,o.W)(T(f.KO.TRADING_SIGNALS_PRODUCTS)),V=(0,o.W)(S(f.KO.COPY_TRADING_LEADERBOARD)),W=(0,o.W)(b(f.KO.COPY_TRADING_LEADERBOARD)),j=(0,o.W)(T(f.KO.COPY_TRADING_LEADERBOARD)),z=(0,o.W)(T(f.KO.COPY_TRADING_SIGNAL_DETAILS)),q=(0,o.W)(y(f.KO.COPY_TRADING_ASSETS)),K=(0,o.W)(T(f.KO.COPY_TRADING_ASSETS)),Y=r.lazy((()=>s.e(2872).then(s.bind(s,59528)))),X=r.lazy((()=>s.e(5177).then(s.bind(s,68076)))),J=r.lazy((()=>s.e(7982).then(s.bind(s,12519)))),Q=r.lazy((()=>s.e(4274).then(s.bind(s,99111)))),$=(0,i.Z)({trades:{rootId:f.KO.TRADES,items:[{id:f.KO.TRADES,title:r.createElement(l._,Object.assign({},f.x0.trades)),component:e=>r.createElement(I,{props:e}),alwaysScroll:!1},{id:f.KO.TRADING_HISTORY_FX,title:r.createElement(l._,Object.assign({},f.x0.tradeHistory)),component:e=>r.createElement(R,{props:e}),alwaysScroll:!1},{id:f.KO.TRADING_HISTORY_FTT,title:r.createElement(l._,Object.assign({},f.x0.tradeHistory)),component:e=>r.createElement(N,{props:e}),renderHeaderActions:()=>r.createElement(L,null),alwaysScroll:!1},{id:f.KO.ANALYSER,title:r.createElement(l._,{id:"analytics_title",defaultMessage:"Trade Analytics"}),component:e=>r.createElement(D,{props:e}),alwaysScroll:!1}]},analyserLocked:{rootId:f.KO.ANALYSER_LOCKED,items:[{id:f.KO.ANALYSER_LOCKED,title:"",component:e=>r.createElement(O,{props:e}),alwaysScroll:!1}]},help:{rootId:f.KO.HELP,items:[{id:f.KO.HELP,title:r.createElement(l._,Object.assign({},f.x0.help)),component:e=>r.createElement(A,{props:e})},{id:f.KO.SUPPORT,title:r.createElement(l._,Object.assign({},f.lS.support)),component:e=>r.createElement(k,{props:e})},{id:f.KO.SUPPORT_CALL,title:r.createElement(l._,Object.assign({},f.lS.support_call)),component:e=>r.createElement(w,{props:e})},{id:f.KO.VIDEO_GALLERY,title:r.createElement(l._,Object.assign({},f.lS.video_lessons)),component:e=>r.createElement(r.Suspense,{fallback:M},r.createElement(Y,Object.assign({},e)))},{id:f.KO.HIDDEN_PHONE_COLLECTOR,title:r.createElement(l._,Object.assign({},f.lS.callback_order)),component:e=>r.createElement(r.Suspense,{fallback:M},r.createElement(X,Object.assign({},e)))},{id:f.KO.HOW_TO_TRADE,title:r.createElement(l._,Object.assign({},f.lS.how_to_trade)),component:e=>r.createElement(r.Suspense,{fallback:M},r.createElement(J,{id:f.KO.HOW_TO_TRADE,className:e.className}))},{id:f.KO.PLUS_MARKET_ANALYSIS,title:r.createElement(l._,Object.assign({},f.lS.op_insights_title)),component:e=>r.createElement(r.Suspense,{fallback:M},r.createElement(Q,{id:f.KO.PLUS_MARKET_ANALYSIS,className:e.className}))},{id:f.KO.HELP_CENTER,title:r.createElement(l._,Object.assign({},f.lS.ct_helpcenter_title)),component:e=>r.createElement(r.Suspense,{fallback:M},r.createElement(Q,{id:f.KO.HELP_CENTER,className:e.className}))},{id:f.KO.PLUS_ASSETS,title:r.createElement(l._,Object.assign({},f.lS.plus_assets)),component:e=>r.createElement(r.Suspense,{fallback:M},r.createElement(Q,{id:f.KO.PLUS_ASSETS,className:e.className}))},{id:f.KO.TRADING_SIGNALS,title:r.createElement(P,null),renderHeaderActions:e=>r.createElement(x,{props:e}),component:e=>r.createElement(F,{props:e})},{id:f.KO.TRADING_SIGNALS_DETAILS,title:null,component:e=>r.createElement(U,{props:e})},{id:f.KO.TRADING_SIGNALS_ASSETS,title:null,renderHeader:e=>r.createElement(B,{props:e}),component:e=>r.createElement(Z,{props:e})},{id:f.KO.TRADING_SIGNALS_PRODUCTS,title:null,renderHeader:e=>r.createElement(H,{props:e}),component:e=>r.createElement(G,{props:e})},{id:f.KO.COPY_TRADING_LEADERBOARD,title:r.createElement(W,null),renderHeaderImage:e=>r.createElement(V,{props:e}),component:e=>r.createElement(j,{props:e})},{id:f.KO.COPY_TRADING_SIGNAL_DETAILS,title:null,component:e=>r.createElement(z,{props:e})},{id:f.KO.COPY_TRADING_ASSETS,renderHeader:e=>r.createElement(q,{props:e}),title:null,component:e=>r.createElement(K,{props:e})}]}},(0,_.tp)(),(()=>{const e={[d.tW.EVENTS]:{rootId:d.FL.EVENTS,items:(0,d.f5)()}};return e.events.items.forEach((e=>{var a;e.component=(a=e.component,e=>{var s=e.className,i=(0,u.Z)(e,["className"]);const n=(0,h.Fg)().dir;return r.createElement("div",{className:p()(s,v),dir:n},r.createElement(a,Object.assign({className:p()(g)},i)))})})),e})())},63427:(e,a,s)=>{"use strict";s.d(a,{Fe:()=>l,a2:()=>n,fE:()=>c,uE:()=>d,v5:()=>o,yw:()=>r});var i=s(84584);const r=(0,i.Z)(),n=(0,i.Z)(),o=(0,i.Z)(),l=(0,i.Z)(),c=(0,i.Z)(),d=(0,i.Z)()},64305:(e,a,s)=>{"use strict";s.d(a,{I:()=>h});var i=s(27378),r=s(73598),n=s(60042),o=s.n(n),l=s(37488),c=s(74199),d=s(87601),u=s(54172),m=s(13424),p=s(41520);s(94096),s(69690);const h=(0,u.zt)((e=>{const a=(0,l.useMediaQuery)({query:"(max-width: ".concat(d.j$.BREAKPOINT_768,"px) and (orientation: ").concat(d.eh.PORTRAIT,")")}),s=(0,l.useMediaQuery)({query:"(max-width: ".concat(d.j$.BREAKPOINT_960,"px) and (orientation: ").concat(d.eh.LANDSCAPE,")")});return i.createElement(r.Qj,null,(()=>{let r=e.sideBarService.sideBarMinor.minimized?(0,p.oj)(160):(0,p.oj)(320);return(a||s)&&(r="100%"),i.createElement(c.s_,{type:a||s?"detached":"embedded",style:{width:r,backgroundColor:"var(--bg-alpha)"},animation:s?"bottom":"left",panelService:e.sideBarService.sideBarMinor,className:o()("sidebar-platform sidebar-platform-minor",e.sideBarService.sideBarMinor.minimized&&"sidebar-platform-minor_minimized",!e.sideBarService.sideBarMinor.hasAnimation&&!a&&!s&&"cor-w-panel_no-animation"),ContentWrapper:e.ContentWrapper})}))}),{helper:(e,a)=>({sideBarService:e.sideBarService,ContentWrapper:a.ContentWrapper}),services:[m.G]})},3456:(e,a,s)=>{"use strict";s.d(a,{v:()=>SidebarPlatformMinorService});var i=s(59312),r=s(60521),n=s(80080),o=s(95601),l=s(74199),c=s(57615),d=s(29042),u=s(23735);class SidebarPlatformMinorService extends l.Ku{toggleMinimize(){(0,u.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/minimize_mode",eventLabel:this.minimized?"off":"on"}),this.setMinimized(!this.minimized)}isPanelOpened(e){return!(!this.isOpen||!this.scope.activeItem||e&&this.scope.activeItem.id!==e)}setMinimized(e){this.minimized=e,this.storage.set("minimized",e)}switchAnimation(e){this.hasAnimation=e}close(){this.isPanelOpened("assets")&&(0,u.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu",eventLabel:"close"}),this.inputs.onClose(),super.close()}constructor(e,a){super(a),this.storage=new c._({namespace:"SidebarMinorMinimized",backend:new d.u}),this.hasAnimation=!0,this.minimized=!1,this.inputs=e,this.minimized=!0===this.storage.get("minimized"),(0,n.$)(o.u$,"layout").then((e=>{e&&this.onOverlayStateChange((a=>{e.setMinorSidebar(a)}))}))}}(0,i.gn)([r.observable],SidebarPlatformMinorService.prototype,"hasAnimation",void 0),(0,i.gn)([r.observable],SidebarPlatformMinorService.prototype,"minimized",void 0),(0,i.gn)([r.action.bound],SidebarPlatformMinorService.prototype,"toggleMinimize",null),(0,i.gn)([r.action],SidebarPlatformMinorService.prototype,"setMinimized",null),(0,i.gn)([r.action],SidebarPlatformMinorService.prototype,"switchAnimation",null)},1035:(e,a,s)=>{"use strict";s.d(a,{KO:()=>r});var i=s(18985);const r={ASSETS:"assets",ASSETS_RECOMMENDED:"assetsRecommended",INDICATORS:"indicators",STRATEGIES:"strategies",INDICATORS_EDIT:"indicatorsEdit",DRAWINGS_EDIT:"drawingsEdit",STRATEGY_DETAILS:"strategyDetails",CUSTOM_STRATEGY_DETAILS:"customStrategyDetails",CREATE_CUSTOM_STRATEGY:"createCustomStrategy",CREATE_CUSTOM_STRATEGY_REDESIGN:"createCustomStrategyRedesign",TECH_ANALYSIS:"techAnalysis",TECH_ANALYSIS_LIST:"techAnalysisList",TECH_ANALYSIS_ACTIVE:"techAnalysisActive",TECH_ANALYSIS_REMOVE:"techAnalysisRemove"};(0,i.vU)({assets:{id:"assets",defaultMessage:"Assets"},indicators:{id:"indicators",defaultMessage:"Indicators"}})},14803:(e,a,s)=>{"use strict";s.d(a,{FW:()=>n.FW,KO:()=>i.KO,XG:()=>n.XG,qu:()=>n.qu,vw:()=>r.v});var i=s(1035),r=s(3456),n=s(1149)},1149:(e,a,s)=>{"use strict";s.d(a,{FW:()=>n,XG:()=>l,qu:()=>o,ri:()=>c});var i=s(42709),r=s(84584);const n=(0,i.g)(),o=(0,r.Z)(),l=(0,r.Z)(),c=(0,r.Z)();(0,r.Z)()},77458:(e,a,s)=>{"use strict";s.d(a,{H:()=>v,Y:()=>h});var i=s(27378),r=s(60042),n=s.n(r),o=s(76232),l=s(21182),c=s(46124),d=s(8141),u=s(73533),m=s(71837);const p=(0,l.W)(u.qe),h=(0,o.t)(),v=e=>{let a=e.className,s=e.contrast,r=e.slotSpinner,o=e.slotDealForm,l=e.slotChart,u=e.frameIndex,v=e.dealFormDataTest;const g=0===u,_=(0,d.L)(),f=(0,c.k)(h,null);return i.createElement("div",{className:n()("trade-frame__section",{"trade-frame__section_contrast":s},a)},r,f?i.createElement("div",{className:m.Z.contentReplacement},f):i.createElement(i.Fragment,null,i.createElement("div",{className:"trade-frame__content"},i.createElement("div",{className:"trade-frame__content-graph"},l),i.createElement(p,null)),i.createElement("div",{className:n()("trade-frame__form",g&&"trade-frame__form_first"),dir:_,"data-test":v},o)))}},67076:(e,a,s)=>{"use strict";s.d(a,{H_:()=>l,Q3:()=>c,Xe:()=>n,ns:()=>o});var i=s(37323),r=s(64356);const n={ANALYTICS:"analytics",AVATAR:"avatar",BALANCE:"balance",DATA:"data",DUO_AUTH_STATE:"duo_auth_state",HAS_KYC_APPLICANT:"has_kyc_applicant",IS_KYC_AVAILABLE:"is_kyc_available",KYC_VERIFICATION:"kyc_verification",MARKETPLACE:"marketplace",PAYMENT_PRESETS:"payment_presets",POLITICS:"politics",PROMO:"promo",SERVICE_LEVELS:"service_levels",SESSION:"session",VOTE:"vote",SOUND_PACKS:"sound_packs",STORIES_V3:"stories_v3",ONBOARDING_STATE:"onboarding_state",DEPOSIT_MOTIVATION:"deposit_motivation",PROFITABILITY:"profitability",RESTRICTIONS:"restrictions",OPTIONS:"options",REFILL:"refill"},o=(0,r.Z)((0,i.Z)({},n),{ACCOUNTS:"accounts",ACCOUNTS_CURRENCIES:"accounts_currencies",DEALS:"ftt_deals",PAIRS:"ftt_pairs",PAIRS_DEFAULT:"ftt_pairs_default",PAIRS_GROUPS:"ftt_pairs_groups"}),l=(0,r.Z)((0,i.Z)({},n),{ACCOUNTS:"accounts",ACCOUNTS_CURRENCIES:"accounts_currencies",DEALS:"fx_deals",PAIRS:"fx_pairs",PAIRS_DEFAULT:"fx_pairs_default",PAIRS_GROUPS:"fx_pairs_groups"}),c=Object.freeze((0,r.Z)((0,i.Z)({},n),{ACCOUNTS:"accounts",ACCOUNTS_CURRENCIES:"accounts_currencies",PAIRS:"spt_pairs",PAIRS_GROUPS:"spt_pairs_groups",PAIRS_DEFAULT:"spt_pairs_default"}))},23680:(e,a,s)=>{"use strict";s.d(a,{z:()=>be,v:()=>Ce});var i=s(29257),r=s(3121),n=s(59312),o=s(60521),l=s(28660);const c=["complete","interactive"];function d(){return c.includes(document.readyState)?Promise.resolve():new Promise((e=>{const a=()=>{c.includes(document.readyState)&&(document.removeEventListener("readystatechange",a),e())};document.addEventListener("readystatechange",a)}))}var u=s(66313),m=s(81681);var p=s(99175),h=s(66713),v=s(26323),g=s(26763),_=s(51116),f=s(50391),E=s.n(f),S=s(18457);const y=class CacheDB{constructor(e){let a=e.target,s=void 0===a?"cookie":a;E()(this,"options",{}),E()(this,"store",{}),this.options.target=s}set(e,a,s){const i=this.options,r=s&&s.expired;return this.store[e]=a,"cookie"===i.target&&(0,S.d8)("props[".concat(e,"]"),"string"==typeof a?'"'.concat(a,'"'):a,r),!0}get(e,a){const s=this.options;let i;if(void 0!==this.store[e])i=this.store[e];else if("cookie"===s.target)try{i=JSON.parse((0,S.ej)("props[".concat(e,"]")))}catch(e){}return null!=i?i:a}};var b=s(49491),C=s.n(b),T=s(46188),A=s(10592),k=s(62794),w=s(30654);function N(e,a,s){const i=s.country?s.country.toUpperCase():"EN";window.twqInitialized||(twq?(twq("init",{ES:"nzb55",ID:"nz3se",BR:"nz63q",MY:"nzb59",TR:"nzb5b",VN:"nzb5c",RU:"nzb5e",TH:"nzb5g",EN:"nzemn"}[i]),window.twqInitialized=!0):window.location.href),"CompleteRegistration"===e?twq("track","Registration"):"TraderConversion"===e?twq("track","FTD"):"Purchase"===e&&twq("track","Purchase",{value:a.value?a.value:0,currency:"USD",num_items:"1"})}function R(e,a,s,i){if("CompleteRegistration"===e&&s.ref_channel&&i[s.ref_channel]){const e=i[s.ref_channel];try{const a=document.createElement("img"),s=document.referrer;a.src="//my.rtmark.net/img.gif?f=sync&lr=1&partner=".concat(e,"&ttl=&rurl=").concat(s),a.height=1,a.width=1,a.frameborder=0,a.style.display="none",document.body.appendChild(a)}catch(e){window.location.href}}}function I(e){try{if((0,A.XW)(),(0,A.hf)("olymptrade\\.lite"),!e||!e.facebook||!e.facebook.length)return;let a="trackCustom";if(fbq||window.location.href,!window.fbqInitialized&&fbq){const e=(0,A.OR)("olymptrade\\.lite")?"257102672675471":"1030052410533603";fbq("init",e),window.fbqInitialized=!0}(0,T.Z)(e.facebook,(s=>{const i=s.event.split("FB_").pop();let r="FB_event",n=i,o=i;switch(i){case"PayIn1Depo0":n="PayIn1",o="Balance0";break;case"PayIn2Depo0":n="PayIn2",o="PayIn2";break;case"OpenDemoAccount":n="Demo",o="First";break;case"CompleteRegistration":(0,k.Zs)("test_reg_http"),window.ttq&&window.ttq.track("Registration"),a="track",r="register",n="register",o="register";break;case"DemoIncrease":n="Demo",o="Increase";break;case"TraderConversion":n="Trader",o="FirstDepo";break;case"VIPConversion":n="Trader",o="VIP";break;case"DemoDeal5":n="Demo",o="5Plus"}if("CompleteRegistration"!==i&&"Purchase"!==i||!fbq||fbq(a,s.event,C()(C()({},s.params||{}),{},{action_source:"website",event_source_url:window.location.href})),"Purchase"===i){const a=s.params.operation_id?s.params.operation_id:0,i=e.id?e.id:0,r=s.params.value?s.params.value:0;(0,k.dJ)().then((()=>{dataLayer.push({ecommerce:{purchase:{actionField:{id:a,affiliation:"OLYMP",revenue:r,currency:"USD"},products:[{name:"DEPOSIT",sku:i,id:a,price:r,category:"OLYMP_DEPOSIT",quantity:1}]}},event:"ecommerce"})}))}else(0,k.dJ)().then((()=>{dataLayer.push({event:"uaEvents",eventCategory:r,eventAction:n,eventLabel:o})}));dc?dc(i,s.params,e.data):window.location.href,N(s.event,s.params,{country:e.geo}),R(s.event,s.params,{ref_channel:""},{tr:"87f8af829d8b6b7207248eb46000b60f2b771e69a6454820bd98a9881b4b44bc",mv:"48237e878946598e4a14fe7c1224000ac32399082ab8f66f288c898d1b2c9807",g:"884d6f3da7af44e68572f70891ebcbfebb613cf86a83f15a6a13c0769409aab5",fb:"f5bf90550b985ca8e107ae4d0bd9007ef3fb1954eb1638e85465694e08784a36",sm:"027323f7388f9be532a6dce21fc48e115db08fc5b63e3b9f68896ad55520b955",affiliate:"dc837493f412782425139ae7f0859bee8e321366f6a4826b766f6ced4e60e3d7",olymp:"a4846ef287472612c12dad01b977a5281df3d4b9f76b6fbf5771185cf1d8ca07"})}))}catch(e){window.location.href}}function D(e){try{if((0,A.XW)(),(0,A.hf)("olymptrade\\.lite"),null==e||!e.analytics)return;let a="trackCustom";if(fbq||window.location.href,!window.fbqInitialized&&fbq){const e=(0,A.OR)("olymptrade\\.lite")?"257102672675471":"198127204087574";fbq("init",e),window.fbqInitialized=!0}(0,T.Z)(e.analytics,(s=>{const i=s.event.split("FB_").pop();let r="FB_event",n=i,o=i;switch(i){case"PayIn1Depo0":n="PayIn1",o="Balance0";break;case"PayIn2Depo0":n="PayIn2",o="PayIn2";break;case"OpenDemoAccount":n="Demo",o="First";break;case"CompleteRegistration":(0,k.Zs)("test_reg_http"),a="track",r="register",n="register",o="register";break;case"DemoIncrease":n="Demo",o="Increase";break;case"TraderConversion":n="Trader",o="FirstDepo";break;case"VIPConversion":n="Trader",o="VIP";break;case"DemoDeal5":n="Demo",o="5Plus"}if("CompleteRegistration"!==i&&"Purchase"!==i||!fbq||fbq(a,s.event,C()(C()({},s.params||{}),{},{action_source:"website",event_source_url:window.location.href})),"Purchase"===i){const a=s.params.operation_id?s.params.operation_id:0,i=e.id?e.id:0,r=s.params.value?s.params.value:0;(0,k.dJ)().then((()=>{dataLayer.push({ecommerce:{purchase:{actionField:{id:a,affiliation:"OLYMP",revenue:r,currency:"USD"},products:[{name:"DEPOSIT",sku:i,id:a,price:r,category:"OLYMP_DEPOSIT",quantity:1}]}},event:"ecommerce"})}))}else(0,k.dJ)().then((()=>{dataLayer.push({event:"uaEvents",eventCategory:r,eventAction:n,eventLabel:o})}));N(s.event,s.params,{country:e.geo}),R(s.event,s.params,{ref_channel:""},{tr:"caab3d2cf0c935d2fd12f9835760e7e0c6934358863072ecd604b840cd7bb849",mv:"1c27c87f3c2033bac96f6744c8fcf68537a2e729e36833f976bd1a48601d316a",g:"896c6138f1de005d00cb39627476b8bb21a6e527690a39787fbf24fddc2717f4",fb:"1f449791d31494cb6ba87e3dc1b596c1ab1de0480fc49c058eac908d1ab0c7a6",affiliate:"734b373dbe30fa37aab839a95b7c5280531c155a3b1ba6b27a20c9d72fb1fd72",olymp:"f7e526dba6f81422320e5fdcdf75eb4266ef0695d18c4d2a40a37a2aad54c120"})}))}catch(e){window.location.href}}function O(e){(0,k.dJ)().then((()=>{const a={bo:"binary",fx:"forex"},s=a[e]||a.bo;let i=null;const r=setInterval((()=>{try{const e=function(){let e=null,a=null;return dataLayer.forEach((s=>(s&&s.event&&"cd3_ready"===s.event&&s["gtm.uniqueEventId"]>e&&(e=s["gtm.uniqueEventId"],a=s.cd3),a))),a}();let a,n,o;if(window.ga&&window.ga.getAll){const e=window.ga.getAll()[0];a=e.get("clientId"),n=e.get("language")}else a=function(e){const a="".concat(e,"=");let s=null;return document.cookie.split(";").every((e=>{for(;" "===e.charAt(0)&&e;)e=e.substring(1,e.length);return 0!==e.indexOf(a)||(s=e.substring(a.length,e.length),!1)})),s}("_ga").replace(/^.*\.([^.]+\.[^.]+)$/,"$1"),n=navigator.language.toLocaleLowerCase(),a&&(clearInterval(r),o=!0);(e!==i&&a&&n||o)&&(i=e,w.$.statsTracking({ga_cid:a,ga_session_id:i||(0,k.MQ)(),ga_lang:n,project:s}))}catch(e){clearInterval(r),window.location.href}}),3e3)}))}var L=s(63519),M=s(33801),P=s(65990),x=s(57855);function F(){let e={fx:!1,bo:!1,spt:!1,fx_classic:!1};try{const a=(0,x.Ve)(P.d.AVAILABLE_PROJECTS);a&&(e=JSON.parse(a))}catch(e){}return e}var B=s(4226),Z=s(43345),U=s(55953),H=s(37323),G=s(7581),V=s(38702),W=s(67076);const j=[W.Xe.ANALYTICS,W.Xe.AVATAR,W.Xe.DATA,W.Xe.DUO_AUTH_STATE,W.Xe.POLITICS,W.Xe.MARKETPLACE,W.Xe.SERVICE_LEVELS,W.Xe.SESSION,W.Xe.SOUND_PACKS,W.Xe.KYC_VERIFICATION,W.Xe.STORIES_V3,W.Xe.ONBOARDING_STATE,W.Xe.DEPOSIT_MOTIVATION,W.Xe.PAYMENT_PRESETS,W.Xe.PROFITABILITY,W.Xe.PROMO,W.Xe.RESTRICTIONS,W.Xe.OPTIONS,W.Xe.REFILL],z=[W.ns.ACCOUNTS,W.ns.ACCOUNTS_CURRENCIES,W.ns.DEALS,W.ns.PAIRS,W.ns.PAIRS_DEFAULT,W.ns.PAIRS_GROUPS],q=[W.H_.ACCOUNTS,W.H_.ACCOUNTS_CURRENCIES,W.H_.DEALS,W.H_.PAIRS,W.H_.PAIRS_DEFAULT,W.H_.PAIRS_GROUPS],K=[W.Q3.ACCOUNTS,W.Q3.ACCOUNTS_CURRENCIES,W.Q3.PAIRS,W.Q3.PAIRS_GROUPS,W.Q3.PAIRS_DEFAULT];var Y=s(4780),X=s(13349);const J={[h.Fw.BINARY]:z,[h.Fw.FOREX]:q,[h.Fw.STOCKS]:K};function Q(e){return e&&"status"in e&&401===e.status}class HttpClient{static replaceKeysByCurrentProject(e){return Y.B.getParamsFromUrl(window.location.search).project===h.Fw.STOCKS?e.map((e=>"deposit_motivation"===e?"spt_deposit_motivation":e)):e}getPlatformValues(){return w.$.platformValues(["client_apps","country_data","current_locale","denied_operations","locales","magic_hour","projects","reg_currencies","support_chat","time_frames","captcha_requirements","auth_messengers","oauth_networks"])}userValuesRequest(e){arguments.length>1&&void 0!==arguments[1]||h.Fw.OTP;return new Promise(((a,s)=>{w.$.userValues((0,G.Z)(e)).then((e=>{a(e)})).catch((e=>{Q(e)&&(0,V.YY)(),s(e)}))}))}getAccounts(){return new Promise((e=>{w.$.getAccounts().then((a=>e(a))).catch((()=>e([])))}))}load(e,a){var s=this;return(0,i.Z)((function*(){const i=[];let n,o,l=[];if(a){l=yield s.getAccounts(),o=e;Object.keys(o).find((e=>o[e]))||(n=yield s.getPlatformValues(),o=(0,X.y)(n.projects&&n.projects.projects));const a=Object.keys(J),r=HttpClient.replaceKeysByCurrentProject(a.reduce(((e,a)=>o[a]?e.concat(J[a]):e),Array.from(j)));i.push(s.userValuesRequest(r).catch((e=>{if(Q(e))return{};throw e})))}i.unshift(n?Promise.resolve(n):s.getPlatformValues());const c=(0,r.Z)(yield Promise.all(i),2),d=c[0],u=void 0===d?{}:d,m=c[1],p={platformValues:u,userValues:void 0===m?{}:m,accounts:l};if(a&&!n){const a=(0,X.y)(p.platformValues.projects&&p.platformValues.projects.projects),i=[];for(const s in a)a[s]&&!e[s]&&J[s]&&i.push(...J[s]);i.length&&(p.userValues=(0,H.Z)({},p.userValues,yield s.userValuesRequest(i)))}return p}))()}}var $=s(64356),ee=s(24459),te=s(69396),ae=s(14090),se=s(38429),ie=s(89288),re=s(46315);function ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,a)=>(e[a.id]=b({},a),e)),{})}function oe(e){return"string"==typeof e?"true"===e:Boolean(e)}var le=s(27967),ce=s(61075);const de="doto";var ue=s(3789),me=s(61564),pe=s(24071),he=s(4601);const ve=e=>-1!==["ru","ua","kg","kz","by","uz","tj","tm","az","md","am"].indexOf(e);var ge=s(35377);var _e=s(15861);function fe(e,a,s){const i=(0,se.Z)(e,((e,i)=>{e.push(s(i,a))}),[]);return(0,ae.Z)(i,(e=>"CryptoIndex"===e.id)),i}function Ee(e){return e.platform_theme||(e.platform_theme=ge.si.DARK),e}function Se(e,a){return e&&a&&a.amounts&&a.amounts[e]||{}}function ye(e){let a=e.platformValues,s=e.userValues,i=e.accounts;var r,n;const o=s||{},l=o.ftt_deals,c=o.ftt_pairs,d=o.ftt_pairs_default,u=o.fx_deals,p=o.fx_pairs,h=o.fx_pairs_default,v=o.options,g=void 0===v?{}:v,f=(0,ee.Z)(o,["ftt_deals","ftt_pairs","ftt_pairs_default","fx_deals","fx_pairs","fx_pairs_default","options"]),E=null!=l?l:{},S=null!=c?c:[];var y;const b=null!==(y=null==d?void 0:d.id)&&void 0!==y?y:le.d,C=null!=u?u:{},T=null!=p?p:[];var A;const k=null!==(A=null==h?void 0:h.id)&&void 0!==A?A:le.d,w=function(e){return e.length?e[0].currency:null}(i),N=Se(w,E),R=Se(w,C),I=N.default,D=void 0===I?0:I,O=R.default,L=void 0===O?0:O;let M=!1;"error"in f&&f.error&&((0,V.YY)(),M=!0);const P=(0,H.Z)({},a,f),x=(0,te.Z)(P,"spt_pairs")||[],F=(0,te.Z)(P,"spt_pairs_default",{id:ce.R}),B=(null==F?void 0:F.id)||(null===(r=x.find((e=>!e.locked&&!e.locked_trading)))||void 0===r?void 0:r.id)||(null===(n=x[0])||void 0===n?void 0:n.id)||"EURUSD",Z=(null==S?void 0:S.length)||(null==T?void 0:T.length)||(null==x?void 0:x.length),G=(0,te.Z)(P,"locales",[]),j=(0,te.Z)(P,"current_locale","")||window.navigator.language.replace("-","_")||G.length&&G[0],z=Ee(g),q=!!(0,te.Z)(P,"data.is_user_our_company",!1),K=Z?(0,re.n)(b,S):le.d,Y=Z?(0,re.n)(k,T):le.d,J=Z?(0,re.n)(B,x):ce.R,Q=(0,te.Z)(P,"politics",{});"olymp"===de?(Q.pay_in_upe_bonuses=!1,Q.ent_tournaments_nav_tab_enabled=!1):Q.ent_tournaments_nav_tab_enabled=!0;const ae=new he.Z(z),se=(0,te.Z)(P,"data.registration_country","").toLowerCase(),ge=(0,te.Z)(P,"country_data.code","").toLowerCase(),ye=(0,m.t)(j),be=function(e){let a=!1;const s=(0,te.Z)(e,"magic_hour");return s&&(a={start_time:s.start,end_time:s.end}),a}(P),Ce=(0,te.Z)(P,"client_apps",null),Te=fe(S,le.d,pe.jT.parse),Ae=fe(T,le.d,pe.yT.parse),ke=fe(x,le.d,pe.X3.parse),we=ne(Te),Ne=ne(Ae),Re=ne(ke),Ie=(0,te.Z)(P,"accounts_currencies")||{list:[]},De=(0,te.Z)(P,"time_frames",null),Oe=(0,te.Z)(P,"data.registration_timestamp",0);var Le,Me,Pe,xe;return(0,$.Z)((0,H.Z)({},(0,X.m)(P.projects,{})),{allowSubscribeCards:Q[ue.Z.ONE_CLICK_ON],accounts:i,accountsCurrenciesList:[...Ie.list],accountId:(Pe=void 0,xe=ie.P.getAccountId(),null!=xe?xe:Pe),arenaId:(0,te.Z)(P,"money_group.arena_id",null),avatarSmall:(0,te.Z)(P,"avatar.small.url",!1),balance:(0,te.Z)(P,"balance.real.amount",0),balanceBonus:(0,te.Z)(P,"balance.real.amount_bonus",0),balanceDemo:(0,te.Z)(P,"balance.demo.amount",0),balanceHold:(0,te.Z)(P,"balance.real.hold_deal",0)+(0,te.Z)(P,"balance.real.hold_payout",0),balancePayoutAmount:(0,te.Z)(P,"balance.real.amount_payout",0),balanceVirtual:(0,te.Z)(P,"balance.virtual",0),clientApps:Ce,country:se,currencyDefault:(0,te.Z)(P,"data.currency",""),currencyLet:(0,_.Y1)((0,te.Z)(P,"data.currency","")),currencyList:(0,te.Z)(P,"reg_currencies.possible",[]),currenciesInfo:(0,te.Z)(P,"reg_currencies.info",[]),currencyName:(0,te.Z)(P,"data.currency",""),currentSupportChat:(0,_e.c)((0,te.Z)(P,"support_chat",[])),dealDurationList:(0,te.Z)(E,"durations",[]),dealSum:D,dealSumFx:L,dealsBo:E,dealsFx:C,demo:!1,deniedOperations:(0,te.Z)(P,"denied_operations",[]),duoAuthType:(0,te.Z)(P,"duo_auth_state.type",""),duoAuthEnabled:oe((0,te.Z)(P,"duo_auth_state.enabled",!1)),kyc:(0,te.Z)(P,"kyc_verification",null),email:(0,te.Z)(P,"data.email",""),emailConfirmed:(0,te.Z)(P,"data.email_confirmed",!1),errorUnregistered:M,facebook:(0,te.Z)(P,"analytics",void 0),geo:ge,guest:!(0,te.Z)(P,"data.id",0),id:(0,te.Z)(P,"data.id","").toString(),isAuthorized:Boolean((0,te.Z)(P,"data.id","")),isDealCategoryVisible:!1,isIslamic:Boolean((0,te.Z)(P,"data.is_islamic","")),isSng:ve(ge),isSngRegistration:ve(se),lang:ye,langFull:j,langs:G,locale:j,magicHour:be,marketplace:(0,te.Z)(P,"marketplace",null),name:(0,te.Z)(P,"data.name",""),options:z,ourCompany:q,page:(0,U.fx)(),pairsBo:S,pairsFx:T,pairsSpt:x,pairCollectionBo:Te,pairCollectionFx:Ae,pairDefaultBo:K,pairDefaultFx:Y,pairDefaultSpt:J,pairsHashBo:we,pairsHashFx:Ne,pairsHashSpt:Re,pairsGroupsBo:(0,te.Z)(P,"ftt_pairs_groups",[]),pairsGroupsFx:(0,te.Z)(P,"fx_pairs_groups",[]),pairsGroupsSpt:(0,te.Z)(P,"spt_pairs_groups",[]),paymentPresets:null!==(Le=(0,te.Z)(P,W.Xe.PAYMENT_PRESETS,{}))&&void 0!==Le?Le:{},phone:(0,te.Z)(P,"data.phone",""),phoneConfirmed:oe((0,te.Z)(P,"data.phone_confirmed",!1)),politics:Q,promo:(0,te.Z)(P,W.Xe.PROMO,{preset:{},promocodes:[]}),rateCollection:(0,me.Z)(De),refBalance:0,regDate:Oe,restrictions:(0,te.Z)(P,"restrictions",[]),soundPacks:(0,te.Z)(P,"sound_packs"),serviceLevels:(0,te.Z)(P,"service_levels"),sex:(0,te.Z)(P,"data.sex",""),stories_v3:(0,te.Z)(P,"stories_v3",[]),surname:(0,te.Z)(P,"data.surname",""),tradeFrames:(Me=z.trade_frames,(Me?JSON.parse(Me):[])||[]),tradeSessionCloseTime:"object"==typeof be?be.start_time:0,userOptions:ae,vote:(0,te.Z)(P,"vote",!1),onboardingState:(0,te.Z)(P,"onboarding_state",[]),depositMotivation:(0,te.Z)(P,"deposit_motivation",{scenarios:[]}),timeFrames:(0,te.Z)(P,"time_frames",null),profitability:(0,te.Z)(P,"profitability",null),refill:(0,te.Z)(P,"refill",null),captchaRequirements:(0,te.Z)(P,"captcha_requirements",null)})}let be=class AppService{setOption(e,a){var s;return null===(s=this.userOptions)||void 0===s?void 0:s.set(e,a)}getOption(e){var a;return null===(a=this.userOptions)||void 0===a?void 0:a.get(e)}delOption(e){var a;return null===(a=this.userOptions)||void 0===a?void 0:a.del(e)}setCookieCache(e,a,s){this.setCache(e,a,s,"cookie")}getCookieCache(e,a){return this.getCache(e,a,"cookie")}setObjectCache(e,a,s){this.setCache(e,a,s)}getObjectCache(e,a){return this.getCache(e,a)}setState(e){Object.keys(e).forEach((a=>{void 0!==this[a]&&(this[a]=e[a])}))}onStart(){var e=this;return(0,i.Z)((function*(){return Promise.all([e.httpClient.load(F(),new RegExp(p.Z.AUTH).test(e.page||"")||new RegExp(p.Z.PLATFORM).test(e.page||"")),M.C.load(),d]).then((a=>{const s=ye((0,r.Z)(a,1)[0]);var i;if(e.setState(s),i=e.availableProjects,(0,x.XV)(P.d.AVAILABLE_PROJECTS,i),e.isStateLoaded=s,(!(0,_.vp)()||e.page===p.Z.EDUCATION)&&(0,u.y)("production")){(0,L.Z)(e.id,h.Fw.BINARY);const a=e.defaultProject||h.Fw.BINARY;(a===h.Fw.FOREX?D:I)(s),O(a)}})).catch((a=>{if(e.page!==p.Z.AUTH)throw a}))}))()}setCache(e,a,s,i){if(void 0===s&&"object"===i||!e||void 0===a)console.warn("AppService setCache wrong attributes, ".concat(s,", ").concat(e,", ").concat(a," ,").concat(i));else{const r=s?"".concat(s,"_").concat(e):e;"cookie"===i?this.cookieCache.set(r,a):this.objectCache.set(r,a)}}getCache(e,a,s){let i;if(void 0===a&&"object"===s||!e)console.warn("AppService getCache wrong arrtibutes, ".concat(a,", ").concat(e,",").concat(s));else{const r=a?"".concat(a,"_").concat(e):e;i="cookie"===s?this.cookieCache.get(r):this.objectCache.get(r)}return i}getPolitic(e){return this.politics[e]}getDefaultProject(){return this.defaultProject}constructor(){this.api={getPolitic:this.getPolitic,setOption:this.setOption,getOption:this.getOption,delOption:this.delOption,setCookieCache:this.setCookieCache,getCookieCache:this.getCookieCache,setObjectCache:this.setObjectCache,getObjectCache:this.getObjectCache},this.page=(0,U.fx)(),this.supportPhones=null,this.availableRateSizes=[1,3,5,6,10,12,15,20,30,60,120,180,240,300,360,600,720,900,1200,1800,3600,14400,86400,604800,2419200],this.accountId=null,this.accounts=null,this.accountsCurrenciesList=[],this.allowSubscribeCards=null,this.arenaId=null,this.availableProjects={fx:!1,bo:!1,spt:!1},this.avatarSmall=null,this.balance=0,this.balanceBonus=0,this.balanceBonusCant=0,this.balanceDemo=0,this.balanceHold=0,this.balancePayoutAmount=0,this.balanceVirtual=[],this.bonusAlarm=null,this.clientApps=null,this.cookieCache=new y({target:"cookie"}),this.country=null,this.currencyDef="rub",this.currencyDefault=null,this.currencyLet="₽",this.currencyList=["usd","eur","rub"],this.currencyName="rub",this.dealCategory=Z.TP.DIGITAL,this.dealDurationList=null,this.dealSum=null,this.dealSumFx=null,this.dealSumStep=null,this.dealSumStepFx=null,this.dealsBo={},this.dealsFx={},this.dealTurboPeriods=[2,3,4,5,6,15,30,45,60,75,90,105,120],this.defaultProject=h.Fw.BINARY,this.deniedOperations=[],this.duoAuthType="",this.duoAuthEnabled=!1,this.kyc=null,this.email=null,this.emailConfirmed=!1,this.ENV=null,this.geo=null,this.guest=!0,this.id=null,this.isAuthorized=!1,this.isIslamic=!1,this.isSng=null,this.isSngRegistration=null,this.lang=(0,m.t)(v.ZW),this.locale=v.ZW,this.langFull=v.ZW,this.langs=[],this.magicHour=null,this.marketplace=null,this.name=null,this.notices=null,this.objectCache=new y({target:"object"}),this.options=null,this.ourCompany=!1,this.pairDefaultBo=null,this.pairDefaultFx=null,this.pairsBo=null,this.pairsFx=null,this.pairsSpt=null,this.pairsHashBo=null,this.pairsHashFx=null,this.pairsHashSpt=null,this.pairDefaultSpt=null,this.password=null,this.paymentPresets=null,this.payoutDate=null,this.payoutMax=0,this.payoutMin=0,this.phone=null,this.phoneConfirmed=!1,this.politics={},this.promo={},this.restrictions=[],this.rateCollection=null,this.refBalance=null,this.referAttr=null,this.refPartners=null,this.regAllow=null,this.regDate=null,this.rules=!1,this.serviceLevels=null,this.sex="male",this.soundPacks=null,this.stories_v3=[],this.surname=null,this.tournaments=null,this.tradeFrames=[],this.tradeSessionCloseTime=Math.floor((new Date).getTime()/1e3)+10800,this.turboReservedTime=60,this.userOptions=null,this.vote=null,this.onboardingState=[],this.depositMotivation={scenarios:[]},this.currenciesInfo=[],this.profitability=null,this.patronymic=null,this.timeFrames=null,this.supportEmails=null,this.pairsGroupsBo=[],this.pairsGroupsFx=[],this.pairsGroupsSpt=[],this.captchaRequirements=null,this.refill=null,this.demo=!0,this.isDealCategoryVisible=!0,this.isDemoOnly=!0,this.isStateLoaded=null,this.moneyGroup="demo",this.currentSupportChat=null,this.httpClient=new HttpClient,window.gaStats||(window.gaStats={}),window.gaStats.gaPlatformStart=performance.now()}};(0,n.gn)([o.observable],be.prototype,"demo",void 0),(0,n.gn)([o.observable],be.prototype,"isDealCategoryVisible",void 0),(0,n.gn)([o.observable],be.prototype,"isDemoOnly",void 0),(0,n.gn)([o.observable],be.prototype,"isStateLoaded",void 0),(0,n.gn)([o.observable],be.prototype,"moneyGroup",void 0),(0,n.gn)([o.observable],be.prototype,"currentSupportChat",void 0),be=(0,n.gn)([(0,l.bindAs)(g.APP_SERVICE)],be);const Ce=(0,l.ServiceConnector)(new be,{initialState:null,binder:B.Z.binder,config:{bindAs:g.APP_SERVICE}})},13349:(e,a,s)=>{"use strict";s.d(a,{m:()=>o,y:()=>r});var i=s(37323);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={bo:!1,fx:!1,spt:!1};return(0,i.Z)({},e.reduce(((e,a)=>(e[a.name]=Boolean(a.login_allow),e)),s),a)}const n=e=>Boolean(e.find((e=>e.reg_allow))),o=(e,a)=>{let s=e.default,i=e.projects;return{availableProjects:r(i,a),regAllow:n(i),defaultProject:s}}},15861:(e,a,s)=>{"use strict";s.d(a,{c:()=>r});var i=s(66713);function r(e){const a=e.find((e=>e.project===i.yy));return a?{project:a.project,chatId:a.chat_id,activeChat:a.active_chat}:null}},508:(e,a,s)=>{"use strict";s.d(a,{O:()=>CandleModel});class CandleModel{static parseDealDetails(e){return{close:e.close,max:e.high,min:e.low,open:e.open,Date:1e3*e.time,quotes:[]}}static parse(e){return{close:e.close,max:e.high,min:e.low,open:e.open,Date:1e3*e.t,quotes:[]}}}},45223:(e,a,s)=>{"use strict";s.d(a,{G:()=>CandleResponseModel});var i=s(27076),r=s(18377),n=s(508);class CandleResponseModel{static parse(e){const a=Array.isArray(e)?(0,i.Z)(e):e;return{pair:a.p||"",size:a.tf,candles:a.candles?a.candles.map(n.O.parse):[],quotes:a.quotes?a.quotes.map(r.k.parse):[]}}}},76731:(e,a,s)=>{"use strict";s.d(a,{L:()=>g});var i=s(29257),r=s(37323),n=s(64356),o=s(59312),l=s(60521),c=s(28660),d=s(26763),u=s(33795),m=s(68045),p=s(13531),h=s(45223),v=s(55880);let g=class CandleService{get lastHistoryRate(){return this.lastCandle?this.lastCandle.close:void 0}get connectionError(){return this.dsService.socket.serviceStatus===m.ti}get selectedRate(){return this.rateService.getRate(this.rateId||0)}onBind(e,a,s,i){this.tradeFrameService=e,this.rateService=a,this.timeService=s,this.tradeManagerService=i,this.dsService.onPush(((e,a)=>{this.isSubscribeAndHistory?this.saveLostRates(e,a):this.onPushProcessing(e,a)})).onRestore((()=>{this.connectionRestored=Date.now()})).onOpen((()=>{(0,l.runInAction)((()=>{this.socketOpened=!0}))}))}subscribe(e){return new Promise(((a,s)=>{this.dsService.socket.serviceStatus!==m.ox&&s("subscribeLite serviceStatus is not started"),this.pair&&this.pair!==e.id&&this.unsubscribe(this.pair),(this.expectedPairId===e.id||this.isSubscribedOnOtherFrame(e.id)||e.locked)&&a(null),this.expectedPairId=e.id,this.dsService.request(this.requestCandleSubscribe(e.id)).onResponse((()=>{if(this.expectedPairId!==e.id)throw s("this.expectedPairId is not equal to pair.id, ".concat(this.expectedPairId,", ").concat(e.id));this.pair=null,this.candles=null,this.lostRates=[],a(null)}))}))}subscribeAndHistory(e,a,s,n){var o=this;return(0,i.Z)((function*(){const i=o.rateService.getRate(a).step;return o.lastRequestedPair=e.id,yield o.waitForFinishPreviousSubscribers(e.id,i),o.isSubscribeAndHistory=!0,o.expectedRateSize=i,o.firstBit=0,new Promise(((l,c)=>{o.subscribe(e).then((()=>o.getLastCandles(e,i))).then((d=>{if(o.expectedRateSize!==d.size||o.expectedPairId!==d.pair)return void c("subscribeAndHistory rejected ".concat(o.expectedRateSize,"!=").concat(d.size," || ").concat(o.expectedPairId,"!=").concat(d.pair));o.lastCandle=(0,r.Z)({},d.candles[0]),o.lastQuote=d.quotes.length&&d.quotes[0].Date>=o.lastCandle.Date?(0,r.Z)({},d.quotes[0]):{Date:o.lastCandle.Date,q:o.lastCandle.close};!(!n||n+i>=o.serverTime)&&s&&n?o.getHistoryFromTo(e.id,i,s,n).then((s=>{o.lastCandle&&o.afterSubscribe(l,e.id,a,s,o.lastCandle)})):o.afterSubscribe(l,e.id,a,d,o.lastCandle)}))}))}))()}sendRequest(e){return this.socketClient.load(e).then((a=>(e.response=a,delete e.promise,e.response)))}unsubscribe(e){this.isSubscribedOnOtherFrame(e)||this.dsService.request(this.requestCandleUnsubscribe(e))}onStop(){this.pair&&this.unsubscribe(this.pair),this.dsService.clear()}onPushProcessing(e,a){switch(e){case this.eventsHash.SERVER_TIME_CHANGE:{const e=a[0];e&&e.pair===this.pair&&(this.setServerTime(e.st),this.tickTM(this.serverTime));break}case this.eventsHash.TICK_CHANGE:a.forEach((e=>{if(!this.test&&((0,u.YJ)(e),e.p===this.pair)){const a=this.quoteModel.parse(e);this.serverTime||this.setServerTime(Math.floor(a.Date/1e3)),this.tick(a)}}))}}tickTM(e){const a=this.lastQuote&&(0,p.Qw)(e,this.lastQuote.Date);this.rate&&this.lastQuote&&this.lastCandle&&a&&((0,p.Y2)(a)&&this.tick((0,n.Z)((0,r.Z)({},this.lastQuote),{heartbeat:!0,Date:1e3*(e-1)})),this.tick((0,n.Z)((0,r.Z)({},this.lastQuote),{heartbeat:!0,Date:1e3*e})))}tick(e){this.rate&&this.lastQuote&&e.Date>this.lastQuote.Date&&(this.ticksBuffer.add(e),this.addTick=e,1===this.rate?this.tickForTickChart(e):this.tickForCandleChart(e),this.lastQuote=e)}tickForTickChart(e){this.lastCandle=(0,p.Ik)(e.q,e.Date)}tickForCandleChart(e){if(this.lastQuote&&this.rate&&this.lastCandle){const a=(0,p._h)(this.rate,(0,p.eU)(e.Date)/1e3,this.lastCandle.Date,e.q,e.heartbeat);a.length?a.forEach((e=>{this.lastCandle=(0,r.Z)({},e),this.addData=e})):((0,p.XO)(e,this.lastCandle),this.updateData=(0,l.toJS)(this.lastCandle))}}saveLostRates(e,a){if(e===this.eventsHash.SERVER_TIME_CHANGE&&(!this.firstBit&&a.length&&"st"in a[0]&&a[0].pair===this.expectedPairId&&(this.firstBit=a[0].st),this.lostRates.push({type:e,data:a})),e===this.eventsHash.TICK_CHANGE){const s=[];a.forEach((e=>{"p"in e&&("q"in e||"m"in e)&&e.p===this.expectedPairId&&s.push(e)})),s.length&&this.lostRates.push({type:e,data:s})}}lostRatesProcessing(){this.lostRates.length&&(this.lostRates.forEach((e=>{e.type===this.eventsHash.SERVER_TIME_CHANGE&&e.data.length&&"st"in e.data[0]?(!this.serverTime||e.data[0].st>=this.serverTime)&&this.onPushProcessing(e.type,e.data):this.onPushProcessing(e.type,e.data)})),this.lostRates=[])}isSubscribedOnOtherFrame(e){const a=this.tradeManagerService.getActivesFrames(e,this.tradeFrameService.initialSettings.project);return!!a.length&&a.some((a=>{const s=a.serviceInterface;if(!s||!s.binder)return!1;const i=s.binder.getService(d.CANDLE_SERVICE);return!(!i||i===this)&&i.pair===e}))}afterSubscribe(e,a,s,i,r){const n=i.quotes.slice(),o=i.candles.slice();e({rawCandles:o,rawTicks:(0,p.pl)(i.size,n,o),lastCandle:r}),this.pair=a,this.candles=i.candles,this.rate=i.size,this.rateId=s,setTimeout((()=>{this.isSubscribeAndHistory=!1,this.lostRatesProcessing(),this.expectedPairId=null}))}getLastCandles(e,a,s){var r=this;return(0,i.Z)((function*(){const i=e.locked?yield r.fetchServerTime():0,n=s||i||(yield r.waitFirstBit()),o={id:Date.now(),pair:e.id,size:a,to:n,solid:!0};return r.sendRequest(o)}))()}waitFirstBit(){return new Promise((e=>{this.firstBit?e(this.firstBit):(0,l.when)((()=>!!this.firstBit),(()=>{e(this.firstBit)}))}))}fetchServerTime(){return new Promise(((e,a)=>{this.dsService.request({event_name:this.eventsHash.SERVER_TIME_REQUEST}).onResponse((s=>{s&&s.length?e(s[0].st):a("st:request error")}))}))}getHistoryFromTo(e,a,s,i){const r=600*a,n=Math.ceil(i/r)*r;let o=n;const l=n-i>0?Math.ceil((n-i)/a):0;let c=Math.ceil((i-s)/a)+l;const d=[];let u=0;for(;c>0&&!(u>50);)d.push(this.sendRequest({pair:e,size:a,to:o})),c-=600,o-=600*a,u++;return d.length?Promise.all(d).then((s=>{const i=this.mergeHistoryFromToResponses(s.map((e=>e.candles))),r=this.mergeHistoryFromToResponses(s.map((e=>e.quotes)));return Promise.resolve({size:a,pair:e,candles:i,quotes:r})})):Promise.reject()}mergeHistoryFromToResponses(e){const a=[];let s=!1,i=0;return e.forEach((e=>{if(e&&e.length){if(i)for(let s=0,r=e.length;s<r;s++){if(e[s].Date<i){Array.prototype.push.apply(a,e.slice(s,e.length)),i=0;break}}else Array.prototype.push.apply(a,e);s||(s=!0,i=e[e.length-1].Date)}})),a}requestCandleSubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tradeFrameService.selectedPair.id;return{event_name:this.eventsHash.TICKS_SUBSCRIBE,data:[{pair:e}]}}requestCandleUnsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tradeFrameService.selectedPair.id;return{event_name:this.eventsHash.TICKS_UNSUBSCRIBE,data:[{pair:e}]}}setServerTime(e){e>this.serverTime&&(this.serverTime=e)}waitForFinishPreviousSubscribers(e,a){var s=this;return(0,i.Z)((function*(){return new Promise(((i,r)=>{if(s.isSubscribeAndHistory&&s.expectedRateSize===a&&(null===s.expectedPairId||s.expectedPairId===e))return r(new Error("Repeated subscribeAndHistory call"));(0,l.when)((()=>!s.isSubscribeAndHistory),(()=>{e===s.lastRequestedPair?i(null):r(new Error("Rejected after too fast request"))}))}))}))()}constructor(e,a,s,i){this.SocketClient=i,this.candles=null,this.rawCandles=l.observable.array([],{deep:!1}),this.rawTicks=l.observable.array([],{deep:!1}),this.ticksBuffer=new v.e(1),this.test=!1,this.lostRates=[],this.expectedPairId=null,this.expectedRateSize=null,this.lastRequestedPair=null,this.isSubscribeAndHistory=!1,this.socketOpened=!1,this.pair=null,this.rate=null,this.rateId=null,this.uuid=null,this.serverTime=0,this.connectionRestored=0,this.firstBit=0,this.dsService=e.add(),this.dsServiceHistory=e.add(),this.dsServiceHistory.onPush((()=>{})),this.socketClient=new i(this.dsServiceHistory,h.G.parse,a),this.eventsHash=a,this.quoteModel=s}};(0,o.gn)([l.observable],g.prototype,"lastRequestedPair",void 0),(0,o.gn)([l.observable],g.prototype,"isSubscribeAndHistory",void 0),(0,o.gn)([l.observable],g.prototype,"socketOpened",void 0),(0,o.gn)([l.observable],g.prototype,"pair",void 0),(0,o.gn)([l.observable],g.prototype,"rate",void 0),(0,o.gn)([l.observable],g.prototype,"rateId",void 0),(0,o.gn)([l.observable],g.prototype,"uuid",void 0),(0,o.gn)([l.observable],g.prototype,"serverTime",void 0),(0,o.gn)([l.observable],g.prototype,"lastCandle",void 0),(0,o.gn)([l.observable],g.prototype,"addData",void 0),(0,o.gn)([l.observable],g.prototype,"updateData",void 0),(0,o.gn)([l.observable],g.prototype,"addTick",void 0),(0,o.gn)([l.observable],g.prototype,"connectionRestored",void 0),(0,o.gn)([l.observable],g.prototype,"firstBit",void 0),(0,o.gn)([l.computed],g.prototype,"lastHistoryRate",null),(0,o.gn)([l.computed],g.prototype,"connectionError",null),(0,o.gn)([l.computed],g.prototype,"selectedRate",null),(0,o.gn)([(0,c.onBind)(d.TRADE_FRAME_SERVICE,d.RATE_SERVICE,d.TIME_SERVICE,d.TRADE_MANAGER_SERVICE)],g.prototype,"onBind",null),(0,o.gn)([l.action],g.prototype,"subscribe",null),(0,o.gn)([l.action],g.prototype,"unsubscribe",null),(0,o.gn)([c.onStop],g.prototype,"onStop",null),g=(0,o.gn)([(0,c.bindAs)(d.CANDLE_SERVICE)],g)},18377:(e,a,s)=>{"use strict";s.d(a,{k:()=>QuoteModel});class QuoteModel{static parse(e){return{q:e.q,Date:1e3*e.t}}}},55880:(e,a,s)=>{"use strict";s.d(a,{e:()=>i});let i=class TicksBuffer{add(e){this.cutBuffer(),this.buffer=[e,...this.buffer]}get bufferArray(){return this.buffer}cutBuffer(){const e=(new Date).getTime(),a=this.buffer.slice(0,this.buffer.length-1),s=this.buffer[this.buffer.length-1];s&&(e-s.Date<1e3*this.capacity&&a.push(s),this.buffer=a)}constructor(e){let a=void 0===e?1:e;this.buffer=[],this.capacity=a}}},15492:(e,a,s)=>{"use strict";s.d(a,{C:()=>i});const i=1e3},65849:(e,a,s)=>{"use strict";s.d(a,{w:()=>SocketClientFtt});var i=s(62132);class SocketClientFtt{load(e){return i.W.request.fttCandlesHistory(this.requestCandleHistory(e)).then((e=>this.modelParser(e)))}requestCandleHistory(e){const a={pair:e.pair,size:e.size};return e.from&&(a.from=e.from),e.to&&(a.to=e.to),e.solid&&(a.solid=e.solid),a}constructor(e,a,s){this.modelParser=a}}},39023:(e,a,s)=>{"use strict";s.d(a,{w:()=>r});var i=s(86933);const r={CANDLE_CHANGE:i.U3.CANDLE_CHANGE,TICK_CHANGE:i.U3.TICK_CHANGE,CANDLE_SUBSCRIBE:i.U3.CANDLES_SUBSCRIBE,CANDLE_UNSUBSCRIBE:i.U3.CANDLES_UNSUBSCRIBE,CANDLES_HISTORY:i.U3.CANDLES_HISTORY,SERVER_TIME_CHANGE:i.U3.SERVER_TIME_CHANGE,SERVER_TIME_REQUEST:i.U3.SERVER_TIME_REQUEST,TICKS_SUBSCRIBE:i.U3.TICKS_SUBSCRIBE,TICKS_UNSUBSCRIBE:i.U3.TICKS_UNSUBSCRIBE}},64431:(e,a,s)=>{"use strict";s.d(a,{l:()=>SocketClientFx});var i=s(62132);class SocketClientFx{load(e){return i.W.request.fxCandlesHistory(this.requestCandleHistory(e)).then((e=>this.modelParser(e)))}requestCandleHistory(e){const a={pair:e.pair,size:e.size};return e.from&&(a.from=e.from),e.to&&(a.to=e.to),e.solid&&(a.solid=e.solid),a}constructor(e,a,s){this.modelParser=a}}},60293:(e,a,s)=>{"use strict";s.d(a,{r:()=>r});var i=s(86933);const r={CANDLE_CHANGE:i.y$.CANDLE_CHANGE,TICK_CHANGE:i.y$.TICK_CHANGE,CANDLE_SUBSCRIBE:i.y$.CANDLES_SUBSCRIBE,CANDLE_UNSUBSCRIBE:i.y$.CANDLES_UNSUBSCRIBE,CANDLES_HISTORY:i.y$.CANDLES_HISTORY,SERVER_TIME_CHANGE:i.y$.SERVER_TIME_CHANGE,SERVER_TIME_REQUEST:i.y$.SERVER_TIME_REQUEST,TICKS_SUBSCRIBE:i.y$.TICKS_SUBSCRIBE,TICKS_UNSUBSCRIBE:i.y$.TICKS_UNSUBSCRIBE}},59635:(e,a,s)=>{"use strict";s.d(a,{C_:()=>v.C,LF:()=>i.L,OJ:()=>p.O,R5:()=>u.R,YF:()=>c.Y,ZX:()=>m.Z,au:()=>d.a,kt:()=>h.k,lB:()=>o.l,rR:()=>l.r,we:()=>n.w,wi:()=>r.w});var i=s(76731),r=s(65849),n=s(39023),o=s(64431),l=s(60293),c=s(74646),d=s(87597),u=s(6838),m=s(26132),p=s(508),h=s(18377),v=s(15492)},87597:(e,a,s)=>{"use strict";s.d(a,{a:()=>CandleServiceSpt});var i=s(59312),r=s(60521),n=s(76731);class CandleServiceSpt extends n.L{processTick(e){this.lastTick={ask:e.a,bid:e.b,mid:e.m}}subscribe(e){return this.lastTick=void 0,super.subscribe(e)}}(0,i.gn)([r.observable],CandleServiceSpt.prototype,"lastTick",void 0),(0,i.gn)([r.action],CandleServiceSpt.prototype,"processTick",null)},74646:(e,a,s)=>{"use strict";s.d(a,{Y:()=>i});const i={parse:e=>({q:e.m,Date:1e3*e.t})}},6838:(e,a,s)=>{"use strict";s.d(a,{R:()=>SocketClientSpt});var i=s(62132);class SocketClientSpt{load(e){return i.W.request.sptCandlesHistory(this.requestCandleHistory(e)).then((e=>this.modelParser(e)))}requestCandleHistory(e){const a={pair:e.pair,size:e.size};return e.from&&(a.from=e.from),e.to&&(a.to=e.to),e.solid&&(a.solid=e.solid),a}constructor(e,a,s){this.modelParser=a}}},26132:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var i=s(86933);const r={CANDLE_CHANGE:i.F$.CANDLE_CHANGE,TICK_CHANGE:i.F$.TICK_CHANGE,CANDLE_SUBSCRIBE:i.F$.CANDLES_SUBSCRIBE,CANDLE_UNSUBSCRIBE:i.F$.CANDLES_UNSUBSCRIBE,CANDLES_HISTORY:i.F$.CANDLES_HISTORY,SERVER_TIME_CHANGE:i.F$.SERVER_TIME_CHANGE,SERVER_TIME_REQUEST:i.F$.SERVER_TIME_REQUEST,TICKS_SUBSCRIBE:i.F$.TICKS_SUBSCRIBE,TICKS_UNSUBSCRIBE:i.F$.TICKS_UNSUBSCRIBE}},13531:(e,a,s)=>{"use strict";s.d(a,{Ik:()=>r,PR:()=>c,Qw:()=>p,XO:()=>l,Y2:()=>h,_h:()=>o,eU:()=>n,kO:()=>m,kY:()=>d,pl:()=>u});var i=s(59635);const r=(e,a)=>({close:e,max:e,min:e,open:e,Date:a,quotes:[]}),n=e=>e-new Date(e).getMilliseconds(),o=(e,a,s,i,o)=>{const l=[],c=1e3*e,d=1e3*a,u=d-s,m=n(s);for(let e=1,a=Math.floor(u/c)+1;e<a;e++){const a=m+e*c;(!o||d-a>=1e3)&&l.push(r(i,a))}return l},l=(e,a)=>{a.max=Math.max(e.q,a.max),a.min=Math.min(e.q,a.min),a.close=e.q,a.quotes.push(e)},c=(e,a)=>{const s=e.length,i=[];if(s){const r=2*a-1;let n,o=0,l=e[o++].Date;for(;o<s;o++)n=e[o].Date,n-l>r&&i.push([l+a,n]),l=n}return i};function d(e,a,s){return e>=a.Date&&(!s||e<s.Date)}function u(e,a,s){const i=[];let r=0;return s.forEach((s=>{const n=[],o=s.Date+1e3*e;for(let e=r,i=a.length;e<i;e++){const i=a[e];if(s.Date<=i.Date&&i.Date<o)n.push(i);else if(i.Date<s.Date){r=e;break}}n.length?i.push(...n):i.push({Date:s.Date,q:s.close})})),i}function m(e,a,s){const i=[...s];let r=i[0];const n=[];for(let s=0;s<a.length;s++){const i=a[s];if(!(i.Date>=r.Date+1e3*e))break;n.unshift(i)}return n.forEach((a=>{a.Date>=r.Date+1e3*e&&(r=((e,a)=>({close:e.q,max:e.q,min:e.q,open:e.q,Date:a,quotes:[e]}))(a,r.Date+1e3*e),i.unshift(r))})),i}const p=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.C_;const r=1e3*e-a;return r>=s?r:0},h=e=>e-i.C_>0},37363:(e,a,s)=>{"use strict";s.d(a,{EH:()=>g,k9:()=>p});var i=s(59312),r=s(60521),n=s(28660),o=s(26763),l=s(89215),c=s(86933),d=s(30654);function u(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.some((a=>e>=a.from&&e<=a.to))}var m=s(80969);const p={NON_FARM:"nonFarm"};class ChartNewsNoticeModel extends m.Z{parse(e){return e&&e.non_farm?{id:e.id,time:1e3*e.publication_date,title:"NON-FARM",text:e.title,type:p.NON_FARM}:null}}const h=new ChartNewsNoticeModel;class ChartNewsModel extends m.Z{parse(e,a){const s=e.translates&&e.translates.title;return{id:String(e.id),time:1e3*e.publication_at,title:"NON-FARM",text:s&&(s[a]||s.en_US)||e.title,type:p.NON_FARM}}}const v=new ChartNewsModel;let g=class ChartNewsService{get chartNewsCollection(){return this.newsCollection.models}onBind(e){this.languageService=e}addNews(e){Array.isArray(e)&&0!==e.length&&this.newsCollection.update(e,{remove:!1})}removeNews(e){Array.isArray(e)&&0!==e.length&&this.newsCollection.remove(e)}fetch(e){const a=function(e,a){if(!e||!e.from||!e.to||e.from>e.to)return;const s=new Date(e.from);s.setDate(1),s.setHours(0,0,0,0);const i={is_non_farm:!0,from:0,to:0};do{u(Number(s)/1e3,a)||(i.from||(i.from=Number(s)/1e3),i.to=(Number(new Date(s.getFullYear(),s.getMonth()+1,1))-1e3)/1e3),s.setMonth(s.getMonth()+1)}while(Number(s)<=e.to);return i}(e,this.requestsCache);return a&&a.from&&a.to?(this.requestsCache.push(a),d.$.getCurrencyNews(a).then((e=>{if(!e||!e.length||!e.map)return[];const a=e.map((e=>v.parse(e,this.languageService.langFull)));return this.addNews(a),a})).catch((()=>(this.requestsCache=this.requestsCache.filter((e=>a.from!==e.from||a.to!==e.to)),[])))):Promise.resolve([])}onStop(){this.newsCollection&&this.newsCollection.removeAll(),this.dsService&&this.dsService.unSubscribe("push",this.onPushListener)}constructor(e){this.newsCollection=new l.F(void 0,{sort:"time"}),this.requestsCache=[],this.onPushListener=(e,a)=>{if(e===c.U3.NOTICE_SHOW){const e=a.reduce(((e,a)=>{if("news_currency"===a.name){const s=h.parse(a.model);s&&e.push(s)}return e}),[]);this.addNews(e)}},this.dsService=e.add(),this.dsService.onPush(this.onPushListener)}};(0,i.gn)([r.computed],g.prototype,"chartNewsCollection",null),(0,i.gn)([(0,n.onBind)(o.LANGUAGE_SERVICE)],g.prototype,"onBind",null),(0,i.gn)([n.onStop],g.prototype,"onStop",null),g=(0,i.gn)([(0,n.bindAs)(o.CHART_NEWS_SERVICE)],g)},32784:(e,a,s)=>{"use strict";var i=s(59312),r=s(28660),n=s(60521),o=s(26763),l=s(74262),c=s(96667),d=s(47731),u=s(25933),m=s(54857);let p=class DealCurrentServiceBo extends l.jq{onStart(e,a,s){this.accountService=a,this.appService=e,this.pairService=s,this.load(this.accountService.selectedAccount,this.accountService.accountsList,new m.F(this.pairService.pairCollection)),this.appService.availableProjects.bo&&(this.webSocket.onDealOpen(this.updateDeals),this.webSocket.onDealProceedMin(this.updateDealsMin),this.webSocket.onDealClose(this.closeDeals),this.webSocket.onRestore(this.restoreDeals),this.webSocket.subscribe().then((()=>{this.subscribeDealsChanges()})))}onBind(e,a){var s;this.noticeService=a,this.dealService=e,(null===(s=this.appService)||void 0===s?void 0:s.availableProjects.bo)&&this.initReactions()}onStop(){this.collection.reset([]),this.disposers.forEach((e=>{e()})),this.webSocket.unsubscribe()}initReactions(){this.disposers.push((0,n.reaction)((()=>this.accountService.selectedAccount),(e=>{this.updateAccount(e)})),(0,n.reaction)((()=>this.accountService.selectedAccount.id),(()=>{this.subscribeDealsChanges()})),(0,n.reaction)((()=>this.accountService.selectedAccount.sourceType),(()=>{this.unSubscribeDealsChanges()})),(0,n.reaction)((()=>this.dealService.lastOpenedDealRaw),(e=>{e&&this.updateDeals([e])})),(0,n.reaction)((()=>this.userSelectedDeal),(e=>{this.userDealType=e&&e.isTurbo?d.J.TURBO:d.J.BINARY})),(0,n.reaction)((()=>[...this.accountService.accountsList]),(e=>{this.createDealCollections(e)})))}subscribeDealsChanges(){this.accountService.isCommonAccount(this.accountService.selectedAccount)&&this.webSocket.subscribeDealsChanges(this.accountService.selectedAccount).then((e=>{this.updateDeals(e)}))}unSubscribeDealsChanges(){this.accountService.isCommonAccount(this.accountService.selectedAccount)||this.webSocket.unsubscribeDealsChanges()}restoreDeals(){this.subscribeDealsChanges(),this.webSocket.reconnectDeals(this.collection.models)}constructor(){super(new u.X(c.Z.add())),this.disposers=[],this.userDealType=d.J.BINARY,this.selectDeal=this.selectDeal.bind(this),this.restoreDeals=this.restoreDeals.bind(this)}};(0,i.gn)([n.observable],p.prototype,"userDealType",void 0),(0,i.gn)([(0,r.onStart)(o.APP_SERVICE,o.ACCOUNT_SERVICE,o.PAIR_SERVICE_BO)],p.prototype,"onStart",null),(0,i.gn)([(0,r.onBind)(o.DEAL_SERVICE_BO,o.NOTICE_SERVICE)],p.prototype,"onBind",null),(0,i.gn)([r.onStop],p.prototype,"onStop",null),p=(0,i.gn)([(0,r.bindAs)(o.DEAL_CURRENT_SERVICE_BO)],p)},25933:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(86933);class WebSocket{onRestore(e){this.restoreListener.push(e)}onDealOpen(e){this.listeners[i.U3.DEALS_OPEN]=e}onDealProceedMin(e){this.listeners[i.U3.DEALS_PROCEED_MIN]=e}onDealClose(e){this.listeners[i.U3.DEALS_CLOSED]=e}cancelDeal(e,a,s){return new Promise(((r,n)=>{this.connect.request({event_name:i.U3.DEALS_CANCELING,data_type:i.D3.DEAL_CLOSE,data:[{id:e,group:a,account_id:s}]}).onResponse(((e,a)=>{a?n(a):e.length&&r(e)}))}))}subscribeDealsChanges(e){return new Promise(((a,s)=>{this.connect.request({event_name:i.U3.DEALS_SUBSCRIBE,data:[{account_id:e.id,group:e.type}]}).onResponse(((e,i)=>{i?s(i):a(e)}))}))}unsubscribeDealsChanges(){this.connect.request({event_name:i.U3.DEALS_UNSUBSCRIBE})}unsubscribe(){this.connect.clear()}subscribe(){return new Promise((e=>{this.connect.onPush(((e,a)=>{e===i.U3.DEALS_OPEN?this.listeners[i.U3.DEALS_OPEN](a):e===i.U3.DEALS_CLOSED?this.listeners[i.U3.DEALS_CLOSED](a):e===i.U3.DEALS_PROCEED_MIN&&this.listeners[i.U3.DEALS_PROCEED_MIN](a)})).onOpen((()=>{this.connect.subscribeEventList([i.WJ.DEALS_OPEN,i.WJ.DEALS_CLOSED]),e()}))}))}reconnectDeals(e){const a=e.map((e=>({id:e.id,group:e.group})));this.connect.request({type:"push",event_name:i.U3.DEALS_RECONNECT,data:a})}constructor(e){this.listeners={[i.U3.DEALS_OPEN]:()=>{},[i.U3.DEALS_PROCEED_MIN]:()=>{},[i.U3.DEALS_CLOSED]:()=>{}},this.restoreListener=[],this.connect=e,this.connect.onRestore((()=>{this.restoreListener.forEach((e=>e()))}))}}},46574:(e,a,s)=>{"use strict";s(12183),s(12821),s(20845)},47731:(e,a,s)=>{"use strict";s.d(a,{J:()=>i});const i={SECONDS:"seconds",BINARY:"binary",TURBO:"turbo"}},38958:(e,a,s)=>{"use strict";s.d(a,{JF:()=>n.J,cY:()=>i.c,sg:()=>r.s});s(32784);var i=s(25354),r=s(54857),n=s(47731);s(45032),s(46574),s(25933)},54857:(e,a,s)=>{"use strict";s.d(a,{F:()=>DealCurrentServiceModelBo,s:()=>DealCurrentModelBo});var i=s(37323),r=s(60521),n=s(24071),o=s(25354);class DealCurrentModelBo{static update(e,a){const s=(0,i.Z)({},a);return void 0!==e.curs_current&&(s.cursCurrent=e.curs_current),void 0!==e.interim_status&&(s.result=e.interim_status),void 0!==e.cancel_percent&&(s.return=e.cancel_percent>0?Number(s.amount)/100*e.cancel_percent:0,s.cancelPercent=Number(e.cancel_percent),s.cancelDisabled=!e.cancel_percent),void 0!==e.interim_balance_change&&a.status===o.c.proceed&&(s.earn=e.interim_balance_change+Number(s.amount),s.balanceChange=Number(e.interim_balance_change)),"proceed"===a.status&&e.status&&e.status!==a.status&&(s.result=String(e.status),s.status=String(e.status),s.earn=Number(e.balance_change)+Number(s.amount),s.balanceChange=Number(e.balance_change),s.cursClose=Number(e.curs_close),s.timeClose=Number(e.time_close),s.refunded=Boolean(e.refunded)),s}static parse(e,a){const s=(0,i.Z)({},e),o=s.balance_change;return(0,r.observable)({id:Number(s.id),accountId:Number(s.account_id||0),category:s.cat,timeOpen:Number(s.time_open),timeClose:s.time_close?Number(s.time_close):Number(s.time_close_default),dir:s.dir,duration:Number(s.duration),group:s.group,pair:a.getById(s.pair,!0)||n.jT.generate(s.pair),cursOpen:s.curs_open,cursStrike:s.curs_strike,cursClose:s.curs_close,cursCurrent:s.curs_current||0,currency:"demo"===s.group?"demo":s.currency,sum:Number(s.amount),amount:Number(s.amount),winperc:Number(s.winperc),earn:o+Number(s.amount),status:s.status,result:s.interim_status||s.status,return:s.cancel_percent?Number(s.amount)/100*s.cancel_percent:0,cancelPercent:s.cancel_percent?Number(s.cancel_percent):0,type:s.type,riskfree:s.riskfree,cancelDisabled:!s.cancel_percent,balanceChange:Number(o),isTurbo:s.is_time,selected:!1,canceling:!1,timeCloseDefault:Number(s.time_close_default)||s.time_open+s.duration,userId:e.user_id,arenaId:s.arena_id,groupDate:new Date(1e3*s.time_close),refunded:!!s.refunded,timeCourseOpen:s.time_course_open})}}class DealCurrentServiceModelBo{parse(e){return DealCurrentModelBo.parse(e,this.pairsCollection)}update(e,a){return DealCurrentModelBo.update(e,a)}getDealAmount(e){const a=e.sum;return Number.isNaN(a)?0:a}getDealFloatingAmount(e){const a=e.balanceChange;return Number.isNaN(a)?0:a}constructor(e){this.pairsCollection=e}}},25354:(e,a,s)=>{"use strict";var i;s.d(a,{c:()=>i}),function(e){e.win="win",e.loose="loose",e.standoff="standoff",e.flat="flat",e.proceed="proceed",e.cancel="cancel"}(i||(i={}))},63235:(e,a,s)=>{"use strict";var i=s(37323),r=s(59312),n=s(28660),o=s(60521),l=s(23735),c=s(40285),d=s(72785),u=s(26763),m=s(74262),p=s(95029),h=s(80027),v=s(96667),g=s(99887),_=s(29236);let f=class DealCurrentServiceFx extends m.jq{onStart(e,a,s){this.accountService=a,this.appService=e,this.pairService=s,this.load(this.accountService.selectedAccount,this.accountService.accountsList,new _.u(this.pairService.pairCollection)),this.appService.availableProjects.fx&&(this.webSocket.onDealOpen(this.updateDeals),this.webSocket.onDealProceedMin(this.updateDealsMin),this.webSocket.onDealChange(this.updateDealsMin),this.webSocket.onDealClose(this.closeDeals),this.webSocket.onRestore(this.restoreDeals),this.webSocket.subscribe().then((()=>{this.subscribeDealsChanges()})))}onBind(e,a,s){var i;this.noticeService=s,this.dealService=e,this.featureToggleService=a,(null===(i=this.appService)||void 0===i?void 0:i.availableProjects.fx)&&this.initReactions()}initReactions(){this.disposers.push((0,o.reaction)((()=>this.accountService.selectedAccount),(e=>{this.updateAccount(e)})),(0,o.reaction)((()=>this.accountService.selectedAccount.id),(()=>{this.subscribeDealsChanges()})),(0,o.reaction)((()=>this.accountService.selectedAccount.sourceType),(()=>{this.unSubscribeDealsChanges()})),(0,o.reaction)((()=>this.dealService.lastOpenedDealRaw),(e=>{e&&this.updateDeals([e])})),(0,o.reaction)((()=>{var e;return!!(null===(e=this.featureToggleService)||void 0===e?void 0:e.getFeatureValue(h.y2.OTP_FX_TRADING_TRAILING_STOP))}),(e=>{this.isTrailingStop=e}),{fireImmediately:!0}),(0,o.reaction)((()=>[...this.accountService.accountsList]),(e=>{this.createDealCollections(e)})))}toggleLimitsForm(e){this.limitsFormOpened=null!=e?e:!this.limitsFormOpened}convertLimits(e,a,s,i,r){let n=(0,p.jM)(e,a,s,i.sum,i);if(r){const e=this.getLimitsRange(i,a);switch((0,p.CG)(n,r,a,e,i)){case p.Xy.SlLessThenMin:case p.Xy.TpLessThenMin:n=e[r].from;break;case p.Xy.SlMoreThenMax:case p.Xy.TpMoreThenMax:n=e[r].to}}return n}getLimitsRange(e,a){return(0,p.dn)(a,{dealSum:e.sum,precision:(0,p.p8)(a,e.pair.precision),stopLossRate:e.pair.stopLossRate,stopOutRate:e.pair.stopOutRate,takeProfitRate:e.pair.takeProfitRate,floatingPnl:e.floatingPnl,deal:e})}getLimitsRangeFormatted(e,a,s){const i=(0,p.p8)(a,s.pair.precision),r=(0,p.nH)(s.currency,i)[a],n=this.getLimitsRange(s,a)[e];return{from:r("".concat(n.from)),to:r("".concat(n.to))}}validateLimits(e,a,s){if(!a)return;let i;return i=String(a.value).length?(0,p.CG)(Number(a.value),e,a.type,this.getLimitsRange(s,a.type),s):(0,p.md)(String(a.value),a.trailing),i}cancelAllDeals(){return(0,l.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"close_active_trades_approve",eventLabel:"fx_all_trades"}),super.cancelAllDeals()}getStopOut(e,a){return this.convertLimits(c.$i.AMOUNT,e,(0,p.VL)(a.sum,a.pair.stopOutRate),a)}getTrailingLevel(e,a){return e&&void 0!==e.value?e.value:(0,p.VL)(a.sum,a.pair.stopOutRate)}savePrevious(e){this.previousLimits={stopLoss:e.stopLoss?Object.assign({},e.stopLoss):void 0,takeProfit:e.takeProfit?Object.assign({},e.takeProfit):void 0}}restoreLimits(e){const a=this.getDeal(e);a&&(a.stopLoss=this.previousLimits.stopLoss?Object.assign({},this.previousLimits.stopLoss):void 0,a.takeProfit=this.previousLimits.takeProfit?Object.assign({},this.previousLimits.takeProfit):void 0)}setLimitsToDeal(e,a){void 0!==a.takeProfit&&(e.takeProfit=a.takeProfit),void 0!==a.stopLoss&&(e.stopLoss=a.stopLoss)}saveLimits(e,a){const s=this.collection.getById(e,!0);if(s){this.savePrevious(s),this.setLimitsToDeal(s,(0,i.Z)({},a));const r=this.dealModel.parseLimitForSave((0,i.Z)({id:s.id,group:s.group,accountId:this.accountService.selectedAccount.id,takeProfit:s.takeProfit,stopLoss:s.stopLoss},a));return s.limitPending=!0,new Promise(((a,i)=>{this.webSocket.changeDeal(r).then((e=>{s.limitPending=!1,this.updateDeals(e),a()})).catch((a=>{this.restoreLimits(e),i(a)})).finally((()=>{s.limitPending=!1}))}))}return Promise.resolve()}processDealToppingUp(e){if(!this.selectedDeal||!e.value||!e.type)return{};const a=(0,i.Z)({},e),s=a.value,r=1-this.selectedDeal.pair.stopOutRate,n=(0,p.lu)(Math.abs(s)/r,2),o=(0,p.lu)(n-this.selectedDeal.sum,2),l=(0,p.lu)(Math.max(1,this.selectedDeal.multiplicator*this.selectedDeal.sum/n),2);switch(this.getCurrentLimitType(c.FM.STOP_LOSS)){case c.$i.PRICE:a.value=(0,p.lu)(this.convertLimits(a.type,c.$i.PRICE,a.value,this.selectedDeal),this.selectedDeal.pair.precision,this.selectedDeal.dir===d.em.UP?Math.ceil:Math.floor),a.type=c.$i.PRICE;break;case c.$i.PERCENT:a.type=c.$i.PERCENT,a.value=100*-r;break;default:a.value=(0,p.lu)(s,2)}return{diffAmount:o,dealAmount:n,multiplicator:l,stopLoss:a}}getCurrentLimitType(e){var a,s,i;const r=this.selectedDeal,n=c.$i.AMOUNT;if(!r)return n;const o=e===c.FM.TAKE_PROFIT,l=null===(a=r[e])||void 0===a?void 0:a.type,d=o?null===(s=r.stopLoss)||void 0===s?void 0:s.type:null===(i=r.takeProfit)||void 0===i?void 0:i.type;return l||d||n}turnOffTrailingStop(e){let a=e.id,s=e.group;return new Promise(((e,i)=>{this.webSocket.turnOffTrailingStop({id:a,group:s}).then((a=>{this.updateDeals(a),e()})).catch((e=>{i(e)}))}))}updateDealAmount(e,a,s){const i=this.getDeal(a);return i?((0,l.L)({event:"uaGtmEvents_clicks",eventCategory:"chart/position_top_up",eventAction:"add_money",eventLabel:"fx_".concat(i.pair.id,"_").concat(i.id)}),new Promise(((a,r)=>{this.webSocket.updateDealAmount({id:i.id,accountId:i.accountId,dealGroup:i.group,amount:e,stopLoss:s}).then((e=>{this.updateDeals(e),a(e)})).catch((e=>{r(e)}))}))):Promise.reject()}onStop(){this.collection.reset([]),this.disposers.forEach((e=>{e()})),this.webSocket.unsubscribe()}subscribeDealsChanges(){this.accountService.isCommonAccount(this.accountService.selectedAccount)&&this.webSocket.subscribeDealsChanges(this.accountService.selectedAccount).then((e=>{this.updateDeals(e)}))}unSubscribeDealsChanges(){this.accountService.isCommonAccount(this.accountService.selectedAccount)||this.webSocket.unsubscribeDealsChanges()}restoreDeals(){this.subscribeDealsChanges(),this.webSocket.reconnectDeals(this.collection.models)}constructor(){super(new g.X(v.Z.add())),this.disposers=[],this.isTrailingStop=!1,this.previousLimits={},this.limitsFormOpened=!1,this.selectDeal=this.selectDeal.bind(this),this.getLimitsRangeFormatted=this.getLimitsRangeFormatted.bind(this),this.getStopOut=this.getStopOut.bind(this),this.getTrailingLevel=this.getTrailingLevel.bind(this),this.validateLimits=this.validateLimits.bind(this),this.convertLimits=this.convertLimits.bind(this),this.restoreDeals=this.restoreDeals.bind(this)}};(0,r.gn)([o.observable],f.prototype,"limitsFormOpened",void 0),(0,r.gn)([(0,n.onStart)(u.APP_SERVICE,u.ACCOUNT_SERVICE,u.PAIR_SERVICE_FX)],f.prototype,"onStart",null),(0,r.gn)([(0,n.onBind)(u.DEAL_SERVICE_FX,u.FEATURE_TOGGLE_SERVICE,u.NOTICE_SERVICE)],f.prototype,"onBind",null),(0,r.gn)([o.action.bound],f.prototype,"toggleLimitsForm",null),(0,r.gn)([o.action.bound],f.prototype,"cancelAllDeals",null),(0,r.gn)([n.onStop],f.prototype,"onStop",null),f=(0,r.gn)([(0,n.bindAs)(u.DEAL_CURRENT_SERVICE_FX)],f)},99887:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(86933),r=s(51116);class WebSocket{onRestore(e){this.restoreListener.push(e)}onDealOpen(e){this.listeners[i.y$.DEALS_OPEN]=e}onDealProceedMin(e){this.listeners[i.y$.DEALS_PROCEED_MIN]=e}onDealClose(e){this.listeners[i.y$.DEALS_CLOSED]=e}onDealChange(e){this.listeners[i.y$.DEALS_CHANGE]=e}turnOffTrailingStop(e){let a=e.group,s=e.id;return new Promise(((e,r)=>{this.connect.request({event_name:i.y$.TRAILING_STOP_TURN_OFF,data:[{group:a,id:s}]}).onResponse(((a,s)=>{s?r(s):a.length&&!s&&e(a)}))}))}updateDealAmount(e){let a=e.id,s=e.dealGroup,r=e.accountId,n=e.amount,o=e.stopLoss;return new Promise(((e,l)=>{this.connect.request({event_name:i.y$.DEALS_TOPPING_UP,data:[{id:a,group:s,account_id:r,amount:n,stop_loss:o,with_stop_loss:!!o}]}).onResponse(((a,s)=>{s?l(s):a.length&&!s&&e(a)}))}))}cancelDeal(e,a,s){return new Promise(((r,n)=>{this.connect.request({event_name:i.y$.DEALS_CLOSING,data_type:i.D3.DEAL_CLOSE,data:[{id:e,group:a,account_id:s}]}).onResponse(((e,a)=>{a?n(a):e.length&&!a&&r(e)}))}))}changeDeal(e){return new Promise(((a,s)=>{this.connect.request({event_name:i.y$.DEALS_CHANGING,data_type:"deal",data:[e]}).onResponse(((e,i)=>{i?s(i):a(e)}))}))}subscribeDealsChanges(e){return new Promise(((a,s)=>{this.connect.request({event_name:i.y$.DEALS_SUBSCRIBE,data:[{account_id:e.id,group:e.type}]}).onResponse(((e,i)=>{i?s(i):a(e)}))}))}unsubscribeDealsChanges(){this.connect.request({event_name:i.y$.DEALS_UNSUBSCRIBE})}unsubscribe(){this.connect.clear()}subscribe(){return new Promise((e=>{this.connect.onPush(((e,a)=>{var s,r;if(e===i.y$.DEALS_OPEN)null===(r=(s=this.listeners)[i.y$.DEALS_OPEN])||void 0===r||r.call(s,a);else if(e===i.y$.DEALS_CLOSED){var n,o;null===(o=(n=this.listeners)[i.y$.DEALS_CLOSED])||void 0===o||o.call(n,a)}else if(e===i.y$.DEALS_PROCEED_MIN){var l,c;null===(c=(l=this.listeners)[i.y$.DEALS_PROCEED_MIN])||void 0===c||c.call(l,a)}else if(e===i.y$.DEALS_CHANGE){var d,u;null===(u=(d=this.listeners)[i.y$.DEALS_CHANGE])||void 0===u||u.call(d,a)}})).onOpen((()=>{this.connect.subscribeEventList([i.nE.DEALS_OPEN,i.nE.DEALS_CLOSED,i.nE.DEALS_CHANGE]),e()}))}))}reconnectDeals(e){const a=e.map((e=>({id:e.id,group:e.group})));this.connect.request({type:"push",uuid:null,event_name:i.y$.DEALS_RECONNECT,data_type:"deal",timestamp:(0,r.v)(),data:a})}constructor(e){this.listeners={},this.restoreListener=[],this.connect=e,this.connect.onRestore((()=>{this.restoreListener.forEach((e=>e()))}))}}},11511:(e,a,s)=>{"use strict";s.d(a,{Em:()=>i.E});s(63235);var i=s(29236)},29236:(e,a,s)=>{"use strict";s.d(a,{E:()=>DealCurrentModelFx,u:()=>DealCurrentServiceModelFx});var i=s(37323),r=s(26338),n=s(60521),o=s(40285),l=s(59797),c=s(24071);class DealCurrentModelFx{static parseLimitForSave(e){let a=e.takeProfit,s=e.stopLoss,i=e.group;return{id:e.id,account_id:e.accountId,group:i,take_profit:a&&{value:a.value,type:a.type},stop_loss:s&&{value:s.value,type:s.type,trailing:s.trailing}}}static update(e,a){const s=(0,i.Z)({},a);if(void 0!==e.price_current&&(s.cursCurrent=e.price_current),void 0!==e.floating_pnl&&(s.floatingPnl=e.floating_pnl),void 0!==e.amount&&(s.sum=e.amount),void 0!==e.commission&&(s.commission=e.commission),void 0!==e.multiplicator&&(s.multiplicator=e.multiplicator),void 0!==e.commission_open&&(s.commissionDetail.open=e.commission_open),void 0!==e.commission_swap&&(s.commissionDetail.swap=e.commission_swap),void 0!==e.next_swap&&(s.predictionSwapCommission=e.next_swap),s.limitPending||((0,r.Z)(e.stop_loss,s.stopLoss)||void 0===e.stop_loss||(s.stopLoss=e.stop_loss),(0,r.Z)(e.trailing_stop_pips,s.trailingStopPips)||void 0===e.trailing_stop_pips||(s.trailingStopPips=e.trailing_stop_pips),(0,r.Z)(e.take_profit,s.takeProfit)||void 0===e.take_profit||(s.takeProfit=e.take_profit)),"proceed"===a.status&&e.status&&e.status!==a.status){let a="standoff";e.realized_pnl>0?a="win":e.realized_pnl<0&&(a="loose"),s.result=a,s.realizedPnl=e.realized_pnl,s.status=String(e.status),s.cursClose=Number(e.price_close),s.timeClose=Number(e.time_close),s.refunded=Boolean(e.refunded)}return s}static parse(e,a){let s="standoff",i=o.$i.AMOUNT;return e.take_profit?i=e.take_profit.type:e.stop_loss&&(i=e.stop_loss.type),e.floating_pnl>0?s="win":e.floating_pnl<0&&(s="loose"),(0,n.observable)({id:e.id,accountId:Number(e.account_id||0),currency:"demo"===e.group?"demo":e.currency,group:e.group,arenaId:void 0,arenaType:void 0,sum:e.amount,multiplicator:e.multiplicator,pair:a.getById(e.pair,!0)||c.yT.generate(e.pair),status:e.status,dir:e.dir,result:s,closeReason:e.closing_reason,timeOpen:e.time_open,timeClose:e.time_close,cursOpen:e.price_open,cursCurrent:e.price_current,cursClose:e.price_close,realizedPnl:e.realized_pnl,floatingPnl:e.floating_pnl,commission:e.commission,predictionSwapCommission:e.next_swap,commissionDetail:{open:e.commission_open,swap:e.commission_swap},takeProfit:e.take_profit&&l.Z.parse(e.take_profit),stopLoss:e.stop_loss&&l.Z.parse(e.stop_loss),trailingStopPips:e.trailing_stop_pips,cache:{},cancelLoading:!1,cancelDisabled:!0,cancelCollapsed:!0,limitType:i,canceling:!1,limitPending:!1,refunded:!!e.refunded,selected:!1,groupDate:new Date(1e3*e.time_close),volume:e.volume})}}class DealCurrentServiceModelFx{parse(e){return DealCurrentModelFx.parse(e,this.pairsCollection)}update(e,a){return DealCurrentModelFx.update(e,a)}parseLimitForSave(e){return DealCurrentModelFx.parseLimitForSave(e)}getDealAmount(e){const a=e.sum;return Number.isNaN(a)?0:a}getDealFloatingAmount(e){const a=e.floatingPnl;return Number.isNaN(a)?0:a}constructor(e){this.pairsCollection=e}}},20845:(e,a,s)=>{"use strict";s.d(a,{Em:()=>i.Em,JF:()=>r.JF,cY:()=>r.cY,sg:()=>r.sg});var i=s(11511),r=s(38958)},10673:(e,a,s)=>{"use strict";s.d(a,{o:()=>c});var i=s(59312),r=s(80080),n=s(28660),o=s(26763),l=s(77575);let c=class GamblingAssetService{onBind(e){this.navigationService=e}goToStory(){(0,r.$)(l.Q,"storiesNavigation").then((e=>null==e?void 0:e.goToStoryOnce("quickler")))}};(0,i.gn)([(0,n.onBind)(o.NAVIGATION_SERVICE)],c.prototype,"onBind",null),c=(0,i.gn)([(0,n.bindAs)(o.GAMBLING_ASSET_SERVICE)],c)},49756:(e,a,s)=>{"use strict";s.d(a,{o:()=>i.o});var i=s(10673)},55209:(e,a,s)=>{"use strict";s.d(a,{f:()=>g});var i=s(29257),r=s(59312),n=s(80080),o=s(28660),l=s(60521),c=s(14282),d=s(26763),u=s(35716),m=s(98434),p=s(40846),h=s(4780),v=s(8925);let g=class NavigationService{tryResolveDeepLink(e){return this.deepLinks.resolve(e)}tryOpenDeepLink(e,a){var s=this;return(0,i.Z)((function*(){let i=e;a||(i=yield s.deepLinks.resolve(e));let r=!1;if(i&&"string"==typeof i&&(r=s.deepLinks.run(i)),!r&&!a){const a=yield(0,n.$)(c.F0,"commandService");r=!!a&&(yield a.resolveCommand(e))}return r}))()}onStart(){return this.linkNavigation||(this.linkNavigation=new v.pp({baseUrl:"/platform"})),this.setLocationSearch(window.location.search),!0}onBind(e,a,s,i,r,n,o){const l=e.isAuthorized;this.navigation||(this.navigation=new v.W_({appService:e,accountService:a,sideBarService:s,uiService:i,featureToggleService:r,accountEditService:n,panelService:o}),this.navigation.setServices(this.inputServices),this.deepLinks.add(new v.MZ(this.navigation)),this.deepLinks.add(new v.Oi(this.loyaltyProgramNavigation)),l&&this.deepLinks.run(void 0))}onAssetMenuServiceBind(e){this.navigation?this.navigation.setServices({assetMenuService:e}):this.inputServices.assetMenuService=e}onDealRiskreeTransportServiceBind(e){this.navigation&&this.navigation.setServices({dealRiskFreeTransportService:e})}onAssetListFttServiceBind(e){this.navigation?this.navigation.setServices({assetListServiceFtt:e}):this.inputServices.assetListServiceFtt=e}onNotificationServiceBind(e){this.navigation?this.navigation.setServices({notificationService:e}):this.inputServices.notificationService=e}onAssetListFxServiceBind(e){this.navigation?this.navigation.setServices({assetListServiceFx:e}):this.inputServices.assetListServiceFx=e}onAssetListSptServiceBind(e){this.navigation?this.navigation.setServices({assetListServiceSpt:e}):this.inputServices.assetListServiceSpt=e}onTradeManagerServiceBind(e){this.navigation?this.navigation.setServices({tradeManagerService:e}):this.inputServices.tradeManagerService=e}onOvlPlusNavigationServiceInit(e){this.ovlPlusNavigation||(this.ovlPlusNavigation=new v.QS({sideBarService:e}),this.deepLinks.add(new v.Hh(this.ovlPlusNavigation))),this.deepLinks.run()}onKycNavigationInit(e,a){this.kycNavigation||(this.kycNavigation=new v.LN(e,a),this.deepLinks.add(new v.lW(this.kycNavigation)),this.deepLinks.run())}onProfileNavigationInit(e){let a=!1;this.profileNavigation||(this.profileNavigation=new v.lO(e),this.deepLinks.add(new v.f7(this.profileNavigation)),a=!0),this.twoFactorAuthNavigation||(this.twoFactorAuthNavigation=new v.fw(e),this.deepLinks.add(new v.FA(this.twoFactorAuthNavigation)),a=!0),a&&this.deepLinks.run()}onChartNavigationInit(e,a,s){this.tradeManagerService=e,this.chartNavigation||(this.chartNavigation=new v.as(e,a,s),this.deepLinks.add(new v.q3(this.chartNavigation)),this.initReactions())}onStop(){this.disposers.forEach((e=>e())),this.disposers=[]}constructor(){this.loyaltyProgramNavigation=new v.IP,this.locationSearch="",this.disposers=[],this.inputServices={},this.deepLinks=new h.B,this.setLocationSearch=e=>{this.locationSearch=e},this.initReactions=()=>{this.disposers.push((0,l.reaction)((()=>{var e;return null===(e=this.tradeManagerService)||void 0===e?void 0:e.framesLoaded}),(e=>{e&&this.deepLinks.run()})))}}};(0,r.gn)([(0,o.onBind)(d.APP_SERVICE,d.ACCOUNT_SERVICE,d.SIDEBAR_SERVICE,d.UI_SERVICE,d.FEATURE_TOGGLE_SERVICE,d.ACCOUNT_EDIT_SERVICE,p.H1)],g.prototype,"onBind",null),(0,r.gn)([(0,o.onBind)(d.ASSET_MENU_SERVICE)],g.prototype,"onAssetMenuServiceBind",null),(0,r.gn)([(0,o.onBind)(d.DEAL_RISK_FREE_TRANSPORT_SERVICE)],g.prototype,"onDealRiskreeTransportServiceBind",null),(0,r.gn)([(0,o.onBind)(d.ASSET_LIST_SERVICE_FTT)],g.prototype,"onAssetListFttServiceBind",null),(0,r.gn)([(0,o.onBind)(u.GL)],g.prototype,"onNotificationServiceBind",null),(0,r.gn)([(0,o.onBind)(d.ASSET_LIST_SERVICE_FX)],g.prototype,"onAssetListFxServiceBind",null),(0,r.gn)([(0,o.onBind)(d.ASSET_LIST_SERVICE_SPT)],g.prototype,"onAssetListSptServiceBind",null),(0,r.gn)([(0,o.onBind)(d.TRADE_MANAGER_SERVICE)],g.prototype,"onTradeManagerServiceBind",null),(0,r.gn)([(0,o.onBind)(d.SIDEBAR_SERVICE)],g.prototype,"onOvlPlusNavigationServiceInit",null),(0,r.gn)([(0,o.onBind)(d.NOTICE_SERVICE,m.Z,d.KYC_PROXY_SERVICE)],g.prototype,"onKycNavigationInit",null),(0,r.gn)([(0,o.onBind)(p.H1)],g.prototype,"onProfileNavigationInit",null),(0,r.gn)([(0,o.onBind)(d.TRADE_MANAGER_SERVICE,d.FEATURE_TOGGLE_SERVICE,d.SIDEBAR_SERVICE)],g.prototype,"onChartNavigationInit",null),(0,r.gn)([o.onStop],g.prototype,"onStop",null),g=(0,r.gn)([(0,o.bindAs)(d.NAVIGATION_SERVICE)],g)},65537:(e,a,s)=>{"use strict";s.d(a,{AL:()=>n,Yz:()=>r,ln:()=>i});const i={SETTINGS:"settings",MY_TRADES:"mytrades",ORDER_PUSH:"order-push",OVL_EDUCATION:"ovl-education",OVL_HELP_CENTER:"ovl-help-center",OVL_FAQ:"ovl-faq",OVL_INSIGHTS:"ovl-insights",OVL_ASSETS:"ovl-assets",TRADING:"trading",ASSETS_LIST:"assets-list",SIGNALS:"trading-signals",DEPOSIT:"deposit",OPEN_NEW_ACCOUNT:"open_new_account",FORM:"kyc-form",INDICATORS:"indicators",ADVISORS:"advisors",STRATEGIES:"strategies",PROFILE:"profile",TRADERS_WAY:"traders_way",ACCOUNT_TRANSFERS:"account_transfers",SUPPORT:"support",CHART_BETA:"chart-beta",TWO_FACTOR_AUTH:"2fa",SHOW_RISKFREE:"show-riskfree"},r={UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CONTENT:"utm_content",UTM_CAMPAIGN:"utm_campaign",UTM_TERM:"utm_term",REF:"ref",SMM_GEO:"smm_geo"},n="us-td"},46873:(e,a,s)=>{"use strict";s.d(a,{M:()=>DeepLink});var i=s(65537);class DeepLink{execute(e){let a=!0;switch(e.deeplink_action){case i.ln.INDICATORS:this.navigation.goToIndicators();break;case i.ln.STRATEGIES:this.navigation.goToStrategies(e.id);break;case i.ln.ADVISORS:this.navigation.goToAdvisors();break;default:a=!1}return!!a&&["deeplink_action"]}constructor(e){this.navigation=e}}},72652:(e,a,s)=>{"use strict";s.d(a,{W:()=>Navigation});var i=s(80080),r=s(80027),n=s(58568);class Navigation{getTradeFrameId(){return this.tradeManagerService.getDefaultFrame().id}constructor(e,a,s){this.goToIndicators=()=>{(0,i.$)(n.y,"techAnalysisService").then((e=>{e&&(e.goToInstrumentsList(),e.selectInstruments(["indicators"]))}))},this.goToStrategies=e=>{(0,i.$)(n.y,"techAnalysisService").then((e=>{e&&(e.goToInstrumentsList(),e.selectInstruments(["strategies"]))}))},this.goToAdvisors=()=>{(this.featureToggleService.getFeatureValue(r.pi.OTP_ADVISOR_MACD_PROFESSIONAL)||this.featureToggleService.getFeatureValue(r.pi.OTP_ADVISOR_PREDATORY_GAZE)||this.featureToggleService.getFeatureValue(r.pi.OTP_ADVISOR_SURFING_THE_AVERAGES))&&(0,i.$)(n.y,"techAnalysisService").then((e=>{e&&(e.goToInstrumentsList(),e.selectInstruments(["advisors"]))}))},this.tradeManagerService=e,this.featureToggleService=a,this.sideBarService=s}}},52800:(e,a,s)=>{"use strict";s.d(a,{a:()=>i.W,q:()=>r.M});var i=s(72652),r=s(46873)},89796:(e,a,s)=>{"use strict";s.d(a,{M:()=>DeepLink});var i=s(37323),r=s(64356),n=s(65537);class DeepLink{execute(e){let a=!0;const s=["deeplink_action"];if(e.openPayIn&&!e.deeplink_action&&"LOOT_BOX"!==e.payment_screen&&"CUBES"!==e.feature){const a=()=>this.navigation.goToDeposit((0,r.Z)((0,i.Z)({promo:e.bonuscode},e.summ?{amount:Math.ceil(Number(e.summ))}:{}),{currency:e.currency===n.AL?"usdt":e.currency,psp:e.paymentmethod,origin:e.origin,screen:e.payment_screen,convertAmount:"false"!==e.convert_summ}));return s.push("openPayIn","currency","bonuscode","summ","paymentmethod","origin","payment_screen","convert_summ"),e.activationCode?(s.push("activationCode"),this.navigation.activatePromoCode(e.activationCode).then(a),s):(a(),s)}switch(e.deeplink_action){case n.ln.SETTINGS:s.push("settingsTab"),this.navigation.goToSettings({settingsTab:e.settingsTab});break;case n.ln.TRADING:s.push("asset","acc_type","group","project","tradeDuration","tradeDirection","chartType"),a=this.navigation.goToTrading({asset:e.asset,group:e.group,acc_type:e.acc_type,project:e.project,tradeDuration:e.tradeDuration,tradeDirection:e.tradeDirection,chartType:e.chartType});break;case n.ln.OPEN_NEW_ACCOUNT:this.navigation.goAddAccount();break;case n.ln.ACCOUNT_TRANSFERS:s.push("write_off_acc_id"),this.navigation.goToAccountTransfers(e.write_off_acc_id?{writeOffAccountId:Number(e.write_off_acc_id)}:null);break;case n.ln.SUPPORT:this.navigation.goToSupport();break;case n.ln.ASSETS_LIST:s.push("tab"),a=this.navigation.goToAssetsList({tab:e.tab});break;case n.ln.SHOW_RISKFREE:this.navigation.showRiskFree();break;default:a=!1}return!!a&&s}constructor(e){this.navigation=e}}},36320:(e,a,s)=>{"use strict";s.d(a,{p:()=>LinkNavigation});var i=s(29257),r=s(37323),n=s(24459),o=s(72124),l=s(12484),c=s(39211),d=s(65537);class LinkNavigation{goToTrading(e){return this.goToUrl({url:this.baseUrl,query:(0,r.Z)({deeplink_action:d.ln.TRADING},e)})}goToSettings(e){this.goToUrl({url:this.baseUrl,query:(0,r.Z)({deeplink_action:d.ln.SETTINGS},e)})}goAddAccount(){this.goToUrl({url:this.baseUrl,query:{deeplink_action:d.ln.OPEN_NEW_ACCOUNT}})}goToTradingSignals(){this.goToUrl({url:this.baseUrl,query:{deeplink_action:d.ln.SIGNALS}})}goToAssetsList(e){return this.goToUrl({url:this.baseUrl,query:(0,r.Z)({deeplink_action:d.ln.ASSETS_LIST},e)})}showRiskFree(){return this.goToUrl({url:this.baseUrl,query:{deeplink_action:d.ln.SHOW_RISKFREE}})}goToConsultantCallback(){this.sendImplementError({actionName:"goToConsultantCallback"})}goToDeposit(e){this.sendImplementError((0,r.Z)({actionName:"goToDeposit"},e))}goToStatuses(){this.sendImplementError({actionName:"goToStatuses"})}goToVideoGallery(){this.sendImplementError({actionName:"goToVideoGallery"})}goToSupport(){this.sendImplementError({actionName:"goToSupport"})}goToHelp(){this.sendImplementError({actionName:"goToHelp"})}goToAccountTransfers(e){this.sendImplementError((0,r.Z)({actionName:"goToAccountTransfers"},e))}activatePromoCode(e){return(0,i.Z)((function*(){yield c.g.activatePromoCode({code:e})}))()}goToUrl(e){const a=o.stringifyUrl(e);return a&&(window.location.href=a),!!a}sendImplementError(e){var a=e.actionName,s=(0,n.Z)(e,["actionName"]);l.bR.sendEvent("Navigation call empty method: ".concat(a),l.x3.WARNING,"fGuT7M75",(0,r.Z)({},s),{deep_links:"method_implementation"})}constructor(e){let a=e.baseUrl;this.baseUrl=a}}},52815:(e,a,s)=>{"use strict";s.d(a,{W:()=>Navigation});var i=s(29257),r=s(37323),n=s(64356),o=s(24459),l=s(66713),c=s(26763),d=s(97057),u=s(55121),m=s(8275),p=s(77554),h=s(40846),v=s(1035),g=s(39211),_=s(97892),f=s(4780),E=s(73569),S=s(53566);const y={fx:"fx",bo:"bo",otp:"otp",spt:"spt"},b=e=>"string"==typeof e&&Boolean(y[e]);class Navigation{setServices(e){e.tradeManagerService&&(this.tradeManagerService=e.tradeManagerService),e.assetMenuService&&(this.assetMenuService=e.assetMenuService),e.assetListServiceFtt&&(this.assetListServiceFtt=e.assetListServiceFtt),e.assetListServiceFx&&(this.assetListServiceFx=e.assetListServiceFx),e.assetListServiceSpt&&(this.assetListServiceSpt=e.assetListServiceSpt),e.dealRiskFreeTransportService&&(this.dealRiskFreeTransportService=e.dealRiskFreeTransportService),e.notificationService&&(this.notificationService=e.notificationService)}goToSettings(e){e&&"tradingSettings"===e.settingsTab?this.panelService.openById(h.uW.TRADING_SETTINGS):this.panelService.openById(h.uW.APPEARANCE_SETTINGS)}goToTradingSignals(){this.showSideBarById(m.KO.TRADING_SIGNALS)}goToConsultantCallback(){this.showSideBarById(m.KO.VIP_SUPPORT)}goToVideoGallery(){this.showSideBarById(m.KO.VIDEO_GALLERY)}goToHelp(){this.showSideBarById(m.KO.HELP)}showSideBarById(e){this.sideBarService.goTo(e)}showSideBarByIdForRealUser(e){const a=this.accountService.selectedAccount.type;a!==u.Q5.REAL&&a!==u.Q5.DEMO||this.sideBarService.goTo(e)}goToTrading(e){let a=e.acc_type,s=e.asset,i=e.group,r=e.project,n=e.tradeDuration,o=e.tradeDirection,c=e.chartType;if(!this.appService.isAuthorized||!["bo","fx"].includes(r))return!1;if(s&&r&&f.N.preserveParam("asset",s),i&&f.N.preserveParam("group",i),r&&f.N.preserveParam("project",r),n&&f.N.preserveParam("tradeDuration",n),o&&f.N.preserveParam("tradeDirection",o),a===u.Q5.REAL&&this.accountService){const e=this.accountService.accountsList.find((e=>e.type===u.Q5.REAL));e&&this.accountService.api.setAccountById(e.id)}if(a===u.Q5.DEMO&&this.accountService){const e=this.accountService.accountsList.find((e=>e.type===u.Q5.DEMO));e&&this.accountService.api.setAccountById(e.id)}var d;if(s&&b(r))null===(d=this.tradeManagerService)||void 0===d||d.selectPair(s,r).finally((()=>{}));else if(b(r)){var m,p;const e=null!==(p=null===(m=this.assetMenuService)||void 0===m?void 0:m.asset)&&void 0!==p?p:this.getPairDefault(r);var h;if(e)null===(h=this.tradeManagerService)||void 0===h||h.selectPair(e,r).finally((()=>{}))}const g=this.sideBarService.sideBarMinor.isPanelOpened();if((i&&r||r&&g)&&(this.sideBarService.goToMinor(v.KO.ASSETS),this.assetMenuService))switch(g&&i?this.assetMenuService.handleTipOpen(0):i&&this.assetMenuService.handleTipOpen(1e3),r){case l.Fw.BINARY:var _;if(this.assetMenuService.selectTab("ftt"),i)null===(_=this.assetListServiceFtt)||void 0===_||_.selectTag(i);break;case l.Fw.FOREX:var E;if(this.assetMenuService.selectTab("fx"),i)null===(E=this.assetListServiceFx)||void 0===E||E.selectTag(i)}return c&&c in S.K&&setTimeout((()=>{this.changeChartType(c)}),0),!0}goToDeposit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const s=e.convertAmount,i=e.currency,l=void 0===i?"":i,c=e.amount,d=(0,o.Z)(e,["convertAmount","currency","amount"]),u=null===(a=this.accountService.realAccounts.find((e=>e.currencyName===l.toLowerCase())))||void 0===a?void 0:a.id,m=!u&&Boolean(l);(0,_.c)({params:(0,r.Z)((0,n.Z)((0,r.Z)({},d),{acc_id:u}),m?null:{amount:c}),accountService:this.accountService,convertAmount:s})}goToSupport(){this.showSideBarById(m.KO.SUPPORT)}goToStatuses(){window.location.href="/statuses"}goAddAccount(){this.accountEditService.goAddNewAccount()}goToAccountTransfers(e){(0,p.Bf)(e)}goToAssetsList(e){let a=e.tab;if(!this.sideBarService||!this.assetMenuService||!["bo","fx"].includes(a))return!1;a&&f.N.preserveParam("tab",a);const s=this.sideBarService.sideBarMinor.isPanelOpened();if(s||this.sideBarService.goToMinor(v.KO.ASSETS),s?this.assetMenuService.handleTipOpen(0):this.assetMenuService.handleTipOpen(1e3),!this.assetMenuService.isMounted)return!1;switch(a){case"bo":this.assetMenuService.selectTab("ftt");break;case"fx":this.assetMenuService.selectTab("fx")}return!0}showRiskFree(){var e=this;return(0,i.Z)((function*(){e.tradeManagerService&&e.dealRiskFreeTransportService||(yield e.delay(1e3));const a=e.accountService.selectedAccount.type,s=yield e.waitForRiskFree();if(s){if("demo"===a&&e.selectRealAccount(),e.tradeManagerService&&e.dealRiskFreeTransportService){let a=e.tradeManagerService.findTradeFrameByProject("bo");if(!a){const s=e.getPairDefault(l.Fw.BINARY);s&&(yield e.tradeManagerService.selectPair(s,l.Fw.BINARY),yield e.delay(1e3),a=e.tradeManagerService.findTradeFrameByProject("bo"))}if(a&&a.serviceInterface){const e=a.serviceInterface.binder.getService(c.DEAL_FORM_STORE);s&&e&&e.dealFormApi.showPanel(d.rl.RiskFree)}}return Promise.resolve()}}))()}activatePromoCode(e){return(0,i.Z)((function*(){yield g.g.activatePromoCode({code:e})}))()}showAccountChangeNotice(){this.notificationService&&this.notificationService.addMessage({id:"example-custom-notification",component:(0,E.L)("accountSwitch",(()=>{}))})}selectRealAccount(){const e=this.accountService.getAccountByType("real");e&&this.accountService.api.setAccountById(e.id)}waitForRiskFree(){return new Promise((e=>{if(this.dealRiskFreeTransportService){var a;(null===(a=this.dealRiskFreeTransportService)||void 0===a?void 0:a.trades)&&this.dealRiskFreeTransportService.trades.length&&e(!0);const s=setTimeout((()=>{e(!1)}),3e3);this.dealRiskFreeTransportService.setUpdateTradesCallback((a=>{a.length&&(e(!0),clearTimeout(s))}))}}))}delay(e){return new Promise((a=>{setTimeout((()=>{a()}),e)}))}getPairDefault(e){switch(e){case l.Fw.BINARY:return this.appService.pairDefaultBo;case l.Fw.FOREX:return this.appService.pairDefaultFx;default:return"EURUSD"}}changeChartType(e){var a;null===(a=this.tradeManagerService)||void 0===a||a.tradeFrames.forEach((a=>{const s=a&&a.serviceInterface||null;if(s&&s.binder){const a=s.binder.getService(c.CHART_STORE);a.waitingForChartInit().then((()=>{a.zoomService.selectRateByFormat(S.K[e])}))}}))}constructor(e){let a=e.appService,s=e.accountService,i=e.sideBarService,r=e.uiService,n=e.featureToggleService,o=e.accountEditService,l=e.panelService;this.appService=a,this.accountService=s,this.sideBarService=i,this.uiService=r,this.featureToggleService=n,this.accountEditService=o,this.panelService=l}}},53566:(e,a,s)=>{"use strict";s.d(a,{K:()=>i});const i={area:"line",candles:"candle",bars:"bar",heiken:"heiken-ashi"}},73569:(e,a,s)=>{"use strict";s.d(a,{L:()=>o});var i=s(27378),r=s(14978),n=s(77740);function o(e,a){return(0,r.Fv)({id:e,type:"default",image:n.pPA,title:i.createElement(i.Fragment,null,"Your account was changed"),description:i.createElement(i.Fragment,null,"Your account was changed"),actionText:i.createElement(i.Fragment,null,"Ok"),meta:{pushId:e,source:"local"},onClick:function(){a&&a()}})}},27714:(e,a,s)=>{"use strict";s.d(a,{MZ:()=>r.M,W_:()=>i.W,pp:()=>n.p});var i=s(52815),r=s(89796),n=s(36320)},8925:(e,a,s)=>{"use strict";s.d(a,{FA:()=>c.F,Hh:()=>o.H,IP:()=>d.I,LN:()=>n.L,MZ:()=>i.MZ,Oi:()=>d.O,QS:()=>o.Q,W_:()=>i.W_,as:()=>r.a,f7:()=>l.f,fw:()=>c.f,lO:()=>l.l,lW:()=>n.l,pp:()=>i.pp,q3:()=>r.q});var i=s(27714),r=s(52800),n=s(57083),o=s(89322),l=s(83695),c=s(32806),d=s(83893)},59383:(e,a,s)=>{"use strict";s.d(a,{M:()=>DeepLink});var i=s(65537);class DeepLink{execute(e){let a=!0;if(e.deeplink_action===i.ln.FORM)this.navigation.goToForm();else a=!1;return!!a&&["deeplink_action"]}constructor(e){this.navigation=e}}},94762:(e,a,s)=>{"use strict";s.d(a,{W:()=>Navigation});var i=s(27378),r=s(13207),n=s(51649),o=s(23735),l=s(93134),c=s(86321),d=s(53323),u=s(5915);class Navigation{goToForm(){const e=r.Dg.getState();if((0,n.kK)(e))return;const a=(e=>{let a=e.token,s=e.links;return(0,n.kK)(a)&&(null==s?void 0:s.process)?s.process:null==s?void 0:s.init})(e);(0,n.kK)(a)||(this.noticeService.add({id:"kyc_form",collectionName:d.sm.FULL_SCREEN,layout:e=>{let s=e.api,r=e.notice;return i.createElement(u.default,{noticeId:r.id,api:s,content:e=>{let s=e.onClose;return i.createElement(l.f6,null,i.createElement(c.u_,{className:"ad-kyc-m-form",size:"full-screen"},i.createElement(c.u_.Close,{onClick:s,className:"ad-kyc-m-form__close"}),i.createElement(c.u_.Block,{className:"ad-kyc-m-form__block",type:"centered"},i.createElement("iframe",{style:{width:"100vw",height:"100vh",border:"none"},src:a}))))},animationOnClose:new u.LayoutModalScaleToTargetAnimation({duration:500,targetCSSSelector:".pro-w-status__content"})})},notice:{priority:!0}}),(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"kyc_form_open",eventAction:this.kycService.state?this.kycService.state.type:"unknown",eventLabel:"other"}))}constructor(e,a){this.noticeService=e,this.kycService=a,window.addEventListener("message",(e=>{"close_kyc_iframe"===e.data&&this.noticeService.remove("kyc_form")}))}}},57083:(e,a,s)=>{"use strict";s.d(a,{L:()=>i.W,l:()=>r.M});var i=s(94762),r=s(59383)},73187:(e,a,s)=>{"use strict";s.d(a,{M:()=>DeepLink});class DeepLink{execute(e){let a=!1;const s=[];return e.activationCode&&(s.push("activationCode"),this.navigation.activatePromoCode(e.activationCode),a=!0),a&&s}constructor(e){this.navigation=e}}},51915:(e,a,s)=>{"use strict";s.d(a,{W:()=>Navigation});var i=s(57734);class Navigation{activatePromoCode(e){(0,i.v)(e)}}},83893:(e,a,s)=>{"use strict";s.d(a,{I:()=>r.W,O:()=>i.M});var i=s(73187),r=s(51915)},42812:(e,a,s)=>{"use strict";s.d(a,{M:()=>DeepLink});var i=s(65537);const r="deeplink_open";class DeepLink{execute(e){let a=!0;switch(e.deeplink_action){case i.ln.OVL_EDUCATION:this.navigation.goToHelpCenter({embeddedLocation:r,section:"education"});break;case i.ln.OVL_FAQ:this.navigation.goToHelpCenter({embeddedLocation:r,section:"faq"});break;case i.ln.OVL_HELP_CENTER:this.navigation.goToHelpCenter({embeddedLocation:r,categoryId:e.categoryId});break;case i.ln.OVL_INSIGHTS:this.navigation.goToMarketAnalysis({embeddedLocation:r});break;case i.ln.OVL_ASSETS:this.navigation.goToAssets({embeddedLocation:r});break;default:a=!1}return!!a&&["deeplink_action"]}constructor(e){this.navigation=e}}},86770:(e,a,s)=>{"use strict";s.d(a,{W:()=>Navigation});var i=s(37323),r=s(64356),n=s(24459),o=s(72124),l=s(52463),c=s(8275);const d=(e,a)=>{if(a){const s=(0,o.parseUrl)(a).query;return(0,o.stringify)((0,i.Z)({},s,e))}return(0,o.stringify)(e)};class Navigation{goToMarketAnalysis(e){if(this.showSideBarById(c.KO.PLUS_MARKET_ANALYSIS),e){const a=window.location.search;(0,l.P)(null,document.title,"".concat(window.location.pathname,"?").concat(d(e,a)))}}goToHelpCenter(e){if(this.showSideBarById(c.KO.HELP_CENTER),e){const a=window.location.search;(0,l.P)(null,document.title,"".concat(window.location.pathname,"?").concat(d(e,a)))}}goToAssets(e){if(this.showSideBarById(c.KO.PLUS_ASSETS),e){const a=e.assetId,s=(0,n.Z)(e,["assetId"]),o=window.location.search,c=d((0,r.Z)((0,i.Z)({},s),{contentId:a,targetTab:a?"assets":null}),o);(0,l.P)(null,document.title,"".concat(window.location.pathname,"?").concat(c))}}showSideBarById(e){this.sideBarService.goTo(e)}constructor(e){let a=e.sideBarService;this.sideBarService=a}}},89322:(e,a,s)=>{"use strict";s.d(a,{H:()=>r.M,Q:()=>i.W});var i=s(86770),r=s(42812)},97892:(e,a,s)=>{"use strict";s.d(a,{c:()=>h});var i=s(29257),r=s(37323),n=s(64356),o=s(474),l=s(66713),c=s(55121),d=s(72735),u=s(71978),m=s(46122);const p=e=>{let a=e.params;e.canApplyNewDeposit&&(0,d.gG)({amount:a.amount,promoCode:a.promo,origin:a.origin,accountId:a.acc_id,psp:a.psp,screenId:a.screen})},h=(v=(0,i.Z)((function*(e){let a=e.accountService,s=e.params,i=e.convertAmount,d=void 0!==i&&i;if(!s)return;const h={amount:!0,acc_id:!0,bonus:!1,currency:!0,promo:!0,origin:!0,psp:!0,screen:!0,convertAmount:!1},v=Object.keys(s).every((e=>e in h||h[e])),g=void 0!==s.acc_id,_=void 0!==s.amount,f=a.selectedAccount.currencyName===o.Y6.USD,E=a.selectedAccount.type===c.Q5.DEMO,S=a.accountsList[0].currencyName===o.Y6.USD;if(!_||!d||f||E&&S||g)p({params:s,canApplyNewDeposit:v});else try{var y;const e=yield u.Z.post("/marketing/deeplink-sum",{version:"v1",project:l.yy,data:{sum:s.amount}}),i=(a.selectedAccount.type===c.Q5.DEMO?a.accountsList[0]:a.selectedAccount).currencyName,o=(null===(y=e.find((e=>e.currency===i)))||void 0===y?void 0:y.amount)||s.amount;p({params:(0,n.Z)((0,r.Z)({},s),{amount:o}),canApplyNewDeposit:v})}catch(e){m.b.sendEvent(e,m.x.ERROR,"5P3Moy3u")}})),function(e){return v.apply(this,arguments)});var v},55758:(e,a,s)=>{"use strict";s.d(a,{M:()=>DeepLink});var i=s(65537);class DeepLink{execute(e){let a=!0;switch(e.deeplink_action){case i.ln.PROFILE:this.navigation.goToProfile()||(a=!1);break;case i.ln.TRADERS_WAY:this.navigation.goToTradersWay()||(a=!1);break;default:a=!1}return!!a&&["deeplink_action","id","screen"]}constructor(e){this.navigation=e}}},12725:(e,a,s)=>{"use strict";s.d(a,{W:()=>Navigation});var i=s(40846);class Navigation{goToProfile(){return this.panelService.openById(i.uW.MAIN)}goToTradersWay(){return this.panelService.openById(i.uW.TRADERS_WAY)}goToSettings(){return this.panelService.openById(i.uW.TRADING_SETTINGS)}constructor(e){this.panelService=e,this.panelService=e}}},83695:(e,a,s)=>{"use strict";s.d(a,{f:()=>r.M,l:()=>i.W});var i=s(12725),r=s(55758)},22220:(e,a,s)=>{"use strict";s.d(a,{M:()=>DeepLink});var i=s(65537);class DeepLink{execute(e){let a=!1;if(e.deeplink_action===i.ln.TWO_FACTOR_AUTH)this.navigation.goToMain(e.type),a=!0;return!!a&&["deeplink_action","type"]}constructor(e){this.navigation=e,this.navigation=e}}},57843:(e,a,s)=>{"use strict";s.d(a,{W:()=>Navigation});var i=s(29257),r=s(3121),n=s(80080),o=s(52338),l=s(89452),c=s(7265);class Navigation{goToMain(e){var a=this;return(0,i.Z)((function*(){const s=(0,r.Z)(yield Promise.all([(0,n.$)(l.y,"twoFactorAuth"),(0,n.$)(c.EA,"politics")]),2),i=s[0],d=s[1];return null!==i&&null!==d&&((0,o.t7)(e)?a.panelService.openById(yield(0,o.QE)(i,e)):a.panelService.openById(yield(0,o.QE)(i)),!0)}))()}constructor(e){this.panelService=e}}},32806:(e,a,s)=>{"use strict";s.d(a,{F:()=>r.M,f:()=>i.W});var i=s(57843),r=s(22220)},83920:(e,a,s)=>{"use strict";s.d(a,{f:()=>i.f,y:()=>r});var i=s(55209);function r(e){return e(new i.f,{config:i.f.binderConfig})}},4780:(e,a,s)=>{"use strict";s.d(a,{B:()=>DeepLinks,N:()=>DeferredDeepLink});class DeferredDeepLink{static preserveParam(e,a){DeferredDeepLink.storage[e]=a}static getAllParams(){return DeferredDeepLink.storage}}DeferredDeepLink.storage={};var i=s(29257),r=s(72124),n=s(60046),o=s(7035),l=s(12484);const c=e=>{if(null!=e)return Array.isArray(e)?String(e[0]):String(e)};var d=s(37323),u=s(64356),m=s(65537);function p(e,a,s){const i={event:"uaGtmEvents_clicks",eventCategory:"deeplink_open",eventLabel:a};let r="null",n=!1;if(s)for(const e in m.ln){if(s===m.ln[e]){r=s,n=!0;break}}return n||e.map((e=>{switch(e){case"openPayIn":r="payin";break;case"link":r="openlink"}})),(0,u.Z)((0,d.Z)({},i),{eventAction:r})}class DeepLinks{static setParamsToUrl(e,a){const s=(0,r.stringifyUrl)({url:e,query:a});window.history.replaceState&&window.history.replaceState("",document.title,s)}static getParamsFromUrl(e){return a=(0,r.parse)(e),{deeplink_action:c(a.deeplink_action),acc_type:c(a.acc_type),asset:c(a.asset),type:c(a.type),project:c(a.project),tab:c(a.tab),id:c(a.id),view:c(a.view),storyId:c(a.storyId),storyName:c(a.storyName),screen:c(a.screen),currency:c(a.currency),bonuscode:c(a.bonuscode),openPayIn:c(a.openPayIn),summ:c(a.summ),paymentmethod:c(a.paymentmethod),convert_summ:c(a.convert_summ),origin:c(a.origin),payment_screen:c(a.payment_screen),tradeDuration:c(a.tradeDuration),tradeDirection:c(a.tradeDirection),utm_campaign:c(a.utm_campaign),utm_content:c(a.utm_content),utm_medium:c(a.utm_medium),utm_source:c(a.utm_source),utm_term:c(a.utm_term),smm_geo:c(a.smm_geo),ref:c(a.ref),link:c(a.link),traders_way:c(a.traders_way),group:c(a.group),event:c(a.event),write_off_acc_id:c(a.write_off_acc_id),featureId:c(a.featureId),settingsTab:c(a.settingsTab),orderId:c(a.orderId),dealId:c(a.dealId),categoryId:c(a.categoryId),activationCode:c(a.activationCode),chartType:c(a.chartType),feature:c(a.feature)};var a}static setUtmInLocalStorage(e,a){const s=Array.isArray(a)?a[null==a?void 0:a.length]:a;window.localStorage.setItem("deeplink_".concat(e),JSON.stringify(s||void 0))}add(e){this.items.push(e)}remove(e){this.items=this.items.filter((a=>a!==e))}resolve(e){return(0,i.Z)((function*(){try{return(yield(0,n.UR)(e)).location}catch(e){return null}}))()}run(e){try{let a=window.location.search;if(e){const s=new URL(e);if(s.pathname!==window.location.pathname)return window.open(e),!0;a=s.search}const s=DeepLinks.getParamsFromUrl(a);return this.runWithParams(s,a)}catch(a){return l.bR.sendEvent(a,l.x3.ERROR,"WIwLNYD3",{external_url:e||"",current_url:window.location.href},{deep_links:"processing"}),!1}}runWithParams(e,a){let s,i=!1;for(let n=0;n<this.items.length;n+=1){s=this.items[n];const l=s.execute(e);if(l){Array.isArray(l)&&o.S.logProxyFx(p(l,JSON.stringify((0,r.parse)(a)),e.deeplink_action)),this.clearUrl(l),i=!0;break}}if(i)for(const a in m.Yz){const s=m.Yz[a];DeepLinks.setUtmInLocalStorage(s,e[s])}return i}clearUrl(e){const a=(0,r.parse)(window.location.search);if("boolean"==typeof e)return;e.forEach((e=>{delete a[e]}));let s="".concat(window.location.pathname);0!==Object.keys(a).length&&(s="".concat(s,"?").concat((0,r.stringify)(a))),window.history.replaceState&&window.history.replaceState("",document.title,s)}constructor(){this.items=[]}}},39928:(e,a,s)=>{"use strict";s.d(a,{_d:()=>n,Uy:()=>o,Gq:()=>l,oR:()=>r,Hd:()=>R});const i="OnboardingStateService",r={FIRST_SESSION_FTT:0,FIRST_SESSION_FX:1,FIRST_SESSION_SPT:3},n={pair:{id:"eurusd",title:"EURUSD",profitability:82},quote:{last:1.17902,precision:5},scenario:null},o={pair:{id:"eurusd",title:"EURUSD"},quote:{last:1.17902,precision:5},scenario:null},l={pair:{id:"ko",title:"Coca-Cola"},quote:{last:1.17902,precision:5},scenario:null};var c=s(29257),d=s(37323),u=s(64356),m=s(59312),p=s(28660),h=s(31609),v=s(57615),g=s(29042),_=s(66713),f=s(26763),E=s(62664),S=s(12484),y=s(27378),b=s(82844);const C=[{id:r.FIRST_SESSION_FTT,project:_.yy,title:y.createElement(b._,{id:"fixed_time_trading",defaultMessage:"Fixed Time Trading"})},{id:r.FIRST_SESSION_FX,project:_.c0,title:y.createElement(b._,{id:"forex_trading",defaultMessage:"Forex Trading"})}];var T=s(71978);const A="/onboarding/step",k="/onboarding/config";class Http{saveOnboardingState(e,a,s){return T.Z.post(A,{version:"v1",project:this.project,data:{id:e,state:a,step:s}})}getConfig(e,a,s){return T.Z.post(k,{version:"v1",project:this.project,data:{pair:e,pair_group:a,event:s}})}constructor(e){this.project=e}}var w,N=s(42377);class OnboardingStateTransformer{static parse(e,a,s,i,r){return i.reduce(((i,n)=>{const o=e.find((e=>e.id===n.id)),l=r()&&OnboardingStateTransformer.isNewUser(s)&&OnboardingStateTransformer.isOnboardingStatesRawEmpty(e)&&OnboardingStateTransformer.isOnboardingProjectEqualCurrentProject(n.project,a);return i.push({id:n.id,title:n.title,project:n.project,status:l?"started":OnboardingStateTransformer.parseOnboardingStatus(o),currentStep:OnboardingStateTransformer.parseOnboardingStep(o)}),i}),[])}static parseFttConfig(e,a,s){const i=OnboardingStateTransformer.resolvePair(e);return{pair:{profitability:s,id:OnboardingStateTransformer.normalizePairId(i.id),title:i.title},quote:{last:i.quote_last,precision:i.precision},scenario:OnboardingStateTransformer.getScenario(e,a)}}static parseFxConfig(e,a){const s=OnboardingStateTransformer.resolvePair(e);return{pair:{id:OnboardingStateTransformer.normalizePairId(s.id),title:s.title},quote:{last:s.quote_last,precision:s.precision},scenario:OnboardingStateTransformer.getScenario(e,a)}}static parseSptConfig(e){const a=OnboardingStateTransformer.resolvePair(e);return{pair:{id:OnboardingStateTransformer.normalizePairId(a.id),title:a.title},quote:{last:a.quote_last,precision:a.precision},scenario:null}}static parseError(e){return function(e){return"object"==typeof e&&null!==e&&"type"in e&&"msg"in e}(e)&&"ValidationError"===e.type?{type:"ValidationError",message:e.msg}:{type:"unknown",message:e}}static parseOnboardingStatus(e){return e?e.state:"idle"}static parseOnboardingStep(e){return e?e.step:1}static getScenario(e,a){return a.group&&"earnings_season"===a.event?{type:"earningsSeason",info:OnboardingStateTransformer.resolveScenarioInfo(e.adhoc_pair_group)}:a.group?{type:"pairGroup",info:OnboardingStateTransformer.resolveScenarioInfo(e.adhoc_pair_group)}:a.pair?{type:"pair",info:OnboardingStateTransformer.resolveScenarioInfo(e.adhoc_pair)}:null}static normalizePairId(e){return String(e).toUpperCase()}static resolvePair(e){var a,s;return(null===(a=e.adhoc_pair_group)||void 0===a?void 0:a.pair)||(null===(s=e.adhoc_pair)||void 0===s?void 0:s.pair)||e.pair}static resolveScenarioInfo(e){return e?{imageUrl:e.onboarding_image,title:e.onboarding_title,description:e.onboarding_description}:null}static isNewUser(e){return!(0,N.M)(e,OnboardingStateTransformer.USER_LIFETIME_EXPECTED)}static isOnboardingStatesRawEmpty(e){return 0===e.length}static isOnboardingProjectEqualCurrentProject(e,a){return a===e}}OnboardingStateTransformer.USER_LIFETIME_EXPECTED=2;let R=(w=class OnboardingStateService{onStart(e){var a;this.appService=e,this.onboardings=OnboardingStateTransformer.parse(this.appService.onboardingState,this.project,null!==(a=this.appService.regDate)&&void 0!==a?a:0,C,this.isOnboardingEnabledByAbTest),this.started=this.resolveStarted()}updateState(e,a,s){this.onboardings=this.onboardings.map((i=>{if(i.id!==e)return i;const r=(0,u.Z)((0,d.Z)({},i),{status:a,currentStep:s});return this.http.saveOnboardingState(r.id,r.status,r.currentStep),r}))}getState(e){return this.onboardings.find((a=>a.id===e))||null}start(e,a){const s=this.getState(e);s?(this.started=s,OnboardingStateService.storage.set("triggerHook",{id:e,initiator:a,project:s.project}),window.location.reload()):console.error("[OnboardingStateService]: Onboarding with ".concat(e," is not exist."))}finish(){this.started=null,(0,E.hq)(),OnboardingStateService.storage.delete("triggerHook")}getConfig(e,a){var s=this;return(0,c.Z)((function*(){try{const o=yield s.http.getConfig(null==a?void 0:a.pair,null==a?void 0:a.group,null==a?void 0:a.event);switch(e){case r.FIRST_SESSION_FTT:{var i;const e=null===(i=s.appService.profitability)||void 0===i?void 0:i.current_level_percent;return OnboardingStateTransformer.parseFttConfig(o,a,e||n.pair.profitability)}case r.FIRST_SESSION_FX:return OnboardingStateTransformer.parseFxConfig(o,a);case r.FIRST_SESSION_SPT:return OnboardingStateTransformer.parseSptConfig(o)}}catch(a){switch(S.bR.sendEvent(a,S.x3.ERROR,"sblQcXgBN",void 0,{team:"FS"}),e){case r.FIRST_SESSION_FTT:return n;case r.FIRST_SESSION_FX:return o;case r.FIRST_SESSION_SPT:return l}}}))()}resolveStarted(){const e=OnboardingStateService.storage.get("triggerHook");if(e)return this.getState(e.id);const a=OnboardingStateService.ID_BY_PROJECT_MAP[this.project],s="number"==typeof a?this.getState(a):null;return"started"===(null==s?void 0:s.status)?s:null}constructor(e){this.started=null,this.onboardings=[],this.project=_.yy,this.isOnboardingEnabledByAbTest=()=>{const e=this.appService.getPolitic("test_onboarding_type");return(0,h.Z)(e)||0===e};const a=OnboardingStateService.storage.get("triggerHook");var s;this.project=null!==(s=null==a?void 0:a.project)&&void 0!==s?s:e,this.http=new Http(this.project),this.isOnboardingEnabledByAbTest=this.isOnboardingEnabledByAbTest.bind(this)}},w.storage=new v._({namespace:i,backend:new g.u}),w.ID_BY_PROJECT_MAP={[_.yy]:r.FIRST_SESSION_FTT,[_.c0]:r.FIRST_SESSION_FX,[_.ik]:r.FIRST_SESSION_SPT},w);(0,m.gn)([(0,p.onStart)(f.APP_SERVICE)],R.prototype,"onStart",null),R=(0,m.gn)([(0,p.bindAs)(i)],R)},12821:(e,a,s)=>{"use strict";var i=s(62540),r=s(51116),n=s(24071),o=s(84115);const l="EURUSD",c=n.jT.parseAll((0,i.Z)(o),l);(0,r.j2)(c)},24071:(e,a,s)=>{"use strict";s.d(a,{$B:()=>x,Lz:()=>H,so:()=>V,jT:()=>c,yT:()=>u,X3:()=>p});var i=s(37323),r=s(46188),n=s(38429),o=s(51116),l=s(80969);class PairModelBo extends l.Z{getDefPairOpts(e){return{id:e,name:e,title:e,trans:e,transTrim:e,transFormatted:e}}generateById(e){return(0,i.Z)({},this.attributes,this.getDefPairOpts(e))}generate(e){const a={};return"string"==typeof e&&(e=this.getDefPairOpts(e)),(0,r.Z)(this.attributes,((s,i)=>{a[i]=e&&void 0!==e[i]?e[i]:s})),a}parse(e,a){const s=e.id;return{id:s,name:s,title:e.title,icon:e.icon_vector,aliases:e.aliases,trans:e.title,transTrim:e.title.replace(/ /g,""),transFormatted:e.title,locked:e.locked,lockedReason:e.locked_reason,timeClose:e.time_close,timeOpen:e.time_open,lockedTrading:e.locked_trading,lockedTradingReason:e.locked_trading_reason,timeCloseTrading:e.time_close_trading,timeOpenTrading:e.time_open_trading,active:e.active,winperc:e.winperc,order:e.order,precision:e.precision,group:e.group,groupView:e.group_view,status:"normal",sentiment:e.sentiment,selected:e.id===a,minDuration:e.min_duration||60,maxDuration:e.max_duration,allowedFastDealsDurations:e.allowed_fast_deals_durations&&e.allowed_fast_deals_durations.length?e.allowed_fast_deals_durations:void 0,minAmount:e.min_amount,maxAmount:e.max_amount,amounts:e.amounts,quick:e.min_duration===e.max_duration}}parseAll(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EURUSD";return(0,n.Z)(e,((e,s)=>{e.push(this.parse(s,a))}),[])}parseToUpdate(e,a){const s={id:null==e?void 0:e.id};return a&&(void 0!==e.aliases&&(s.aliases=e.aliases),void 0!==e.locked&&(s.locked=e.locked),void 0!==e.locked_reason&&(s.lockedReason=e.locked_reason),void 0===e.winperc||e.locked||(s.winperc=e.winperc),void 0!==e.time_open&&e.time_open&&(s.timeOpen=e.time_open),void 0!==e.time_close&&e.time_close&&(s.timeClose=e.time_close),void 0!==e.locked_trading&&(s.lockedTrading=e.locked_trading),void 0!==e.locked_trading_reason&&(s.lockedTradingReason=e.locked_trading_reason),void 0!==e.time_open_trading&&e.time_open_trading&&(s.timeOpenTrading=e.time_open_trading),void 0!==e.time_close_trading&&e.time_close_trading&&(s.timeCloseTrading=e.time_close_trading),void 0!==e.min_amount&&e.min_amount&&(s.minAmount=e.min_amount),void 0!==e.max_amount&&e.max_amount&&(s.maxAmount=e.max_amount),void 0!==e.min_duration&&e.min_duration&&(s.minDuration=e.min_duration),void 0!==e.max_duration&&e.max_duration&&(s.maxDuration=e.max_duration),void 0!==e.amounts&&(s.amounts=e.amounts)),s}constructor(...e){super(...e),this.attributes={id:"EURUSD",name:"EURUSD",title:"EUR USD",trans:"EURUSD",transTrim:"EURUSD",transFormatted:"EUR USD",locked:!1,lockedReason:"",active:!0,winperc:30,order:1,precision:5,group:"currency",groupView:["currency"],timeOpen:(0,o.Iz)(),minAmount:30,maxAmount:2e3,timeClose:(0,o.Iz)()+86400,selected:!1,status:"normal",sentiment:50,minDuration:60,maxDuration:10800,lockedTrading:!1,lockedTradingReason:"",timeCloseTrading:0,timeOpenTrading:0,aliases:[],amounts:{demo:{min:1,max:3e3,default:3},ars:{min:90,max:27e4,default:270},omr:{min:.5,max:1200,default:1},cny:{min:6,max:21e3,default:18},cop:{min:3500,max:105e5,default:10500},egp:{min:15,max:45e3,default:45},vnd:{min:23e3,max:69e6,default:69e3},inr:{min:70,max:21e4,default:200},mxn:{min:20,max:6e4,default:60},usd:{min:1,max:3e3,default:3},aed:{min:3,max:12e3,default:12},gbx:{min:100,max:22e4,default:300},brl:{min:5,max:15e3,default:5},sar:{min:4,max:12e3,default:12},krw:{min:1300,max:39e5,default:4e3},jpy:{min:110,max:35e4,default:350},gbp:{min:1,max:2200,default:3},olc:{min:1,max:3e3,default:3},thb:{min:30,max:9e4,default:90},eur:{min:1,max:3e3,default:3},idr:{min:15e3,max:45e6,default:45e3},usdt:{min:1,max:6e3,default:3},sgd:{min:1,max:3900,default:4},rub:{min:70,max:21e4,default:210}},quick:!1}}}const c=new PairModelBo;function d(){return Math.floor((new Date).getTime()/1e3)}const u=new class PairModelFx{parse(e,a){const s=e.id;return{id:s,name:s,title:e.title,icon:e.icon_vector,aliases:e.aliases,trans:e.title,transFormatted:e.title,transTrim:e.title.replace(/ /g,""),locked:e.locked,lockedBuy:e.locked_buy,lockedSell:e.locked_sell,lockedReason:e.locked_reason,timeOpen:e.time_open,timeClose:e.time_close,lockedTrading:e.locked_trading,lockedTradingReason:e.locked_trading_reason,timeCloseTrading:e.time_close_trading,timeOpenTrading:e.time_open_trading,active:e.active,order:e.order,precision:e.precision,group:e.group,groupView:e.group_view,status:"normal",sentiment:50,commission:e.min_commission,selected:s===a,multiplicatorList:e.allowed_multiplicators||[],sumMin:e.min_amount,sumMax:e.max_amount,minCommission:e.min_commission,openCommissionMax:e.open_commission_max,swapCommissionBuy:e.swap_commission_buy,stopLossRate:e.stop_loss_rate,takeProfitRate:e.take_profit_rate,stopOutRate:e.stop_out_rate,amounts:e.amounts}}parseToUpdate(e,a){const s={id:null==e?void 0:e.id};return a&&(s.id=e.id,void 0!==e.aliases&&(s.aliases=e.aliases),void 0!==e.locked&&(s.locked=e.locked),void 0!==e.locked_reason&&(s.lockedReason=e.locked_reason),void 0!==e.time_open&&e.time_open&&(s.timeOpen=e.time_open),void 0!==e.time_close&&e.time_close&&(s.timeClose=e.time_close),void 0!==e.locked_trading&&(s.lockedTrading=e.locked_trading),void 0!==e.locked_trading_reason&&(s.lockedTradingReason=e.locked_trading_reason),void 0!==e.time_open_trading&&e.time_open_trading&&(s.timeOpenTrading=e.time_open_trading),void 0!==e.time_close_trading&&e.time_close_trading&&(s.timeCloseTrading=e.time_close_trading),void 0!==e.min_commission&&e.min_commission&&(s.minCommission=e.min_commission),void 0!==e.open_commission_max&&e.open_commission_max&&(s.openCommissionMax=e.open_commission_max),void 0!==e.swap_commission_buy&&(s.swapCommissionBuy=e.swap_commission_buy),void 0!==e.min_amount&&(s.sumMin=e.min_amount),void 0!==e.max_amount&&(s.sumMax=e.max_amount),void 0!==e.precision&&(s.precision=e.precision),void 0!==e.allowed_multiplicators&&(s.multiplicatorList=e.allowed_multiplicators),void 0!==e.stop_loss_rate&&(s.stopLossRate=e.stop_loss_rate),void 0!==e.take_profit_rate&&(s.takeProfitRate=e.take_profit_rate),void 0!==e.stop_out_rate&&(s.stopOutRate=e.stop_out_rate),void 0!==e.amounts&&(s.amounts=e.amounts),void 0!==e.locked_buy&&(s.lockedBuy=e.locked_buy),void 0!==e.locked_sell&&(s.lockedSell=e.locked_sell)),s}getDefPairOpts(e){return{id:e,name:e,title:e,trans:e,transTrim:e,transFormatted:e}}generateById(e){return(0,i.Z)({},this.attributes,this.getDefPairOpts(e))}generate(e){const a={};return"string"==typeof e&&(e=this.getDefPairOpts(e)),(0,r.Z)(this.attributes,((s,i)=>{a[i]=e&&void 0!==e[i]?e[i]:s})),a}constructor(){this.attributes={id:"EURUSD",name:"EURUSD",title:"EUR USD",trans:"EURUSD",transTrim:"EURUSD",transFormatted:"EUR USD",locked:!1,lockedReason:"",active:!0,order:1,precision:5,group:"currency",groupView:["currency"],timeOpen:d(),timeClose:d()+86400,selected:!1,status:"normal",sentiment:50,commission:0,multiplicatorList:[25,50,150,200],sumMin:30,sumMax:2e3,minCommission:0,openCommissionMax:0,swapCommissionBuy:0,stopLossRate:0,takeProfitRate:0,stopOutRate:0,lockedTrading:!1,lockedTradingReason:"",lockedBuy:!1,lockedSell:!1,timeCloseTrading:0,timeOpenTrading:0,aliases:[],amounts:{demo:{min:1,max:3e3,default:3},ars:{min:90,max:27e4,default:270},omr:{min:.5,max:1200,default:1},cny:{min:6,max:21e3,default:18},cop:{min:3500,max:105e5,default:10500},egp:{min:15,max:45e3,default:45},vnd:{min:23e3,max:69e6,default:69e3},inr:{min:70,max:21e4,default:200},mxn:{min:20,max:6e4,default:60},usd:{min:1,max:3e3,default:3},aed:{min:3,max:12e3,default:12},gbx:{min:100,max:22e4,default:300},brl:{min:5,max:15e3,default:5},sar:{min:4,max:12e3,default:12},krw:{min:1300,max:39e5,default:4e3},jpy:{min:110,max:35e4,default:350},gbp:{min:1,max:2200,default:3},olc:{min:1,max:3e3,default:3},thb:{min:30,max:9e4,default:90},eur:{min:1,max:3e3,default:3},idr:{min:15e3,max:45e6,default:45e3},usdt:{min:1,max:6e3,default:3},sgd:{min:1,max:3900,default:4},rub:{min:70,max:21e4,default:210}}}}};var m=s(17945);const p=new class PairModelSpt{parse(e){return{currency:e.currency_quote.toLowerCase(),group:e.group,groupView:e.group_view,id:e.id,icon:e.icon_vector,locked:e.locked,lockedBuy:e.locked_buy,lockedReason:e.locked_reason,lockedTrading:e.locked_trading,lockedTradingReason:e.locked_trading_reason,precision:e.precision,purchaseFee:e.purchase_fee,salesSuccessFee:e.sales_success_fee,timeClose:e.time_close,timeCloseTrading:e.time_close_trading,timeOpen:e.time_open,timeOpenTrading:e.time_open_trading,title:e.title,aliases:e.aliases,trans:e.title,transFormatted:e.title,transTrim:e.title?e.title.replace(/ /g,""):e.title}}parseToUpdate(e,a){const s=this.parse(e);return(0,m.Z)({},a,s)}};var h=s(59312),v=s(60521),g=s(28660),_=s(26763),f=s(86933),E=s(65990),S=s(93824),y=s(53323),b=s(3121),C=s(63247),T=s(84829),A=s(46315),k=s(57855),w=s(57615),N=s(29042),R=s(27967),I=s(10002);const D=class PairCollection extends I.C{getPairByIdNonStrict(e){return this.models.find((a=>a.id.toString().toUpperCase()===e.toString().toUpperCase()))}findNear(e){const a=this.models;let s,i,r=e,n=null,o=null;if(a.length>e+1)for(i=e+1,s=this.models.length;i<s;i++)if(a[i].active){n=i;break}if(a[e-1])for(i=e-1;i>-1;i--)if(a[i].active){o=i;break}return null!==n&&null!==o?r=Math.abs(e-n)>Math.abs(e-o)?o:n:null!==n?r=n:null!==o&&(r=o),a[r]}findProfitable(){return(0,C.Z)(this.models,(e=>!e.locked&&e.winperc))}findAltertativePair(){for(let e=0,a=this.models.length;e<a;e++)if(this.models[e].active)return this.models[e];return null}};var O=s(66713),L=s(95029),M=s(71978);class HttpClient{fetchRecommendedAsset(e){return M.Z.post("/instrument/recommended/".concat((0,L.B5)(e)),{data:{},version:"v1",project:O.Fw.OTP})}}class PairService{selectPair(e){this.pairCollection.select(e)}getPair(e){return this.pairCollection.getById(e,!0)}getPairNonStrict(e){return this.pairCollection.getPairByIdNonStrict(e)}getDefPair(e){if(this.pairCollection.models){const a=(0,A.n)(e||R.d,this.pairCollection.models);return this.getPair(a)}}initPairCollection(e,a){const s=a.map((a=>e.parse(a)));this.pairCollection=new D(s)}isPairActive(e){const a=this.pairCollection.getById(e,!0);return a&&!a.locked}setFavoriteAssets(e){const a=(0,C.Z)(e,"rev");if(!a||this.favoriteAssetsRevision>a.rev)return;const s=[];a.pairs.forEach((e=>{s.push([e,s.length])})),this.favoriteAssets=new Map(s),this.favoriteAssetsRevision=a.rev}toggleFavorite(e){this.pairCollection.getById(e,!0)&&this.setFavoriteAndSave(e,!this.favoriteAssets.has(e))}setFavoriteAndSave(e,a){const s=[...this.favoriteAssets.entries()];this.setFavorite(e,a),this.saveFavoriteChanges().catch((()=>{this.favoriteAssets=new Map(s)}))}hasFavorite(){return!(!this.favoriteAssets||!this.favoriteAssets.size)}fetchRecommendedAsset(e){this.httpClient.fetchRecommendedAsset(e).then((e=>{if(this.recommendedAssetsRaw=(null==e?void 0:e.list)||[],e&&e.list.length){const a=(0,b.Z)(e.list,1)[0];this.recommendedAssetRaw=a}}))}updateSentiments(e){e&&e.length&&e.forEach((e=>{const a=!!e.pair&&this.pairCollection.get(e.pair,!0);a&&(a.sentiment=e.sentiment)}))}saveFavoriteChanges(){return this.favoriteAssetsRevision++,new Promise(this.sendFavoriteChanges)}setFavorite(e,a){a?this.favoriteAssets.set(e,this.favoriteAssets.size):this.favoriteAssets.delete(e)}sendFavoriteChanges(e,a){throw new Error("Send favorite asset is not implemented")}migrateFavoriteLS(e,a){const s=new w._({namespace:e,backend:new N.u});if(!this.favoriteAssets.size){let e=[];if(e=s.get(a)||[],!e||!e.length){const s=(0,k.Ve)(a,k.hO);Array.isArray(s)&&s.length&&"string"==typeof s[0]&&(e=s.map(((e,a)=>[e,a])))}e.length&&(this.favoriteAssets=new Map(e),this.saveFavoriteChanges().catch((()=>{s.set(a,e)})))}(0,k.m0)(a),s.delete(a)}constructor(e){this.disposers=[],this.httpClient=new HttpClient,this.favoriteAssetsRevision=-1,this.favoriteAssets=new Map,this.webSocket=e.add(),this.sendFavoriteChanges=(0,T.Z)(this.sendFavoriteChanges.bind(this),300)}}(0,h.gn)([v.observable],PairService.prototype,"favoriteAssets",void 0),(0,h.gn)([v.observable],PairService.prototype,"pairCollection",void 0),(0,h.gn)([v.observable],PairService.prototype,"recommendedAssetsRaw",void 0),(0,h.gn)([v.observable],PairService.prototype,"recommendedAssetRaw",void 0),(0,h.gn)([v.action],PairService.prototype,"selectPair",null),(0,h.gn)([v.action.bound],PairService.prototype,"getPair",null),(0,h.gn)([v.action.bound],PairService.prototype,"getPairNonStrict",null),(0,h.gn)([v.action.bound],PairService.prototype,"getDefPair",null),(0,h.gn)([v.action],PairService.prototype,"toggleFavorite",null),(0,h.gn)([v.action.bound],PairService.prototype,"fetchRecommendedAsset",null),(0,h.gn)([v.action.bound],PairService.prototype,"updateSentiments",null),(0,h.gn)([v.action],PairService.prototype,"setFavorite",null);let P=class PairServiceBo extends PairService{get profitablePair(){return this.pairCollection.findProfitable()}get cachedFavoriteAssets(){return E.d.bo.FAVORITE_ASSETS}onStart(e){this.appService=e;const a=this.appService.pairsBo||[];return this.initPairCollection(c,a),this.subscribeSocketEvents(),!0}onBind(e,a,s,i,r){this.dealService=e,this.tradeManagerService=a,this.statisticsService=s,this.uiService=i,this.noticeService=r,this.webSocket.onOpen((()=>{this.sendPairActive(a.framesPairs)})),this.initReactions()}subscribeSocketEvents(){this.webSocket.onPush(((e,a)=>{if(e===f.U3.PAIR_SENTIMENT_CHANGE)this.updateSentiments(a);else if(e===f.U3.PAIR_WINPERC_CHANGE)Array.isArray(a)&&a.forEach((e=>this.updateWinPercent(e.pair,e.winperc)));else if(e===f.U3.INSTRUMENT_CHANGE){if(Array.isArray(a)){const e=a.reduce(((e,a)=>{const s=a.id&&this.pairCollection.get(a.id);return s&&e.push(c.parseToUpdate(a,!!s)),e}),[]);this.pairCollection.update(e,{add:!1,remove:!1})}}else e===f.U3.FAVORITE_PAIRS_CHANGE&&this.setFavoriteAssets(a)})),this.webSocketRequest.subscribeEventList([f.WJ.PAIR_SENTIMENT_CHANGE,f.WJ.PAIR_WINPERC_CHANGE,f.WJ.INSTRUMENT_CHANGE,f.WJ.FAVORITE_PAIRS_CHANGE])}initReactions(){this.disposers=[(0,v.reaction)((()=>this.tradeManagerService.framesPairs),(e=>{var a,s;a=this.subscribedPairs,s=e,a.length===s.length&&a.every(((e,a)=>e===s[a]))||(this.sendPairActive(e),this.subscribedPairs=e)}))]}onStop(){this.disposers.forEach((e=>{e()})),this.webSocket.clear()}updateWinPercent(e,a){const s=this.pairCollection.getById(e,!0);s&&(s.winperc=a)}getOrGeneratePair(e){return this.getPair(e)||c.generateById(e)}sendPairActive(e){this.webSocket.request(this.webSocket.socket.requestActivePair(this.appService.dealCategory,e))}setFavoriteAssets(e){const a=-1===this.favoriteAssetsRevision;super.setFavoriteAssets(e),a&&this.migrateFavoriteLS(E.d.bo.NAMESPACE,E.d.bo.FAVORITE_ASSETS)}sendFavoriteChanges(e,a){this.webSocket.request({event_name:f.U3.FAVORITE_PAIRS_SET,data:[{pairs:[...this.favoriteAssets.keys()],rev:this.favoriteAssetsRevision}]}).onResponse(((s,i)=>{i?(this.noticeService.add({id:i.code,layout:S.G0,collectionName:y.sm.TOP,layoutProps:{html:i.mess,msgType:"error"},notice:{period:6}}),a(i)):e()}))}constructor(e){super(e),this.subscribedPairs=[],this.api={selectPair:this.selectPair,isPairActive:this.isPairActive,getPair:this.getPair,getDefPair:this.getDefPair,updateWinPercent:this.updateWinPercent,setFavorite:this.setFavorite},this.webSocketRequest=e.add()}};(0,h.gn)([v.computed],P.prototype,"profitablePair",null),(0,h.gn)([(0,g.onStart)(_.APP_SERVICE)],P.prototype,"onStart",null),(0,h.gn)([(0,g.onBind)(_.DEAL_SERVICE_BO,_.TRADE_MANAGER_SERVICE,_.STATISTICS_SERVICE,_.UI_SERVICE,_.NOTICE_SERVICE)],P.prototype,"onBind",null),(0,h.gn)([g.onStop],P.prototype,"onStop",null),(0,h.gn)([v.action.bound],P.prototype,"updateWinPercent",null),P=(0,h.gn)([(0,g.bindAs)(_.PAIR_SERVICE_BO)],P);const x=P;var F=s(62323),B=s(80080),Z=s(18404);let U=class PairServiceFx extends PairService{get cachedFavoriteAssets(){return E.d.fx.FAVORITE_ASSETS}onBind(e,a,s){this.uiService=e,this.statisticsService=a,this.noticeService=s}updateCommission(e){const a=(0,F.Z)(e,((e,a)=>(e.push({id:a.pair,commission:a.commission}),e)),[]);var s;a.length&&(null===(s=this.pairCollection)||void 0===s||s.update(a,{add:!1,remove:!1}))}subscribeSocketEvents(){this.webSocket.onPush(((e,a)=>{if(e===f.y$.PAIR_COMMISSION_CHANGE&&Array.isArray(a)&&this.updateCommission(a),e===f.y$.INSTRUMENT_CHANGE){if(Array.isArray(a)){var s;const e=a.reduce(((e,a)=>{var s;const i=a.id&&(null===(s=this.pairCollection)||void 0===s?void 0:s.get(a.id));return i&&e.push(u.parseToUpdate(a,i)),e}),[]);null===(s=this.pairCollection)||void 0===s||s.update(e,{add:!1,remove:!1})}}else e===f.y$.PAIR_SENTIMENT_CHANGE?this.updateSentiments(a):e===f.y$.FAVORITE_PAIRS_CHANGE&&this.setFavoriteAssets(a)})),this.webSocket.subscribeEventList([f.nE.INSTRUMENT_CHANGE,f.nE.PAIR_SENTIMENT_CHANGE,f.nE.FAVORITE_PAIRS_CHANGE])}onStart(e){this.appService=e;const a=this.appService.pairsFx||[];return this.initPairCollection(u,a),this.subscribeSocketEvents(),(0,B.$)(Z.tA,"fxCommissionsService").then((e=>{if(e){const a=e.getState().commissions,s=[];Object.keys(a).forEach((e=>{const i=a[e];i&&s.push({pair:i.id,commission:i.commission})})),s.length&&this.updateCommission(s)}})),!0}setFavoriteAssets(e){const a=-1===this.favoriteAssetsRevision;super.setFavoriteAssets(e),a&&this.migrateFavoriteLS(E.d.fx.NAMESPACE,E.d.fx.FAVORITE_ASSETS)}getOrGeneratePair(e){return this.getPair(e)||u.generateById(e)}onStop(){this.disposers.forEach((e=>{e()})),this.webSocket.clear()}sendFavoriteChanges(e,a){this.webSocket.request({event_name:f.y$.FAVORITE_PAIRS_SET,data:[{pairs:[...this.favoriteAssets.keys()],rev:this.favoriteAssetsRevision}]}).onResponse(((s,i)=>{i?(this.noticeService.add({id:i.code,layout:S.G0,collectionName:y.sm.TOP,layoutProps:{html:i.mess,msgType:"error"},notice:{period:6}}),a(i)):e()}))}constructor(e){super(e),this.api={selectPair:this.selectPair,isPairActive:this.isPairActive,getPair:this.getPair,getDefPair:this.getDefPair}}};(0,h.gn)([(0,g.onBind)(_.UI_SERVICE,_.STATISTICS_SERVICE,_.NOTICE_SERVICE)],U.prototype,"onBind",null),(0,h.gn)([(0,g.onStart)(_.APP_SERVICE)],U.prototype,"onStart",null),(0,h.gn)([g.onStop],U.prototype,"onStop",null),U=(0,h.gn)([(0,g.bindAs)(_.PAIR_SERVICE_FX)],U);const H=U;let G=class PairServiceSpt extends PairService{get cachedFavoriteAssets(){return E.d.spt.FAVORITE_ASSETS}onBind(e,a,s){this.uiService=e,this.statisticsService=a,this.noticeService=s}subscribeSocketEvents(){this.webSocket.onPush(((e,a)=>{if(e===f.F$.INSTRUMENT_CHANGE){const e=a.reduce(((e,a)=>{const s=a.id&&this.pairCollection.get(a.id);return s&&e.push(p.parseToUpdate(a,s)),e}),[]);this.pairCollection.update(e,{add:!1,remove:!1})}else e===f.F$.FAVORITE_PAIRS_CHANGE&&this.setFavoriteAssets(a)})),this.webSocket.subscribeEventList([f.gi.INSTRUMENT_CHANGE,f.gi.FAVORITE_PAIRS_CHANGE])}onStart(e){return this.appService=e,this.initPairCollection(p,this.appService.pairsSpt||[]),this.subscribeSocketEvents(),!0}setFavoriteAssets(e){const a=-1===this.favoriteAssetsRevision;super.setFavoriteAssets(e),a&&this.migrateFavoriteLS(E.d.spt.NAMESPACE,E.d.spt.FAVORITE_ASSETS)}onStop(){this.disposers.forEach((e=>{e()})),this.webSocket.clear()}sendFavoriteChanges(e,a){this.webSocket.request({event_name:f.F$.FAVORITE_PAIRS_SET,data:[{pairs:[...this.favoriteAssets.keys()],rev:this.favoriteAssetsRevision}]}).onResponse(((s,i)=>{i?(this.noticeService.add({id:i.code,layout:S.G0,collectionName:y.sm.TOP,layoutProps:{html:i.mess,msgType:"error"},notice:{period:6}}),a(i)):e()}))}constructor(e){super(e),this.api={selectPair:this.selectPair,isPairActive:this.isPairActive,getPair:this.getPair,getDefPair:this.getDefPair},this.loading=!1}};(0,h.gn)([v.observable],G.prototype,"loading",void 0),(0,h.gn)([(0,g.onBind)(_.UI_SERVICE,_.STATISTICS_SERVICE,_.NOTICE_SERVICE)],G.prototype,"onBind",null),(0,h.gn)([(0,g.onStart)(_.APP_SERVICE)],G.prototype,"onStart",null),(0,h.gn)([g.onStop],G.prototype,"onStop",null),G=(0,h.gn)([(0,g.bindAs)(_.PAIR_SERVICE_SPT)],G);const V=G},59070:(e,a,s)=>{"use strict";s.d(a,{p:()=>PairsRateUpdateService});var i=s(59312),r=s(60521),n=s(28660),o=s(64489),l=s(26338),c=s(62540);class PairsRateUpdateService{startUpdatePairRates(){this.websocket.subscribePairsRate()}stopUpdatePairRates(){this.websocket.unsubscribePairsRate()}onStop(){this.websocket.clear()}constructor(e){this.websocket=e,this.updatePairRates=(0,o.Z)((e=>{(0,l.Z)(this.pairsRateHash,e)||(this.pairsRateHash=(0,c.Z)(e))}),1e3),this.websocket=e,this.websocket.listen()}}(0,i.gn)([r.observable],PairsRateUpdateService.prototype,"pairsRateHash",void 0),(0,i.gn)([r.action],PairsRateUpdateService.prototype,"updatePairRates",void 0),(0,i.gn)([n.onStop],PairsRateUpdateService.prototype,"onStop",null)},9842:(e,a,s)=>{"use strict";s.d(a,{g:()=>d});var i=s(59312),r=s(28660),n=s(26763),o=s(59070),l=s(66602),c=s(94381);let d=class PairsRateUpdateServiceFx extends o.p{constructor(e){super(new c.X(e.add())),this.websocket.onChangePairsRate((e=>this.updatePairRates(l.R.parse(e))))}};d=(0,i.gn)([(0,r.bindAs)(n.PAIRS_RATE_UPDATE_SERVICE_FX)],d)},94381:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(23934),r=s(86933);class WebSocket{onChangePairsRate(e){this.events.on(r.y$.CANDLES_ALL,(a=>a&&e(a)))}subscribePairsRate(){this.connect.request({event_name:r.y$.CANDLES_ALLSUB})}unsubscribePairsRate(){this.connect.request({event_name:r.y$.CANDLES_ALLUNSUB})}listen(){this.connect.onPush(((e,a)=>{e===r.y$.CANDLES_ALL&&this.events.emit(r.y$.CANDLES_ALL,a)})),this.connect.subscribeEventList([r.nE.CANDLES_ALL])}clear(){this.connect.unSubscribeEventList([r.nE.CANDLES_ALL]),this.connect.clear(),this.events.all.clear()}constructor(e){this.events=(0,i.Z)(),this.connect=e}}},49876:(e,a,s)=>{"use strict";s.d(a,{g:()=>i.g});var i=s(9842)},66602:(e,a,s)=>{"use strict";s.d(a,{R:()=>PairsRateTransformer});var i=s(37323),r=s(64356);class PairsRateTransformer{static parse(e){return e.reduce(((e,a)=>(0,r.Z)((0,i.Z)({},e),{[a.p]:{rate:a.close}})),{})}}},72655:(e,a,s)=>{"use strict";s.d(a,{g:()=>i.g,o:()=>r.o});var i=s(49876),r=s(77487)},70933:(e,a,s)=>{"use strict";s.d(a,{o:()=>d});var i=s(59312),r=s(28660),n=s(26763),o=s(59070),l=s(47281),c=s(69687);let d=class PairsRateUpdateServiceSpt extends o.p{startUpdatePairRates(){var e;null===(e=this.websocket.subscribePairsRate())||void 0===e||e.then((e=>this.updatePairRates(l.R.parse(e)))).catch((()=>null))}constructor(e){super(new c.X(e.add())),this.websocket.onChangePairsRate((e=>this.updatePairRates(l.R.parse(e))))}};d=(0,i.gn)([(0,r.bindAs)(n.PAIRS_RATE_UPDATE_SERVICE_SPT)],d)},69687:(e,a,s)=>{"use strict";s.d(a,{X:()=>WebSocket});var i=s(23934),r=s(86933);class WebSocket{onChangePairsRate(e){this.events.on(r.F$.ASSETS_LIST_CHANGE,(a=>a&&e(a)))}subscribePairsRate(){return new Promise(((e,a)=>{this.connect.request({event_name:r.F$.ASSETS_LIST_SUBSCRIBE}).onResponse(((s,i)=>{i?a(i):e(s)})).onFail((()=>a()))}))}unsubscribePairsRate(){this.connect.request({event_name:r.F$.ASSETS_LIST_UNSUBSCRIBE})}listen(){this.connect.onPush(((e,a)=>{e===r.F$.ASSETS_LIST_CHANGE&&this.events.emit(r.F$.ASSETS_LIST_CHANGE,a)})),this.connect.subscribeEventList([r.gi.ASSETS_LIST_CHANGE])}clear(){this.connect.unSubscribeEventList([r.gi.ASSETS_LIST_CHANGE]),this.connect.clear(),this.events.all.clear()}constructor(e){this.events=(0,i.Z)(),this.connect=e}}},77487:(e,a,s)=>{"use strict";s.d(a,{o:()=>i.o});var i=s(70933)},47281:(e,a,s)=>{"use strict";s.d(a,{R:()=>PairsRateTransformer});var i=s(37323),r=s(64356);class PairsRateTransformer{static parse(e){return e.reduce(((e,a)=>(0,r.Z)((0,i.Z)({},e),{[a.ticker]:{rate:a.ask_price,minRate:a.ask_min_amount}})),{})}}},82571:(e,a,s)=>{"use strict";s.d(a,{$:()=>r,T:()=>i});const i={ADDED:"added",DELETED:"deleted"},r={FX:"fx",FTT:"ftt",SPT:"spt"}},5240:(e,a,s)=>{"use strict";s.d(a,{C:()=>d,L:()=>c});var i=s(59312),r=s(62540),n=s(28660),o=s(26763),l=s(10002);let c=class RateService{onStart(e){return this.rateCollection=new l.C((0,r.Z)(e.rateCollection)),!0}getRate(e){return this.rateCollection.getById(e)}findRate(e){return this.rateCollection.getFirst(e)}getDefaultRate(){var e;return null!==(e=this.rateCollection.getFirst({selected:!0}))&&void 0!==e?e:this.rateCollection.models[0]}getDefaultRateForFormat(e){return this.rateCollection.getFirst({format:e,selected:!0})||this.rateCollection.getFirst({format:e})}getRateByIdAndFormat(e,a){const s=this.rateCollection.getById(e);return void 0===s||s.format===a?s:this.rateCollection.getFirst({format:a,step:s.step})}getRateByTimeFrameAndFormat(e,a){return this.rateCollection.getFirst({format:a,step:e})}constructor(){this.rateCollection=new l.C}};(0,i.gn)([(0,n.onStart)(o.APP_SERVICE)],c.prototype,"onStart",null),c=(0,i.gn)([(0,n.bindAs)(o.RATE_SERVICE)],c);const d={LINE:"line",BAR:"bar",CANDLE:"candle",HEIKEN_ASHI:"heiken-ashi"}},9664:(e,a,s)=>{"use strict";s.d(a,{g:()=>f});var i=s(59312),r=s(28660),n=s(60521),o=s(45797),l=s(75882),c=s(66713),d=s(26763),u=s(83946),m=s(65095),p=s(65423),h=s(2387),v=s(38925),g=s(98439),_=s(66384);let f=class SettingsService{onStart(e){return this.appService=e,this.availableProjects=e.availableProjects,this.isForex=e.availableProjects.fx,this.isBinary=e.availableProjects.bo,this.getSettingsValues(),e.availableProjects.bo||this.deactivateSetting(g.E.MARTINGALE),!0}onBind(e,a,s,i,r,n){this.dealServiceBo=e,this.dealServiceFx=a,this.pageService=s,this.uiService=i,this.languageService=r,this.soundService=n}onBindBO(e){this.tradeManagerService=e}onBindFX(e){this.dealFormStore=e}selectTab(e){this.currentTab=e}changeSetting(e,a){this.settingsConfig.forEach((s=>{s.id===e&&this.setSettingValue(s,a)}))}get userOptionsValues(){const e={};return this.settingsConfig.forEach((a=>{e[a.userOptionsKey]=a.isEnabled})),e}deactivateSetting(e){const a=this.settingsConfig.find((a=>a.id===e));a&&(a.isEnabled=!1,a.isHidden=!0)}setSettingValue(e,a){e.isEnabled=a,this.appService.setOption(e.userOptionsKey,a),e.updateFunction&&e.updateFunction(e.isEnabled)}getSettingsValues(){this.settingsConfig.forEach((e=>{e.availableProjects&&(e.availableProjects.find((e=>this.availableProjects[e]))||(e.isHidden=!0)),e.userOptionsKey&&!e.isHidden&&(e.isEnabled=this.appService.getOption(e.userOptionsKey))}))}setStrikesVisible(e){this.dealServiceBo&&this.dealServiceBo.setStrikesVisible(e)}setIsOneClickPopup(e){const a=this.appService.availableProjects;a.bo&&this.dealServiceBo&&this.dealServiceBo.setIsOneClickPopup(e),a.fx&&this.dealServiceFx&&this.dealServiceFx.setIsOneClickPopup(e)}setIndicatorsEnabled(e){this.uiService&&this.uiService.setIndicatorsEnabled(e)}setChartTypesEnabled(e){this.uiService&&this.uiService.setChartTypesEnabled(e)}setShowLimits(e){this.dealServiceFx&&this.dealServiceFx.setShowLimits(e)}setIsOneClickSell(e){const a=this.appService.availableProjects;a.bo&&this.dealServiceBo&&this.dealServiceBo.setIsOneClickSell(e),a.fx&&this.dealServiceFx&&this.dealServiceFx.setIsOneClickSell(e)}setShowOrders(e){const a=this.appService.availableProjects;a.bo&&this.dealServiceBo&&this.dealServiceBo.setShowOrders(e),a.fx&&this.dealServiceFx&&this.dealServiceFx.setShowOrders(e)}setMartingale(e){this.appService.availableProjects.bo&&this.dealServiceBo&&this.dealServiceBo.setMartingale(e)}constructor(){this.api={changeSetting:this.changeSetting},this.currentTab="appearanceSettings",this.settingsConfig=[{group:"deals",id:g.E.ONE_CLICK_POPUP,isEnabled:!1,isHidden:!1,text:o.NW.formatMessage(_.X.oneClickPopUpText),title:o.NW.formatMessage(_.X.oneClickPopUp),updateFunction:this.setIsOneClickPopup.bind(this),userOptionsKey:l.a.IS_ONE_CLICK_POPUP},{group:"deals",id:g.E.ONE_CLICK_TRADE,isEnabled:!1,isHidden:!1,text:o.NW.formatMessage(_.X.oneClickTradeText),title:o.NW.formatMessage(_.X.oneClickTrade),updateFunction:this.setIsOneClickSell.bind(this),userOptionsKey:l.a.IS_ONE_CLICK_TRADE_DEAL},{availableProjects:[c.Fw.BINARY,c.Fw.FOREX],group:"deals",id:g.E.SHOW_ORDERS,isEnabled:!1,isHidden:!1,PreviewPic:p.h,text:o.NW.formatMessage(_.X.showOrdersText),title:o.NW.formatMessage(_.X.showOrders),updateFunction:this.setShowOrders.bind(this),userOptionsKey:l.a.SHOW_ORDERS},{group:"deals",id:g.E.MARTINGALE,isEnabled:!1,isHidden:!1,text:o.NW.formatMessage(_.X.martinGaleText),title:o.NW.formatMessage(_.X.martinGaleTitle),updateFunction:this.setMartingale.bind(this),userOptionsKey:l.a.MARTINGALE_MULTIPLICATION},{group:"forex",id:g.E.SHOW_LIMITS,isEnabled:!1,isHidden:!1,PreviewPic:h.f,text:o.NW.formatMessage(_.X.showLimitsText),title:o.NW.formatMessage(_.X.showLimits),updateFunction:this.setShowLimits.bind(this),userOptionsKey:l.a.DEAL_FORM_SHOW_LIMITS},{availableProjects:[c.Fw.BINARY],group:"chart",id:g.E.STRIKES_ON_THE_CHART,isEnabled:!1,isHidden:!1,PreviewPic:v.D,text:o.NW.formatMessage(_.X.strikesOnTheChartText),title:o.NW.formatMessage(_.X.strikesOnTheChart),updateFunction:this.setStrikesVisible.bind(this),userOptionsKey:l.a.DIGITAL_STRIKES_VISIBLE},{group:"chart",id:g.E.INDICATORS,isEnabled:!1,isHidden:!1,PreviewPic:m.E,text:o.NW.formatMessage(_.X.indicatorsText),title:o.NW.formatMessage(_.X.indicators),updateFunction:this.setIndicatorsEnabled.bind(this),userOptionsKey:l.a.INDICATORS_ENABLED},{group:"chart",id:g.E.CHART_TYPES,isEnabled:!1,isHidden:!1,PreviewPic:u.m,text:o.NW.formatMessage(_.X.chartTypesText),title:o.NW.formatMessage(_.X.chartTypes),updateFunction:this.setChartTypesEnabled.bind(this),userOptionsKey:l.a.CHART_TYPES_ENABLED}]}};(0,i.gn)([n.observable],f.prototype,"currentTab",void 0),(0,i.gn)([n.observable],f.prototype,"settingsConfig",void 0),(0,i.gn)([(0,r.onStart)(d.APP_SERVICE)],f.prototype,"onStart",null),(0,i.gn)([(0,r.onBind)(d.DEAL_SERVICE_BO,d.DEAL_SERVICE_FX,d.PAGE_SERVICE,d.UI_SERVICE,d.LANGUAGE_SERVICE,d.SOUND_SERVICE)],f.prototype,"onBind",null),(0,i.gn)([(0,r.onBind)(d.TRADE_MANAGER_SERVICE)],f.prototype,"onBindBO",null),(0,i.gn)([(0,r.onBind)(d.DEAL_FORM_STORE)],f.prototype,"onBindFX",null),(0,i.gn)([n.action],f.prototype,"selectTab",null),(0,i.gn)([n.action],f.prototype,"changeSetting",null),(0,i.gn)([n.computed],f.prototype,"userOptionsValues",null),(0,i.gn)([n.action],f.prototype,"deactivateSetting",null),f=(0,i.gn)([(0,r.bindAs)(d.SETTINGS_SERVICE)],f)},98439:(e,a,s)=>{"use strict";s.d(a,{E:()=>i});const i={ONE_CLICK_POPUP:"ONE_CLICK_POPUP",ONE_CLICK_TRADE:"ONE_CLICK_TRADE",SHOW_MULTIPLIER:"SHOW_MULTIPLIER",SHOW_LIMITS:"SHOW_LIMITS",STRIKES_ON_THE_CHART:"STRIKES_ON_THE_CHART",INDICATORS:"INDICATORS",CHART_TYPES:"CHART_TYPES",SHOW_ORDERS:"SHOW_ORDERS",MARTINGALE:"MARTINGALE"}},66384:(e,a,s)=>{"use strict";s.d(a,{X:()=>i});const i=(0,s(18985).vU)({oneClickPopUp:{id:"one_click_trade",defaultMessage:"One-click trade"},oneClickPopUpText:{id:"one_click_trade_test",defaultMessage:"Do not show the warning, execute trades in one click"},oneClickTrade:{id:"one_click_close",defaultMessage:"Close a trade in one click"},oneClickTradeText:{id:"one_click_close_text",defaultMessage:"Do not show this warning and close a trade in one click"},showMultiplier:{id:"multiplikator",defaultMessage:"Multiplier"},showMultiplierText:{id:"multiplikator_text",defaultMessage:"You can choose multipliers when you close a trade based on your personal trading preferences"},showLimits:{id:"take_profit_stop_loss",defaultMessage:"The take profit and stop loss editor"},showLimitsText:{id:"take_profit_stop_loss_text",defaultMessage:"Automated services will help lock in the profit you want and limit a negative result"},strikesOnTheChart:{id:"strike_prices",defaultMessage:"Strike prices"},strikesOnTheChartText:{id:"strike_prices_text",defaultMessage:"Do not show strike prices"},indicators:{id:"indicators",defaultMessage:"Indicators"},indicatorsText:{id:"indicators_text",defaultMessage:"Show a list of indicators"},chartTypes:{id:"chart_types",defaultMessage:"Chart types"},chartTypesText:{id:"chart_types_text",defaultMessage:"Show a switch between chart types"},showOrders:{id:"orders",defaultMessage:"Orders"},showOrdersText:{id:"show-orders",defaultMessage:"Show orders"},martinGaleText:{id:"martingale_setting_text",defaultMessage:"This function will multiply or divide the trade amount by 2 in FTT mode"},martinGaleTitle:{id:"martingale_setting_title",defaultMessage:"Martingale"}})},99538:(e,a,s)=>{"use strict";s.d(a,{E:()=>r.E,g:()=>i.g});var i=s(9664),r=s(98439)},40565:(e,a,s)=>{"use strict";s.d(a,{G:()=>p,U:()=>h});var i=s(59312),r=s(60521),n=s(28660),o=s(23735),l=s(57615),c=s(29042),d=s(26763),u=s(8275),m=s(14803);let p=class SideBarService{onStart(e){return this.appService=e,!0}onBind(e,a){this.tradeManagerService=a,this.uiService=e,this.createReactions(),this.showSidebarMajorFromCache()}createReactions(){this.disposers=[(0,r.reaction)((()=>{var e;return null===(e=this.tradeManagerService)||void 0===e?void 0:e.lastStartedFrame}),(e=>{e&&this.init()})),(0,r.reaction)((()=>{var e;return(null===(e=this.uiService)||void 0===e?void 0:e.windowResizeStop)||0}),(()=>{this.isMultiSideBar=window.innerWidth>=1191,this.adaptForResolution()}),{fireImmediately:!0})]}init(){this.inited=!0,this.showSidebarMinorFromCache()}get isIndicatorMenuShown(){return!(!this.sideBarMinor.isOpen||!this.sideBarMinor.scope.activeItem||this.sideBarMinor.scope.activeItem.id!==m.KO.INDICATORS&&this.sideBarMinor.scope.activeItem.id!==m.KO.STRATEGY_DETAILS)}get isTechAnalysisLastOpened(){const e=this.storage.get("lastOpenedMinorPanel");return e===m.KO.TECH_ANALYSIS_LIST||e===m.KO.TECH_ANALYSIS_ACTIVE||e===m.KO.TECH_ANALYSIS_REMOVE}sendStat(e,a,s){"backward"!==s?a!==u.KO.MARKET_PLACE_DETAILS&&(a!==u.KO.MARKET_PLACE_CATEGORIES?a!==u.KO.TRADING_SIGNALS||(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"signals",eventAction:"signals_click",eventLabel:"signals_click"}):(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"marketplace_open",eventLabel:"from_menu"})):(0,o.L)({event:"uaGtmEvents_clicks",eventAction:"back",eventCategory:"sidebar",eventLabel:"back-btn"})}goTo(e){this.sendStat(null,e,"forward"),this.sideBarMinor.isOpen&&!this.isMultiSideBar&&(this.switchOffAnimation(),this.sideBarMinor.close()),this.sideBarMajor.openById(e),this.storage.set("lastOpenedSidebar","major"),this.storage.set("lastOpenedMajorPanel",e)}onCloseMajor(){"major"===this.storage.get("lastOpenedSidebar")&&this.storage.delete("lastOpenedSidebar"),this.storage.delete("lastOpenedMajorPanel")}goToMinor(e){this.sideBarMajor.isOpen&&!this.isMultiSideBar&&(this.switchOffAnimation(),this.sideBarMajor.close()),e!==m.KO.ASSETS&&this.sideBarMinor.setMinimized(!1),this.sideBarMinor.openById(e),this.storage.set("lastOpenedSidebar","minor"),this.storage.set("lastOpenedMinorPanel",e)}toggleMinor(e){this.sideBarMinor.isPanelOpened(e)?this.sideBarMinor.close():this.goToMinor(e)}onCloseMinor(){"minor"===this.storage.get("lastOpenedSidebar")&&this.storage.delete("lastOpenedSidebar"),this.storage.delete("lastOpenedMinorPanel")}toggle(e){var a;this.sideBarMajor.isOpen&&this.sideBarMajor.scope.activeItem&&this.sideBarMajor.scope.activeItem.id===e?this.sideBarMajor.close():this.goTo(e),(null===(a=this.sideBarMajor.scope.activeItem)||void 0===a?void 0:a.id)===e&&(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar",eventAction:this.sideBarMajor.isOpen?"open":"close",eventLabel:e})}close(){this.sideBarMajor.close()}closeMinor(){this.sideBarMinor.close()}get isSideBarCollapsed(){return this.sideBarMajor.isOpen}onStop(){this.disposers&&this.disposers.forEach((e=>{e()}))}adaptForResolution(){!this.isMultiSideBar&&this.sideBarMajor.isOpen&&this.sideBarMinor.isOpen&&("major"===this.storage.get("lastOpenedSidebar")?this.closeMinor():"minor"===this.storage.get("lastOpenedSidebar")&&this.close())}getMajorActivePanel(){var e,a;return this.sideBarMajor.isOpen&&null!==(a=null===(e=this.sideBarMajor.scope.activeItem)||void 0===e?void 0:e.id)&&void 0!==a?a:null}getMajorActiveScope(){var e;return this.sideBarMajor.isOpen&&null!==(e=this.sideBarMajor.scope.id)&&void 0!==e?e:null}getMinorActivePanel(){var e,a;return this.sideBarMinor.isOpen&&null!==(a=null===(e=this.sideBarMinor.scope.activeItem)||void 0===e?void 0:e.id)&&void 0!==a?a:null}getMinorActiveScope(){var e;return this.sideBarMinor.isOpen&&null!==(e=this.sideBarMajor.scope.id)&&void 0!==e?e:null}switchOffAnimation(){this.sideBarMajor.switchAnimation(!1),this.sideBarMinor.switchAnimation(!1),setTimeout((()=>{this.sideBarMajor.switchAnimation(!0),this.sideBarMinor.switchAnimation(!0)}),100)}showSidebarMajorFromCache(){("major"===this.storage.get("lastOpenedSidebar")||this.isMultiSideBar)&&"trades"===this.storage.get("lastOpenedMajorPanel")&&this.goTo(u.KO.TRADES)}showSidebarMinorFromCache(){("minor"===this.storage.get("lastOpenedSidebar")||this.isMultiSideBar)&&this.storage.get("lastOpenedMinorPanel")===m.KO.ASSETS&&this.goToMinor(m.KO.ASSETS)}constructor(e,a){this.isMultiSideBar=window.innerWidth>=1200,this.inited=!1,this.majorActivePanel=(0,r.computed)((()=>this.getMajorActivePanel())),this.minorActivePanel=(0,r.computed)((()=>this.getMinorActivePanel())),this.storage=new l._({namespace:d.SIDEBAR_SERVICE,backend:new c.u}),this.onCloseMinor=this.onCloseMinor.bind(this),this.onCloseMajor=this.onCloseMajor.bind(this),this.sideBarMajor=new u.N({onClose:this.onCloseMajor,onBack:()=>{var e;const a=this.sideBarMajor.scope;this.sendStat((null==a||null===(e=a.activeItem)||void 0===e?void 0:e.id)||null,a.stack[a.stack.length-2].id,"backward")}},e),this.sideBarMinor=new m.vw({onClose:this.onCloseMinor},a),this.sendStat=this.sendStat.bind(this),this.goTo=this.goTo.bind(this),this.goToMinor=this.goToMinor.bind(this),this.toggleMinor=this.toggleMinor.bind(this)}};function h(e,a,s){return e(new p(a,s),{config:p.binderConfig})}(0,i.gn)([(0,n.onStart)(d.APP_SERVICE)],p.prototype,"onStart",null),(0,i.gn)([(0,n.onBind)(d.UI_SERVICE,d.TRADE_MANAGER_SERVICE)],p.prototype,"onBind",null),(0,i.gn)([r.computed],p.prototype,"isSideBarCollapsed",null),(0,i.gn)([n.onStop],p.prototype,"onStop",null),p=(0,i.gn)([(0,n.bindAs)(d.SIDEBAR_SERVICE)],p)},13424:(e,a,s)=>{"use strict";s.d(a,{G:()=>i.G,U:()=>i.U});var i=s(40565)},88834:(e,a,s)=>{"use strict";s.d(a,{W:()=>TradeFrameService});var i=s(37323),r=s(64356),n=s(59312),o=s(60521),l=s(28660),c=s(66713),d=s(27967),u=s(61075),m=s(26763),p=s(57615),h=s(29042),v=s(66531);class TradeFrameService{get settings(){return{}}onStart(e){return this.appService=e,!0}onStop(){this.disposers.forEach((e=>e())),this.tradeManagerService.onFrameStop(this.tradeFrameId)}init(e,a,s,i,r,n){var o;this.tradeManagerService=e,this.rateService=a,this.statisticService=s,this.uiService=i,this.pairService=r,this.accountService=n,this.initSelectedPair(),this.selectedRate=null!==(o=this.rateService.getRate(this.rateId))&&void 0!==o?o:this.rateService.getDefaultRate(),this.initReaction()}initSelectedPair(){const e=this.pairService.getPairNonStrict(this.initialSettings.pairId),a={[c.yy]:this.appService.pairDefaultBo||d.d,[c.c0]:this.appService.pairDefaultFx||d.d,[c.ik]:this.appService.pairDefaultSpt||u.R}[this.project];this.selectedPair=e||this.pairService.getPair(a),this.pairId=this.selectedPair.id}cachePrevProject(e){TradeFrameService.storageService.set("prevProject",e)}getPrevProject(){return TradeFrameService.storageService.get("prevProject")}hasMultipleTradeFrame(){return this.tradeManagerService.tradeFramesLength>1}initReaction(){this.disposers.push((0,o.reaction)((()=>{var e,a,s;return(null===(e=this.selectedPair)||void 0===e?void 0:e.locked)||(null===(a=this.selectedPair)||void 0===a?void 0:a.lockedTrading)||(null===(s=this.selectedPair)||void 0===s?void 0:s.lockedBuy)}),(e=>{e&&this.pairService.fetchRecommendedAsset(this.project)}),{fireImmediately:!0}),(0,o.reaction)((()=>{const e=this.rateService.getRate(this.rateId);if(e)return(0,r.Z)((0,i.Z)({},e),{pairId:this.pairId})}),(e=>{e&&(this.selectedRate.type!==e.type&&(this.rateIdPrevType=this.selectedRate.id),this.selectedRate.step!==e.step&&this.statisticService.sendStatistic({event:"timeframe_change",value_from:this.selectedRate.step,value_to:e.step,live_time:Math.floor(Number(new Date)/1e3)-this.uiService.documentVisibilityTime}),this.selectedRate.format!==e.format&&this.statisticService.sendStatistic({event:"chart_type_change",value_from:this.selectedRate.format,value_to:e.format,live_time:Math.floor(Number(new Date)/1e3)-this.uiService.documentVisibilityTime}),this.selectedRate=e)})))}setDealSum(e){this.dealSum=e}selectRate(e){this.rateId=e}selectRateByFormat(e){if(this.selectedRate.format===e)return;const a=this.getRateByFormat(e);a&&(this.rateId=a.id)}getRateByFormat(e){const a=this.rateService.getDefaultRateForFormat(e);if(a){if(a.type!==this.selectedRate.type){const s=this.rateService.getRateByIdAndFormat(this.rateIdPrevType,e);return void 0===s?a:s}{const a=this.rateService.findRate({format:e,step:this.selectedRate.step});if(a)return a}}}constructor(e){this.disposers=[],this.api={selectPair:this.selectPair},this.selectProject=e=>{this.project=e,(0,v.n)(e)},this.dealSum=0,this.createSelectPair=e=>(a,s)=>{const i=s||e,r=this.pairService.getPair(a);i!==this.project?(this.pairId=a,this.selectProject(i)):r&&(this.pairId=a,this.selectedPair=r)},this.initialSettings=(0,i.Z)({},e.initialSettings),this.tradeFrameId=e.tradeFrameId,this.rateId=this.initialSettings.rateId,this.rateIdPrevType=this.initialSettings.rateIdPrevType,this.project=this.initialSettings.project,this.dealSum=this.initialSettings.dealSum,this.pairId=this.initialSettings.pairId,this.binder=e.binder}}TradeFrameService.storageService=new p._({namespace:"TRADE_FRAME_SERVICE",backend:new h.u}),(0,n.gn)([o.observable],TradeFrameService.prototype,"project",void 0),(0,n.gn)([o.observable],TradeFrameService.prototype,"pairId",void 0),(0,n.gn)([o.observable],TradeFrameService.prototype,"rateId",void 0),(0,n.gn)([o.observable],TradeFrameService.prototype,"rateIdPrevType",void 0),(0,n.gn)([o.observable],TradeFrameService.prototype,"dealSum",void 0),(0,n.gn)([o.observable],TradeFrameService.prototype,"selectedPair",void 0),(0,n.gn)([o.observable],TradeFrameService.prototype,"selectedRate",void 0),(0,n.gn)([o.computed],TradeFrameService.prototype,"settings",null),(0,n.gn)([(0,l.onStart)(m.APP_SERVICE)],TradeFrameService.prototype,"onStart",null),(0,n.gn)([l.onStop],TradeFrameService.prototype,"onStop",null),(0,n.gn)([o.action.bound],TradeFrameService.prototype,"setDealSum",null),(0,n.gn)([o.action],TradeFrameService.prototype,"createSelectPair",void 0)},31430:(e,a,s)=>{"use strict";s.d(a,{W:()=>d});var i=s(59312),r=s(60521),n=s(28660),o=s(66713),l=s(26763),c=s(88834);let d=class TradeFrameService extends c.W{setDealDuration(e){this.dealDuration=e}setDealTimeClose(e){this.dealTimeClose=e}setDealPickerType(e){this.dealPickerType=e}get settings(){return{pairId:this.pairId,rateId:this.rateId,project:this.project,rateIdPrevType:this.rateIdPrevType,dealDuration:this.dealDuration,dealTimeClose:this.dealTimeClose,dealPickerType:this.dealPickerType,dealSum:this.dealSum}}onBind(e,a,s,i,r,n){super.init(e,a,s,i,r,n),this.initialSettings.dealDuration&&(this.dealDuration=this.initialSettings.dealDuration),this.initialSettings.dealTimeClose&&(this.dealTimeClose=this.initialSettings.dealTimeClose),this.initialSettings.dealPickerType&&(this.dealPickerType=this.initialSettings.dealPickerType)}constructor(e){super(e),this.dealDuration=0,this.dealTimeClose=0,this.dealPickerType="duration",this.selectPair=this.createSelectPair(o.yy)}};(0,i.gn)([r.observable],d.prototype,"dealDuration",void 0),(0,i.gn)([r.observable],d.prototype,"dealTimeClose",void 0),(0,i.gn)([r.observable],d.prototype,"dealPickerType",void 0),(0,i.gn)([r.computed],d.prototype,"settings",null),(0,i.gn)([(0,n.onBind)(l.TRADE_MANAGER_SERVICE,l.RATE_SERVICE,l.STATISTICS_SERVICE,l.UI_SERVICE,l.PAIR_SERVICE_BO,l.ACCOUNT_SERVICE)],d.prototype,"onBind",null),d=(0,i.gn)([(0,n.bindAs)(l.TRADE_FRAME_SERVICE)],d)},1807:(e,a,s)=>{"use strict";s.d(a,{W:()=>d});var i=s(59312),r=s(60521),n=s(28660),o=s(88834),l=s(66713),c=s(26763);let d=class TradeFrameService extends o.W{get settings(){return{pairId:this.pairId,rateId:this.rateId,project:this.project,rateIdPrevType:this.rateIdPrevType,dealSum:this.dealSum,multiplicator:this.multiplicator,stopLoss:this.stopLoss,takeProfit:this.takeProfit}}onBind(e,a,s,i,r,n){super.init(e,a,s,i,r,n),this.initialSettings.multiplicator&&(this.multiplicator=this.initialSettings.multiplicator||null),this.initialSettings.takeProfit&&(this.takeProfit=this.initialSettings.takeProfit||null),this.initialSettings.stopLoss&&(this.stopLoss=this.initialSettings.stopLoss||null)}setMultiplicator(e){this.multiplicator=e}setLimit(e,a){"takeProfit"===e?this.takeProfit=(0,r.toJS)(a)||null:this.stopLoss=(0,r.toJS)(a)||null}constructor(e){super(e),this.multiplicator=0,this.stopLoss=null,this.takeProfit=null,this.selectPair=this.createSelectPair(l.c0)}};(0,i.gn)([r.observable],d.prototype,"multiplicator",void 0),(0,i.gn)([r.observable],d.prototype,"stopLoss",void 0),(0,i.gn)([r.observable],d.prototype,"takeProfit",void 0),(0,i.gn)([r.computed],d.prototype,"settings",null),(0,i.gn)([(0,n.onBind)(c.TRADE_MANAGER_SERVICE,c.RATE_SERVICE,c.STATISTICS_SERVICE,c.UI_SERVICE,c.PAIR_SERVICE_FX,c.ACCOUNT_SERVICE)],d.prototype,"onBind",null),d=(0,i.gn)([(0,n.bindAs)(c.TRADE_FRAME_SERVICE)],d)},28963:(e,a,s)=>{"use strict";s.d(a,{jF:()=>r.W,xs:()=>n.W,z2:()=>i.W});var i=s(31430),r=s(1807),n=s(61641)},61641:(e,a,s)=>{"use strict";s.d(a,{W:()=>d});var i=s(59312),r=s(60521),n=s(28660),o=s(88834),l=s(66713),c=s(26763);let d=class TradeFrameService extends o.W{get settings(){return{pairId:this.pairId,rateId:this.rateId,project:this.project,rateIdPrevType:this.rateIdPrevType,dealSum:this.dealSum}}setDisabledForm(e){this.isDisabledForm=e}getDisabledForm(){return this.isDisabledForm}onBind(e,a,s,i,r,n){super.init(e,a,s,i,r,n)}constructor(e){super(e),this.isDisabledForm=!1,this.selectPair=this.createSelectPair(l.ik)}};(0,i.gn)([r.computed],d.prototype,"settings",null),(0,i.gn)([r.observable],d.prototype,"isDisabledForm",void 0),(0,i.gn)([(0,n.onBind)(c.TRADE_MANAGER_SERVICE,c.RATE_SERVICE,c.STATISTICS_SERVICE,c.UI_SERVICE,c.PAIR_SERVICE_SPT,c.ACCOUNT_SERVICE)],d.prototype,"onBind",null),d=(0,i.gn)([(0,n.bindAs)(c.TRADE_FRAME_SERVICE)],d)},18296:(e,a,s)=>{"use strict";s.d(a,{R:()=>SelectDealOnChart});var i=s(26763);class SelectDealOnChart{init(e){return this.tradeManagerService=e,this}showDeal(e,a,s,r,n){s.selectAsset(e.pair.id,a).then((a=>{if(a&&a.binder&&e){const s=a.binder.getService(i.CHART_STORE);s&&(s.waitingForChartInit().then((()=>{s.showDealOnChart(e)})),n&&r.close())}}))}hideDeal(e,a){const s=e.pair.id,r=this.tradeManagerService.getActivesFrames(s,a);r&&r.length&&r.forEach((e=>{const a=e.serviceInterface;if(a&&a.binder){const e=a.binder.getService(i.CHART_STORE);e&&e.removeDealFromChart()}}))}}},60219:(e,a,s)=>{"use strict";s.d(a,{S:()=>ErrorBoundary});var i=s(27378),r=s(46122);class ErrorBoundary extends i.Component{static getDerivedStateFromError(e){return{error:e,hasError:!0}}componentDidCatch(e,a){const s=this.props,i=s.code,n=s.extraData,o=s.tags;r.b.sendException(e,a,i,n,o)}render(){const e=this.state.hasError,a=this.props,s=a.children,i=a.placeholder;return e?i||null:s}constructor(...e){super(...e),this.state={hasError:!1}}}},46122:(e,a,s)=>{"use strict";s.d(a,{b:()=>Reporter,x:()=>g});var i=s(29257),r=s(37323),n=s(64356),o=s(91709),l=s(64394),c=s(41496),d=s(22266),u=s(12033),m=s(22128),p=s(10592),h=s(66313),v=s(30654);const g={CRITICAL:"critical",DEBUG:"debug",ERROR:"error",FATAL:"fatal",INFO:"info",LOG:"log",WARNING:"warning"};class Reporter{static sendEvent(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.ERROR,s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;return(0,i.Z)((function*(){const i=yield Reporter.baseProps();if(console.error((0,r.Z)({body:e,level:a,code:s,extraData:n,tags:l},i)),!Reporter.isProduction)return;const c=a;try{if(Reporter.checkInstance(),Reporter.isException(e))Reporter.sendException(e,void 0,s,n,l);else{const a=(0,r.Z)({},Reporter.baseTags,s?{code:s}:{},l),d=(0,r.Z)({body:e},s?{code:s}:{},null!=n?n:{},i),u={id:i.userId,username:i.username};(0,o.$e)((i=>{i.setLevel(c),i.setExtras(d),i.setTags(a),i.setUser(u),(0,o.eN)({message:"string"==typeof e?e:s})}))}}catch(e){}}))()}static sendFeatureException(e,a,s){Reporter.sendException(a,s,void 0,void 0,e?{feature:e}:void 0)}static sendException(e,a,s,l){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,i.Z)((function*(){const i=yield Reporter.baseProps();if(console.error((0,r.Z)({error:e,errorInfo:a,code:s,extraData:l,tags:c},i)),Reporter.isProduction)try{Reporter.checkInstance();const p=(0,n.Z)((0,r.Z)({},Reporter.baseTags,s?{code:s}:null,c),{isTransportError:e instanceof m.P});var d,u;const h=(0,r.Z)({},null!=a?a:{},s?{code:s}:null,null!=l?l:{},e instanceof m.P?null!==(d={requestUrl:e.url})&&void 0!==d?d:"":{},e instanceof m.P&&e.status?{status:e.status}:{},e instanceof m.P&&null!==(u=e.meta)&&void 0!==u?u:{},i),v={id:i.userId,username:i.username};(0,o.$e)((a=>{a.setExtras(h),a.setTags(p),a.setUser(v),(0,o.Tb)(e,a)}))}catch(e){}}))()}static getInstance(){return Reporter.instance||(Reporter.instance=new Reporter(Reporter.dsnKey)),Reporter.instance}static get dsnKey(){return"https://0d001cb11f0345939d67bcd65e5a940b@o216679.ingest.sentry.io/1357575"}static baseProps(){return(0,i.Z)((function*(){var e,a;let s;try{s=yield v.$.userValues(["data"])}catch(e){s=null}const i={};var r;(null==s||null===(e=s.data)||void 0===e?void 0:e.id)&&(i.userId=String(null==s||null===(r=s.data)||void 0===r?void 0:r.id));return(null==s||null===(a=s.data)||void 0===a?void 0:a.name)&&(i.username=s.data.name),i}))()}static get baseTags(){return{twa:(0,p.OR)("olymptrade\\.lite")}}static get isProduction(){return(0,h.y)("production")}static isException(e){return"object"==typeof e&&null!==e&&"stack"in e&&"message"in e}static get integrations(){return[new d.I,new u.S,new l.jK.Breadcrumbs({console:!1}),new l.jK.LinkedErrors,new l.jK.GlobalHandlers]}static checkInstance(){Reporter.getInstance()}static beforeSend(e){if(!e.exception||!e.exception.values)return e;try{e.exception.values.forEach((e=>{e.stacktrace&&e.stacktrace.frames&&e.stacktrace.frames.forEach((e=>{if(e.filename&&e.filename.startsWith("http")&&e.filename.includes(Reporter.publicPathPrefix)){const s=new URL(e.filename);var a;const i=null!==(a=s.pathname.split(Reporter.publicPathPrefix)[1])&&void 0!==a?a:s.pathname.substring(s.pathname.lastIndexOf("/")+1);e.filename="".concat(s.origin,"/").concat(i)}}))}))}catch(e){console.error(e)}return e}constructor(e){const a="".concat(19132);(0,c.S1)({dsn:e,integrations:Reporter.integrations,release:a,environment:"production",beforeSend:Reporter.beforeSend,normalizeDepth:15})}}Reporter.publicPathPrefix="public/"},12484:(e,a,s)=>{"use strict";s.d(a,{SV:()=>i.S,bR:()=>r.b,x3:()=>r.x});var i=s(60219),r=s(46122)},12240:(e,a,s)=>{"use strict";var i={};s.r(i),s.d(i,{ar_AE:()=>cg,bn_IN:()=>dg,en_US:()=>ug,es_LA:()=>mg,fa_AF:()=>pg,fa_IR:()=>pg,fl:()=>hg,fr_FR:()=>vg,hi_IN:()=>gg,id_ID:()=>_g,ja_JP:()=>fg,ko_KR:()=>Eg,ms_MY:()=>Sg,pt_BR:()=>yg,ru_RU:()=>bg,th_TH:()=>Cg,tr_TR:()=>Tg,ur_PK:()=>Ag,vi_VN:()=>kg,zh_CN:()=>wg});s(19041),s(26914),s(41504),s(19975),s(85376),s(70950),s(68233),s(15296),s(58594),s(74467),s(29944),s(75093),s(9434),s(48868),s(16094),s(80153),s(82937),s(25989),s(8547),s(36809),s(67285),s(57519),s(37885),s(58143),s(54903),s(65785),s(31209),s(92672),s(54863),s(57109),s(58046),s(37268),s(10514),s(10086),s(1818),s(68049),s(42378),s(43839),s(71934),s(63045),s(27071),s(15761),s(42295),s(8600),s(32435),s(62307),s(13616),s(52963),s(73300),s(22665),s(34994),s(17503),s(86305),s(27425),s(79150),s(23673),s(77307),s(16103),s(42226),s(40334),s(2499),s(34901),s(52863),s(2051),s(40543),s(47753),s(73810),s(72290),s(22729),s(40524),s(84122),s(50828),s(4014),s(31341),s(16660),s(68564),s(62983),s(47610),s(45187),s(1679),s(40358),s(50903),s(48705),s(60528),s(71263),s(61609),s(25133),s(75610),s(13983),s(70071),s(31589),s(90917),s(65492),s(23942),s(77311),s(34726),s(72646),s(88489),s(61431),s(59760),s(70503),s(7056),s(63966),s(45112),s(12774),s(68902),s(13361),s(91331),s(67310),s(49634),s(83365),s(56837),s(99236),s(88348),s(13428),s(34540),s(17673),s(45647),s(4887),s(30850),s(57853),s(49227),s(23028),s(17608),s(81644),s(88170),s(46527),s(32323),s(98871),s(47002),s(39684),s(93833),s(59977),s(16856),s(61986),s(6345),s(91463),s(43028),s(90187),s(99941),s(67590),s(69223),s(15610),s(74370),s(99293),s(68209),s(44964),s(18739),s(38773),s(41243),s(86725),s(38019),s(45883),s(93438),s(4295),s(47656),s(51041),s(98457),s(54861),s(87282),s(77905),s(45263),s(5196),s(33382),s(86248),s(42668),s(17827);var r=s(97329),n=s(90411),o=s.n(n);void 0===window.ResizeObserver&&(window.ResizeObserver=r.default),o().polyfill();var l=s(60521),c=s(66713),d=s(86269),u=s(41365),m=s(66313),p=s(55953),h=s(86083),g=s.n(h),_=s(16890),f=s(33304),E=s(18985),S=s(45797),y=s(29258);const b=(0,E.vU)({currency_brl_1:{id:"currency_brl_1",defaultMessage:"real"},currency_brl_2:{id:"currency_brl_2",defaultMessage:"reals"},currency_brl_3:{id:"currency_brl_3",defaultMessage:"reals"},currency_eur_1:{id:"currency_eur_1",defaultMessage:"euros"},currency_eur_2:{id:"currency_eur_2",defaultMessage:"euros"},currency_eur_3:{id:"currency_eur_3",defaultMessage:"euros"},currency_rub_1:{id:"currency_rub_1",defaultMessage:"ruble"},currency_rub_2:{id:"currency_rub_2",defaultMessage:"rubles"},currency_rub_3:{id:"currency_rub_3",defaultMessage:"rubles"},currency_sign:{id:"currency_sign",defaultMessage:"."},currency_usd_1:{id:"currency_usd_1",defaultMessage:"dollar"},currency_usd_2:{id:"currency_usd_2",defaultMessage:"dollars"},currency_usd_3:{id:"currency_usd_3",defaultMessage:"dollars"},day:{id:"day",defaultMessage:"day"},days_num:{id:"days_num",defaultMessage:"day,days,days"},hour:{id:"hour",defaultMessage:"hour"},min:{id:"min",defaultMessage:"min"},months_0:{id:"months_0",defaultMessage:"January"},months_10:{id:"months_10",defaultMessage:"November"},months_11:{id:"months_11",defaultMessage:"December"},months_1:{id:"months_1",defaultMessage:"February"},months_2:{id:"months_2",defaultMessage:"March"},months_3:{id:"months_3",defaultMessage:"April"},months_4:{id:"months_4",defaultMessage:"May"},months_5:{id:"months_5",defaultMessage:"June"},months_6:{id:"months_6",defaultMessage:"July"},months_7:{id:"months_7",defaultMessage:"August"},months_8:{id:"months_8",defaultMessage:"September"},months_9:{id:"months_9",defaultMessage:"October"},months_num:{id:"months_num",defaultMessage:"month,months,months"},months_short_0:{id:"months_short_0",defaultMessage:"Jan."},months_short_10:{id:"months_short_10",defaultMessage:"Nov."},months_short_11:{id:"months_short_11",defaultMessage:"Dec."},months_short_1:{id:"months_short_1",defaultMessage:"Feb."},months_short_2:{id:"months_short_2",defaultMessage:"Mar."},months_short_3:{id:"months_short_3",defaultMessage:"Apr."},months_short_4:{id:"months_short_4",defaultMessage:"May"},months_short_5:{id:"months_short_5",defaultMessage:"June"},months_short_6:{id:"months_short_6",defaultMessage:"July"},months_short_7:{id:"months_short_7",defaultMessage:"Aug."},months_short_8:{id:"months_short_8",defaultMessage:"Sept."},months_short_9:{id:"months_short_9",defaultMessage:"Oct."},sec:{id:"sec",defaultMessage:"sec."},years_num:{id:"years_num",defaultMessage:"year,years,years"}}),C={Y:"getFullYear",y:function(e){return e.getFullYear().toString().substr(2,2)},n:function(e){return(e.getMonth()+1).toString()},m:function(e){var a=this.dateFormatData.n(e);return a.length>1?a:"0"+a},F:function(e){const a="months_".concat(e.getMonth());return S.NW.formatMessage(b[a])},f:function(e){return this.dateFormatData.F(e).toLowerCase()},M:function(e){const a="months_short_".concat(e.getMonth());return S.NW.formatMessage(b[a])},t:function(e){return this.dateFormatData.M(e).toLowerCase()},j:function(e){return e.getDate().toString()},d:function(e){var a=this.dateFormatData.j(e);return a.length>1?a:"0"+a},G:function(e){return e.getHours().toString()},H:function(e){var a=this.dateFormatData.G(e);return a.length>1?a:"0"+a},i:function(e){var a=e.getMinutes().toString();return a.length>1?a:"0"+a},s:function(e){var a=e.getSeconds().toString();return a.length>1?a:"0"+a},u:function(e){var a=e.getMilliseconds().toString();return a.length>2?a:a.length>1?"0"+a:"00"+a}},T={Y:"getUTCFullYear",y:function(e){return e.getUTCFullYear().toString().substr(2,2)},n:function(e){return(e.getUTCMonth()+1).toString()},m:function(e){var a=this.dateFormatDataUTC.n(e);return a.length>1?a:"0"+a},F:function(e){const a="months_".concat(e.getUTCMonth());return S.NW.formatMessage(b[a])},f:function(e){return this.dateFormatDataUTC.F(e).toLowerCase()},M:function(e){const a="months_short_".concat(e.getUTCMonth());return S.NW.formatMessage(b[a])},t:function(e){return this.dateFormatDataUTC.M(e).toLowerCase()},j:function(e){return e.getUTCDate().toString()},d:function(e){var a=this.dateFormatDataUTC.j(e);return a.length>1?a:"0"+a},G:function(e){return e.getUTCHours().toString()},H:function(e){var a=this.dateFormatDataUTC.G(e);return a.length>1?a:"0"+a},i:function(e){var a=e.getUTCMinutes().toString();return a.length>1?a:"0"+a},s:function(e){var a=e.getUTCSeconds().toString();return a.length>1?a:"0"+a},u:function(e){var a=e.getUTCMilliseconds().toString();return a.length>2?a:a.length>1?"0"+a:"00"+a}};function A(e,a,s,i){var r,n=new Date;i=i||y.CD,n.setTime(n.getTime()+1e3*s),r=n.toGMTString(),document.cookie=e+"="+a+"; expires="+r+"; path=/; domain=."+i}function k(e){var a=" "+document.cookie,s=" "+e+"=",i=null,r=0,n=0;return a.length>0&&-1!=(r=a.indexOf(s))&&(r+=s.length,-1==(n=a.indexOf(";",r))&&(n=a.length),i=unescape(a.substring(r,n))),i}function w(e){return"string"==typeof e?"true"===e:Boolean(e)}const N={dateFormatData:C,dateFormatDataUTC:T,langKeys:{ru:"ru_RU",en:"en_US",th:"th_TH",id:"id_ID",br:"pt_BR",pt:"pt_PT",es:"es_LA",tr:"tr_TR",vi:"vi_VN"},merge:function e(a,s,i){var r,n;for(r in s)s.hasOwnProperty(r)&&(void 0!==(n=a[r])?"object"!=typeof n||null===n||Array.isArray(n)||"__end"===r?a[r]=s[r]:e(n,s[r],i):i&&(a[r]=s[r]))},getByArray:function(e,a){var s,i,r;if(Array.isArray(a))for(s=0,i=a.length;s<i;s++){if(r=a[s],!e||void 0===e[r])return;e=e[r]}return e},formatAmount:function(e,a,s,i){return a=a||".","number"!=typeof e&&(e=Number(e)),e=e.toFixed(void 0===i?2:i),"."!==a&&(e=e.replace(".",a)),s?function(e,a){a&&(e=e.split("").reverse().join("").replace(/(\d{3})/g,"$1 ").replace(/\s$/,"").split("").reverse().join("")," "!==a&&(e=e.replace(/ /g,a)));return e}(e,s):e},formatDate:function(e,a,s){if("string"==typeof e){var i=e;if(e=new Date(e),isNaN(e.getTime()))return console.warn("wrong date",i),""}else"number"==typeof e&&(e=new Date(e));var r,n,o,l,c="";for(r=0,n=a.length;r<n;r++)o=a[r],/[YynmFfMtjdGHisu]/.test(o)?"function"==typeof(l=s?T[o]:C[o])?c+=l.call(this,e):"function"==typeof e[l]?c+=e[l]():c+=o:c+=o;return c},setCookie:A,getCookie:k,toBoolean:w,modelsArrayToJSON:function(e){var a=[];return Array.isArray(e)?f.ZP.each(e,(function(e){a.push(e.toJSON?e.toJSON():e)}),this):a=e.toJSON?e.toJSON():e,a},clone:function e(a){if(!a||"object"!=typeof a)return a;var s,i,r="function"==typeof a.pop?[]:{};for(s in a)a.hasOwnProperty(s)&&((i=a[s])&&"object"==typeof i&&"context"!==s&&!i.$class?r[s]=e(i):(i&&i.$class,r[s]=i));return r},trim:function(e,a){return a=a||"\\s+",e.replace(new RegExp("^"+a+"|"+a+"$","g"),"")},mergeClass:function(){var e="";return f.ZP.each(arguments,(function(a,s){e+=a?(e?" ":"")+a:""})),e},declOfNum:function(e,a,s){return s=s||/[,\uFF0C]/,e=Math.floor(e),"string"==typeof a&&(a=a.split(s)),a[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]},rand:function(e,a){return Math.floor(Math.random()*(a-e+1))+e},prepareParamsArray:function(e){return e.__isParams=!0,e},prepareActions:function(e){var a={};return function e(a,s,i){var r="";f.ZP.each(a,(function(a,n){r=i?i+"."+n:n,"object"!=typeof a||Array.isArray(a)||null===a?s[n]={type:r,value:a}:(s[n]={},e(a,s[n],r))}))}(e,a),a},syncToCookie:function e(a,s){if(Array.isArray(s))s.forEach(e.bind(this,a));else{var i=k(s.key);null!=i&&a.set(s.attr,(r=i,"boolean"===(n=s.type)?w(r):"number"===n?Number(r):r)),a.on("change:"+s.attr,(function(e,a){"boolean"===s.type&&s.remove&&!a?A(s.key,null,-1):A(s.key,a,s.period||604800)}),this)}var r,n},transformNotice:function(e,a,s){var i,r,n,o;if(a)return e.config.auto_close?n=e.config.auto_close:e.period?n=e.period:e.expired_at&&(n=e.expired_at-e.created_at),o=e.expired_at?e.created_at:0,i={props:{notice:{}}},r={id:e.id,canClose:e.config.can_close,startTime:o,period:n,name:e.name,saveOpen:!0,saveAutoClose:!0,statUrl:"/notice/action"},s&&s(e),f.ZP.extend(i,r,a),i.props.notice=r,i.props.notice.collectionName=a.collectionName,e.model&&(i.props.notice.model=e.model),i},date2ts:function(e){return Math.floor(e/1e3)},setCaret:function(e,a){if(null!=e)if("selectionStart"in e)e.selectionStart=a,e.selectionEnd=a;else if(e.setSelectionRange)e.setSelectionRange(a,a);else if(e.createTextRange){var s=e.createTextRange();s.collapse(!0),s.moveEnd("character",a),s.moveStart("character",a),s.select()}},performance,getAccountNumber:function(e,a){return console.warn("deprecated - use instead import { getAccountNumber } from 'core/helper/util'"),(Number(e)>99999999?e:"00000000".concat(e).slice(-8))+a.toUpperCase()},clearNavigateHistory:function(){if(g().History.started){var e=g().history.getFragment(),a=document.body.scrollTop;/^action=/.test(e)&&(g().history.navigate(null,{replace:!0}),document.body.scrollTop=a)}},parseKey:function(e){var a,s=[];return 93!==e.which&&91!==e.which||(a=!0),(e.ctrlKey||17===e.which)&&s.push("Ctrl"),a&&s.push("Cmd"),(e.shiftKey||16===e.which)&&s.push("Shift"),(e.altKey||18===e.which)&&s.push("Alt"),16!==e.which&&17!==e.which&&18!==e.which&&91!==e.which&&93!==e.which&&s.push(e.which),s.join("_")},validateKey:function(e){var a,s;if(e){if(e.tagName.toLowerCase(),a=e.tagName.toLowerCase(),s=e.type,"input"===a)return"radio"===s||"checkbox"===s;if("textarea"===a)return!1}return!0},isCenterDialogsVisible:function(e){if(e)return!!f.ZP.union(e.get("noticeCenterCollection").toJSON(),e.get("noticeCenterDialogCollection").toJSON()).filter((e=>e.selected&&!e.collapsed)).length},unique:function(e){var a,s,i=[],r=!1;for(a=0;a<e.length;a++){for(s=0;s<i.length;s++)i[s].id===e[a].id&&(r=!0);r||i.push(e[a]),r=!1}return i},getArrayHash:function(e){let a={};return e&&e.length&&e.forEach((e=>{a[e.id]=Object.assign({},e)})),a},prepareWebViewInfo:function(e){const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search;const a={};return e.replace(/^\?/,"").split("&").filter((e=>e)).forEach((e=>{e=e.split("="),a[e[0]]=e[1]||!0})),a}(e);return{isWebView:a.webview||a.android||a.ios,webViewLang:a.lang||a.l}},formatZero:function(e){return 1===String(e).length?"0"+v:v},isMobile:function(){return!!navigator.userAgent.match(/(iPhone|iPad|iPod|Android|BalackBerry|Windows Phone)/)},getCurrentLocale:function(e){return e?e.toLowerCase().replace("_","-"):"en-us"}};var R=s(61564),I=s(51116);class SocketModel extends g().Model{defaults(){return{timeDelta:0,url:!0,active:!0,error:null,loading:!1,dataType:"json",request:null,initData:null,updateData:null,clearRequest:!0,connectionOk:!1,unusedData:null}}initialize(e,a){this.connect=null,this.doNotUpdate=null,this.connectionDelay=1e3,this.connectionAttempts=0,this.connectionAttemptsLimit=100,this.reconnectTM=null,this.sendAndResponseHash={},this.initFilter=a,e&&e.request?e.request&&this.request():this.createConnection(),this.on({"change:request":function(e,a){a&&this.request()},destroy:this.onDestroy},this)}send(e){this.set("request",e)}sendAndResponse(e){var a=e.request,s=a.uuid||(Date.now().toString(36)+Math.random().toString(36).substr(2,12)).toUpperCase(),i=a.timestamp||(0,I.O6)(this.get("timeDelta"));a.uuid=s+"",a.timestamp=i,a.type="request",this.sendAndResponseHash[s]=e,this.send([a])}request(){this.get("active")&&this.get("request")&&(this.set("loading",!0),this.connect?1===this.connect.readyState?(this.doNotUpdate=!0,this.connect.send(JSON.stringify(this.get("request"))),this.clear()):this.connect.onopen=function(){this.request(),this.set("connectionOk",!0)}.bind(this):this.createConnection())}response(e){var a;this.get("request");e.data&&(a=JSON.parse(e.data),this.responsePush(a),this.responseRequest(a))}responsePush(e){!this.initFilter||this.initFilter(e)?(this.set("initData",e),this.doNotUpdate=!1,this.set("error",null),this.set("loading",!1)):this.doNotUpdate?this.set("unusedData",e):this.set("updateData",e)}responseRequest(e){var a,s,i,r;if(Array.isArray(e))for(a=0,s=e.length;a<s;a++)i=e[a],r=this.sendAndResponseHash[i.uuid],"response"===i.type&&i.uuid&&r&&(r.onError&&i.error&&i.error.length?r.onError.call(r.context,1===i.error.length?i.error[0]:i.error,i):i.data&&r.onSuccess.call(r.context,1===i.data.length?i.data[0]:i.data,i),delete this.sendAndResponseHash[i.uuid])}clear(){clearTimeout(this.reconnectTM),this.connectionAttempts=0,this.connectionDelay=1e3,this.get("clearRequest")&&this.set("request",null)}createConnection(){this.connect=new WebSocket(this.get("url")),this.connect.onmessage=function(e){this.response(e)}.bind(this),this.connect.onopen=function(){this.clear(),this.request(),this.set("connectionOk",!0)}.bind(this),this.connect.onclose=function(e){if(1e3===e.code||1005===e.code)return delete this.connect,void this.set("active",!0);this.set("connectionOk",!1),this.set("error","CONNECTION CLOSED"),this.reconnectTM=setTimeout(function(){this.reconnect()}.bind(this),this.connectionDelay)}.bind(this),this.connect.onerror=function(){this.set("connectionOk",!1)}.bind(this)}reconnect(){this.connectionAttempts>=this.connectionAttemptsLimit||(this.createConnection(),this.connectionDelay=2*this.connectionDelay,this.connectionAttempts++,this.trigger("reconnect"))}start(){return this.set("active",!0),this}stop(){this.connect&&this.connect.close(),this.set("active",!1)}onDestroy(){this.off(null,null,this),this.stop()}}const D=SocketModel,O=g().Model.extend({adaptOption(e,a){f.ZP.each(a,((a,s)=>{this.doSaveCookie(e,a)}))},doSaveCookie(e,a){let s=a.name,i=N.getCookie("props[".concat(e).concat(s,"]"));i&&(a.type&&("boolean"==a.type?i=N.toBoolean(i):"number"==a.type&&(i=Number(i))),this.set(s,i,{silent:!0})),this.on("change:".concat(s),((a,i)=>{N.setCookie("props[".concat(e).concat(s,"]"),i,1314e3)}))},set(e,a,s){let i,r,n,o,l,c,d,u,m;if(null==e)return this;if("object"==typeof e?(r=e,s=a):(r={})[e]=a,s||(s={}),!this._validate(r,s))return!1;for(i in m=s.force,n=s.unset,l=s.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=f.ZP.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)a=r[i],!m&&f.ZP.isEqual(u[i],a)||o.push(i),m||!f.ZP.isEqual(d[i],a)?this.changed[i]=a:delete this.changed[i],n?delete u[i]:u[i]=a;if(!l){o.length&&(this._pending=s);for(let e=0,a=o.length;e<a;e++)this.trigger("change:".concat(o[e]),this,u[o[e]],s)}if(c)return this;if(!l)for(;this._pending;)s=this._pending,this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this}});var L=s(46188);const M=class extends g().Collection{initialize(e){this.adaptSingleSelected(e)}adaptSingleSelected(e){f.ZP.each(e,(function(e){e.selected&&(this.selected=e)}),this),this.on("change:selected",(function(e,a){if(!0===a){this.where({selected:!0}).forEach((a=>{a!=e&&a.set("selected",!1,{silent:!0})})),this.selected=e.toJSON()}}),this)}getSelected(){return this.selected&&this.get(this.selected.id)?this.get(this.selected.id):null}getSelectedJSON(){var e=this.getSelected();return e&&e.toJSON()}};var P=s(26323),x=s(71978),F=s(35377),B=s(30654);const Z=s.p+"images/avatar.266028f3.svg",U=O.extend({defaults:{id:null,login:"",email:null,emailConfirmed:null,name:null,phone:null,phoneConfirmed:null,surname:null,sex:"male",lang:"ru",langFull:P.ZW,langList:{ru:"Русский",en:"English",th:"ไทย",id:"Bahasa Indonesia",br:"Português",es:"Español",tr:"Türkçe",vi:"Tiếng Việt",zh:"中文"},currencyName:"rur",currencyLet:"p",currencyList:["usd","eur","rub","brl"],currencyDef:"rub",balance:0,balanceDemo:0,balanceBonus:0,balanceBonusCant:0,balanceHold:0,balancePayoutAmount:0,dealSum:null,dealDurationList:null,dealDurationListOtc:null,dealSumMax:null,dealSumMin:null,dealSumStep:null,riskFreeDealsCollection:null,demo:!0,guest:!0,politics:{},vip:!1,vipAmount:!1,rules:!1,referAttr:null,refBalance:null,refPartners:null,rateCollection:null,pairDefault:null,pairCollection:null,paymentMethods:null,bonusCollection:null,payoutMax:0,payoutMin:0,payoutDate:null,country:null,geo:null,regDate:null,notices:null,allowSubscribeCards:null,maxWinperc:80,socket:null,turboReservedTime:60,vote:null,dealTurboPeriods:[2,3,4,5,6,15,30,45,60,75,90,105,120],tradeSessionCloseTime:null,magicHour:null,socketEvents:Object.assign({},g().Events),socketForexEvents:Object.assign({},g().Events),options:{},ourCompany:null,hotKey:null,promoCode:null,usersOnline:0,pairsHash:null,avatarSmall:Z,avatarBig:Z,rateSocket:null,hotKeysIsActivated:!1,availableRateSizes:[1,3,5,6,10,12,15,20,30,60,120,180,240,300,360,600,720,900,1200,1800,3600],accountCollection:null,ENV:"dev",theme:F.si.LIGHT,pendingTasks:{}},initialize(e,a,s){a.user?this.set(this.prepareAttrs(a)):this.set(a),this.setDefaultTheme(),this.model={},this.model.get=function(e){return this.get(e)}.bind(this)},setDefaultTheme(){const e=this.getOption("platform_theme")||F.si.LIGHT;this.set("theme",e===F.si.LIGHT?F.si.LIGHT:F.si.DARK)},toggleHotkeys(e){B.$.setUserOption({name:"hotkeys_activated",value:"".concat(e)}).then((a=>{a.result&&this.set("hotKeysIsActivated",e)}))},bindSockets(){const e=new Date,a=parseInt((Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())-this.get("timeDelta"))/1e3,10);this.set("socket",new D({url:x.M.otp.ws.common.url})),this.get("socket").on({"change:connectionOk":function(e){e.send([{type:"push",uuid:null,event_name:"source:set",data_type:"source",timestamp:a,data:[{source:this.get("page")}]}])},"change:initData":function(e,a){a.forEach((e=>{if("request"===e.type){const a=[{type:"response",uuid:e.uuid,event_name:e.event_name}];this.get("socket").send(a)}e.data_type&&e.event_name&&this.get("socketEvents").trigger(e.event_name,e.data,e)}))}},this),this.get("socketEvents").on({"payout_hold:created payout_hold:changed payout_hold:cancelled payout_hold:approved":function(e){this.set({balanceHold:e[0].balance_hold,balancePayoutAmount:e[0].balance_payout_amount})},"balance_bonus:change":function(e){this.set("balanceBonus",e[0].value);const a=this.get("accountCollection").get("real");a&&a.set("bonus",e[0].value)},"balance:change":function(e){const a=this.get("accountCollection").get("real");a&&a.set("amount",e[0].value),this.set("balance",e[0].value)},"balance_demo:change":function(e){const a=this.get("accountCollection").get("demo");a&&a.set("amount",e[0].value),this.set("balanceDemo",e[0].value)},"balance_virtual:change":function(e){let a;e.length&&(a=this.get("accountCollection").get(e[0].arena_id),a&&a.set("amount",e[0].value))},"user_online:change":function(e){this.set("usersOnline",e[0].count)},stop(){this.get("socket").stop()}},this)},prepareAttrs(e){let a,s,i={},r={id:["user","data","id"],login:["user","data","email"],phone:["user","data","phone"],phoneConfirmed:["user","data","phone_confirmed"],email:["user","data","email"],emailConfirmed:["user","data","email_confirmed"],name:["user","data","name"],surname:["user","data","surname"],vip:["user","data","vip"],vipAmount:["currency","vip_amount"],sex:["user","data","sex"],lang:["current_lang"],langFull:["current_lang"],currencyName:["currency","name"],currencyList:["reg_currencies","possible"],currencyDef:["reg_currencies","default"],currencyDefault:["currency","name"],balance:["user","balance"],balanceDemo:["user","balance_demo"],balanceBonus:["user","balance_bonus"],balanceBonusCant:["user","balance_bonus_cant"],balanceHold:["user","balance_hold"],balancePayoutAmount:["user","balance_payout_amount"],demo:["user","is_demo"],politics:["user","politics"],dealSum:["currency","deal_default"],dealDurationList:["deal","possible_duration"],dealDurationListOtc:["deal","possible_duration_otc"],dealSumMax:["currency","deal_max"],dealSumMin:["currency","deal_min"],dealSumMaxVip:["currency","deal_max_vip"],dealSumStep:["currency","deal_step"],bonusCollection:["user","bonuses"],referAttr:["user","refer_attr"],refBalance:["user","ref","balance"],refPartners:["user","ref","partners"],country:["user","data","country"],paymentMethods:["currency","payment_systems"],geo:["country"],promoCode:["user","promo_code"],regDate:["user","data","reg_timestamp"],pairDefault:["pairs","default"],pairCollection:["pairs","pairs"],riskFreeDealsCollection:["user","riskfree"],payoutMax:["currency","payout","max"],payoutMin:["currency","payout","min"],payoutDate:["user","payout_date"],notices:["notices"],reg_allow:["reg_allow"],captcha_remind_pass:["captcha_remind_pass"],bonusAlarm:["user","payout_bonus_alarm"],vote:["user","vote"],ourCompany:["user","is_user_our_company"],options:["user","user_options"],magicHour:["magic_hour"],avatarSmall:["user","avatar","small","url"],avatarBig:["user","avatar","big","url"],ENV:["environment"],accountCollection:["user","balance_virtual"],arenaId:["user","arena_id"],tournaments:["tournaments"],pairCommissions:["forex","pairs","commissions"]};for(a in r)r.hasOwnProperty(a)&&(s=N.getByArray(e,r[a]),void 0!==s&&(i[a]=s));var n;i.phoneConfirmed="1"==i.phoneConfirmed,i.emailConfirmed="1"==i.emailConfirmed,i.allowSubscribeCards=i.politics&&i.politics["1click_on"],i.currentLocale=N.getCurrentLocale(i.lang),i.lang=this.parseLang(i.lang),i.country=i.country&&i.country.toLowerCase(),i.geo=i.geo&&i.geo.toLowerCase(),i.isSng=(n=i.geo,-1!==["ru","ua","kg","kz","by","uz","tj","tm","az","md","am"].indexOf(n)),i.vip="1"==i.vip,i.maxWinperc=i.vip?90:80,i.refBalance=i.refBalance||0,i.currencyLet=(0,I.Y1)(i.currencyName),i.guest=!i.id,i.rateCollection=(0,R.Z)(),i.paymentMethods=[];const o=i.bonusCollection&&i.bonusCollection.find((e=>"SpecialOffer"===e.name));return o&&"SpecialOffer"===i.bonusCollection[0].name&&(i.bonusCollection[0]=i.bonusCollection[1],i.bonusCollection[1]=o),i.pairCollection=function(e,a,s){var i,r,n=[];for(i in e){if(!e.hasOwnProperty(i))continue;const o=(r=e[i]).name;r.trans=r.trans||o,r.transTrim=r.trans.replace(/ /g,""),r.longDeal=r.long_deal,r.initialOrder=r.def_order,i===a&&(r.selected=!0),r.locked&&(r.winperc=s),n.push(r)}return n}(i.pairCollection,i.pairDefault,i.maxWinperc),i.riskFreeDealsCollection=function(e){return e?((0,L.Z)(e,(function(e){e.id=Number(e.id),e.amount=Number(e.amount),e.activated_at=e.activated_at?e.activated_at:null}),this),e):[]}(i.riskFreeDealsCollection),i.options=function(e){let a={oneClickDeal:"true"===(e=e||{}).is_one_click_popup,platform_theme:e.platform_theme,isOneClickTradeDeal:"true"===e.is_one_click_trade_deal,tp_duration:e.tp_duration?Number(e.tp_duration):e.tp_duration,durationHistory:[]};if(e.duration_history)try{a.durationHistory=JSON.parse(e.duration_history)}catch(e){}if(e.deal_sum)try{a.deal_sum=JSON.parse(e.deal_sum)}catch(e){}return a}(i.options),i.tradeSessionCloseTime=i.magicHour?i.magicHour.start_time:0,i.pairsHash=N.getArrayHash(i.pairCollection),i.politics&&!i.politics.test_bo_fx&&i.accountCollection&&(i.accountCollection=i.accountCollection.filter((e=>"forex"!==e.arenaType))),i.accountCollection&&(i.accountCollection.forEach((e=>{i.arenaId=e.arenaId})),i.tournaments&&i.accountCollection&&i.accountCollection.forEach((a=>{a.arenaInfo&&e.tournaments[a.arenaInfo.type]&&Object.assign(e.tournaments[a.arenaInfo.type],a,{id:a.arenaInfo.id,type:a.arenaInfo.type})})),i.accountCollection=new M(function(e,a,s,i,r,n,o,l,c,d,u,m){e&&e.length||"virtual"!==r||(r="real");const p=[],h={$:"usd",s:"usd","€":"eur",e:"eur","₽":"rub",p:"rub",r:"brl",a:"demo","¥":"cny"},v={isPublic:!0,dealMin:u,dealMax:d,dealStep:m,dealDefault:c,currencyName:l,currencyLet:(0,I.Y1)(l)};return e.forEach((e=>{e.arenaInfo||(e.arenaInfo={});const a=h[e.arenaInfo.symbol]||h.s;p.push(Object.assign({},e.arenaInfo,{id:e.arenaId+"",type:"virtual",amount:e.balance,selected:!1,isPublic:"forex"===e.arenaInfo.arena_type&&1===e.arenaInfo.id||e.arenaInfo.dateStart<o&&e.arenaInfo.dateEnd>o,name:"virtual".concat(e.arenaId),currencyName:a,currencyLet:(0,I.Y1)(a)}))})),p.concat([Object.assign({id:"real",type:"real",amount:a,selected:"real"===r,name:"real",bonus:i},v),Object.assign({id:"demo",type:"demo",amount:s,selected:"demo"===r,name:"demo"},v,{currencyLet:"a"})])}(i.accountCollection,i.balance,i.balanceDemo,i.balanceBonus,i.moneyGroup,i.arenaId,e.server_time,i.currencyName,i.dealSum,i.dealSumMax,i.dealSumMin,i.dealSumStep)),i.currencyLet=i.accountCollection.selected?i.accountCollection.selected.currencyLet:i.currencyLet,i.currencyName=i.accountCollection.selected?i.accountCollection.selected.currencyName:i.currencyName),i},getBalance(e){const a=void 0!==e?this.get("accountCollection").get(e):this.get("accountCollection").getSelected();return a?a.get("amount"):void 0},getPolitic(e){const a=this.get("politics");return a?a[e]:null},getOption(e){const a=this.get("options");return a?a[e]:null},data(e){return this.get(e)},parseLang(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ru_RU";if("pt_BR"===e)return"br";const a=e.split("_");return a?a[0]:void 0},saveUserOption(e){const a="object"==typeof e.value?JSON.stringify(e.value):e.value;B.$.setUserOption({name:e.key,value:String(a)})},setPendingTask(e,a){(this.get("pendingTasks")||{})[e]=a||!0},getPendingTask(e){const a=this.get("pendingTasks"),s=a[e];return delete a[e],s}});var H=s(30327);const G=g().Model.extend({defaults:{error:null,info:null,success:null,modelName:null},resetMessages(){this.set({error:null,info:null,success:null})}}),V=g().Collection.extend({model:G,tm:null,initialize(e){},getJSON(){const e={};return f.ZP.each(this.toJSON(),(function(e){e=function(e){const a={};return f.ZP.each(e,(function(e,a){null!==e&&(this[a]=e)}),a),a}(e);const a=function(e){const a=f.ZP.without(Object.keys(e),"modelName");return a.length?a[0]:null}(e);Object.keys(e).length>1&&null!==a&&(this[e.modelName]={type:a,name:e.modelName,msg:f.ZP.isArray(e[a])?e[a][0]:e[a]})}),e),e},initData(e){this.add({modelName:"general"}),e.map((function(e){this.add({modelName:e})}),this)},updateErrorMessages(e,a){this.resetAllMessages(),a&&this.resetMessagesTimeOut(a);const s=f.ZP.map(this.toJSON(),(a=>{const s=f.ZP.find(e,((e,s)=>s===a.modelName));return s&&(a.error=s[0]),a}));this.set(s)},updateErrorMessageFromName(e,a){if(this.resetMessagesFromName(e),!Object.keys(a).length)return;const s=this.findWhere({modelName:e});s&&s.set("error",a[e])},resetMessagesFromName(e){const a=this.findWhere({modelName:e});a&&a.resetMessages()},updateGeneralMessages(e,a){this.resetAllMessages(),a&&this.resetMessagesTimeOut(a),this.findWhere({modelName:"general"}).set(e.type,e.messages)},resetMessagesTimeOut(e){this.tm&&clearTimeout(this.tm),this.tm=setTimeout((()=>{this.resetAllMessages()}),e)},resetAllMessages(){this.each((e=>{e.resetMessages()}))}}),W=(0,E.vU)({empty_fields:{id:"empty_fields",defaultMessage:"Please fill in all the fields"}}),j=g().Model.extend({initialize(e){this.bindAttributes(e),H.Z.validators.presence.message="^".concat(S.NW.formatMessage(W.empty_fields))},bindActions(e){let a={},s=[];return this.actionsEvent=f.ZP.extend({},g().Events,{actionEvents:!0}),this.actionsArray=[],this.on("destroy",(function(){this.unbindActions()}),this),e instanceof Object&&1===arguments.length&&!Array.isArray(e)?f.ZP.each(e,(function(e,s){a[s]=this.bindAction(e),this.actionsArray.push(a[s])}),this):Array.isArray(e)?(f.ZP.each(arguments,(function(e){this.actionsArray.push(this.bindAction(e))}),this),a=this.actionsArray):(f.ZP.each(arguments,(e=>{s.push(e)}),this),a=this.bindAction(s),this.actionsArray.push(a)),a},bindAction(e){const a=e.slice(1,e.length);return a.unshift(this.actionsEvent),e[0].apply(this,a)},unbindActions(){f.ZP.each(this.actionsArray,(e=>{e.unbind()}))},bindAttributes(e){this.hmBinds=[],f.ZP.each(e,(function(e,a){this.hmSet(e,a)}),this),this.on("destroy",(function(){this.onDestroy()}),this)},syncAttributes(e){f.ZP.each(e,this.syncAttribute,this)},syncAttribute(e,a){let s=e[0],i=e[1],r="change:".concat(a);s&&"string"==typeof i&&"string"==typeof r&&this.on(r,(function(e,a){s.set(i,a,{context:this})}),this)},hmSet(e,a){if(!Array.isArray(e))return;let s,i,r,n=e[0],o=n instanceof g().Model||n instanceof g().Collection,l=e[1],c=e[2];o&&this.set(a,this.hmGetValue(n,l)),c&&o&&("string"==typeof c?this.bindEvent(n,a,c,n,l):Array.isArray(c)&&c.length&&f.ZP.each(c,(function(e){if(Array.isArray(e))for(r="this"===e[0]?this:e[0],s=1,i=e.length;s<i;s++)this.bindEvent(r,a,e[s],n,l);else"string"==typeof e&&this.bindEvent(n,a,e,n,l)}),this))},bindEvent(e,a,s,i,r){this.hmBinds.push(e),e.on(s,(function(e,s){if(s&&s.context===this)return;const n=this.hmGetValue(i,r,e);void 0!==n&&this.set(a,n)}),this)},onDestroy(){f.ZP.each(this.hmBinds,(function(e){e.off(null,null,this)}),this),this.off(null,null,this)},hmGetValue(e,a,s){let i,r;return"string"==typeof a?e.get(a):"function"==typeof a?(i=a.call(this,e,s),r=Array.isArray(i)&&i[0]instanceof g().Model?N.modelsArrayToJSON(i):i instanceof g().Model?i.toJSON():i,r):e instanceof g().Model?e.toJSON():e},initValidation(){this.get("validationSchema")&&(this.set("validationInitialize",!0),this.set("messagesCollections",new V),this.get("messagesCollections").on({"change add":function(){this.set("messages",this.get("messagesCollections").getJSON())}},this),this.get("messagesCollections").initData(Object.keys(this.get("validationSchema"))))},initTwoBind(){this.get("validationInitialize")&&(this.set({twoBind:!0}),this.on(function(e){const a={};return a[f.ZP.reduce(e,((e,a)=>"".concat(e,"change:").concat(a," ")),"")]=function(){if(!this.get("twoBind"))return;const e=Object.keys(this.changedAttributes())[0];this.get("messagesCollections").updateErrorMessageFromName(e,f.ZP.pick((0,H.Z)(this.changedAttributes(),this.get("validationSchema")),e),3e3)},a}(Object.keys(this.get("validationSchema"))),this))},onTwoBindValidation(){this.has("twoBind")&&this.set({twoBind:!0})},offTwoBindValidation(){this.has("twoBind")&&this.set({twoBind:!1})},showMessage(e,a){this.get("validationInitialize")?this.get("messagesCollections").updateGeneralMessages(e,a):(this.initValidation(!0),this.showMessage(e,a))},showError(e,a){this.showMessage({type:"error",messages:e},a)},showSuccess(e,a){this.showMessage({type:"success",messages:e},a)},showInfo(e,a){this.showMessage({type:"info",messages:e},a)},isValidFromName(e,a){const s=f.ZP.pick((0,H.Z)(this.toJSON(),this.get("validationSchema"),a),e);return Object.keys(s).length?(this.get("messagesCollections").updateErrorMessageFromName(e,s,3e3),!1):(this.get("messagesCollections").resetMessagesFromName(e),!0)},isValid(e,a){if(!this.get("validationInitialize"))return;const s=(0,H.Z)(f.ZP.pick(this.toJSON(),(function(e,a){return-1!==f.ZP.indexOf(Object.keys(this.get("validationSchema")),a)}),this),this.get("validationSchema"));return s?(a||this.get("messagesCollections").updateErrorMessages(s,e),!1):(this.get("messagesCollections").resetAllMessages(),!0)}}),z=j.extend({initialize(e,a){j.prototype.initialize.apply(this,arguments),this.userModel=a},get(e){let a=j.prototype.get.apply(this,arguments);if(f.ZP.isUndefined(a)){const s=this.userModel.get(e);f.ZP.isUndefined(s)||(this.hmSet([this.userModel,e,"change:".concat(e)],e),a=s)}return a||""}});var q=s(87605);const K={serverTime:e=>e,windowResize:!0,windowResizeStop:!0,layoutResize:!0,windowScrollBottom:!0,soundSwitch:e=>e,playSound:e=>e},Y=N.prepareActions(K),X=f.ZP.extend({},g().Events,{actionEvents:!0});var J=s(51098);class UiModel extends g().Model{defaults(){return{navActive:null,cabinetRoute:null,chatCollapsed:null,chatNotifications:null,maxChatNotifications:100,readChatNotificationsTm:5e3,noticeTopPlatformShowMore:null,routeLvl0:null,routeLvl1:null,routeLvl2:null,routeLvl3:null,routeLvl4:null,isWebView:null,webViewLang:null}}constructor(){super(),this.init(),this.on({"change:routeLvl0 change:routeLvl1 change:routeLvl2 change:routeLvl3 change:routeLvl4":this.applyCurrentRoutes.bind(this,null),destroy:this.off.bind(this)},this)}init(){var e=location.hash.substr(1).split("/");e.length&&(e[e.length-1]=e[e.length-1].replace(/[?&].*$/,""),this.setRoutes(e)),this.set(N.prepareWebViewInfo())}toggle(e){return e&&this.set(e,!this.get(e)),this}setRoutes(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];var i;Array.isArray(a[0])?(i=a[1],a=a[0]):"string"==typeof a[0]&&(1===a.length||2===a.length&&"object"==typeof a[1])?a=a[0].replace(/^#+/,"").split("/").filter((e=>e)):a[a.length-1]&&"object"==typeof a[a.length-1]&&(i=a[a.length-1],a[a.length-1]=null);for(var r=a.length;r<5;r++)a.push(null);var n={};a.forEach(((e,a)=>n["routeLvl"+a]=e||null)),this.set(n,i),n=null}applyCurrentRoutes(e,a,s,i){var r=this.getHash(e);r&&(i&&i.silentHistory&&history&&history.replaceState?history.replaceState(void 0,void 0,"#"+r):location.hash=r)}getHash(e){for(var a,s,i=[],r=0;r<5&&(s=this.get("routeLvl"+r));r++)i.push(s);if(a=i.join("/"),"string"==typeof e)a+=e;else if("object"==typeof posf){var n=Object.keys(e);n.length&&(a+="?",n.forEach(((s,i)=>a+=s+"="+e[s]+"&")),a.slice(0,-1))}return a}}var Q=s(63519);const $=g().Model.extend({defaults:{user:null,serverTime:null,timeDelta:0,page:null,section:null,windowFocus:!0,sound:!0,project:c.yy},initialize(){this.model={},this.appClockTm=null,this.appDate=new Date,this.model.get=function(e){return this.get(e)}.bind(this),N.syncToCookie(this,{attr:"sound",key:"props[sound]",type:"boolean"}),this.bindEvents()},bindEvents(){},doAction(){J.ZP.doAction.doAction.apply(this,arguments)},externalIntegrations(){const e=function(){let e=null,a=null;for(const s in dataLayer)dataLayer.hasOwnProperty(s)&&dataLayer[s].hasOwnProperty("event")&&"cd3_ready"===dataLayer[s].event&&dataLayer[s]["gtm.uniqueEventId"]>e&&(e=dataLayer[s]["gtm.uniqueEventId"],a=dataLayer[s].cd3);return a};let a=null;window.setInterval((()=>{e()!==a&&(a=e(),B.$.statsTracking({ga_cid:ga.getAll()[0].get("clientId"),ga_session_id:a,ga_lang:ga.getAll()[0].get("language")}))}),3e3)},loadState(e){return new Promise(((a,s)=>{(0,q.Z)({url:e.url,onLoad(e){if(e)return e.hasOwnProperty("result")&&!1===e.result?void s(new Error("negative result")):void a(e);s(new Error("empty json"))},onError(e){s(e)},context:this})}))},startDo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,i=N.clone(e),r=(0,p.fx)(),n=i.server_time,o=parseInt((new Date).getTime()/1e3)-n;this.set({user:new U({page:r,source:s,timeDelta:o,mobx:a},i,this.get("project")),serverTime:n,minute:new Date(1e3*n).getMinutes(),timeDelta:o,page:r,state:i,ui:new UiModel});const l=location.search.slice(1).split("&").filter((e=>!!~e.search("promo")))[0];l&&localStorage.setItem("promo",l.split("=")[1]),this.appClock(),(0,u.v)()&&r!==d.q.EDUCATION||!(0,m.y)("production")||(0,Q.Z)(this.get("user").get("id"),this.get("project")),this.set("inputCache",new z(null,this.get("user"))),this.on({"change:page":function(){this.get("ui").set("cabinetRoute",!1)}},this),this.ini=this.get("state"),this.user=this.get("user"),this.ui=this.get("ui"),this.inputCache=this.get("inputCache"),this.bindModelEvents(),this.bindWindowEvents(),this.trigger("ready")},appClock(e){e||clearTimeout(this.appClockTm);const a=Math.floor((new Date).getTime()/1e3)-this.get("timeDelta"),s=new Date(1e3*a).getMinutes();this.get("serverTime")<a&&(this.set("serverTime",a),this.set("minute",s)),this.appClockTm=setTimeout((()=>{this.appClock(1)}),1e3)},hasNotices(e){return!!f.ZP.find(this.ini.notices,(a=>a.name===e))},updateBonusList(e){f.ZP.each(e,(function(e){f.ZP.find(this.ini.user.bonuses,(a=>a.name===e.name))||this.ini.user.bonuses.unshift(e)}),this)},bindWindowEvents(){window.addEventListener("blur",(()=>this.set("windowFocus",!1))),window.addEventListener("focus",(()=>this.set("windowFocus",!0))),this.set("windowFocus",document.hasFocus()),window.addEventListener("scroll",(()=>{Math.ceil(window.scrollY+window.innerHeight)>=(0,_.wc)(document.body)&&this.doAction(Y.windowScrollBottom,X)}))},bindModelEvents(){this.on({"change:page":function(){this.ui.set({route:!1,cabinetRoute:!1})}},this)}}),ee=new $;var te=s(23680);(0,l.when)((()=>!!te.v.isStateLoaded),(()=>{ee.startDo(te.v.isStateLoaded,!0,"platform")}));var ae=s(19669);let se=!1;var ie=s(29257),re=s(37323),ne=s(49761);function oe(e,a,s,i){const r=s?new Date(1e3*s):new Date(Date.now()+26784e5);document.cookie="".concat(e,"=").concat("object"==typeof a?JSON.stringify(a):a,"; expires=").concat(r.toUTCString(),"; path=/;").concat(i?"domain=".concat(i,";"):"")}var le=s(70275),ce=s(62794);(0,ne.e)("_ga")||oe("_ga","GA1.2.b".concat(Math.random().toString().substring(6),".").concat((new Date).getTime()),1800,"".concat((0,le.X)(),"; path=/")),window.hit_pageview_already_send="no";const de=(ue=(0,ie.Z)((function*(){var e,a,s,i,r;let n;try{n=yield B.$.userValues(["data"])}catch(e){n=null}const o="".concat(document.location.protocol,"//").concat(document.location.hostname),l=new URLSearchParams(window.location.search).get("project")||"bo";let c=null;n||(c=yield B.$.platformValues(["ab"])),window.analyticsData={userId:String(null==n||null===(e=n.data)||void 0===e?void 0:e.id),email:null==n||null===(a=n.data)||void 0===a?void 0:a.email,project:l,guestId:null==c||null===(s=c.ab)||void 0===s?void 0:s.guest_id,homepage:null==c||null===(i=c.ab)||void 0===i?void 0:i.homepage,is_vip:null==n||null===(r=n.data)||void 0===r?void 0:r.vip};const d=(0,ce.wW)(),u=(0,ce.HQ)(window.analyticsData),m={ec:"ga_send_error",ea:"ga_send_error",el:"ga_send_error",t:"event",tid:"UA-54693962-29"},p=(0,re.Z)({},d,u);try{if("yes"===(0,ne.e)("ga_block_once"))(0,ce.uO)(o,p);else{const e=new Image;e.onerror=function(){oe("ga_block_once","yes",1),(0,ce.uO)(o,p)},e.src="https://www.google-analytics.com/collect"}}catch(e){(0,ce.uO)(o,(0,re.Z)({},d,u,m))}})),function(){return ue.apply(this,arguments)});var ue;const me=function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];console.error("GTM loading error",...a)},pe=()=>{if(window.dataLayer||(window.dataLayer=[]),(0,m.y)("production"))try{var e;(()=>{const e=(e,a)=>{a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const s=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null},a=document.referrer.includes((0,ce.X3)())?"":document.referrer,s=document.location.href,i=e("ref",s),r=e("lref",s),n=e("affiliate_id",s),o=e("gclid",s),l=e("utm_source",s),c=e("utm_medium",s),d=e("utm_campaign",s),u=e("utm_term",s),m=e("utm_content",s),p="/?utm_source=".concat(l,"&utm_medium=").concat(c,"&utm_campaign=").concat(d),h="&utm_term=".concat(u,"&utm_content=").concat(m,"&document_refferer=").concat(a,"&ref=").concat(i),v="&lref=".concat(r,"&affiliate_id=").concat(n,"&gclid=").concat(o),g="".concat(p).concat(h).concat(v);a||i||r||n||o||l||c||d||u||m?localStorage&&localStorage.setItem("all_params",g):localStorage&&localStorage.setItem("all_params","direct_trafic")})(),window.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"});const a=document.createElement("script"),s=document.getElementsByTagName("script")[0];a.async=!0,a.src="//www.googletagmanager.com/gtm.js?id="+((0,u.v)()?"GTM-TTT3PGV":"GTM-M98VLD"),a.onerror=me,null===(e=s.parentNode)||void 0===e||e.insertBefore(a,s)}catch(e){me(e)}},he=()=>de().then(pe),ve="/sw.js";var ge=s(12484);function _e(){return(_e=(0,ie.Z)((function*(){try{(yield window.navigator.serviceWorker.register(ve)).scope}catch(e){ge.bR.sendEvent(e,ge.x3.INFO,"ServiceWorker registration failed")}}))).apply(this,arguments)}var fe=s(31542),Ee=s(27378),Se=s(10592),ye=s(23735),be=s(11326);const Ce={send(){const e=window.performance;if(!e||!e.getEntriesByType)return;const a=function(){try{const e=window.performance.getEntriesByType("navigation");return(e.length?e[e.length-1]:null)||null}catch(e){return null}}();a&&B.g.webNavigationTimings({data:{connectEnd:a.connectEnd,connectStart:a.connectStart,decodedBodySize:a.decodedBodySize,domComplete:a.domComplete,domContentLoadedEventEnd:a.domContentLoadedEventEnd,domContentLoadedEventStart:a.domContentLoadedEventStart,domInteractive:a.domInteractive,domainLookupEnd:a.domainLookupEnd,domainLookupStart:a.domainLookupStart,duration:a.duration,encodedBodySize:a.encodedBodySize,entryType:a.entryType,fetchStart:a.fetchStart,initiatorType:a.initiatorType,loadEventEnd:a.loadEventEnd,loadEventStart:a.loadEventStart,name:a.name,nextHopProtocol:a.nextHopProtocol,redirectCount:a.redirectCount,redirectEnd:a.redirectEnd,redirectStart:a.redirectStart,requestStart:a.requestStart,responseEnd:a.responseEnd,responseStart:a.responseStart,secureConnectionStart:a.secureConnectionStart,startTime:a.startTime,transferSize:a.transferSize,type:a.type,unloadEventEnd:a.unloadEventEnd,unloadEventStart:a.unloadEventStart,workerStart:a.workerStart},url:window.location.toString()})}};var Te=s(8141),Ae=s(56283),ke=s(54172),we=s(4226),Ne=s(59312),Re=s(72124),Ie=s(50649),De=s(62664),Oe=s(87561),Le=s(94306),Me=s(25017),Pe=s(68674),xe=s(39928),Fe=s(93627),Be=s(60042),Ze=s.n(Be);const Ue=e=>{let a=e.variant,s=void 0===a?"rect":a,i=e.animation,r=void 0===i?"pulse":i,n=e.className;return Ee.createElement("span",{className:Ze()("c-skeleton",{"c-skeleton_type_rect":"rect"===s,"c-skeleton_type_text":"text"===s,"c-skeleton_animation_pulse":"pulse"===r},n)})},He=()=>Ee.createElement("div",{className:"fsonb-fallback"},Ee.createElement(Ue,{variant:"rect",className:"fsonb-fallback__greeting-image"}),Ee.createElement("div",{className:"fsonb-fallback__bottom-block"},Ee.createElement(Ue,{variant:"text",className:"fsonb-fallback__description"}),Ee.createElement(Ue,{variant:"rect",className:"fsonb-fallback__controller"})));He.displayName="fsonb(layouts)(Fallback)";const Ge=e=>{const a=Ee.lazy(e);return a.preload=e,a},Ve=Ge((0,ie.Z)((function*(){return{default:(yield s.e(201).then(s.bind(s,81248))).FirstSessionOnboardingRoot}}))),We=Ge((0,ie.Z)((function*(){return{default:(yield s.e(5147).then(s.bind(s,15711))).FirstSessionOnboardingRoot}}))),je=Ge((0,ie.Z)((function*(){return{default:(yield s.e(8169).then(s.bind(s,9971))).FirstSessionOnboardingRoot}})));var ze=s(72407);const qe=()=>Ee.createElement("div",{className:"plf-loader"},Ee.createElement("div",{className:"plf-loader__sidebar"}),Ee.createElement("div",{className:"plf-loader__main"},Ee.createElement("div",{className:"plf-loader__header"},Ee.createElement(ze.T,{size:"large"})),Ee.createElement("div",{className:"plf-loader__platform"},Ee.createElement("div",{className:"plf-loader__container"},Ee.createElement("span",{className:"plf-loader__line plf-loader__line_width-25p"})),Ee.createElement("div",{className:"plf-loader__cards-wrapper"},Ee.createElement("div",{className:"plf-loader__card"},Ee.createElement("span",{className:"plf-loader__line plf-loader__line_width-50p"}),Ee.createElement("span",{className:"plf-loader__line plf-loader__line_width-75p"})),Ee.createElement("div",{className:"plf-loader__card"},Ee.createElement("span",{className:"plf-loader__line plf-loader__line_width-75p"})),Ee.createElement("div",{className:"plf-loader__card"},Ee.createElement("span",{className:"plf-loader__line plf-loader__line_width-50p"}))))));qe.displayName="PlatformFallback";const Ke=Ge((()=>s.e(5431).then(s.bind(s,8040))));var Ye,Xe=s(96667);class PlatformSocket extends Ee.Component{componentDidMount(){const e=[Xe.Z.start("PlatformSocketStarter")];Promise.all(e).then((()=>{this.setState({ready:!0})})).catch((e=>{this.setState({error:e})}))}render(){return this.state.ready?this.props.children:this.state.error?(console.error("FATAL 6",this.state.error),this.appContainer?(0,fe.createPortal)(Ee.createElement(be.Z,null),this.appContainer):null):null}constructor(...e){super(...e),this.state={error:null,ready:!1},this.appContainer=document.querySelector("#page-container")}}PlatformSocket.displayName="PlatformSocketStarter";const Je=Re.parse(window.location.search).project;var Qe;let $e=(Ye=class App extends Ee.Component{render(){const e=this.props,a=e.appService.availableProjects,s=e.dir;return Ee.createElement("div",{className:"app",dir:s},Ee.createElement(PlatformSocket,{isFx:a.fx,isBo:a.bo},this.getContentByRoute()))}getContentByRoute(){switch(this.state.route){case"firstSessionOnboardingFtt":return Ke.preload(),Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(He,null)},Ee.createElement(Ve,{project:App.currentProject,onExit:this.handleFirstSessionOnboardingExit}));case"firstSessionOnboardingFx":return Ke.preload(),Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(He,null)},Ee.createElement(We,{project:App.currentProject,onExit:this.handleFirstSessionOnboardingExit}));case"firstSessionOnboardingSpt":return Ke.preload(),Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(He,null)},Ee.createElement(je,{project:App.currentProject,onExit:this.handleFirstSessionOnboardingExit}));default:return Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(qe,null)},Ee.createElement(Ke,null))}}getFirstSessionOnboardingType(){const e=this.props.onboardingStateService;return Fe.H.shouldFeatureBeDisabled("firstSessionOnboarding")?null:e.started?App.firstSessionOnboardingTypeMap[e.started.project]:null}handleFirstSessionOnboardingExit(){this.setState((()=>({route:"platform"})))}constructor(e){super(e);const a=this.getFirstSessionOnboardingType();this.state={route:a||"platform"},this.handleFirstSessionOnboardingExit=this.handleFirstSessionOnboardingExit.bind(this)}},Ye.displayName="App",Ye.firstSessionOnboardingTypeMap={[c.yy]:"firstSessionOnboardingFtt",[c.c0]:"firstSessionOnboardingFx",[c.ik]:null},Ye.currentProject=null!==(Qe=(0,De.vI)())&&void 0!==Qe?Qe:"string"==typeof(et=Je)&&Object.values(c.bk).includes(et)?et:c.yy,Ye);var et;$e=(0,Ne.gn)([Ie.observer],$e);const tt=(0,ke.zt)($e,{helper:(e,a)=>(0,re.Z)({},e,a),services:[te.z,Me.F,Pe.G,[Oe.OY,()=>Le.Z],[xe.Hd,()=>new xe.Hd($e.currentProject)]]});var at=s(26699),st=s(6680),it=s(33733),rt=s(95601),nt=s(83714),ot=s(14282),lt=s(94503),ct=s(17330),dt=s(18404),ut=s(49491),mt=s.n(ut),pt=s(47014),ht=s.n(pt),vt=s(7223);class SptAssetsService_SptAssetsService extends vt.t{constructor(e){var a;super({assets:{}}),a=this,this.repository=e,this.load=this.createTask(ht()((function*(){const e=yield a.repository.findAll();a.update({assets:Array.from(e).reduce(((e,a)=>(e[a.id]=a,e)),{})}),a.repository.subscribeOnAssetsUpdate(a.handleAssetsUpdate)})),{strategy:vt.T.once}),this.handleAssetsUpdate=e=>{this.update((a=>{const s=mt()({},a.assets);return e.forEach((e=>{const a=s[e.id];a&&(s[e.id]=mt()(mt()({},a),e))})),mt()(mt()({},a),{},{assets:s})}))}}}var gt=s(13243);class SptAssetsRepository{findAll(){const e=Math.floor(Date.now()/1e3),a=e+86400;return Promise.resolve([{id:"MMM",title:"3M Company",aliases:[],group:"stock",groupView:["usa_region"],currencyQuote:"usd",icon:"",precision:2,timeClose:a,timeOpen:e,locked:!0,lockedReason:"schedule",timeCloseTrading:a,timeOpenTrading:e,lockedTrading:!0,lockedTradingReason:"schedule",salesSuccessFee:.94,purchaseFee:0,lockedBuy:!1}])}subscribeOnAssetsUpdate(e){}}const _t=(0,gt.v)({name:"AssetsSpt",dependsOn:[lt.Ul],services:(e,a)=>{let s=a.sptAssetsRepository;return{sptAssetsService:new SptAssetsService_SptAssetsService(s)}}},{repositories:()=>({sptAssetsRepository:new SptAssetsRepository}),publicApi:e=>e}).onStart((e=>{e.sptAssetsService.load()})).enable((e=>e.tradingMechanicsService.enabled("spt")));(0,gt.v)({name:"AssetsSpt",dependsOn:[lt.b$],services:(e,a)=>{let s=a.sptAssetsRepository;return{sptAssetsService:new SptAssetsService_SptAssetsService(s)}}},{repositories:()=>({sptAssetsRepository:new SptAssetsRepository}),publicApi:e=>e}).onStart((e=>{e.sptAssetsService.load()})).enable((e=>e.tradingMechanicsService.enabled("spt")));var ft=s(26763),Et=s(74262),St=s(99287),yt=s(41171);const bt=(0,gt.v)({name:"entityServerTime",dependsOn:[nt.e8],services:e=>{e.timeService.events.on("serverTime",yt.RL.update)}});var Ct=s(45834),Tt=s(26257),At=s(25974),kt=s(45233),wt=s(18902),Nt=s(82844),Rt=s(5182),It=s(54463);class ForexSettingsService extends vt.t{load(){var e=this;return(0,ie.Z)((function*(){const a=yield e.repository.find();return a&&e.update(a),Promise.resolve()}))()}saveSetting(e){this.repository.save(e),this.inputs.applySettings(e),this.update(e)}constructor(e,a){super({}),this.repository=e,this.inputs=a,this.inputs.subscribeSettingsChange((e=>{this.update(e)}))}}const Dt={isLimits:"deal_form_show_limits"};class ForexSettingsTransform{static parse(e){return{isLimits:"true"===e.deal_form_show_limits}}static parseRequest(e,a){return{name:Dt[e],value:a.toString()}}}class ForexSettingsRepository{static isForexAvailable(){return(0,ie.Z)((function*(){const e=yield B.$.platformValues(["projects"]);return e.projects?Promise.resolve(e.projects.projects.some((e=>"fx"===e.name&&e.login_allow))):Promise.resolve(!1)}))()}find(){return(0,ie.Z)((function*(){const e=(yield B.$.userValues(["options"])).options;return Promise.resolve(ForexSettingsTransform.parse(e))}))()}save(e){return Object.keys(e).forEach((a=>{const s=e[a];void 0!==s&&B.$.setUserOption(ForexSettingsTransform.parseRequest(a,s))})),Promise.resolve()}}var Ot=s(97415);const Lt=e=>{let a=e.id,s=e.title,i=e.description,r=e.value,n=e.dataTestId,o=e.onCheck;const l=Ee.useCallback((e=>{o(a,e)}),[a,o]);return Ee.createElement(It.dy,{id:a,checked:r,title:s,onChange:l,description:i,dataTestId:n})};Lt.displayName="ForexSettingsItem";const Mt=e=>{let a=e.service;const s=(0,Ot.o)(a.store).isLimits,i=Ee.useCallback(((e,s)=>{a.saveSetting({[e]:s})}),[a]),r=[{id:"isLimits",title:Ee.createElement(Nt._,{id:"take_profit_stop_loss",defaultMessage:"The take profit and stop loss editor"}),description:Ee.createElement(Nt._,{id:"take_profit_stop_loss_text",defaultMessage:"Automated services will help lock in the profit you want and limit a negative result"}),value:!0===s,dataTestId:"SHOW_LIMITS",onCheck:i}];return Ee.createElement(Ee.Fragment,null,r.map((e=>Ee.createElement(Lt,Object.assign({key:e.id},e)))))};Mt.displayName="ForexSettings";const Pt=(0,gt.v)({name:"ForexSettings",dependsOn:[At.M,Rt.K],services:(e,a)=>({forexSettingsService:new ForexSettingsService(a.forexSettingsRepository,{applySettings:a=>{try{const s=e.tradingLegacyServiceList.dealServiceFx;void 0!==a.isLimits&&s.setShowLimits(a.isLimits)}catch(e){console.error(e)}},subscribeSettingsChange:a=>{try{const s=e.tradingLegacyServiceList.dealServiceFx;(0,l.reaction)((()=>({isLimits:s.showLimits})),(e=>{a(e)}))}catch(e){console.error(e)}}})})},{repositories:()=>({forexSettingsRepository:new ForexSettingsRepository})});Pt.use(It.GS,((e,a,s)=>[...e,{component:Ee.createElement(Mt,{service:s.forexSettingsService}),title:Ee.createElement(Nt._,{id:"training_forex",defaultMessage:"Forex"})}])),Pt.onStart((e=>{e.forexSettingsService.load()})),Pt.enable((()=>ForexSettingsRepository.isForexAvailable()));var xt=s(71003),Ft=s(66412),Bt=s(13954),Zt=s(71385),Ut=s(4093),Ht=s(17302),Gt=s(24459),Vt=s(77740);const Wt="uudMgqBg",jt="YASaoo0u",zt=Ee.forwardRef(((e,a)=>{e.className;var s=(0,Gt.Z)(e,["className"]);return Ee.createElement(Vt.BKE,Object.assign({},s,{ref:a,className:Wt}))}));zt.displayName="IconSoundOn";const qt=Ee.forwardRef(((e,a)=>{e.className;var s=(0,Gt.Z)(e,["className"]);return Ee.createElement(Vt.JfY,Object.assign({},s,{ref:a,className:jt}))}));qt.displayName="IconSoundOff";const Kt=e=>{let a=e.service;const s=(0,Ot.o)(a.store),i=s.presets,r=s.selectedPresetId,n=s.isTurnedOn?String(r):"0",o=Ee.useCallback((e=>{a.handlePresetChange(Number(e))}),[a]),l=(0,Ee.useMemo)((()=>[Ee.createElement(Ht.Ph.Option,{key:"0",value:"0",label:Ee.createElement(Nt._,{id:"sound_off",defaultMessage:"Sound off"}),dataTest:"setting_sound_pack_select_item",icon:Ee.createElement(qt,null)})].concat(i.map((e=>Ee.createElement(Ht.Ph.Option,{key:e.id,value:String(e.id),label:e.name,dataTest:"setting_sound_pack_select_item",icon:Ee.createElement(zt,null)}))))),[i]);return n&&l.length?Ee.createElement(Ht.Ph,{fullWidth:!0,placeholder:Ee.createElement(Nt._,{id:"sound",defaultMessage:"Sound"}),dataTest:"setting_sound_pack_select",value:n,onChange:o,floatingLabel:!0},l):null};Kt.displayName="SoundPresetSettings";class SoundSettingsService extends vt.t{handlePresetChange(e){this.update({selectedPresetId:e,isTurnedOn:!!e}),this.inputs.onPresetChange(e)}constructor(e){super({presets:e.presets,selectedPresetId:e.selectedPresetId,isTurnedOn:e.isTurnedOn}),this.inputs=e,this.inputs.subscribeChanges((e=>{this.update((0,re.Z)({},e))}))}}const Yt=(0,gt.v)({name:"sound",dependsOn:[Ft.O,xt.x],services(e){const a=e.commonLegacyServiceList.soundService;return{soundSettingsService:new SoundSettingsService({presets:(0,l.toJS)(a.presets),selectedPresetId:(0,l.toJS)(a.selectedPresetId),isTurnedOn:(0,l.toJS)(a.isTurnedOn),onPresetChange(e){if(!e)return(0,ye.L)({event:"select_soundpack",eventCategory:"select_soundpack",eventAction:"sound_off",eventLabel:"sound_off"}),void a.turnOffSound();a.isTurnedOn||a.turnOnSound(),(0,ye.L)({event:"select_soundpack",eventCategory:"select_soundpack",eventAction:"".concat(e),eventLabel:"".concat(e)}),a.selectPreset(e)},subscribeChanges(e){(0,l.reaction)((()=>a.isTurnedOn),(a=>{e({isTurnedOn:a})})),(0,l.reaction)((()=>a.selectedPresetId),(a=>{e({selectedPresetId:a})}))}})}}});Yt.use(Ut.D2,((e,a,s)=>[...e,{component:Ee.createElement(Kt,{service:s.soundSettingsService}),title:Ee.createElement(Nt._,{id:"sound",defaultMessage:"Sound"}),dataTestTitle:"settings_sound_name",dataTestHost:"settings_sound_select"}]));var Xt=s(96937),Jt=s(77575),Qt=s(7265),$t=s(66460);class FlatMarketProtectionService extends vt.t{setHighlightFlatSetting(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.update({isFlatSettingHighlighted:e}),a&&setTimeout((()=>{this.update({isFlatSettingHighlighted:!e})}),0)}checkIsShowStatusTooltip(e){return!!(e&&"up"===e.dir&&"flat"===e.status&&Number(e.cursOpen)<e.cursClose)||!!(e&&"down"===e.dir&&"flat"===e.status&&Number(e.cursOpen)>e.cursClose)}checkIsShowCloseQuoteTooltip(e){const a=e.pair.precision,s=e.cursOpen,i=void 0===s?0:s,r=e.cursClose,n=e.status,o=Math.pow(10,a),l=1===Math.abs(+(i*o).toFixed(a)-+(r*o).toFixed(a));return"loose"===n&&l}constructor(e){super({isFlatActive:!1},{onStart:()=>{this.load.doneData.subscribe((e=>e&&this.update(e))),this.saveSetting.doneData.subscribe((e=>this.update({isFlatActive:!!e})))}}),this.repository=e;var a=this;this.load=this.createTask((0,ie.Z)((function*(){const e=yield a.repository.find();return e?{isFlatActive:e.enabled||!1}:null})));var s=this;this.saveSetting=this.createTask(function(){var e=(0,ie.Z)((function*(e){return yield s.repository.save(e),e}));return function(a){return e.apply(this,arguments)}}())}}class FlatMarketProtectionRepository{find(){return(0,ie.Z)((function*(){return B.$.getFlatProtectionOptions()}))()}save(e){return B.$.setFlatProtectionOptions({enabled:e})}}const ea=()=>Ee.createElement(Vt.SB_,null),ta=()=>(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"fat_deals",eventAction:"enable_flat_market_protect",eventLabel:"enable_flat_market_protect"}),aa=()=>(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"fat_deals",eventAction:"learn_more",eventLabel:"learn_more"}),sa=e=>(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"fat_deals",eventAction:"go_to_settings",eventLabel:"".concat(e)}),ia=e=>(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"fat_deals",eventAction:"question_click",eventLabel:"".concat(e)}),ra=()=>(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"fat_deals",eventAction:"confirm_flat_market_protect",eventLabel:"confirm_flat_market_protect"}),na=()=>(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"fat_deals",eventAction:"disable_flat_market_protect",eventLabel:"disable_flat_market_protect"}),oa="uRGP0Y91",la="fGzdJv6T",ca="xGSaMZRe",da="CGkgh2jG",ua="YB_JH48h",ma="yggsD2CY",pa="AWQZESw0",ha=()=>Ee.createElement("div",{className:oa},Ee.createElement("span",{className:la},Ee.createElement(Nt._,{id:"app_settings_deal_close_flat_protection_title",defaultMessage:"Flat Market Protection"})),Ee.createElement(ea,null));ha.displayName="SettingTitle";const va=e=>{let a=e.storiesNavigation;const s=Ee.useCallback((()=>{aa(),null==a||a.goToStoryByName("flat_market_protection_learn_more")}),[]);return Ee.createElement(Ee.Fragment,null,Ee.createElement("div",null,Ee.createElement(Nt._,{id:"app_settings_deal_close_flat_protection_description",defaultMessage:"Get the trade amount back with no loss or gain if opening and closing quotes differ by {value} ticks",values:{value:1}})),Ee.createElement("a",{className:ca,href:"#",onClick:s},Ee.createElement(Nt._,{id:"app_settings_deal_close_flat_protection_description_link",defaultMessage:"Learn More"})))};va.displayName="SettingDescription";const _a=e=>{let a=e.onChange,s=e.onClose;const i=Ee.useCallback((()=>{ra(),a(!0)}),[a]);return Ee.createElement(Ee.Fragment,null,Ee.createElement("p",{className:da},Ee.createElement(Nt._,{id:"flat_market_protection_enable_confirmation_title",defaultMessage:"Enable Flat Market Protection for Fixed Time Trades"})),Ee.createElement("p",{className:ua},Ee.createElement(Nt._,{id:"flat_market_protection_enable_confirmation_description",defaultMessage:"New trades with closing quotes that differ by {value} ticks from their opening quotes will close with no loss or gain. The trade amount will be fully returned to your account.",values:{value:1}})),Ee.createElement("div",{className:pa},Ee.createElement("div",{className:ma},Ee.createElement(Ht.zx,{variant:"secondary",fullWidth:!0,onClick:s,dataTest:"profile_settings_enable_confirmation_cancel_button"},Ee.createElement(Nt._,{id:"profile_settings_enable_confirmation_cancel",defaultMessage:"Cancel"}))),Ee.createElement("div",{className:ma},Ee.createElement(Ht.zx,{variant:"secondary",fullWidth:!0,onClick:i,dataTest:"profile_settings_enable_confirmation_button"},Ee.createElement(Nt._,{id:"profile_settings_enable_confirmation",defaultMessage:"Enable"})))))};_a.displayName="SettingEnableConfirmation";const fa=e=>{let a=e.onChange;const s=Ee.useCallback((()=>{na(),a(!1)}),[a]);return Ee.createElement(Ee.Fragment,null,Ee.createElement("p",{className:da},Ee.createElement(Nt._,{id:"flat_market_protection_disable_confirmation_title",defaultMessage:"Flat Market Protection is disabled for new trades on FTT"})),Ee.createElement("p",{className:ua},Ee.createElement(Nt._,{id:"flat_market_protection_disable_confirmation_description",defaultMessage:"Flat Market Protection will still apply to trades you currently have open but not for new ones",values:{value:1}})),Ee.createElement("span",{className:pa},Ee.createElement(Ht.zx,{fullWidth:!0,onClick:s,dataTest:"flat_market_protection_disable_confirmation_button"},Ee.createElement(Nt._,{id:"flat_market_protection_disable_confirmation",defaultMessage:"Got It"}))))};fa.displayName="SettingDisableConfirmation";const Ea="qXAX4qz2",Sa="lpa3lgzZ",ya="m2M2fIYx",ba="GBRpPbdx",Ca=e=>{let a=e.onLoad,s=e.onClick;return Ee.useEffect((()=>{a&&a()}),[]),Ee.createElement("div",{className:Ea},Ee.createElement(ea,null),Ee.createElement("div",{className:Sa},Ee.createElement("p",{className:ya},Ee.createElement(Nt._,{id:"closed_deal_details_closed_quote_tooltip_description",defaultMessage:"Even a slight change in quotes affects the trade result. Enable Flat Market Protection in Settings to get a refund on future trades with quotes differing by {value} ticks.",values:{value:1}})),s&&Ee.createElement("p",null,Ee.createElement("a",{onClick:s,className:ba},Ee.createElement(Nt._,{id:"closed_deal_details_closed_quote_tooltip_link",defaultMessage:"Go to Settings"})))))};Ca.displayName="CloseQuoteTooltipDescription";const Ta=e=>{let a=e.onLoad,s=e.onClick;return Ee.useEffect((()=>{a&&a()}),[]),Ee.createElement("div",{className:Ea},Ee.createElement(ea,null),Ee.createElement("div",{className:Sa},Ee.createElement("p",{className:ya},Ee.createElement(Nt._,{id:"closed_deal_details_closed_status_tooltip_description",defaultMessage:"Opened with Flat Market Protection enabled. The closing and opening quotes differ by {value} ticks, so the trade closed with no loss or gain.",values:{value:1}})),s&&Ee.createElement("p",null,Ee.createElement("a",{onClick:s,className:ba},Ee.createElement(Nt._,{id:"closed_deal_details_closed_quote_tooltip_link",defaultMessage:"Go to Settings"})))))};Ta.displayName="CloseStatusTooltipDescription";const Aa=(0,gt.v)({name:"FlatMarketProtection",dependsOn:[Et.iQ,At.M,wt.u,Qt.EA],optionalDependsOn:[Jt.Q],services:(e,a)=>({flatMarketProtection:new FlatMarketProtectionService(a.flatMarketProtectionRepository)})},{repositories:()=>({flatMarketProtectionRepository:new FlatMarketProtectionRepository})}),ka=e=>{const a=null==e?void 0:e.tradeFrames;for(let e=0;e<(null==a?void 0:a.length);e++){const s=a[e].serviceInterface.binder.getService(ft.CHART_STORE);(null==s?void 0:s.activeFlatMarketProtection)&&s.activeFlatMarketProtection()}},wa=e=>{const a=e.tradeFrames;for(let e=0;e<a.length;e++){const s=a[e].serviceInterface.binder.getService(ft.CHART_STORE);(null==s?void 0:s.disableFlatMarketProtection)&&s.disableFlatMarketProtection()}};Aa.use(Xt.hz,((e,a,s)=>{let i=s.storiesNavigation,r=s.flatMarketProtection;const n=r.getState().isFlatActive,o=(0,st.Sc)(ft.TRADE_MANAGER_SERVICE);return e.push({id:"flatMarketProtection",title:Ee.createElement(ha,null),description:Ee.createElement(va,{storiesNavigation:i}),enableConfirmation:_a,disableConfirmation:fa,value:n,dataTestId:"flat-market-protection-settings",order:Xt.$D.flatMarketProtection,onCheck:(e,a)=>{r.saveSetting(a),a?(ta(),ka(o)):wa(o)}}),e})).use(Et.UO,((e,a,s)=>s.flatMarketProtection.checkIsShowCloseQuoteTooltip(a))).use(Et.ze,((e,a)=>{const s=Ee.useCallback((()=>{var s,i;sa(e.id),a.flatMarketProtection.setHighlightFlatSetting(!0,!0),null===(s=(0,st.Sc)(ft.NAVIGATION_SERVICE))||void 0===s||null===(i=s.profileNavigation)||void 0===i||i.goToSettings()}),[e]),i=Ee.useCallback((()=>{ia(e.id)}),[e]);return Ee.createElement(Ca,{onLoad:i,onClick:s})})).use(Et.Bo,((e,a,s)=>s.flatMarketProtection.checkIsShowStatusTooltip(a))).use(It.wH,((e,a,s)=>s.flatMarketProtection.getState().isFlatSettingHighlighted?{id:"flatMarketProtection"}:e)).use(Et.LV,((e,a)=>{const s=Ee.useCallback((()=>{var s,i;a.flatMarketProtection.setHighlightFlatSetting(!0,!0),sa(e.id),null===(s=(0,st.Sc)(ft.NAVIGATION_SERVICE))||void 0===s||null===(i=s.profileNavigation)||void 0===i||i.goToSettings()}),[e]),i=Ee.useCallback((()=>{ia(e.id)}),[e]);return Ee.createElement(Ta,{onLoad:i,onClick:s})})).use($t.Dp,((e,a)=>{const s=a.flatMarketProtection.getState().isFlatActive,i=(0,st.Sc)(ft.TRADE_MANAGER_SERVICE);s?ka(i):wa(i)})).onStart((e=>{e.flatMarketProtection.load().then((e=>{if(null==e?void 0:e.isFlatActive){const e=(0,st.Sc)(ft.TRADE_MANAGER_SERVICE);ka(e)}}))})).enable((e=>{const a=e.politics.getPolitic("toggles");return!(!a||!a.flat_market_protection)}));var Na=s(61681),Ra=s(53323),Ia=s(5915);class IslamicAccountConfirmationService extends vt.t{showConfirmation(){this.confirmationViewed||(this.inputs.showConfirmation((()=>{this.inputs.showIslamicStory(),this.inputs.saveIslamic()})),this.confirmationViewed=!0)}constructor(e){super(),this.inputs=e,this.confirmationViewed=!1}}var Da=s(86321);const Oa="pCxgacfF",La=e=>{let a=e.children,s=e.onClick;return Ee.createElement("button",{className:Oa,onClick:s},a)},Ma="kGicZvKs",Pa="w554djwY",xa="DJmRKpJZ",Fa="cX9JPnuS",Ba="nLLZ4HkZ",Za="HzXlj003",Ua="rCkfENr1",Ha=e=>{let a=e.onClose,s=e.onConfirm;const i=Ee.useCallback((()=>{s(),a()}),[s,a]),r=Ee.useCallback((()=>{a()}),[a]);return Ee.createElement(Da.u_,{className:Ma},Ee.createElement(Da.u_.Block,null,Ee.createElement("div",{className:Pa},Ee.createElement("div",{className:xa},Ee.createElement("div",{className:Fa},Ee.createElement(Nt._,{id:"alert_islamic_account_title",defaultMessage:"Islamic Accounts"})),Ee.createElement("div",{className:Ba},Ee.createElement(Nt._,{id:"alert_islamic_account_description",defaultMessage:"You can set your accounts to adhere to Sharia law. This won't affect your accounts' balances or previous trades."}))),Ee.createElement("div",{className:Za},Ee.createElement("div",{className:Ua},Ee.createElement(La,{onClick:r},Ee.createElement(Nt._,{id:"cancel",defaultMessage:"Cancel"}))),Ee.createElement("div",{className:Ua},Ee.createElement(La,{onClick:i},Ee.createElement(Nt._,{id:"islamic_account_set",defaultMessage:"Set as Islamic"})))))))};const Ga=(0,gt.v)({name:"IslamicAccount",dependsOn:[Na.G,Qt.EA,Jt.Q,xt.x],services:e=>({islamicAccountConfirmationService:new IslamicAccountConfirmationService({showConfirmation:e=>{const a=(0,st.Sc)(ft.NOTICE_SERVICE);null==a||a.add({id:"IslamicAccountConfirmModal",collectionName:Ra.sm.FULL_SCREEN,layout:a=>{let s=a.api,i=a.notice;return Ee.createElement(Ia.default,{noticeId:i.id,api:s,theme:F.si.DARK,content:a=>{let s=a.onClose;return Ee.createElement(Ha,{onClose:s,onConfirm:e})}})},notice:{priority:!0}})},showIslamicStory:()=>{e.storiesNavigation.goToStoryByName("Islamic_account_affiliate_story")},saveIslamic(){e.user.saveUserData({isIslamic:!0}),e.commonLegacyServiceList.accountService.updateIslamicAccount(!0)}})})});Ga.onStart((e=>{let a=e.islamicAccountConfirmationService,s=e.user,i=e.stories,r=e.storiesNavigation;const n=(0,st.Sc)(ft.NAVIGATION_SERVICE),o=n?n.locationSearch:window.location.search,l=(0,Re.parse)(o);if(!s.getState().user.isIslamic&&"islamic"===l.landing){window.history.replaceState&&window.history.replaceState("",document.title,function(e,a,s){const i=(0,Re.parse)(e);Object.keys(i).forEach((e=>{s.includes(e)&&delete i[e]}));let r="".concat(a);return 0!==Object.keys(i).length&&(r="".concat(r,"?").concat((0,Re.stringify)(i))),r}(window.location.search,window.location.pathname,["landing"]));r.store.map((e=>"ready"===e.status)).subscribe((e=>{if(!e)return;i.getState().selectedStory?r.subscribe((e=>{e.story||a.showConfirmation()})):a.showConfirmation()}))}})),Ga.enable((0,ie.Z)((function*(){return yield(0,st.ic)(ft.NAVIGATION_SERVICE),!0})));var Va=s(16685),Wa=s(80561),ja=s(59925),za=s(47932),qa=s(6399),Ka=s(18207),Ya=s(17855),Xa=s(55121),Ja=s(95350);const Qa=(0,ke.zt)((e=>{let a=e.scroll,s=e.isAvailable,i=e.isDemoAvailable,r=e.isRealAvailable;return Ee.createElement("div",null,s?Ee.createElement(Ee.Fragment,null,Ee.createElement(Ka.nC,null,Ee.createElement(Nt._,{id:"st_portfolio_positions","data-test":"st-portfolio-positions-title",defaultMessage:"Positions"})),Ee.createElement(Ja.$J,null),Ee.createElement(Ja.iI,null),Ee.createElement(Ka.nC,null,Ee.createElement(Nt._,{id:"ct_spt_positions_history","data-test":"ct_spt-positions-history-title",defaultMessage:"Positions History"})),Ee.createElement(Ja.tr,{scroll:a})):Ee.createElement(St.Kj,{isDemoUnavailable:!i,isRealUnavailable:!r}))}),{helper(e,a){let s=e.accountService,i=e.appService,r=a.scroll;const n=(0,Ya.M)({politics:i.politics,accountType:s.selectedAccount.type});return{scroll:r,isAvailable:n.isAvailable,isDemoAvailable:n.isDemoAvailable,isRealAvailable:n.isRealAvailable}},services:[Xa.BR,te.z]}),$a=(0,gt.v)({name:"TradingSpt",dependsOn:[xt.x,Na.G,At.M,lt.Ul]});$a.use(It.Gj,((e,a)=>[{mechanic:"spt",order:2,title:Ee.createElement(qa.i,null),content:Ee.createElement(Qa,{scroll:a.scroll})},...e])),$a.enable((e=>e.tradingMechanicsService.enabled("spt")));var es=s(22895),ts=s(89172),as=s(8275),ss=s(58952);const is=(0,ss.WV)({deeplink_action:(0,ss.t$)("mytrades"),project:(0,ss.EJ)((0,ss.t$)("fx"),(0,ss.t$)("bo"),(0,ss.t$)("spt")).optional(),type:(0,ss.EJ)((0,ss.t$)("closed"),(0,ss.t$)("active"),(0,ss.t$)("all")).optional()}),rs=(0,ss.WV)({deeplink_action:(0,ss.t$)("order-push"),project:(0,ss.EJ)((0,ss.t$)("fx"),(0,ss.t$)("bo")).optional(),orderId:ss.Mr,dealId:ss.Mr.optional()});var ns=s(43387);const os=(0,gt.v)({name:"TradingDeepLinks",dependsOn:[At.M,Rt.K,xt.x,ot.F0,es.x,ts.o,ja.P,za.o]});os.onStart((e=>{const a=(a,s)=>{["bo","fx"].includes(a)&&("active"===s?(e.commonLegacyServiceList.sideBarService.goTo(as.KO.TRADES),e.tradingPanelService.handleChangeMechanic("fx"===a?"fx":"ftt")):e.commonLegacyServiceList.sideBarService.goTo("fx"===a?as.KO.TRADING_HISTORY_FX:as.KO.TRADING_HISTORY_FTT))};e.commandService.registerCommand(is.guard,(e=>{const s=(null==e?void 0:e.project)||"bo",i=(null==e?void 0:e.type)||"active";a(s,i)})),ns.u.on("goToMyTrades",(e=>{const s=(null==e?void 0:e.project)||"bo",i=(null==e?void 0:e.type)||"active";a(s,i)})),e.commandService.registerCommand(rs.guard,(a=>{const s=(null==a?void 0:a.project)||"bo",i=e.commonLegacyServiceList.accountService.selectedAccount;if(a.dealId&&100!==a.dealId){const r="fx"===s?e.dealsActiveFxService:e.dealsActiveFttService,n="fx"===s?e.dealDetailsFxService:e.dealDetailsFttService;r.getDeal(a.dealId)?r.showDeal(a.dealId,500):n.showDealInPopup({id:a.dealId,account_id:i.id,group:i.group||""})}else if(a.orderId){const i="fx"===s?e.ordersHistoryFxService:e.ordersHistoryFttService,r="fx"===s?e.orderActiveFxService:e.orderActiveFttService,n=r.getOrder(a.orderId),o=i.getOrder(a.orderId);n?r.showOrder(a.orderId):o&&i.showOrder(a.orderId)}}))}));var ls=s(12802),cs=s(23934),ds=s(87601);function us(){const e=window.matchMedia("(max-height: ".concat(ds.j$.BREAKPOINT_540,"px)")),a=window.matchMedia("(max-width: ".concat(ds.j$.BREAKPOINT_960,"px)")),s=window.matchMedia("(max-width: ".concat(ds.j$.BREAKPOINT_768,"px)")),i=window.matchMedia("(orientation: portrait)"),r=window.matchMedia("(orientation: landscape)"),n=e.matches&&a.matches&&r.matches,o=s.matches&&i.matches;return o||n?{landscape:n,portrait:o}:null}var ms=s(17771),ps=s(73533),hs=s(84584),vs=s(21182);const gs=(0,hs.Z)(),_s=(0,vs.W)(gs),fs=e=>{let a=e.children;const s=Ee.useRef(null);return Ee.createElement("div",{ref:s},Ee.createElement(_s,{props:{anchorEl:s.current}}),a)},Es=(0,gt.v)({name:"TradingDeals",dependsOn:[rt.u$,Na.G],optionalDependsOn:[es.x,ts.o,ja.P,za.o]});Es.use(rt.eM,((e,a,s)=>{var i,r,n,o;const l=((null===(i=s.dealsActiveFttService)||void 0===i?void 0:i.getState().count)||0)+((null===(r=s.dealsActiveFxService)||void 0===r?void 0:r.getState().count)||0)+((null===(n=s.orderActiveFttService)||void 0===n?void 0:n.getState().count)||0)+((null===(o=s.orderActiveFxService)||void 0===o?void 0:o.getState().count)||0);return e.push({id:as.KO.TRADES,title:as.x0.trades,selected:s.sidebarService.getMajorActiveScope()===as.KO.TRADES,dataTest:"sidebar-btn-trading-bar",icon:Ee.createElement(fs,null,Ee.createElement(Vt.emY,null)),unreadNotifications:l,onClick:()=>s.sidebarService.toggle(as.KO.TRADES)}),e}));class TrendsService extends vt.t{constructor(e){var a;super({trends:[]}),a=this,this.repository=e,this.load=this.createTask(pt((function*(){yield a.repository.subscribe({time_interval:300})})))}init(){this.repository.emitter.on("trendsChange",(e=>{this.update({trends:e})})),this.load()}getTrends(){return this.getState().trends}}class TrendsServiceFtt extends TrendsService{}class TrendsServiceFx extends TrendsService{}class TrendPromoFxService extends vt.t{constructor(e,a){var s;super({trends:[],triggerBannerHighlight:0,activeTrend:null}),s=this,this.repository=e,this.inputs=a,this.load=this.createTask(pt((function*(){yield s.repository.subscribe({time_interval:900})})))}init(){this.repository.emitter.on("trendsChange",(e=>{this.update({trends:e})})),this.repository.emitter.on("restore",(()=>{this.repository.subscribe({time_interval:900})})),this.load()}getTrends(){return this.getState().trends}highlightBanner(){this.update({triggerBannerHighlight:(new Date).getTime()})}showTrendOnChart(e,a){if(e){const s=this.inputs.showTrendOnChart(e,a,e.assetId);s&&this.update({activeTrend:{drawingId:s,trend:e,tradeFrameId:a}})}}}var Ss=s(63967),ys=s(79035),bs=s(35414),Cs=s(64395),Ts=s(26710),As=s(40652),ks=s(48917),ws=s(82967),Ns="_8lzS4HQNxa_j";const Rs=e=>{let a=e.data,s=e.width,i=e.height,r=e.fillColor,n=e.gradientColor,o=e.isGradient;const l=Ee.useRef(null),c=Ee.useCallback((e=>{const a=e.select("defs").append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");a.append("stop").attr("offset","0%").attr("style","stop-color:".concat(n,";stop-opacity:0")),a.append("stop").attr("offset","10%").attr("style","stop-color:".concat(n,";stop-opacity:0.05")),a.append("stop").attr("offset","100%").attr("style","stop-color:".concat(n,";stop-opacity:.5"))}),[n]);return Ee.useLayoutEffect((()=>{if(l.current&&a){const e=[{values:a.map(((e,a)=>{const s=(new Date).getTime();return{date:new Date(s+1e3*(a+1)),close:e}}))}];(0,ws.Z)(l.current).select("svg").empty()||(0,ws.Z)(l.current).select("svg").remove();const n=(0,ws.Z)(l.current).append("svg").attr("width",s).attr("height",i).append("g");n.append("defs"),n.call(c);const d=(0,ys.Z)().domain([(0,Cs.Z)(e,(e=>(0,Cs.Z)(e.values,(e=>e.date))))||new Date,(0,Ts.Z)(e,(e=>(0,Ts.Z)(e.values,(e=>e.date))))||new Date]).range([0,s]),u=(0,bs.Z)().domain([(0,Cs.Z)(e,(e=>(0,Cs.Z)(e.values,(e=>e.close))))||0,(0,Ts.Z)(e,(e=>(0,Ts.Z)(e.values,(e=>e.close))))||0]).range([i,0]),m=(0,As.Z)().x((e=>d(e.date))).y((e=>u(e.close))).curve(ks.Z.alpha(.5));o&&n.selectAll(".line").data(e).enter().append("path").attr("d",(e=>{var a;const s=null===(a=m(e.values))||void 0===a?void 0:a.slice(1),r=null==s?void 0:s.split(",");return"M0,".concat(i,",").concat(s,",l0,").concat(i-(r?Number(r[r.length-1]):0))})).style("fill","url(#gradient)"),n.selectAll(".line").data(e).enter().append("path").attr("d",(e=>m(e.values))).style("fill","none").attr("stroke",r),n.select(".domain").attr("stroke",r)}}),[a,s,i,r,n,c,o]),Ee.createElement("div",{className:Ns,style:{width:"".concat(s,"px"),height:"".concat(i,"px")},ref:l})};var Is=s(36732),Ds=s(95029),Os=s(2243);function Ls(e){return e.length?e.reduce(((e,a)=>e&&e.rateChangePercentage>=a.rateChangePercentage?ut({},e):ut({},a)),{}):null}var Ms="_3RfP6eUU8Tw0",Ps="_3_b9i7_A1osx",xs="WNHlGeamntNY",Fs="_2Dke43Rnqct9",Bs="_1cpCGi6QYsuy",Zs="_3FAP2LldSBB9";const Us=e=>{let a=e.trend,s=e.triggerAnimation,i=void 0===s?0:s,r=e.onClick;const n=(0,dt.D9)(a.assetId),o=1===a.direction?"#22C379":"#E24F32";return Ee.createElement("div",{className:Ms,onClick:r},Ee.createElement(Is.J0,{count:1,delay:300,duration:2e3,showInitial:!1,trigger:i}),Ee.createElement(Ht.xu,{direction:"row",gap:"m",verticalAlign:"center"},Ee.createElement("div",{className:Ps},Ee.createElement(Ht.xu,{gap:"xs"},Ee.createElement("div",{className:xs},Ee.createElement(Nt._,{defaultMessage:"{percent} on {asset}",id:"assets_forex_trend_direction_banner_title",values:{percent:Ee.createElement(Ds.p7,{className:Be(Fs,1===a.direction?Bs:Zs),maximumFractionDigits:2,minimumFractionDigits:2,value:a.rateChangePercentage*a.direction,isSign:!0}),asset:Ee.createElement("span",null,null==n?void 0:n.title)}})),Ee.createElement("div",null,Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"Over last {time} min",id:"assets_forex_trend_time_banner_body",values:{time:15}}))))),Ee.createElement(Rs,{data:a.quotes,fillColor:o,gradientColor:o,height:68,width:98})))},Hs=Ee.memo((e=>{let a=e.onClick;const s=(0,Ss.G)(TrendPromoFxService),i=(0,Ot.o)(s.store).triggerBannerHighlight,r=(()=>{const e=(0,Ss.G)(TrendPromoFxService),a=(0,Ot.o)(e.store).trends,s=Ee.useState(Ls(a)),i=Os(s,2),r=i[0],n=i[1];return Ee.useEffect((()=>{n(Ls(a))}),[a]),r})(),n=Ee.useCallback((()=>{a(r)}),[a,r]);return r?Ee.createElement(Us,{trend:r,triggerAnimation:i,onClick:n}):null}));Hs.displayName="TrendPromoBannerFx";var Gs=s(46811),Vs=s(74480),Ws=s(74199),js=s(64802),zs=s(58568),qs=s(14803),Ks=s(1149);class DrawingsListService extends vt.t{setSearchText(e){this.update({searchText:e})}constructor(e){super({searchText:"",list:[]}),this.repository=e;var a=this;this.load=this.createTask((0,ie.Z)((function*(){const e=yield a.repository.find();e&&a.update({list:[...e.list]})})),{strategy:vt.T.once})}}var Ys=s(67138);class DrawingApi_DrawingApi extends vt.t{addDrawingByType(e,a,s,i){const r=this.drawingsListService.getState().list,n=this.drawingsEditService.getState().activeTradeFrameId,o=a||n,l=this.drawingsEditService.getAsset(o),c=r.find((a=>a.type===e));if(!s||s===(null==l?void 0:l.id))return a&&a!==n&&this.drawingsEditService.updateActiveTradeFrameId(a),c?this.drawingsEditService.addDrawing(c,i):void 0}isDrawingByType(e,a,s){return!!this.drawingsEditService.getList(a,s).find((a=>a.type===e))}removeDrawingByType(e,a,s){const i=this.drawingsEditService.getList(a,s).find((a=>a.type===e));return!!i&&(this.drawingsEditService.removeDrawing(i.id,a,!1),!0)}constructor(e,a){super(),this.drawingsEditService=e,this.drawingsListService=a}}var Xs=s(88284);class DrawingsRepository{find(){return(0,ie.Z)((function*(){return Promise.resolve({availableLineColors:["1fbf75","ee9f07","fe4995","f47961","776bf8","edd502","235ff8","09e5d7","e1310f"],widthSettings:{min:1,max:5,step:.01,default:1},list:[{id:Xs.O4.horizontalLine,position:Xs.O4.horizontalLine,type:Xs.O4.horizontalLine,name:"horizontalLine",title:Xs.X3.horizontalLine,available:!0},{id:Xs.O4.verticalLine,position:Xs.O4.verticalLine,type:Xs.O4.verticalLine,name:"verticalLine",title:Xs.X3.verticalLine,available:!0},{id:Xs.O4.trendLine,position:Xs.O4.trendLine,type:Xs.O4.trendLine,name:"trendLine",title:Xs.X3.trendLine,available:!0},{id:Xs.O4.ray,position:Xs.O4.ray,type:Xs.O4.ray,name:"ray",title:Xs.X3.ray,available:!0},{id:Xs.O4.fibonacciLevelsRays,position:Xs.O4.fibonacciLevelsRays,type:Xs.O4.fibonacciLevelsRays,name:"fibonacciLevelsRays",title:Xs.X3.fibonacciLevelsRays,available:!0},{id:Xs.O4.fibResistanceFan,position:Xs.O4.fibResistanceFan,type:Xs.O4.fibResistanceFan,name:"fibResistanceFan",title:Xs.X3.fibResistanceFan,available:!0},{id:Xs.O4.fixedTrend,position:Xs.O4.fixedTrend,type:Xs.O4.fixedTrend,name:"fixedTrend",title:Xs.X3.trendLine,available:!0,visible:!1}]})}))()}}var Js=s(57615),Qs=s(29042);class ActiveDrawingsRepository{find(){var e=this;return(0,ie.Z)((function*(){const a=e.storage.get("data");return(null==a?void 0:a.content)&&1===a.version?Promise.resolve(a.content):Promise.resolve(void 0)}))()}save(e){return this.storage.set("data",{content:e,version:1}),Promise.resolve()}constructor(){this.storage=new Js._({namespace:"drawing-edit-service",backend:new Qs.u})}}var $s=s(47450);const ei="DwzsFjnc",ti="t3wcFacC",ai="MCBTmY9g",si="Iy1LQOGJ";const ii=e=>{const a=function(e){var a,s;let i="";const r=(null==e?void 0:e.points.length)?e.points[0]:null,n=(null===(a=e.asset)||void 0===a?void 0:a.precision)||1;return e.type===Xs.O4.verticalLine&&r?i=new Date(1e3*r.timestamp).toLocaleString("en-US",{hour12:!1}):e.type===Xs.O4.horizontalLine&&r&&(i=r.quote.toFixed(n)),{color:null==e||null===(s=e.config)||void 0===s?void 0:s.color,title:i}}(e.item);return Ee.createElement("div",{className:ei,"data-test":"tech-analysis-active-drawing-preview"},a.color&&Ee.createElement("div",{className:ti},Ee.createElement("div",{className:ai,style:{background:"#".concat(a.color)}})),a.title&&Ee.createElement("span",{className:si,style:{color:"#".concat(a.color)||0}},a.title))};ii.displayName="DrawingPreview";const ri=e=>{let a=e.item,s=e.headerTitle,i=e.onClose,r=e.onClick;const n=Ee.useCallback((()=>{r(a.id)}),[a.id,r]),o=Ee.useCallback((()=>{i(a.id)}),[a.id,i]);return Ee.createElement(Is.A7,{headerTitle:s,title:Ee.createElement(Nt._,Object.assign({},a.title)),onClick:n,onClose:o,content:Ee.createElement(ii,{item:a})})};ri.displayName="ActiveIndicatorItem";const ni={[Xs.O4.horizontalLine]:Ee.createElement(Vt.A1J,null),[Xs.O4.verticalLine]:Ee.createElement(Vt.LYM,null),[Xs.O4.trendLine]:Ee.createElement(Vt.Fco,null),[Xs.O4.ray]:Ee.createElement(Vt.oIO,null),[Xs.O4.fibonacciLevelsRays]:Ee.createElement(Vt.TCi,null),[Xs.O4.fibResistanceFan]:Ee.createElement(Vt.ag6,null),[Xs.O4.fixedTrend]:Ee.createElement(Vt.Fco,null)};const oi=Ee.lazy((()=>s.e(9102).then(s.bind(s,69102)).then((e=>({default:e.DrawingEditLayout}))))),li=(0,gt.v)({name:"Drawings",dependsOn:[rt.u$,zs.y,xt.x,ps.Kg,Na.G],services(e,a){const s=new Ys.y(a.drawingsRepository,a.activeDrawingsRepository,{activeTradeFrameId:e.techAnalysisService.getActiveTradeFrameId(),updateActiveInstruments:e.techAnalysisService.updateActiveInstruments,addDrawingToChart:(a,s)=>{(0,js.Ps)(a,e.tradeManagerServiceList).then((e=>{e.em.api.drawingFbApi.addDrawing(s.drawingInstanceId,Xs.Zs[s.type],s.config.color,s.config.width,[...s.points])}))},removeDrawingFromChart:(a,s)=>{(0,js.Ps)(a,e.tradeManagerServiceList).then((e=>{e.em.api.drawingFbApi.removeDrawing(s)}))},hoverDrawing:(a,s,i)=>{(0,js.Ps)(a,e.tradeManagerServiceList).then((e=>{i?e.em.api.drawingFbApi.hoverDrawingIn(s):e.em.api.drawingFbApi.hoverDrawingOut()}))},getFrames:()=>e.tradeManagerServiceList.getFrames(),getEditItemIncrement:()=>e.techAnalysisService.getEditItemIncrement(),updateDrawingOnChart(a,s){(0,js.Ps)(a,e.tradeManagerServiceList).then((e=>{e.em.api.drawingFbApi.editDrawing(s.drawingInstanceId,Xs.Zs[s.type],s.config.color,s.config.width,[...s.points])}))},goToTechAnalysis(){e.techAnalysisService.goToTechAnalysis()},goToDrawingEdit:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(qs.KO.DRAWINGS_EDIT)}});e.tradeManagerServiceList.emitter.on("updateFrames",s.updateFrames),e.techAnalysisService.emitter.on("activeTradeFrameId",s.updateActiveTradeFrameId),Vs.O.emitter.on("drawingPointEdit",s.handleDrawingPointEdit),Vs.O.emitter.on("selectDrawing",s.handleSelectDrawing),Vs.O.emitter.on("unSelectDrawing",s.handleUnSelectDrawing);const i=new DrawingsListService(a.drawingsRepository);return e.techAnalysisService.emitter.on("searchText",(e=>{i.setSearchText(e)})),{drawingListService:i,drawingsEditService:s,drawingApi:new DrawingApi_DrawingApi(s,i)}}},{repositories:()=>({drawingsRepository:new DrawingsRepository,activeDrawingsRepository:new ActiveDrawingsRepository}),publicApi:e=>({drawingApi:e.drawingApi})});li.use(js.rb,((e,a,s)=>{const i=s.drawingListService.getState(),r=i.list,n=i.searchText,o=r.filter((e=>!1!==e.visible)),l=e=>{const a=o.find((a=>a.id===e));a&&(s.drawingsEditService.addDrawing(a),s.techAnalysisService.goToActiveInstruments(),s.tradeManagerServiceList.getTradeFrameService(s.drawingsEditService.getState().activeTradeFrameId||"").then((e=>{e&&(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"add_drawing/".concat(a.name),eventLabel:"".concat(e.selectedPair.group,"/").concat(e.selectedPair.id)})})))},c=n?function(e,a){const s=(0,$s.O)(e);if(s&&s[1]){const e=new RegExp(s[1],"i");return a.filter((a=>e.test(a.name)))}return null}(n,o):o,d=s.drawingsEditService.getCurrentSummary(),u=function(e){let a=0;return e&&Object.keys(e).forEach((s=>{const i=Number(s),r=e[i];a+=r})),a}(d);return[...e,...c?[{count:c.length,activeCount:u,accordionItemId:Xs.pJ,icon:Ee.createElement(Vt.syg,null),title:Ee.createElement(Nt._,{id:"drawing",defaultMessage:"Drawing"}),list:Ee.createElement(Ee.Fragment,null,c.map((e=>{const a=d&&void 0!==d[e.type]?d[e.type]:0;return Ee.createElement(Is.H_,{id:e.id,contentBefore:ni[e.type],count:a,disabled:!e.available,key:e.id,title:Ee.createElement(Nt._,Object.assign({},e.title)),contentAfter:!e.available&&Ee.createElement(Is.Y1,null),onClick:l})}))),position:js.Cf.drawings}]:[]]})).use(js.MR,((e,a,s)=>{const i=s.drawingsEditService.getState().activeTradeFrameId,r=s.drawingsEditService.getCurrentAsset(),n=s.drawingsEditService.getCurrentList(null==r?void 0:r.id),o=e=>{s.drawingsEditService.removeDrawing(e)},l=e=>{const a=n.find((a=>a.id===e));i&&!(null==a?void 0:a.isEditDisabled)&&(s.drawingsEditService.setEditedDrawindId(i,e),s.drawingsEditService.goToDrawingEdit())};return n&&n.length&&r?[...e,...n.map((e=>({position:e.position,id:e.id,component:Ee.createElement(ri,{headerTitle:"assetTrends"===e.source?Ee.createElement(Nt._,{id:"user_indicators_active_instruments_from_trends",defaultMessage:"From Trending Assets"}):Ee.createElement(Nt._,{id:"drawing",defaultMessage:"Drawing"}),item:e,onClick:l,onClose:o})})))]:e})).use(js.dT,((e,a,s)=>{const i=s.drawingsEditService.getCurrentAsset(),r=s.drawingsEditService.getCurrentList(null==i?void 0:i.id);return[...e,...r.length?[{icon:Ee.createElement(Vt.syg,null),title:Ee.createElement(Nt._,{id:"drawing",defaultMessage:"Drawing"}),count:r.length,type:Xs.pJ,position:js.Cf.drawings,onRemove:e=>{e===Xs.pJ&&s.drawingsEditService.removeAllDrawings()}}]:[]]})).use(js.SU,((e,a,s)=>{const i=s.drawingsEditService.getState().activeTradeFrameId,r=s.drawingsEditService.getAsset(a.tradeFrameId),n=s.drawingsEditService.getList(a.tradeFrameId,null==r?void 0:r.id),o=s.drawingsEditService.getActiveDrawingDataItem(a.tradeFrameId),l=e=>{const i=n.find((a=>a.id===e));(null==i?void 0:i.isEditDisabled)||(s.techAnalysisService.setActiveTradeFrameId(a.tradeFrameId),s.drawingsEditService.setEditedDrawindId(a.tradeFrameId,e),s.drawingsEditService.goToDrawingEdit())},c=e=>{s.drawingsEditService.removeDrawing(e,a.tradeFrameId,i===a.tradeFrameId&&s.techAnalysisService.isTechAnalysisSidebarActive())},d=e=>{const i=n.find((a=>a.id===e));i&&s.drawingsEditService.handleLegendHoverOn(a.tradeFrameId,i.drawingInstanceId)},u=e=>{const i=n.find((a=>a.id===e));i&&s.drawingsEditService.handleLegendHoverOff(a.tradeFrameId,i.drawingInstanceId)};return n&&n.length?[...e,...n.map((e=>{const a=void 0!==(null==o?void 0:o.selectedDrawingId)&&o.selectedDrawingId===e.drawingInstanceId;return{id:e.id,position:e.position,component:Ee.createElement(Is.vf,{key:e.id,id:e.id,selected:a,title:Ee.createElement(Nt._,Object.assign({},e.title)),onClickEdit:l,onClickRemove:c,onMouseEnter:d,onMouseLeave:u,details:Ee.createElement(ii,{item:e})})}}))]:e})).use((0,qs.FW)(qs.KO.DRAWINGS_EDIT),{component:()=>Ee.createElement(oi,null),loader:()=>Ee.createElement(Ws.it,null)}).use(Ks.ri,(()=>Ee.createElement("div",null))),li.enable((()=>!0)).onStart((e=>{let a=e.drawingListService,s=e.drawingsEditService;return Promise.all([a.load(),s.load()])}));var ci=s(3121),di=s(62132);class TrendsFxRepository{find(){return Promise.resolve([])}subscribe(e){return(0,ie.Z)((function*(){const a=(0,ci.Z)(yield di.W.request.fxTrendsSubscribe([e]),2),s=(a[0],a[1]);return s?Promise.reject(s.message):Promise.resolve()}))()}unsubscribe(){return(0,ie.Z)((function*(){const e=(0,ci.Z)(yield di.W.request.fxTrendsUnsubscribe(),2),a=(e[0],e[1]);return a?Promise.reject(a.message):Promise.resolve()}))()}constructor(){this.emitter=(0,cs.Z)(),di.W.subscribe.fxTrendsChange((e=>{this.emitter.emit("trendsChange",e.map((e=>function(e){return{timeFrame:e.candles_time_frame,direction:e.direction,assetId:e.id,quotes:e.quotes,rateChangePercentage:e.rate_change_percentage,title:e.title,from:e.from,to:e.to}}(e))))})),di.W.on("restore",(()=>{this.emitter.emit("restore")}))}}const ui=(0,gt.v)({name:"trendsPromoFx",dependsOn:[rt.u$,Na.G,dt.qS,ps.Kg,lt.Ul,xt.x,Qt.EA,li],services:(e,a)=>({trendPromoFxService:new TrendPromoFxService(a.trendsFxRepository,{showTrendOnChart:(a,s,i)=>{if(e.drawingApi.isDrawingByType(Xs.O4.fixedTrend,s,i)&&!e.drawingApi.removeDrawingByType(Xs.O4.fixedTrend,s,i))return;const r=[{timestamp:a.from,quote:a.quotes[0]},{timestamp:a.to,quote:a.quotes[a.quotes.length-1]}],n=1===a.direction?"22c379":"e24f32",o=e.drawingApi.addDrawingByType(Xs.O4.fixedTrend,s,i,{points:r,color:n,source:"assetTrends",isEditDisabled:!0});return void 0!==(null==o?void 0:o.drawingInstanceId)?o.drawingInstanceId:void 0}})})},{repositories:()=>({trendsFxRepository:new TrendsFxRepository}),publicApi:e=>e});ui.use(Gs.si,((e,a)=>{const s=(0,st.Sc)(ft.ASSET_MENU_SERVICE),i=Ee.useCallback(function(){var e=(0,ie.Z)((function*(e){if(e&&(us()&&a.commonLegacyServiceList.sideBarService.closeMinor(),e&&s)){if(yield s.selectAsset(e.assetId,"fx"),s.tradeFrameId){const i=yield a.tradeManagerServiceList.getChartStore(s.tradeFrameId);if(i){const r="line"===i.zoomService.inputs.getSelectedRate().format?i.rateService.getRateByTimeFrameAndFormat(3,"line"):i.rateService.getRateByTimeFrameAndFormat(60,"candle");r&&(yield i.zoomService.selectRateByIdAsync(r.id),a.trendPromoFxService.showTrendOnChart(e,s.tradeFrameId))}}(0,ye.L)({event:"uaGtmEvents",eventCategory:"ftt_users_to_fx_okr",eventAction:"fx_click_banner_trends",eventLabel:e.assetId})}}));return function(a){return e.apply(this,arguments)}}(),[s,a]);return Ee.createElement(Hs,{onClick:i})})),ui.onStart((e=>{e.trendPromoFxService.init()})),ui.enable((e=>{let a=e.tradingMechanicsService;const s=e.politics.getPolitic("test_forex_promotion");return a.enabled("fx")&&1===s}));var mi=s(70325);const pi="k8eY0cTh",hi="PoGRWa4d",vi="NaIAOlyz",gi="SKSqxZS8",_i="uBh_MHFa",fi="z6kUKUvU",Ei=Ee.memo((e=>{let a=e.anchorEl,s=e.open,i=e.skidding,r=e.distance,n=void 0===r?2:r,o=e.width,l=e.placement,c=void 0===l?"bottom":l,d=e.title,u=e.text,m=e.arrow,p=void 0===m||m,h=e.delay,v=void 0===h?500:h,g=e.zIndex,_=void 0===g?101:g,f=e.classNameContent,E=e.onClose,S=e.onClick;const y=(0,Ds.gZ)(v),b=Ee.useCallback((e=>{e.stopPropagation(),S&&S()}),[S]),C=Ee.useCallback((e=>{e.stopPropagation(),E&&E()}),[E]);return y?null:Ee.createElement(Ht.rD,{arrow:p,anchorEl:a,open:s,transition:!0,placement:c,disablePortal:!0,distance:n,tethered:!0,skidding:i,style:{zIndex:_}},(e=>Ee.createElement(Is.xn,{TransitionProps:e.TransitionProps},Ee.createElement(Ht._v,{onClick:b,arrowProps:e.arrowProps,placement:e.basePlacement,classNameContent:Ze()(hi,f),color:"accent"},Ee.createElement("div",{className:pi,style:o?{maxWidth:"".concat(o,"px")}:{}},Ee.createElement("div",{"data-test":"fx-info-banner-close",className:vi,onClick:C},Ee.createElement(Vt.bMz,null)),d?Ee.createElement(Ht.xv,{variant:"M / Bold"},d):null,u?Ee.createElement(Ht.xv,{variant:"S / Regular"},u):null)))))}));Ei.displayName="Tooltip";var Si=s(64356);class PromoTestGroup1Service extends vt.t{setFlagOn(e){var a;!1!==(null===(a=this.getState())||void 0===a?void 0:a[e])&&this.update({[e]:!0})}setFlagOff(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.update({[e]:!1}),a&&this.saveCache(e,!1)}saveCache(e,a){const s=this.repository.getCache();this.repository.saveCache((0,Si.Z)((0,re.Z)({},s),{[e]:a}))}constructor(e){super(e.getCache()||{}),this.repository=e}}class PromoTestRepository{find(){return Promise.resolve()}getCache(){return this.storage.get("data")}saveCache(e){this.storage.set("data",e)}constructor(e){this.storage=new Js._({namespace:e,backend:new Qs.u,defaultTtl:2592e3})}}const yi="forex_first_trade_trend_stories_web",bi=(0,gt.v)({name:"PromotionFxTestGroup1",dependsOn:[rt.u$,Na.G,Es,xt.x,Rt.K,ui,ps.Kg,dt.qS,Jt.Q,Qt.EA,At.M],services:(e,a)=>({promoTestGroup1Service:new PromoTestGroup1Service(a.promoTestRepository)})},{repositories:()=>({promoTestRepository:new PromoTestRepository("promo-fx-test-group1")})});bi.use(ms.ZA,((e,a)=>{const s=Ee.useCallback((()=>{a.promoTestGroup1Service.setFlagOff("tabTooltip")}),[a]),i=Ee.useCallback((()=>{var e;null===(e=(0,st.Sc)(ft.ASSET_MENU_SERVICE))||void 0===e||e.selectTab("fx"),s(),(0,ye.L)({event:"uaGtmEvents",eventCategory:"ftt_users_to_fx_okr",eventAction:"click_tooltip_to_fx",eventLabel:"click_tooltip_to_fx"})}),[s]);return e.anchorEl?Ee.createElement(Ei,{anchorEl:e.anchorEl,open:!!a.promoTestGroup1Service.getState().tabTooltip,distance:16,classNameContent:gi,title:Ee.createElement(Nt._,{defaultMessage:"Catch the current trend in Forex mode. Now's the time to make a trade!",id:"assets_forex_trend_tooltip"}),onClose:s,onClick:i}):null})),bi.use(gs,((e,a)=>{const s=Ee.useCallback((()=>{a.promoTestGroup1Service.setFlagOff("tradesTooltip")}),[a]),i=Ee.useCallback((()=>{a.promoTestGroup1Service.setFlagOff("tradesTooltip"),a.commonLegacyServiceList.sideBarService.goTo(as.KO.TRADES),a.tradingPanelService.handleChangeMechanic("fx"),(0,ye.L)({event:"uaGtmEvents",eventCategory:"ftt_users_to_fx_okr",eventAction:"click_tooltip_fx_to_trades",eventLabel:"click_tooltip_fx_to_trades"})}),[a]),r=us();return e.anchorEl?Ee.createElement(Ei,{anchorEl:e.anchorEl,placement:(null==r?void 0:r.portrait)?"top":"right",open:!!a.promoTestGroup1Service.getState().tradesTooltip,distance:16,classNameContent:fi,title:Ee.createElement(Nt._,{defaultMessage:"Monitor the trade and close it when it reaches the result you want",id:"trades_forex_close_tooltip"}),onClose:s,onClick:i}):null})),bi.use(mi.L,((e,a)=>{const s=Ee.useCallback((()=>{a.promoTestGroup1Service.setFlagOff("chartTooltip")}),[a]);return e.anchorEl?Ee.createElement(Ei,{anchorEl:e.anchorEl,placement:"top",open:!!a.promoTestGroup1Service.getState().chartTooltip,arrow:!1,distance:-40,classNameContent:_i,title:Ee.createElement(Nt._,{defaultMessage:"Make a trend-based trade",id:"chart_forex_trend_tooltip_title"}),text:Ee.createElement(Nt._,{defaultMessage:"Analyze the chart and forecast the price direction",id:"chart_forex_trend_tooltip_body"}),onClose:s}):null})),bi.onStart((e=>{var a;const s=(0,cs.Z)(),i=e.commonLegacyServiceList.sideBarService,r=i.sideBarMinor,n=i.sideBarMajor,o=(0,st.Sc)(ft.ASSET_MENU_SERVICE),c=()=>{"fx"!==(null==o?void 0:o.selectedTab)&&(e.promoTestGroup1Service.setFlagOn("tabTooltip"),(0,ye.L)({event:"uaGtmEvents",eventCategory:"ftt_users_to_fx_okr",eventAction:"show_tooltip_to_fx",eventLabel:"show_tooltip_to_fx"}))};r.isOpen&&(null===(a=r.scope.activeItem)||void 0===a?void 0:a.id)===qs.KO.ASSETS&&(c(),"fx"===(null==o?void 0:o.selectedTab)&&e.promoTestGroup1Service.setFlagOff("tabTooltip")),s.on("sidebarAssetsOpen",(()=>{c()})),s.on("sidebarTradesOpen",(()=>{e.promoTestGroup1Service.getState().tradesTooltip&&e.promoTestGroup1Service.setFlagOff("tradesTooltip")})),s.on("assetTabFxOpen",(()=>{e.promoTestGroup1Service.setFlagOff("tabTooltip"),!1!==e.promoTestGroup1Service.getState().story&&(e.promoTestGroup1Service.setFlagOff("story"),e.storiesNavigation.goToStoryByName(yi))})),s.on("trendOnChart",(a=>{a?!1!==e.promoTestGroup1Service.getState().chartTooltip&&e.promoTestGroup1Service.setFlagOn("chartTooltip"):e.promoTestGroup1Service.setFlagOff("chartTooltip")})),s.on("dealOpen",(()=>{e.promoTestGroup1Service.getState().tradesTooltip||(e.promoTestGroup1Service.setFlagOn("tradesTooltip"),e.promoTestGroup1Service.setFlagOff("chartTooltip"),(0,ye.L)({event:"uaGtmEvents",eventCategory:"ftt_users_to_fx_okr",eventAction:"show_tooltip_fx_to_trades",eventLabel:"show_tooltip_fx_to_trades"}))})),s.on("assetMenuInitialized",(()=>{c()})),s.on("storyClosed",(()=>{e.trendPromoFxService.highlightBanner();const a=e.fxAssetsService.getDefaultAsset();e.tradeManagerServiceList.tradeManagerService.selectPair(a,"fx")})),r.onOverlayStateChange((e=>{var a;e&&(null===(a=r.scope.activeItem)||void 0===a?void 0:a.id)===qs.KO.ASSETS&&s.emit("sidebarAssetsOpen")})),n.onOverlayStateChange((e=>{var a;e&&(null===(a=n.scope.activeItem)||void 0===a?void 0:a.id)===as.KO.TRADES&&s.emit("sidebarTradesOpen")})),o&&((0,l.reaction)((()=>o.inited),(e=>{e&&s.emit("assetMenuInitialized")})),(0,l.reaction)((()=>o.selectedTab),(()=>{o.inited&&"fx"===o.selectedTab&&s.emit("assetTabFxOpen")}))),(0,l.reaction)((()=>e.tradingLegacyServiceList.dealServiceFx.lastOpenedDeal),(()=>{s.emit("dealOpen")})),e.storiesNavigation.subscribe(((e,a)=>{var i;e.story||(null==a||null===(i=a.story)||void 0===i?void 0:i.name)!==yi||s.emit("storyClosed")})),e.trendPromoFxService.subscribe(((e,a)=>{e.activeTrend&&!a.activeTrend&&s.emit("trendOnChart",!0),!e.activeTrend&&a.activeTrend&&s.emit("trendOnChart",!1)}))})),bi.enable(function(){var e=(0,ie.Z)((function*(e){const a=e.politics.getPolitic("test_forex_promotion");yield e.fxAssetsService.load();const s=e.fxAssetsService.getState().assets,i=Object.keys(s).find((e=>{const a=s[e];return a&&!a.locked&&!a.lockedTrading}));return yield(0,st.ic)(ft.ASSET_MENU_SERVICE),!!i&&1===a}));return function(a){return e.apply(this,arguments)}}());const Ci=(0,gt.v)({name:"trendsFx",dependsOn:[lt.Ul],services:(e,a)=>({trendsServiceFx:new TrendsServiceFx(a.trendsFxRepository)})},{repositories:()=>({trendsFxRepository:new TrendsFxRepository}),publicApi:e=>e});Ci.enable((e=>e.tradingMechanicsService.enabled("fx")));class TrendsFttRepository{find(){return Promise.resolve([])}subscribe(e){return(0,ie.Z)((function*(){const a=(0,ci.Z)(yield di.W.request.fttTrendsSubscribe([e]),2),s=(a[0],a[1]);return s?Promise.reject(s.message):Promise.resolve()}))()}constructor(){this.emitter=(0,cs.Z)(),di.W.subscribe.fttTrendsChange((e=>{this.emitter.emit("trendsChange",e.map((e=>function(e){return{timeFrame:e.candles_time_frame,direction:e.direction,assetId:e.id,quotes:e.quotes,rateChangePercentage:e.rate_change_percentage,title:e.title,winperc:e.winperc,from:e.from,to:e.to}}(e))))})),di.W.on("restore",(()=>{this.emitter.emit("restore")}))}}const Ti=(0,gt.v)({name:"trendsFtt",dependsOn:[lt.Ul],services:(e,a)=>({trendsServiceFtt:new TrendsServiceFtt(a.trendsFttRepository)})},{repositories:()=>({trendsFttRepository:new TrendsFttRepository}),publicApi:e=>e});Ti.enable((e=>e.tradingMechanicsService.enabled("ftt")));class AnalyzerFttService extends vt.t{constructor(e,a){var s;super({successRate:null,analyserGroups:null,accountData:a.accountData}),s=this,this.repository=e,this.inputs=a,this.load=this.createTask(function(){var e=pt((function*(e){yield s.repository.find({account_id:e});const a=yield s.repository.getAnalyserGroups({account_id:e});return a&&(null==a?void 0:a.account_id)===s.getState().accountData.id?(s.update({analyserGroups:a||null}),{analyserGroups:a||null}):null}));return function(a){return e.apply(this,arguments)}}())}init(){this.repository.emitter.on("successRate",(e=>{this.getState().accountData.id===e.account_id&&this.update({successRate:ut(ut({},this.getState().successRate),e)})})),this.repository.emitter.on("restore",(()=>{this.repository.find({account_id:this.getState().accountData.id})})),this.load.fail.subscribe((()=>{this.inputs.isAnalyserOpen()&&this.inputs.goToLockedScreen()})),this.getState().accountData.isDemo||this.load(this.getState().accountData.id),this.inputs.isAnalyserOpen()&&this.getState().accountData.isDemo&&this.inputs.goToLockedScreen()}updateAccount(e){if(e.isDemo&&this.inputs.isAnalyserOpen())return this.update({accountData:e}),void this.inputs.goToLockedScreen();e.id!==this.getState().accountData.id&&(this.update({accountData:e,analyserGroups:null,successRate:null}),this.load(e.id)),this.inputs.isAnalyserOpen()&&this.inputs.goToAnalyser()}goToAnalyser(){const e=this.getState().accountData;e.isDemo?this.inputs.goToLockedScreen():(this.load(e.id),this.inputs.goToAnalyser())}goToAssets(){this.inputs.goToAssets()}goToStory(){this.inputs.goToStory()}}const Ai=e=>{let a=e.item,s=e.currency,i=e.onClick;const r=Ee.useCallback((()=>{i(a)}),[a,i]),n=(0,ct.rF)(a.pair);return n?Ee.createElement(Is.nk,{dataTest:"analyser-best-asset-item",dataTestResultDownLabel:"analyser-best-asset-item-trades",dataTestResultValue:"analyser-best-asset-item-pnl",dataTestTitleValue:"analyser-best-asset-item-pair",icon:Ee.createElement(Is.Ts,{url:n.icon}),resultDownLabel:Ee.createElement(Nt._,{defaultMessage:"{num, plural, =0 { # trades } one { # trade } other { # trades }}",id:"analytics_top_trades_number",values:{num:a.deals_total}}),resultValue:Ee.createElement(Ds.ih,{currency:s,minimumFractionDigits:2,value:a.pnl,isSign:!0}),titleValue:n.title,onClick:r}):null};Ai.displayName="BestAssetItem";const ki=e=>{let a=e.data,s=e.currency,i=e.onClick;return null!=a&&a.list.length?Ee.createElement(Ee.Fragment,null,null==a?void 0:a.list.map((e=>Ee.createElement(Ai,{currency:s,item:e,key:e.pair,onClick:i})))):Ee.createElement(Ht.xv,{color:"contrast-beta",dataTest:"analyser-best-asset-stub",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"Assets that you made the most profit on over the past 7 days will appear here",id:"analytics_top_assets_stub"}))};ki.displayName="BestAssets";const wi=e=>{let a=e.data,s=e.currency,i=e.currencyLet;return Ee.useMemo((()=>!!a&&Object.keys(a).reduce(((e,s)=>e||!(null==a||!a[s])),!1)),[a])?Ee.createElement(Ee.Fragment,null,null!=a&&a.duration?Ee.createElement(Is.nk,{dataTest:"analyser-best-conditions-duration-item",dataTestResultDownLabel:"analyser-best-conditions-duration-item-trades",dataTestResultValue:"analyser-best-conditions-duration-item-pnl",dataTestTitleValue:"analyser-best-conditions-duration-item-value",icon:Ee.createElement(Is.h2,{type:"duration"}),resultDownLabel:Ee.createElement(Nt._,{defaultMessage:"{num, plural, =0 { # trades } one { # trade } other { # trades }}",id:"analytics_top_trades_number",values:{num:a.duration.deals_total}}),resultValue:Ee.createElement(Ds.ih,{currency:s,minimumFractionDigits:2,value:a.duration.pnl,isSign:!0}),titleLabel:Ee.createElement(Nt._,{defaultMessage:"Duration",id:"duration"}),titleValue:Ee.createElement(Is.f8,{value:a.duration.value})}):null,null!=a&&a.amount?Ee.createElement(Is.nk,{dataTest:"analyser-best-conditions-amount-item",dataTestResultDownLabel:"analyser-best-conditions-amount-item-trades",dataTestResultValue:"analyser-best-conditions-amount-item-pnl",dataTestTitleValue:"analyser-best-conditions-amount-item-value",icon:Ee.createElement(Is.h2,{sign:i,type:"amount"}),resultDownLabel:Ee.createElement(Nt._,{defaultMessage:"{num, plural, =0 { # trades } one { # trade } other { # trades }}",id:"analytics_top_trades_number",values:{num:a.amount.deals_total}}),resultValue:Ee.createElement(Ds.ih,{currency:s,value:a.amount.pnl,isSign:!0}),titleLabel:Ee.createElement(Nt._,{defaultMessage:"Amount",id:"amount"}),titleValue:Ee.createElement(Ds.ih,{currency:s,value:a.amount.value})}):null,null!=a&&a.winperc?Ee.createElement(Is.nk,{dataTest:"analyser-best-conditions-winperc-item",dataTestResultDownLabel:"analyser-best-conditions-winperc-item-trades",dataTestResultValue:"analyser-best-conditions-winperc-item-pnl",dataTestTitleValue:"analyser-best-conditions-winperc-item-value",icon:Ee.createElement(Is.h2,{sign:"%",type:"percent"}),resultDownLabel:Ee.createElement(Nt._,{defaultMessage:"{num, plural, =0 { # trades } one { # trade } other { # trades }}",id:"analytics_top_trades_number",values:{num:a.winperc.deals_total}}),resultValue:Ee.createElement(Ds.ih,{currency:s,value:a.winperc.pnl,isSign:!0}),titleLabel:Ee.createElement(Nt._,{defaultMessage:"Profitability",id:"deal_confirm_field_profitability"}),titleValue:Ee.createElement(Ds.p7,{value:a.winperc.value})}):null):Ee.createElement(Ht.xv,{color:"contrast-beta",dataTest:"analyser-best-conditions-stub",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"Conditions that helped you make the most profit over the past 7 days will appear here",id:"analytics_top_conditions_stub"}))};wi.displayName="BestTradeConditions";var Ni="_3X2H9J75tshQ",Ri="_29BhHwZ6tPn2",Ii="_1x-b0jAsrsui",Di="_1XpSoVIviv6l",Oi="_1x093snOD8nA",Li="_2z_Oc2OeaAs9";const Mi=new Js._({namespace:"success-rate-component",backend:new Qs.u}),Pi=e=>{var a;let s=e.item;const i=Mi.get("data"),r=(0,Ss.G)(AnalyzerFttService),n=(0,Ot.o)(r.store),o=n.successRate,l=n.analyserGroups,c=Ee.useState(void 0===i||i),d=Os(c,2),u=d[0],m=d[1],p=Ee.useState(!1),h=Os(p,2),v=h[0],g=h[1],_=Ee.useCallback((()=>{r.goToStory()}),[r]),f=Ee.useCallback((()=>{m(!1),Mi.set("data",!1)}),[m]),E=Ee.useCallback((()=>{f(),_()}),[_,f]),S=Ee.useCallback((()=>{f(),g(!0)}),[f]),y=Ee.useCallback((()=>{(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trade_analysis",eventAction:"click_assets_list",eventLabel:"click_assets_list"}),r.goToAssets()}),[r]);return Ee.createElement("div",null,Ee.createElement(Is.Pr.SuccessRateTitle,{button:u?null:Ee.createElement(Is.Pr.InfoButton,{dataTest:"analyser-story-info-button",isAnimation:v,onClick:_}),dataTest:"analyser-success-rate-title"},Ee.createElement(Nt._,{defaultMessage:"Your Performance Today",id:"analytics_performance_today_subtitle"})),u&&Ee.createElement(Is.Pr.Section,null,Ee.createElement(Is.Pr.Banner,null,Ee.createElement(Is.rO,{onClick:E,onClose:S},Ee.createElement(Nt._,{defaultMessage:"What is my success rate and how do I increase it?",id:"analytics_banner_title"})))),Ee.createElement(Is.Pr.Section,{dataTest:"analyser-success-rate-section"},null!=o&&o.total_deals_count||null==l||null===(a=l.groups.assets)||void 0===a||!a.list.length?Ee.createElement("div",{className:Ni},Ee.createElement("div",{className:Ri},Ee.createElement(Is.mv,{goal:s.goal,rate:s.rate})),Ee.createElement("div",{className:Ii},Ee.createElement("div",{className:Di},Ee.createElement("div",null,Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"Profitable trades",id:"analytics_performance_today_profitable_trades"}))),Ee.createElement("div",null,Ee.createElement(Ht.xv,{dataTest:"analyser-success-rate-deals-count",variant:"L / Bold"},s.success_deals_count))),Ee.createElement("div",{className:Di},Ee.createElement("div",null,Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"Your success rate",id:"analytics_performance_today_success_rate"}))),Ee.createElement("div",{className:Oi},Ee.createElement(Ht.xv,{dataTest:"analyser-success-rate-value",variant:"L / Bold"},s.rate,"%"))),Ee.createElement("div",{className:Di},Ee.createElement("div",null,Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"Baseline success rate",id:"analytics_performance_today_baseline_rate"}))),Ee.createElement("div",{className:Li},Ee.createElement(Ht.xv,{dataTest:"analyser-success-rate-goal",variant:"L / Bold"},s.goal,"%"))))):Ee.createElement(Is.Pq,{onClick:y})),null!=o&&o.total_deals_count?Ee.createElement(Is.Pr.Section,null,Ee.createElement(Is.p1,{dataTest:"analyser-success-rate-info-panel"},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"By keeping your success rate above baseline, your overall trade results will be more balanced",id:"analytics_performance_today_advice"})))):null)};Pi.displayName="SuccessRate";var xi=s(2050);const Fi=(0,hs.Z)({id:"analyzerFttBestTradeShareSlot"}),Bi=e=>{let a=e.item,s=e.accountId,i=e.currency,r=e.onClick;const n=(0,ct.rF)(a.pair),o=(0,xi.x)(Fi,{props:{accountId:s,dealId:a.deal_id}}),l=Ee.useCallback((()=>{r(a)}),[a,r]);return n?Ee.createElement(Ee.Fragment,null,Ee.createElement(Is.nk,{dataTestResultValue:"analyser-best-trade-item-pnl",dataTestTitleValue:"analyser-best-trade-item-pair",icon:Ee.createElement(Is.Ts,{url:n.icon}),resultValue:Ee.createElement(Ds.ih,{currency:i,minimumFractionDigits:2,value:a.pnl,isSign:!0}),titleValue:n.title,onClick:l}),o):null};Bi.displayName="BestTradeItem";const Zi=e=>{let a=e.data,s=e.accountId,i=e.currency,r=e.onClick;return a?Ee.createElement(Bi,{accountId:s,currency:i,item:a,key:a.deal_id,onClick:r}):null};Zi.displayName="BestTrade";const Ui=new Js._({namespace:"analyser-ftt-component",backend:new Qs.u}),Hi=Ee.memo((e=>{var a;let s=e.surveyUrl,i=e.onAssetSelect,r=e.onBestTradeClick;const n=Ui.get("data"),o=Ee.useState(null==n||n),l=Os(o,2),c=l[0],d=l[1],u=Ee.useRef(!1),m=(0,Ss.G)(AnalyzerFttService),p=(0,Ot.o)(m.store),h=p.successRate,v=p.analyserGroups,g=p.accountData,_=(0,Ot.o)(m.load.pending),f=(null==h?void 0:h.account_id)===g.id?h:null,E=(null==v?void 0:v.account_id)===g.id?v:null,S=Ee.useCallback((e=>{i(e.pair)}),[i]),y=Ee.useCallback((e=>{r(e.deal_id)}),[r]),b=Ee.useCallback((()=>{window.open(s)}),[s]),C=Ee.useCallback((()=>{d(!1),Ui.set("data",!1)}),[]);return Ee.useEffect((()=>{f&&E&&!u.current&&((0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trade_analysis",eventAction:"opened_screen",eventLabel:"success"}),u.current=!0)}),[f,E,u]),_||!f?Ee.createElement(Is.Pr,null,Ee.createElement(Is.Pr.Body,null,Ee.createElement(Is.Pr.Loader,null))):Ee.createElement(Is.Pr,null,Ee.createElement(Is.Pr.Chips,null,Ee.createElement(Ht.xu,{direction:"row",gap:"m"},null==E?void 0:E.groups.filters.map(((e,a)=>Ee.createElement(Ht.Af,{dataTest:"analyser-chip-".concat(a),key:a,label:e,active:!0,disabled:!0}))))),Ee.createElement(Is.Pr.Body,null,f?Ee.createElement(Pi,{item:f}):null,null!=E&&E.groups?Ee.createElement(Is.Pr.Section,{dataTest:"analyser-best-assets-section"},Ee.createElement(Is.Pr.Title,null,Ee.createElement(Nt._,{defaultMessage:"Your Most Profitable Assets",id:"analytics_top_assets_title"})),Ee.createElement(ki,{currency:g.currency,data:E.groups.assets,onClick:S})):null,null!=E&&E.groups?Ee.createElement(Is.Pr.Section,{dataTest:"analyser-best-trade-conditions-section"},Ee.createElement(Is.Pr.Title,null,Ee.createElement(Nt._,{defaultMessage:"Your Most Profitable Conditions",id:"analytics_top_conditions_title"})),Ee.createElement(wi,{currency:g.currency,currencyLet:g.currencyLet,data:E.groups.conditions})):null,null!=E&&E.groups.best_deal?Ee.createElement("div",{"data-test":"analyser-best-deal-section"},Ee.createElement(Is.Pr.Title,null,Ee.createElement(Nt._,{defaultMessage:"Best Trade",id:"analytics_best_trade_title"})),Ee.createElement(Zi,{accountId:g.id,currency:g.currency,data:E.groups.best_deal,onClick:y})):null,null!=E&&null!==(a=E.groups.assets)&&void 0!==a&&a.list.length&&c?Ee.createElement(Is.Pr.Section,{topMargin:!0},Ee.createElement(Is.t2,{onClick:b,onClose:C},Ee.createElement(Ht.xu,{direction:"column",gap:"xs"},Ee.createElement(Ht.xv,{variant:"L / Bold"},Ee.createElement(Nt._,{defaultMessage:"Do you like Analytics?",id:"analytics_survey_banner_title"})),Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Nt._,{defaultMessage:"Take our survey and help us make it even better",id:"analytics_survey_banner_body"}))))):null))}));Hi.displayName="Analyzer";const Gi=Ee.memo((e=>{let a=e.onClick;const s=(0,Ss.G)(AnalyzerFttService),i=(0,Ot.o)(s.store).successRate,r=Ee.useCallback((()=>{a()}),[a]),n=(null==i?void 0:i.success_deals_count)||0,o=(null==i?void 0:i.total_deals_count)||0,l=n||o?Ee.createElement(Nt._,{defaultMessage:"{value, plural, =0 { # profitable trades } one { # profitable trade } other { # profitable trades }}",id:"analytics_widget_today_trades_value",values:{value:n}}):Ee.createElement(Nt._,{defaultMessage:"No trades closed",id:"analytics_widget_no_trades_value"}),c=n||o?Ee.createElement(Nt._,{defaultMessage:"Today's success",id:"analytics_widget_today_trades_title"}):null;return void 0!==(null==i?void 0:i.rate)&&null!=i&&i.goal?Ee.createElement(Is.bD,{buttonText:Ee.createElement(Nt._,{defaultMessage:"Open Trade Analytics",id:"analytics_widget_open_analytics_button"}),goal:null==i?void 0:i.goal,rate:null==i?void 0:i.rate,subTitle:c,title:l,onClick:r}):null}));Gi.displayName="AnalyzerWidget";const Vi=e=>{let a=e.onClose,s=e.onChangeAccount,i=e.onRefresh;const r=(0,Ss.G)(AnalyzerFttService),n=(0,Ot.o)(r.store).accountData,o=(0,Ot.o)(r.load.fail);return Ee.useEffect((()=>{(o||n.isDemo)&&(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trade_analysis",eventAction:"opened_screen",eventLabel:o?"failed_error":"failed_demo"})}),[n.isDemo,o]),n.isDemo?Ee.createElement(Is.rk,{bottom:Ee.createElement(Ht.xu,{direction:"column",gap:"m"},Ee.createElement(Ht.zx,{dataTest:"analyser-stub-change-account",variant:"secondary",fullWidth:!0,onClick:s},Ee.createElement(Nt._,{defaultMessage:"Change Account",id:"analytics_demo_account_change_stub_button"})),Ee.createElement(Ht.zx,{dataTest:"analyser-stub-close",fullWidth:!0,onClick:a},Ee.createElement(Nt._,{defaultMessage:"Close",id:"close"}))),subTitle:Ee.createElement(Nt._,{defaultMessage:"You can only view analytics for trades made using a live account",id:"analytics_demo_account_stub_desc"}),title:Ee.createElement(Nt._,{defaultMessage:"Demo Account Analytics Unavailable",id:"analytics_demo_account_stub_title"})}):o?Ee.createElement(Is.rk,{bottom:Ee.createElement(Ht.xu,{direction:"column",gap:"m"},Ee.createElement(Ht.zx,{dataTest:"analyser-stub-refresh",fullWidth:!0,onClick:i},Ee.createElement(Nt._,{defaultMessage:"Refresh",id:"analytics_unable_to_show_stub_refresh_button"}))),subTitle:Ee.createElement(Nt._,{defaultMessage:"Check your internet connection and refresh the page",id:"analytics_unable_to_show_stub_desc"}),title:Ee.createElement(Nt._,{defaultMessage:"Unable to Show Analytics",id:"analytics_unable_to_show_stub_title"}),isWarning:!0}):null};Vi.displayName="LockedScreen";var Wi=s(63427),ji=s(94769),zi=s(1035),qi=s(40846),Ki=s(62633),Yi=s(68724),Xi=s(27634);const Ji=(0,ss.WV)({deeplink_action:(0,ss.t$)("trade-analytics")});class AnalyserFttRepository{find(e){return(0,ie.Z)((function*(){yield di.W.request.fttAnalyzerSuccessUnsubscribe(e);const a=(0,ci.Z)(yield di.W.request.fttAnalyzerSuccessSubscribe(e),2),s=(a[0],a[1]);return s?Promise.reject(s.message):Promise.resolve()}))()}getAnalyserGroups(e){return(0,ie.Z)((function*(){const a=(0,ci.Z)(yield di.W.request.fttAnalyzerGroupsList(e),2),s=a[0],i=a[1];return i?Promise.reject(i.message):s.length?Promise.resolve(s[0]):Promise.resolve()}))()}constructor(){this.emitter=(0,cs.Z)(),di.W.subscribe.fttAnalyzerSuccessChange((e=>{this.emitter.emit("successRate",e[0])})),di.W.on("restore",(()=>{this.emitter.emit("restore")}))}}const Qi=(0,gt.v)({name:"AnalyzerFtt",dependsOn:[rt.u$,xt.x,Na.G,ct.M7,ps.Kg,es.x,Xi.im,Qt.EA,Jt.Q,ot.F0],services:(e,a)=>{const s=e.commonLegacyServiceList.accountService.selectedAccount;return{analyzerFttService:new AnalyzerFttService(a.analyserFttRepository,{accountData:{id:s.id,isDemo:"demo"===s.type,currency:s.currencyName,currencyLet:s.currencyLet},isAnalyserOpen:()=>{var a,s;const i=e.commonLegacyServiceList.sideBarService.sideBarMajor,r=i.scope;return i.isOpen&&((null===(a=r.activeItem)||void 0===a?void 0:a.id)===ji.KO.ANALYSER||(null===(s=r.activeItem)||void 0===s?void 0:s.id)===ji.KO.ANALYSER_LOCKED)},goToLockedScreen:()=>{e.commonLegacyServiceList.sideBarService.goTo(ji.KO.ANALYSER_LOCKED)},goToAnalyser:()=>{e.commonLegacyServiceList.sideBarService.goTo(ji.KO.ANALYSER)},goToAssets:()=>{e.commonLegacyServiceList.sideBarService.goToMinor(zi.KO.ASSETS)},goToStory:()=>{e.storiesNavigation.goToStoryByName("trade_analytics_learn_more")}})}}},{repositories:()=>({analyserFttRepository:new AnalyserFttRepository})});Qi.use(Wi.Fe,((e,a)=>{const s=a.user.getState().user,i=Ee.useCallback((e=>{a.tradeManagerServiceList.tradeManagerService.selectPair(e,"bo"),(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trade_analysis",eventAction:"open_asset",eventLabel:"".concat(e)})}),[a]),r=Ee.useCallback((e=>{const s=a.commonLegacyServiceList.accountService.selectedAccount;a.dealDetailsFttService.showDealInPopup({id:e,account_id:s.id,group:s.group||""}),(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trade_analysis",eventAction:"open_trade_info",eventLabel:"".concat(e)})}),[a]);return Ee.createElement(Hi,{surveyUrl:"https://www.research.net/r/5TP6R92?user_id=".concat(s.id,"&reg_geo=").concat(s.registrationCountry),onAssetSelect:i,onBestTradeClick:r})})),Qi.use(Yi.h,((e,a)=>{const s=Ee.useCallback((()=>{a.analyzerFttService.goToAnalyser(),(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trade_analysis",eventAction:"open_statistic",eventLabel:"button"})}),[a]);return a.analyzerFttService.getState().accountData.isDemo?null:Ee.createElement(Gi,{onClick:s})})),Qi.use(Wi.fE,((e,a)=>{const s=Ee.useCallback((()=>{a.commonLegacyServiceList.sideBarService.close()}),[a]),i=Ee.useCallback((()=>{a.profileSidebarService.openById(qi.U1.ACCOUNT)}),[]),r=Ee.useCallback((()=>{a.analyzerFttService.goToAnalyser()}),[a]);return Ee.createElement(Vi,{onClose:s,onChangeAccount:i,onRefresh:r})})),Qi.use(Wi.uE,((e,a)=>{const s=Ee.useCallback((()=>{a.analyzerFttService.goToAnalyser(),(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trade_analysis",eventAction:"open_statistic",eventLabel:"icon"})}),[a]);return Ee.createElement(Is.M8,{onClick:s})})),Qi.onStart((e=>{e.analyzerFttService.init(),(0,l.reaction)((()=>e.commonLegacyServiceList.accountService.selectedAccount.id),(()=>{const a=e.commonLegacyServiceList.accountService.selectedAccount;e.analyzerFttService.updateAccount({isDemo:"demo"===a.type,currency:a.currencyName,id:a.id,currencyLet:a.currencyLet})})),e.commandService.registerCommand(Ji.guard,(()=>{e.analyzerFttService.goToAnalyser()}))})),Qi.enable((e=>{const a=e.politics.getPolitic("toggles");return null==a?void 0:a.trade_analyzer_ftt}));var $i=s(86933);class WebSocket_WebSocket{pingPong(){var e=this;return(0,ie.Z)((function*(){return new Promise((a=>{e.connect.request({type:"request",event_name:$i.U3.SERVERTIME_UP,data_type:"servertime"}).onResponse(((e,s,i)=>{const r=Date.now();(e=>null!==e&&"object"==typeof e&&"timestamp"in e)(i)&&a({timeDelta:Math.floor(r/1e3)-i.timestamp}),a(null)}))}))}))()}constructor(e){this.connect=e}}class TimeDeltaRepository{find(){var e=this;return(0,ie.Z)((function*(){const a=yield e.webSocket.pingPong();return a?Promise.resolve(a.timeDelta):null}))()}subscribeOnChange(e){this.emitter.on("change",e),this.scheduleNextCalibrate()}constructor(){this.webSocket=new WebSocket_WebSocket(Xe.Z.add()),this.emitter=(0,cs.Z)(),this.calibrateTimeoutId=null,this.scheduleNextCalibrate=()=>{this.stopCalibrate(),this.calibrateTimeoutId=setTimeout(this.calibrate,6e4+((e,a)=>Math.floor(Math.random()*(a-e+1))+e)(1e3,1e4))},this.stopCalibrate=()=>{null!==this.calibrateTimeoutId&&(clearTimeout(this.calibrateTimeoutId),this.calibrateTimeoutId=null)},this.calibrate=()=>{this.webSocket.pingPong().then((e=>{e&&this.emitter.emit("change",e.timeDelta)})).finally((()=>{this.scheduleNextCalibrate()}))}}}var er=s(32308);function tr(e,a){return e.endingAt-a.endingAt}class Tasks_WebSocket_WebSocket{onTasksStateChange(e){this.subscribed||(this.subscribed=!0,this.subscribe()),this.events.on($i.U3.TASKS_PROGRESS_CHANGED,(a=>{a&&e(a)}))}subscribe(){this.connect.onPush(((e,a)=>{e===$i.U3.TASKS_PROGRESS_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.events.emit($i.U3.TASKS_PROGRESS_CHANGED,e)}))})),this.connect.subscribeEventList([$i.WJ.TASKS_PROGRESS_CHANGED])}constructor(e){this.subscribed=!1,this.events=(0,cs.Z)(),this.connect=e}}class TasksRepository{findAll(){var e=this;return(0,ie.Z)((function*(){const a=yield B.$.getTasksState();return e.transformResponse(a)}))()}find(e){var a=this;return(0,ie.Z)((function*(){const s=yield a.findAll();var i;return null!==(i=Array.from(s).find((a=>a.items.find((a=>a.id===e)))))&&void 0!==i?i:null}))()}getUnsupportedMechanics(){return[c.Fw.STOCKS]}constructor(){this.socket=new Tasks_WebSocket_WebSocket(Xe.Z.add()),this.subscribe=e=>{var a=this;this.socket.onTasksStateChange(function(){var s=(0,ie.Z)((function*(s){const i=yield a.transformResponse(s);e(i)}));return function(e){return s.apply(this,arguments)}}())},this.transformResponse=function(){var e=(0,ie.Z)((function*(e){const a=(yield B.$.userValues(["session"])).session,s=yield B.$.getTasksConfig({version:e.config_version,locale:a.locale});return function(e,a){const s=a.tasks.reduce(((e,a)=>(e[a.id]=a,e)),{});return e.map((e=>({endingAt:e.date_end,items:e.tasks.map((e=>{var a,i;return{id:e.id,description:(null===(a=s[e.id])||void 0===a?void 0:a.description)||"",awards:(i=e.awards,i.map((e=>({type:e.type,value:e.count})))),progress:(0,Si.Z)((0,re.Z)({},e.progress),{percent:Math.round(e.progress.completed/e.progress.goal*100)})}}))}))).sort(tr)}([e.actual,e.next],s)}));return function(a){return e.apply(this,arguments)}}()}}var ar=s(36970),sr=s(81971);const ir={host:"Cw84JBcN",header:"mRtxfynx",timer:"khMOGQib"},rr=(0,Ie.observer)((e=>{let a=e.startTime,s=e.timeService;return Ee.createElement(Ht.Wo,{startTime:a,serverTime:s.serverTime,className:ir.timer,"data-test":"pro-p-root-c-tasks-timer"})})),nr=(0,sr.zt)(rr,{helper:(e,a)=>(0,re.Z)({},e,a),services:[Oe.OY]}),or=function(e){let a=e.onClick,s=e.tasksService;const i=(0,Ot.o)(s.store),r=i.current,n=i.completed,o=Ee.useCallback((()=>{a(qi.uW.TASKS)}),[a]);if(!r)return null;const l=r.items.length;return Ee.createElement(Da.tE.Card,{onClick:o},(e=>{let a=e.className;return Ee.createElement("div",{className:Ze()(ir.host,a),"data-test":"pro-p-root-c-tasks"},Ee.createElement("div",{className:ir.header},Ee.createElement(Vt.G40,{"data-test":"pro-p-root-c-tasks-icon"})),Ee.createElement(nr,{startTime:r.endingAt}),Ee.createElement("span",{className:ir.title,"data-test":"pro-p-root-c-tasks-title"},Ee.createElement(Ht.xv,{variant:"M / Bold",dataTest:"pro-p-root-c-tasks-title"},Ee.createElement(Nt._,{id:"pro_tasks",defaultMessage:"Tasks"}))),Ee.createElement(Ht.xv,{variant:"M Compact / Bold",color:"contrast-beta",dataTest:"pro-p-root-c-tasks-progress-count"},n,"/",l))}))},lr=()=>Ee.createElement(Nt._,{id:"pro_tasks",defaultMessage:"Tasks"}),cr=(0,ss.WV)({deeplink_action:(0,ss.t$)("tasks")}),dr=Ee.lazy((()=>s.e(2260).then(s.bind(s,12260)).then((e=>({default:e.TasksList}))))),ur=(0,gt.v)({name:"Tasks",dependsOn:[rt.u$,nt.e8,ot.F0,Na.G,Qt.EA,Xi.im],optionalDependsOn:[er.mn],services(e,a){let s=e.timeService;const i=(0,st.Sc)(ft.APP_SERVICE);if(!i)throw new Error("".concat(ft.APP_SERVICE," not found"));return{dailyTasks:new ar.C(a.tasks,s,i.availableProjects)}}},{repositories:()=>({tasks:new TasksRepository})});ur.use(Xi.BO,{order:()=>3,component:(e,a)=>Ee.createElement(or,{tasksService:a.dailyTasks,onClick:e.onClick})}).use((0,Xi.X1)(qi.uW.TASKS),(()=>Ee.createElement(lr,null))).use((0,Xi.VT)(qi.uW.TASKS),{component:(e,a)=>{var s;return Ee.createElement(dr,Object.assign({},e,{statusColor:null===(s=a.status)||void 0===s?void 0:s.getState().current.color}))},loader:()=>Ee.createElement(Ws.it,null)}).onStart((e=>{let a=e.dailyTasks,s=e.commandService,i=e.profileSidebarService;a.load(),s.registerCommand(cr.guard,(()=>{i.openById(qi.uW.TASKS)}))})).enable(function(){var e=(0,ie.Z)((function*(e){return yield(0,st.ic)(ft.TIME_SERVICE),e.politics.isEnabled("ent_tasks_enabled")}));return function(a){return e.apply(this,arguments)}}());var mr=s(5343);class GroupTransformer{static parseGroups(e,a,s){return e.map((e=>GroupTransformer.parse(e,a,s)))}static parse(e,a,s){const i=GroupTransformer.toConfigItemMap(s);return{id:e.id,name:e.title,description:e.description,items:a.filter((a=>i[a.id]&&i[a.id].group_id===e.id)).map((e=>GroupTransformer.parseItem(e,i[e.id])))}}static parseItem(e,a){return{id:a.id,name:a.title,description:a.description,icons:a.icons,progress:e?GroupTransformer.parseProgress(e.progress):{goal:0,completed:0,percent:0},achievedAt:e&&e.achieved_at||null}}static toConfigItemMap(e){return e.reduce(((e,a)=>(e[a.id]=a,e)),{})}static parseProgress(e){return{goal:e.goal,completed:e.completed,percent:Math.round(e.completed/e.goal*100)}}}class Achievements_WebSocket_WebSocket{onAchievementsStateChange(e){this.subscribed||(this.subscribed=!0,this.subscribe()),this.events.on($i.U3.ACHIEVEMENTS_PROGRESS_CHANGED,(a=>{a&&e(a)}))}subscribe(){this.connect.onPush(((e,a)=>{e===$i.U3.ACHIEVEMENTS_PROGRESS_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.events.emit($i.U3.ACHIEVEMENTS_PROGRESS_CHANGED,e)}))})),this.connect.subscribeEventList([$i.WJ.ACHIEVEMENTS_PROGRESS_CHANGED])}constructor(e){this.subscribed=!1,this.events=(0,cs.Z)(),this.connect=e}}class AchievementsRepository{findAll(){var e=this;return(0,ie.Z)((function*(){const a=yield B.$.getAchievementsState();return e.transformResponse(a)}))()}find(e){var a=this;return(0,ie.Z)((function*(){var s;return null!==(s=(yield a.findAll()).find((a=>a.id===e)))&&void 0!==s?s:null}))()}onAchievementsStateChange(e){var a=this;this.notifications.onAchievementsStateChange(function(){var s=(0,ie.Z)((function*(s){const i=yield a.transformResponse(s);e(i)}));return function(e){return s.apply(this,arguments)}}())}constructor(){this.notifications=new Achievements_WebSocket_WebSocket(Xe.Z.add()),this.transformResponse=function(){var e=(0,ie.Z)((function*(e){const a=(yield B.$.userValues(["session"])).session,s=yield B.$.getAchievementsConfig({version:e.config_version,locale:a.locale});return GroupTransformer.parseGroups(s.groups,e.achievements,s.achievements)}));return function(a){return e.apply(this,arguments)}}()}}class AchievementsService extends vt.t{constructor(e){super({groups:[],progress:{goal:0,percent:0,completed:0}});var a=this;this.loadAchievements=this.createTask((0,ie.Z)((function*(){const e=yield a.achievementsRepository.findAll();a.update({groups:Array.from(e)})})),{strategy:vt.T.once}),this.achievementsRepository=e;const s=this.store.map((e=>e.groups));this.attach(s.map((e=>{let a=0,s=0;var i=!0,r=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){const e=o.value;a+=e.items.length;var c=!0,d=!1,u=void 0;try{for(var m,p=e.items[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){null!==m.value.achievedAt&&(s+=1)}}catch(e){d=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw u}}}}catch(e){r=!0,n=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw n}}return{progress:{goal:a,completed:s,percent:0===s?0:Math.round(s/a*100)}}}))),this.achievementsRepository.onAchievementsStateChange((e=>{this.update({groups:e})})),this.loadAchievements()}}const pr=()=>Ee.createElement(Nt._,{id:"pro_achievements",defaultMessage:"Achievements"}),hr="shsjMQId",vr="AwvpfMwP",gr=Ee.memo((function(e){let a=e.achievementsService,s=e.onClick;const i=(0,Ot.o)(a.store).progress,r=Ee.useCallback((()=>s(qi.uW.ACHIEVEMENTS)),[s]);return 0===i.goal?null:Ee.createElement(Da.tE.Card,{onClick:r},(e=>{let a=e.className;return Ee.createElement(Ee.Fragment,null,Ee.createElement("div",{className:Ze()(hr,a),"data-test":"pro-p-root-c-achievements"},Ee.createElement("div",{className:vr},Ee.createElement(Vt.Rqh,{"data-test":"pro-p-root-c-achievements-icon"})),Ee.createElement(Ht.xv,{variant:"M / Bold",dataTest:"pro-p-root-c-achievements-title"},Ee.createElement(Nt._,{id:"pro_achievements",defaultMessage:"Achievements"})),Ee.createElement(Ht.xv,{variant:"M Compact / Bold",color:"contrast-beta",dataTest:"pro-p-root-c-achievements-progress-count"},i.completed,"/",i.goal)))}))})),_r=(0,ss.WV)({deeplink_action:(0,ss.t$)("achievements")}),fr=Ee.lazy((()=>s.e(722).then(s.bind(s,60722)).then((e=>({default:e.AchievementsList}))))),Er=(0,gt.v)({name:"Achievements",dependsOn:[ot.F0,rt.u$,Na.G,Qt.EA,Xi.im],services:(e,a)=>({achievements:new AchievementsService(a.achievementsRepository)})},{repositories:()=>({achievementsRepository:new AchievementsRepository})});Er.use(Xi.BO,{order:()=>4,component:(e,a)=>Ee.createElement(gr,{achievementsService:a.achievements,onClick:e.onClick})}).use((0,Xi.X1)(qi.uW.ACHIEVEMENTS),(()=>Ee.createElement(pr,null))).use((0,Xi.VT)(qi.uW.ACHIEVEMENTS),{component:(e,a)=>Ee.createElement(fr,{className:e.className,achievementsService:a.achievements}),loader:()=>Ee.createElement(Ws.it,null)}).onStart((e=>{let a=e.commandService,s=e.profileSidebarService;a.registerCommand(_r.guard,(()=>{s.openById(qi.uW.ACHIEVEMENTS)}))})).enable((e=>e.politics.isEnabled("ent_achievements_enabled")));var Sr=s(98434),yr=s(73598),br=s(67371),Cr=s(13207),Tr=s(93134),Ar=s(59343),kr=s(83920);const wr=()=>{const e=(0,Ar.V)()?"rtl":"ltr";return Ee.createElement("div",{dir:e},Ee.createElement(Tr.f6,{dir:e},Ee.createElement(Cr.wg,{actionText:Ee.createElement(Nt._,{id:"kyc_upload_documents",defaultMessage:"Upload Documents"})})))};let Nr=class LockScreen extends Ee.Component{render(){return Ee.createElement(ge.SV,{code:"a1hYwqEj"},Ee.createElement(wr,null))}};Nr=(0,Ne.gn)([Ie.observer],Nr);const Rr=(0,ke.zt)(Nr,{helper:(e,a)=>(0,re.Z)({},e,a),services:[kr.f,Ra.L$]}),Ir=(0,ke.zt)((e=>(0,e.children)(e.services)),{helper:(e,a)=>({children:a.children,services:e}),services:e=>e.services}),Dr=()=>Ee.createElement(Ir,{services:[br.y,Xa.BR]},(e=>{let a=e.kycService,s=e.accountService;return Ee.createElement(yr.Qj,null,(()=>{const e=a.state;return(null==e?void 0:e.blockStatus)&&!s.accountDemo?Ee.createElement(Rr,{className:"layout__blocked-screen",type:e.type,action:e.action,meta:e.blockMeta}):null}))})),Or=(0,gt.v)({name:"KYC",dependsOn:[rt.u$]});Or.use(rt.KT,(()=>Ee.createElement(Dr,null))).enable((0,ie.Z)((function*(){return yield(0,st.ic)(Sr.Z),!0})));class UsersCountRepository{find(){return Promise.resolve(0)}subscribe(e){return di.W.subscribe.userOnlineChange((a=>e(a[0].count)))}}class UsersCountService extends vt.t{constructor(e){super({count:0},{onStart:()=>{e.subscribe((e=>this.update({count:e})))}})}}const Lr=e=>{let a=e.users,s=e.onClick;return Ee.createElement("div",{onClick:s},Ee.createElement(Ht.xu,{fullWidth:!0,padding:["l",0],horizontalAlign:"center",dataTest:"users-online-counter"},Ee.createElement(Ht.xv,{variant:"S / Bold",dataTest:"users-online-counter-value"},a),Ee.createElement(Ht.xv,{variant:"S / Regular",color:"contrast-gamma"},Ee.createElement(Nt._,{id:"online",defaultMessage:"online"}))))},Mr=(0,gt.v)({name:"OnlineUsersCounter",dependsOn:[rt.u$],services:(e,a)=>({usersCount:new UsersCountService(a.usersCount)})},{repositories:()=>({usersCount:new UsersCountRepository})});Mr.use(rt.LY,((e,a)=>{const s=Ee.useCallback((()=>(0,ye.L)({event:"uaGtmEvents_clicks",eventAction:"click",eventCategory:"sidebar",eventLabel:"traders_online"})),[]);return Ee.createElement(Lr,{onClick:s,users:a.usersCount.getState().count})}));var Pr=s(29006);class FastForexService extends vt.t{openStory(){this.inputs.openStory()}constructor(e){super(),this.inputs=e}}const xr=s.p+"images/logo.a3c9e68f.png",Fr="bI6gdDG7",Br="Pp5i7C59",Zr=()=>{const e=(0,Ss.G)(FastForexService),a=(0,Te.L)();return Ee.createElement("button",{onClick:e.openStory,className:Fr,dir:a},Ee.createElement(Ht.xu,{fullWidth:!0,fullHeight:!0,direction:"row"},Ee.createElement(Ht.xu,{fullHeight:!0,fullWidth:!0,direction:"column",horizontalAlign:"start",verticalAlign:"space-between",gap:"s",padding:"ltr"===a?["xl",0,"xl","l"]:["xl","l","xl",0]},Ee.createElement(Ht.xu,{fullWidth:!0,direction:"column",horizontalAlign:"start",gap:"xs"},Ee.createElement(Ht.xv,{variant:"L / Bold",color:"inherit"},Ee.createElement(Nt._,{id:"traders_way_info_banner_double_fx_xp_title",defaultMessage:"Double XP"})),Ee.createElement(Ht.xv,{variant:"S / Regular",color:"inherit"},Ee.createElement(Nt._,{id:"traders_way_info_banner_double_fx_xp_description",defaultMessage:"Get 2х XP for every trade in Forex mode until March 12th"})))),Ee.createElement("img",{src:xr,alt:"",className:Br})))},Ur="be2ZUZxM",Hr="IW0xfiwC",Gr=()=>{const e=(0,Ss.G)(FastForexService);return Ee.createElement("div",{className:Ur},Ee.createElement(Ht.xu,{direction:"row",verticalAlign:"flex-start",gap:"l"},Ee.createElement(Vt.emY,null),Ee.createElement(Ht.xu,{direction:"column",gap:"xs"},Ee.createElement(Ht.xv,{variant:"M / Bold",color:"contrast-alpha"},Ee.createElement(Nt._,{id:"traders_way_award_double_fx_xp_hint_title",defaultMessage:"Trade in Forex to get rewards faster"})),Ee.createElement(Ht.xv,{variant:"S / Regular",color:"contrast-beta"},Ee.createElement(Nt._,{id:"traders_way_award_double_fx_xp_hint_description",defaultMessage:"Get 2х XP for every trade in Forex mode until March 12th"})),Ee.createElement(Ht.rU,{className:Hr,onClick:e.openStory},Ee.createElement(Ht.xv,{variant:"S / Bold",color:"inherit"},Ee.createElement(Nt._,{id:"fx_learn_more",defaultMessage:"Learn more"}))))))},Vr=(0,gt.v)({name:"TradersWayFastForex",dependsOn:[er.mn,ot.F0,Qt.EA,rt.u$],services:e=>{let a=e.commandService;return{fastForexService:new FastForexService({openStory:()=>{a.resolveCommand("https://ul.olymptrade.com/story?storyName=double_xp__how_to_double_xp__story")}})}}});Vr.use(Pr.Zp,(()=>Ee.createElement(Zr,null))).use(Pr.Pj,(e=>{let a=e.award,s=e.isBlocked,i=e.hasFooter;return s||"save_status"===a.type||i?null:Ee.createElement(Gr,null)})).enable((e=>e.politics.isEnabled("ent_experience_boost_enabled")));var Wr=s(16332),jr=s(98870),zr=s(61624);class TradingSignalsPublicService extends vt.t{closeContentInfo(){this.tradingSignalsService.onCloseContentInfo()}setSignalData(e){var a;null===(a=(0,st.Sc)(ft.TRADING_SIGNALS_ADAPTER_SERVICE))||void 0===a||a.setSignalData(e)}constructor(e){super(),this.tradingSignalsService=e}}var qr=s(87764),Kr=s(58246);class TradingSignalsRepository_WebSocket_WebSocket{onActiveSignalsStateChange(e){this.listeners[$i.U3.TRADING_SIGNALS_ADD]=e}onPairSubscribe(e,a){this.subscribed||(this.subscribed=!0,this.connect.onPush(((e,a)=>{e===$i.U3.TRADING_SIGNALS_ADD&&Array.isArray(a)&&this.listeners[$i.U3.TRADING_SIGNALS_ADD](a)})),this.connect.subscribeEventList([$i.WJ.TRADING_SIGNALS_ADD]),this.connect.request({event_name:$i.U3.TRADING_SIGNALS_SUBSCRIBE,data:e}).onResponse(((e,s)=>{s||a(e)})))}unSubscribe(){this.subscribed&&(this.subscribed=!1,this.connect.unSubscribeEventList([$i.WJ.TRADING_SIGNALS_ADD]))}constructor(e){this.subscribed=!1,this.listeners={[$i.U3.TRADING_SIGNALS_ADD]:()=>{}},this.connect=e}}class TradingSignalsRepository{findAll(){throw new Error("Method not implemented.")}subscribeActiveSignals(e){this.webSocket.onActiveSignalsStateChange(e)}onPairSubscribe(e,a){this.webSocket.onPairSubscribe(e,(e=>{e.length>=Kr.E3?a(e.slice(0,Kr.E3)):a(e)}))}unSubscribe(){this.webSocket.unSubscribe()}constructor(e){this.connect=e,this.webSocket=new TradingSignalsRepository_WebSocket_WebSocket(e)}}var Yr=s(3991);const Xr=Ee.lazy((()=>s.e(3330).then(s.bind(s,63330)).then((e=>({default:e.EntryPanel}))))),Jr=Ee.lazy((()=>s.e(5860).then(s.bind(s,85860)).then((e=>({default:e.EntryTitle}))))),Qr=Ee.lazy((()=>s.e(2981).then(s.bind(s,2981)).then((e=>({default:e.EntryHeaderActions}))))),$r=Ee.lazy((()=>s.e(695).then(s.bind(s,70695)).then((e=>({default:e.Assets}))))),en=Ee.lazy((()=>s.e(2849).then(s.bind(s,62849)).then((e=>({default:e.Details}))))),tn=Ee.lazy((()=>s.e(7776).then(s.bind(s,37776)).then((e=>({default:e.Products})))));class TimeframesRepository_WebSocket_WebSocket{onTimeframeStateChange(e){this.subscribed||(this.subscribed=!0,this.subscribe()),this.listeners[$i.U3.TRADING_SIGNALS_TIMEFRAMES]=e}subscribe(){this.connect.onPush(((e,a)=>{e===$i.U3.TRADING_SIGNALS_TIMEFRAMES&&Array.isArray(a)&&this.listeners[$i.U3.TRADING_SIGNALS_TIMEFRAMES](a)})),this.connect.subscribeEventList([$i.WJ.TRADING_SIGNALS_TIMEFRAMES])}constructor(e){this.subscribed=!1,this.listeners={[$i.U3.TRADING_SIGNALS_TIMEFRAMES]:()=>{}},this.connect=e}}class TimeframesRepository{findAll(){throw new Error("Method not implemented.")}getActiveTimeframeId(){return Number(this.storageService.get("activeTimeframeId"))}setActiveTimeframeId(e){this.storageService.set("activeTimeframeId",e)}onTimeframeStateChange(e){this.webSocket.onTimeframeStateChange(e)}constructor(e){this.connect=e,this.storageService=new Js._({namespace:"trading-signals-timeframes",backend:new Qs.u}),this.webSocket=new TimeframesRepository_WebSocket_WebSocket(e)}}class UiStorageRepository{find(){throw new Error("Method not implemented.")}getUserAgreement(){return!!this.storageService.get("userAgreement")}setUserAgreement(){this.storageService.set("userAgreement",!0)}isCloseContentInfo(){return Boolean(this.storageService.get("isCloseContentInfo"))}setCloseContentInfo(){this.storageService.set("isCloseContentInfo",!0)}isCloseDetailsInfo(){return Boolean(this.storageService.get("isCloseDetailsInfo"))}setCloseDetailsInfo(){this.storageService.set("isCloseDetailsInfo",!0)}constructor(){this.storageService=new Js._({namespace:"trading-signals",backend:new Qs.u})}}const an=(0,ss.WV)({deeplink_action:(0,ss.t$)("trading-signals"),tab:ss.Ld.optional()}),sn=(0,gt.v)({dependsOn:[rt.u$,Na.G,ps.Kg,ot.F0,nt.e8,xt.x,Wr.UE],name:"tradingSignals",services(e,a){let s=e.commonLegacyServiceList,i=e.tradeManagerServiceList,r=e.marketPlaceService,n=a.timeframesRepository,o=a.tradingSignalsRepository,d=a.uiStorageRepository;const u=s.uiService,m=s.sideBarService,p=i.tradeManagerService,h=(0,st.Sc)(ft.ACCOUNT_SERVICE),v=(0,st.Sc)(ft.PAIR_SERVICE_BO),g=(0,st.Sc)(ft.PAIR_SERVICE_FX),_=(0,st.Sc)(ft.NAVIGATION_SERVICE),f=(0,st.Sc)(ft.TRADING_SIGNALS_ADAPTER_SERVICE),E=new qr.G,S=new zr.I(n,o,d,{subscribeToAccountCurrencyChange(e){(0,l.reaction)((()=>null==h?void 0:h.selectedAccount),(a=>{a&&((null==a?void 0:a.currencyName)!==Xa.Q5.DEMO?e(a.currencyName):(null==h?void 0:h.currencyDefault)&&e(null==h?void 0:h.currencyDefault))}),{fireImmediately:!0})},subscribeToCurrentTradingAssets(e){(0,l.reaction)((()=>p.tradeFrames.map((e=>e.serviceInterface))),(a=>{const s=a.filter((e=>!!e));s.length&&(0,l.reaction)((()=>s.map((e=>({selectedPair:e.selectedPair,project:e.project})))),(a=>{a.length&&e(a)}),{fireImmediately:!0})}),{fireImmediately:!0})},selectPair(e,a){p.selectPair(e,a)},goToContent(){null==m||m.goTo(as.KO.TRADING_SIGNALS)},goToAssets(){null==m||m.goTo(as.KO.TRADING_SIGNALS_ASSETS)},goToDetails(){null==m||m.goTo(as.KO.TRADING_SIGNALS_DETAILS)},goToProducts(){null==m||m.goTo(as.KO.TRADING_SIGNALS_PRODUCTS)},goToMarket(e){r.goToDetails(e)},goToHelp(){var e;null==_||null===(e=_.ovlPlusNavigation)||void 0===e||e.goToHelpCenter(Kr.d0)},getPair:(e,a)=>a===c.Fw.BINARY?(null==v?void 0:v.getPair(e))||null:(null==g?void 0:g.getPair(e))||null,getPairList(e,a){if(a===c.Fw.BINARY){return((null==v?void 0:v.pairCollection.models)||[]).filter((a=>e.includes(a.id)))}return((null==g?void 0:g.pairCollection.models)||[]).filter((a=>e.includes(a.id)))},setSignalData(e){null==f||f.setSignalData(e),((null==u?void 0:u.isMobilePortrait())||(null==u?void 0:u.isMobileLandscape()))&&(null==m||m.close())},setCategories(e,a){E.set(e,a)},fetchFeatures:e=>(0,ie.Z)((function*(){const a=(yield r.fetchFeatures()).filter((a=>e.includes(a.uid)));return a.length?a:[]}))()});return{tradingSignalsService:S,categoriesService:E}}},{repositories:()=>{const e=Xe.Z.add();return{timeframesRepository:new TimeframesRepository(e),tradingSignalsRepository:new TradingSignalsRepository(e),uiStorageRepository:new UiStorageRepository}},publicApi:e=>({tradingSignals:new TradingSignalsPublicService(e.tradingSignalsService),tradingSignalsCategories:e.categoriesService})});sn.use((0,jr.kO)(as.KO.TRADING_SIGNALS),(()=>Ee.createElement(Qr,null))).use((0,jr.nW)(as.KO.TRADING_SIGNALS),(()=>Ee.createElement(Jr,null))).use((0,jr.ub)(as.KO.TRADING_SIGNALS),{component:e=>{let a=e.onClose;return Ee.createElement(Xr,{onClose:a})},loader:()=>Ee.createElement(Ws.zo,null)}).use((0,jr.Jz)(as.KO.TRADING_SIGNALS_ASSETS),{component:(e,a)=>{let s=a.tradingSignalsService;var i;return Ee.createElement(Yr.hZ,{type:(null===(i=s.store.getState().activeTimeframe)||void 0===i?void 0:i.name)||""})}}).use((0,jr.ub)(as.KO.TRADING_SIGNALS_ASSETS),{component:(e,a)=>{let s=a.tradingSignalsService;return Ee.createElement($r,{services:s})},loader:()=>Ee.createElement(Ws.zo,null)}).use((0,jr.ub)(as.KO.TRADING_SIGNALS_DETAILS),{component:(e,a)=>{let s=a.tradingSignalsService;return Ee.createElement(en,{services:s})},loader:()=>Ee.createElement(Ws.zo,null)}).use((0,jr.Jz)(as.KO.TRADING_SIGNALS_PRODUCTS),{component:()=>Ee.createElement(Yr.h4,{type:"products",dataTest:"ts-p-products-title"})}).use((0,jr.ub)(as.KO.TRADING_SIGNALS_PRODUCTS),{component:(e,a)=>{let s=a.tradingSignalsService;return Ee.createElement(tn,{services:s})},loader:()=>Ee.createElement(Ws.zo,null)}).onStart((e=>{let a=e.commandService,s=e.categoriesService,i=e.sidebarService;a.registerCommand(an.guard,(e=>{e.tab&&s.select(e.tab),i.goTo(as.KO.TRADING_SIGNALS)}))})).enable((0,ie.Z)((function*(){return yield(0,st.ic)(ft.ACCOUNT_SERVICE),yield(0,st.ic)(ft.PAIR_SERVICE_BO),yield(0,st.ic)(ft.PAIR_SERVICE_FX),yield(0,st.ic)(ft.NAVIGATION_SERVICE),yield(0,st.ic)(ft.TRADING_SIGNALS_ADAPTER_SERVICE),!0})));var rn=s(66511),nn=s(93616),on=s(74375);class UiService extends vt.t{constructor(...e){super(...e),this.handleClickSupport=(0,on.o)((()=>{})),this.handleClickHelpCenter=(0,on.o)((()=>{})),this.handleClickTradingGuides=(0,on.o)((()=>{}))}}const ln=(0,Ee.memo)((e=>Ee.createElement(Ht.Zb,{borderRadius:"m",dataTest:e.dataTest,onClick:e.onClick,fullWidth:!0,fullHeight:!0,padding:"0"},Ee.createElement(Ht.xu,{fullWidth:!0,fullHeight:!0,display:"flex",direction:"column",gap:"m",verticalAlign:"space-between",padding:"16px"},Ee.createElement("span",null,e.icon),Ee.createElement(Ht.xu,{display:"grid",direction:"column",gap:"xs"},Ee.createElement(Ht.xv,{variant:"M / Bold",color:"contrast-alpha"},e.title),Ee.createElement(Ht.xv,{variant:"S Compact / Regular",color:"contrast-beta"},e.description)))))),cn=(0,ss.WV)({deeplink_action:(0,ss.t$)("help-tab")}),dn=(0,hs.Z)(),un=(0,vs.W)(dn),mn=(0,gt.v)({name:"Help",dependsOn:[rt.u$,Na.G,ot.F0],services:()=>({ui:new UiService})});mn.use(rt.eM,((e,a,s)=>(e.push({id:as.KO.HELP,title:as.x0.help,selected:s.sidebarService.getMajorActiveScope()===as.KO.HELP,dataTest:"sidebar-btn-overlay",icon:Ee.createElement(Vt.M64,null),onClick:()=>s.sidebarService.toggle(as.KO.HELP)}),e))),mn.use((0,jr.ub)(as.KO.HELP),((e,a)=>Ee.createElement("div",{"data-test":"help-tab",dir:(0,Te.L)(),style:{marginTop:"8px"}},Ee.createElement(Ht.xu,{display:"grid",gap:"xxl"},Ee.createElement(Ht.xu,{display:"grid",gap:"l",gridTemplateColumns:"1fr 1fr",fullWidth:!0,padding:"0 16px"},Ee.createElement("div",null,Ee.createElement(ln,{dataTest:"help-tab_support",onClick:a.ui.handleClickSupport,icon:Ee.createElement(Vt.M64,null),title:Ee.createElement(Nt._,{id:"support",defaultMessage:"Support"}),description:Ee.createElement(Nt._,{id:"support_description",defaultMessage:"Ask a question"})})),Ee.createElement("div",null,Ee.createElement(ln,{dataTest:"help-tab_help-center",onClick:a.ui.handleClickHelpCenter,icon:Ee.createElement(Vt.vIG,null),title:Ee.createElement(Nt._,{id:"ct_helpcenter_title",defaultMessage:"Help Center"}),description:Ee.createElement(Nt._,{id:"navigation_item_faq_desc_new",defaultMessage:"Find Answers"})})),Ee.createElement("div",{style:{gridColumn:"1 / span 2"}},Ee.createElement(ln,{dataTest:"help-tab_trading-tutorials",onClick:a.ui.handleClickTradingGuides,icon:Ee.createElement(Vt.l2O,null),title:Ee.createElement(Nt._,{id:"navigation_item_onboarding_title_new",defaultMessage:"Trading Tutorials"}),description:Ee.createElement(Nt._,{id:"navigation_item_onboarding_desc_new",defaultMessage:"Everything you need to know to get started"})}))),Ee.createElement(un,null))))),mn.onStart((e=>{let a=e.commandService,s=e.sidebarService,i=e.ui;a.registerCommand(cn.guard,(()=>s.goTo(as.KO.HELP))),i.handleClickSupport.listen((()=>s.goTo(as.KO.SUPPORT))),i.handleClickHelpCenter.listen((()=>s.goTo(as.KO.HELP_CENTER))),i.handleClickTradingGuides.listen((()=>s.goTo(nn.uN.HOW_TO_TRADE)))}));const pn=(0,gt.v)({name:"Plus",dependsOn:[rt.u$,Na.G,mn]});var hn=s(90569),vn=s(46768),gn=s(32960);const _n=(0,ss.WV)({login_type:(0,ss.EJ)((0,ss.t$)("form_olymp"),(0,ss.t$)("soc_aa"),(0,ss.t$)("soc_fb"),(0,ss.t$)("soc_gp"))}),fn=(0,gt.v)({name:"Analytics",dependsOn:[ot.F0]});fn.onStart((e=>{e.commandService.registerCommand(_n.guard,(e=>{var a;a=e.login_type,(0,ye.L)({event:"events_with_project_param",ga4_event_name:"login",eventCategory:"login",eventAction:"login",eventLabel:a}),(0,gn.k)(["login_type"])}))}));var En=s(55503);class BalanceSettingsService extends vt.t{load(){var e=this;return(0,ie.Z)((function*(){const a=yield e.repository.find();void 0!==a&&e.updateHiddenBalance(a)}))()}handleHiddenBalanceChange(e){this.updateHiddenBalance(e),this.repository.save(e)}handleHelpClick(){this.inputs.onHelpClick()}updateHiddenBalance(e){this.inputs.onChange(e),this.update({hiddenBalance:e})}constructor(e,a){super({hiddenBalance:!1}),this.repository=e,this.inputs=a}}class BalanceSettingsRepository{find(){return Promise.resolve(this.storage.get("hiddenBalance"))}save(e){return this.storage.set("hiddenBalance",e),Promise.resolve()}constructor(){this.storage=new Js._({namespace:"@feature/account-balance/BalanceSettingsRepository",backend:new Qs.u})}}const Sn="qALNgTBl",yn=e=>{let a=e.service;const s=(0,Ot.o)(a.store).hiddenBalance,i=Ee.useCallback((e=>{(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"hide_balance",eventAction:e?"enable_setting":"disable_setting",eventLabel:"from_settings"}),a.handleHiddenBalanceChange(e)}),[a]),r=Ee.useCallback((()=>{a.handleHelpClick()}),[a]);return Ee.createElement(It.dy,{id:"char_beta_test_setting",title:Ee.createElement("span",null,Ee.createElement(Nt._,{id:"settings_account_hidden",defaultMessage:"Hidden balances"})),description:Ee.createElement(Ee.Fragment,null,Ee.createElement("div",null,Ee.createElement(Nt._,{id:"settings_account_hidden_description",defaultMessage:"Hide your live account balances"})),Ee.createElement("a",{className:Sn,href:"#",onClick:r},Ee.createElement(Nt._,{id:"settings_account_hidden_learn_more",defaultMessage:"Learn More"}))),dataTestId:"char_beta_test_setting",checked:s||!1,onChange:i})};yn.displayName="BalanceSettings";const bn=(0,gt.v)({name:"AccountBalance",dependsOn:[At.M,rt.u$,xt.x],optionalDependsOn:[Jt.Q],services:(e,a)=>({balanceSettingsService:new BalanceSettingsService(a.balanceSettingsRepository,{onChange:a=>{e.commonLegacyServiceList.accountService.setHiddenBalance(a)},onHelpClick:()=>{var a;null===(a=e.storiesNavigation)||void 0===a||a.goToStoryByName("hidden_balance_story_web")}})})},{repositories:()=>({balanceSettingsRepository:new BalanceSettingsRepository})});bn.use(rt.Tb,(()=>Ee.createElement(En.r,null))),bn.use(It.GS,((e,a,s)=>[...e,{component:Ee.createElement(yn,{service:s.balanceSettingsService}),title:Ee.createElement(Nt._,{id:"settings_balance",defaultMessage:"Accounts"})}])),bn.onStart(function(){var e=(0,ie.Z)((function*(e){let a=e.balanceSettingsService;return yield a.load()}));return function(a){return e.apply(this,arguments)}}());var Cn=s(93290);class SupportEmailsRepository{find(){return(0,ie.Z)((function*(){return(yield B.g.getSupportContactsPublic()).contacts.email}))()}findPrivate(e){return(0,ie.Z)((function*(){return(yield B.g.getSupportContactsPrivate({locale:e})).contacts.email}))()}}class SupportEmailsService extends vt.t{loadPrivateData(){var e=this;return(0,ie.Z)((function*(){const a=yield e.localeService.getLocale();return yield e.repository.findPrivate(a||P.ZW)}))()}load(){var e=this;return(0,ie.Z)((function*(){const a=e.userService.getState().user?yield e.loadPrivateData():yield e.repository.find();return a&&e.update(a),Promise.resolve()}))()}constructor(e,a,s){super({email:"",description:""}),this.repository=e,this.userService=a,this.localeService=s}}const Tn=(0,gt.v)({name:"Support",dependsOn:[rt.u$,mn,Na.G,Qt.EA,Bt.j],services:(e,a)=>({emailService:new SupportEmailsService(a.emailRepository,e.user,e.locale)})},{repositories:()=>({emailRepository:new SupportEmailsRepository})}),An=Ee.lazy((()=>Promise.resolve().then(s.bind(s,1312)).then((e=>({default:e.Support})))));Tn.use((0,jr.ub)(as.KO.SUPPORT),((e,a)=>{let s=e.onOpenById,i=a.user,r=a.emailService;return Ee.createElement(An,{supportEmails:r.getState(),userName:i.getName(),isRestricted:i.getRestrictions().supportChat.restricted,openPanelById:s})})).onStart((e=>e.emailService.load()));var kn,wn,Nn,Rn,In=s(17498),Dn=s(32952),On=s.n(Dn),Ln=s(28660),Mn=s(21378),Pn=s(17329);let xn=(kn=(0,Ln.bindAs)("NoticeBottomLeftService"),wn=(0,Ln.onBind)(ft.NOTICE_SERVICE),kn((Rn=class NoticeBottomLeftService{constructor(){this.defaultEventHandlers=new Mn.q,this.collection=new Pn.w({handlers:this.defaultEventHandlers})}get models(){return this.collection&&this.collection.models}onBind(e){this.noticeService=e,this.noticeService.addCollections([{name:Ra.sm.BOTTOM_LEFT,model:this.collection}])}},On()(Rn.prototype,"models",[l.computed],Object.getOwnPropertyDescriptor(Rn.prototype,"models"),Rn.prototype),On()(Rn.prototype,"onBind",[wn],Object.getOwnPropertyDescriptor(Rn.prototype,"onBind"),Rn.prototype),Nn=Rn))||Nn);var Fn,Bn,Zn=s(71028),Un=s(93749),Hn=s.n(Un),Gn=s(50391),Vn=s.n(Gn),Wn=s(29609),jn=s(15696);let zn=(0,Ie.observer)((Bn=class NoticeBottomLeft extends Ee.Component{render(){const e=[];for(let a=this.props.items.length-1;a>-1;a-=1){const s=this.props.items[a],i=s.component,r=s.layout;i&&r?e.push(Ee.createElement(Wn.Z,{key:s.id,classNames:"note-win-anim-opacity",timeout:400},Ee.createElement(r,Hn()({},s.layoutProps,{api:this.props.api}),Ee.createElement(i,Hn()({},s.props,{api:this.props.api}))))):i?e.push(Ee.createElement(Wn.Z,{key:s.id,classNames:"note-win-anim-opacity",timeout:400},Ee.createElement(i,Hn()({},s.props,{api:this.props.api})))):r&&e.push(Ee.createElement(Wn.Z,{key:s.id,classNames:"note-win-anim-opacity",timeout:400},Ee.createElement(r,Hn()({},s.layoutProps,{api:this.props.api}))))}return Ee.createElement(jn.Z,null,e)}},Vn()(Bn,"displayName","NoticeBottomLeft"),Vn()(Bn,"defaultProps",{items:[]}),Fn=Bn))||Fn;const qn=(0,ke.zt)(zn,{helper(e){let a=e.noticeBottomLeftService,s=e.noticeStore;return{items:a.models,api:s.api}},services:[xn,Zn.P]}),Kn=qn;var Yn,Xn,Jn,Qn,$n=s(84902);s(31257);let eo=(Yn=(0,Ln.bindAs)("NoticeCenterService"),Xn=(0,Ln.onBind)(ft.NOTICE_SERVICE),Yn((Qn=class NoticeCenterService{constructor(){this.defaultEventHandlers=new Mn.q,this.collection=new Pn.w({handlers:this.defaultEventHandlers})}get models(){return this.collection&&this.collection.models}onBind(e){this.noticeService=e,this.noticeService.addCollections([{name:Ra.sm.CENTER,model:this.collection}])}},On()(Qn.prototype,"models",[l.computed],Object.getOwnPropertyDescriptor(Qn.prototype,"models"),Qn.prototype),On()(Qn.prototype,"onBind",[Xn],Object.getOwnPropertyDescriptor(Qn.prototype,"onBind"),Qn.prototype),Jn=Qn))||Jn);var to;let ao=(0,Ie.observer)(to=class NoticeCenter extends In.Z{render(){const e=this.props.component,a=this.props.layout;let s=null;return e&&a?s=this.props.layoutProps.componentInProps?Ee.createElement(a,Hn()({},this.props.layoutProps,{component:e,componentProps:this.props.props,api:this.props.api}),Ee.createElement(e,this.props.props)):Ee.createElement(a,Hn()({},this.props.layoutProps,{api:this.props.api}),Ee.createElement(e,this.props.props)):e?s=Ee.createElement(e,this.props.props):a&&(s=Ee.createElement(a,Hn()({},this.props.layoutProps,{api:this.props.api}))),s}})||to;ao.displayName="NoticeCenter";const so=(0,ke.zt)(ao,{helper(e){let a=e.noticeCenterService,s=e.noticeStore;const i=(0,$n.Z)(a.models,{selected:!0});return mt()(mt()({},i),{},{api:s.api})},services:[eo,Zn.P]}),io=so;var ro,no,oo,lo,co=s(80080);let uo=(ro=(0,Ln.bindAs)("NoticeFullScreenService"),no=(0,Ln.onBind)(ft.NOTICE_SERVICE),ro((lo=class NoticeFullScreenService{constructor(){this.defaultEventHandlers=new Mn.q,this.collection=new Pn.w({handlers:this.defaultEventHandlers})}get models(){return this.collection&&this.collection.models}onBind(e){this.noticeService=e,this.noticeService.addCollections([{name:Ra.sm.FULL_SCREEN,model:this.collection}]),(0,co.$)(rt.u$,"layout").then((e=>{e&&(0,l.reaction)((()=>this.collection.models.length),(a=>{e.setOverlayState("fullScreenNotice",a>0)}))}))}},On()(lo.prototype,"models",[l.computed],Object.getOwnPropertyDescriptor(lo.prototype,"models"),lo.prototype),On()(lo.prototype,"onBind",[no],Object.getOwnPropertyDescriptor(lo.prototype,"onBind"),lo.prototype),oo=lo))||oo);const mo=(0,ke.zt)(ao,{helper(e){let a=e.noticeFullScreenService,s=e.noticeStore;const i=(0,$n.Z)(a.models,{selected:!0});return mt()(mt()({},i),{},{api:s.api})},services:[uo,Zn.P]}),po=mo;var ho,vo,go,_o;let fo=(ho=(0,Ln.bindAs)("NoticeCenterDialogService"),vo=(0,Ln.onBind)(ft.NOTICE_SERVICE),ho((_o=class NoticeCenterDialogService{constructor(){this.defaultEventHandlers=new Mn.q,this.collection=new Pn.w({handlers:this.defaultEventHandlers})}get models(){return this.collection&&this.collection.models}onBind(e){this.noticeService=e,this.noticeService.addCollections([{name:Ra.sm.CENTER_DIALOG,model:this.collection}]),(0,co.$)(rt.u$,"layout").then((e=>{e&&(0,l.reaction)((()=>this.collection.models.length),(a=>{e.setOverlayState("centerDialogNotice",a>0)}))}))}},On()(_o.prototype,"models",[l.computed],Object.getOwnPropertyDescriptor(_o.prototype,"models"),_o.prototype),On()(_o.prototype,"onBind",[vo],Object.getOwnPropertyDescriptor(_o.prototype,"onBind"),_o.prototype),go=_o))||go);var Eo;let So=(0,Ie.observer)(Eo=class NoticeCenterDialog extends In.Z{render(){const e=this.props.component,a=this.props.layout;let s=null;return e&&a?s=Ee.createElement(a,Hn()({},this.props.layoutProps,{api:this.props.api}),Ee.createElement(e,this.props.props)):e?s=Ee.createElement(e,this.props.props):a&&(s=Ee.createElement(a,Hn()({},this.props.layoutProps,{api:this.props.api}))),s}})||Eo;So.displayName="NoticeCenterDialog";const yo=(0,ke.zt)(So,{helper(e){let a=e.noticeCenterDialogService,s=e.noticeStore;const i=(0,$n.Z)(a.models,{selected:!0});return mt()(mt()({},i),{},{api:s.api})},services:[fo,Zn.P]}),bo=yo;var Co,To,Ao,ko;let wo=(Co=(0,Ln.bindAs)("NoticeTopService"),To=(0,Ln.onBind)(ft.NOTICE_SERVICE),Co((ko=class NoticeTopService{constructor(){this.defaultEventHandlers=new Mn.q,this.collection=new Pn.w({handlers:this.defaultEventHandlers})}get models(){return this.collection&&this.collection.models}onBind(e){this.noticeService=e,this.noticeService.addCollections([{name:Ra.sm.TOP,model:this.collection}])}},On()(ko.prototype,"models",[l.computed],Object.getOwnPropertyDescriptor(ko.prototype,"models"),ko.prototype),On()(ko.prototype,"onBind",[To],Object.getOwnPropertyDescriptor(ko.prototype,"onBind"),ko.prototype),Ao=ko))||Ao);var No;let Ro=(0,Ie.observer)(No=class NoticeTop extends In.Z{render(){const e=this.props.component,a=this.props.layout;let s=null;return e&&a?s=Ee.createElement(Wn.Z,{key:"item-1",classNames:"animate-notice-slide-top",timeout:300},Ee.createElement(a,Hn()({},this.props.layoutProps,{api:this.props.api}),Ee.createElement(e,this.props.props))):e?s=Ee.createElement(Wn.Z,{key:"item-2",classNames:"animate-notice-slide-top",timeout:300},Ee.createElement(e,this.props.props)):a&&(s=Ee.createElement(Wn.Z,{key:"item-3",classNames:"animate-notice-slide-top",timeout:300},Ee.createElement(a,Hn()({key:this.props.id},this.props.layoutProps,{api:this.props.api})))),Ee.createElement(jn.Z,null,s)}})||No;Ro.displayName="NoticeTop";const Io=(0,ke.zt)(Ro,{helper(e){let a=e.noticeTopService,s=e.noticeStore;const i=(0,$n.Z)(a.models,{selected:!0});return mt()(mt()({},i),{},{api:s.api})},services:[wo,Zn.P]}),Do=Io;class Notices extends In.Z{render(){const e=this.props.binder;return Ee.createElement(ke.t5.Provider,{value:e||we.Z.binder},Ee.createElement("div",{className:"notifications-container"},Ee.createElement("div",{id:"tooltips-container"}),Ee.createElement("div",{id:"app-installer-container"}),Ee.createElement("div",{id:"tooltips-container-portal-only"}),Ee.createElement("div",{className:"notes-tc-block"},Ee.createElement(Do,null)),Ee.createElement("div",{className:"notes-lb-block"},Ee.createElement(Kn,null)),Ee.createElement("div",{className:"dialogs-container level-1"},Ee.createElement(io,null)),Ee.createElement("div",{className:"dialogs-container level-2"},Ee.createElement(po,null)),Ee.createElement("div",{className:"dialogs-container level-3"},Ee.createElement(bo,null)),Ee.createElement("div",{className:"strikeslist-container",id:"strikeslist-container",style:{zIndex:2e3,position:"relative"}}),Ee.createElement("div",{className:"bottom-sheet-container notifications-container__bottom-sheet",style:{position:"relative"}}),Ee.createElement("div",{id:"notices-container"}),Ee.createElement("div",{id:"vip-progress-badge-container"}),Ee.createElement("div",{id:"pair-settings-container",style:{position:"relative",zIndex:1002}})))}}const Oo=(0,gt.v)({name:"Notices",dependsOn:[rt.u$,Na.G]});Oo.use(rt.MX,(()=>Ee.createElement(Notices,null)));var Lo=s(18121),Mo=s(84244),Po=s(35716);class DemoDealsTransformer{static parse(e){return Object.values(DemoDealsTransformer.groupDeals(e)).map((e=>{const a=DemoDealsTransformer.getTotalAmount(e),s=e[0],i={count:e.length,pair:s.pair.toLowerCase(),currency:"demo",amount:a};return{id:"demo_deals_closed_#".concat(s.id),title:"",type:"deals",data:{deals:[DemoDealsTransformer.isFxDeal(s)?(0,Si.Z)((0,re.Z)({},i),{multiplicator:s.multiplicator,platform:"fx"}):(0,Si.Z)((0,re.Z)({},i),{duration:s.duration,platform:"bo"})]},meta:{pushId:"client_manual",source:"local"}}}))}static groupDeals(e){return e.reduce(((e,a)=>{let s;return s=DemoDealsTransformer.isFxDeal(a)?"fx_".concat(a.pair,"_").concat(a.currency,"_").concat(a.multiplicator):"ftt_".concat(a.pair,"_").concat(a.currency,"_").concat(a.duration),e[s]?e[s].push(a):e[s]=[a],e}),{})}static isFxDeal(e){return"multiplicator"in e}static getTotalAmount(e){return e.reduce(((e,a)=>(DemoDealsTransformer.isFxDeal(a)?e+=a.realized_pnl:e+=a.balance_change,e)),0)}}class NotificationsDealsRepository{findAll(){return Promise.resolve([])}subscribeOnNotificationsDemoDealsReceived(e){this.emitter.on("notificationReceived",(a=>a&&e(a)))}handleDealsClosed(e){DemoDealsTransformer.parse(e.filter((e=>"demo"===e.group))).forEach((e=>{this.emitter.emit("notificationReceived",e)}))}constructor(e){this.webSocket=e,this.emitter=(0,cs.Z)(),this.handleDealsClosed=this.handleDealsClosed.bind(this),this.webSocket.onDealsClosed(this.handleDealsClosed)}}var xo=s(14978);class NotificationDealsService extends vt.t{handleMessageAndCreateNotification(e){let a=e.onMessageShown,s=e.message;var i,r,n;const o=this.processMessage(s);return 0===o.data.deals.length?null:(0,xo.LR)(this.pairsConfig,(null===(i=this.tradersWayService)||void 0===i?void 0:i.statusId)&&(null===(r=this.statusService)||void 0===r?void 0:r.getState().items)?null===(n=this.statusService)||void 0===n?void 0:n.getState().items:null,o,a)}processMessage(e){var a;const s=this.tradeManagerService.tradeFrames.reduce(((e,a)=>(e.add(a.settings.pairId.toLowerCase()),e)),new Set);e.data.deals=e.data.deals.filter((e=>!s.has(e.pair)));const i=null===(a=this.tradersWayService)||void 0===a?void 0:a.getState().progress;return i&&e.data.before&&e.data.after&&void 0===i.level.next&&(e.data.before.step.id=i.level.id,e.data.before.step.maxId=i.level.id,e.data.after.step.id=i.level.id,e.data.after.step.maxId=i.level.id),e}handleNotificationsDemoDealsReceived(e){const a=this.handleMessageAndCreateNotification({message:e});a&&this.notificationService.addMessage({id:e.id,component:a})}constructor(e,a,s,i,r,n){var o,l,c;super(),this.repository=e,this.notificationService=a,this.tradeManagerService=i,this.tradersWayService=r,this.statusService=n,this.pairsConfig={},this.pairsConfig=[...null!==(o=s.bo)&&void 0!==o?o:[],...null!==(l=s.fx)&&void 0!==l?l:[],...null!==(c=s.spt)&&void 0!==c?c:[]].reduce(((e,a)=>(e[a.id.toLowerCase()]={title:a.title,icon:a.icon_vector},e)),{}),this.handleMessageAndCreateNotification=this.handleMessageAndCreateNotification.bind(this),a.addCustomForegroundMessageByFallback("deals",this.handleMessageAndCreateNotification),a.addCustomForegroundMessageByFallback("deals_soft",this.handleMessageAndCreateNotification),this.handleNotificationsDemoDealsReceived=this.handleNotificationsDemoDealsReceived.bind(this),this.repository.subscribeOnNotificationsDemoDealsReceived(this.handleNotificationsDemoDealsReceived)}}class WebSocket_WebSocket_WebSocket{onDealsClosed(e){this.listeners.closed=e}subscribe(){this.connect.subscribeEventList([$i.WJ.DEALS_CLOSED,$i.nE.DEALS_CLOSED])}constructor(e){this.listeners={closed:()=>{}},this.connect=e,this.connect.onPush(((e,a)=>{e!==$i.U3.DEALS_CLOSED&&e!==$i.y$.DEALS_CLOSED||!Array.isArray(a)||this.listeners.closed(a)})),this.subscribe(),this.connect.onRestore((()=>{this.subscribe()}))}}const Fo=(0,gt.v)({name:"notificationsDeals",dependsOn:[rt.u$,Na.G,Mo.x,Lo.Z],optionalDependsOn:[er.mn],services(e,a){let s=e.appService,i=e.tradersWay,r=e.status;const n=(0,st.Sc)(Po.GL);if(!n)throw new Error("notificationService not found");const o=(0,st.Sc)(ft.TRADE_MANAGER_SERVICE);if(!o)throw new Error("tradeManagerService not found");const l=s.getState();return{notificationDealsService:new NotificationDealsService(a.notificationsDealsRepository,n,{bo:l.pairsBo,fx:l.pairsFx,spt:l.pairsSpt},o,i,r)}}},{repositories:()=>({notificationsDealsRepository:new NotificationsDealsRepository(new WebSocket_WebSocket_WebSocket(Xe.Z.add()))})});Fo.enable((0,ie.Z)((function*(){return yield(0,st.ic)(ft.TRADE_MANAGER_SERVICE),!0})));var Bo=s(99446),Zo=s(90212),Uo=s(88701);const Ho=Ee.lazy((()=>s.e(6666).then(s.bind(s,33630)))),Go=Ee.lazy((()=>s.e(2540).then(s.bind(s,52540)))),Vo=e=>{let a=e.lang,s=e.country,i=e.forceHide,r=e.isAuthorized;return(e=>{let a=e.country;return e.forceHide||P.Qz.includes(null==a?void 0:a.toUpperCase())||(0,p.D1)()})({forceHide:i,country:s})?null:Bo.Dt||Bo.TL?Ee.createElement(Ee.Suspense,{fallback:null},Ee.createElement(Ho,{osName:Bo.Dt?"android":"ios"})):P.gw.includes(null==s?void 0:s.toUpperCase())&&(Bo.ED||Bo.Q5)?Ee.createElement(Ee.Suspense,{fallback:null},Ee.createElement(Go,{osName:Bo.ED?"windows-64":"macos",workingTime:"tr"===a?"7/24":"24/7",isAuthorized:r})):null},Wo=(0,ke.zt)(Vo,{helper(e,a){let s=e.appService;var i;return(0,Si.Z)((0,re.Z)({},a),{lang:s.lang,country:s.geo,isAuthorized:s.isAuthorized,forceHide:!1===(0,Uo.y)(null!==(i=s.regDate)&&void 0!==i?i:0,1)})},services:[te.z]}),jo=e=>{let a=e.classNameContainer,s=e.lang,i=e.country,r=e.isAuthorized;const n=Ee.useContext(ke.t5);return Bo.d||Boolean((0,ne.e)(Zo.vG))||(0,u.v)()||Fe.H.isAutoTestEnv()||!i?null:n?Ee.createElement(Wo,{classNameContainer:a}):Ee.createElement(Vo,{lang:s,country:i,isAuthorized:r,classNameContainer:a})};class SmartAppBannerInitialStateService extends vt.t{init(){return this.initialStateRepository.find()}constructor(e){super({lang:null,country:null,isAuthorized:!1}),this.initialStateRepository=e,this.init().then((e=>{let a=e.lang,s=e.country,i=e.isAuthorized;this.update({lang:a,country:s,isAuthorized:i})}))}}class SmartAppBannerInitialStateRepository{constructor(){this.find=(0,ie.Z)((function*(){const e=(yield B.$.platformValues(["country_data"])).country_data.code,a=yield B.$.userValues(["options","data"]),s=a.options,i=a.data.id,r=Object.entries(P.Gt).find((e=>e[1]===s.lang));return{lang:r?r[0]:P.H0,country:e,isAuthorized:!!i}}))}}const zo=(0,gt.v)({name:"SmartAppBanner",dependsOn:[rt.u$],services:(e,a)=>({initialStateService:new SmartAppBannerInitialStateService(a.initialState)})},{repositories:()=>({initialState:new SmartAppBannerInitialStateRepository})});zo.use(rt.bR,((e,a)=>{const s=a.initialStateService.getState(),i=s.lang,r=s.country,n=s.isAuthorized;return Ee.createElement(jo,{lang:i,country:r,isAuthorized:n})}));var qo=s(89452),Ko=s(58471),Yo=s(38138),Xo=s(49181),Jo=s(59234),Qo=s(1312);class SupportPhonesRepository{find(){return(0,ie.Z)((function*(){const e=yield B.g.getSupportContactsPublic();return{phones:e.contacts.phones,availability:e.contacts.availability,title:e.contacts.title}}))()}findPrivate(e){return(0,ie.Z)((function*(){const a=yield B.g.getSupportContactsPrivate({locale:e});return{phones:a.contacts.phones,availability:a.contacts.availability,title:a.contacts.title}}))()}}class SupportPhonesService extends vt.t{loadPrivateData(){var e=this;return(0,ie.Z)((function*(){const a=yield e.localeService.getLocale();return yield e.repository.findPrivate(a||P.ZW)}))()}load(){var e=this;return(0,ie.Z)((function*(){const a=e.userService.getState().user?yield e.loadPrivateData():yield e.repository.find();var s;a&&(e.update(a),(null===(s=a.phones)||void 0===s?void 0:s.length)&&e.setPhones(a.phones),a.availability&&a.title&&e.setTranslations({availability:a.availability,title:a.title}));return Promise.resolve()}))()}setPhones(e){this.supportPhoneApi.then((a=>a.api.setPhones(e)))}setTranslations(e){let a=e.availability,s=e.title;this.supportPhoneApi.then((e=>e.api.setTranslations({widget:{title:s,description:a}})))}constructor(e,a,s,i){super({phones:[],availability:"",title:""}),this.repository=e,this.supportPhoneApi=a,this.userService=s,this.localeService=i}}const $o="ANV7MvSg",el=s.e(365).then(s.bind(s,30365)).then((e=>(0,e.makeSupportCallFeature)({assets:{icons:{Phone:Vt.S9Z},translations:{widget:{title:"",description:""}}},config:{model:null,ui:null},navigation:null,reactions:null,transport:null,subscriptions:null}))),tl=Ee.lazy((()=>el.then((e=>({default:e.ui.PhoneList}))))),al=Ee.lazy((()=>el.then((e=>({default:e.ui.Widget}))))),sl=(0,gt.v)({name:"supportCall",dependsOn:[rt.u$,mn,Na.G,Tn,Qt.EA,Bt.j],services:(e,a)=>({phoneService:new SupportPhonesService(a.phoneRepository,el,e.user,e.locale)})},{repositories:()=>({phoneRepository:new SupportPhonesRepository})});sl.use(Qo.supportFeaturesSlot,((e,a)=>{let s=e.onClick,i=a.phoneService;var r;const n=(0,Ee.useCallback)((()=>{s(as.KO.SUPPORT_CALL)}),[s]);return(null===(r=i.getState().phones)||void 0===r?void 0:r.length)?Ee.createElement(al,{onClick:n}):null})).use((0,jr.ub)(as.KO.SUPPORT_CALL),(()=>{const e=(0,Te.L)();return Ee.createElement("div",{dir:e},Ee.createElement("div",{className:$o},Ee.createElement(tl,null)))})).onStart((e=>e.phoneService.load()));class CaptchaService extends vt.t{constructor(e){var a;super({lang:"en",types:[],destinations:[]}),a=this,this.repository=e,this.load=this.createTask(pt((function*(){const e=yield a.repository.find();e&&a.update(e)})),{strategy:vt.T.once})}}var il=s(81681);class CaptchaRepository{constructor(e){this.http=e}find(){var e=this;return pt((function*(){const a=yield e.http.getRequirements();return class StateTransformer{static parse(e){const a=e.current_locale,s=e.captcha_requirements,i=a?(0,il.t)(a):"en",r=null!=s?s:{};return{types:r.types,destinations:r.destinations,lang:i}}}.parse(a)}))()}}var rl=s(14936),nl=s.n(rl);class ReCaptchaService{constructor(e){let a=e.key,s=e.lang,i=e.theme;this.key=a,this.lang=s,this.theme=i}get loading(){return Boolean(ReCaptchaService.requestSDK)}static throwError(e){if("type"in e)throw Error(e.message);throw Error(JSON.stringify({message:"Something went wrong in ReCaptchaService",internal_code:"ki_yY_J6"},null,2))}render(e,a){var s=this;return pt((function*(){const i=yield s.getSDK();return i&&"render"in i?i.render(e,{theme:s.theme,sitekey:s.key,callback:null==a?void 0:a.onChange,"expired-callback":null==a?void 0:a.onExpired,"error-callback":null==a?void 0:a.onError}):(i&&ReCaptchaService.throwError(i),null)}))()}reset(e){var a=this;return pt((function*(){const s=yield a.getSDK();s&&"reset"in s?s.reset(e):s&&ReCaptchaService.throwError(s)}))()}getSDK(){var e=this;return pt((function*(){return ReCaptchaService.SDK?ReCaptchaService.SDK:(ReCaptchaService.requestSDK||(ReCaptchaService.requestSDK=new Promise(((a,s)=>{window[ReCaptchaService.ON_LOAD_HOOK_NAME]=()=>{void 0!==window.grecaptcha?(ReCaptchaService.SDK=window.grecaptcha,a(ReCaptchaService.SDK)):s({type:"NotFound",message:"'grecaptcha' is doesn't defined."}),ReCaptchaService.requestSDK=null,window[ReCaptchaService.ON_LOAD_HOOK_NAME]=void 0};const i=document.createElement("script");i.src=(0,Re.stringifyUrl)({url:ReCaptchaService.SDK_URL,query:{onload:ReCaptchaService.ON_LOAD_HOOK_NAME,render:"explicit",hl:e.lang}}),i.async=!0,i.defer=!0,i.onerror=e=>{s({type:"FailedLoad",message:e})},document.body.append(i)}))),ReCaptchaService.requestSDK)}))()}}ReCaptchaService.SDK_URL="https://www.recaptcha.net/recaptcha/api.js",ReCaptchaService.ON_LOAD_HOOK_NAME="globalReCaptchaLoadHook",ReCaptchaService.SDK=window.grecaptcha,ReCaptchaService.requestSDK=null;var ol="_3anwW6h2UZyi";function ll(){return(ll=pt((function*(e){return new Promise((a=>{setTimeout(a,e)}))}))).apply(this,arguments)}const cl=e=>{let a=e.lang,s=e.theme,i=e.publicKey,r=e.className,n=e.name,o=e.code,l=e.error,c=e.onChange,d=e.onExpired,u=e.onError;const m=(0,Ht.tm)(),p=Ee.useRef(null),h=Ee.useRef(null),v=Ee.useMemo((()=>new ReCaptchaService({key:i,lang:a,theme:s})),[a,i,s]),g=Ee.useState(!1),_=Os(g,2),f=_[0],E=_[1],S=Ee.useState(!1),y=Os(S,2),b=y[0],C=y[1],T=Ee.useCallback(pt((function*(){f&&!b&&null===h.current&&null!==p.current&&(C(!0),yield function(e){return ll.apply(this,arguments)}(250),h.current=yield v.render(p.current,{onChange:c,onExpired:d,onError:u}),C(!1))})),[f,b,v,c,d,u]);return Ee.useEffect((function(){T()}),[T]),Ee.useEffect((function(){if(!p.current||!p.current.firstElementChild)return;const e=p.current,a=p.current.firstElementChild,s=Math.min(e.offsetWidth/a.offsetWidth,1),i=a.offsetWidth*s,r=a.offsetHeight*s;e.style.width="".concat(i,"px"),e.style.height="".concat(r,"px"),a.style.transform="scale(".concat(s,")")})),Ee.useEffect((function(){const e=p.current,a=a=>{e&&a.unobserve(e)},s=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(E(!0),a(s))}))}));return e&&s.observe(e),()=>a(s)}),[]),Ee.useEffect((function(){m&&null!==h.current&&"string"==typeof o&&""===o&&v.reset(h.current)}),[v,m,o]),Ee.createElement("div",{className:r},Ee.createElement("input",{name:n,type:"hidden",value:o}),Ee.createElement("div",{className:ol,ref:p}),l&&Ee.createElement(Ht.Q6,{error:!0},l))};cl.displayName="auth(lib)(Captcha)";const dl=["type","destination"],ul=Ee.memo((e=>{let a=e.type,s=void 0===a?"recaptcha":a,i=e.destination,r=rl(e,dl);const n=(0,Ss.G)(CaptchaService),o=(0,Ot.o)(n.store),l=o.destinations.includes(i),c=o.types.find((e=>e.type===s));return l&&c?Ee.createElement(cl,ut({lang:o.lang,name:c.type,publicKey:c.key},r)):null}));ul.displayName="Captcha";var ml=s(52338);class Http_Http{getRequirements(){return B.$.platformValues(["captcha_requirements","current_locale"])}}const pl=(0,gt.v)({name:"CaptchaPlatform",dependsOn:[rt.u$,qo.y,Xi.im],services:(e,a)=>({captchaService:new CaptchaService(a.captchaRepository)})},{repositories:()=>({captchaRepository:new CaptchaRepository(new Http_Http)})}),hl="sms_send",vl={type:"recaptcha"};pl.use(ml.Lz,(e=>Ee.createElement(ul,Object.assign({destination:hl},e)))).use(Xi.zk,(e=>Ee.createElement(ul,Object.assign({destination:hl},e)))).use(ml.EM,(e=>Ee.createElement(ul,Object.assign({destination:hl},e)))).use(qo.k,((e,a,s)=>s.captchaService.getState().destinations.includes(hl)?vl:null)).use(Xi.P4,((e,a,s)=>s.captchaService.getState().destinations.includes(hl)?vl:null)).onStart((e=>{e.captchaService.load()}));var gl=s(86081),_l=s(54294),fl=s(46122);const El=(0,_l.J)({handlers:{makeErrorReporter:e=>{let a=e.tags;return e=>{let s=e.id,i=e.error,r=e.level;fl.b.sendEvent(i,r,s,void 0,a)}},analyticsSender:e=>{let a=e.entryPoint,s=e.id,i=e.data;return(0,ye.L)({event:"".concat(a,"_").concat(s),eventCategory:a,eventAction:s,eventLabel:"".concat(null==i?void 0:i.id,"/").concat(null==i?void 0:i.trigger)})}},icons:{User:Vt.f7T,Close:Vt.bMz}});class GuruService extends vt.t{sendTrigger(e){this.repository.sendTrigger(e)}sendViewedMessage(e){return this.repository.sendViewedMessage(e)}constructor(e,a){super(),this.repository=e,this.sendViewedMessage=this.sendViewedMessage.bind(this),this.repository.onMessageChange((e=>{a.api.receiveNewMessages(e)})),El.api.bindViewedMessageRequest(this.sendViewedMessage)}}class GuruRepository{findAll(){return Promise.resolve([])}onMessageChange(e){this.subscribed||(this.subscribe(),this.subscribed=!0),this.listeners[$i.mi.GURU_NOTIFICATION]=e}sendViewedMessage(e){return new Promise((a=>{this.webSocket.request({event_name:$i.mi.GURU_NOTIFICATION_VIEWED,data:e.map((e=>({id:e})))}).onResponse((e=>{if(e){const s=e.map((e=>e.id));a(s)}a([])}))}))}sendTrigger(e){this.webSocket.request({type:"push",event_name:$i.mi.USER_ACTION,data:[e]})}subscribe(){this.webSocket.onPush(((e,a)=>{e===$i.mi.GURU_NOTIFICATION&&Array.isArray(a)&&this.listeners[$i.mi.GURU_NOTIFICATION](a)})),this.webSocket.subscribeEventList([$i.tN.GURU_NOTIFICATION])}constructor(e){this.listeners={[$i.mi.GURU_NOTIFICATION]:e=>{}},this.subscribed=!1,this.webSocket=e}}const Sl=El.Widget,yl=(0,gt.v)({name:"guruPlatform",dependsOn:[rt.u$,Qt.EA,ps.Kg],optionalDependsOn:[Xo.BB],services:(e,a)=>{let s=a.guruRepository;return{guruService:new GuruService(s,El)}}},{repositories:()=>({guruRepository:new GuruRepository(Xe.Z.add())}),publicApi:e=>e}).use(rt.NS,(()=>{const e=Ee.useCallback((e=>{var a;e&&(null===(a=(0,st.Sc)(ft.NAVIGATION_SERVICE))||void 0===a||a.tryOpenDeepLink(e))}),[]);return Ee.createElement(Sl,{onClick:e})})).onStart((e=>{let a=e.layout,s=e.tradeManagerServiceList,i=e.guruService,r=e.battleRoomsService;i.sendTrigger({type:"welcome_terminal"});const n=a.store.map((e=>e.isActiveOverlay)),o=null==r?void 0:r.store.map((e=>null!==e.actual));if(o){const e=(0,gl.$e)([n,o],((e,a)=>e&&!a));e.subscribe((e=>{e?El.api.resume():El.api.pause()}))}else n.subscribe((e=>{e?El.api.resume():El.api.pause()}));!function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=s.defaultValue,r=(0,Gt.Z)(s,["defaultValue"]);let n=i;(0,l.reaction)(e,(e=>{a(n,e),n=e}),r)}((()=>s.tradeManagerService.tradeFrames.map((e=>e.settings.project))),((e,a)=>{if(e){const s=a.filter((a=>!e.includes(a)))[0];s&&i.sendTrigger({type:"switch_project",data:{project:s}})}}),{defaultValue:s.tradeManagerService.tradeFrames.map((e=>e.settings.project)),equals:l.comparer.structural})})).enable((e=>e.politics.isEnabled("test_guru")));var bl=s(37588);const Cl="welcome_offer";class WelcomeOfferService extends vt.t{init(){var e=this;return(0,ie.Z)((function*(){const a=yield e.repository.find();Array.isArray(a)&&a.forEach((a=>{var s;a.type===Cl&&e.update({welcomeOffer:{promoCode:null!==(s=a.promocode)&&void 0!==s?s:null,bonus:{percent:a.percent}}})}))}))()}resetWelcomeOffer(){this.update({welcomeOffer:null})}constructor(e){super({welcomeOffer:null}),this.repository=e;var a=this;this.getPromoCode=(0,ie.Z)((function*(){const e=yield a.repository.requestPromoCode(Cl),s=a.getState().welcomeOffer;return s&&a.update({welcomeOffer:{bonus:s.bonus,promoCode:e}}),e}));var s=this;this.hide=(0,ie.Z)((function*(){return yield s.repository.hide(Cl)})),this.init()}}class AnalyticsService extends vt.t{tracking(e){(0,ye.L)(function(e,a){const s={eventCategory:e,event:"uaGtmEvents_clicks"};switch(a.name){case"welcome_offer_dep_no_bonus":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"dep",eventLabel:"no_bonus_var"});case"welcome_offer_dep_yes_bonus":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"dep",eventLabel:"yes_bonus_var"});case"welcome_offer_dep_bonus":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"dep",eventLabel:"bonus"});case"welcome_offer_demo_no_bonus":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"demo",eventLabel:"no_bonus_var"});case"welcome_offer_demo_yes_bonus":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"demo",eventLabel:"yes_bonus_var"});case"welcome_offer_dep_click":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"dep",eventLabel:"open_bonus_form"});case"welcome_offer_confirmation_error_email":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"confirmation_error",eventLabel:"email"});case"welcome_offer_confirmation_error_phone":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"confirmation_error",eventLabel:"phone"});case"welcome_offer_confirmation_error_e_and_p":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"confirmation_error",eventLabel:"e_and_p"});case"welcome_offer_email_click":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"email",eventLabel:"click"});case"email_confirmation_get_code":return{event:s.event,eventCategory:"email_confirmation",eventAction:"get_code",eventLabel:"from_welcome_offer"};case"email_confirmation_confirm":return{event:s.event,eventCategory:"email_confirmation",eventAction:"confirm",eventLabel:"from_welcome_offer"};case"email_confirmation_resend":return{event:s.event,eventCategory:"email_confirmation",eventAction:"resend",eventLabel:"from_welcome_offer"};case"email_confirmation_continue":return{event:s.event,eventCategory:"email_confirmation",eventAction:"continue",eventLabel:"from_welcome_offer"};case"welcome_offer_twofactor_click":return(0,Si.Z)((0,re.Z)({},s),{eventAction:"twofactor",eventLabel:"click"});case"phone_confirmation_get_code":return{event:s.event,eventCategory:"phone_confirmation",eventAction:"get_code",eventLabel:"from_welcome_offer"};case"phone_confirmation_confirm":return{event:s.event,eventCategory:"phone_confirmation",eventAction:"confirm",eventLabel:"from_welcome_offer"};case"phone_confirmation_resend":return{event:s.event,eventCategory:"phone_confirmation",eventAction:"resend",eventLabel:"from_welcome_offer"};case"phone_confirmation_continue":return{event:s.event,eventCategory:"phone_confirmation",eventAction:"continue",eventLabel:"from_welcome_offer"}}}(this.origin,e))}constructor(e){super(),this.origin=e,this.tracking=this.tracking.bind(this)}}class WelcomeOfferRepository{find(){return(0,ie.Z)((function*(){var e;const a=yield B.$.userValues(["deposit_motivation"]);var s;return null!==(s=null==a||null===(e=a.deposit_motivation)||void 0===e?void 0:e.scenarios)&&void 0!==s?s:[]}))()}requestPromoCode(e){return(0,ie.Z)((function*(){const a=yield B.$.requestPromoCode({type:e});return"promocode"in a&&"string"==typeof a.promocode?a.promocode:null}))()}hide(e){return(0,ie.Z)((function*(){return yield B.$.hideWelcomeOffer({type:e})}))()}loadWelcomeOffer(){return(0,ie.Z)((function*(){return Promise.resolve(null)}))()}}var Tl=s(37488),Al=s.n(Tl),kl=s(15954);const wl=s.p+"images/depositCard.af81b387.png",Nl=s.p+"images/depositCard@2x.33dea8ff.png",Rl=s.p+"images/joystick.35095c21.png",Il=s.p+"images/joystick@2x.9b7a404e.png",Dl=e=>Ee.createElement("img",Object.assign({src:wl,srcSet:"".concat(wl," 1x, ").concat(Nl," 2x"),width:"96",height:"96",alt:"Deposit Card"},e)),Ol=e=>Ee.createElement("img",Object.assign({src:Rl,srcSet:"".concat(Rl," 1x, ").concat(Il," 2x"),width:"96",height:"96",alt:"Joystick Card"},e)),Ll="msGQu2vN",Ml="TMarYcwG",Pl="QLrJLyIJ",xl="Vu6IgE7l",Fl="qLvnxBEm",Bl="dHpVaF7Z",Zl=e=>{let a=e.image,s=e.title,i=e.description,r=e.action,n=e.className,o=e.animationDelay,l=void 0===o?100:o;return Ee.createElement("div",{className:Ze()(Ll,n),style:{"--animation-delay":"".concat(l,"ms")}},a&&Ee.createElement(a,{className:Ml,width:96,height:96}),(s||i)&&Ee.createElement("div",{className:Pl},s&&Ee.createElement("h2",{className:xl},s),i&&Ee.createElement("p",{className:Fl},i)),r&&Ee.createElement("div",{className:Bl},r))};Zl.displayName="WelcomeOffer(Block)";const Ul={host:"Xy_RS2XL",wrapper:"TXmOp6uu",mobilePanel:"teci1lwc",mobilePanel_start:"cNwcFKkC",mobilePanel_end:"iOeJNUgQ",desktopPanelEndOverlay:"GgwwCykv",fadeOut:"TMbFy_dj",desktopAction:"Qwg3Arez",desktopPanel:"g29TiBml",desktopPanel_start:"mv0_Bz9d",desktopPanel_end:"qALmKjWt"},Hl=Ee.memo((e=>{let a=e.twoFactorAuthService,s=e.entProfileService.email,i=e.panelService,r=e.welcomeOfferService,n=e.analyticsService,o=e.onHide,l=e.onDepositClick,c=e.onTradingClick;Ee.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="visible"})));const d=(0,Tl.useMediaQuery)({minWidth:768}),u=(0,Ht.Fg)().dir,m=(0,kl.K)(a.store,(e=>e.isEnabled)),p=(0,ci.Z)(Ee.useState((()=>s.isConfirmed&&m)),2),h=p[0],v=p[1],g=(0,Ot.o)(r.store).welcomeOffer,_=Ee.useCallback((0,ie.Z)((function*(){yield r.hide(),null==o||o()})),[r,o]),f=Ee.useCallback((()=>v(!0)),[]),E=Ee.useCallback((0,ie.Z)((function*(){yield _(),i.reset(),h?(n.tracking({name:"welcome_offer_dep_bonus"}),(null==g?void 0:g.promoCode)&&l({promo:g.promoCode,origin:n.origin})):(n.tracking({name:"welcome_offer_dep_yes_bonus"}),l({origin:n.origin})),r.resetWelcomeOffer()})),[g,i,r,l,_,h,n]),S=Ee.useCallback((()=>{_(),i.reset(),r.resetWelcomeOffer(),n.tracking({name:"welcome_offer_demo_yes_bonus"}),c({acc_type:Xa.Q5.DEMO})}),[i,r,c,_,n]),y=Ee.useCallback((()=>{s.isConfirmed||(n.tracking({name:"welcome_offer_email_click"}),i.openById(qi.uW.EDIT_EMAIL,{historyMode:"replace"}))}),[s.isConfirmed,i,n]),b=Ee.useCallback((()=>{m||(n.tracking({name:"welcome_offer_twofactor_click"}),i.openById(qi.uW.TWO_FACTOR_AUTH,{historyMode:"replace"}))}),[i,m,n]);Ee.useEffect((()=>{h&&null===(null==g?void 0:g.promoCode)&&r.getPromoCode()}),[r,h,g]);const C=Ee.createElement(Da.tT,{className:Ul.actionButton,bonusPercent:h?null==g?void 0:g.bonus.percent:void 0,onDepositClick:E}),T=Ee.createElement(Ht.zx,{fullWidth:!0,dataTest:"welcome-offer-trade-on-demo-button",onClick:S},Ee.createElement(Nt._,{id:"wel_offer_trade_on_demo",defaultMessage:"Trade on the demo account"}));var A;const k=Ee.createElement(Zl,{image:Dl,title:Ee.createElement(Nt._,{id:"wel_offer_to_get_serious",defaultMessage:"Time to get serious about trading"}),description:Ee.createElement(Nt._,{id:"make_deposit_to_getting_real_profit",defaultMessage:"Make a deposit to move on to getting real profit."}),action:Ee.createElement(Ee.Fragment,null,Ee.createElement(Da.fn,{email:s,isEnabledTwoFactor:m,bonusPercent:null!==(A=null==g?void 0:g.bonus.percent)&&void 0!==A?A:0,onReadyForBonus:f,onEmailConfirmClick:y,onTwoFactorConfirmClick:b}),d?Ee.createElement("div",{className:Ul.desktopAction},C):null),animationDelay:500});return Ee.createElement(ge.SV,{code:"rHZ2o5"},Ee.createElement("div",{className:Ul.wrapper},Ee.createElement("div",{dir:u,className:Ul.host},d&&Ee.createElement(Ee.Fragment,null,Ee.createElement("div",{className:"".concat(Ul.desktopPanel," ").concat(Ul.desktopPanel_start)},k),Ee.createElement("div",{className:"".concat(Ul.desktopPanel," ").concat(Ul.desktopPanel_end)},Ee.createElement(Zl,{image:Ol,title:Ee.createElement(Nt._,{id:"wel_offer_trade_on_demo",defaultMessage:"Trade on the demo account"}),description:Ee.createElement(Nt._,{id:"practice_before_real",defaultMessage:"Practice for a little while longer before you move on to real trading. "}),action:T,animationDelay:800})),Ee.createElement("div",{className:Ul.desktopPanelEndOverlay,style:{"--animation-delay":"".concat(800,"ms")}})),!d&&Ee.createElement(Ee.Fragment,null,Ee.createElement("div",{className:"".concat(Ul.mobilePanel," ").concat(Ul.mobilePanel_start)},k),Ee.createElement("div",{className:"".concat(Ul.mobilePanel," ").concat(Ul.mobilePanel_end)},C,T)))))}));Hl.displayName="WelcomeOffer";const Gl=(0,gt.v)({dependsOn:[rt.u$,Xi.im,qo.y],name:"welcomeOfferPlatform",services:(e,a)=>{let s=a.welcomeOfferRepository;return{analyticsService:new AnalyticsService("welcome_offer"),welcomeOfferService:new WelcomeOfferService(s)}}},{repositories:()=>({welcomeOfferRepository:new WelcomeOfferRepository})}).use(rt.AA,((e,a)=>{let s=a.profileSidebarService,i=a.analyticsService,r=a.welcomeOfferService,n=a.twoFactorAuth;const o=Ee.useMemo((()=>(0,st.Sc)(qi.Zx)),[]),l=Ee.useCallback((e=>{var a;const s=null===(a=(0,st.Sc)(ft.NAVIGATION_SERVICE))||void 0===a?void 0:a.navigation;null==s||s.goToTrading({acc_type:Xa.Q5.REAL}),null==s||s.goToDeposit(e)}),[]),c=Ee.useCallback((e=>{var a;const s=null===(a=(0,st.Sc)(ft.NAVIGATION_SERVICE))||void 0===a?void 0:a.navigation;null==s||s.goToTrading(e)}),[]);return(0,Ot.o)(r.store).welcomeOffer?Ee.createElement(Hl,{onDepositClick:l,onTradingClick:c,twoFactorAuthService:n,welcomeOfferService:r,analyticsService:i,panelService:s,entProfileService:o}):null})).enable((()=>!Fe.H.shouldFeatureBeDisabled("welcomeOffer")));var Vl=s(60046),Wl=s(84515);class FttAssetTransformer{static parse(e){return{id:e.id,title:e.title,aliases:e.aliases,group:e.group,groupView:e.group_view,icon:e.icon_vector,precision:e.precision,timeClose:e.time_close,timeOpen:e.time_open,locked:e.locked,lockedReason:e.locked_reason,timeCloseTrading:e.time_close_trading,timeOpenTrading:e.time_open_trading,lockedTrading:e.locked_trading,lockedTradingReason:e.locked_trading_reason,winperc:e.winperc,minDuration:e.min_duration,maxDuration:e.max_duration,allowedFastDealsDurations:e.allowed_fast_deals_durations}}}class FttAssetsRepository{findAll(){return(0,ie.Z)((function*(){return(yield Wl.$.userValues(["ftt_pairs"])).ftt_pairs.map((e=>FttAssetTransformer.parse(e)))}))()}subscribeOnAssetsUpdate(e){di.W.subscribe.fttInstrumentChange((a=>{e(a.map((e=>FttAssetTransformer.parse(e))))})),di.W.subscribe.fttPairWinpercChange((a=>{e(a.map((e=>({id:e.pair,winperc:e.winperc}))))}))}}class FttSentimentsRepository{findAll(){return(0,ie.Z)((function*(){return(yield Wl.$.userValues(["ftt_pairs"])).ftt_pairs.map((e=>({id:e.id,sentiment:50})))}))()}subscribeOnSentimentsUpdate(e){di.W.subscribe.fttPairSentimentChange((a=>{e(a.map((e=>({id:e.pair,sentiment:e.sentiment}))))}))}}var jl=s(63247);class FttAssetFavoriteRepository{find(){return Promise.resolve(null)}save(e){return this.favoriteAssetsRevision++,di.W.request.fttFavoriteAssetSet({pairs:[...e.keys()],rev:this.favoriteAssetsRevision})}subscribeOnAssetsUpdate(e){di.W.subscribe.fttFavoriteAssetChange((a=>{const s=(0,jl.Z)(a,"rev");if(!s||this.favoriteAssetsRevision>s.rev)return;const i=[];s.pairs.forEach((e=>{i.push([e,i.length])})),this.favoriteAssetsRevision=s.rev,e(new Map(i))}))}constructor(){this.favoriteAssetsRevision=-1}}class FxAssetTransformer{static parse(e){return{id:e.id,title:e.title,aliases:e.aliases,group:e.group,groupView:e.group_view,icon:e.icon_vector,precision:e.precision,timeClose:e.time_close,timeOpen:e.time_open,locked:e.locked,lockedReason:e.locked_reason,timeCloseTrading:e.time_close_trading,timeOpenTrading:e.time_open_trading,lockedTrading:e.locked_trading,lockedTradingReason:e.locked_trading_reason,allowedMultiplicators:e.allowed_multiplicators,lockedBuy:e.locked_buy,lockedSell:e.locked_sell,marginCallToRate:e.margin_call2_rate,minCommission:e.min_commission,openCommissionMax:e.open_commission_max,stopLossRate:e.stop_loss_rate,stopOutRate:e.stop_out_rate,swapCommissionBuy:e.swap_commission_buy,swapCommissionSell:e.swap_commission_sell,takeProfitRate:e.take_profit_rate}}}class FxAssetsRepository{findAll(){return(0,ie.Z)((function*(){return(yield Wl.$.userValues(["fx_pairs"])).fx_pairs.map((e=>FxAssetTransformer.parse(e)))}))()}subscribeOnAssetsUpdate(e){di.W.subscribe.fxInstrumentChange((a=>{e(a.map((e=>FxAssetTransformer.parse(e))))}))}}class FxCommissionsRepository{findAll(){return(0,ie.Z)((function*(){return(yield Wl.$.userValues(["fx_pairs"])).fx_pairs.map((e=>({id:e.id,commission:e.min_commission})))}))()}subscribeChanges(){return(0,ie.Z)((function*(){const e=(yield Wl.$.userValues(["fx_pairs"])).fx_pairs;di.W.request.fxPairCommissionSubscribe(e.map((e=>({pair:e.id}))))}))()}subscribeOnCommissionsUpdate(e){var a=this;return(0,ie.Z)((function*(){yield a.subscribeChanges(),di.W.on("restore",(()=>{a.subscribeChanges()})),di.W.subscribe.fxPairCommissionChange((a=>{e(a.map((e=>({id:e.pair,commission:e.commission}))))}))}))()}}class FxSentimentsRepository{findAll(){return(0,ie.Z)((function*(){return(yield Wl.$.userValues(["fx_pairs"])).fx_pairs.map((e=>({id:e.id,sentiment:50})))}))()}subscribeOnSentimentsUpdate(e){di.W.subscribe.fxPairSentimentChange((a=>{e(a.map((e=>({id:e.pair,sentiment:e.sentiment}))))}))}}class FxAssetFavoriteRepository{find(){return Promise.resolve(null)}save(e){return this.favoriteAssetsRevision++,di.W.request.fxFavoriteAssetSet({pairs:[...e.keys()],rev:this.favoriteAssetsRevision})}subscribeOnAssetsUpdate(e){di.W.subscribe.fxFavoriteAssetChange((a=>{const s=(0,jl.Z)(a,"rev");if(!s||this.favoriteAssetsRevision>s.rev)return;const i=[];s.pairs.forEach((e=>{i.push([e,i.length])})),this.favoriteAssetsRevision=s.rev,e(new Map(i))}))}constructor(){this.favoriteAssetsRevision=-1}}class SptAssetsRepository_SptAssetsRepository{findAll(){return(0,ie.Z)((function*(){return(yield Wl.$.userValues(["spt_pairs"])).spt_pairs.map((e=>class SptAssetTransformer{static parse(e){return{id:e.id,title:e.title,aliases:e.aliases,group:e.group,groupView:e.group_view,icon:e.icon_vector,precision:e.precision,timeClose:e.time_close,timeOpen:e.time_open,locked:e.locked,lockedReason:e.locked_reason,timeCloseTrading:e.time_close_trading,timeOpenTrading:e.time_open_trading,lockedTrading:e.locked_trading,lockedTradingReason:e.locked_trading_reason,currencyQuote:e.currency_quote,lockedBuy:e.locked_buy,salesSuccessFee:e.sales_success_fee,purchaseFee:e.purchase_fee}}}.parse(e)))}))()}subscribeOnAssetsUpdate(e){}}const zl=(0,E.vU)({ftt:{id:"ftt",defaultMessage:"Fixed Time"},fx:{id:"fx",defaultMessage:"Forex"},fx_classic:{id:"cfd",defaultMessage:"CFD"},spt:{id:"ct_spt_trade_mode_name",defaultMessage:"Stocks"}}),ql=[{type:"ftt",title:"",enabled:!1},{type:"fx",title:"",enabled:!1},{type:"fx_classic",title:"",enabled:!1},{type:"spt",title:"",enabled:!1}];class TradingMechanicsRepository{findAll(){return(0,ie.Z)((function*(){const e=(yield B.$.platformValues(["projects"])).projects.projects.reduce(((e,a)=>(e[(0,Ds.B5)(a.name)]=a.login_allow,e)),{ftt:!1,fx:!1,spt:!1,fx_classic:!1});return ql.map((a=>(0,Si.Z)((0,re.Z)({},a),{title:S.NW.formatMessage(zl[a.type]),enabled:e[a.type]})))}))()}}var Kl=s(28046),Yl=s(69761),Xl="_1sZzCucekixw",Jl="_1ijpm40D66QB",Ql="_3RjELFkWzlJM",$l="_3WmsQ5zovzME";const ec=(0,Ee.memo)((e=>Ee.createElement(Da.tE.Card,{onClick:e.onClick},(a=>{let s=a.className;return Ee.createElement("div",{className:Ze()(Xl,s,e.className),"data-test":e.dataTest},Ee.createElement("span",{className:$l},Ee.createElement(Ht.Ct,{color:"accent",content:e.badge})),Ee.createElement("div",{className:Jl},Ee.createElement(Vt.olG,null)),Ee.createElement("span",{className:Ql},Ee.createElement(Ht.xv,{variant:"M / Bold"},e.title)))}))));ec.displayName="CardProfile";var tc=s(11625);const ac=(0,Ee.memo)((()=>{const e=(0,Ss.G)(Yl.C),a=e.store,s=e.onCardProfileMount,i=e.onCardProfileClick,r=(0,Ot.o)(a).userStatus;return(0,Ee.useEffect)(s,[s]),"unknown"===r||"unavailable"===r?null:Ee.createElement(ec,{title:Ee.createElement(Nt._,mt()({},tc.o.title)),badge:Ee.createElement(Nt._,mt()({},tc.o.badge)),dataTest:"referral-program-button",onClick:i})}));ac.displayName="CardProfileReferral";const sc=(0,Ee.memo)((e=>Ee.createElement(Ws.Qe,{onClick:e.onClick},Ee.createElement(Vt.Gc9,null))));sc.displayName="HeaderActionInfo";var ic=s(54902);const rc=(0,Ee.memo)((()=>{const e=(0,Ss.G)(Yl.C),a=e.store,s=e.onPanelReferralActionInfoClick,i=(0,Ot.o)(a).storyName;return Ee.createElement(ic.P,{success:i?Ee.createElement(sc,{onClick:s}):null})}));rc.displayName="PanelReferralActionInfo";const nc={unknown:null,unavailable:null,master:Ee.createElement(Nt._,mt()({},tc.hy.title)),neophyte:Ee.createElement(Nt._,mt()({},tc.Y1.title)),slave:Ee.createElement(Nt._,mt()({},tc.uX.title))},oc=(0,Ee.memo)((()=>{const e=(0,Ss.G)(Yl.C).store,a=(0,Ot.o)(e).userStatus;return Ee.createElement(ic.P,{success:Ee.createElement(Ee.Fragment,null,nc[a])})}));oc.displayName="PanelReferralTitle";const lc=(0,Ee.lazy)((()=>s.e(5459).then(s.bind(s,65459)).then((e=>({default:e.PanelReferralContent}))))),cc=(0,Ee.memo)((()=>Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(Ws.it,null)},Ee.createElement(lc,null))));cc.displayName="PanelReferralContent";const dc=(0,Ee.lazy)((()=>s.e(6246).then(s.bind(s,46246)).then((e=>({default:e.ModalShareLinkReferral}))))),uc=(0,Ee.memo)((e=>Ee.createElement(Ee.Suspense,{fallback:null},Ee.createElement(dc,mt()({},e)))));uc.displayName="ModalShareLinkReferral";var mc=s(70211),pc="_3Y1qSSMTVYHe";const hc=(0,Ee.memo)((e=>Ee.createElement("div",{className:pc},Ee.createElement("img",{alt:"header-image",src:e.src,onError:mc.M}))));hc.displayName="HeaderImage";const vc=(0,Ee.memo)((()=>{const e=(0,Ss.G)(Yl.C).store,a=(0,Ot.o)(e).lootbox;return a?Ee.createElement(hc,{src:a.backgroundSrc}):null}));vc.displayName="PanelLootboxHeaderImage";const gc=(0,Ee.lazy)((()=>s.e(4211).then(s.bind(s,64211)).then((e=>({default:e.PanelLootboxContent}))))),_c=(0,Ee.memo)((()=>Ee.createElement(Ee.Suspense,{fallback:Ee.createElement(Ws.it,null)},Ee.createElement(gc,null))));_c.displayName="PanelLootboxContent";var fc="_3t5xEKelfaox",Ec="TpsawNGDM8q1";const Sc=["basePlacement"],yc=()=>{},bc=(0,Ee.memo)((e=>{var a,s;const i=(0,Ee.useRef)(null);return(0,Ht.O3)(i,null!==(a=e.onClose)&&void 0!==a?a:yc),Ee.createElement(Ht.rD,{arrow:!0,anchorEl:e.anchorElement,open:null!==(s=e.isOpen)&&void 0!==s&&s,disablePortal:!1,distance:0,fitSizeTo:"content",placement:"left",className:fc},(a=>{let s=a.basePlacement,r=nl()(a,Sc);return Ee.createElement(Ht._v,mt()(mt()({},r),{},{classNameContent:Ec,placement:s,padding:"small",withLimitWidth:!1}),Ee.createElement(Ht.xu,{direction:"column",gap:"xs",ref:i},Ee.createElement(Ht.xv,{variant:"M / Bold",color:"contrast-alpha"},e.title),Ee.createElement(Ht.xv,{variant:"M / Regular",color:"contrast-alpha"},e.description),Ee.createElement(Ht.xu,{direction:"row"},e.buttonClose)))}))}));bc.displayName="TooltipTrading";const Cc=(0,Ee.memo)((e=>{const a=(0,Ss.G)(Yl.C),s=a.store,i=a.onTooltipTradingCloseClick,r=a.onTooltipTradingClose,n=(0,Ot.o)(s).isOpenTooltipTrading;return Ee.createElement(bc,{isOpen:n,anchorElement:e.anchorElement,title:Ee.createElement(Nt._,mt()({},tc._7.title)),description:Ee.createElement(Nt._,mt()({},tc._7.description)),buttonClose:Ee.createElement(Ht.rU,{onClick:i},Ee.createElement(Nt._,mt()({},tc._7.link))),onClose:r})}));Cc.displayName="TooltipTrading";var Tc=s(97057),Ac=s(65537),kc=s(51649),wc=s(14305);const Nc=["chart_ta_volume","lootbox"];var Rc=s(90007),Ic=s(33479),Dc=s(39211);const Oc=(0,Rc.Pz)({scheme:(0,ss.Xy)(ss.ge,ss.Ld),fn:kc.yR}).parseItem,Lc=(0,Rc.hG)({errorsHandling:{id:{requestFailed:"e_ft_JJFoCxI",responseHasErrors:"e_ft_iuYeEyM"},report:Ic.H.error},parser:Oc,skipWhenInFlight:!0}),Mc=Lc.setRequestHandler,Pc=(Lc.responseParsed,Lc.imperativeRequest),xc=Lc.responseParsedWithParams,Fc=(0,wc.UP)({clock:xc,fn:e=>{let a=e.params,s=e.data,i=void 0===s?{}:s;return a.filter((e=>(0,kc.kK)(i[e])))}}).filter({fn:kc.Dw}),Bc=(0,wc.GW)(console.warn);(0,wc.UP)({clock:Fc,fn:e=>"Unknown toggles were fetched: ".concat(JSON.stringify(e,void 0,2)),target:Bc}),Mc(Dc.g.getFeatureToggle);const Zc=(0,wc.GW)((0,ie.Z)((function*(){try{var e;return null!==(e=yield Pc({__:!0},Nc))&&void 0!==e?e:{}}catch(e){}return{}}))),Uc={launchFx:Zc};let Hc=class InitialService extends vt.t{load(e){this.update(e)}isEnabled(e){return this.store.getState()[e]}constructor(){super({})}};const Gc=(0,gt.v)({name:"entityFeatureToggle",services:()=>({featureToggleService:new Hc})},{publicApi:kc.yR});Gc.onStart(function(){var e=(0,ie.Z)((function*(e){e.featureToggleService.load(yield Uc.launchFx())}));return function(a){return e.apply(this,arguments)}}());const Vc=(0,ss.WV)({openPayIn:(0,ss.t$)(!0),payment_screen:(0,ss.t$)("LOOT_BOX")}).Or((0,ss.WV)({openPayIn:(0,ss.t$)(!0),payment_screen:(0,ss.t$)("SHOWCASE"),feature:(0,ss.t$)("CUBES")})),Wc={IconClose:()=>Ee.createElement(Vt.bMz,{style:{color:"var(--contrast-gamma)",height:"72px",width:"72px"}}),IconGift:Vt.Lmt,ScreenLoader:()=>Ee.createElement(Ht.$j,{size:"l"}),Spinner:()=>Ee.createElement(Ht.$j,{size:"s"}),IconStopwatch:Vt.$9Y},jc={close:Ee.createElement(Nt._,{id:"close",defaultMessage:"Close"}),emptyLootbox:{button:Ee.createElement(Nt._,{id:"loot_box_empty_button",defaultMessage:"Alright"}),description:Ee.createElement(Nt._,{id:"loot_box_empty_description",defaultMessage:"Unfortunately, this also happens. But we're sure you'll be lucky in something else!"}),subtitle:Ee.createElement(Nt._,{id:"loot_box_empty_subtitle",defaultMessage:"Your Boost Cube Is Empty"}),title:Ee.createElement(Nt._,{id:"loot_box_empty_title",defaultMessage:"Well..."})},open:Ee.createElement(Nt._,{id:"lootboxes_click_to_open",defaultMessage:"Click to open"}),widget_title:Ee.createElement(Nt._,{id:"lootbox_list_title",defaultMessage:"Boost Cubes"}),list_screen_title:Ee.createElement(Nt._,{id:"lootbox_list_title",defaultMessage:"Boost Cubes"}),no_lootboxes:Ee.createElement(Nt._,{id:"lootboxes_empty_title",defaultMessage:"Any Boost Cubes you receive will appear here"}),rewards_title:Ee.createElement(Nt._,{id:"lootbox_your_rewards_title",defaultMessage:"Your Rewards"}),great:Ee.createElement(Nt._,{id:"lootbox_rewards_great",defaultMessage:"Great!"}),fromLootbox:e=>Ee.createElement(Nt._,{id:"rewards_from_loot_box",defaultMessage:"from {cube_name}",values:{cube_name:e}}),new:Ee.createElement(Nt._,{id:"lootbox_new_reward",defaultMessage:"New"}),view_all_rewards:Ee.createElement(Nt._,{id:"lootbox_view_all_rewards",defaultMessage:"View All Rewards"}),reward_view_next:Ee.createElement(Nt._,{id:"lootbox_reward_view_next",defaultMessage:"View Next Reward"}),timerFormat:{days:e=>Ee.createElement(Nt._,{id:"tou_timer_day",defaultMessage:"{days, plural, one {# day} other {# days}}",values:{days:e}}),hours:e=>Ee.createElement(Nt._,{id:"tou_timer_hour",defaultMessage:"{hours, plural, one {# hour} other {# hours}}",values:{hours:e}}),minutes:e=>Ee.createElement(Nt._,{id:"tou_timer_minute",defaultMessage:"{minutes, plural, one {# minute} other {# minutes}}",values:{minutes:e}}),months:e=>Ee.createElement(Nt._,{id:"tou_timer_month",defaultMessage:"{months, plural, one {# month} other {# months}}",values:{months:e}}),seconds:e=>Ee.createElement(Nt._,{id:"tou_timer_second",defaultMessage:"{seconds, plural, one {# second} other {# seconds}}",values:{seconds:e}})}};var zc=s(7035);const qc={analyticsSender:e=>{let a=e.id,s=e.label,i=void 0===s?"":s;zc.S.logProxyFx({event:"uaEvent",eventCategory:"boost_cubes",ga4_event_name:a,eventAction:a,eventLabel:i})},errorSender:s(52433).iO,listFetcher:B.g.getLootboxList,sourcesFetcher:(0,ie.Z)((function*(){return(yield B.g.getLootboxList()).sources})),notNewReporter:B.g.lootboxView,open:B.g.lootboxOpen};let Kc=class InitialService extends vt.t{load(){var e=this;return(0,ie.Z)((function*(){const a=(0,(yield s.e(5918).then(s.bind(s,35918))).makeLootboxesFeature)({assets:{icons:Wc,translations:jc},config:{model:null,ui:{delayBeforeAnimation:250}},navigation:e.params.navigation,reactions:null,subscriptions:e.params.subscriptions,transport:qc});return e.feature=a,a}))()}constructor(e){super(),this.params=e}};const Yc="oUaUUBMd",Xc="DuxFtO4g",Jc=e=>{let a=e.s;var s;const i=a.modalService.createApi({onClose:null===(s=a.pushNotifications)||void 0===s?void 0:s.showMessages});return{closeRewardsScreen:i.close,openListScreen:e=>{a.profileSidebarService.openByItem(e.data)},openLootboxOpeningScreen:e=>{var s;null===(s=a.pushNotifications)||void 0===s||s.hideMessages(),a.modalService.add({content:Ee.createElement(e.data.component,null),api:i,classNameModal:Yc,animation:!0})},openSourceLink:function(){var e=(0,ie.Z)((function*(e){var s;e.url.endsWith("us-td")?a.profileSidebarService.openById("accounts"):yield null===(s=a.commandService)||void 0===s?void 0:s.resolveCommand(e.url)}));return function(a){return e.apply(this,arguments)}}(),openNoRewardsScreen:e=>{i.update({content:Ee.createElement(e.data.component,null),classNameModal:"".concat(Yc," ").concat(Xc),onCloseClick:i.close})},openRewardScreen:e=>{i.update({content:Ee.createElement(e.data.component,null),classNameModal:"".concat(Yc," ").concat(Xc),onCloseClick:i.close})},openRewardsSummaryScreen:e=>{i.update({content:Ee.createElement(e.data.component,null),classNameModal:"".concat(Yc," ").concat(Xc),onCloseClick:i.close})},showOpeningErrorScreen:e=>{i.update({content:Ee.createElement(e.data.component,{errorText:e.params.errorText}),classNameModal:"".concat(Yc," ").concat(Xc),onCloseClick:i.close})}}},Qc={onCountChange:e=>{di.W.subscribe.promoCount((a=>{let s=(0,ci.Z)(a,1)[0].loot_boxes;(0,kc._e)(s)&&e.list.counter.set(s)}))}};var $c;const ed=(0,gt.v)({name:"lootboxes",dependsOn:[Gc,Kl.l,rt.u$,Xi.im],optionalDependsOn:[ot.F0,Mo.x],services:e=>{const a=Jc({s:{commandService:e.commandService,modalService:e.modalService,profileSidebarService:e.profileSidebarService,pushNotifications:e.pushNotifications}});return{init:new Kc({subscriptions:Qc,navigation:a})}}},{publicApi:e=>({lootboxesService:e.init})}).enable((e=>null!==($c=e.featureToggleService.isEnabled("lootbox"))&&void 0!==$c&&$c)).use(Xi.BO,{order:()=>2,component:(e,a)=>{let s=a.init.feature;return s?Ee.createElement(s.ui.Widget,null):Ee.createElement(Ht.Od,{height:"130px",width:"156px"})}}).onStart(function(){var e=(0,ie.Z)((function*(e){var a;const s=yield e.init.load();null===(a=e.commandService)||void 0===a||a.registerCommand(Vc.guard,s.api.list.open)}));return function(a){return e.apply(this,arguments)}}()),td=(0,ss.WV)({deeplink_action:(0,ss.t$)("referral-program")}),ad={unavailable:"unavailable",neophyte:"neophyte",slave:"slave",master:"master"},sd={disabled:"disabled",enabled:"enabled",pending:"pending",completed:"completed"},id=function(){var e=(0,ie.Z)((function*(e){var a;const s=yield Dc.g.getLootboxMeta({loot_box_name:e});return{title:s.title,subtitle:s.source_title,description:s.description,iconSrc:s.icon[2],backgroundSrc:s.icon_with_bg[2],properties:null===(a=s.contains)||void 0===a?void 0:a.map((e=>({title:e.description,description:e.title,iconSrc:e.icon})))}}));return function(a){return e.apply(this,arguments)}}(),rd=e=>{let a=e.url,s=e.text,i=e.hashtag;return"https://www.facebook.com/dialog/share?&app_id=881485739324207&href=".concat(a,"&quote=").concat(s,"&hashtag=").concat(encodeURIComponent(i))},nd=e=>{let a=e.url,s=e.text,i=e.hashtag;return Bo.tq?"https://wa.me/?text=".concat(encodeURIComponent(s),"%20").concat(encodeURIComponent(i),"%0A").concat(a):"https://api.whatsapp.com/send?text=".concat(s,"%20").concat(encodeURIComponent(i),"%0A").concat(a)},od=e=>{let a=e.url,s=e.text,i=e.hashtag;return"https://t.me/share/url?url=".concat(a,"&text=").concat(s,"%20").concat(encodeURIComponent(i))},ld=e=>{let a=e.url,s=e.text,i=e.hashtag;return"https://twitter.com/share?url=".concat(a,"&text=").concat(s,"&hashtags=").concat(i.substring(1))},cd=()=>({requestUserStatus:(0,ie.Z)((function*(){const e=yield Dc.g.getReferralStatus();var a;return null!==(a=ad[e.status])&&void 0!==a?a:"unknown"})),requestReferral:function(){var e=(0,ie.Z)((function*(e){if("unknown"===e||"unavailable"===e)return{};if("master"===e){var a,s,i;const e=yield Dc.g.getReferralMasterV2Data(),n=yield id(e.loot_box_referral_name);var r;return{link:e.url,countLootboxes:null!==(r=null===(a=e.loot_box_ids)||void 0===a?void 0:a.length)&&void 0!==r?r:0,storyName:e.story_name,isBanner:!(null===(s=e.referral_users)||void 0===s?void 0:s.find((e=>"completed"===e.status))),referrals:null===(i=e.referral_users)||void 0===i?void 0:i.map(((e,a)=>({id:e.id.toString(),number:a+1,name:e.name,createdAt:new Date(1e3*e.created_at),status:"in_progress"===e.status?"in-progress":"completed"}))),lootbox:n}}if("neophyte"===e||"slave"===e){var n;const e=yield Dc.g.getReferralAmateurData(),a=yield id(e.loot_box_referral_name);return{storyName:e.story_name,steps:null===(n=e.conditions_info)||void 0===n?void 0:n.map((e=>({id:e.id.toString(),title:e.title,description:e.description,status:sd[e.status],deepLink:e.web_deep_link}))),lootbox:a}}return{}}));return function(a){return e.apply(this,arguments)}}(),formatToFacebookLink:rd,formatToWhatsappLink:nd,formatToTelegramLink:od,formatToTwitterLink:ld}),dd=(0,gt.v)({name:"Referrals",dependsOn:[ot.F0,rt.u$,Xi.im,Kl.l,Qt.EA],optionalDependsOn:[Jt.Q,ed],services:()=>({referralService:new Yl.C(cd())})});dd.use(Xi.BO,{order:()=>1,component:()=>Ee.createElement(ac,null)}).use((0,Xi.xO)(qi.uW.REFERRALS),(()=>Ee.createElement(rc,null))).use((0,Xi.X1)(qi.uW.REFERRALS),(()=>Ee.createElement(oc,null))).use((0,Xi.VT)(qi.uW.REFERRALS),(()=>Ee.createElement(cc,null))),dd.use((0,Xi.cl)(qi.uW.REFERRALS_LOOTBOX),(()=>Ee.createElement(vc,null))).use((0,Xi.VT)(qi.uW.REFERRALS_LOOTBOX),(()=>Ee.createElement(_c,null))),dd.use(Tc.MO,(e=>Ee.createElement(Cc,{anchorElement:e.buttonContainerRef}))).use(Tc.I0,(e=>Ee.createElement(Cc,{anchorElement:e.buttonContainerRef}))),dd.onStart(function(){var e=(0,ie.Z)((function*(e){let a=e.profileSidebarService,s=e.modalService,i=e.referralService,r=e.storiesNavigation,n=e.commandService,o=e.lootboxesService;const l=yield(0,st.ic)(ft.NAVIGATION_SERVICE),c=s.createApi(),d=()=>a.openById(qi.uW.REFERRALS),u=()=>a.openById(qi.uW.MAIN),m=()=>null==r?void 0:r.goToStoryByName(i.getState().storyName);i.onCardProfileClick.listen(d),i.onPanelErrorCloseClick.listen(u),i.onBannerLootboxClick.listen((()=>a.openById(qi.uW.REFERRALS_LOOTBOX))),i.onPanelReferralUnavailableClose.listen(u),i.onButtonLootboxClick.listen((()=>{var e;return null==o||null===(e=o.feature)||void 0===e?void 0:e.api.list.open()})),i.onStepClick.listen(function(){var e=(0,ie.Z)((function*(e){let s=e.step;a.close(),(yield n.resolveCommand(s.deepLink))||(yield null==l?void 0:l.tryOpenDeepLink(s.deepLink))&&s.deepLink.match(Ac.ln.TRADING)&&i.openTooltipTrading()}));return function(a){return e.apply(this,arguments)}}()),i.onButtonInviteClick.listen((()=>s.add({modal:Ee.createElement(uc,{referralService:i}),api:c}))),i.onModalShareLinkClose.listen(c.close),i.onPanelReferralActionInfoClick.listen(m),i.onBannerClick.listen(m),n.registerCommand(td.guard,d)}));return function(a){return e.apply(this,arguments)}}()).enable((e=>{let a=e.politics;return Boolean(a.getPolitic("referral_enabled"))}));var ud=s(72837),md=s(93979),pd=s(28373),hd=s(57415);class SignalsAssetsService extends vt.t{constructor(e,a){var s;super({assets:[],activeAssets:[],selectedAssets:{}}),s=this,this.repository=e,this.fttAssetsService=a,this.load=this.createTask(pt((function*(){const e=yield s.repository.findAll();s.updateAssets(Array.from(e))})),{strategy:vt.T.once});const i=(0,gl.$e)([this.store.map((e=>e.assets)),this.store.map((e=>e.selectedAssets))],((e,a)=>e.filter((e=>void 0===a[e.assetId]))));this.on(i,(e=>({activeAssets:e}))),this.watcher=new hd.CP({onStop:()=>{this.repository.unsubscribeOnAssetsUpdate()},onStart:()=>{this.repository.subscribeOnAssetsUpdate(this.updateAssets)}})}updateSelectedAssets(e){this.update((a=>ut(ut({},a),{},{selectedAssets:e.reduce(((e,a)=>(e[a.assetId]=a,e)),{})})))}updateAssets(e){const a=this.fttAssetsService.getState().assets;this.update({assets:e.filter((e=>void 0!==a[e.assetId]))})}}class SettingsService extends vt.t{constructor(e,a,s){var i;super({stories:{rulesStoryName:""},bannerVisibility:{inspire:!1,aboutSignals:!1,howToUse:!1},settings:{isLeaderBoardPositionPublic:!1}}),i=this,this.settingsRepository=e,this.bannerVisibilityRepository=a,this.storiesRepository=s,this.load=this.createTask(pt((function*(){const e=yield Promise.all([i.settingsRepository.find(),i.bannerVisibilityRepository.find(),i.storiesRepository.find()]),a=Os(e,3),s=a[0],r=a[1],n=a[2];i.update((e=>ut(ut({},e),{},{settings:null!=s?s:e.settings,bannerVisibility:null!=r?r:e.bannerVisibility,stories:null!=n?n:e.stories})))})),{strategy:vt.T.once}),this.toggleSetting=this.createTask(function(){var e=pt((function*(e){const a=i.getState().settings;try{const s=!a[e],r=ut(ut({},a),{},{[e]:s});i.update((a=>ut(ut({},a),{},{settings:ut(ut({},a.settings),{},{[e]:s})}))),yield i.settingsRepository.update(r)}catch(s){throw i.update((s=>ut(ut({},s),{},{settings:ut(ut({},s.settings),{},{[e]:a[e]})}))),s}}));return function(a){return e.apply(this,arguments)}}(),{strategy:vt.T.queue}),this.toggleBanner=this.createTask(function(){var e=pt((function*(e){const a=i.getState().bannerVisibility;try{const s=!a[e],r=ut(ut({},a),{},{[e]:s});yield i.bannerVisibilityRepository.update(r),i.update((a=>ut(ut({},a),{},{bannerVisibility:ut(ut({},a.bannerVisibility),{},{[e]:s})})))}catch(s){throw i.update((s=>ut(ut({},s),{},{bannerVisibility:ut(ut({},s.bannerVisibility),{},{[e]:a[e]})}))),s}}));return function(a){return e.apply(this,arguments)}}(),{strategy:vt.T.queue})}}class LeaderBoardService extends vt.t{constructor(e,a){var s;super({userId:a.userId,traders:[],selectedTraderId:null}),s=this,this.repository=e,this.load=this.createTask(pt((function*(){return s.repository.onLeaderBoardUpdate((e=>{const a=s.getState().userId;s.update({traders:e.map((e=>ut(ut({},e),{},{isYou:e.userId===a}))),selectedTraderId:null})})),Promise.resolve()})),{strategy:vt.T.once})}select(e){this.update((a=>ut(ut({},a),{},{selectedTraderId:a.traders.find((e=>e.userId==e.userId))?e.userId:null})))}unSelect(){this.update({selectedTraderId:null})}}class SignalsFiltersService extends vt.t{constructor(e){var a;super({filters:{all:[],default:[],selected:[]}}),a=this,this.repository=e,this.load=this.createTask(pt((function*(){const e=yield a.repository.find();e&&a.update({filters:e}),a.repository.subscribeOnFiltersUpdate((e=>{a.update({filters:e})}))})),{strategy:vt.T.once}),this.replace=this.createTask(function(){var e=pt((function*(e){const s=a.getState().filters.selected;e.length!==s.length&&s.forEach((a=>{e.find((e=>e.filterId===a.filterId))||e.push(a)}));try{a.update((a=>ut(ut({},a),{},{filters:ut(ut({},a.filters),{},{selected:e})}))),yield a.repository.update(e)}catch(e){throw a.update((e=>ut(ut({},e),{},{filters:ut(ut({},e.filters),{},{selected:s})}))),e}}));return function(a){return e.apply(this,arguments)}}(),{strategy:vt.T.queue}),this.reset=this.createTask(pt((function*(){const e=a.getState().filters;try{a.update((a=>ut(ut({},a),{},{filters:ut(ut({},a.filters),{},{selected:e.default})}))),yield a.repository.update(e.default)}catch(s){throw a.update((a=>ut(ut({},a),{},{filters:ut(ut({},a.filters),{},{selected:e.selected})}))),s}})),{strategy:vt.T.queue})}}var vd=s(84829);const gd=[e=>0===e.signalsAssets.reduce(((e,a)=>e+=a.signalsCount),0)?{type:"no-signals"}:null,e=>{let a=e.selectedAssets;return 0===Object.values(a).length?{type:"required-ftt-mode"}:null},e=>{let a=e.selectedAssets,s=e.fttAssets;const i=Object.values(a),r=i.filter((e=>{var a;return!(null===(a=s[e.assetId])||void 0===a||!a.locked)}));return i.length===r.length?{type:"assets-locked",assets:r}:null},e=>{let a=e.selectedAssets,s=e.signalsAssets;const i=[],r=s.reduce(((e,a)=>(e[a.assetId]=a,e)),{});return 0===Object.values(a).reduce(((e,a)=>{const s=r[a.assetId];return s?e+=s.signalsCount:i.push(a),e}),0)?{type:"no-signals-on-assets",assets:i}:null},e=>{let a=e.selectedAssets;return e.signalsAssets.reduce(((e,s)=>(a[s.assetId]&&(e+=s.signalsCount),e)),0)>0?{type:"to-many-filters"}:null}],_d={type:"wait"};class SignalsStatusService extends vt.t{constructor(e,a,s){super({status:_d}),this.assetsService=e,this.signalsService=a,this.fttAssetsService=s,this.disposers=[],this.startWatch=()=>{this.disposers.push(this.signalsService.subscribe(((e,a)=>{a.active.length!==e.active.length&&this.updateSignalsStatusWithDebounce()})),this.fttAssetsService.subscribe(this.updateSignalsStatusWithDebounce),this.assetsService.subscribe(this.updateSignalsStatusWithDebounce)),this.updateSignalsStatus()},this.stopWatch=()=>{0!==this.disposers.length&&(this.disposers.forEach((e=>e())),this.disposers=[])},this.updateSignalsStatus=()=>{const e=this.getState().status,a=this.fttAssetsService.getState().assets,s=this.assetsService.getState(),i=s.assets,r=s.selectedAssets,n=this.signalsService.getState().active.length>0?_d:(e=>{let a=null;for(let s=0;s<gd.length&&(a=gd[s](e),null===a);s+=1);return a})({selectedAssets:r,signalsAssets:i,fttAssets:a});n&&n.type!==e.type&&this.update({status:n})},this.watcher=new hd.CP({onStart:this.startWatch,onStop:this.stopWatch}),this.updateSignalsStatusWithDebounce=(0,vd.Z)(this.updateSignalsStatus,500)}}var fd=s(26338);const Ed=e=>{const a=e.slice();return a.sort(((e,a)=>a.startingAt-e.startingAt)),a};class SignalsService extends vt.t{constructor(e,a,s,i){var r;super({all:[],queue:[],active:[],selected:null}),r=this,this.repository=e,this.assetsService=a,this.timeService=s,this.fttAssetsService=i,this.load=this.createTask(pt((function*(){const e=yield r.repository.findAll();r.resetSignalsQueue(Array.from(e)),r.repository.onSignalsUpdated(r.resetSignalsQueue),r.repository.onSignalsAdded(r.updateSignalsQueue)})),{strategy:vt.T.once}),this.checkExpiredIntervalId=null,this.startWatch=()=>{this.handleSearchRequestingExpire(),null===this.checkExpiredIntervalId&&(this.checkExpiredIntervalId=setInterval((()=>this.handleSearchRequestingExpire()),1e3))},this.stopWatch=()=>{null!==this.checkExpiredIntervalId&&(clearInterval(this.checkExpiredIntervalId),this.checkExpiredIntervalId=null)},this.updateSignalsQueue=e=>{const a=this.getState(),s=a.queue,i=a.all,r=this.filterByExistedAsset(e),n=Ed([...i,...r]),o=Ed([...s,...this.filterBySelectedAssets(r)]);this.update({all:n,queue:o}),this.handleSearchRequestingExpire()},this.resetSignalsQueue=e=>{const a=Ed(this.filterByExistedAsset(e));this.update({all:a,queue:this.filterBySelectedAssets(a),active:[]}),this.handleSearchRequestingExpire(0)},this.handleSelectedAssetsChange=()=>{const e=this.getState().all;this.update({active:[],queue:this.filterBySelectedAssets(e)}),this.handleSearchRequestingExpire(0)},this.handleSearchRequestingExpire=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const a=r.timeService.serverTime,s=r.getState(),i=s.queue,n=s.all,o=s.active,l=n.filter((e=>e.expiringAt-a.timestamp>0)),c=i.filter((s=>s.expiringAt-a.timestamp>e)),d=o.filter((e=>e.expiringAt-a.timestamp>0)),u=7-d.length,m={all:l,queue:c.slice(u),active:[...c.slice(0,u),...d]};(0,fd.Z)({queue:i,all:n,active:o},m)||r.update(m)},a.subscribe(((e,a)=>{(0,fd.Z)(e.selectedAssets,a.selectedAssets)||this.handleSelectedAssetsChange()})),this.watcher=new hd.CP({onStart:this.startWatch,onStop:this.stopWatch})}select(e){this.update({selected:e})}filterBySelectedAssets(e){const a=this.assetsService.getState().selectedAssets;return e.filter((e=>void 0!==a[e.assetId]))}filterByExistedAsset(e){const a=this.fttAssetsService.getState().assets;return e.filter((e=>void 0!==a[e.assetId]))}}class TipsService extends vt.t{constructor(e){var a;super({visibility:{whereLocated:!1},currentFlow:null,completedFlows:[]}),a=this,this.tipsCompletedFlowsRepository=e,this.load=this.createTask(pt((function*(){const e=yield a.tipsCompletedFlowsRepository.findAll();a.update({completedFlows:Array.from(e)})}))),this.show=e=>{this.update((a=>ut(ut({},a),{},{visibility:ut(ut({},a.visibility),{},{[e]:!0})})))},this.hide=e=>{this.update((a=>ut(ut({},a),{},{visibility:ut(ut({},a.visibility),{},{[e]:!1})})))}}startFlow(e){const a=this.getState(),s=a.currentFlow,i=a.completedFlows;null!==s||i.some((a=>a.type===e.type))||this.update({currentFlow:e})}completeFlow(e){const a=this.getState(),s=a.currentFlow,i=a.completedFlows;if((null==s?void 0:s.type)===e.type)switch(this.tipsCompletedFlowsRepository.save(e),s.type){case"firstUse":case"deepLink":this.update({visibility:{whereLocated:!0},currentFlow:null,completedFlows:i.concat(e)})}}}const Sd=()=>Ee.createElement(Nt._,{defaultMessage:"Top 100 Traders",id:"copytrades_banner_title"}),yd=()=>Ee.createElement(Nt._,{defaultMessage:"Check out top traders and copy their moves",id:"copytrades_banner_desc"}),bd=()=>Ee.createElement(Nt._,{defaultMessage:"Traders in this list have been ranked according to their ROI in FTT mode. If you don't want to appear in this list, you can adjust your profile's visibility in your privacy settings.",id:"copytrades_leaderboard_info_1"}),Cd=()=>Ee.createElement(Nt._,{defaultMessage:"What’s in the Social Tab?",id:"trading_signals_social_list_hint_title"}),Td=()=>Ee.createElement(Nt._,{defaultMessage:"Here you’ll find signals that allow you to copy trades made by top traders in real time",id:"trading_signals_social_list_hint_subtitle"}),Ad=()=>Ee.createElement(Nt._,{defaultMessage:"Active Assets",id:"trading_signals_social_available_assets_title"}),kd=()=>Ee.createElement(Nt._,{defaultMessage:"No assets available",id:"trading_signals_social_available_assets_error"}),wd=()=>Ee.createElement(Nt._,{defaultMessage:"Copy Top Traders",id:"copytrades_leaderboard_title"}),Nd=()=>Ee.createElement(Nt._,{defaultMessage:"Check out top FTT traders and copy their moves",id:"copytrades_leaderboard_desc"}),Rd=()=>Ee.createElement(Nt._,{defaultMessage:"Copy the Best",id:"copytrades_entry_banner_title"}),Id=()=>Ee.createElement(Nt._,{defaultMessage:"Check out top FTT traders and copy their moves",id:"copytrades_entry_banner_desc"}),Dd=()=>Ee.createElement(Nt._,{defaultMessage:"Return on investment (ROI) is the average profitability of a trader. It's calculated by comparing a trader's net profit and investment costs to create a percentage.",id:"copytrades_leaderboard_info_PI"}),Od=()=>Ee.createElement(Nt._,{defaultMessage:"ROI",id:"copytrades_leaderboard_table_PI"}),Ld=()=>Ee.createElement(Nt._,{defaultMessage:"Trader",id:"copytrades_leaderboard_table_trader"}),Md=()=>Ee.createElement(Nt._,{defaultMessage:"Show All Available Assets",id:"trading_signals_list_show_all_available_assets_button"}),Pd=()=>Ee.createElement(Nt._,{defaultMessage:"Up",id:"trading_signals_advice_up"}),xd=()=>Ee.createElement(Nt._,{defaultMessage:"Down",id:"trading_signal_advice_down"}),Fd=()=>Ee.createElement(Nt._,{defaultMessage:"Learn more",id:"learn_more"}),Bd=()=>Ee.createElement(Nt._,{defaultMessage:"Active Signals",id:"trading_signals_list_active_signals_header"}),Zd=e=>Ee.createElement(Nt._,{defaultMessage:"Trade Signal {time} {direction}",id:"trading_signals_details_advice",values:{time:e.time,direction:e.direction}}),Ud=()=>Ee.createElement(Nt._,{defaultMessage:"Not relevant",id:"trading_signals_details_relevance_not_relevant"}),Hd=()=>Ee.createElement(Nt._,{defaultMessage:"Signal relevance",id:"trading_signals_details_relevance"}),Gd=()=>Ee.createElement(Nt._,{defaultMessage:"Signal relevance",id:"trading_signals_details_received"}),Vd=()=>Ee.createElement(Nt._,{defaultMessage:"Duration (Timeframe)",id:"trading_signals_details_duration"}),Wd=()=>Ee.createElement(Nt._,{defaultMessage:"Use This Signal",id:"trading_signals_details_use_a_signal_button"}),jd=()=>Ee.createElement(Nt._,{defaultMessage:"How to Use",id:"trading_signals_social_details_title"}),zd=()=>Ee.createElement(Nt._,{defaultMessage:"By pressing the button, you'll be redirected to the chosen asset with the top trader's settings. Enter an amount and open a trade.",id:"trading_signals_social_details_disclaimer"}),qd=()=>Ee.createElement(Nt._,{defaultMessage:"Type",id:"trading_signals_details_type"}),Kd=()=>Ee.createElement(Nt._,{defaultMessage:"Top Trader Signal",id:"trading_signals_details_type_social"}),Yd=()=>Ee.createElement(Nt._,{defaultMessage:"Social",id:"trading_signals_social_name"}),Xd=()=>Ee.createElement(Nt._,{defaultMessage:"No Signals",id:"signals_no_signals_title"}),Jd=()=>Ee.createElement(Nt._,{defaultMessage:"There are no signals currently available in the {section} section",id:"signals_no_signals_text",values:{section:Ee.createElement(Yd,null)}}),Qd=e=>Ee.createElement(Nt._,{defaultMessage:"There are no signals available for {asset}. You can try a different asset.",id:"signals_no_signals_different_asset_text",values:{asset:e.asset}}),$d=()=>Ee.createElement(Nt._,{defaultMessage:"FTT Mode Required",id:"signals_ftt_required_title"}),eu=()=>Ee.createElement(Nt._,{defaultMessage:"Select an asset on FTT mode to see signals in the Social section",id:"signals_ftt_required_text"}),tu=()=>Ee.createElement(Nt._,{defaultMessage:"Asset Closed",id:"signals_asset_closed_title"}),au=e=>Ee.createElement(Nt._,{defaultMessage:"{asset} is unavailable for trading until {date}, {time}",id:"signals_asset_closed_text",values:{asset:e.asset,date:Ee.createElement(E.Ji,{day:"2-digit",month:"2-digit",value:e.date}),time:Ee.createElement(E.Ji,{hour:"2-digit",minute:"2-digit",value:e.date})}}),su=()=>Ee.createElement(Nt._,{defaultMessage:"Restrictive Filters",id:"signals_filters_title"}),iu=()=>Ee.createElement(Nt._,{defaultMessage:"Your search filters are too restrictive. Try resetting them to find some signals.",id:"signals_filters_text"}),ru=()=>Ee.createElement(Nt._,{defaultMessage:"Select Different Asset",id:"signals_different_asset_button"}),nu=()=>Ee.createElement(Nt._,{defaultMessage:"Reset Filters",id:"signals_filters_button"}),ou=()=>Ee.createElement(Nt._,{defaultMessage:"Social signals are located here",id:"trading_signals_social_onboarding_hint_1"}),lu=()=>Ee.createElement(Nt._,{defaultMessage:"Got It",id:"trading_signals_social_onboarding_action_1"}),cu=()=>Ee.createElement(Nt._,{defaultMessage:"Me",id:"tou_leaderboard_item_me"});var du="_2dgK-9F9wl9T",uu="_2VQeKmLGJAPn",mu="wpIKfxIGN0LV";const pu=e=>{let a=e.asset,s=e.position,i=e.onClick;const r=Ee.useCallback((()=>{i(a,s)}),[a,s,i]),n=(0,ct.rF)(a.assetId);return Ee.createElement("div",{className:du,role:"button",onClick:r},n&&Ee.createElement("div",{className:uu},Ee.createElement("img",{alt:"",className:mu,src:n.icon}),Ee.createElement(Ht.xv,{variant:"M Compact / Bold"},n.title)),Ee.createElement(Ht.xv,{variant:"XS / Bold"},a.signalsCount))};var hu="_3dBdkRyXXUdq",vu="_1rYSkDPuQv2X",gu="_2LEj5cRlbcQU",_u="_1FmoMP96KXUR";const fu=(0,Ee.memo)((e=>{let a=e.onAssetClick;const s=(0,Ss.G)(SignalsAssetsService),i=(0,Ss.G)(ot.yD);(0,hd.ZG)(s.watcher);const r=(0,Ot.o)(s.store).activeAssets,n=(0,Ot.o)(s.load.pending);(0,Ee.useEffect)((()=>{s.load()}),[s]),(0,Ee.useEffect)((()=>{n||0!==s.getState().activeAssets.length||i.track({category:"signals/social",action:"change_asset/active_assets",label:"no_available_assets"})}),[n,s,i]);const o=(0,Ee.useCallback)((e=>{i.track({category:"signals/social",action:"change_asset/active_assets",label:"".concat(e.assetId)}),a(e)}),[i,a]);return Ee.createElement("div",{className:hu},r.length>0?Ee.createElement("div",{className:vu},r.map(((e,a)=>Ee.createElement(pu,{asset:e,key:e.assetId,position:a+1,onClick:o})))):Ee.createElement("div",{className:gu},Ee.createElement("div",{className:_u},Ee.createElement(Ht.xv,{color:"contrast-gamma",variant:"M / Regular"},Ee.createElement(Vt.aih,null))),Ee.createElement(Ht.xv,{align:"center",color:"contrast-gamma",variant:"M / Regular"},Ee.createElement(kd,null))))})),Eu=Ee.memo((e=>{let a=e.className;return Ee.createElement(Ws.V9,{className:a},Ee.createElement(Ws.V9.Center,null,(e=>Ee.createElement(Ws.pY,ut({align:"center",size:"small",isClipped:!0},e),Ee.createElement(Ad,null)))))}));var Su="_2vWESB5Z8yjP",yu="Nul62TGmKQR8";const bu=["basePlacement"],Cu=["ref"],Tu=Ee.memo((e=>{let a=e.content,s=e.onOpen;const i=Ee.useCallback((e=>{let s=e.basePlacement,i=rl(e,bu);return Ee.createElement(Ht._v,ut(ut({padding:"medium",placement:s},i),{},{classNameContent:yu}),a)}),[a]);return Ee.createElement(Ht.u,{arrow:!0,content:i,delay:100,disablePortal:!0,fitSizeTo:"content",placement:"top",transition:!0,transitionDuration:250,triggerOnHover:!0,triggerOnTap:!1,onOpen:s},(e=>{let a=e.ref,s=rl(e,Cu);return Ee.createElement("span",ut({ref:a},s),Ee.createElement(Vt.T08,{className:Su}))}))}));var Au="_2tuqgqy6ogsG",ku="_28Kntb9SpGx5",wu="clLjaa7UyQCq",Nu="_17aw-CuWr1xf";const Ru=e=>{let a=e.onTraderTooltipOpen,s=e.onRoiTooltipOpen;return Ee.createElement("div",{className:Au},Ee.createElement("span",{className:ku},"#"),Ee.createElement("div",{className:Nu},Ee.createElement("span",null,Ee.createElement(Ld,null)),Ee.createElement(Tu,{content:Ee.createElement(bd,null),onOpen:a})),Ee.createElement("div",{className:wu},Ee.createElement("span",null,Ee.createElement(Od,null)),Ee.createElement(Tu,{content:Ee.createElement(Dd,null),onOpen:s})))},Iu=Ee.memo((e=>{let a=e.value;return Ee.createElement(E.BK,{style:"percent",value:a/100})}));var Du={gradient:"eN6Nu_rE-pTO",highlightAnimation:"_2HIMd_wYAUGy"};const Ou=Ee.memo((e=>{let a=e.delay,s=e.className;return Ee.createElement("div",{className:Be(Du.host,s)},Ee.createElement("div",{className:Du.gradient,style:{animationDelay:"".concat(a,"ms")}}))}));var Lu="FS1T8kER89y3",Mu="_20-Ll9TcCplj",Pu="_2OTf9hM6uBWb",xu="_115mssMpkYoU",Fu="jEx12k5BMnbb",Bu="ld4BoY_WX6PV",Zu="_1ABZu3idJrt2";const Uu=e=>{let a=e.name,s=e.isYou;return Ee.createElement("div",{className:Pu},Ee.createElement(Ht.xv,{overflow:"ellipsis",variant:s?"M / Bold":"M / Regular"},a),s&&Ee.createElement("div",{className:Bu},Ee.createElement(Ht.xv,{color:"contrast-gamma",variant:"M / Regular"},Ee.createElement(cu,null))))},Hu=e=>{let a=e.trader,s=a.avatar,i=a.country,r=a.isYou,n=a.pi,o=a.name,l=a.position,c=e.highlight;const d=l<=3;return Ee.createElement("div",{className:Be(Lu,d&&Mu)},c&&Ee.createElement(Ou,{className:Zu,delay:1e3}),Ee.createElement(Ht.xv,{color:d?"accent-alpha":"contrast-alpha",variant:"M / Bold"},l),Ee.createElement("div",{className:Be(xu)},Ee.createElement(hd.qE,{className:Fu,endIcon:Ee.createElement(hd.WN,{code:i}),url:s})),Ee.createElement(Uu,{isYou:r,name:o}),Ee.createElement(Ht.xv,{color:d?"accent-alpha":"contrast-alpha",variant:"M / Bold"},Ee.createElement(Iu,{value:n})))};var Gu="_3nsHIZiF5w3_",Vu="XqDUvi4Ufu6J",Wu="_1ex-4LDgzIAn";const ju=(0,Ee.memo)((e=>{let a=e.list,s=e.activeTraderId;const i=(0,Ss.G)(ot.yD),r=Ee.useRef(),n=(0,Ee.useMemo)((()=>[...Array(a.length).keys()].map((()=>Ee.createRef()))),[a.length]);Ee.useLayoutEffect((()=>{if(null===s)return;const e=n[a.findIndex((e=>e.userId===s))];void 0!==e&&(void 0!==r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{var a;null===(a=e.current)||void 0===a||a.scrollIntoView({behavior:"smooth",block:"center"})}),500))}),[a,n,s]);const o=Ee.useCallback((()=>{i.track({category:"signals/social",action:"click_info",label:"leaderboard/traders"})}),[i]),l=Ee.useCallback((()=>{i.track({category:"signals/social",action:"click_info",label:"leaderboard/roi"})}),[i]);return Ee.createElement("div",{className:Gu},Ee.createElement(Ru,{onRoiTooltipOpen:l,onTraderTooltipOpen:o}),Ee.createElement("div",{className:Vu},0===a.length?Ee.createElement(Ht.aN,null):a.map(((e,a)=>Ee.createElement("div",{className:Wu,key:e.userId,ref:n[a]},Ee.createElement(Hu,{highlight:s===e.userId,trader:e}))))))}));var zu="_87ldqWXO8aU-",qu="q21-0fBbOLGS";const Ku=(0,Ee.memo)((()=>{const e=(0,Ss.G)(LeaderBoardService),a=(0,Ot.o)(e.store),s=a.traders,i=a.selectedTraderId,r=(0,Ht.Fg)().dir;return(0,Ee.useEffect)((()=>(e.load(),()=>{e.unSelect()})),[e]),Ee.createElement("div",{className:zu,dir:r},Ee.createElement("div",{className:qu},Ee.createElement(ju,{activeTraderId:i,list:s})))}));var Yu=s.e(4729).then(s.t.bind(s,84729,17)),Xu={content:"_1hQPz0wdNcux",title:"_215ojV7JpAep",description:"E5nkF28NbwIR"};const Ju=(0,Ee.memo)((()=>{const e=Ee.useCallback((()=>Ee.createElement("div",{className:Xu.content},Ee.createElement("h2",{className:Xu.title},Ee.createElement(wd,null)),Ee.createElement("p",{className:Xu.description},Ee.createElement(Nd,null)))),[]),a=(0,Is.aN)(Yu);return Ee.createElement(Ws.KE,{className:Xu.host,renderContent:e,size:"extraLarge",url:a})}));var Qu="_45gvt_VPoanT",$u="_1gK6yc6WBijn";const em=Ee.memo((e=>{let a=e.assetId;const s=(0,ct.rF)(a);return s?Ee.createElement("div",{className:Qu},Ee.createElement("img",{className:$u,src:s.icon}),Ee.createElement(Ht.xv,{variant:"L / Bold"},s.title)):null}));var tm="MAEl1K66-Eeg",am="_2h-LYGXqF-Ra";const sm=e=>"up"===e.direction?Ee.createElement(Vt.F9O,{className:tm}):Ee.createElement(Vt.WAH,{className:am});var im="_15vwqiGp9i1A",rm="_3akMRi0T7dNt",nm="_1HA5QK3kJE3Y",om="xlDFr1WuljPK",lm="_1QIL6mC4tPO5";const cm=Ee.memo((e=>{let a=e.title,s=e.description,i=e.onCloseClick;return Ee.createElement("div",{className:im},Ee.createElement("div",{className:om},Ee.createElement(Vt.Gc9,{fontSize:"inherit"})),Ee.createElement("div",{className:rm},Ee.createElement("div",{className:nm},Ee.createElement(Ht.xv,{variant:"M / Bold"},a)),Ee.createElement(Ht.xv,{variant:"S / Regular"},s)),Ee.createElement("div",{className:lm},Ee.createElement(Ht.Ei,{color:"neutral",icon:Ee.createElement(Vt.bMz,null),size:"s",variant:"flat",onClick:i})))})),dm=()=>{const e=(0,Ss.G)(SettingsService),a=(0,Ss.G)(ot.yD),s=(0,Ot.o)(e.store).bannerVisibility,i=Ee.useCallback((()=>{a.track({category:"signals/social",action:"close",label:"how_to_use_signals"}),e.toggleBanner("howToUse")}),[a,e]);return s.howToUse?Ee.createElement(cm,{description:Ee.createElement(zd,null),title:Ee.createElement(jd,null),onCloseClick:i}):null},um=Ee.memo((e=>{let a=e.startTime;const s=(0,nt.w6)(),i=Ee.useCallback((e=>{const a=24*Number(e.days)+Number(e.hours);return a>0?Ee.createElement("span",null,"".concat(a).padStart(2,"0"),":",e.minutes):Ee.createElement("span",null,e.minutes,":",e.seconds)}),[]);return Ee.createElement(Ht.Wo,{render:i,serverTime:s.timestamp,startTime:a,timeFormat:"m:s"})}));var mm="_3R2mzDo_olRr",pm="vZwaMXqsW5tm";const hm=Ee.memo((e=>{let a=e.expiringAt,s=e.active;const i=(0,Ht.D9)(s);return Ee.createElement("div",{className:Be(mm,i&&!s&&pm)},Ee.createElement(Ht.xv,{color:"inherit",variant:"S / Bold"},s?Ee.createElement(um,{startTime:a}):Ee.createElement(Ud,null)))}));var vm="_2qe76wNuFptL",gm="_2adb8_YZINc1",_m="Um-MeuhaNqN9",fm="LzJ1oan3_e9P",Em="_3GFx1ObtirtH",Sm="vygF3JM0z6hx";const ym=e=>{let a=e.trader,s=e.onClick;const i=Ee.useCallback((()=>{s(a)}),[a,s]);return Ee.createElement("button",{className:vm,onClick:i},Ee.createElement("div",{className:_m},Ee.createElement("div",{className:gm},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular",inline:!0},a.position),Ee.createElement("div",{className:fm},Ee.createElement(hd.WN,{code:a.country}))),Ee.createElement("div",{className:Sm},Ee.createElement(Ht.xv,{overflow:"ellipsis",variant:"S Compact / Bold"},a.name)),Ee.createElement("div",{className:gm},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular",inline:!0},Ee.createElement(Od,null)),Ee.createElement("div",{className:Em},Ee.createElement(Ht.xv,{color:"contrast-alpha",variant:"S / Bold",inline:!0},Ee.createElement(Iu,{value:a.pi}))))))};var bm=s.e(7872).then(s.t.bind(s,77872,17)),Cm="_374Xjsplhnx3",Tm="_1y-wnh4vJ0V4",Am="_1ViNn_w-8NdF",km="_2Hy8ltkBPqsb",wm="W9WJqPRYvvL3",Nm="_2xYwB0iz2V3p",Rm="_2ZVrcquH7SWL",Im="_3F5hlFo2OcXc";const Dm=Ee.memo((e=>{let a=e.url;return Ee.createElement("div",{className:Rm,style:{backgroundImage:"url(".concat(a,")")}})})),Om=e=>{let a=e.onUseSignalClick,s=e.onGoToLeaderboardClick;const i=(0,Ss.G)(SignalsService),r=(0,Ss.G)(LeaderBoardService),n=(0,Ss.G)(TipsService),o=(0,Ss.G)(SignalsAssetsService),l=(0,Ss.G)(ot.yD),c=(0,Ot.o)(i.store).selected,d=(0,Ss.G)(nt.OY);(0,hd.ZG)(o.watcher);const u=(0,Is.aN)(bm),m=(0,kl.K)(r.store,((e,a)=>{let s=e.traders;return null===a?void 0:s.find((e=>e.userId===a.userId))}),[c]),p=Ee.useState(!0),h=Os(p,2),v=h[0],g=h[1],_=Ee.useRef(!1),f=(0,Ht.Fg)().dir,S=Ee.useCallback((e=>{l.track({category:"signals/social",action:"open_leaderboard",label:"deal/".concat(e.position)}),r.select(e),s()}),[l,r,s]),y=Ee.useCallback((()=>{c&&(l.track({category:"signals/social",action:"use_signal",label:"".concat(c.assetId,"/").concat(c.dealId)}),_.current=!0,a(c))}),[c,l,a,_]);return Ee.useEffect((()=>()=>{_.current||n.completeFlow({type:"deepLink"})}),[n,_]),Ee.useEffect((()=>{if(null===c)return;const e=e=>{g(e.timestamp<c.expiringAt)};return d.events.on("serverTime",e),e(d.serverTime),()=>{d.events.off("serverTime",e)}}),[c,d]),c?Ee.createElement("div",{className:Cm,dir:f},m&&Ee.createElement("div",{className:Tm},Ee.createElement(ym,{trader:m,onClick:S})),Ee.createElement("div",{className:Am},Ee.createElement(em,{assetId:c.assetId})),Ee.createElement("div",{className:km},Ee.createElement(Ht.xv,{variant:"M / Bold"},Ee.createElement(Zd,{direction:"up"===c.direction?Ee.createElement(Pd,null):Ee.createElement(xd,null),time:Ee.createElement(hd.R8,{seconds:c.duration})})),Ee.createElement(sm,{direction:c.direction})),Ee.createElement("div",{className:wm},Ee.createElement("div",{className:Nm},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular",inline:!0},Ee.createElement(Hd,null)),Ee.createElement(Dm,{url:u}),Ee.createElement(hm,{active:v,expiringAt:c.expiringAt})),Ee.createElement("div",{className:Nm},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Gd,null)),Ee.createElement(Dm,{url:u}),Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Bold"},Ee.createElement(E.Ji,{day:"numeric",hour:"numeric",minute:"numeric",month:"long",value:1e3*c.expiringAt}))),Ee.createElement("div",{className:Nm},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(Vd,null)),Ee.createElement(Dm,{url:u}),Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Bold"},Ee.createElement(hd.u0,{seconds:c.duration}))),Ee.createElement("div",{className:Nm},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Regular"},Ee.createElement(qd,null)),Ee.createElement(Dm,{url:u}),Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"S / Bold"},Ee.createElement(Kd,null)))),Ee.createElement("div",{className:Im},Ee.createElement(dm,null)),Ee.createElement(Ht.zx,{color:"accent",disabled:!v,size:"m",variant:"primary",fullWidth:!0,onClick:y},Ee.createElement(Wd,null))):null};var Lm="_3pgbYuDMouSv",Mm="_98olar4kfQ2S",Pm="n5GsUg2okxmt",xm="LAz4JfXqKx_R",Fm="_10xpEV2NaRZC",Bm="_1wd2q8IZF0_P",Zm="_1DQclDJaar4Y",Um="_1KNPsuhjq-Qm",Hm="_2QKHNKPXhcTe",Gm="_3jmmL2PNhvcb";const Vm=Ee.memo((e=>{let a=e.title,s=e.description,i=e.action,r=e.endImage,n=e.backgroundImage,o=e.onClick,l=e.onCloseClick;return Ee.createElement(hd.Zb,{className:Be(Lm,r&&Pm)},Ee.createElement("img",{alt:"",className:Um,src:n}),r&&Ee.createElement("div",{className:Hm},Ee.createElement("img",{alt:"",className:Gm,src:r})),l&&Ee.createElement("div",{className:Zm,onClick:l},Ee.createElement(Vt.bMz,{fontSize:"inherit"})),Ee.createElement(hd.Zb.Content,{onClick:o},Ee.createElement("div",{className:Mm},Ee.createElement("div",{className:xm},Ee.createElement(Ht.xv,{variant:"M / Bold"},a)),Ee.createElement("div",{className:Fm},Ee.createElement(Ht.xv,{variant:"S / Regular"},s)),i&&Ee.createElement("div",{className:Bm},Ee.createElement(Ht.xv,{variant:"M Compact / Bold"},i)))))}));var Wm=s.e(7319).then(s.t.bind(s,57319,17));var jm=s.e(490).then(s.t.bind(s,30490,17));const zm=Ee.memo((e=>{let a=e.onClick;const s=(0,Ss.G)(SettingsService),i=(0,Ss.G)(ot.yD),r=(0,Ot.o)(s.store),n=r.bannerVisibility,o=r.stories,l=(0,Is.aN)(Wm),c=(0,Is.aN)(jm),d=Ee.useCallback((()=>{i.track({category:"signals/social",action:"open_tab",label:"banner/deals"}),a(o.rulesStoryName)}),[o.rulesStoryName,i,a]),u=Ee.useCallback((()=>{s.toggleBanner("inspire")}),[s]);return Ee.useEffect((()=>{s.load()}),[s]),n.inspire?Ee.createElement(Vm,{backgroundImage:l,description:Ee.createElement(Id,null),endImage:c,title:Ee.createElement(Rd,null),onClick:d,onCloseClick:u}):null}));var qm=s.e(7319).then(s.t.bind(s,57319,17));var Km=s.e(490).then(s.t.bind(s,30490,17));const Ym=Ee.memo((e=>{let a=e.onClick;const s=(0,Is.aN)(qm),i=(0,Is.aN)(Km);return Ee.createElement(Vm,{backgroundImage:s,description:Ee.createElement(yd,null),endImage:i,title:Ee.createElement(Sd,null),onClick:a})}));var Xm=s.e(2269).then(s.t.bind(s,57494,17));const Jm=Ee.memo((e=>{let a=e.onClick;const s=(0,Ss.G)(SettingsService),i=(0,Ss.G)(ot.yD),r=(0,Ot.o)(s.store).bannerVisibility,n=(0,Is.aN)(Xm),o=Ee.useCallback((()=>{i.track({category:"signals/social",action:"click_info",label:"banner"}),a(),s.toggleBanner("aboutSignals")}),[i,s,a]),l=Ee.useCallback((()=>{i.track({category:"signals/social",action:"close",label:"banner_info"}),s.toggleBanner("aboutSignals")}),[i,s]);return Ee.useEffect((()=>{s.load()}),[s]),r.aboutSignals?Ee.createElement(Vm,{action:Ee.createElement(Fd,null),backgroundImage:n,description:Ee.createElement(Td,null),title:Ee.createElement(Cd,null),onClick:o,onCloseClick:l}):null}));var Qm="lqcGy48Br-RK",$m="_1uJwNy4uarYE",ep="diCwBgnAHOXZ";const tp=Ee.memo((e=>{var a;let s=e.signalsAsset,i=e.position,r=e.onClick;const n=(0,ct.rF)(s.assetId),o=Ee.useCallback((()=>{r(s,i)}),[s,i,r]);return Ee.createElement(Ht.zx,{horizontalAlign:"start",startIcon:Ee.createElement("img",{alt:"",className:ep,src:null==n?void 0:n.icon}),variant:"secondary",fullWidth:!0,onClick:o},null!==(a=null==n?void 0:n.title)&&void 0!==a?a:s.assetId)})),ap=Ee.memo((e=>{let a=e.onAssetClick;const s=(0,Ss.G)(SignalsAssetsService),i=(0,Ss.G)(ot.yD),r=(0,Ot.o)(s.store).activeAssets,n=Ee.useMemo((()=>{const e=r.slice();return e.sort(((e,a)=>a.signalsCount-e.signalsCount)),e.slice(0,3)}),[r]),o=Ee.useCallback((e=>{i.track({category:"signals/social",action:"change_asset/deal",label:"".concat(e.assetId)}),a(e)}),[i,a]);return Ee.createElement("div",{className:Qm},n.map(((e,a)=>Ee.createElement("div",{className:$m,key:e.assetId},Ee.createElement(tp,{position:a+1,signalsAsset:e,onClick:o})))))})),sp=Ee.memo((e=>{let a=e.variant,s=e.text,i=e.onClick;const r=(0,Ss.G)(SignalsAssetsService),n=(0,kl.K)(r.store,(e=>e.activeAssets.reduce(((e,a)=>(a.signalsCount>0&&(e+=1),e)),0)),[]);return Ee.createElement(Ht.zx,{endText:Ee.createElement(Ht.xv,{variant:"S Compact / Bold"},n),horizontalAlign:"start",variant:a,fullWidth:!0,onClick:i},s)})),ip=Ee.memo((e=>{let a=e.onGoToAssetsClick,s=e.onSelectAssetClick;const i=(0,Ss.G)(SignalsAssetsService),r=(0,Ss.G)(SignalsStatusService),n=(0,kl.K)(r.store,(e=>e.status),[]),o=(0,kl.K)(i.store,(e=>e.activeAssets.reduce(((e,a)=>e+=a.signalsCount),0)),[]);let l=null;return 0===o?l=null:"no-signals-on-assets"===n.type||"assets-locked"===n.type?l=Ee.createElement(ap,{onAssetClick:s}):"wait"===n.type&&(l=Ee.createElement(sp,{text:Ee.createElement(Md,null),variant:"secondary",onClick:a})),l}));var rp="_6KF0ZKO0meE_",np="_2llMZ_zAfStJ";const op=(0,Ee.memo)((()=>{const e=(0,Ss.G)(SignalsFiltersService),a=(0,Ss.G)(ot.yD),s=(0,Ot.o)(e.store).filters,i=(0,Ot.o)(e.load.pending);Ee.useEffect((()=>{e.load()}),[e]);const r=Ee.useCallback((s=>{const i=Object.entries(s),r=i.map((e=>{let a=Os(e,2),s=a[0],i=a[1];return{filterId:Number(s),itemId:Number(i)}}));e.replace(r),i.forEach((e=>{let s=Os(e,2),i=s[0],r=s[1];a.track({category:"signals/social",action:"choose_filter",label:"".concat(i,"/").concat(r)})}))}),[a,e]),n=Ee.useMemo((()=>s.default.reduce(((e,a)=>{var i;const r=null===(i=s.all.find((e=>e.id===a.filterId)))||void 0===i?void 0:i.items.find((e=>e.id===a.itemId));return r&&(e[a.filterId]=r),e}),{})),[s.default,s.all]),o=Ee.useMemo((()=>s.selected.reduce(((e,a)=>{var s;return(null===(s=n[a.filterId])||void 0===s?void 0:s.id)===a.itemId||(e[a.filterId]="".concat(a.itemId)),e}),{})),[n,s.selected]);return Ee.createElement("div",{className:rp},i?Ee.createElement(Ht.aN,null):Ee.createElement(Ht.wn,{selected:o,multiple:!0,onChange:r},s.all.map((e=>{var a;return Ee.createElement(Ht.wn.Select,{key:e.id,name:"".concat(e.id),placeholder:Ee.createElement(Ht.xv,{variant:"S / Regular"},null===(a=n[e.id])||void 0===a?void 0:a.title)},Ee.createElement(Ht.v2.Group,{label:e.title},e.items.map((e=>Ee.createElement(Ht.v2.Item,{description:e.description,icon:e.icon?Ee.createElement("img",{alt:"",className:np,src:e.icon}):null,key:e.id,label:e.title,value:"".concat(e.id)})))))}))))}));var lp=s(44495),cp="_2dcMS9YFAdff",dp="_3B3wkJpEYmGI",up="_3vrgoEPezEIe",mp="_3gGhT2UJFQsk";const pp=Ee.memo((e=>{let a=e.trader,s=e.onClick;const i=Ee.useCallback((()=>{null==s||s(a)}),[a,s]);return Ee.createElement("div",{className:cp,onClick:i},Ee.createElement("div",{className:dp},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"XS / Regular"},a.position)),Ee.createElement("div",{className:up},Ee.createElement(Ht.xv,{overflow:"ellipsis",variant:"XS / Bold"},a.name)),Ee.createElement("div",{className:mp},Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"XS / Regular"},Ee.createElement(Od,null))),Ee.createElement(Ht.xv,{color:"contrast-beta",variant:"XS / Bold"},Ee.createElement(Iu,{value:a.pi})))}));var hp="_2Q_Dz_q6EUv2",vp="_2oyJKjWfvJ2A";const gp=Ee.memo((e=>{let a=e.assetId;const s=(0,ct.rF)(a);return s?Ee.createElement("div",{className:hp},Ee.createElement(hd.XB,{className:vp,size:"middle",url:s.icon}),Ee.createElement(Ht.xv,{overflow:"ellipsis",variant:"M / Bold"},s.title)):null}));var _p="_1Fvlcpm20Oho",fp="_23ZX9gYq4ij3",Ep="uUYwm4VNAk0k",Sp="_3jK1MUmbOTgp",yp="C6HH3Ag0osHS",bp="_1oIwVhpTq1r6",Cp="_35WIRiA7uBa7",Tp="_2H5aHy3M3jm_";const Ap={up:Ee.createElement(Pd,null),down:Ee.createElement(xd,null)},kp=e=>{let a=e.direction;return Ee.createElement(Ht.xv,{as:"span",color:"up"===a?"positive-alpha":"negative-alpha",variant:"S / Bold",inline:!0},Ap[a])},wp=Ee.memo((e=>{let a=e.signal,s=e.position,i=e.trader,r=e.viewMode,n=e.onClick;const o=Ee.useCallback((()=>{n(a,s)}),[a,s,n]);let l;return l="history"===r?Ee.createElement(E.Ji,{day:"numeric",hour:"numeric",minute:"numeric",month:"long",value:1e3*a.expiringAt}):Ee.createElement(um,{startTime:a.expiringAt}),Ee.createElement("div",{className:Be(_p,"history"===r&&fp),onClick:o},Ee.createElement("div",{className:Ep},Ee.createElement("div",{className:Be(Sp,bp)},Ee.createElement(gp,{assetId:a.assetId})),i&&Ee.createElement("div",{className:Be(yp,Cp)},Ee.createElement(pp,{trader:i}))),Ee.createElement("div",{className:Ep},Ee.createElement("div",{className:Be(Sp,Tp)},Ee.createElement(Ht.xv,{as:"span",overflow:"ellipsis",variant:"S / Regular",inline:!0},Ee.createElement(Zd,{direction:Ee.createElement(kp,{direction:a.direction}),time:Ee.createElement(hd.R8,{seconds:a.duration})}))),Ee.createElement("div",{className:yp},Ee.createElement(Ht.xv,{color:"contrast-gamma",variant:"S / Bold"},l))))}));var Np={host:"r22N3KkORwTH",header:"_30Qo7hhyT1uY",headerIcon:"LqDSHLN5Ym8t",footer:"_2_VD63Zs0y12"};const Rp={"no-signals":Ee.createElement(Xd,null),"no-signals-on-assets":Ee.createElement(Xd,null),"required-ftt-mode":Ee.createElement($d,null),"assets-locked":Ee.createElement(tu,null),"to-many-filters":Ee.createElement(su,null)},Ip=()=>Ee.createElement(Vt.leh,{className:Np.icon},Ee.createElement("path",{d:"M4.661 3.301a.936.936 0 0 0-1.376 0 1.07 1.07 0 0 0 0 1.455L4.38 5.844C2.901 7.492 2 9.643 2 12c0 2.592 1.09 4.933 2.839 6.633A1 1 0 1 0 6.233 17.2C4.844 15.85 4 14.015 4 12c0-1.797.672-3.451 1.802-4.745L7.054 8.5c-.914.92-1.497 2.137-1.497 3.5 0 1.563.766 2.936 1.922 3.887a1 1 0 0 0 1.271-1.544c-.767-.632-1.193-1.466-1.193-2.343 0-.765.324-1.498.916-2.092l1.593 1.582a2.002 2.002 0 0 0 2.458 2.44l6.815 6.769a.936.936 0 0 0 1.376 0 1.07 1.07 0 0 0 0-1.455L4.661 3.301Zm15.878 13.824-1.448-1.448A7.113 7.113 0 0 0 20.114 12c0-2.015-.844-3.85-2.232-5.2a1 1 0 1 1 1.394-1.433c1.748 1.7 2.838 4.041 2.838 6.633a9.125 9.125 0 0 1-1.575 5.125Z",fill:"currentColor"}),Ee.createElement("path",{d:"m16.38 12.966 1.492 1.492A4.779 4.779 0 0 0 18.558 12c0-1.563-.767-2.936-1.922-3.887a1 1 0 0 0-1.272 1.544c.767.632 1.194 1.466 1.194 2.343 0 .33-.061.656-.178.966Z",fill:"currentColor"})),Dp={"no-signals":Ee.createElement(Ip,null),"no-signals-on-assets":Ee.createElement(Ip,null),"required-ftt-mode":Ee.createElement(Vt._V1,null),"assets-locked":Ee.createElement(Vt.bpu,null),"to-many-filters":Ee.createElement(Vt.wHY,null)},Op=e=>{let a=e.asset;const s=(0,ct.rF)(a.assetId);return s?Ee.createElement(Qd,{asset:s.title}):null},Lp=Ee.memo((e=>{let a=e.asset;const s=(0,ct.rF)(a.assetId);return s?Ee.createElement(au,{asset:s.title,date:new Date(1e3*s.timeOpen)}):null})),Mp={wait:"unsupported","no-signals":"no_signals/any","no-signals-on-assets":"no_signals/asset_active","required-ftt-mode":"no_signals/project","assets-locked":"no_signals/asset_closed","to-many-filters":"no_signals/check_filters"},Pp=Ee.memo((e=>{let a=e.status,s=e.onGoToAssetsClick,i=e.onResetFiltersClick;const r=(0,Ss.G)(ot.yD),n=Ee.useCallback((()=>{r.track({category:"signals/social",action:"change_asset/deal",label:Mp[a.type]}),s()}),[a.type,r,s]),o=Ee.useCallback((()=>{r.track({category:"signals/social",action:"reset_filters",label:"no_signals"}),i()}),[r,i]),l=Rp[a.type],c=Dp[a.type];let d=null,u=null;switch(a.type){case"no-signals":d=Ee.createElement(Jd,null);break;case"no-signals-on-assets":d=0!==a.assets.length?Ee.createElement(Op,{asset:a.assets[0]}):null,u=Ee.createElement(sp,{text:Ee.createElement(ru,null),variant:"primary",onClick:n});break;case"required-ftt-mode":d=Ee.createElement(eu,null),u=Ee.createElement(sp,{text:Ee.createElement(ru,null),variant:"primary",onClick:n});break;case"assets-locked":d=0!==a.assets.length?Ee.createElement(Lp,{asset:a.assets[0]}):null,u=Ee.createElement(sp,{text:Ee.createElement(ru,null),variant:"primary",onClick:n});break;case"to-many-filters":d=Ee.createElement(iu,null),u=Ee.createElement(Ht.zx,{horizontalAlign:"start",size:"m",variant:"primary",fullWidth:!0,onClick:o},Ee.createElement(nu,null))}return Ee.createElement("div",{className:Np.host},Ee.createElement("div",{className:Np.header},Ee.createElement("div",{className:Np.headerIcon},c),Ee.createElement(Ht.xv,{variant:"M / Bold"},l)),Ee.createElement("div",null,Ee.createElement(Ht.xv,{variant:"S / Regular"},d)),u&&Ee.createElement("div",{className:Np.footer},u))}));var xp="_2EqJAqgqgK9c",Fp="A37ruf2dCSBL",Bp="_1Nnta4mcjgEy",Zp="_38SQmnl3FEES",Up="_3qITHJgfpAcS";const Hp=["top"],Gp=Ee.memo((e=>{let a=e.traders,s=e.onSignalClick,i=e.onGoToAssetsClick,r=e.onResetClick;const n=(0,Ss.G)(SignalsService),o=(0,Ss.G)(SignalsStatusService),l=(0,Ss.G)(ot.yD),c=(0,kl.K)(o.store,(e=>e.status),[]),d=(0,kl.K)(n.store,(e=>e.active.map(((e,a)=>ut(ut({},e),{},{position:a})))),[]),u=(0,lp.useTransition)(d,{keys:e=>e.id,from:e=>({opacity:1,top:84*e.position}),leave:e=>({opacity:0,top:84*e.position}),enter:e=>({opacity:1,top:84*e.position}),update:e=>({opacity:1,top:84*e.position}),config:lp.config.default},[d]),m=Os(u,1)[0],p=84*d.length,h=Ee.useCallback((e=>{l.track({category:"signals/social",action:"open_signal",label:"".concat(e.assetId,"/").concat(e.dealId)}),s(e)}),[l,s]);return Ee.createElement("div",{className:xp},Ee.createElement("div",{className:Fp},Ee.createElement(Ht.xv,{variant:"L / Bold"},Ee.createElement(Bd,null))),0===d.length&&"wait"!==c.type&&Ee.createElement("div",{className:Bp},Ee.createElement(Pp,{status:c,onGoToAssetsClick:i,onResetFiltersClick:r})),Ee.createElement("div",{className:Zp,style:{height:"".concat(p,"px")}},m(((e,s)=>{let i=e.top,r=rl(e,Hp);return Ee.createElement(lp.animated.div,{className:Up,key:s.id,style:ut(ut({transform:i.to((e=>"translateY(".concat(e,"px)")))},r),{},{zIndex:s.position})},Ee.createElement(wp,{position:s.position,signal:s,trader:a[s.userId],viewMode:"active",onClick:h}))}))))}));var Vp="ew0RY2S6P00r",Wp="nBqQAIYkaycu",jp="_1Vrtj73qXDy7",zp="_1enBrIBa51UY",qp="_3GlRKIK5cYhQ";const Kp=(0,Ee.memo)((e=>{let a=e.onLeaderboardClick,s=e.onLearMoreClick,i=e.onSignalClick,r=e.onGoToAssetsClick,n=e.onSelectAssetClick;const o=(0,Ss.G)(SignalsService),l=(0,Ss.G)(SignalsAssetsService),c=(0,Ss.G)(SignalsStatusService),d=(0,Ss.G)(SignalsFiltersService),u=(0,Ss.G)(LeaderBoardService),m=(0,Ss.G)(ot.yD),p=(0,Ot.o)(o.load.pending),h=(0,Ot.o)(d.load.pending),v=(0,Ot.o)(d.replace.pending),g=(0,Ot.o)(d.reset.pending);(0,hd.ZG)(o.watcher),(0,hd.ZG)(c.watcher),(0,hd.ZG)(l.watcher);const _=Ee.useMemo((()=>p||h||v||g),[p,h,v,g]),f=(0,kl.K)(u.store,(e=>e.traders.reduce(((e,a)=>(e[a.userId]=a,e)),{})),[]),E=Ee.useCallback((e=>{o.select(e),i()}),[o,i]),S=Ee.useCallback((()=>{d.reset()}),[d]);Ee.useEffect((()=>{o.load(),l.load(),u.load()}),[m,o,l,u]);const y=Ee.useCallback((()=>{m.track({category:"signals/social",action:"open_leaderboard",label:"tab"}),a()}),[m,a]);return Ee.createElement("div",{className:Vp},Ee.createElement("div",{className:Wp},Ee.createElement(op,null)),Ee.createElement("div",{className:jp},Ee.createElement(Ym,{onClick:y})),Ee.createElement("div",{className:jp},Ee.createElement(Jm,{onClick:s})),Ee.createElement("div",{className:qp},_?Ee.createElement("div",{className:zp},Ee.createElement(Ht.aN,null)):Ee.createElement(Gp,{traders:f,onGoToAssetsClick:r,onResetClick:S,onSignalClick:E})),Ee.createElement(ip,{onGoToAssetsClick:r,onSelectAssetClick:n}))}));var Yp="_29VQxLklolZO",Xp="Qf0Xk2FRGEwq";const Jp=["basePlacement","TransitionProps"],Qp=Ee.memo((e=>{let a=e.anchorContainer,s=e.placement,i=void 0===s?"right":s,r=e.onClick;const n=(0,Ss.G)(ot.yD);return Ee.useEffect((()=>()=>{n.track({category:"signals/social",action:"close",label:"hint"})}),[n]),Ee.createElement(Ht.rD,{anchorEl:a,disablePortal:!0,distance:2,fitSizeTo:"content",placement:i,style:{zIndex:102},arrow:!0,open:!0,tethered:!0,transition:!0},(e=>{let a=e.basePlacement,s=(e.TransitionProps,rl(e,Jp));return Ee.createElement(Ht._v,ut(ut({},s),{},{color:"accent",placement:a,withLimitWidth:!0}),Ee.createElement("div",{className:Yp},Ee.createElement(Ht.xv,{variant:"M / Regular"},Ee.createElement(ou,null)),Ee.createElement("div",{className:Xp},Ee.createElement(Ht.zx,{color:"neutral",variant:"primary",onClick:r},Ee.createElement(lu,null)))))}))}));var $p=s(92401),eh=s(79151);const th=(0,ss.WV)({deeplink_action:(0,ss.t$)("copy-trading"),screen:(0,ss.EJ)((0,ss.t$)("leaderboard")).optional()});class SignalsAssetsTransformer{static parseAll(e){return e.map((e=>SignalsAssetsTransformer.parseSignal(e)))}static parseSignal(e){return{assetId:e.asset_id,signalsCount:e.signals_count}}}class SignalsAssetsRepository{findAll(){return Promise.resolve([])}subscribeOnAssetsUpdate(e){null===this.disposer&&(this.disposer=di.W.subscribe.copyTradingSignalsActiveAssetsChanged((a=>{a.forEach((a=>e(SignalsAssetsTransformer.parseAll(a.assets))))})))}unsubscribeOnAssetsUpdate(){var e;null===(e=this.disposer)||void 0===e||e.call(this),this.disposer=null}constructor(){this.disposer=null}}const ah={inspire:!0,aboutSignals:!0,howToUse:!0};class BannerVisibilityRepository{update(e){return this.storage.set("bannerVisibility",e),Promise.resolve()}find(){var e;const a=null!==(e=this.storage.get("bannerVisibility"))&&void 0!==e?e:ah;var s,i,r;return Promise.resolve({inspire:null!==(s=a.inspire)&&void 0!==s?s:ah.inspire,aboutSignals:null!==(i=a.aboutSignals)&&void 0!==i?i:ah.aboutSignals,howToUse:null!==(r=a.howToUse)&&void 0!==r?r:ah.howToUse})}constructor(){this.storage=new Js._({namespace:"@feature/copy-trading/banners",backend:new Qs.u})}}class LeaderBoardRepository{findAll(){return Promise.resolve([])}onLeaderBoardUpdate(e){di.W.subscribe.copyTradingLeaderboardUpdated((a=>{let s=(0,ci.Z)(a,1)[0];return e(class LeaderboardTransformer{static parse(e){return e.positions.map((e=>({userId:e.user_id,position:e.position,name:e.name,country:e.country,pi:e.pi,avatar:e.avatar,isYou:!1})))}}.parse(s))}))}}class SettingsRepository{update(e){var a=this;return(0,ie.Z)((function*(){return new Promise((s=>{setTimeout((()=>{a.settings=e,s()}),1e3)}))}))()}find(){return new Promise((e=>{setTimeout((()=>{e(this.settings)}),1e3)}))}constructor(){this.settings={isLeaderBoardPositionPublic:!1}}}class FiltersTransformer{static parseAll(e){return e.map((e=>({id:e.id,title:e.title,items:e.items.map((e=>({id:e.id,title:e.title,description:e.description,icon:e.icon})))})))}static safeParseSelected(e,a,s){const i=FiltersTransformer.parseDefault(a);if(!s)return i;const r=e.reduce(((e,a)=>(e[a.id]=a.items.map((e=>e.id)),e)),{});return s.some((e=>!r[e.filterId]||!r[e.filterId].includes(e.itemId)))?i:s}static parseDefault(e){return e.map((e=>({filterId:e.filter_id,itemId:e.item_id})))}}class SignalsFiltersRepository{update(e){var a=this;return(0,ie.Z)((function*(){yield di.W.request.copyTradingSignalsFiltersUpdate({filters:e.map((e=>({filter_id:e.filterId,item_id:e.itemId})))}),a.storage.set("selectedFilters",e)}))()}find(){var e=this;return(0,ie.Z)((function*(){const a=(0,ci.Z)(yield di.W.request.copyTradingSignalsFiltersGet(),1)[0];if(!a)return null;const s=FiltersTransformer.safeParseSelected(a.available_filters,a.default_filters,e.storage.get("selectedFilters"));return yield e.update(s),{all:FiltersTransformer.parseAll(a.available_filters),default:FiltersTransformer.parseDefault(a.default_filters),selected:s}}))()}subscribeOnFiltersUpdate(e){let a=0;di.W.subscribe.copyTradingLeaderboardUpdated((()=>{a>0&&this.find().then((a=>a&&e(a))),a+=1}))}constructor(){this.storage=new Js._({namespace:"@feature/copy-trading/filters",backend:new Qs.u})}}class SignalsTransformer{static parseAll(e){return e.map((e=>SignalsTransformer.parseSignal(e)))}static parseSignal(e){return{id:"".concat(e.id),dealId:e.deal_id,assetId:e.asset_id,direction:e.dir,duration:e.duration,expiringAt:e.date_expire,startingAt:e.date_start,userId:e.user_id}}}class SignalsRepository{findAll(){return(0,ie.Z)((function*(){return Promise.resolve([])}))()}onSignalsUpdated(e){di.W.request.copyTradingSignalsFiltersUpdate.subscribe((a=>{a.forEach((a=>e(SignalsTransformer.parseAll(a.signals))))}))}onSignalsAdded(e){di.W.subscribe.copyTradingSignalsAdded((a=>{a.forEach((a=>e(SignalsTransformer.parseAll(a.signals))))}))}}class StoriesRepository{find(){return Promise.resolve({rulesStoryName:"copy_trading_rules"})}}class TipsCompletedFlowsRepository{findAll(){var e;return Promise.resolve(null!==(e=this.storage.get("completedFlows"))&&void 0!==e?e:[])}save(e){var a;return this.storage.set("completedFlows",(null!==(a=this.storage.get("completedFlows"))&&void 0!==a?a:[]).concat(e)),Promise.resolve()}constructor(){this.storage=new Js._({namespace:"@feature/copy-trading/completed-tips-flows",backend:new Qs.u})}}const sh=(0,hs.Z)(),ih=(0,gt.v)({name:"CopyTrading",dependsOn:[rt.u$,nt.e8,ot.F0,Qt.EA,Na.G,ps.Kg,sn,ct.M7,lt.Ul],optionalDependsOn:[Jt.Q],services(e,a){let s=e.user,i=e.timeService,r=e.fttAssetsService,n=a.signalsAssetsRepository,o=a.bannerVisibilityRepository,l=a.settingsRepository,c=a.leaderBoardRepository,d=a.signalsRepository,u=a.signalsFiltersRepository,m=a.storiesRepository,p=a.tipsCompletedFlowsRepository;const h=new SignalsAssetsService(n,r),v=new SignalsService(d,h,i,r);return{signalsStatusService:new SignalsStatusService(h,v,r),signalsAssetsService:h,settingsService:new SettingsService(l,o,m),leaderBoardService:new LeaderBoardService(c,{userId:s.getState().user.id}),signalsService:v,signalsFiltersService:new SignalsFiltersService(u),tipsService:new TipsService(p)}}},{repositories:()=>({signalsAssetsRepository:new SignalsAssetsRepository,bannerVisibilityRepository:new BannerVisibilityRepository,settingsRepository:new SettingsRepository,leaderBoardRepository:new LeaderBoardRepository,signalsRepository:new SignalsRepository,signalsFiltersRepository:new SignalsFiltersRepository,storiesRepository:new StoriesRepository,tipsCompletedFlowsRepository:new TipsCompletedFlowsRepository})}),rh=(0,pd.k)(ih,(e=>{let a=e.sidebarService;const s=Ee.useMemo((()=>(0,st.Sc)(ft.NAVIGATION_SERVICE)),[]),i=Ee.useCallback((()=>{a.goTo(as.KO.COPY_TRADING_LEADERBOARD)}),[a]),r=Ee.useCallback((()=>{a.goTo(as.KO.COPY_TRADING_SIGNAL_DETAILS)}),[a]),n=Ee.useCallback((e=>{var s;null===(s=(0,st.Sc)(ft.ASSET_MENU_SERVICE))||void 0===s||s.handleSelect(e.assetId,"ftt"),a.goTo(as.KO.TRADING_SIGNALS)}),[a]),o=Ee.useCallback((()=>{a.goTo(as.KO.COPY_TRADING_ASSETS)}),[a]),l=Ee.useCallback((()=>{var e;null==s||null===(e=s.ovlPlusNavigation)||void 0===e||e.goToHelpCenter(Kr.d0)}),[s]);return Ee.createElement(Kp,{onLeaderboardClick:i,onSignalClick:r,onLearMoreClick:l,onSelectAssetClick:n,onGoToAssetsClick:o})}));function nh(e,a){let s=null;const i=(0,Ee.useRef)(null),r=(0,Ee.useRef)(null),n=(0,Ee.useRef)(null),o=(0,Ee.useRef)(),l=()=>{let s=null;r.current?s=r.current:i.current?s=i.current:a instanceof HTMLElement&&(s=a),n.current!==s&&(o.current&&(o.current(),o.current=null),n.current=s,s&&(o.current=e(s)))};!a||a instanceof HTMLElement||(s=a),(0,Ee.useEffect)((()=>{s&&(i.current=s.current),l()}),[s,null==s?void 0:s.current,a]);return(0,Ee.useCallback)((e=>{r.current=e,l()}),[])}ih.use((0,jr.ub)(as.KO.COPY_TRADING_SIGNAL_DETAILS),((e,a)=>{let s=a.layout,i=a.tradingSignals,r=a.sidebarService;const n=(0,Ee.useCallback)((e=>{i.setSignalData({advice:e.direction,adviceTime:e.duration,actualUntil:e.expiringAt,assetId:e.assetId});const a=s.getState(),n=a.isDesktop,o=a.isActiveOverlay;n||o||r.close()}),[s,r,i]),o=(0,Ee.useCallback)((()=>{r.goTo(as.KO.COPY_TRADING_LEADERBOARD)}),[r]);return Ee.createElement(Om,{onUseSignalClick:n,onGoToLeaderboardClick:o})})).use((0,jr.ub)(as.KO.COPY_TRADING_LEADERBOARD),(()=>Ee.createElement(Ku,null))).use((0,jr.zt)(as.KO.COPY_TRADING_LEADERBOARD),(()=>Ee.createElement(Ju,null))).use((0,jr.nW)(as.KO.COPY_TRADING_LEADERBOARD),(()=>Ee.createElement(wd,null))).use((0,jr.ub)(as.KO.COPY_TRADING_ASSETS),((e,a)=>{let s=a.sidebarService;const i=Ee.useCallback((e=>{var a;null===(a=(0,st.Sc)(ft.ASSET_MENU_SERVICE))||void 0===a||a.handleSelect(e.assetId,"ftt"),s.goTo(as.KO.TRADING_SIGNALS)}),[s]);return Ee.createElement(fu,{onAssetClick:i})})).use((0,jr.Jz)(as.KO.COPY_TRADING_ASSETS),(e=>Ee.createElement(Eu,{className:e.className}))).use(sh,((e,a)=>{let s=a.sidebarService,i=a.tradingSignalsCategories,r=a.storiesNavigation;const n=(0,Ee.useCallback)((e=>{r?r.goToStoryByName(e):(i.select(eh.hJ),s.goTo(as.KO.TRADING_SIGNALS))}),[r,i,s]);return Ee.createElement(zm,{onClick:n})})).use($p.R,((e,a)=>{let s=e.containerRef,i=a.tipsService,r=a.tradingSignalsCategories,n=a.sidebarService,o=a.layout;const l=(0,Ot.o)(i.store).visibility,c=(0,Ot.o)(o.store).overlay,d=Ee.useMemo((()=>Object.values(c).every((e=>!e))),[c]),u=Ee.useCallback((()=>{i.hide("whereLocated"),r.select(eh.hJ),n.goTo(as.KO.TRADING_SIGNALS)}),[i,r,n]);return l.whereLocated&&d?Ee.createElement(Ee.Fragment,null,Ee.createElement(Al(),{maxWidth:ds.j$.BREAKPOINT_768},Ee.createElement(Qp,{anchorContainer:s.current,placement:"bottom",onClick:u})),Ee.createElement(Al(),{minWidth:ds.j$.BREAKPOINT_769},Ee.createElement(Qp,{anchorContainer:s.current,placement:"right",onClick:u}))):null})).onStart((e=>{let a=e.tipsService,s=e.signalsAssetsService,i=e.settingsService,r=e.tradingSignals,n=e.tradingSignalsCategories,o=e.tradeManagerServiceList.tradeManagerService,c=e.commandService,d=e.sidebarService;i.load(),a.load(),i.subscribe((e=>{e.bannerVisibility.aboutSignals||r.closeContentInfo()})),c.registerCommand(th.guard,(e=>{if(e.screen&&"leaderboard"===e.screen)d.goTo(as.KO.COPY_TRADING_LEADERBOARD)})),c.registerCommand(an.guard,(e=>{e.tab===eh.hJ&&a.startFlow({type:"deepLink"})})),n.add({id:eh.hJ,title:"Social",content:Ee.createElement(rh,{sidebarService:d})}),n.subscribe(((e,a)=>{e.selectedCategory!==a.selectedCategory&&e.selectedCategory===eh.hJ&&(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"signals/social",eventAction:"open_tab",eventLabel:"tab"})})),(0,l.reaction)((()=>o.tradeFrames.map((e=>({assetId:e.settings.pairId,mechanic:(0,Ds.B5)(e.settings.project)})))),(e=>{s.updateSelectedAssets(e.filter((e=>"ftt"===e.mechanic)))}),{fireImmediately:!0})})).enable((e=>e.politics.isEnabled(eh.Yx)));const oh="IvdbHq0g",lh="GX56nafG";var ch;!function(e){e[e.large=310]="large",e[e.small=150]="small",e[e.compact=110]="compact"}(ch||(ch={}));const dh=e=>{let a=e.onReset;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=e.onResize,s=(0,Ee.useRef)(void 0);s.current=a;const i=(0,Ee.useRef)(),r=(0,ci.Z)((0,Ee.useState)(null),2),n=r[0],o=r[1],l=(0,Ee.useRef)(!1);(0,Ee.useEffect)((()=>()=>{l.current=!0}),[]);const c=(0,Ee.useRef)({width:void 0}),d=nh((e=>(i.current||(i.current=new ResizeObserver((e=>{if(!Array.isArray(e))return;if(!e.length)return;const a=e[0],i=Math.round(a.contentRect.width);c.current.width!==i&&(s.current?s.current(i):(c.current.width=i,l.current||o(i)))}))),i.current.observe(e),()=>{i.current&&i.current.unobserve(e)})),e.ref);return(0,Ee.useMemo)((()=>({ref:d,width:n})),[d,n])}(),i=s.ref,r=s.width,n=(0,ci.Z)(Ee.useState(null),2),o=n[0],l=n[1];Ee.useEffect((()=>{r&&l(function(e){let a="";return e>=ch.large&&(a="large"),e<ch.large&&e>=ch.small&&(a="small"),e<=ch.small&&(a="compact"),a}(r))}),[r]);const c="An unknown error occurred";if("compact"===o){const e=()=>Ee.createElement(Ht.Ei,{color:"warning",onClick:a,icon:Ee.createElement(Vt.az_,null)}),s=e=>{var a=e.basePlacement,s=(0,Gt.Z)(e,["basePlacement"]);return Ee.createElement(Ht._v,Object.assign({placement:a},s),Ee.createElement("span",null,c))},i={zIndex:999};return Ee.createElement(Ht.u,{style:i,arrow:!0,content:s,children:e})}const d="large"===o,u="small"===o,m="Retry";return Ee.createElement("div",{className:oh,ref:i},Ee.createElement("span",{className:lh},c),d&&Ee.createElement(Ht.zx,{dataTest:"retry_button_error",onClick:a},m),u&&Ee.createElement(Ht.zx,{dataTest:"retry_button_error",onClick:a,size:"s"},m))};var uh=s(27544),mh=s(474),ph=s(66257),hh=s(6536),vh=s(19447),gh=s(98447),_h=s(93332),fh=s(35295),Eh=s(30729),Sh=s(13424),yh=s(37865);class Status_WebSocket_WebSocket{onStatusTestDriveChange(e){this.listeners[$i.U3.STATUS_TEST_DRIVE_CHANGED]=e}onStatusStateChange(e){this.listeners[$i.U3.STATUS_STATE_CHANGED]=e}onStatusChange(e){this.listeners[$i.U3.STATUS_CHANGED]=e}subscribe(){this.connect.onPush(((e,a)=>{e===$i.U3.STATUS_TEST_DRIVE_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$i.U3.STATUS_TEST_DRIVE_CHANGED](e)})),e===$i.U3.STATUS_STATE_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$i.U3.STATUS_STATE_CHANGED](e)})),e===$i.U3.STATUS_CHANGED&&Array.isArray(a)&&a.forEach((e=>{this.listeners[$i.U3.STATUS_CHANGED](e)}))})),this.connect.subscribeEventList([$i.WJ.STATUS_TEST_DRIVE_CHANGED,$i.WJ.STATUS_STATE_CHANGED,$i.WJ.STATUS_CHANGED])}constructor(e){this.listeners={[$i.U3.STATUS_CHANGED]:e=>{},[$i.U3.STATUS_STATE_CHANGED]:e=>{},[$i.U3.STATUS_TEST_DRIVE_CHANGED]:e=>{}},this.connect=e}}class StatusRepository{find(e){throw new Error("Method not implemented.")}findAll(){throw new Error("Method not implemented.")}constructor(){this.socket=new Status_WebSocket_WebSocket(Xe.Z.add()),this.subscribe=(e,a,s)=>{this.socket.subscribe(),this.socket.onStatusStateChange(e),this.socket.onStatusChange(a),this.socket.onStatusTestDriveChange(s)}}}const bh="traders_way_soft_currency",Ch={host:"MJc0d5IE","host_profile-avatar":"KJq97NFO","host_marketplace-balance":"fCk6X59n","host_marketplace-feature":"ua3J75PH","host_marketplace-slide":"FTtWD_np",icon:"uKPjAAJ5",amount:"t60XkI0Z"},Th=e=>{let a=e.className,s=e.style,i=e.children,r=e.handleClick;const n=(0,Te.L)();return Ee.createElement("div",{className:Ze()(Ch.host,a&&Ch["host_".concat(a)]),style:s,onClick:r},Ee.createElement(Vt.qLk,{className:Ch.icon}),Ee.createElement("span",{className:Ch.amount,dir:n},i))},Ah=(0,lp.animated)(Th);var kh;let wh=(kh=class RemainDays extends Ee.Component{get daysLeft(){return Math.floor((1e3*this.props.endingAt-Date.now())/864e5)}renderTimer(e){const a=24*Number(e.days)+Number(e.hours);return Ee.createElement("span",null,"".concat(a).padStart(2,"0"),":",e.minutes,":",e.seconds)}render(){const e=this.props,a=e.endingAt,s=e.minDays,i=e.timeService,r=e.className;return Ee.createElement("span",{className:Ze()("tra-way-c-remain-days",r)},this.daysLeft>s?Ee.createElement(Ht.Wo,{serverTime:i.serverTime,startTime:a||0,timeFormat:"d:h:m:s"}):Ee.createElement(Ee.Fragment,null,Ee.createElement(Nt._,{id:"pro_remain_time",defaultMessage:"Осталось: {time}",values:{time:Ee.createElement(yr.Qj,null,(()=>Ee.createElement(Ht.Wo,{serverTime:i.serverTime,startTime:a||0,render:this.renderTimer})))}})))}},kh.defaultProps={minDays:1},kh);(0,Ne.gn)([l.computed],wh.prototype,"daysLeft",null),wh=(0,Ne.gn)([Ie.observer],wh);const Nh=e=>Ee.createElement("span",{className:Ze()("tra-way-c-tag","tra-way-c-tag_type_".concat(e.type||"default"),e.isAnimatable&&"tra-way-c-tag_is_animatable",e.className),style:e.style},e.children),Rh=e=>{let a=e.children,s=e.size,i=e.className;return Ee.createElement("div",{className:Ze()("tra-way-m-c-modal","tra-way-m-c-modal_size_".concat(s||"content"),i)},a)};Rh.Block=e=>{let a=e.children,s=e.overflow,i=e.type,r=e.className;return Ee.createElement(Ht.Xs,{className:Ze()("tra-way-m-c-modal__block-scroll"),style:{overflowY:s}},Ee.createElement("div",{className:Ze()("tra-way-m-c-modal__block-content",i&&"tra-way-m-c-modal__block-content_".concat(i),r)},a))},Rh.Close=e=>{let a=e.className,s=e.onClick;return Ee.createElement("div",{className:"tra-way-m-c-modal__close-container"},Ee.createElement(Ht.Xd,{className:Ze()("tra-way-m-c-modal__close",a),onClick:s,"data-test":"tra-way-m-c-modal-close"},Ee.createElement(Vt.bMz,null)))};const Ih=e=>{let a=e.name,s=e.description,i=e.iconUrl,r=e.className,n=e.timerElement;return Ee.createElement("header",{className:Ze()("tra-way-m-status-c-header",r)},Ee.createElement("img",{src:i,alt:"",className:"tra-way-m-status-c-header__icon"}),null==n?void 0:n({className:"tra-way-m-status-c-header__timer"}),Ee.createElement("h2",{className:"tra-way-m-status-c-header__name"},a),Ee.createElement("span",{className:"tra-way-m-status-c-header__description"},s))},Dh=(0,Ee.memo)((e=>{const a=e.item,s=e.position,i=e.onClick,r=e.className,n=(0,ci.Z)((0,Ee.useState)(!0),2),o=n[0],l=n[1],c=(0,Ee.useCallback)((()=>{l((()=>!o))}),[o]);return(0,Ee.useEffect)((()=>{i&&i(a,s,o)}),[o,i,a,s]),Ee.createElement("div",{className:Ze()("tra-way-m-status-c-benefit",r),role:"button",onClick:c},Ee.createElement("img",{src:a.iconUrl,alt:"",className:"tra-way-m-status-c-benefit__icon"}),Ee.createElement(Vt.BDo,{className:Ze()("tra-way-m-status-c-benefit__arrow",o&&"tra-way-m-status-c-benefit__arrow_collapsed")}),Ee.createElement("div",{className:"tra-way-m-status-c-benefit__content"},Ee.createElement("h4",{className:"tra-way-m-status-c-benefit__name"},Ee.createElement(Nt._,Object.assign({},a.name))),Ee.createElement("div",{className:"tra-way-m-status-c-benefit__description-short"},Ee.createElement("span",null,Ee.createElement(Nt._,Object.assign({},a.descriptionShort)))),Ee.createElement("div",{className:Ze()("tra-way-m-status-c-benefit__description",o&&"tra-way-m-status-c-benefit__description_collapsed")},Ee.createElement(Wn.Z,{in:!o,timeout:300,classNames:"tra-way-m-status-c-benefit-slide",unmountOnExit:!0},Ee.createElement("span",{className:"tra-way-m-status-c-benefit__description-text"},Ee.createElement(Nt._,Object.assign({},a.description)))))))}));Dh.displayName="Benefit";const Oh=(0,ke.zt)((e=>{const a=e.className,s=e.onClose,i=e.statusId,r=e.timeService,n=e.statusServiceState,o=n.current,l=n.items,c=n.benefits,d=i===o.id?o:l[i];function u(e,a,s){s||(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"profile/status",eventAction:"open",eventLabel:"".concat(i,"_").concat(a)})}const m=(0,Ee.useCallback)((e=>d.endingAt?Ee.createElement(wh,{endingAt:d.endingAt,timeService:r,className:e.className}):null),[d.endingAt,r]);(0,Ee.useEffect)((()=>()=>{(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"profile",eventAction:"close",eventLabel:"status"})}),[]);const p=(0,Ee.useMemo)((()=>c[d.id].map(((e,a)=>Ee.createElement(Dh,{key:a,item:e,position:a,className:"status-m__benefit",onClick:u})))),[c,u,d.id]);return Ee.createElement(Rh,{className:Ze()("status-m",a)},Ee.createElement(Rh.Close,{onClick:s}),Ee.createElement(Rh.Block,{className:"status-m__block",overflow:"scroll",type:"centered"},Ee.createElement(Ih,{name:Ee.createElement(Nt._,Object.assign({},d.name)),description:Ee.createElement(Nt._,Object.assign({},d.description)),iconUrl:d.iconUrl,className:"status-m__header",timerElement:m}),Ee.createElement("main",{className:"status-m__main"},p)),Ee.createElement("div",{className:"status-m__footer-button"},Ee.createElement(Ht.zx,{onClick:function(){(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"profile/status",eventAction:"open",eventLabel:"all_statuses"}),s(),window.open("/statuses","_blank")},color:"accent",size:"l",fullWidth:!0,dataTest:"status-m-show-all"},Ee.createElement(Nt._,{id:"pro_show_status_all",defaultMessage:"Show all statuses"}))))}),{services:[Oe.OY]}),Lh=(0,Ie.observer)((e=>{let a=e.messageCount,s=e.status,i=e.endingAt,r=e.className,n=e.timeService,o=e.children;return Ee.createElement("div",{className:Ze()("status-w-tw",r),"data-test":"status-w-tw"},Ee.createElement("div",{className:"status-w-tw__top"},Ee.createElement("div",{className:"status-w-tw__level"},Ee.createElement("img",{src:s.iconUrl,alt:"",className:"status-w-tw__icon"}),Ee.createElement("div",{className:"status-w-tw__title"},s.id)),0===a&&"starter"!==s.id&&Ee.createElement(wh,{endingAt:i,timeService:n,className:"status-w-tw__timer"})),0!==a&&Ee.createElement(Nh,{className:"status-w-tw__messages",type:"accent",isAnimatable:!0},a),o)})),Mh=e=>{let a=e.x,s=void 0===a?0:a,i=e.y,r=void 0===i?0:i,n=e.rotation,o=void 0===n?0:n,l=e.scale,c=void 0===l?1:l,d=e.timing,u=void 0===d?150:d,m=e.springConfig,p=void 0===m?{tension:300,friction:10}:m;const h=(0,ci.Z)(Ee.useState(!1),2),v=h[0],g=h[1],_=(0,lp.useSpring)({transform:v?"translate(".concat(s,"px, ").concat(r,"px)\n         rotate(").concat(o,"deg)\n         scale(").concat(c,")"):"translate(0px, 0px)\n         rotate(0deg)\n         scale(1)",config:p});Ee.useEffect((()=>{if(!v)return;const e=window.setTimeout((()=>{g(!1)}),u);return()=>{window.clearTimeout(e)}}),[v]);return[_,Ee.useCallback((()=>{g(!0)}),[])]},Ph=(0,Ie.observer)((e=>{let a=e.statusTestDrive,s=e.timeService;const i={timing:100,springConfig:{tension:500,friction:40}},r=(0,ci.Z)(Mh((0,re.Z)({y:1},i)),2),n=r[0],o=r[1],l=(0,ci.Z)(Mh((0,re.Z)({y:2},i)),2),c=l[0],d=l[1];return Ee.createElement(lp.animated.div,{className:"tra-way-t-drive",style:n,onMouseEnter:function(){o(),d()}},Ee.createElement("div",{className:"tra-way-t-drive__content"},Ee.createElement(lp.animated.div,{style:c,className:"tra-way-t-drive__icon"},Ee.createElement("img",{src:a.iconUrl,alt:""})),Ee.createElement("div",{className:"tra-way-t-drive__text-bl"},Ee.createElement("div",{className:"tra-way-t-drive__timer"},Ee.createElement(Ht.Wo,{serverTime:s.serverTime,startTime:a.endingAt||0,timeFormat:"d:h:m:s"})),Ee.createElement("div",{className:"tra-way-t-drive__text"},Ee.createElement(Nt._,{id:"tw-test-drive",defaultMessage:"{value} status for a limited time",values:{value:(u=a.id,u.charAt(0).toUpperCase()+u.slice(1))}})))));var u})),xh="c6O7FQYJ",Fh="l7hCRaJz",Bh=e=>{let a=e.amount,s=e.className;const i=(0,Ar.V)(),r=(0,Te.L)();return Ee.createElement(Ht.u,{triggerOnHover:!1,triggerOnTap:!0,placement:i?"bottom-end":"bottom-start",arrow:!0,disablePortal:!0,content:e=>{var a=e.basePlacement,s=(0,Gt.Z)(e,["basePlacement"]);return Ee.createElement(Ht._v,Object.assign({dir:r,placement:a,color:"accent",classNameContent:Fh},s),Ee.createElement(Ht.xv,{variant:"S Compact / Regular",color:"accent-on-accent"},Ee.createElement(Nt._,{id:"marketplace_tooltip_soft_currency",defaultMessage:"These are your experience points (XP). You can earn them by trading on a live account in FTT and Forex modes. In the Market section, you can spend XP to buy trading tools."})))}},(e=>{var i=e.ref,r=(0,Gt.Z)(e,["ref"]);return Ee.createElement("div",Object.assign({ref:i},r,{className:(0,Ht.AK)(xh,s)}),Ee.createElement(Th,{className:"marketplace-balance"},String(a).replace(/\B(?=(\d{3})+(?!\d))/g,",")))}))};function Zh(){return s.e(1502).then(s.bind(s,74780)).then((e=>e.STATUSES))}class BenefitTransformer{static parse(e){return{name:e.name,iconUrl:e.icon_url,description:e.description,descriptionShort:e.description_short}}}class StatusTransformer{static parse(e,a){const s=StatusTransformer.DEFAULT_META;return a[e.name]&&(s.name=a[e.name].name,s.description=a[e.name].description,s.color=a[e.name].color,s.iconUrl=a[e.name].iconUrl),(0,re.Z)({id:e.name,endingAt:e.date_end||e.expiration_date},s)}}StatusTransformer.DEFAULT_META={name:{id:"status_name"},description:{id:"status_description"},color:"#000",iconUrl:""};class StatusService extends vt.t{load(e,a,s){this.update({items:a.reduce(((e,a)=>Object.assign(e,{[a.id]:{id:a.id,name:a.name,description:a.description,color:a.color,iconUrl:a.icon_url}})),{}),benefits:a.reduce(((e,a)=>Object.assign(e,{[a.id]:a.benefits.map(BenefitTransformer.parse)})),{})});const i=this.getState().items;this.updateCurrent(e,i),this.updateTestDrive(s,i)}init(){var e=this;return(0,ie.Z)((function*(){const a=(0,st.Sc)(ft.APP_SERVICE);if(!(null==a?void 0:a.serviceLevels))throw new Error;const s=a.serviceLevels,i=s.level,r=s.test_drive,n=a.getPolitic(bh)?e.handleStatusDateChange.bind(e):e.handleStatusChange.bind(e);e.statusRepository.subscribe(e.handleChangeState.bind(e),n,e.handleChangeTestDrive.bind(e));const o=r?{name:r.name,date_end:r.expiration_date}:{name:null,date_end:null},l=yield Zh();e.load({name:(null==i?void 0:i.name)||"",date_end:(null==i?void 0:i.expiration_date)||void 0},l,o)}))()}updateCurrent(e,a){this.update({current:StatusTransformer.parse(e,a)})}updateTestDrive(e,a){this.update({testDrive:null===e.name?null:StatusTransformer.parse(e,a)})}handleChangeState(e){const a=this.getState().items;this.updateCurrent(e.service_level||e,a)}handleStatusDateChange(e){const a=this.getState().items;Object.keys(a).length&&this.updateCurrent(e,a)}handleChangeTestDrive(e){const a=this.getState().items;this.updateTestDrive(e,a)}handleStatusChange(e){let a=e.level;const s=this.getState().testDrive,i=s?{name:s.id,date_end:s.endingAt}:{name:null,date_end:null};Zh().then((e=>this.load({name:a},e,i))).catch((()=>{}))}constructor(e){super({current:{id:"",name:{id:"pro_status_advanced_name"},description:{id:"pro_status_advanced_description"},color:"",iconUrl:""},testDrive:null,items:{},benefits:{}}),this.statusRepository=e,this.init()}}const Uh=(0,gt.v)({name:"SoftCurrency",dependsOn:[rt.u$,Na.G,Xi.im,Wr.UE,Qt.EA,xt.x],optionalDependsOn:[ur],services:(e,a)=>({status:new StatusService(a.status),sidebarService:(0,uh.T)(ft.SIDEBAR_SERVICE,Sh.G)})},{repositories:()=>({status:new StatusRepository})});Uh.use(hh.marketPlaceUpperSlot,((e,a)=>{const s=a.commonLegacyServiceList.accountService.getAccountByType(ph.Q.SOFT);return s&&Ee.createElement(Bh,{amount:(null==s?void 0:s.amount)||0})})).use(vh.N8,((e,a)=>{let s=a.sidebarService;const i=a.commonLegacyServiceList.accountService.getAccountByType(ph.Q.SOFT);return i&&Ee.createElement(Ah,{className:"profile-avatar",handleClick:function(){(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"marketplace",eventAction:"marketplace_open",eventLabel:"from_header"}),s.toggle(as.KO.MARKET_PLACE_CATEGORIES)}},(r=(null==i?void 0:i.amount)||0)<1e3?String(r):r<1e4?String(r).replace(/\B(?=(\d{3})+(?!\d))/g,"."):r<1e6?"".concat(Math.floor(r/1e3),"K"):"".concat(Math.floor(r/1e6),"M"));var r})).use(gh.x,(e=>{const a=e.feature.paymentTypes.find((e=>e.currency===mh.Y6.OLC));return!!(null==a?void 0:a.price)&&Ee.createElement(Th,{className:"marketplace-feature"},a.price)})).use(_h.c,(e=>{const a=e.feature.paymentTypes.find((e=>e.currency===mh.Y6.OLC));return!!(null==a?void 0:a.price)&&Ee.createElement(Ee.Fragment,null,Ee.createElement(Nt._,{id:"marketplace_coins_price_hint",defaultMessage:"Or buy for"}),Ee.createElement(Th,{className:"marketplace-slide"},a.price))})).use(fh.go,(e=>{const a=e.paymentTypes.find((e=>e.currency===mh.Y6.OLC));return!!(null==a?void 0:a.price)&&Ee.createElement(Ee.Fragment,null,Ee.createElement(Nt._,{id:"marketplace_coins_price_hint",defaultMessage:"Or buy for"}),Ee.createElement(Th,{className:"marketplace-slide"},a.price))})).use(fh.PQ,(e=>e.filter((e=>e!==mh.Y6.OLC)))).use(fh.iA,(e=>{let a=e.accounts;return{accounts:a,highlightedAccounts:a.filter((e=>e.currency===mh.Y6.OLC)).map((e=>e.id))}})).use(yh.D,(()=>Ee.createElement(Vt.qLk,null))).use(Eh.rootPanelFeaturesSlot,((e,a)=>{let s=e.noticeService,i=e.ref,r=e.timeService,n=a.status;const o=n.getState(),l=o.current,c=o.testDrive,d=(0,Ee.useCallback)((e=>{e.stopPropagation(),c&&(s.add({id:"status",collectionName:Ra.sm.FULL_SCREEN,layout:e=>{let a=e.api,s=e.notice;return Ee.createElement(Ia.default,{noticeId:s.id,api:a,content:e=>{let a=e.onClose;return Ee.createElement(Oh,{statusId:c.id,onClose:a,statusServiceState:n.getState()})}})},notice:{priority:!0}}),(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"profile",eventAction:"open",eventLabel:"statuses"}))}),[c,s,n]),u=n.getState().current.id,m=n.getState(),p=(0,Ee.useCallback)((e=>{let a=e.onClose;return Ee.createElement(Oh,{timeService:r,statusId:u,onClose:a,statusServiceState:m})}),[u,m,r]),h=(0,Ee.useCallback)((()=>{s.add({id:"status",collectionName:Ra.sm.FULL_SCREEN,layout:e=>{let a=e.api,s=e.notice.id;return Ee.createElement(Ia.default,{noticeId:s,api:a,content:p})},notice:{priority:!0}})}),[s,p]);return Ee.createElement(Ee.Fragment,null,Ee.createElement(Da.tE.Group,null,Ee.createElement(Da.tE.Card,{onClick:h},(e=>{let a=e.className;return Ee.createElement(Lh,{className:a,messageCount:0,status:l,endingAt:l.endingAt||0,timeService:r},c&&Ee.createElement("div",{onClick:d},Ee.createElement(Ph,{statusTestDrive:c,timeService:r})))})),Ee.createElement("a",{"data-test":"profile-menu-statuses",href:"/statuses",target:"_blank",className:"pro-p-root-sb-group__sublink"},Ee.createElement(Nt._,{id:"what_are_the_statuses",defaultMessage:"What are the Statuses?"}),Ee.createElement(Vt.T08,null))),c&&Ee.createElement("div",{className:"root-t-d__tooltip-container"},Ee.createElement(Ht._v,{placement:"bottom",className:"root-t-d__tooltip",classNameContent:"root-t-d__tooltip-content",arrowProps:{ref:i},color:"accent"},Ee.createElement(Nt._,{id:"tw-privileges",defaultMessage:"Try all privileges of bonus status for a limited time!"}))))})).enable((e=>e.politics.isEnabled(bh)));var Hh=s(81439),Gh=s(50100),Vh=s(72155);const Wh="bWJ6GdFj",jh="m9YEK6H4",zh="seTpjt8h",qh="xx9af7zu",Kh="lH9SnWBH",Yh="nW_CloFE",Xh=Ee.forwardRef(((e,a)=>{let s=e.children,i=e.failed,r=e.onClick;const n=(0,ci.Z)(Ee.useState(!1),2),o=n[0],l=n[1],c=Ee.useCallback((()=>{l(!0)}),[]),d=Ee.useCallback((()=>{l(!1)}),[]);let u=null;return i?u=Ee.createElement("div",{className:zh},Ee.createElement(Nt._,{id:"mini_chart_fail",defaultMessage:"Unfortunately, chart data could not be obtained"})):o&&r&&(u=Ee.createElement("div",{className:Kh},Ee.createElement("div",{className:qh}),Ee.createElement("div",{className:Yh},Ee.createElement(Nt._,{id:"show_on_chart",defaultMessage:"Show on the chart"})))),Ee.createElement("div",{className:Ze()(Wh,r&&jh),onClick:r,onMouseEnter:c,onMouseLeave:d,ref:a},u,s)}));var Jh=s(21681);const Qh="RX6q2XFT",$h="Cn3BfFqw";class MiniChartHistory extends Ee.Component{componentDidMount(){this.miniChart||(this.miniChart=new Jh.f1({id:"mini-chart-".concat(this.props.id),height:this.props.height,width:this.props.width,theme:this.props.theme}),this.miniChart.initHistoryChart(this.props.data,this.props.color,this.props.height,this.props.width,this.props.deal,this.props.gaps))}componentDidUpdate(e){this.props.theme!==e.theme&&this.miniChart.updateTheme(this.props.theme),(this.props.data!==e.data||this.props.gaps!==e.gaps||this.props.width>e.width)&&this.miniChart.updateHistoryData(this.props.data,this.props.color,this.props.height,this.props.width,this.props.deal,this.props.gaps)}render(){return Ee.createElement("div",{className:Ze()(Qh,this.props.className),onClick:this.handleClick},Ee.createElement("svg",{id:"mini-chart-".concat(this.props.id),height:this.props.height,width:this.props.width},Ee.createElement(Jh.pD,{theme:this.props.theme}),Ee.createElement("path",{fill:"none",stroke:this.props.color,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round",id:"line"}),Ee.createElement("path",{id:"area"}),Ee.createElement("line",{id:"dealLine"}),Ee.createElement("rect",{id:"leftEdgeRect"}),Ee.createElement("rect",{id:"rightEdgeRect"}),Ee.createElement("line",{id:"leftEdgeTopLine"}),Ee.createElement("line",{id:"leftEdgeBottomLine"}),Ee.createElement("rect",{id:"rightEdgeTopLine"}),Ee.createElement("rect",{id:"rightEdgeBottomLine"}),Ee.createElement("polyline",{id:"leftDealRhombus"}),Ee.createElement("polyline",{id:"rightDealRhombus"}),Ee.createElement("path",{id:"dealLabelContainer"}),Ee.createElement("path",{id:"dealLabelArrow"})))}constructor(...e){super(...e),this.handleClick=()=>{this.props.onClick()}}}MiniChartHistory.defaultProps={className:"",color:"",height:30,width:90,onClick:()=>{}};class MiniChartHistoryHOC extends Ee.Component{componentDidMount(){this.onLoadData()}render(){const e=this.ref.current?this.ref.current.offsetWidth:0,a=this.props.color;return Ee.createElement(Xh,{failed:this.state.failed,onClick:this.props.onClickToChart,ref:this.ref},Ee.createElement(MiniChartHistory,{id:"".concat(this.props.id+(0,Vh.x0)()),data:this.state.rateData,className:$h,height:70,width:e,color:a,deal:this.props.item,theme:this.props.theme,gaps:this.state.gaps}))}constructor(e){super(e),this.state={failed:!1,rateData:null,gaps:[]},this.ref=Ee.createRef(),this.onLoadData=()=>{this.props.loadData().then((e=>{const a=(0,ci.Z)(e,2),s=a[0],i=a[1];s&&i&&this.setState({rateData:s,gaps:i})})).catch((()=>{this.setState({failed:!0})}))}}}const ev=e=>{let a=e.id,s=e.item,i=e.color,r=e.theme,n=e.onClick,o=e.loadCandles;return Ee.createElement(MiniChartHistoryHOC,{id:a,item:s,color:i,theme:r,onClickToChart:n,loadData:o})};function tv(e){return{id:e,icon:"",title:e,precision:5}}const av=["light"],sv="dark",iv="#000000";function rv(e){return av.includes(e||"")?"accent-alpha":"chart-line-1"}const nv=(0,gt.v)({name:"dealHistoryChart",dependsOn:[es.x,ts.o,Rt.K,xt.x,dt.qS,ct.M7,mr.w]});nv.use(Ki.B,((e,a)=>{const s=e.item,i=a.themeService.getState().theme,r=Hh[i||sv][rv(a.themeService.getState().theme)];return Ee.createElement(ev,{id:s.id,color:r||iv,theme:i||sv,item:{timeOpen:s.timeOpen,timeClose:s.timeClose,cursOpen:s.cursOpen||0,cursClose:s.cursClose,dir:s.dir},loadCandles:()=>{const e=a.fttAssetsService.getState().assets;return a.tradingLegacyServiceList.dealDetailsServiceBo.loadData((0,Si.Z)((0,re.Z)({},s),{pair:e[s.pair]||tv(s.pair)}),!1)},onClick:e.onClick})})).use(Gh.Y,((e,a)=>{const s=e.item,i=a.themeService.getState().theme,r=Hh[i||sv][rv(a.themeService.getState().theme)];return Ee.createElement(ev,{id:s.id,color:r||iv,theme:i||sv,item:{timeOpen:s.timeOpen,timeClose:s.timeClose,cursOpen:s.cursOpen||0,cursClose:s.cursClose,dir:s.dir},loadCandles:()=>{const e=a.fxAssetsService.getState().assets;return a.tradingLegacyServiceList.dealDetailsServiceFx.loadData((0,Si.Z)((0,re.Z)({},s),{pair:e[s.pair]||tv(s.pair)}),!1)},onClick:e.onClick})}));class TriggersRepository{findAll(){return Promise.resolve([])}setup(e){return this.storage=new Js._({namespace:"".concat(TriggersRepository.key,"_").concat(e.uid),backend:new Qs.u}),this}getDate(e){const a=this.storage.get("".concat(e,"Date"));return a?new Date(a):new Date}setDate(e,a){this.storage.set("".concat(e,"Date"),a.getTime())}getCount(e){var a;return null!==(a=this.storage.get("".concat(e,"Count")))&&void 0!==a?a:0}setCount(e,a){this.storage.set("".concat(e,"Count"),a)}constructor(){this.storage=new Js._({namespace:TriggersRepository.key,backend:new Qs.u})}}TriggersRepository.key="NotificationsRequestPermissionTriggers";const ov=e=>{const a=new Set,s=new Set,i=i=>{if(s.forEach((e=>e(i))),e){const s=e(i);a.forEach((e=>e({params:i,result:s})))}};return i.done={unlisten:e=>{a.delete(e)},listen:e=>(a.add(e),()=>i.done.unlisten(e))},i.unlisten=e=>{s.delete(e)},i.listen=e=>(s.add(e),()=>i.unlisten(e)),i};class TriggersService extends vt.t{updateTrigger(e){var a,s;const i=null!==(s=null===(a=this.config.triggers[e])||void 0===a?void 0:a.period)&&void 0!==s?s:0;if(-1===i)return;const r=this.config.triggersRepository,n=(new Date).setHours(0,0,0,0)-r.getDate(e).setHours(0,0,0,0)<864e5*i;r.setCount(e,n?r.getCount(e):0),r.setDate(e,n?r.getDate(e):new Date)}isMaxCount(e){var a;var s;return this.config.triggersRepository.getCount(e)>=(null!==(s=null===(a=this.config.triggers[e])||void 0===a?void 0:a.maxCount)&&void 0!==s?s:0)}incTriggerCount(e){const a=this.config.triggersRepository;a.setCount(e,a.getCount(e)+1)}getCallResult(){return{isFirst:1===this.config.triggersRepository.getCount("all")}}constructor(e){super(),this.config=e,this.call=ov((e=>{var a,s;if(null===(s=(a=this.config).guard)||void 0===s?void 0:s.call(a)){if(this.config.triggers.all){if(this.updateTrigger("all"),this.updateTrigger(e),this.isMaxCount("all")||this.isMaxCount(e))return;return this.incTriggerCount("all"),this.incTriggerCount(e),this.getCallResult()}if(this.updateTrigger(e),!this.isMaxCount(e))return this.incTriggerCount(e),this.getCallResult()}}))}}class SocketEventsService extends vt.t{isLessBorderOrderTime(e){return+Math.abs(this.config.timeService.serverTime.timestamp-e).toFixed(2)<=2}constructor(e){super(),this.config=e,this.trigger=ov(),di.W.subscribe.fttDealsOpen((e=>{e.filter((e=>e.duration>=60)).length&&this.trigger("ftt")})),di.W.subscribe.fttOrdersChange((e=>{e.filter((e=>"wait"===e.status&&this.isLessBorderOrderTime(e.time))).length&&this.trigger("order")})),di.W.subscribe.fxDealsOpen((()=>this.trigger("fx"))),di.W.subscribe.fxOrdersChange((e=>{e.filter((e=>"wait"===e.status&&this.isLessBorderOrderTime(e.created_at))).length&&this.trigger("order")}))}}class AnalyticsService_AnalyticsService extends vt.t{tracking(e,a){(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"trigger_subscription",eventAction:e,eventLabel:a,platform:"otp_web"})}constructor(){super(),this.tracking=this.tracking.bind(this)}}const lv="qyKmRqev",cv="gHP0a4Vr",dv="Wbnph6eY",uv="Gl3fMde_",mv="JXqUuCJY",pv=(0,Ee.memo)((function(e){return Ee.createElement("div",{className:lv},"poster"in e?Ee.createElement("div",{className:cv},e.poster):null,"title"in e?Ee.createElement("div",{className:dv},e.title):null,"note"in e?Ee.createElement("div",{className:uv},e.note):null,"buttons"in e?Ee.createElement("div",{className:mv},e.buttons):null)})),hv=s.p+"images/poster.6c3266ea.png",vv=(0,Ee.memo)((e=>Ee.createElement(pv,{poster:Ee.createElement("img",{title:"Request permission of notifications",src:hv}),title:e.title,note:e.note,buttons:Ee.createElement(Ht.zx,{fullWidth:!0,onClick:e.onEnable},Ee.createElement(Nt._,{id:"n11s_request_enable",defaultMessage:"Enable"}))})));vv.displayName="OfferEnableNotification";const gv={ftt:Ee.createElement(Nt._,{id:"n11s_request_title_ftt",defaultMessage:"Trade Result Notifications"}),fx:Ee.createElement(Nt._,{id:"n11s_request_title_forex",defaultMessage:"Closed Trade Notifications"}),order:Ee.createElement(Nt._,{id:"n11s_request_title_order",defaultMessage:"Order Notifications"}),price:Ee.createElement(Nt._,{id:"n11s_request_title_price",defaultMessage:"Price Notifications"})},_v={ftt:Ee.createElement(Nt._,{id:"n11s_request_note_ftt",defaultMessage:"If you enable browser notifications, we’ll let you know how and when your trade closes so you can continue trading without needing to check"}),fx:Ee.createElement(Nt._,{id:"n11s_request_note_forex",defaultMessage:"If you enable push notifications, we’ll let you know when your Stop Loss/Take Profit is reached so you can continue trading without needing to check"}),order:Ee.createElement(Nt._,{id:"n11s_request_note_order",defaultMessage:"If you enable push notifications, we’ll let you know when the order is executed so you can continue trading without needing to check"}),price:Ee.createElement(Nt._,{id:"n11s_request_note_price",defaultMessage:"If you enable push notifications, we’ll let you know when the asset reached the price you want so you can continue trading without needing to check"})},fv=(0,Ee.memo)((function(){return Ee.createElement(Vt.Gc9,{style:{color:"var(--warning-alpha)"}})})),Ev={default:"browser_inapp/close",denied:"browser_inapp/block",granted:"browser_inapp/allow"};var Sv;const yv=(0,gt.v)({name:"NotificationsRequestPermission",dependsOn:[Kl.l,Lo.Z,Mo.x,Qt.EA,nt.e8],services:(e,a)=>{var s;return{triggersService:new TriggersService({triggersRepository:a.triggersRepository.setup({uid:null!==(Sv=null===(s=(0,st.Sc)(ft.APP_SERVICE))||void 0===s?void 0:s.id)&&void 0!==Sv?Sv:""}),triggers:{all:{period:1,maxCount:1},ftt:{period:3,maxCount:1},fx:{period:3,maxCount:1},order:{period:1,maxCount:1},price:{period:1,maxCount:1}},guard:()=>{var e;return"demo"!==(null===(e=(0,st.Sc)(ft.ACCOUNT_SERVICE))||void 0===e?void 0:e.selectedAccount.type)}}),socketEventsService:new SocketEventsService({timeService:e.timeService}),analyticsService:new AnalyticsService_AnalyticsService}}},{repositories:()=>({triggersRepository:new TriggersRepository})});yv.onStart((e=>{const a=function(){var a=(0,ie.Z)((function*(a){e.analyticsService.tracking("browser_inapp/view",a),yield e.notificationsPermissionService.request(),e.analyticsService.tracking(Ev[e.notificationsPermissionService.permission],a)}));return function(e){return a.apply(this,arguments)}}();e.triggersService.call.done.listen((s=>{let i=s.params,r=s.result;const n=e.notificationsPermissionService.permission;if(!r||"granted"===n||"default"!==n||!r.isFirst)return;const o=e.modalService.createApi({onClose:()=>{o.close(),e.analyticsService.tracking("overlay/close",i)}});e.analyticsService.tracking("trigger_activation",i),e.analyticsService.tracking("overlay/view",i),e.modalService.add({api:o,content:Ee.createElement(vv,{title:gv[i],note:_v[i],onEnable:()=>{a(i).catch((()=>{})),o.close(),e.analyticsService.tracking("overlay/enable",i)}}),onCloseClick:o.close})})),e.triggersService.call.done.listen((s=>{let i=s.params,r=s.result;const n=e.notificationsPermissionService.permission;!r||"granted"===n||"default"===n&&r.isFirst||(e.analyticsService.tracking("inapp/view",i),e.inappService.createInapp((s=>{let r=s.close;return{type:"default",id:"notification-trigger-request-permission",meta:{pushId:i,source:"local"},autoHideDuration:1e4,image:fv,title:gv[i],description:_v[i],actionText:Ee.createElement(Ht.rU,{onClick:()=>{switch(e.notificationsPermissionService.permission){case"default":a(i).catch((()=>{})),e.analyticsService.tracking("inapp/enable",i);break;case"denied":(()=>{var e,a;null===(e=(0,st.Sc)(ft.NAVIGATION_SERVICE))||void 0===e||null===(a=e.ovlPlusNavigation)||void 0===a||a.goToHelpCenter({categoryId:"trading",contentId:Bo.i7&&Bo.nI?"chrome-desktop":Bo.i7&&Bo.Dt?"chrome-android":Bo.vU?"firefox":Bo.un?"microsoft-edge":Bo.f0?"opera":"how-to-enable-browser-notifications"})})(),e.analyticsService.tracking("instruction/view",i)}r()}},Ee.createElement(Nt._,{id:"n11s_request_enable",defaultMessage:"Enable"})),onClose:()=>{e.analyticsService.tracking("inapp/close",i)}}})))})),e.socketEventsService.trigger.listen(e.triggersService.call),e.pushNotifications.onRequestPermission((a=>{a&&e.triggersService.call(a)}))})).enable((e=>{let a=e.politics;return!Fe.H.shouldFeatureBeDisabled("pushRequest")&&!0===a.getPolitic("test_notifications_subscription_v2")}));class VideosRepository{constructor(e){this.config=e}findAll(){var e=this;return pt((function*(){return(yield e.config.getHomeScreen()).items.reduce(((e,a)=>("videos"!==a.type||a.payload.items.forEach((s=>e.push({id:"".concat(a.uid,"/").concat(s.uid),name:s.uid,duration:s.duration_seconds,title:s.title,imageUrl:s.image_url,videoUrl:s.video_url}))),e)),[])}))()}}class GalleryVideoTutorialsUiService extends vt.t{constructor(e){super(),this.config=e,this.onMount=(0,on.o)((()=>{this.config.videosService.loadVideos()})),this.onRetry=(0,on.o)((()=>{this.config.videosService.loadVideos()})),this.onClickCard=(0,on.o)((e=>{this.config.selectedVideoService.selectVideo(e),(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"navigation_bar",eventAction:"help_section",eventLabel:"tutor_click/".concat(e.name,"/").concat(this.config.videosService.getState().videos.indexOf(e))})}))}}class ModalVideoTutorialsUiService extends vt.t{constructor(e){super({currentTime:0,duration:0,isMuted:!1,isPaused:!1,isLoading:!1}),this.config=e,this.onMount=(0,on.o)((()=>{this.logEvent({type:"open"})})),this.onUnmount=(0,on.o)((()=>{this.isEnded?this.logEvent({type:"actions_after_watch",action:"close"}):this.logEvent({type:"close"})})),this.onMountSelectedVideo=(0,on.o)((()=>{var e,a,s,i,r;this.logEvent({type:"start",videoDuration:null!==(e=null===(a=this.selectedVideo)||void 0===a?void 0:a.duration)&&void 0!==e?e:0}),this.isEnded=!1,null===(s=this.videoElement)||void 0===s||s.play(),this.update({currentTime:this.getCurrentTime(),duration:null!==(i=null===(r=this.selectedVideo)||void 0===r?void 0:r.duration)&&void 0!==i?i:0,isPaused:!1})})),this.onUnmountSelectVideo=(0,on.o)((()=>{var e;null===(e=this.videoElement)||void 0===e||e.pause()})),this.onVideoRef=(0,on.o)((e=>{this.videoElement=e})),this.onTimeUpdate=(0,on.o)((()=>{this.update({currentTime:this.getCurrentTime()})})),this.onMute=(0,on.o)((()=>{this.logEvent({type:"sound",action:"turn_off"}),this.update({isMuted:!0})})),this.onUnmute=(0,on.o)((()=>{this.logEvent({type:"sound",action:"turn_on"}),this.update({isMuted:!1})})),this.onPlay=(0,on.o)((()=>{var e;this.isEnded?this.logEvent({type:"actions_after_watch",action:"play_again"}):this.logEvent({type:"play"}),this.isEnded=!1,null===(e=this.videoElement)||void 0===e||e.play(),this.update({isPaused:!1})})),this.onPause=(0,on.o)((()=>{var e;this.logEvent({type:"stop"}),null===(e=this.videoElement)||void 0===e||e.pause(),this.update({isPaused:!0})})),this.onSeekingStart=(0,on.o)((()=>{var e,a;this.logEvent({type:"slider_start"}),this.timeBeforeSeeking=null===(e=this.videoElement)||void 0===e?void 0:e.currentTime,this.isPausedBeforeSeeking=this.getState().isPaused&&!this.isEnded,null===(a=this.videoElement)||void 0===a||a.pause()})),this.onSeeking=(0,on.o)((e=>{this.seekingTimeoutId&&(clearTimeout(this.seekingTimeoutId),this.seekingTimeoutId=null);const a=+e.currentTarget.value;this.seekingTimeoutId=window.setTimeout((()=>{this.seekingTimeoutId=null,this.setCurrentTime(a)}),30)})),this.onSeekingEnd=(0,on.o)((()=>{var e,a;this.timeBeforeSeeking!==(null===(e=this.videoElement)||void 0===e?void 0:e.currentTime)&&(this.logEvent({type:"slider_end"}),this.isPausedBeforeSeeking||(this.isEnded&&this.logEvent({type:"actions_after_watch",action:"play_again"}),this.isEnded=!1,null===(a=this.videoElement)||void 0===a||a.play(),this.update({isPaused:!1})))})),this.onBufferingStart=(0,on.o)((()=>{this.logEvent({type:"buffering_start"}),this.isBuffering=!0,this.update({isLoading:!0})})),this.onBufferingEnd=(0,on.o)((()=>{this.isBuffering&&(this.logEvent({type:"buffering_end"}),this.isBuffering=!1,this.update({isLoading:!1}))})),this.onEnded=(0,on.o)((()=>{this.isEnded=!0,this.update({isPaused:!0})})),this.onPrev=(0,on.o)((()=>{this.isEnded?this.logEvent({type:"actions_after_watch",action:"prev"}):this.logEvent({type:"next_prev",direction:"prev"}),this.config.selectedVideoService.selectPrevVideo()})),this.onNext=(0,on.o)((()=>{this.isEnded?this.logEvent({type:"actions_after_watch",action:"next"}):this.logEvent({type:"next_prev",direction:"next"}),this.config.selectedVideoService.selectNextVideo()})),this.onClose=(0,on.o)((()=>{this.config.selectedVideoService.selectVideo(null)})),this.videoElement=null,this.isPausedBeforeSeeking=!1,this.seekingTimeoutId=null,this.isBuffering=!1,this.isEnded=!1,this.selectedVideo=null,this.getCurrentTime=()=>{var e,a;return Math.floor(null!==(e=null===(a=this.videoElement)||void 0===a?void 0:a.currentTime)&&void 0!==e?e:0)},this.setCurrentTime=e=>{this.videoElement&&(this.videoElement.currentTime=e)},this.logEvent=e=>{var a,s;ModalVideoTutorialsUiService.logEvent(ut({location:"sidebar_help",videoName:null!==(a=null===(s=this.selectedVideo)||void 0===s?void 0:s.name)&&void 0!==a?a:"",videoTime:this.getCurrentTime()},e))},this.config.selectedVideoService.subscribe((e=>{e.video&&(this.selectedVideo=e.video)}))}}ModalVideoTutorialsUiService.getEventAction=e=>{switch(e.type){case"start":return"start/".concat(e.videoDuration);case"next_prev":return"next_prev/".concat(e.direction);case"sound":return"sound/".concat(e.action);case"actions_after_watch":return"actions_after_watch/".concat(e.action);default:return e.type}},ModalVideoTutorialsUiService.logEvent=e=>{(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"tutorial_video",eventAction:ModalVideoTutorialsUiService.getEventAction(e),eventLabel:"".concat(e.videoName,"/").concat(e.location,"/").concat(e.videoTime)})};class SelectedVideoService extends vt.t{constructor(e){super({video:null,index:-1}),this.config=e}selectVideo(e){this.update({video:e,index:this.getIndex(e)})}selectPrevVideo(){var e;const a=this.getIndex()-1;a<0||this.selectVideo(null!==(e=this.getVideos()[a])&&void 0!==e?e:null)}selectNextVideo(){var e;const a=this.getIndex()+1;a>this.getVideos().length-1||this.selectVideo(null!==(e=this.getVideos()[a])&&void 0!==e?e:null)}isFirstVideo(){return 0===this.getState().index}isLastVideo(){return this.getState().index===this.getVideos().length-1}getVideos(){return this.config.videosService.getState().videos}getIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getState().video;return e?this.getVideos().indexOf(e):-1}}class VideosService extends vt.t{constructor(e){var a;super({videos:[]}),a=this,this.config=e,this.loadVideos=this.createTask(pt((function*(){a.getState().videos.length||a.update({videos:yield a.config.videosRepository.findAll()})})))}}const bv=(0,Ee.memo)((e=>Ee.createElement(Ht.Z6,{paddingForHighlight:!0,gap:"m",scrollSnap:"proximity",scrollSnapAlign:"start"},e.children)));bv.displayName="Gallery";var Cv="_3XWRvUTTG265",Tv="_1HSxbX47xN-a";const Av=(0,Ee.memo)((e=>Ee.createElement(Ht.Zb,{borderRadius:"m",variant:"secondary",padding:"0",fixedWidth:"148px",ref:e.cardRef},Ee.createElement("div",{className:Cv,onClick:e.onClick},e.iconSrc?Ee.createElement("img",{alt:"icon",className:Tv,src:e.iconSrc}):null,e.children))));Av.displayName="GalleryCard";const kv=(0,Ee.memo)((e=>Ee.createElement(Ee.Fragment,null,Math.floor(e.value/60).toString().padStart(2,"0"),":",(e.value%60).toString().padStart(2,"0"))));kv.displayName="TextTime";const wv=(0,E.vU)({galleryTitle:{id:"navigation_help_title_3",defaultMessage:"How to start"},galleryError:{id:"videos_gallery_error",defaultMessage:"Failed to load lesson"},galleryRetry:{id:"common_retry",defaultMessage:"Try again"}});var Nv={galleryCardTitle:"_1j-L74H_4L60"};const Rv=(0,Ee.memo)((()=>{var e;const a=(0,Ss.G)(VideosService),s=(0,Ot.o)(a.store).videos,i=(0,Ot.o)(a.loadVideos.pending),r=Boolean((0,Ot.o)(a.loadVideos.fail)),n=null===(e=(0,Ot.o)((0,Ss.G)(SelectedVideoService).store).video)||void 0===e?void 0:e.id,o=(0,Ss.G)(GalleryVideoTutorialsUiService),l=o.onMount,c=o.onRetry,d=o.onClickCard,u=(0,Ee.useRef)(null);(0,Ee.useEffect)((()=>l()),[l]),(0,Ee.useEffect)((()=>{var e;n&&(null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}))}),[n]);let m=null;return r?m=Ee.createElement(Av,null,Ee.createElement(Ht.xu,{fullHeight:!0,horizontalAlign:"center",verticalAlign:"center",gap:"l"},Ee.createElement(Ht.xv,{variant:"M Compact / Regular",color:"contrast-beta",align:"center"},Ee.createElement(Nt._,ut({},wv.galleryError))),Ee.createElement(Ht.zx,{variant:"flat",size:"s",onClick:c},Ee.createElement(Nt._,ut({},wv.galleryRetry))))):i?m=Ee.createElement(bv,null,Ee.createElement(Av,null),Ee.createElement(Av,null),Ee.createElement(Av,null)):s.length&&(m=Ee.createElement(bv,null,s.map((e=>Ee.createElement(Av,{key:e.id,cardRef:n===e.id?u:null,iconSrc:e.imageUrl,onClick:d.attach(e)},Ee.createElement(Ht.xu,{fullHeight:!0,direction:"column",verticalAlign:"space-between"},Ee.createElement(Ht.xv,{as:"span",variant:"M / Bold",color:"contrast-alpha"},Ee.createElement("span",{className:Nv.title},e.title)),Ee.createElement(Ht.xv,{variant:"S Compact / Regular",color:"contrast-beta"},Ee.createElement(kv,{value:e.duration})))))))),m?Ee.createElement(Ht.xu,{display:"grid",gap:"l",padding:"0 12px"},Ee.createElement(Ht.xu,{padding:"0 4px"},Ee.createElement(Ht.xv,{as:"span",variant:"L / Bold",color:"contrast-alpha"},Ee.createElement(Nt._,ut({},wv.galleryTitle)))),m):null}));Rv.displayName="GalleryVideoTutorials";var Iv="_60O9bOzPQe0V";const Dv=(0,Ee.memo)((e=>Ee.createElement("video",{playsInline:!0,className:Iv,preload:e.preload,src:e.src,ref:e.videoRef,muted:e.isMuted,autoPlay:e.isAutoPlay,onLoadedData:e.onReady,onTimeUpdate:e.onTimeUpdate,onWaiting:e.onBufferingStart,onPlaying:e.onBufferingEnd,onEnded:e.onEnded})));Dv.displayName="Video";var Ov="_1-1yATfVy2YE",Lv="NRu2Wo-hCLnX",Mv="_33qhrfY3wa0n",Pv="_2vLXDa4Vkbcf",xv="XsaDaH-cUS3B",Fv="_3MIE8ATfMM0c",Bv="_2HGbeVBRV5_6",Zv="_1BFAsYso2DVX";const Uv=(0,Ee.memo)((e=>{var a,s;const i=(0,Te.L)(),r="ltr"===i?-1:1;return Ee.createElement("div",{dir:i,className:Be(Ov,e.className)},Ee.createElement("div",{className:Lv,style:{transform:"translateX(".concat((null!==(a=e.indexVideo)&&void 0!==a?a:0)*r*100,"%)")}},null===(s=e.children)||void 0===s?void 0:s.map(((e,a)=>{var s;return Ee.createElement("div",{key:null!==(s=e.key)&&void 0!==s?s:a,className:Mv},e)}))),Ee.createElement("div",{className:Pv},Ee.createElement("div",{className:xv},e.header),Ee.createElement("div",{className:Fv},e.controls)),Ee.createElement("div",{className:Be(Bv,e.isLoading?Zv:null)},Ee.createElement(Ht.kc,{color:"#ffffff"},Ee.createElement(Ht.$j,{size:"l"}))))}));Uv.displayName="VideoPlayer";var Hv="DDp1h7gK4D3m",Gv="_32o6xrD21sFy";const Vv=(0,Ee.memo)((e=>Ee.createElement("button",{className:Be(Hv,e.isDisabled?Gv:null,e.className),disabled:e.isDisabled,onClick:e.onClick},e.children)));Vv.displayName="VideoPlayerButton";var Wv="_33x0dphrQ6mZ";const jv=(0,Ee.memo)((()=>Ee.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 493.796 493.796",className:Wv},Ee.createElement("g",{strokeWidth:"0"}),Ee.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"}),Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("path",{d:"M355.938,200.956L81.414,12.128c-11.28-7.776-23.012-11.88-33.056-11.88c-22.052,0-36.672,18.496-36.672,48.26v397.036 c0,14.54,4.228,26.688,10.496,35.144c6.364,8.572,16.32,13.108,27.076,13.108c10.04,0,21.308-4.112,32.584-11.876l274.276-188.828 c17.632-12.152,27.3-28.508,27.296-46.076C383.414,229.456,373.594,213.1,355.938,200.956z"}))),Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("path",{d:"M456.446,493.672l-0.293-0.004c-0.048,0-0.095,0.004-0.143,0.004H456.446z"}),Ee.createElement("path",{d:"M455.638,0L444.29,0.032c-14.86,0-27.724,12.112-27.724,26.992v439.368c0,14.896,12.652,27.124,27.532,27.124 l12.055,0.152c14.805-0.079,25.957-12.412,25.957-27.252V26.996C482.11,12.116,470.51,0,455.638,0z"}))))))));jv.displayName="IconPrev";var zv="SXBXEpVSewKo";const qv=(0,Ee.memo)((()=>Ee.createElement("svg",{viewBox:"0 0 1024 1024",className:zv},Ee.createElement("path",{d:"M768 832h-128c-35.392 0-64-28.608-64-64V256c0-35.392 28.608-64 64-64h128c35.392 0 64 28.608 64 64v512c0 35.392-28.608 64-64 64z m-384 0h-128c-35.392 0-64-28.608-64-64V256c0-35.392 28.608-64 64-64h128c35.392 0 64 28.608 64 64v512c0 35.392-28.608 64-64 64z"}))));qv.displayName="IconPause";var Kv="BOus5a3R7hjp";const Yv=(0,Ee.memo)((()=>Ee.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 493.796 493.796",className:Kv},Ee.createElement("g",{strokeWidth:"0"}),Ee.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"}),Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("path",{d:"M355.938,200.956L81.414,12.128c-11.28-7.776-23.012-11.88-33.056-11.88c-22.052,0-36.672,18.496-36.672,48.26v397.036 c0,14.54,4.228,26.688,10.496,35.144c6.364,8.572,16.32,13.108,27.076,13.108c10.04,0,21.308-4.112,32.584-11.876l274.276-188.828 c17.632-12.152,27.3-28.508,27.296-46.076C383.414,229.456,373.594,213.1,355.938,200.956z"}))),Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("g",null,Ee.createElement("path",{d:"M456.446,493.672l-0.293-0.004c-0.048,0-0.095,0.004-0.143,0.004H456.446z"}),Ee.createElement("path",{d:"M455.638,0L444.29,0.032c-14.86,0-27.724,12.112-27.724,26.992v439.368c0,14.896,12.652,27.124,27.532,27.124 l12.055,0.152c14.805-0.079,25.957-12.412,25.957-27.252V26.996C482.11,12.116,470.51,0,455.638,0z"}))))))));Yv.displayName="IconNext";var Xv="_1OnPUE7dioYr";const Jv=(0,Ee.memo)((e=>{var a,s,i,r;const n="ltr"===(0,Te.L)();return Ee.createElement(Ht.xu,{gap:"xs"},Ee.createElement(Ht.xu,{direction:"row",verticalAlign:"center",gap:"xs"},Ee.createElement(Vv,{className:Xv,isDisabled:e.isDisabledPrev,onClick:e.onPrev},n?Ee.createElement(jv,null):Ee.createElement(Yv,null)),Ee.createElement(Vv,{onClick:e.isPaused?e.onPlay:e.onPause},e.isPaused?Ee.createElement(Vt.BHy,null):Ee.createElement(qv,null)),Ee.createElement(Vv,{isDisabled:e.isDisabledNext,onClick:e.onNext},n?Ee.createElement(Yv,null):Ee.createElement(jv,null)),Ee.createElement(Vv,{onClick:e.isMuted?e.onUnmute:e.onMute},e.isMuted?Ee.createElement(Vt.JfY,null):Ee.createElement(Vt.BKE,null)),Ee.createElement("div",{dir:"ltr"},Ee.createElement(Ht.xv,{variant:"S Compact / Regular",color:"inherit"},Ee.createElement(kv,{value:null!==(a=e.currentTime)&&void 0!==a?a:0})," / ",Ee.createElement(kv,{value:null!==(s=e.duration)&&void 0!==s?s:0})))),Ee.createElement(Ht.U2,{name:"video-slider",color:"#ffffff",min:0,max:null!==(i=e.duration)&&void 0!==i?i:0,value:null!==(r=e.currentTime)&&void 0!==r?r:0,onMouseDown:e.onSeekingStart,onMouseUp:e.onSeekingEnd,onChange:e.onSeeking}))}));Jv.displayName="VideoPlayerControls";var Qv="Yg4D79vVTMzM",$v="_1jbORwAWSw0l";const eg=(0,Ee.memo)((e=>Ee.createElement(Ht.xu,{fullWidth:!0,direction:"row",verticalAlign:"flex-start",horizontalAlign:"space-between"},Ee.createElement("div",{className:Qv},e.title?Ee.createElement(Ht.xv,{as:"span",variant:"L / Bold",color:"inherit"},e.title):null),e.onClose?Ee.createElement(Vv,{className:$v,onClick:e.onClose},Ee.createElement(Vt.bMz,null)):null)));eg.displayName="VideoPlayerHeader";var tg="_2qq5QuQclxp2";const ag=(0,Ee.memo)((e=>{const a=(0,Ot.o)(e.selectedVideoService.store),s=a.index,i=a.video,r=e.uiService,n=r.onMount,o=r.onUnmount,l=r.onMountSelectedVideo,c=r.onUnmountSelectVideo,d=(0,Ot.o)(e.uiService.store),u=d.currentTime,m=d.duration,p=d.isMuted,h=d.isPaused,v=d.isLoading,g=(0,Ot.o)(e.videosService.store).videos;return(0,Ee.useEffect)((()=>(n(),o)),[n,o]),(0,Ee.useEffect)((()=>(l(),c)),[i,l,c]),Ee.createElement(Uv,{className:tg,indexVideo:s,isLoading:v,header:Ee.createElement(eg,{title:null==i?void 0:i.title,onClose:e.uiService.onClose}),controls:Ee.createElement(Jv,{isMuted:p,isPaused:h,currentTime:u,duration:m,isDisabledPrev:0===s,isDisabledNext:s===g.length-1,onPrev:e.uiService.onPrev,onNext:e.uiService.onNext,onMute:e.uiService.onMute,onUnmute:e.uiService.onUnmute,onPlay:e.uiService.onPlay,onPause:e.uiService.onPause,onSeekingStart:e.uiService.onSeekingStart,onSeeking:e.uiService.onSeeking,onSeekingEnd:e.uiService.onSeekingEnd})},g.map((a=>{const s=(null==i?void 0:i.id)===a.id;return Ee.createElement(Dv,{key:a.id,preload:"none",src:a.videoUrl,videoRef:s?e.uiService.onVideoRef:void 0,isMuted:!s||p,onTimeUpdate:s?e.uiService.onTimeUpdate:void 0,onBufferingStart:e.uiService.onBufferingStart,onBufferingEnd:e.uiService.onBufferingEnd,onEnded:e.uiService.onEnded})})))}));ag.displayName="ModalVideoTutorials";const sg=(0,gt.v)({name:"HelpVideoTutorialsPlatform",dependsOn:[Na.G,Kl.l,mn],services:(e,a)=>{let s=a.videosRepository;const i=new VideosService({videosRepository:s}),r=new SelectedVideoService({videosService:i});return{galleryVideoTutorialsUiService:new GalleryVideoTutorialsUiService({videosService:i,selectedVideoService:r}),modalVideoTutorialsUiService:new ModalVideoTutorialsUiService({selectedVideoService:r}),videosService:i,selectedVideoService:r}}},{repositories:()=>({videosRepository:new VideosRepository({getHomeScreen:Wl.$.getHomeScreen})})});sg.use(dn,(()=>Ee.createElement(Rv,null))),sg.onStart((e=>{const a=e.modalService.createApi();e.galleryVideoTutorialsUiService.onClickCard.listen((()=>{e.modalService.add({api:a,modal:Ee.createElement(ag,{videosService:e.videosService,selectedVideoService:e.selectedVideoService,uiService:e.modalVideoTutorialsUiService}),onOverlayClick:()=>{a.close(),e.selectedVideoService.selectVideo(null)}})})),e.modalVideoTutorialsUiService.onClose.listen((()=>{a.close()}))}));var ig=s(78166),rg=s(27445),ng=s(52463);const og=(0,ss.WV)({deeplink_action:(0,ss.t$)("assets"),contentId:ss.Ld}),lg=(0,gt.v)({name:"AssetsDeeplinks",dependsOn:[Rt.K,xt.x,ot.F0]});lg.onStart((e=>{let a=e.commandService,s=e.commonLegacyServiceList;a.registerCommand(og.guard,(e=>{if(e.contentId){s.sideBarService.goTo(as.KO.PLUS_ASSETS);const a=window.location,i=a.search,r=a.pathname,n=((e,a)=>{if(a){const s=(0,Re.parseUrl)(a).query;return(0,Re.stringify)((0,re.Z)({},s,e))}return(0,Re.stringify)(e)})({contentId:e.contentId,targetTab:e.contentId?"assets":null},i);(0,ng.P)(null,document.title,"".concat(r,"?").concat(n))}}))}));const cg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("g",{clipPath:"url(#clip0000234)"},Ee.createElement("path",{d:"M17.625 2H8.20691V8.67027H22V6.375C22 3.95875 20.0412 2 17.625 2Z",fill:"#73AF00"}),Ee.createElement("path",{d:"M8.20691 22H17.625C20.0412 22 22 20.0413 22 17.625V15.3297H8.20691V22Z",fill:"#3A3B43"}),Ee.createElement("path",{d:"M22 8.67029H8.20703V15.3297H22V8.67029Z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M8.20691 8.67027V2H6.375C3.95875 2 2 3.95875 2 6.375V17.625C2 20.0413 3.95875 22 6.375 22H8.20691V15.3297V8.67027Z",fill:"#FB4B4E"})),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0000234"},Ee.createElement("rect",{width:"20",height:"20",fill:"white",transform:"translate(2 2)"}))))));cg.displayName="ArFlag";const dg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H6.4C4 2 2 4 2 6.4v11.2C2 20 4 22 6.4 22h11.2c2.4 0 4.4-2 4.4-4.4V6.4C22 4 20 2 17.6 2z",fill:"#168B59"}),Ee.createElement("path",{d:"M14.7 10c1.7 4-2 7.7-6 6a4 4 0 0 1-2.2-2c-1.6-4 2.1-7.7 6-6a4 4 0 0 1 2.2 2z",fill:"#FF4B55"}))));dg.displayName="BnFlag";const ug=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 22H6.4C4 22 2 20 2 17.6V6.4C2 4 4 2 6.4 2h11.2C20 2 22 4 22 6.4v11.2c0 2.4-2 4.4-4.4 4.4z",fill:"#2841C1"}),Ee.createElement("path",{d:"M2 6.5v.8l3.1 2H2v1.1h8.4V2h-1v6.4L2.7 4c-.3.4-.5.9-.6 1.3L2 6.5zM2.7 20l-.4-.8-.3-1v-1.6l3.1-2H2v-1h8.4V22h-1v-6.4L2.7 20zM22 16.7v1l-.2 1c0 .5-.3 1-.5 1.3l-6.7-4.4V22h-1v-8.4H22v1h-3.1l3.1 2zM21.3 4l.4.8.3 1v1.6l-3.1 2H22v1h-8.4V2h1v6.4L21.3 4z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M13.6 2h-3.2v8.4H2v3.2h8.4V22h3.2v-8.4H22v-3.2h-8.4V2zM7.4 14.6L2 18.1c0 .4.2.8.3 1.1l7-4.6H7.4zm14.4 4.2l-6.3-4.2h1.9l4.6 3c0 .4 0 .8-.2 1.2zM8.3 9.4l-6.2-4-.1 1v.1l4.4 2.9h2zM22 5.9l-5.4 3.5h-2l7.1-4.6.3 1z",fill:"#FB4B4E"}))));ug.displayName="EnFlag";const mg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H6.4C4 2 2 4 2 6.4v11.2C2 20 4 22 6.4 22h11.2c2.4 0 4.4-2 4.4-4.4V6.4C22 4 20 2 17.6 2z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M22 6.2H2v11.6h20V6.2z",fill:"#FFE15A"}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 9.5h-.3c-.3 0-.5.2-.5.4 0 .3.2.6.5.6s.5-.2.6-.4a.6.6 0 0 0 .6-.1.6.6 0 0 0 .6 0c0 .3.2.5.5.5s.6-.3.6-.6c0-.2-.3-.5-.6-.5h-.2c0-.2-.3-.3-.6-.3l-.3.1a.6.6 0 0 0-.4-.1c-.3 0-.5.1-.6.4zm.7.1l-.2.2-.2-.2s0-.2.2-.2l.2.2zm.4 0l.1.2.2-.2s0-.2-.2-.2l-.1.2zM6.3 11c-.2 0-.3.1-.3.3v2.3c0 .4.4 1.2 1.9 1.2 1.4 0 1.9-.8 1.9-1.2v-2.3c0-.2-.2-.3-.4-.3h-3zm4.8.3h-.8v3h.8v-3zm-6.5 0h.8v3h-.8v-3zM9 9.8l-.2.1.2.2c.1 0 .2 0 .2-.2L9 9.8zm-2.5.1l.2-.1.2.1c0 .1 0 .2-.2.2 0 0-.2 0-.2-.2z",fill:"#F5F5F5"}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.7 9H8v1h-.4V9zM9 10.5H6.7v.4H9v-.4zm2.3.4H10v.3h1.2V11zM6 12.7h1.9v.8c0 .5-.4 1-1 1a1 1 0 0 1-1-1v-.8zm-1.6 1.4h1.2v.3H4.4v-.3zM5.6 11H4.4v.3h1.2V11zm4.6 3h1v.4h-1v-.3z",fill:"#FAB446"}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.3 10.3l.4.3H9l.4-.3-.2-.2a2 2 0 0 0-1.3-.5 2 2 0 0 0-1.3.5l-.3.2zM4.4 12H5l-.3-1.3c0-.1 0-.2.2-.2h.2c.2 0 .3 0 .2.2L5 12h1v-.7c0-.2.1-.3.3-.3H8v1.7h1.9v.8c0 .5-.4 1-1 1a1 1 0 0 1-1-1v-.8H6v-.3H4.4V12zm5 0h1.3l-.3-1.3c0-.1 0-.2.2-.2h.2c.2 0 .3 0 .2.2l-.3 1.3h.6v.4h-2V12zm.7 1l1.2.4V13l-1.2-.4v.4zm-2.6-.3v1.6a1 1 0 0 1-.4.1v-1.7h.4zm-.8 1.7v-1.7h-.4v1.6l.4.1zm-1.1-1.3l-1.2.3V13l1.2-.4v.4z",fill:"#C8414B"}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 11.3H6.3v.4h.2v.3h-.2v.4h1.2V12h-.2v-.3h.2v-.4z",fill:"#FAB446"}),Ee.createElement("path",{d:"M8 9.6h-.3v1H8v-1z",fill:"#FFB441"}),Ee.createElement("path",{d:"M9 13.4v.2l-.2.1-.2-.1v-.2H9zm.4-.3H8.2v.5c0 .3.3.5.6.5s.6-.2.6-.5V13z",fill:"#FAB446"}),Ee.createElement("path",{d:"M8.8 12.4a.4.4 0 0 1-.4-.4v-.3c0-.2.2-.4.4-.4s.4.2.4.4v.3c0 .2-.2.4-.4.4z",fill:"#FFA0D2"}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.4 12.7c0 .3-.2.5-.5.5-.4 0-.6-.2-.6-.5s.2-.5.6-.5c.3 0 .5.2.5.5zm-2.6 1.7H4.2v.4h1.6v-.4zm5.7 0H10v.4h1.5v-.4z",fill:"#5064AA"}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.1 10.5l.2-.2c0-.1 0-.2-.2-.2l-.2.2.2.2zm.8 0l.2-.2-.2-.2-.2.2s0 .2.2.2zm1-.2l-.3.2-.2-.2.2-.2.2.2z",fill:"#FFD250"}))));mg.displayName="EsFlag";const pg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M22 8.7H2v6.6h20V8.7z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M17.6 2H6.4C4 2 2 4 2 6.4v2.3h20V6.4C22 4 20 2 17.6 2z",fill:"#73AF00"}),Ee.createElement("path",{d:"M2 17.6C2 20 4 22 6.4 22h11.2c2.4 0 4.4-2 4.4-4.4v-2.3H2v2.3z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M12 10h-.3a.4.4 0 0 1-.3-.4c.2.2.4.3.6.1.2.2.5.1.6 0a.4.4 0 0 1-.6.3zm1.4 2.7c-.2.5-.5 1-1 1.2l.9.1c-.4.2-.8.2-1.1 0l-.2.4-.2-.3h-1.1V14l.9-.1a2.2 2.2 0 0 1-.5-3.6c-.6 1-.3 2.5.7 3.2v-3c-.1 0 0-.1 0-.1l.1-.2h.2l.1.2h.1v3.1c1-.7 1.2-2.1.6-3.2.7.6.9 1.6.5 2.4zm.8-1.7c-.2-.4-.6-.7-1-.9a2.4 2.4 0 0 1 .2 3.5 2 2 0 0 0 .8-2.6zm-3.3-.8a2.4 2.4 0 0 0-.3 3.4 2 2 0 0 1 .2-3.5z",fill:"#FF4B55"}))));pg.displayName="FaFlag";const hg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M3.3 3.3C2.5 4 2 5.2 2 6.3v11.3c0 1.2.5 2.3 1.3 3.1L12 12 3.3 3.3z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M3.3 20.7c.8.8 1.9 1.3 3 1.3h11.3c2.4 0 4.4-2 4.4-4.4V12H12l-8.7 8.7z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M17.6 2H6.4C5.2 2 4 2.5 3.3 3.3L12 12h10V6.4C22 4 20 2 17.6 2z",fill:"#2841C1"}),Ee.createElement("path",{d:"M5.6 13.1a1.1 1.1 0 1 0 0-2.2 1.1 1.1 0 0 0 0 2.2z",fill:"#FFE15A"}),Ee.createElement("path",{d:"M5.6 12l-.4-1.7.4-.5.4.5-.4 1.7zM5.6 12l.4 1.7-.4.5-.4-.5.4-1.7zM5.6 12l-1.7.4-.6-.4.6-.4 1.7.4zM5.6 12l1.7-.4.5.4-.5.4-1.7-.4z",fill:"#FFE15A"}),Ee.createElement("path",{d:"M5.6 12l.9-1.5h.7L7 11l-1.5.9zM5.6 12l-1 1.5H4V13l1.6-.9z",fill:"#FFE15A"}),Ee.createElement("path",{d:"M5.6 12L4 11.1l-.1-.7.7.1.9 1.5zM5.6 12l1.5.9v.7l-.6-.1-1-1.5zM3.1 5v.4l-.3.2.4.1v.5h.2l.2-.4H4c.1 0 .1 0 0 0l-.2-.3L4 5V5l-.5.2-.3-.3s-.1 0 0 0zM3.3 17.9l-.1.4-.5.1v.1l.4.2v.5l.4-.3.4.2-.2-.5.4-.3h-.5l-.2-.4h-.1zM10 11.4l-.3.3-.5-.1.2.4-.2.4s0 .1 0 0h.5l.2.3h.2v-.5l.4-.1V12l-.5-.2v-.4z",fill:"#FFE15A"}),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0"},Ee.createElement("path",{fill:"#fff",transform:"translate(2 2)",d:"M0 0h20v20H0z"}))))));hg.displayName="FlFlag";const vg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M6.375 2C3.95875 2 2 3.95875 2 6.375V17.625C2 20.0413 3.95875 22 6.375 22H8.66668V2H6.375Z",fill:"#2841C1"}),Ee.createElement("path",{d:"M8.66577 2V22H15.3324V2H8.66577Z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M17.6259 2H15.3342V22H17.6259C20.0422 22 22.0009 20.0413 22.0009 17.625V6.375C22.0009 3.95875 20.0422 2 17.6259 2Z",fill:"#FB4B4E"}))));vg.displayName="FrFlag";const gg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M18 2H6c-2.2.2-4 2-4 4.4v2.3h20V6.4C22 4 20.2 2.2 18 2z",fill:"#FAB446"}),Ee.createElement("path",{d:"M2 17.6C2 20 3.8 21.8 6 22h12c2.2-.2 4-2 4-4.4v-2.3H2v2.3z",fill:"#73AF00"}),Ee.createElement("path",{d:"M22 8.7H2v6.6h20V8.7z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M12 14.3a2.3 2.3 0 1 1 0-4.6 2.3 2.3 0 0 1 0 4.6zm0-4.2a1.9 1.9 0 1 0 0 3.8 1.9 1.9 0 0 0 0-3.8z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12.3a.3.3 0 1 0 0-.6.3.3 0 0 0 0 .6z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l-.7.1H10V12l1.4-.1h.7v.1z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l.7.1H14V12l-1.4-.1H12v.1z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l-.1-.7V10h.1l.1 1.4v.7H12z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l-.1.7V14h.1l.1-1.4V12H12zM12 12l-.5-.4-1-1 1.1.9.4.5z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l.4.5 1 1-.9-1.1-.5-.4zM12 12l.4-.5 1-1-.9 1.1-.5.4zM12 12l-.5.4-1 1 1.1-.9.4-.5z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l-.6.3-1.3.5 1.3-.6.6-.2zM12 12l.6-.2 1.3-.6-1.3.5-.6.3zM12 12l-.3-.6-.5-1.3.6 1.3.2.6z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l.2.6.6 1.3-.5-1.3-.3-.6z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l-.6-.2-1.3-.6 1.3.5.6.3zM12 12l.6.3 1.3.5-1.3-.6-.6-.2z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12l.2-.6.6-1.3-.5 1.3-.3.6zM12 12l-.3.6-.5 1.3.6-1.3.2-.6z",fill:"#2841C1"}),Ee.createElement("path",{d:"M12 12.3a.3.3 0 1 0 0-.6.3.3 0 0 0 0 .6z",fill:"#F5F5F5"}),Ee.createElement("path",{d:"M12 12.2a.2.2 0 1 0 0-.4.2.2 0 0 0 0 .4z",fill:"#2841C1"}))));gg.displayName="HiFlag";const _g=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.625 2H6.375C3.95875 2 2 3.95875 2 6.375V12H22V6.375C22 3.95875 20.0413 2 17.625 2Z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M2 17.625C2 20.0413 3.95875 22 6.375 22H17.625C20.0413 22 22 20.0413 22 17.625V12H2V17.625Z",fill:"#F6F6F6"}))));_g.displayName="IdFlag";const fg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.625 2H6.375C3.95875 2 2 3.95875 2 6.375V17.625C2 20.0413 3.95875 22 6.375 22H17.625C20.0413 22 22 20.0413 22 17.625V6.375C22 3.95875 20.0413 2 17.625 2Z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M11.6667 16.6668C14.244 16.6668 16.3333 14.5774 16.3333 12.0001C16.3333 9.42277 14.244 7.33344 11.6667 7.33344C9.08934 7.33344 7 9.42277 7 12.0001C7 14.5774 9.08934 16.6668 11.6667 16.6668Z",fill:"#FB4B4E"}))));fg.displayName="JaFlag";const Eg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H6.4C4 2 2 4 2 6.4v11.2C2 20 4 22 6.4 22h11.2c2.4 0 4.4-2 4.4-4.4V6.4C22 4 20 2 17.6 2z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M14 9.1c-1.7-1-3.8-.6-4.9 1A1.7 1.7 0 1 0 12 12a1.7 1.7 0 0 1 2.9 2c1-1.7.6-3.8-1-4.9z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M9.1 10a1.7 1.7 0 1 0 2.9 2 1.7 1.7 0 0 1 2.9 2A3.4 3.4 0 1 1 9 10z",fill:"#2841C1"}),Ee.createElement("path",{d:"M15.7 7.8l.6 1V9l-.2.1h-.3l-.6-1V8l.2-.1h.3zM16.6 9.3l.7 1v.2h-.5l-.6-1v-.2h.2c0-.1.2-.1.2 0zM16.3 7.4L18 9.8v.2l-.2.1h-.2l-1.6-2.4v-.3h.2c0-.1.2-.1.2 0zM17 7l.6.9V8l-.2.1h-.2l-.6-1V7l.2-.1h.2zM18 8.4l.6 1v.2h-.2c0 .1-.2.1-.2 0l-.7-1v-.2h.5zM7.2 13.5l1.6 2.4v.2l-.2.1h-.3l-1.6-2.4v-.3h.5zM6.5 14l.6.9v.2l-.2.1h-.2l-.6-1V14l.2-.1h.2zM7.5 15.4l.6 1v.2h-.2c0 .1-.2.1-.2 0l-.7-1v-.2h.5zM5.8 14.4l1.6 2.4v.2l-.2.1H7l-1.6-2.4v-.3h.2c0-.1.2-.1.2 0zM6.7 10.2l1.6-2.4h.4v.3l-1.5 2.4h-.4v-.3zM6 9.8l1.7-2.4c0-.1.1-.1.2 0h.2v.3L6.5 10h-.4v-.3zM5.4 9.3L7 7h.4v.3L5.8 9.6c0 .1-.1.1-.2 0h-.2v-.3zM15.2 15.9l.6-1h.4l.1.3-.6 1h-.4v-.3zM16.2 14.4l.6-1h.3l.1.1v.3l-.6 1h-.2l-.2-.1v-.3zM15.9 16.3l.6-1h.3l.1.1v.3l-.6 1h-.2l-.2-.1v-.3zM16.9 14.9l.6-1h.4v.3l-.6 1H17v-.3zM16.6 16.8l.6-1h.4v.3l-.6 1h-.4v-.3zM17.5 15.3l.7-1h.2l.2.1v.3l-.6 1h-.3l-.1-.1v-.3z",fill:"#464655"}))));Eg.displayName="KoFlag";const Sg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H6.4C5 2 3.9 2.6 3 3.4H21c-.8-.8-2-1.4-3.3-1.4z",fill:"#FF4B55"}),Ee.createElement("path",{d:"M20.9 3.4H3L2.3 5h19.4c-.2-.6-.5-1-.8-1.5z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M21.7 4.9H2.3c-.2.4-.3.9-.3 1.4h20c0-.5-.1-1-.3-1.4z",fill:"#FF4B55"}),Ee.createElement("path",{d:"M2 6.3v1.4h20V6.4v-.1H2z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M22 7.7H2v1.4h20V7.7z",fill:"#FF4B55"}),Ee.createElement("path",{d:"M22 9.1H2v1.5h20V9z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M22 10.6H2V12h20v-1.4z",fill:"#FF4B55"}),Ee.createElement("path",{d:"M2 12.5h.5v1H22V12H2v.5z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M2.5 12.5H2V15h20v-1.5H2.5v-.9z",fill:"#FF4B55"}),Ee.createElement("path",{d:"M22 14.9H2v1.4h20v-1.4z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M2 17.6v.1h20v-1.4H2v1.3z",fill:"#FF4B55"}),Ee.createElement("path",{d:"M2.3 19.1h19.4c.2-.4.3-.9.3-1.4H2c0 .5.1 1 .3 1.4z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M3.1 20.6H21l.8-1.5H2.3c.2.6.5 1 .8 1.5z",fill:"#FF4B55"}),Ee.createElement("path",{d:"M6.4 22h11.2c1.3 0 2.5-.6 3.3-1.4H3c.8.8 2 1.4 3.3 1.4z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M13.4 2h-7C4 2 2 4 2 6.4v7h11.4V2z",fill:"#2841C1"}),Ee.createElement("path",{d:"M4.5 7.7A3 3 0 0 1 8.7 5s.1 0 0-.1a3.5 3.5 0 0 0-5.4 2.7 3.5 3.5 0 0 0 5.5 3.1 3 3 0 0 1-4.3-2.8z",fill:"#FFE15A"}),Ee.createElement("path",{d:"M11.5 7.7l1.3-.5v-.1l-1.4.1 1-1-.2-.1-1.2.7.5-1.3c0-.1-.1-.1-.1 0l-.8 1-.2-1.3h-.1L10 6v.5l-.8-1.2h-.1l.4 1.4L8.4 6h-.1l1 1.1-1.4-.1c-.1 0-.1 0 0 .1l1.2.5-1.3.5v.1h1.5l-1 1 1.3-.7-.4 1.4L10 9l.1.5.2.8c0 .1 0 .1 0 0l.3-1.3.8 1.1-.4-1.4 1.2.7h.1l-1-1h1.5l-1.3-.6z",fill:"#FFE15A"}),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0"},Ee.createElement("path",{fill:"#fff",transform:"translate(2 2)",d:"M0 0h20v20H0z"}))))));Sg.displayName="MsFlag";const yg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.625 2H6.375C3.95875 2 2 3.95875 2 6.375V17.625C2 20.0413 3.95875 22 6.375 22H17.625C20.0413 22 22 20.0413 22 17.625V6.375C22 3.95875 20.0413 2 17.625 2Z",fill:"#73AF00"}),Ee.createElement("path",{d:"M20.1638 11.9998L11.9999 3.83588L3.83599 11.9998L11.9999 20.1637L20.1638 11.9998Z",fill:"#FFE15A"}),Ee.createElement("path",{d:"M12.0001 15.3836C13.8688 15.3836 15.3837 13.8687 15.3837 12C15.3837 10.1313 13.8688 8.61639 12.0001 8.61639C10.1313 8.61639 8.61646 10.1313 8.61646 12C8.61646 13.8687 10.1313 15.3836 12.0001 15.3836Z",fill:"#2841C1"}),Ee.createElement("path",{d:"M9.09664 10.2691C8.93699 10.5363 8.81375 10.8268 8.7323 11.1352C10.608 10.994 13.3828 11.5188 15.1489 13.2325C15.2641 12.9382 15.3402 12.6248 15.3688 12.2971C13.5452 10.7624 11.0241 10.2166 9.09664 10.2691Z",fill:"#F5F5F5"}))));yg.displayName="PtFlag";const bg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.9304 2H6.06961C3.79586 2.15701 2 4.05289 2 6.36896V8.66672H22V6.36896C22 4.05289 20.2041 2.15701 17.9304 2Z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M2 17.6311C2 19.9472 3.7959 21.8431 6.06965 22H17.9304C20.2041 21.8431 22 19.9472 22 17.6311V15.3333H2V17.6311Z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M22 8.66663H2V15.3332H22V8.66663Z",fill:"#2841C1"}))));bg.displayName="RuFlag";const Cg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("g",{clipPath:"url(#clip0123123)"},Ee.createElement("path",{d:"M2.16797 5.16406C2.05859 5.54688 2 5.95312 2 6.375V8.32031H22V6.375C22 5.95703 21.9414 5.55078 21.832 5.16406H2.16797Z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M2 17.6251C2 18.043 2.05859 18.4493 2.16797 18.836H21.8281C21.9375 18.4532 21.9961 18.0469 21.9961 17.6251V15.6797H2V17.6251Z",fill:"#F6F6F6"}),Ee.createElement("path",{d:"M6.13698 22.0115H18.1989C20.0901 21.8825 21.6594 20.588 22.164 18.8516H2.16797C2.67651 20.5919 4.24186 21.8825 6.13698 22.0115Z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M18.1989 2.01166H6.13691C4.24577 2.14072 2.67644 3.4352 2.17188 5.17161H22.1679C21.6593 3.43129 20.094 2.14072 18.1989 2.01166Z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M22 8.32025H2V15.6796H22V8.32025Z",fill:"#2841C1"})),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0123123"},Ee.createElement("rect",{width:"20",height:"20",fill:"white",transform:"translate(2 2)"}))))));Cg.displayName="ThFlag";const Tg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H6.4C4 2 2 4 2 6.4v11.2C2 20 4 22 6.4 22h11.2c2.4 0 4.4-2 4.4-4.4V6.4C22 4 20 2 17.6 2z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M6.4 10.3a3.1 3.1 0 0 0 4.8 2.6h.1c-.7.8-1.7 1.3-2.8 1.3a3.9 3.9 0 1 1 2.8-6.6s0 .1-.1 0a3.1 3.1 0 0 0-4.8 2.6zm7-.6L13 9h-.1v1l-1 .4v.1l1 .3v1s0 .1.1 0l.6-.8 1 .3-.6-.9.6-.8s0-.1 0 0l-1 .2z",fill:"#F6F6F6"}))));Tg.displayName="TrFlag";const Ag=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H7.2v20h10.4c2.4 0 4.4-2 4.4-4.4V6.4C22 4 20 2 17.6 2z",fill:"#168B59"}),Ee.createElement("path",{d:"M6.4 2C4 2 2 4 2 6.4v11.2C2 20 4 22 6.4 22h.8V2h-.8zM18.4 14A4.2 4.2 0 1 1 13 7.7s0-.1 0 0a4.6 4.6 0 1 0 5.6 6.3zM16.2 8.5l.6.6.8-.3c.1 0 .3 0 .2.2l-.5.7.6.7c.1.1 0 .2 0 .2l-1-.2-.4.8h-.3v-1l-1-.2a.1.1 0 0 1 0-.2l.9-.4-.1-.9s.1-.1.2 0z",fill:"#F6F6F6"}))));Ag.displayName="UrFlag";const kg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H6.4C4 2 2 4 2 6.4v11.2C2 20 4 22 6.4 22h11.2c2.4 0 4.4-2 4.4-4.4V6.4C22 4 20 2 17.6 2z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M12.2 7.7l1 3 3.2.1c.2 0 .3.2.1.4L14 13l1 3c0 .2-.1.4-.3.3l-2.6-2-2.6 2c-.2 0-.4 0-.3-.2l1-3.1-2.6-2c-.2 0-.1-.3 0-.3h3.3l1-3c0-.2.3-.2.4 0z",fill:"#FFE15A"}))));kg.displayName="ViFlag";const wg=Ee.forwardRef(((e,a)=>Ee.createElement(Vt.leh,Object.assign({},e,{ref:a}),Ee.createElement("path",{d:"M17.6 2H6.4C4 2 2 4 2 6.4v11.2C2 20 4 22 6.4 22h11.2c2.4 0 4.4-2 4.4-4.4V6.4C22 4 20 2 17.6 2z",fill:"#FB4B4E"}),Ee.createElement("path",{d:"M6.5 5.4L7 7h1.5c.2 0 .3.3.1.4l-1.2 1 .5 1.4c0 .2-.2.4-.4.3L6.3 9 5 10c-.2 0-.4 0-.3-.3L5 8.2 4 7.2c-.2 0-.1-.3 0-.3h1.7L6 5.4c0-.2.3-.2.4 0zM12.2 5.8l.3.5.6-.2s.1 0 0 .1l-.3.5.4.5-.1.1-.6-.2-.3.5H12V7l-.6-.2v-.2l.6-.2v-.6h.2zM10 4.3h.6l.2-.5h.2l.1.7h.6s.1.1 0 .2l-.5.3.1.6s0 .1-.1 0l-.4-.4-.6.3s-.1 0 0 0l.2-.6-.5-.4v-.2zM11 10.2l-.4.5-.6-.2s-.1 0 0 .1l.3.5-.4.5.1.1.6-.2.3.5h.2v-.7l.6-.1V11l-.6-.2v-.6s-.1-.1-.2 0zM13.1 8.8h-.6l-.2-.5H12L12 9l-.6.1c-.1 0-.1.1 0 .2l.5.3-.1.5v.1l.5-.4.6.3s.1 0 0-.1l-.2-.5.5-.5-.1-.1z",fill:"#FFE15A"}))));wg.displayName="ZhFlag";const Ng=P.J2.map((e=>P.Gt[e])),Rg=Object.entries(P.gX).reduce(((e,a)=>{let s=(0,ci.Z)(a,2),i=s[0],r=s[1];return e[P.Gt[i]]=r,e}),{});const Ig=e=>{let a=e.service;const s=(0,Ot.o)(a.store),r=s.list,n=s.locale,o=Ee.useMemo((()=>{return(e=r,Ng.filter((a=>e.includes(a)))).map((e=>{const a=i[e];var s;return Ee.createElement(Ht.Ph.Option,{key:e,value:e,label:null!==(s=Rg[e])&&void 0!==s?s:"",dataTest:"setting_language_select_item",icon:a?Ee.createElement(a,null):null})}));var e}),[r]);return n&&o.length?Ee.createElement(Ht.Ph,{placeholder:Ee.createElement(Nt._,{id:"language",defaultMessage:"Language"}),fullWidth:!0,value:n,floatingLabel:!0,onChange:a.changeLocale,dataTest:"setting_language_select",labelDataTest:"setting_language_select_label",placeholderDataTest:"setting_language_name"},o):null};Ig.displayName="LocaleSelect";const Dg=(0,gt.v)({name:"LocaleSettings",dependsOn:[Ft.O,Bt.j]});Dg.use(Ut.D2,((e,a,s)=>[...e,{component:Ee.createElement(Ig,{service:s.locale}),title:Ee.createElement(Nt._,{id:"language",defaultMessage:"Language"}),dataTestTitle:"setting_language_name",dataTestHost:"setting_language"}])).onStart((e=>e.locale.load()));var Og=s(16721),Lg=s(85101);const Mg=(0,at.U)([Gc,fn,Qt.EA,nt.e8.useRepositories((()=>({timeDeltaRepository:new TimeDeltaRepository}))),ot.F0.useRepositories((()=>({commandRepository:new Vl.aC,analyticsRepository:new Vl.v4}))),Na.G,bt,Ft.O,Zt.d,Bt.j,Dg,Yt,wt.u,mr.w,rt.u$,ps.Kg,bn,Cn.U,Xi.im,At.M,Es,rn.UE,Uh,hn.J,vn.n,sl,mn,Tn,pn,Or,dd,ur,Er,Jt.Q,Mr,Yo.$,Jo.Q,Xo.BB,er.mn,Vr,sn,Oo,Tt.Bu,Lo.Z,Mo.x,yv,Fo,zo,Ct.DP,Ko.n,qo.y,Et.iQ,St.V1,yl,bl.T,xt.x,Rt.K,kt.T,Pt,pl,Aa,Ga,zs.y,ud.K,li,md.c,Gl,ih,Og.r,lt.Ul.useRepositories((()=>({tradingMechanicsRepository:new TradingMechanicsRepository}))).enable((()=>(0,st.ic)(ft.APP_SERVICE))),ct.M7.useRepositories((()=>({fttAssetsRepository:new FttAssetsRepository}))).onStart(function(){var e=(0,ie.Z)((function*(e){let a=e.fttAssetsService;yield(0,st.ic)(ft.PAIR_SERVICE_BO),yield a.load()}));return function(a){return e.apply(this,arguments)}}()),dt.qS.useRepositories((()=>({fxAssetsRepository:new FxAssetsRepository}))).onStart(function(){var e=(0,ie.Z)((function*(e){let a=e.fxAssetsService;yield(0,st.ic)(ft.PAIR_SERVICE_FX),yield a.load()}));return function(a){return e.apply(this,arguments)}}()),dt.tA.useRepositories((()=>({fxCommissionsRepository:new FxCommissionsRepository}))).onStart((e=>{e.fxCommissionsService.load()})),dt.lh.useRepositories((()=>({fxSentimentsRepository:new FxSentimentsRepository}))).onStart((e=>{e.fxSentimentsService.load()})).enable((()=>!1)),ct.$7.useRepositories((()=>({fttSentimentsRepository:new FttSentimentsRepository}))).onStart((e=>{e.fttSentimentsService.load()})).enable((()=>!1)),ct.FM.useRepositories((()=>({fttAssetFavoriteRepository:new FttAssetFavoriteRepository}))).onStart((e=>{e.fttAssetFavoriteService.init()})).enable((()=>!1)),dt.Cv.useRepositories((()=>({fxAssetFavoriteRepository:new FxAssetFavoriteRepository}))).onStart((e=>{e.fxAssetFavoriteService.init()})).enable((()=>!1)),_t.useRepositories((()=>({sptAssetsRepository:new SptAssetsRepository_SptAssetsRepository}))),Va.y,Wa.b,ts.o,es.x,nv,ja.P,za.o,Kl.l,Qi,$a,os,sg,ed,bi,Ci,ui,Ti,ig.e,rg.u,ls.Q,lg,Lg.t],{suppressError:(0,m.y)("production"),errorHandler(e,a,s){console.error("[".concat(e,"]"),a),ge.bR.sendFeatureException(e,a,s)},renderError(e){let a=e.onReset;return Ee.createElement(dh,{onReset:a})}});(0,it.x)(Mg.container),(0,st.tm)(we.Z.binder);var Pg=s(31906),xg=s(33801);const Fg=e=>{let a=e.children;const s=(0,ci.Z)(Ee.useState(xg.C.getCurrentLocale()),2),i=(s[0],s[1]);return Ee.useEffect((()=>xg.C.onChange(i)),[xg.C]),Ee.createElement(Pg.zt,{value:S.NW.getInstance()},a)},Bg=e=>{let a=e.root;return Mg.render(Ee.createElement(ke.t5.Provider,{value:we.Z.binder},Ee.createElement(Fg,null,Ee.createElement(Ae.f,{root:a,theme:"dark",defaultTheme:"dark"},Ee.createElement(tt,{dir:(0,Te.L)()})))))};Bg.displayName="Root";const Zg=new class BinaryBootstrap{static sendTWAEvent(){(0,Se.OR)("olymptrade\\.lite")&&(0,ye.L)({event:"uaGtmEvents_clicks",eventCategory:"twa_open",eventAction:"twa_open",eventLabel:"twa_open"})}start(){if(this.started)throw new Error("App already started");ae.Sv.startMark(ae.Sv.PerformanceMetric.AppInitialization),ae.Sv.startMark(ae.Sv.PerformanceMetric.FirstChartContent),te.v.start("platformEntry").then((()=>{this.render(),this.afterRender()})).catch((e=>{e&&"status"in e&&401===e.status?console.error("Session expired, redirect to auth"):(console.error("FATAL 1",e),this.appContainer instanceof HTMLElement&&fe.render(Ee.createElement(be.Z),this.appContainer))}))}render(e){this.appContainer instanceof HTMLElement&&fe.render(Ee.createElement(Bg,{root:document.body}),this.appContainer,e)}afterRender(){if(document.body){const e="string"==typeof te.v.geo?te.v.geo:"",a="country-".concat(e),s="lang-".concat(te.v.lang),i=te.v.isSng?"is-sng":"not-sng",r=-1===navigator.userAgent.indexOf("Chrome/49")?null:"isChrome49",n="is-beta";document.body.classList.add(a,s,i,n),r&&document.body.classList.add("isChrome49")}const e=document.querySelector(".payout-btn-in");e&&e.classList.remove("hide"),window.logMyEvents=!1,window.filterMyEvents=!1,BinaryBootstrap.sendTWAEvent(),setTimeout((()=>{Ce.send()}),5e3)}constructor(){this.appContainer=null,this.started=!1,this.appContainer=document.querySelector("#page-container")}},Ug=Zg;{const e=window.SCRIPT_PERFORMANCE_MARK?"".concat(window.SCRIPT_PERFORMANCE_MARK,"-end"):null;e&&performance.mark(e),(0,ae.mw)({apiKey:"AIzaSyClt84qh8E9E3LeNJgbrSnd8P1RqWOe9Qc",projectId:"olymptrade-auth",appId:"1:491386263015:web:9b70f8272c0af087971942",messagingSenderId:"491386263015",measurementId:"G-23CFZWTC69"}).then((a=>{const s=a.performance();s.instrumentationEnabled=!0,s.dataCollectionEnabled=!0,window.SCRIPT_PERFORMANCE_MARK&&e&&performance.measure(window.SCRIPT_PERFORMANCE_MARK,window.SCRIPT_PERFORMANCE_MARK,e)}))}Ug.start(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{!function(){_e.apply(this,arguments)}()})),window.addEventListener("touchstart",(function e(){se=!0,window.removeEventListener("touchstart",e,!1)}),!1),(0,I.Z$)(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;window.dataLayer||(window.dataLayer=[]),(0,ce.gw)(e).then(he)}(),(0,I.Ic)(),setTimeout((()=>{B.$.platformValues(["country_data"]).then((e=>{let a=e.country_data;P.gw.includes(a.code)&&s.e(1989).then(s.bind(s,11989)).then((e=>e.default.init(!1)))}))}),1e3)},62132:(e,a,s)=>{"use strict";s.d(a,{W:()=>S});var i=s(29257),r=s(98659),n=s(74434),o=s(3803),l=s(44175),c=s(62981),d=s(56864),u=s(78641),m=s(8862),p=s(560),h=s(7950),v=s(68180),g=s(27017),_=s(79805);const f=(e,a)=>{const s=e*a;return e+(i=-s,r=s,Math.floor(Math.random()*(r-i+1)+i));var i,r},E=(0,r.z)({reconnectDelay(e){const a=Math.min(1e3*e,5e3);return f(a,.2)},createConnection:()=>(0,i.Z)((function*(){const e=yield l.q.getActual();return(0,n.I)({url:e.otp.ws.common.url,connectionTimeout:5e3})}))(),batching:{timeframe:200},map:{toRaw:d.O,fromRaw:d.f}}),S=(0,o.T)({emitter:E,scheme:{connect:u.$,connectionClosing:p.Vk,subscribeChanges:m.z8,unsubscribeChanges:m.Oh,subscribeChangesSkipBatching:m.Tu,sptCandlesHistory:g.SF,sptInstrumentChange:g.SB,sptCandlesSubscribe:g.Ol,sptCandlesUnsubscribe:g.XQ,sptCandleChange:g.fH,sptTickChanged:g.FO,fxCandlesHistory:v.bY,fxCandleChange:v.LE,fxCandlesSubscribe:v.jj,fxCandlesUnsubscribe:v.d7,fxTickChanged:v.gc,fxInstrumentChange:v.Dp,fxPairCommissionChange:v.Oc,fxPairSentimentChange:v.Ep,fxDealTurningTrailingOff:v.R0,fxDealsToppingUp:v.SX,fxDealsClosing:v.EA,fxDealsChanging:v.oB,fxDealsSubscribe:v.ju,fxDealsUnsubscribe:v.bG,fxDealsReconnect:v.ki,fxDealsOpen:v.dw,fxDealsClosed:v.RD,fxDealsProceedMin:v.Qm,fxDealsChange:v.Gc,fxOrdersChange:v.he,fxOrdersReconnect:v.Rn,fxOrdersOpening:v.zJ,fxOrdersCanceling:v.Ld,fxOrdersChanging:v._4,fxPairCommissionSubscribe:v.Kd,fxTrendsSubscribe:v.dn,fxTrendsUnsubscribe:v.jI,fxTrendsChange:v.FN,fxFavoriteAssetChange:v.ct,fxFavoriteAssetSet:v.dM,fttTickChanged:h.j4,fttInstrumentChange:h.o5,fttCandlesSubscribe:h.lA,fttCandlesUnsubscribe:h.sC,fttCandleChange:h.TF,fttCandlesHistory:h.wh,fttPairSentimentChange:h.nd,fttPairWinpercChange:h.pE,fttSubscribeCandles:h.BL,fttUnsubscribeCandles:h.Hh,fttPairActiveSet:h.ln,fttDealsCanceling:h.vu,fttDealsSubscribe:h.Lh,fttDealsUnsubscribe:h.S_,fttDealsReconnect:h.NQ,fttDealsOpen:h.hd,fttDealsClosed:h.tH,fttDealsProceedMin:h.XE,fttOrdersChange:h.AK,fttOrdersReconnect:h.BE,fttOrdersOpening:h.Vc,fttOrdersCanceling:h._f,fttAnalyzerSuccessSubscribe:h.hg,fttAnalyzerSuccessUnsubscribe:h.iZ,fttAnalyzerSuccessChange:h.fZ,fttAnalyzerGroupsList:h.t6,fttTrendsSubscribe:h.pX,fttTrendsUnsubscribe:h.H5,fttTrendsChange:h.Lw,fttFavoriteAssetChange:h.ke,fttFavoriteAssetSet:h.Tk,userChanged:p.JY,userOnlineChange:p.Uo,kycStateChanged:p.VO,serverTimeUp:p.QZ,promoCodeCreated:p.TV,promoCodeChanged:p.dO,promoCodeRemoved:p.aF,promoOfferStatus:p.j3,ratingsPlayerInfoGet:p.P0,ratingsStateGet:p.mA,ratingsLeaderboardChanged:p.Ql,battleRoomsStateGet:p.o$,battleRoomsStateChanged:p.o8,battleRoomsConfigGet:p.Hh,battleRoomsHistoryGet:p.Xf,battleRoomsSearchStart:p.Mk,battleRoomsSearchStop:p.d1,battleRoomsConfirmationChoose:p.q7,battleRoomsReactionSubmit:p.mz,battleRoomsReactionReceived:p.RM,battleRoomsSearchRestrictionGet:p.Cr,battleRoomsLeaderboardChanged:p.lE,battleRoomsDealsGet:p.Hn,battleRoomsDealsOpen:p.Yw,battleRoomsDealsClose:p.i,paymentSuccess:p.Sq,copyTradingLeaderboardUpdated:p.C5,copyTradingSignalsFiltersGet:p.WO,copyTradingSignalsFiltersUpdate:p.yE,copyTradingSignalsAdded:p.Fq,copyTradingSignalsActiveAssetsChanged:p.rv,promoCount:p.dv,restrictionsChange:p.dm,payoutCommissionGet:p.pk,payoutHoldChanged:p.uf,balanceChanged:p.T2}});S.subscribe.connectionClosing((()=>{S.reconnect()})),S.on("close",(e=>{switch(e.code){case c._.userLogout:S.close({force:!0});break;case c._.serviceRestart:S.reconnect()}})),(0,_.l)(S)},62981:(e,a,s)=>{"use strict";var i;s.d(a,{_:()=>i}),function(e){e[e.normalClosure=1e3]="normalClosure",e[e.noStatusReceived=1005]="noStatusReceived",e[e.adnormalClosure=1006]="adnormalClosure",e[e.userLogout=1008]="userLogout",e[e.serviceRestart=1012]="serviceRestart"}(i||(i={}))},8862:(e,a,s)=>{"use strict";s.d(a,{F0:()=>d,OG:()=>m,Oh:()=>g,TG:()=>p,Tu:()=>v,Wh:()=>_,jH:()=>c,xU:()=>f,z8:()=>h});var i=s(37323),r=s(64356),n=s(46464),o=s(54829),l=s(86933);const c=e=>e.data,d=c;var u;const m=e=>{var a;return[e.data,null!==(u=null===(a=e.error)||void 0===a?void 0:a[0])&&void 0!==u?u:null]},p=(e,a)=>(0,r.Z)((0,i.Z)({},a),{data:e}),h=(0,n.a)({event:l.Jm["changes:subscribe"],map:(e,a)=>(0,r.Z)((0,i.Z)({},a),{type:o.V.request,data:e})}),v=(0,n.a)({event:l.Jm["changes:subscribe"],map:(e,a)=>(0,r.Z)((0,i.Z)({},a),{type:o.V.request,data:e}),skipBatching:!0}),g=(0,n.a)({event:l.Jm["changes:unsubscribe"],map:(e,a)=>(0,r.Z)((0,i.Z)({},a),{type:o.V.request,data:e})}),_=(e,a)=>{h(e).call([a])},f=(e,a)=>{g(e).call([a])}},7950:(e,a,s)=>{"use strict";s.d(a,{AK:()=>L,BE:()=>I,BL:()=>y,H5:()=>Z,Hh:()=>b,Lh:()=>T,Lw:()=>U,NQ:()=>k,S_:()=>A,TF:()=>_,Tk:()=>G,Vc:()=>D,XE:()=>R,_f:()=>O,fZ:()=>x,hd:()=>w,hg:()=>M,iZ:()=>P,j4:()=>m,ke:()=>H,lA:()=>h,ln:()=>f,nd:()=>E,o5:()=>p,pE:()=>S,pX:()=>B,sC:()=>v,t6:()=>F,tH:()=>N,vu:()=>C,wh:()=>g});var i=s(37323),r=s(64356),n=s(12647),o=s(90979),l=s(46464),c=s(54829),d=s(86933),u=s(8862);const m=(0,n.X)({event:d.Jm["tick:change"],map:u.jH}),p=(0,n.X)({event:d.Jm["instrument:change:v2"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),h=(0,o.h)({event:d.Jm["candles:subscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.F0}),v=(0,o.h)({event:d.Jm["candles:unsubscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.F0}),g=(0,o.h)({event:d.Jm["candles:history"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.F0}),_=(0,n.X)({event:d.Jm["candle:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),f=(0,o.h)({event:d.Jm["pair_active:set"],mapRequest:u.TG,mapResponse:u.F0}),E=(0,n.X)({event:d.Jm["pair_sentiment:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),S=(0,n.X)({event:d.Jm["pair_winperc:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),y=(0,o.h)({event:d.Jm["candles:subscribe"],mapRequest:u.TG,mapResponse:u.F0}),b=(0,o.h)({event:d.Jm["candles:unsubscribe"],mapRequest:u.TG,mapResponse:u.F0}),C=(0,o.h)({event:d.Jm["deals:canceling"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),T=(0,o.h)({event:d.Jm["deals:subscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),A=(0,o.h)({event:d.Jm["deals:unsubscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),k=(0,l.a)({event:d.Jm["deals:reconnect"],map:(e,a)=>(0,r.Z)((0,i.Z)({},a),{type:c.V.push,data:e})}),w=(0,n.X)({event:d.Jm["deals:open"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),N=(0,n.X)({event:d.Jm["deals:closed"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),R=(0,n.X)({event:d.Jm["deals:proceed_min"],map:u.jH}),I=(0,l.a)({event:d.Jm["deals:order:reconnect"],map:(e,a)=>(0,r.Z)((0,i.Z)({},a),{type:c.V.push,data:e}),skipBatching:!0}),D=(0,o.h)({event:d.Jm["deals:order:opening"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),O=(0,o.h)({event:d.Jm["deals:order:canceling"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),L=(0,n.X)({event:d.Jm["deals:order:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),M=(0,o.h)({event:d.Jm["ftt:analyzer:success:subscribe"],mapRequest:u.TG,mapResponse:u.OG}),P=(0,o.h)({event:d.Jm["ftt:analyzer:success:unsubscribe"],mapRequest:u.TG,mapResponse:u.F0}),x=(0,n.X)({event:d.Jm["ftt:analyzer:success:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),F=(0,o.h)({event:d.Jm["ftt:analyzer:groups:list"],mapRequest:u.TG,mapResponse:u.OG}),B=(0,o.h)({event:d.Jm["ftt:trends:subscribe"],mapRequest:u.TG,mapResponse:u.OG}),Z=(0,o.h)({event:d.Jm["ftt:trends:unsubscribe"],mapRequest:u.TG,mapResponse:u.OG}),U=(0,n.X)({event:d.Jm["ftt:trends:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),H=(0,n.X)({event:d.Jm["ftt:favorite_pairs:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),G=(0,o.h)({event:d.Jm["ftt:favorite_pairs:set"],mapRequest:u.TG,mapResponse:u.OG})},68180:(e,a,s)=>{"use strict";s.d(a,{Dp:()=>_,EA:()=>C,Ep:()=>f,FN:()=>Z,Gc:()=>D,Kd:()=>E,LE:()=>p,Ld:()=>M,Oc:()=>S,Qm:()=>I,R0:()=>y,RD:()=>R,Rn:()=>O,SX:()=>b,_4:()=>P,bG:()=>k,bY:()=>m,ct:()=>U,d7:()=>v,dM:()=>H,dn:()=>F,dw:()=>N,gc:()=>g,he:()=>x,jI:()=>B,jj:()=>h,ju:()=>A,ki:()=>w,oB:()=>T,zJ:()=>L});var i=s(37323),r=s(64356),n=s(90979),o=s(12647),l=s(46464),c=s(54829),d=s(86933),u=s(8862);const m=(0,n.h)({event:d.Jm["fx_candles:history"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.F0}),p=(0,o.X)({event:d.Jm["fx_candle:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),h=(0,n.h)({event:d.Jm["fx_candles:subscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.F0}),v=(0,n.h)({event:d.Jm["fx_candles:unsubscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.F0}),g=(0,o.X)({event:d.Jm["fx_tick:change"],map:u.jH}),_=(0,o.X)({event:d.Jm["fx_instrument:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),f=(0,o.X)({event:d.Jm["fx_pair_sentiment:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),E=(0,n.h)({event:d.Jm["fx:pair_commission:change:subscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.F0}),S=(0,o.X)({event:d.Jm["fx_pair_commission:change"],map:u.jH}),y=(0,n.h)({event:d.Jm.fx_trailing_stop_turn_off,skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),b=(0,n.h)({event:d.Jm["fx_deals:topping_up"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),C=(0,n.h)({event:d.Jm["fx_deals:closing"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),T=(0,n.h)({event:d.Jm["fx_deals:changing"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),A=(0,n.h)({event:d.Jm["fx_deals:subscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),k=(0,n.h)({event:d.Jm["fx_deals:unsubscribe"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),w=(0,l.a)({event:d.Jm["fx_deals:reconnect"],map:(e,a)=>(0,r.Z)((0,i.Z)({},a),{type:c.V.push,data:e})}),N=(0,o.X)({event:d.Jm["fx_deals:open"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),R=(0,o.X)({event:d.Jm["fx_deals:closed"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),I=(0,o.X)({event:d.Jm["fx_deals:proceed_min"],map:u.jH}),D=(0,o.X)({event:d.Jm["fx_deals:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),O=(0,l.a)({event:d.Jm["fx_orders:reconnect"],map:(e,a)=>(0,r.Z)((0,i.Z)({},a),{type:c.V.push,data:e})}),L=(0,n.h)({event:d.Jm["fx_orders:opening"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),M=(0,n.h)({event:d.Jm["fx_orders:canceling"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),P=(0,n.h)({event:d.Jm["fx_orders:changing"],skipBatching:!0,mapRequest:u.TG,mapResponse:u.OG}),x=(0,o.X)({event:d.Jm["fx_orders:updated"],map:u.jH}),F=(0,n.h)({event:d.Jm["fx:trends:subscribe"],mapRequest:u.TG,mapResponse:u.OG}),B=(0,n.h)({event:d.Jm["fx:trends:unsubscribe"],mapRequest:u.TG,mapResponse:u.OG}),Z=(0,o.X)({event:d.Jm["fx:trends:change"],map:u.jH}),U=(0,o.X)({event:d.Jm["fx:favorite_pairs:change"],map:u.jH,onFirstSubscribe:u.Wh,onLastUnsubscribe:u.xU}),H=(0,n.h)({event:d.Jm["fx:favorite_pairs:set"],mapRequest:u.TG,mapResponse:u.OG})},78641:(e,a,s)=>{"use strict";s.d(a,{$:()=>i});const i=e=>({type:"legacy",call:e.emitter})},560:(e,a,s)=>{"use strict";s.d(a,{C5:()=>F,Cr:()=>S,Fq:()=>U,Hh:()=>N,Hn:()=>D,JY:()=>d,Mk:()=>b,P0:()=>_,QZ:()=>m,Ql:()=>E,RM:()=>I,Sq:()=>M,T2:()=>W,TV:()=>p,Uo:()=>u,VO:()=>c,Vk:()=>l,WO:()=>B,Xf:()=>w,Yw:()=>O,aF:()=>v,d1:()=>C,dO:()=>h,dm:()=>V,dv:()=>G,i:()=>L,j3:()=>g,lE:()=>y,mA:()=>f,mz:()=>R,o$:()=>A,o8:()=>k,pk:()=>P,q7:()=>T,rv:()=>H,uf:()=>x,yE:()=>Z});var i=s(12647),r=s(90979),n=s(86933),o=s(8862);const l=(0,i.X)({event:n.Jm["connection:closing"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),c=(0,i.X)({event:n.Jm["kyc:state:changed"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),d=(0,i.X)({event:n.Jm["user:change"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),u=(0,i.X)({event:n.Jm["user_online:change"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),m=(0,r.h)({event:n.Jm["servertime:up"],mapRequest:o.TG,mapResponse:e=>e.timestamp||0}),p=(0,i.X)({event:n.Jm["promocodes:created"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),h=(0,i.X)({event:n.Jm["promocodes:updated"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),v=(0,i.X)({event:n.Jm["promocodes:removed"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),g=(0,i.X)({event:n.Jm["promo_offer:updated"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),_=(0,r.h)({event:n.Jm["ratings:player:info:get"],mapRequest:o.TG,mapResponse:o.F0}),f=(0,r.h)({event:n.Jm["ratings:state:get"],mapRequest:o.TG,mapResponse:o.OG}),E=(0,i.X)({event:n.Jm["ratings:leaderboard:changed"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),S=(0,r.h)({event:n.Jm["battle_rooms:search:restriction:get"],mapRequest:o.TG,mapResponse:o.F0}),y=(0,i.X)({event:n.Jm["battle_rooms:leaderboard:changed"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),b=(0,r.h)({event:n.Jm["battle_rooms:search:start"],mapRequest:o.TG,mapResponse:o.OG}),C=(0,r.h)({event:n.Jm["battle_rooms:search:stop"],mapRequest:o.TG,mapResponse:o.OG}),T=(0,r.h)({event:n.Jm["battle_rooms:confirmation:choose"],mapRequest:o.TG,mapResponse:o.OG}),A=(0,r.h)({event:n.Jm["battle_rooms:state:get"],mapRequest:o.TG,mapResponse:o.F0}),k=(0,i.X)({event:n.Jm["battle_rooms:state:changed"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),w=(0,r.h)({event:n.Jm["battle_rooms:history:get"],mapRequest:o.TG,mapResponse:o.F0}),N=(0,r.h)({event:n.Jm["battle_rooms:config:get"],mapRequest:o.TG,mapResponse:o.F0}),R=(0,r.h)({event:n.Jm["battle_rooms:reaction:submit"],mapRequest:o.TG,mapResponse:o.OG}),I=(0,i.X)({event:n.Jm["battle_rooms:reaction:received"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),D=(0,r.h)({event:n.Jm["battle_rooms:deals:request"],mapRequest:o.TG,mapResponse:o.F0}),O=(0,i.X)({event:n.Jm["battle_rooms:deals:open"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),L=(0,i.X)({event:n.Jm["battle_rooms:deals:close"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),M=(0,i.X)({event:n.Jm["payment:success"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),P=(0,r.h)({event:n.Jm["payout:commission_changed"],mapRequest:o.TG,mapResponse:o.F0}),x=(0,i.X)({event:n.Jm["payout_hold:changed"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),F=(0,i.X)({event:n.Jm["copy_trading:leaderboard:updated"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),B=(0,r.h)({event:n.Jm["copy_trading:signals:filters:get"],mapRequest:o.TG,mapResponse:o.F0}),Z=(0,r.h)({event:n.Jm["copy_trading:signals:filters:update"],mapRequest:o.TG,mapResponse:o.F0}),U=(0,i.X)({event:n.Jm["copy_trading:signals:added"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),H=(0,i.X)({event:n.Jm["copy_trading:signals:active_assets:changed"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),G=(0,i.X)({event:n.Jm["promo:count"],map:o.jH,onFirstSubscribe:o.Wh}),V=(0,i.X)({event:n.Jm["user_restriction:change"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),W=(0,i.X)({event:n.Jm["balance:change:v3"],map:o.jH,onFirstSubscribe:o.Wh})},27017:(e,a,s)=>{"use strict";s.d(a,{FO:()=>p,Ol:()=>d,SB:()=>c,SF:()=>l,XQ:()=>u,fH:()=>m});var i=s(90979),r=s(12647),n=s(86933),o=s(8862);const l=(0,i.h)({event:n.Jm["spt:candles:history"],skipBatching:!0,mapRequest:o.TG,mapResponse:o.F0}),c=(0,r.X)({event:n.Jm["spt:instrument:change"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),d=(0,i.h)({event:n.Jm["spt:ticks:subscribe"],skipBatching:!0,mapRequest:o.TG,mapResponse:o.F0}),u=(0,i.h)({event:n.Jm["spt:ticks:unsubscribe"],skipBatching:!0,mapRequest:o.TG,mapResponse:o.F0}),m=(0,r.X)({event:n.Jm["spt:candle:change"],map:o.jH,onFirstSubscribe:o.Wh,onLastUnsubscribe:o.xU}),p=(0,r.X)({event:n.Jm["spt:tick:change"],map:o.jH})},56864:(e,a,s)=>{"use strict";s.d(a,{O:()=>u,f:()=>d});var i=s(54829),r=s(86933);const n=[],o=r.Jm["changes:subscribe"],l=r.Jm["changes:unsubscribe"],c=e=>({message:e.mess,code:e.code}),d=e=>{const a=JSON.parse("string"==typeof e.data?e.data:"[]");if(Array.isArray(a)){const e=new Array(a.length);let r;for(let n=0;n<a.length;n++){var s;r=a[n];const o={type:r.t||i.V.push,event:r.e,data:null!==(s=r.d)&&void 0!==s?s:null};r.ts&&(o.timestamp=r.ts),r.err&&(o.error=r.err.map(c)),r.uuid&&(o.uuid=r.uuid),e[n]=o}return e}return n},u=e=>{const a=[],s={t:i.V.request,e:o,d:[]},r={t:i.V.request,e:l,d:[]};for(let i=0;i<e.length;i++){const n=e[i];switch(n.event){case o:s.d=s.d.concat(n.data);break;case l:r.d=r.d.concat(n.data);break;default:{const e={t:n.type,e:n.event};n.uuid&&(e.uuid=n.uuid),n.data&&(e.d=Array.isArray(n.data)?n.data:[n.data]),n.timestamp&&(e.ts=n.timestamp),a.push(e);break}}}return s.d.length&&a.push(s),r.d.length&&a.push(r),JSON.stringify(a)}},79805:(e,a,s)=>{"use strict";s.d(a,{l:()=>r});var i=s(96667);const r=e=>{let a=null;e.on("restore",(()=>{i.Z.sendRestore()}));const s=()=>{null!==a&&(clearTimeout(a),a=null)},r=()=>{window.navigator.onLine?e.open():(s(),e.close({force:!0}))};window.addEventListener("offline",r),window.addEventListener("online",r),window.addEventListener("visibilitychange",(()=>{document.hidden?a=setTimeout((()=>{e.close()}),6e4):(s(),e.open())}))}},30654:(e,a,s)=>{"use strict";s.d(a,{$:()=>i.$,g:()=>r.g});var i=s(84515),r=s(39211)},78418:(e,a,s)=>{"use strict";s.d(a,{$5:()=>ge,$d:()=>G,BE:()=>A,CZ:()=>F,Cp:()=>_e,D_:()=>X,Di:()=>Fe,Dn:()=>he,FF:()=>S,FO:()=>Z,GJ:()=>ke,IK:()=>h,Ix:()=>j,Je:()=>$,K7:()=>Pe,KY:()=>E,Ke:()=>D,Li:()=>z,Lq:()=>ne,Nk:()=>Ve,Nz:()=>Be,O:()=>De,O5:()=>N,Op:()=>He,PB:()=>g,PJ:()=>J,Pj:()=>P,QW:()=>Me,RF:()=>Ae,Ri:()=>v,Ru:()=>B,S3:()=>Te,SV:()=>Oe,T8:()=>le,U5:()=>pe,UG:()=>Se,UW:()=>k,Uk:()=>Ne,V$:()=>Ge,V1:()=>We,VH:()=>f,VJ:()=>I,VY:()=>me,Wb:()=>te,Wf:()=>oe,Xt:()=>M,YH:()=>ee,YO:()=>y,ZB:()=>Ie,Zp:()=>Q,_W:()=>q,aV:()=>R,b_:()=>Re,cp:()=>Ze,dM:()=>Ue,eB:()=>x,ew:()=>K,gL:()=>_,hx:()=>ye,i5:()=>V,kS:()=>ie,kd:()=>ae,lc:()=>fe,lo:()=>be,mR:()=>ue,mp:()=>Ce,o1:()=>ce,oD:()=>Ee,oi:()=>re,pb:()=>C,qN:()=>we,sD:()=>ve,sG:()=>de,sx:()=>w,ts:()=>W,tx:()=>Le,uh:()=>xe,uv:()=>U,vr:()=>b,zI:()=>se});var i=s(24459),r=s(6980),n=s(87500),o=s(13017),l=s(83183),c=s(57615),d=s(29490),u=s(96235),m=s(60884),p=s(40114);const h=(0,r.b)({url:"v1/user/values",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{list:e.input,politics_supported_toggles:["flat_market_protection","deal_report","asset_ftt_tab","asset_fx_tab","asset_spt_tab","trade_analyzer_ftt"]}}),plugins:[new n.Z({keys:["analytics","avatar","data","duo_auth_state","politics","marketplace","service_levels","session","sound_packs","stories_v3","projects_available","onboarding_state","deposit_motivation","payment_presets","profitability","promo","restrictions","options","refill","accounts","accounts_currencies","ftt_deals","ftt_pairs","ftt_pairs_default","ftt_pairs_groups","fx_deals","fx_pairs","fx_pairs_default","fx_pairs_groups","spt_pairs","spt_pairs_default","spt_pairs_groups"],storage:new c._({namespace:"user/values",backend:new d.g,defaultTtl:7200})})]}),v=(0,r.b)({url:"v7/platform/values",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{list:e.input}}),plugins:[new n.Z({keys:["auth_messengers","client_apps","country_data","current_locale","captcha_requirements","denied_operations","locales","magic_hour","projects","reg_currencies","support_chat","time_frames","ab","auth_messengers","oauth_networks"],storage:new c._({namespace:"platform/values",backend:new d.g,defaultTtl:7200})})]}),g=(0,o.d)({url:"v1/notice/action",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),_=(0,o.d)({url:"v1/user/push-token",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{token:e.input.token,hardware_id:e.input.hardwareId}})}),f=(0,o.d)({url:"v1/user/push-token/delete",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{hardware_id:e.input.hardwareId}})}),E=(0,o.d)({url:"v3/user/set-session",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),S=(0,o.d)({url:"v1/user/set-marketing-mailing-list-option",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),y=(0,o.d)({url:"v1/user/set-option",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),b=(0,o.d)({url:"v1/user/del-option",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),C=(0,o.d)({url:"v3/user/demo-refill",method:"post",headers:e=>({"X-Request-Project":e.project}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{account_id:e.input.accountId}})}),T=new l.C({storage:new c._({namespace:"experience",backend:new d.g})}),A=(0,o.d)({url:"v1/experience/state/get",method:"post",request:p.v0,headers:()=>({"X-Request-Project":"bo"}),plugins:[T]}),k=(0,o.d)({url:"v1/experience/config/get",method:"post",request:p.v0,headers:()=>({"X-Request-Project":"bo"}),plugins:[T]}),w=(0,o.d)({url:"v1/experience/education/video/watch",method:"post",request:p.v0,headers:()=>({"X-Request-Project":"bo"}),plugins:[T]}),N=(0,o.d)({url:"v1/achievements/state/get",method:"post",request:p.v0,headers:()=>({"X-Request-Project":"bo"}),plugins:[new l.C({storage:new c._({namespace:"achievements",backend:new d.g})})]}),R=(0,o.d)({url:"v1/achievements/config/get",method:"post",request:p.v0,headers:()=>({"X-Request-Project":"bo"}),plugins:[new l.C({storage:new u.z({namespace:"v1/achievements/config/get",backend:new m.h,defaultTtl:86400})})]}),I=(0,o.d)({url:"v2/tasks/state/get",method:"post",request:p.v0,headers:()=>({"X-Request-Project":"bo"}),plugins:[new l.C({storage:new c._({namespace:"tasks",backend:new d.g})})]}),D=(0,o.d)({url:"v1/tasks/config/get",method:"post",request:p.v0,headers:()=>({"X-Request-Project":"bo"}),plugins:[new l.C({storage:new u.z({namespace:"v1/tasks/config/get",backend:new m.h,defaultTtl:86400})})]}),O=new l.C({storage:new c._({namespace:"strategy-presets",backend:new d.g})}),L=new l.C({storage:new c._({namespace:"strategy-list-presets",backend:new d.g})}),M=()=>L.invalidate(),P=(0,o.d)({url:"v1/strategy-presets/list",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.v0,plugins:[L]}),x=(0,o.d)({url:"v1/strategy-presets/get",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{strategy_id:e.input.id}}),plugins:[O]}),F=(0,o.d)({url:"v1/strategy-presets/templates/create",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),B=(0,o.d)({url:"/v1/strategy-presets/templates/get",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),Z=(0,o.d)({url:"/v1/strategy-presets/templates/delete",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),U=(0,o.d)({url:"/v1/strategy-presets/mechanics/list",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),H=new l.C({storage:new c._({namespace:"stories",backend:new d.g})}),G=(0,o.d)({url:"v2/story/get",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE,plugins:[H]}),V=(0,o.d)({url:"v1/story/view",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE,plugins:[H]}),W=(0,o.d)({url:"v1/story/user/publish-once",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE,plugins:[H]}),j=(0,o.d)({url:"v1/story/find/name",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE,plugins:[H]}),z=(0,o.d)({url:"v1/oauth/link",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),q=(0,o.d)({url:"v1/oauth/verify-code",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),K=(0,o.d)({url:"v1/oauth/unlink",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE});function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const s in e){var a;if("recaptcha"===s)return{type:s,data:{token:null!==(a=e[s])&&void 0!==a?a:""}}}}const X=(0,o.d)({url:"v1/user/login-by-password",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>{const a=e.input,s=a.email,r=a.password,n=a.dont_remember,o=a.fp_id,l=a.hardware_id,c=a.device_uid,d=(0,i.Z)(a,["email","password","dont_remember","fp_id","hardware_id","device_uid"]);return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{list:["data"],captcha:Y(d),data:{email:s,password:r,dont_remember:n,fp_id:o,hardware_id:l,device_uid:c}}})}}),J=(0,o.d)({url:"v1/user/registration-by-password",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>{const a=e.input,s=a.email,r=a.password,n=a.fp_id,o=a.hardware_id,l=a.device_uid,c=a.tutorial_scenario,d=a.toggle_set,u=a.project,m=(0,i.Z)(a,["email","password","fp_id","hardware_id","device_uid","tutorial_scenario","toggle_set","project"]);return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{list:["data"],captcha:Y(m),tutorial_scenario:c,toggle_set:d,data:{email:s,password:r,fp_id:n,hardware_id:o,device_uid:l,project:u}}})}}),Q=(0,o.d)({url:"v1/user/registration-by-oauth",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>{const a=e.input,s=a.tutorial_scenario,r=a.toggle_set,n=(0,i.Z)(a,["tutorial_scenario","toggle_set"]);return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{list:["data"],tutorial_scenario:s,toggle_set:r,data:n}})}}),$=(0,o.d)({url:"v1/user/remind-password",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>{const a=e.input,s=a.email,r=(0,i.Z)(a,["email"]);return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{captcha:Y(r),data:{email:s}}})}}),ee=(0,o.d)({url:"v1/user/set-password-by-token",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>{const a=e.input,s=a.password,i=a.password_repeat,r=a.token;return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{list:["data"],remind_password:{password:s,password_repeat:i,token:r}}})}}),te=(0,o.d)({url:"v1/user/login-duo-auth",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>{const a=e.input,s=a.token,i=a.code,r=a.dont_remember,n=a.device_uid;return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{list:["data"],data:{dont_remember:r,device_uid:n},duo_auth:{token:s,code:i}}})}}),ae=(0,o.d)({url:"v1/user/login-duo-auth-sms",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),se=(0,o.d)({url:"v1/user/login-duo-auth-messenger",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),ie=(0,o.d)({url:"v1/user/logout",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{hardware_id:e.input.hardwareId}})}),re=(0,o.d)({url:"v3/cabinet/2fa/change-state",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:e=>{const a=e.input,s=a.type,r=a.action,n=a.action_data,o=(0,i.Z)(a,["type","action","action_data"]);return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{type:s,action:r,action_data:n,captcha:Y(o)}})}}),ne=(0,o.d)({url:"v3/cabinet/2fa/get-google-qr-code",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.v0}),oe=(0,o.d)({url:"v1/2fa/providers",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.v0}),le=(0,o.d)({url:"v1/account/list",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),ce=(0,o.d)({url:"v1/account/create",method:"post",headers:e=>({"X-Request-Project":e.project}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{currency:e.input.currency,name:e.input.name,leverage:e.input.leverage,type:e.input.type}})}),de=(0,o.d)({url:"v1/account/update",method:"post",headers:e=>({"X-Request-Project":e.project}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{id:e.input.id,name:e.input.name}})}),ue=(0,o.d)({url:"v1/account/archive",method:"post",headers:e=>({"X-Request-Project":e.project}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{id:e.input.id}})}),me=(0,o.d)({url:"v1/account/archive/allowed",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{account_id:e.input.id}})}),pe=(0,o.d)({url:"v5/payout/get-active",method:"post",headers:e=>({"X-Request-Project":e.project}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{account_ids:e.input.accounts}})}),he=(0,o.d)({url:"v1/levels-content/additional",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.v0}),ve=(0,o.d)({url:"v1/platform/news-currency",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),ge=(0,o.d)({url:"v3/user/change-data",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),_e=(0,o.d)({url:"v3/user/change-password",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{old_password:e.input.old,new_password:e.input.new}})}),fe=(0,o.d)({url:"v2/user/confirm-code/email",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),Ee=(0,o.d)({url:"v2/user/confirm-code/phone",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:e=>{const a=e.input,s=a.phone,r=(0,i.Z)(a,["phone"]);return(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{captcha:Y(r),phone:s}})}}),Se=(0,o.d)({url:"v2/user/confirm/email",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),ye=(0,o.d)({url:"v2/user/confirm/phone",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),be=(0,o.d)({url:"v1/instrument/changes/spt",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.v0,plugins:[new l.C({storage:new c._({namespace:"instruments",defaultTtl:300,backend:new d.g})})]}),Ce=(0,o.d)({url:"v1/user/get-notification-options",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.v0}),Te=(0,o.d)({url:"v1/user/set-notification-options",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),Ae=(0,o.d)({url:"v1/user/notifications/list",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.v0}),ke=(0,o.d)({url:"v1/user/notifications/view",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),we=(0,o.d)({url:"v3/cabinet/get-purses",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),Ne=(0,o.d)({url:"v1/cabinet/payment-systems",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.v0,plugins:[new l.C({storage:new c._({namespace:"v1/cabinet/payment-systems",backend:new d.g})})]}),Re=(0,o.d)({url:"v1/billing/payment-systems",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:e.input?{account_id:e.input.accountId}:void 0})}),Ie=(0,o.d)({url:"v2/stat/tracking",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),De=(0,o.d)({url:"v2/cabinet/back-call-create",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE}),Oe=(0,o.d)({url:"v1/astrology/daily-asset/get",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE,plugins:[new l.C({storage:new c._({namespace:"astrology-daily-asset",backend:new d.g,defaultTtl:3600})})]}),Le=(0,o.d)({url:"/v1/support/private/chat/gettoken",method:"post",request:p.LE,headers:()=>({"X-Request-Project":"otp","X-Request-Type":"Api-Request"})}),Me=(0,o.d)({url:"/v1/support/public/chat/gettoken",method:"post",request:p.LE,headers:()=>({"X-Request-Project":"otp","X-Request-Type":"Api-Request"})}),Pe=(0,o.d)({url:"/v1/support/private/chat/get-session-fields",method:"post",request:p.LE,headers:()=>({"X-Request-Project":"otp","X-Request-Type":"Api-Request"})}),xe=(0,o.d)({url:"v1/lootbox/meta",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),Fe=(0,o.d)({url:"/v1/user/get-flat-protection-options",method:"post",request:p.LE,headers:()=>({"X-Request-Project":"otp","X-Request-Type":"Api-Request"})}),Be=(0,o.d)({url:"/v1/user/set-flat-protection-options",method:"post",request:e=>(0,p.LE)({request:e.request,abortSignal:e.abortSignal,input:{enabled:e.input.enabled}}),headers:()=>({"X-Request-Project":"otp","X-Request-Type":"Api-Request"})}),Ze=(0,o.d)({url:"v1/user/change-islamic-option",method:"post",headers:()=>({"X-Request-Project":"otp"}),request:p.LE}),Ue=(0,o.d)({url:"v1/deposit-motivation/promocode",method:"post",request:p.LE,headers:()=>({"X-Request-Project":"otp"})}),He=(0,o.d)({url:"v1/deposit-motivation/hide",method:"post",request:p.LE,headers:()=>({"X-Request-Project":"otp"})}),Ge=(0,o.d)({url:"v3/cabinet/deal",method:"post",headers:()=>({"X-Request-Project":"bo"}),request:p.LE,plugins:[new l.C({storage:new c._({namespace:"cabinet-deal-ftt",backend:new d.g})})]}),Ve=(0,o.d)({url:"v3/cabinet/deal",method:"post",headers:()=>({"X-Request-Project":"fx"}),request:p.LE,plugins:[new l.C({storage:new c._({namespace:"cabinet-deal-fx",backend:new d.g})})]}),We=(0,o.d)({url:"/v1/homescreen/index",method:"post",request:p.LE,headers:()=>({"X-Request-Project":"otp","X-Request-Type":"Api-Request"})})},39211:(e,a,s)=>{"use strict";s.d(a,{g:()=>v});var i=s(29257),r=s(37323),n=s(64356),o=s(42230),l=s(77417),c=s(24891),d=s(55916),u=s(41231),m=s(44175),p=s(5862);const h=(0,r.Z)({"Content-Type":"application/json"},(0,c.Z)("OlympTrade")),v=(0,o.q)({scheme:{webNavigationTimings:p._J,getDealLimitsFx:p.Ht,getDealLimitsAll:p.eN,setUserOptions:p.PT,setLocale:p.i_,getExperienceState:p.BE,getExperienceConfig:p.UW,getReferralStatus:p.ER,getReferralMasterData:p.um,getReferralSlaveData:p.WP,getReferralNeophyteData:p.WN,getReferralAmateurData:p.Dl,getReferralMasterV2Data:p.bD,watchExperienceEducationVideo:p.sx,getDealsReportFtt:p.cK,getDealsReportFx:p.N6,getMarketplaceCategories:p.VH,getMarketplaceCategory:p.zw,getMarketplaceFeatures:p.jm,getMarketplaceFeatureDetails:p.Bb,buySaveStatus:p.Bh,buyMarketplaceFeature:p.l4,cancelNextMarketplacePurchase:p.JF,getBestPromoCode:p.hh,getMarketplaceSales:p.uP,getMarketplaceHot:p.j5,getMarketplaceSet:p.mp,getMarketplaceSale:p.QA,getMyPublishedFeatures:p.YC,getMyPublishedFeaturesSummary:p.mr,rateFeature:p.Sk,getEventsList:p.uY,getEventLeaderboard:p.Sw,eventsJoin:p.Bj,activatePromoCode:p.v,getSupportContactsPrivate:p.Km,getSupportContactsPublic:p.NT,getPromoCodeInfo:p.Sd,getUsdtPromoBanner:p.Dh,getDealHistoryFx:p.MB,getDealHistoryFtt:p.Nq,getDealFx:p.Nk,getDealFtt:p.V$,getOrderHistoryFtt:p.p7,getOrderHistoryFx:p.vh,kycVoluntaryVerification:p.WJ,statLog:p.LS,getLootboxMeta:p.mQ,getAccountList:p.Vo,getLootboxList:p._l,lootboxOpen:p.Hm,getRecommendedFx:p.Wh,getRecommendedFtt:p.e1,getRecommendedSpt:p.KH,lootboxView:p.fv,getPaymentStatus:p.yv,getFeatureToggle:p.TF,getFlags:p.L6},parseError:u.n,headers:()=>h,plugins:[new l.D({beforeRequest:e=>(0,i.Z)((function*(){const a=yield m.q.getActual();return(0,n.Z)((0,r.Z)({},e),{url:(0,d.K)(a.otp.gateway.url,e.url)})}))()})]})},5862:(e,a,s)=>{"use strict";s.d(a,{BE:()=>v,Bb:()=>I,Bh:()=>L,Bj:()=>j,Dh:()=>Q,Dl:()=>k,ER:()=>y,Hm:()=>me,Ht:()=>d,JF:()=>O,KH:()=>_e,Km:()=>X,L6:()=>Ee,LS:()=>re,MB:()=>te,N6:()=>E,NT:()=>J,Nk:()=>$,Nq:()=>ae,PT:()=>m,QA:()=>Z,Sd:()=>q,Sk:()=>H,Sw:()=>W,TF:()=>fe,UW:()=>g,V$:()=>ee,VH:()=>w,Vo:()=>he,WJ:()=>ne,WN:()=>T,WP:()=>C,Wh:()=>ve,YC:()=>x,_J:()=>c,_l:()=>ue,bD:()=>A,cK:()=>f,e1:()=>ge,eN:()=>u,fv:()=>pe,hh:()=>M,i_:()=>p,j5:()=>B,jm:()=>R,l4:()=>D,mQ:()=>le,mp:()=>U,mr:()=>F,p7:()=>se,sx:()=>_,uP:()=>P,uY:()=>V,um:()=>b,v:()=>z,vh:()=>ie,yv:()=>ce,zw:()=>N});var i=s(13017),r=s(83183),n=s(57615),o=s(29490),l=s(28089);const c=(0,i.d)({url:"/api/timings/web-navigation/v1",method:"post",request:l.WY}),d=(0,i.d)({url:"/api/deals-limits/fx/v1",method:"post",request:l.WY}),u=(0,i.d)({url:"/api/deals-limits/all/v1",method:"post",request:l.WY}),m=(0,i.d)({url:"/api/user-options/set/v1",method:"post",request:l.WY}),p=(0,i.d)({url:"/api/locale/set/v1",method:"post",request:l.WY}),h=new r.C({storage:new n._({namespace:"experience",backend:new o.g})}),v=(0,i.d)({url:"/api/experience/state/v1",method:"post",plugins:[h],request:l.WY}),g=(0,i.d)({url:"/api/experience/config/v1",method:"post",plugins:[h],request:l.WY}),_=(0,i.d)({url:"/api/experience/education/video/watch/v1",method:"post",plugins:[h],request:l.WY}),f=(0,i.d)({url:"/api/report/deals/ftt/v1",method:"post",request:l.WY}),E=(0,i.d)({url:"/api/report/deals/fx/v1",method:"post",request:l.WY}),S=new r.C({storage:new n._({namespace:"referrals",defaultTtl:10,backend:new o.g})}),y=(0,i.d)({url:"/api/referral-program/status/v1",method:"post",plugins:[S],request:l.WY}),b=(0,i.d)({url:"/api/referral-program/master/v1",method:"post",plugins:[S],request:l.WY}),C=(0,i.d)({url:"/api/referral-program/slave/v1",method:"post",plugins:[S],request:l.WY}),T=(0,i.d)({url:"/api/referral-program/neophyte/v1",method:"post",plugins:[S],request:l.WY}),A=(0,i.d)({url:"/api/referral-program/master/v2",method:"post",plugins:[S],request:l.WY}),k=(0,i.d)({url:"/api/referral-program/amateur/v1",method:"post",plugins:[S],request:l.WY}),w=(0,i.d)({url:"/api/marketplace/categories/v1",method:"post",request:l.WY}),N=(0,i.d)({url:"/api/marketplace/category/uid/v1",method:"post",request:l.WY}),R=(0,i.d)({url:"/api/marketplace/features/v1",method:"post",request:l.WY}),I=(0,i.d)({url:"/api/marketplace/features/details/uid/v1",method:"post",request:l.WY}),D=(0,i.d)({url:"/api/marketplace/features/buy/uid/v1",method:"post",request:l.WY}),O=(0,i.d)({url:"/api/marketplace/features/cancel-next-payment/uid/v1",method:"post",request:l.WY}),L=(0,i.d)({url:"/api/experience/status/save/v1",method:"post",request:l.WY}),M=(0,i.d)({url:"/api/promo/code/best/v1",method:"post",request:l.WY}),P=(0,i.d)({url:"/api/marketplace/sales/v3",method:"post",request:l.WY}),x=(0,i.d)({url:"/api/marketplace/ugc/published/v1",method:"post",request:l.WY}),F=(0,i.d)({url:"/api/marketplace/ugc/summary/v1",method:"post",request:l.WY}),B=(0,i.d)({url:"/api/marketplace/hot/v1",method:"post",request:l.WY}),Z=(0,i.d)({url:"/api/marketplace/sale/uid/v1",method:"post",request:l.WY}),U=(0,i.d)({url:"/api/marketplace/featureset/uid/v1",method:"post",request:l.WY}),H=(0,i.d)({url:"/api/marketplace/features/rate/uid/v1",method:"post",request:l.WY}),G=new r.C({storage:new n._({namespace:"events",defaultTtl:5,backend:new o.g})}),V=(0,i.d)({url:"/api/events/list/v2",method:"post",request:l.WY}),W=(0,i.d)({url:"/api/events/leaderboard/v1",method:"post",plugins:[G],request:l.WY}),j=(0,i.d)({url:"/api/events/join/v1",method:"post",plugins:[G],request:l.WY}),z=(0,i.d)({url:"/api/promo/activation/apply/v1",method:"post",request:l.WY}),q=(0,i.d)({url:"/api/promo/code-info/v1",method:"post",request:l.WY}),K=new r.C({storage:new n._({namespace:"contactsPrivate",backend:new o.g})}),Y=new r.C({storage:new n._({namespace:"contactsPublic",backend:new o.g})}),X=(0,i.d)({url:"/api/support/private/contact/contacts/v1",method:"post",plugins:[K],request:l.WY}),J=(0,i.d)({url:"/api/support/public/contact/contacts/v1",method:"post",plugins:[Y],request:l.WY}),Q=(0,i.d)({url:"/api/banner/payin/get/v1",method:"post",request:l.WY}),$=(0,i.d)({url:"/api/history/deal/fx/v1",method:"post",request:l.WY}),ee=(0,i.d)({url:"/api/history/deal/ftt/v1",method:"post",request:l.WY}),te=(0,i.d)({url:"/api/history/deals/fx/v2",method:"post",request:l.WY}),ae=(0,i.d)({url:"/api/history/deals/ftt/v1",method:"post",request:l.WY}),se=(0,i.d)({url:"/api/history/orders/ftt/v1",method:"post",request:l.WY}),ie=(0,i.d)({url:"/api/history/orders/fx/v1",method:"post",request:l.WY}),re=(0,i.d)({url:"/api/stat/log/v1",method:"post",request:l.WY}),ne=(0,i.d)({url:"/api/kyc/voluntary-verification/v1",method:"post",request:l.WY}),oe=new r.C({storage:new n._({namespace:"lootboxMeta",defaultTtl:10,backend:new o.g})}),le=(0,i.d)({url:"/api/lootbox/meta/v1",method:"post",plugins:[oe],request:l.WY}),ce=(0,i.d)({url:"/api/payment/status/v1",method:"post",request:l.WY}),de=new r.C({storage:new n._({namespace:"lootboxList",defaultTtl:3,backend:new o.g})}),ue=(0,i.d)({url:"/api/lootbox/list/v1",method:"post",request:l.WY,plugins:[de]}),me=(0,i.d)({url:"/api/lootbox/open/v1",method:"post",request:l.WY}),pe=(0,i.d)({url:"/api/lootbox/view/v1",method:"post",request:l.WY}),he=(0,i.d)({url:"/api/accounts/list/v2",method:"post",request:l.WY}),ve=(0,i.d)({url:"/api/instrument/recommended/fx/v1",method:"post",request:l.WY}),ge=(0,i.d)({url:"/api/instrument/recommended/ftt/v1",method:"post",request:l.WY}),_e=(0,i.d)({url:"/api/instrument/recommended/spt/v1",method:"post",request:l.WY}),fe=(0,i.d)({url:"/api/feature-toggle/list/v1",method:"post",request:l.WY}),Ee=(0,i.d)({url:"/api/flags/list/v1",method:"post",request:l.WY})},84515:(e,a,s)=>{"use strict";s.d(a,{$:()=>v});var i=s(29257),r=s(37323),n=s(64356),o=s(42230),l=s(77417),c=s(24891),d=s(55916),u=s(41231),m=s(44175),p=s(78418);const h=(0,r.Z)({"Content-Type":"application/json"},(0,c.Z)("OlympTrade")),v=(0,o.q)({scheme:{userValues:p.IK,platformValues:p.Ri,noticeAction:p.PB,pushToken:p.gL,deletePushToken:p.VH,setSession:p.KY,setMarketingMailingListOption:p.FF,setUserOption:p.YO,deleteUserOption:p.vr,refillDemoAccount:p.pb,getExperienceConfig:p.UW,getExperienceState:p.BE,watchExperienceEducationVideo:p.sx,getAchievementsState:p.O5,getAchievementsConfig:p.aV,getTasksConfig:p.Ke,getTasksState:p.VJ,getStrategyPreset:p.eB,getStrategyPresetsList:p.Pj,getStory:p.$d,getStoriesByNames:p.Ix,getStoriesOnce:p.ts,getPurses:p.qN,viewStory:p.i5,linkOAuth:p.Li,linkOAuthGP:p._W,unlinkOAuth:p.ew,getAdditionalLevelsContent:p.Dn,loginByPassword:p.D_,loginDuoAuth:p.Wb,loginDuoAuthSms:p.kd,loginDuoAuthMessenger:p.zI,logout:p.kS,registerByPassword:p.PJ,registerByOAuth:p.Zp,setPasswordByToken:p.YH,remindPassword:p.Je,changeStateOfTwoFactorAuth:p.oi,createAccount:p.o1,updateAccount:p.sG,archiveAccount:p.mR,isAccountArchiveAllowed:p.VY,getActivePayout:p.U5,getTwoFactorAuthQRCode:p.Lq,getTwoFactorMethods:p.Wf,getCurrencyNews:p.sD,changeUserData:p.$5,changePassword:p.Cp,requestEmailConfirmCode:p.lc,requestPhoneConfirmCode:p.oD,confirmEmail:p.UG,confirmPhone:p.hx,getAssetsChangesSpt:p.lo,getUserNotificationsOptions:p.mp,setUserNotificationsOptions:p.S3,getUserNotificationsList:p.RF,userNotificationsView:p.GJ,getCabinetPaymentSystems:p.Uk,getBillingPaymentSystems:p.b_,statsTracking:p.ZB,createCabinetBackCall:p.O,getAstrologyDailyAsset:p.SV,getLivechatToken:p.tx,getLivechatTokenUnauthorized:p.QW,getLivechatParams:p.K7,getLootBoxInfo:p.uh,createCustomStrategyPreset:p.CZ,getCustomStrategyPreset:p.Ru,deleteCustomStrategyPreset:p.FO,getMechanics:p.uv,getFlatProtectionOptions:p.Di,setFlatProtectionOptions:p.Nz,getAccounts:p.T8,changeIslamicOption:p.cp,requestPromoCode:p.dM,hideWelcomeOffer:p.Op,getDealFtt:p.V$,getDealFx:p.Nk,getHomeScreen:p.V1},parseError:u.n,headers:()=>h,plugins:[new l.D({beforeRequest:e=>(0,i.Z)((function*(){const a=yield m.q.getActual();return(0,n.Z)((0,r.Z)({},e),{url:(0,d.K)(a.otp.api.url,e.url)})}))()})]})},27413:(e,a,s)=>{"use strict";s.d(a,{h:()=>p,w:()=>u});var i=s(83183),r=s(13017),n=s(42230),o=s(96235),l=s(60884),c=s(41231),d=s(40114);const u=new i.C({storage:new o.z({namespace:"v10/topology",backend:new l.h,defaultTtl:300})}),m=(0,r.d)({url:"/platform/topology/v10",method:"get",request:e=>{let a=e.request,s=e.input,i=e.abortSignal;const r=s.webViewType?"".concat(a.url,"?app=").concat(s.webViewType):a.url;return(0,d.$f)(r,a,i)},plugins:[u]}),p=(0,n.q)({scheme:{getTopology:m},parseError:c.n})},44175:(e,a,s)=>{"use strict";s.d(a,{q:()=>n});var i=s(41365),r=s(27413);const n=new class TopologyService{getActual(){return this.actualTopology?Promise.resolve(this.actualTopology):(this.calculation||(this.calculation=r.h.getTopology({webViewType:(0,i.w)()}).then((e=>{if(0===e.length)throw r.w.invalidate(),new Error("Topology is empty");const a=window.location,s=a.hostname,i=a.protocol,n="".concat(i,"//").concat(s);let o;return o=e.find((e=>!!e.otp.index&&e.otp.index.url===n)),o||(o=e[0]),this.calculation=null,this.actualTopology=o,o}))),this.calculation)}constructor(){this.actualTopology=null,this.calculation=null}}},24891:(e,a,s)=>{"use strict";s.d(a,{Z:()=>c});var i,r=s(99446),n=s(72124),o=s(10592);function l(e){const a=new Date;return"".concat(a.getFullYear(),".").concat((s=a.getMonth(),Math.floor(s/3)+1),".").concat(e);var s}function c(e){const a=(0,n.parse)(window.location.search),s=a["x-cid-app"],c=a["x-cid-device"],d="19132",u=(0,o.OR)("olymptrade\\.lite")?"twa":"web",m=[s,"".concat(u,"@").concat(e,"@").concat(l(d.toString()),"@").concat(d)].filter(Boolean).join(", ");var p;const h=null!==(p=null===r.BF||void 0===r.BF?void 0:r.BF.toLowerCase().replace(" ","_"))&&void 0!==p?p:"unknown";var v;const g=null!==(v=null===r.MM||void 0===r.MM?void 0:r.MM.toLowerCase().replace(" ","_"))&&void 0!==v?v:"unknown";return{"X-CID-Ver":"1","X-CID-App":m,"X-CID-OS":g?"".concat(h,"@").concat(g):h,"X-CID-Device":c?c.toString():"@@".concat(r.Em?i.tablet:r.tq?i.phone:i.desktop)}}!function(e){e.phone="phone",e.tablet="tablet",e.desktop="desktop"}(i||(i={}))},28089:(e,a,s)=>{"use strict";s.d(a,{WY:()=>c});var i=s(29257),r=s(37323),n=s(22128);function o(e,a,s){return l.apply(this,arguments)}function l(){return l=(0,i.Z)((function*(e,a,s){const i=yield fetch(e,(0,r.Z)({method:a.method,credentials:"include",cache:"no-cache",mode:"cors",referrerPolicy:"strict-origin-when-cross-origin",signal:s},a));if(i.ok)return 204===i.status?void 0:yield i.json();let o;const l=yield i.text();try{o=JSON.parse(l)}catch(e){o=l}var c;if("string"==typeof o)throw new n.P(null!==(c=i.statusText)&&void 0!==c?c:"Unknown error",e,i.status,{body:o});const d=o&&"error"in o&&o.error?o.error:void 0;var u;const m=null!==(u=null==d?void 0:d.msg)&&void 0!==u?u:i.statusText;throw new n.P(m,e,i.status,d)})),l.apply(this,arguments)}const c=e=>{let a=e.request,s=e.input,i=e.abortSignal;return o(a.url,{method:a.method,headers:a.headers,body:s?JSON.stringify(s):void 0},i)}},41231:(e,a,s)=>{"use strict";s.d(a,{n:()=>r});var i=s(22128);const r=(e,a)=>{if(e instanceof i.P)return e;if(e instanceof Error)return i.P.fromError(e,a.url,0);if("string"==typeof e)return new i.P(e,a.url,0);if("object"==typeof e&&e){if("statusText"in e&&"status"in e){const s=e;return new i.P(s.statusText.toString(),a.url,s.status)}return new i.P("Unknown network error",a.url,0,e)}return new i.P("Unknown network error",a.url,0)}},40114:(e,a,s)=>{"use strict";s.d(a,{$f:()=>o,JY:()=>u,LE:()=>d,v0:()=>c});var i=s(29257),r=s(37323),n=s(22128);function o(e,a,s){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)((function*(e,a,s){const i=yield fetch(e,(0,r.Z)({method:a.method,credentials:"include",cache:"no-cache",mode:"cors",referrerPolicy:"strict-origin-when-cross-origin",signal:s},a));if(i.ok){const e=204===i.status?void 0:yield i.json();return e?"data"in e?e.data:e:void 0}let o;const l=yield i.text();try{o=JSON.parse(l)}catch(e){o=l}var c;if("string"==typeof o)throw new n.P(null!==(c=i.statusText)&&void 0!==c?c:"Unknown error",e,i.status,{body:o});const d=(null==o?void 0:o.errors)?1===o.errors.length?o.errors[0]:{errors:o.errors}:void 0,u=d&&"msg"in d?"".concat(d.type,": ").concat(d.msg):(null==o?void 0:o.type)||i.statusText;throw new n.P(u,e,i.status,d)}))).apply(this,arguments)}const c=e=>{let a=e.request,s=e.abortSignal;return o(a.url,{method:a.method,headers:a.headers},s)},d=e=>{let a=e.request,s=e.input,i=e.abortSignal;return o(a.url,{method:a.method,headers:a.headers,body:s?JSON.stringify(s):void 0},i)},u=e=>{let a=e.request,s=e.formData,i=e.abortSignal;return o(a.url,{method:a.method,headers:a.headers,body:s},i)}},55916:(e,a,s)=>{"use strict";function i(e,a){let s=e;return s.endsWith("/")||a.startsWith("/")||(s="".concat(e,"/")),"".concat(s).concat(a)}s.d(a,{K:()=>i})},43345:(e,a,s)=>{"use strict";s.d(a,{TP:()=>r.TP,aW:()=>n});var i=s(26763),r=s(72785);const n="android_bo_update";i.DEAL_BLOCK_REASON_SERVICE,i.DEAL_DURATION_SERVICE,i.DEAL_FORM_STORE,i.PLATFORM_SIDEBAR_STORE,i.INDICATOR_SERVICE,i.INDICATOR_SETTINGS_STORE,i.CANDLE_SERVICE,i.STRIKE_SERVICE,i.TIME_PICKER_STORE,i.TRADE_FRAME_SERVICE,i.END_TURBO_DEALS_SERVICE,i.DEAL_DURATION_PRESET_SERVICE,i.CANDLE_HISTORY_SERVICE,i.CHART_STORE,i.PAIR_ASSETS_SELECT_STORE_BO,i.DRAWING_SERVICE,i.CHART_TYPE_SELECTOR_STORE},2926:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i=s(13342).Z},13342:(e,a,s)=>{"use strict";s.d(a,{Z:()=>BinaryStore});var i=s(28660),r=s(4226);class BinaryStore extends i.BaseStore{constructor(e){super(e&&e.binder?e:r.Z)}}},89119:(e,a,s)=>{"use strict";s.d(a,{Z:()=>c});var i=s(49491),r=s.n(i),n=s(28660),o=s(4226),l=s(23680);function c(e,a){return(0,n.ServiceConnector)(e,r()(r()({},a),{},{binder:o.Z.binder,initialState:l.v}))}},4601:(e,a,s)=>{"use strict";s.d(a,{Z:()=>S});var i=s(50391),r=s.n(i),n=s(80969);var o=s(35377);class UserOptionsModel extends n.Z{constructor(){super(...arguments),r()(this,"attributes",{duration_history:{type:"array",value:[]},deal_sum:{type:"object",value:{}},is_one_click_popup:{type:"boolean",value:!0},is_one_click_trade_deal:{type:"boolean",value:!0},show_orders:{type:"boolean",value:!0},platform_theme:{type:"string",value:o.si.LIGHT},deal_type:{type:"string",value:"binary"},pair_default:{type:"string"},rate:{type:"object",value:{format:"line",step:3}},tp_duration:{type:"number",value:null},ignore_hold_use:{type:"boolean",value:!1},draw_els:{type:"array",value:[]},indicator_settings:{type:"array",value:[]},profitability_sort:{type:"boolean",value:!0},sentiment:{type:"boolean",value:{}},hotkeys_activated:{type:"boolean",value:!1},hotkeys:{type:"array",value:[]},sidebar_collapsed:{value:!0},bat_tournament_announced:{type:"array",value:[]},overlay_selected_items:{type:"array",value:[]},overlay_muted_channels:{type:"object",value:{}},deal_category:{type:"string",value:""},digital_strikes_visible:{type:"string",value:"true"},overlay_last_open_time:{type:"number",value:0},payout_request_note:{type:"boolean",value:!1},trade_frames:{type:"array",value:[]},is_tech_analysis_disabled:{type:"boolean",value:!1},market_place_accepted_policy:{type:"boolean",value:!1},deal_form_show_limits:{type:"boolean",value:!1},indicators_enabled:{type:"boolean",value:!1},chart_types_enabled:{type:"boolean",value:!1},open_channel_video_gallery:{type:"boolean",value:!1}})}parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a={is_one_click_popup:this.toBoolean(e.is_one_click_popup),is_one_click_trade_deal:this.toBoolean(e.is_one_click_trade_deal),show_orders:this.toBoolean(e.show_orders),platform_theme:e.platform_theme||this.attributes.platform_theme.value,deal_type:e.deal_type,tp_duration:e.tp_duration?Number(e.tp_duration):void 0,ignore_hold_use:this.toBoolean(e.ignore_hold_use),pair_default:e.pair_default,profitability_sort:void 0===e.profitability_sort||this.toBoolean(e.profitability_sort),hotkeys_activated:e.hotkeys_activated&&this.toBoolean(e.hotkeys_activated),hotkeys:e.hotkeys,sidebar_collapsed:!!(e.sidebar_collapsed&&"false"!==e.sidebar_collapsed||void 0===e.sidebar_collapsed),bat_tournament_announced:e.bat_tournament_announced,overlay_selected_items:e.overlay_selected_items,deal_category:e.deal_category,digital_strikes_visible:"true"===e.digital_strikes_visible,overlay_last_open_time:e.overlay_last_open_time||0,is_tech_analysis_disabled:this.toBoolean(e.is_tech_analysis_disabled),market_place_accepted_policy:this.toBoolean(e.market_place_accepted_policy),deal_form_show_limits:this.toBoolean(e.deal_form_show_limits),indicators_enabled:this.toBoolean(e.indicators_enabled),chart_types_enabled:this.toBoolean(e.chart_types_enabled),open_channel_video_gallery:this.toBoolean(e.open_channel_video_gallery),martingale_multiplication:this.toBoolean(e.martingale_multiplication),payout_request_note:void 0===e.payout_request_note||this.toBoolean(e.payout_request_note)};try{a.duration_history=e.duration_history?JSON.parse(e.duration_history):this.attributes.duration_history.value,a.rate=e.rate?JSON.parse(e.rate):this.attributes.rate.value,a.deal_sum=e.deal_sum?JSON.parse(e.deal_sum):this.attributes.deal_sum.value}catch(e){}try{a.indicator_settings=e.indicator_settings?JSON.parse(e.indicator_settings):this.attributes.indicator_settings.value}catch(e){a.indicator_settings=this.attributes.indicator_settings.value}try{a.sentiment=e.sentiment?JSON.parse(e.sentiment):this.attributes.sentiment.value}catch(e){a.sentiment=this.attributes.sentiment.value}try{a.draw_els=e.draw_els?JSON.parse(e.draw_els):this.attributes.draw_els.value}catch(e){a.draw_els=this.attributes.draw_els.value}try{a.bat_tournament_announced=e.bat_tournament_announced?JSON.parse(e.bat_tournament_announced):this.attributes.bat_tournament_announced.value}catch(e){a.bat_tournament_announced=this.attributes.bat_tournament_announced.value}try{a.overlay_muted_channels=e.overlay_muted_channels?JSON.parse(e.overlay_muted_channels):this.attributes.overlay_muted_channels.value}catch(e){a.overlay_muted_channels=this.attributes.overlay_muted_channels.value}try{a.trade_frames=e.trade_frames?JSON.parse(e.trade_frames):this.attributes.trade_frames.value}catch(e){a.trade_frames=this.attributes.trade_frames.value}return a}}const l=new UserOptionsModel;var c=s(49491),d=s.n(c),u=s(14936),m=s.n(u),p=s(75882),h=s(30654),v=s(27206);var g=s(62323);const _=["oscillator"];var f=s(66713);var E;const S=(E=l,f.yy,class UserOptions{constructor(e){const a=this.filterPossibleKeys(e);if(this.data=E.parse(a),!this.data.indicator_settings||!this.data.indicator_settings.length)try{const e=window.localStorage&&window.localStorage.getItem("indicatorsSettings");e&&(this.set("indicator_settings",(s=JSON.parse(e),(0,g.Z)(s,((e,a)=>{if(a.type&&a._id)switch(a.type){case"SMA":e.push({id:a._id,type:"sma",value:a.aver_window,min:1,max:365,step:1,"stroke-width":parseFloat(a["stroke-width"]),stroke:a.stroke,legendTitle:"SMA"});break;case"PARABOLIC":e.push({id:a._id,type:"parabolic",value:a.period,min:.01,max:.2,step:.01,radius:parseFloat(a.radius),fill:a.fill,legendTitle:"Parabolic"});break;case"BOLLINGER":e.push({id:a._id,type:"bollinger",sma:{value:a.params.ma.period,stroke:a.params.ma.stroke,"stroke-width":parseFloat(a.params.ma["stroke-width"]),min:1,max:60,step:1},deviation:{value:a.params.deviation.value,stroke:a.params.deviation.stroke,"stroke-width":parseFloat(a.params.deviation["stroke-width"]),min:1,max:3,step:.1},legendTitle:"Bollinger"});break;case"MACD":e.push({id:a._id,type:"macd",oscillator:!0,ma1:{value:a.MA_1.aver_window,stroke:a.MA_1.stroke,"stroke-width":parseFloat(a.MA_1["stroke-width"]),min:1,max:60,step:1},ma2:{value:a.MA_2.aver_window,stroke:a.MA_2.stroke,"stroke-width":parseFloat(a.MA_2["stroke-width"]),min:1,max:60,step:1},signal:9,legendTitle:"Moving Average Convergence Divergence"});break;case"RSI":e.push({id:a._id,type:"rsi",oscillator:!0,value:a.MA.aver_window,stroke:a.MA.stroke,"stroke-width":parseFloat(a.MA["stroke-width"]),min:1,max:45,step:1,top:{value:70},bottom:{value:30},middle:{value:50},legendTitle:"Relative Strength Index"});break;case"STOCHASTIC":e.push({id:a._id,type:"stochastic",oscillator:!0,K:{value:a.K.aver_window,stroke:a.K.stroke,"stroke-width":parseFloat(a.K["stroke-width"]),min:1,max:100,step:1},D:{value:a.D.aver_window,stroke:a.D.stroke,"stroke-width":parseFloat(a.D["stroke-width"]),min:1,max:100,step:1},m:{value:a.m.value,min:1,max:100,step:1},top:{value:80},bottom:{value:20},legendTitle:"Stochastic Oscillator"});break;case"SENTIMENT":e.push({id:a._id,type:"sentiment"})}return e}),[]))),window.localStorage&&window.localStorage.removeItem("indicatorsSettings"))}catch(e){}var s;this.data.indicator_settings&&this.data.indicator_settings.length&&(this.data.indicator_settings=function(e){return(0,v.Z)(e,(e=>("macd"!==e.type||("number"==typeof e.signal&&(e.signal={value:e.signal}),e.macdLine||(e.macdLine={}),!e.macdLine.stroke&&e.ma1&&e.ma1.stroke&&(e.macdLine.stroke=e.ma1.stroke),!e.macdLine["stroke-width"]&&e.ma1&&e.ma1["stroke-width"]&&(e.macdLine["stroke-width"]=e.ma1["stroke-width"]),!e.signal.stroke&&e.ma2&&e.ma2.stroke&&(e.signal.stroke=e.ma2.stroke),!e.signal["stroke-width"]&&e.ma2&&e.ma2["stroke-width"]&&(e.signal["stroke-width"]=e.ma2["stroke-width"])),e)))}(this.data.indicator_settings),this.data.indicator_settings=this.data.indicator_settings.map((e=>{let a=e.oscillator,s=m()(e,_);return a?d()(d()({},s),{},{viewType:"oscillator"}):s})),this.data.indicator_settings=this.data.indicator_settings.filter((e=>"sentiment"!==e.type||(this.set("sentiment",!0),!1))))}set(e,a){if(!Object.prototype.hasOwnProperty.call(this.data,e))return void console.warn('Cant set user option "'.concat(e,'"'));const s="object"==typeof a?JSON.stringify(a):a;this.data[e]=a,h.$.setUserOption({name:e,value:"".concat(s)})}get(e){return this.data[e]}del(e){h.$.deleteUserOption({name:e})}filterPossibleKeys(e){const a=Object.values(p.a);return Object.keys(e||{}).reduce(((s,i)=>(a.includes(i)&&(s[i]=e[i]),s)),{})}})},4226:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var i=s(28660);const r={binder:new i.Binder,serviceStarter:new i.ServiceStarter}},71389:(e,a,s)=>{"use strict";s.d(a,{L:()=>r,r:()=>n});var i=s(57855);function r(e,a,s){(0,i.LS)("bo",e,a,s)}function n(e,a){return(0,i.rV)("bo",e,a)}},11326:(e,a,s)=>{"use strict";s.d(a,{Z:()=>h});var i=s(50391),r=s.n(i),n=s(27378),o=s(28660),l=s(17498),c=s(13342),d=s(26763);class ServerConnectionErrorStore extends c.Z{constructor(){super(...arguments),r()(this,"config",{bindAs:"ServerConnectionErrorStore"}),r()(this,"api",{reloadPage:()=>{window.location.reload()}})}onStart(){return this.callApi(d.UI_SERVICE,"addBodyClass","grayscale"),this.callApi(d.UI_SERVICE,"scrollTop"),this.callApi(d.UI_SERVICE,"triggerLayoutResize"),!0}destroy(){this.callApi(d.UI_SERVICE,"removeBodyClass","grayscale"),this.callApi(d.UI_SERVICE,"triggerLayoutResize")}}const u=ServerConnectionErrorStore;var m=s(63794),p=s(56283);class ServerConnectionErrorWrap extends l.Z{render(){return n.createElement(p.f,{root:document.body,defaultTheme:"dark"},n.createElement(m.Z,{onClick:()=>{this.props.api.reloadPage()}}))}}r()(ServerConnectionErrorWrap,"displayName","ServerConnectionErrorWrap");const h=(0,o.Connector)(ServerConnectionErrorWrap,{store:()=>new u,helper:()=>({})})},25017:(e,a,s)=>{"use strict";s.d(a,{F:()=>y});var i,r,n,o,l,c=s(85676),d=s.n(c),u=(s(50391),s(32952)),m=s.n(u),p=(s(13893),s(60521)),h=s(28660),v=s(89119),g=s(41520),_=s(26763),f=s(35377),E=s(57855);const S="TradingBarCacheKey";let y=(0,h.bindAs)(_.UI_SERVICE)((r=class UiService extends g.Fz{constructor(e){super(e),d()(this,"isTradingBarOpen",n,this),d()(this,"toggleTradingBar",o,this),d()(this,"setTradingBarVisibility",l,this),this.isTradingBarOpen=this.getDefaultTradingBarState()}getDefaultTradingBarState(){return"true"===(0,E.rV)(_.UI_SERVICE,S)}},n=m()(r.prototype,"isTradingBarOpen",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=m()(r.prototype,"toggleTradingBar",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.setTradingBarVisibility(!this.isTradingBarOpen),setTimeout((()=>{this.triggerLayoutResize()}),500)}}}),l=m()(r.prototype,"setTradingBarVisibility",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.isTradingBarOpen=e,(0,E.LS)(_.UI_SERVICE,S,e)}}}),i=r))||i;(0,v.Z)(new y(f.si.DARK),{config:y.binderConfig})},18803:(e,a,s)=>{"use strict";s.d(a,{vl:()=>u});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(72124);const c={paymentmethod:"paymentSystem",summ:"amount",bonuscode:"promo"},d=(e,a)=>Object.entries(e).reduce(((e,s)=>{let i=o()(s,2),n=i[0],l=i[1];return r()(r()({},e),{},{[a[n]||n]:l})}),{}),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;return d(l.parse(e),c)}},63794:(e,a,s)=>{"use strict";s.d(a,{Z:()=>u});var i=s(27378),r=s(31906),n=s(17302),o=s(45797),l=s(82844),c=s(18985);const d=e=>i.createElement(r.zt,{value:o.NW.getInstance()},i.createElement("div",{className:"server-connection-error"},i.createElement("div",{className:"text"},i.createElement(l._,e.trans.textTitle)),e.showButton&&i.createElement(n.zx,{onClick:()=>e.onClick(),skin:"accent"},i.createElement(l._,e.trans.textButton))));d.defaultProps={trans:(0,c.vU)({textTitle:{id:"server_connection_lost_1",defaultMessage:"Lost connection to server."},text:{id:"server_connection_lost_5",defaultMessage:"Connection"},textButton:{id:"server_connection_lost_3",defaultMessage:"Reload now"}}),showButton:!0,onClick(){}};const u=d},54172:(e,a,s)=>{"use strict";s.d(a,{CG:()=>d,oI:()=>l,q5:()=>o,t5:()=>n,zt:()=>c});var i=s(27378),r=s(28660);const n=i.createContext(),o=i.createContext(),l=i.createContext(),c=(0,r.createProvider)(n,l),d=(0,r.createBinderProvider)(n)},18457:(e,a,s)=>{"use strict";function i(e,a,s,i){const r=s?new Date(1e3*s):new Date(Date.now()+26784e5);document.cookie="".concat(e,"=").concat("object"==typeof a?JSON.stringify(a):a,"; expires=").concat(r.toUTCString(),"; path=/;").concat(i?"domain=".concat(i,";"):"")}function r(e){i(e,null,-1)}function n(e){const a=" ".concat(document.cookie),s=" ".concat(e,"=");let i=null,r=0,n=0;if(a.length>0&&(r=a.indexOf(s),-1!==r)){r+=s.length,n=a.indexOf(";",r),-1===n&&(n=a.length),i=decodeURIComponent(a.substring(r,n));try{i=JSON.parse(i)}catch(e){return i}}return i}s.d(a,{d8:()=>i,ej:()=>n,nJ:()=>r})},63519:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var i=s(16890);function r(e,a){var s,r,n,o,l,c,d;s=window,r=document,n="script",s.fbq||(o=s.fbq=function(){o.callMethod?o.callMethod(...arguments):o.queue.push(arguments)},s._fbq||(s._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(l=r.createElement(n)).async=!0,l.src="https://connect.facebook.net/en_US/fbevents.js",(c=r.getElementsByTagName(n)[0]).parentNode.insertBefore(l,c)),d=document,window.dc=function(e,a,s){const i={CompleteRegistration:()=>"type=event;cat=regis0;",OpenDemoAccount:()=>"type=event;cat=opend0;",DemoDeal5:()=>"type=event;cat=demod0;",TraderConversion:()=>"type=event;cat=trade0;",PayIn1Depo0:()=>"type=event;cat=payin0;",PayIn2Depo0:()=>"type=event;cat=payin00;",VIPConversion:()=>"type=event;cat=vipco0;",Purchase:e=>"type=event_sa;cat=purch0;qty=1;cost=".concat(e.hasOwnProperty("value")?e.value:0,";u3=").concat(e.hasOwnProperty("value")?e.value:0,";")};if(!i.hasOwnProperty(e))return;let r=1e13*"".concat(Math.random());null!=a&&a.hasOwnProperty("operation_id")&&(r=a.operation_id);const n=d.createElement("img");n.src="https://ad.doubleclick.net/ddm/activity/src=6257573;",n.src+=i[e](a),n.src+="dc_lat=0;dc_rdid=;tag_for_child_directed_treatment=0;",n.src+="u1=".concat(s.ref_channel,";"),n.src+="u2=".concat(s.country,";"),n.src+="u3=".concat(null!=a&&a.hasOwnProperty("value")?a.value:"",";"),n.src+="u4=".concat(s.os,";"),n.src+="u5=".concat(s.city,";"),n.src+="u6=".concat(s.id,";"),n.src+="u7=".concat(s.ref,";"),n.src+="ord=".concat(r,"?"),n.height=1,n.width=1,n.frameborder=0,n.style.display="none",d.getElementsByTagName("body")[0].appendChild(n)},(0,i.A7)((()=>{if(e)try{const a=document.createElement("img");a.src="//loadr.exelator.com/load/?p=104&g=891&j=0&u=ot_".concat(e),a.height=1,a.width=1,a.frameborder=0,a.style.display="none",document.body.appendChild(a)}catch(e){}if(e)try{const a=document.createElement("img");a.src="https://sync.1dmp.io/pixel.gif?cid=027cb61a-7c2e-4a9e-b585-bff241d62d9c&pid=w&uid=".concat(e),a.height=1,a.width=1,a.frameborder=0,a.style.display="none",document.body.appendChild(a)}catch(e){}})),function(e,a,s,i,r,n){e.twq||(i=e.twq=function(){i.exe?i.exe(...arguments):i.queue.push(arguments)},i.version="1.1",i.queue=[],(r=a.createElement(s)).async=!0,r.src="//static.ads-twitter.com/uwt.js",(n=a.getElementsByTagName(s)[0]).parentNode.insertBefore(r,n))}(window,document,"script")}},51116:(e,a,s)=>{"use strict";s.d(a,{Ak:()=>k,G$:()=>I,Ic:()=>B,Iz:()=>T,O6:()=>y,PG:()=>P,R_:()=>O,Ws:()=>N,Y1:()=>h.Y,Z$:()=>F,d8:()=>b,ej:()=>p.e,j2:()=>M,jg:()=>D,kT:()=>C,p6:()=>f,qn:()=>R,sq:()=>E,sw:()=>L,tq:()=>x,u1:()=>w,v:()=>S,vp:()=>d.v});s(50391);var i=s(2243),r=s.n(i),n=s(72124),o=s(18985),l=s(45797),c=s(70275),d=s(41365),u=s(26323),m=s(90212),p=s(49761),h=s(98484);const v=(0,o.vU)({currency_brl_1:{id:"currency_brl_1",defaultMessage:"real"},currency_brl_2:{id:"currency_brl_2",defaultMessage:"reals"},currency_brl_3:{id:"currency_brl_3",defaultMessage:"reals"},currency_eur_1:{id:"currency_eur_1",defaultMessage:"euros"},currency_eur_2:{id:"currency_eur_2",defaultMessage:"euros"},currency_eur_3:{id:"currency_eur_3",defaultMessage:"euros"},currency_rub_1:{id:"currency_rub_1",defaultMessage:"ruble"},currency_rub_2:{id:"currency_rub_2",defaultMessage:"rubles"},currency_rub_3:{id:"currency_rub_3",defaultMessage:"rubles"},currency_sign:{id:"currency_sign",defaultMessage:"."},currency_usd_1:{id:"currency_usd_1",defaultMessage:"dollar"},currency_usd_2:{id:"currency_usd_2",defaultMessage:"dollars"},currency_usd_3:{id:"currency_usd_3",defaultMessage:"dollars"},day:{id:"day",defaultMessage:"day"},h:{id:"h",defaultMessage:"h"},hour:{id:"hour",defaultMessage:"hour"},min:{id:"min",defaultMessage:"min"},months_0:{id:"months_0",defaultMessage:"January"},months_10:{id:"months_10",defaultMessage:"November"},months_11:{id:"months_11",defaultMessage:"December"},months_1:{id:"months_1",defaultMessage:"February"},months_2:{id:"months_2",defaultMessage:"March"},months_3:{id:"months_3",defaultMessage:"April"},months_4:{id:"months_4",defaultMessage:"May"},months_5:{id:"months_5",defaultMessage:"June"},months_6:{id:"months_6",defaultMessage:"July"},months_7:{id:"months_7",defaultMessage:"August"},months_8:{id:"months_8",defaultMessage:"September"},months_9:{id:"months_9",defaultMessage:"October"},months_short_0:{id:"months_short_0",defaultMessage:"Jan."},months_short_10:{id:"months_short_10",defaultMessage:"Nov."},months_short_11:{id:"months_short_11",defaultMessage:"Dec."},months_short_1:{id:"months_short_1",defaultMessage:"Feb."},months_short_2:{id:"months_short_2",defaultMessage:"Mar."},months_short_3:{id:"months_short_3",defaultMessage:"Apr."},months_short_4:{id:"months_short_4",defaultMessage:"May"},months_short_5:{id:"months_short_5",defaultMessage:"June"},months_short_6:{id:"months_short_6",defaultMessage:"July"},months_short_7:{id:"months_short_7",defaultMessage:"Aug."},months_short_8:{id:"months_short_8",defaultMessage:"Sept."},months_short_9:{id:"months_short_9",defaultMessage:"Oct."},sec:{id:"sec",defaultMessage:"sec."}}),g={Y:"getFullYear",y:e=>e.getFullYear().toString().substr(2,2),n:e=>(e.getMonth()+1).toString(),m(e){const a=g.n(e);return a.length>1?a:"0".concat(a)},F(e){const a="months_".concat(e.getMonth());return l.NW.formatMessage(v[a])},f:e=>g.F(e).toLowerCase(),M(e){const a="months_short_".concat(e.getMonth());return l.NW.formatMessage(v[a])},t:e=>g.M(e).toLowerCase(),j:e=>e.getDate().toString(),d(e){const a=g.j(e);return a.length>1?a:"0".concat(a)},G:e=>e.getHours().toString(),H(e){const a=g.G(e);return a.length>1?a:"0".concat(a)},i(e){const a=e.getMinutes().toString();return a.length>1?a:"0".concat(a)},s(e){const a=e.getSeconds().toString();return a.length>1?a:"0".concat(a)},u(e){const a=e.getMilliseconds().toString();return a.length>2?a:a.length>1?"0".concat(a):"00".concat(a)}},_={Y:"getUTCFullYear",y:e=>e.getUTCFullYear().toString().substr(2,2),n:e=>(e.getUTCMonth()+1).toString(),m(e){const a=_.n(e);return a.length>1?a:"0".concat(a)},F(e){const a="months_".concat(e.getUTCMonth());return l.NW.formatMessage(v[a])},f:e=>_.F(e).toLowerCase(),M(e){const a="months_short_".concat(e.getUTCMonth());return l.NW.formatMessage(v[a])},t:e=>_.M(e).toLowerCase(),j:e=>e.getUTCDate().toString(),d(e){const a=_.j(e);return a.length>1?a:"0".concat(a)},G:e=>e.getUTCHours().toString(),H(e){const a=_.G(e);return a.length>1?a:"0".concat(a)},i(e){const a=e.getUTCMinutes().toString();return a.length>1?a:"0".concat(a)},s(e){const a=e.getUTCSeconds().toString();return a.length>1?a:"0".concat(a)},u(e){const a=e.getUTCMilliseconds().toString();return a.length>2?a:a.length>1?"0".concat(a):"00".concat(a)}};function f(e,a,s){if("string"==typeof e){const a=e;if(e=new Date(e),isNaN(e.getTime()))return console.warn("wrong date",a),""}else"number"==typeof e&&(e=new Date(e));let i,r,n,o,l="";for(i=0,r=a.length;i<r;i++)n=a[i],/[YynmFfMtjdGHisu]/.test(n)?(o=s?_[n]:g[n],"function"==typeof o?l+=o.call(this,e):"function"==typeof e[o]?l+=e[o]():l+=n):l+=n;return l}function E(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,12)).toUpperCase()}function S(){const e=new Date,a=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return parseInt(a,10)}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.floor((S()-e)/1e3)}function b(e,a,s,i){let r;const n=new Date;i=i||(0,c.X)(),n.setTime(n.getTime()+1e3*s),r=n.toGMTString(),document.cookie="".concat(e,"=").concat(JSON.stringify(a),"; expires=").concat(r,"; path=/; domain=").concat(i),console.warn("This method has been deprecated. Use projects/olymp/src/core/helper/cookie.js instead of this")}function C(e){b(e,"",-1)}function T(){return Math.floor((new Date).getTime()/1e3)}const A=/[,\uFF0C]/;function k(e,a,s){s=s||A,e=Math.floor(e);return"string"==typeof a&&1===(a=a.split(s)).length&&(a=[a[0],a[0],a[0]]),a[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}function w(){let e="";for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return s.forEach((a=>{e+=a?(e?" ":"")+a:""})),e}function N(e){const a="".concat(e);return 1===a.length?"0".concat(a):a}function R(e){let a,s;if(e){if(a=e.tagName.toLowerCase(),a=e.tagName.toLowerCase(),s=e.type,"input"===a)return"radio"===s||"checkbox"===s;if("textarea"===a)return!1}return!0}function I(e){const a={3:"break",8:"backspace",9:"tab",12:"clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"pause/break",20:"caps lock",27:"escape",32:"spacebar",33:"page up",34:"page down",35:"end",36:"home ",37:"&#8592; ",38:"&#8593; ",39:"&#8594;",40:"&#8595; ",41:"select",42:"print",43:"execute",44:"Print Screen",45:"insert ",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:";",60:"<",61:"=",63:"ß",64:"@ (firefox)",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Cmd",92:"right window key ",93:"Cmd",96:"numpad 0 ",97:"numpad 1 ",98:"numpad 2 ",99:"numpad 3 ",100:"numpad 4 ",101:"numpad 5 ",102:"numpad 6 ",103:"numpad 7 ",104:"numpad 8 ",105:"numpad 9 ",106:"multiply ",107:"add",108:"numpad period (firefox)",109:"subtract ",110:"decimal point",111:"divide ",112:"F1 ",113:"F2 ",114:"F3 ",115:"F4 ",116:"F5 ",117:"F6 ",118:"F7 ",119:"F8 ",120:"F9 ",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"num lock ",145:"scroll lock",160:"^",161:"!",163:"#",164:"$",165:"ù",166:"page backward",167:"page forward",169:"closing paren (AZERTY)",170:"*",171:"~ + * key",173:"-",174:"decrease volume level",175:"increase volume level",176:"next",177:"previous",178:"stop",179:"play/pause",180:"e-mail",181:"mute/unmute (firefox)",182:"decrease volume level (firefox)",183:"increase volume level (firefox)",186:";",187:"=",188:"<",189:"dash ",190:"> ",191:"/",192:"~",193:"?, / or °",194:"numpad period (chrome)",219:"[ ",220:"\\ ",221:"]",222:"'",223:"`",224:"left or right ⌘ key (firefox)",225:"altgr",226:"< /git >",230:"GNOME Compose Key",231:"ç",233:"XF86Forward",234:"XF86Back",255:"toggle touchpad"};return e.split("_").map((e=>e.match(/[0-9]/g)?a[e]:e)).join("+")}function D(e){return I(e).split("+").map((e=>'<span class="hotkey-editor-item__button hotkey-editor-item__combset">'.concat(e,"</span>"))).join('<span class="hotkey-editor-item__divider">+</span>')}function O(e){let a,s=[];if(93!==e.which&&91!==e.which||(a=!0),(e.ctrlKey||17===e.which)&&s.push("Ctrl"),a&&s.push("Cmd"),e.metaKey&&s.push("metaKey"),(e.shiftKey||16===e.which)&&s.push("Shift"),(e.altKey||18===e.which)&&s.push("Alt"),16!==e.which&&17!==e.which&&18!==e.which&&91!==e.which&&93!==e.which){let a=e.which;61===a&&(a=187),173===a&&(a=189),59===a&&(a=186),s.push(a)}return s.join("_")}function L(e){return"string"==typeof e?"true"===e:Boolean(e)}(new Date).getTimezoneOffset();function M(e){const a={};return e&&e.length&&e.forEach((e=>{a[e.id]=Object.assign({},e)})),a}const P=(e,a,s)=>{const i=void 0===a?e:Number(e).toFixed(a),n=String(i).split("."),o=r()(n,2),l=o[0],c=o[1],d="hi"===s?/(\d)(?=(\d{2})*\d{3}$)/g:/(\d)(?=(\d{3})+$)/g,m=l.replace(d,"$1".concat(u.$H[s]||","));return c?"".concat(m).concat(u.zH[s]||".").concat(c):m};function x(){return!!navigator.userAgent.match(/(iPhone|iPad|iPod|Android|BalackBerry|Windows Phone)/)}function F(){const e=(0,d.w)(!0);e&&b(m.L0,e)}function B(){const e=(0,n.parse)(window.location.search),a=e.category,s=e.action,i=e.label;window.dataLayer&&a&&s&&(window.dataLayer.push({event:"uaGtmEvents_clicks",eventCategory:a,eventAction:s,eventLabel:i}),window.history.replaceState("",document.title,window.location.pathname))}},90237:(e,a,s)=>{"use strict";s.d(a,{Rx:()=>o,uN:()=>n});var i=s(65990),r=s(57855);function n(e){(0,r.XV)(i.d.TRADE_FRAMES_FIELD,e)}function o(){try{const e=(0,r.Ve)(i.d.TRADE_FRAMES_FIELD);if(e){return JSON.parse(e)}}catch(e){}return null}},17498:(e,a,s)=>{"use strict";s.d(a,{Z:()=>c});var i=s(50391),r=s.n(i),n=s(27378),o=s(23615),l=s.n(o);class BaseComponent extends n.Component{render(){return null}}r()(BaseComponent,"contextTypes",{store:l().object});const c=BaseComponent},68045:(e,a,s)=>{"use strict";s.d(a,{Xd:()=>r,ox:()=>i,ti:()=>n});s(85676),s(50391),s(32952),s(13893),s(60521),s(73842);const i="started",r="stopped",n="fail"},80969:(e,a,s)=>{"use strict";s.d(a,{Z:()=>Model});var i=s(46188),r=s(62323),n=s(17945);class Model{parse(e){return this.generate(e)}parseUpdate(e){return this.generate(e)}parseAll(e,a,s,i){if(Array.isArray(e))return e.map((e=>this.parse(e,a,s,i)))}parseUpdateAll(e,a,s,i){if(Array.isArray(e))return e.map((e=>this.parseUpdate(e,a,s,i)))}generate(e){const a={};return(0,i.Z)(this.attributes,((s,i)=>{a[i]=e&&void 0!==e[i]?e[i]:s.value})),a}getDefault(e){return this.attributes&&this.attributes[e]&&this.attributes[e].value}toBoolean(e){return"string"!=typeof e||"false"!==e&&"true"!==e&&"0"!==e&&"1"!==e?Boolean(e):"true"===e||"1"===e}getConstraints(e){return(0,r.Z)(this.attributes,((a,s)=>("constraints"in s&&(a=e?(0,n.Z)(a,(0,n.Z)(s.constraints,e)):(0,n.Z)(a,s.constraints)),a)),{})}}},73842:(e,a,s)=>{"use strict";s(29258)},33821:(e,a,s)=>{"use strict";s.d(a,{Z:()=>S});var i=s(47014),r=s.n(i),n=s(50391),o=s.n(n),l=s(14090),c=s(47838),d=s(22701),u=s(84902),m=s(7581),p=s(46188),h=s(51116),v=s(68045),g=s(86954),_=s(62132);const f=(0,h.ej)("logMyEvents");function E(){return window.logMyEvents||f}class RequestModel{constructor(e,a){o()(this,"id",null),o()(this,"requestData",null),o()(this,"socket",null),o()(this,"sent",!1),o()(this,"filterData",null),o()(this,"callback",{response:[],fail:[],close:[],open:[],push:[],request:[],error:[],restore:[],logout:[]}),o()(this,"requestUid",null),o()(this,"responseCallback",{}),o()(this,"subscribedEventList",null),this.id=(0,h.sq)(),this.socket=a,e&&this._setRequest(e)}_processHandler(e,a){this.callback[e].push(a),this.socket.pushHandler(e,this)}request(e){return e&&this._setRequest(e),this.socket._send(this),this}onResponse(e){return this.requestUid&&(this.responseCallback[this.requestUid]=e,this.requestUid=null,this.socket.pushHandler("response",this)),this}onFail(e){return this._processHandler("fail",e),this}onError(e){return this._processHandler("error",e),this}onRestore(e){return this._processHandler("restore",e),this}onClose(e){return this._processHandler("close",e),this}onLogout(e){return this._processHandler("logout",e),this}onOpen(e){return this.socket.serviceStatus===v.ox?e():this._processHandler("open",e),this}onPush(e){return this._processHandler("push",e),this}unSubscribe(e,a){return(0,l.Z)(this.callback[e],(e=>e===a)),this}onRequest(e){return this._processHandler("request",e),this}clear(){this.subscribedEventList&&this.subscribedEventList.length&&this.unSubscribeEventList(this.subscribedEventList),this.socket._removeRequest(this)}filter(e){return this.filterData=e,this}_setRequest(e){if(this.socket&&!this.socket.options.prepareRequest)this.requestData=e,this.requestUid=e.uuid;else{if(e instanceof Object&&!(0,c.Z)(e))this.requestData=[e];else{if(!(0,c.Z)(e))throw new Error("req format is not valid");this.requestData=e}this.requestData.forEach((e=>{e.type||(e.type="request"),e.uuid||"request"!==e.type||(e.uuid=(0,h.sq)())})),1===this.requestData.length&&(this.requestUid=this.requestData[0].uuid)}}_response(e,a){const s=this.callback[a],i=this.socket.options.prepareRequest;"response"===a&&this.responseCallback[e.uuid]?(this.responseCallback[e.uuid](e.data,e.error&&e.error[0]?e.error[0]:null,e),this.responseCallback[e.uuid]=void 0):!i&&this.responseCallback[e.uuid]?(this.responseCallback[e.uuid](e),this.responseCallback[e.uuid]=void 0):s&&s.length&&s.forEach((s=>i?("request"!==e.type&&"push"!==a||!this._checkFilter(e)||s(e.event_name,e.data,e),!1):(s(e),!1)))}_checkFilter(e){if((0,d.Z)(this.filterData)){if((0,u.Z)([e],this.filterData))return!0}else if("function"==typeof this.filterData)return this.filterData(e);return!0}subscribeEventList(e){if(Array.isArray(e)&&e.length){const a=this.socket.subscribedEventsCache,s=e.reduce(((e,s)=>(a[s]?a[s]++:(a[s]=1,e.push(s)),e)),[]);s.length&&(this.request((0,g.MA)(this.socket.options.subscribeChangesEvent,s)),this.subscribedEventList=this.subscribedEventList?(0,m.Z)([...this.subscribedEventList,...s]):[...s])}return this}unSubscribeEventList(e){if(Array.isArray(e)&&e.length){const a=this.socket.subscribedEventsCache,s=e.reduce(((e,s)=>(a[s]&&a[s]--,0===a[s]&&(delete a[s],e.push(s)),e)),[]);s.length&&this.request((0,g.MA)(this.socket.options.unSubscribeChangesEvent,s))}return this}}function S(e){return class SocketService extends e{constructor(e){let a=e.reconnect,s=void 0===a||a,i=e.prepareRequest,r=void 0===i||i,n=e.requestAfterReconnect,l=void 0!==n&&n,c=e.id,d=void 0===c?(0,h.sq)():c,u=e.subscribeChangesEvent,m=e.unSubscribeChangesEvent;super(),o()(this,"options",{}),o()(this,"connect",null),o()(this,"wasLogout",!1),o()(this,"emulateFail",!1),o()(this,"firstOpen",!0),o()(this,"requests",[]),o()(this,"requestsHash",{response:[],fail:[],close:[],open:[],push:[],request:[],error:[],restore:[],logout:[]}),o()(this,"subscribedEventsCache",{}),o()(this,"config",{autoBind:!1}),this.options={reconnect:s,prepareRequest:r,requestAfterReconnect:l,id:d,subscribeChangesEvent:u,unSubscribeChangesEvent:m},this.config.bindAs=d}onStart(e){return new Promise(((a,s)=>{const i=setTimeout((()=>{this.socket&&this.socket.isConnecting()&&(a(),console.error("Socket open timeout"))}),3e3);this._createConnection(e).then((()=>{clearTimeout(i),a()})),this.emulateFail=!1}))}tryFail(){this.emulateFail=!0,this.onStop()}onStop(){return this.closeConnection(),this.requests.forEach((e=>{e.sent=!1})),this.setServiceStatus(v.Xd),!0}request(e){const a=this.add(e);return a.request(),a}repeatSubscriptions(){const e=Object.keys(this.subscribedEventsCache).map((e=>Number(e)));e&&e.length&&this.request([(0,g.MA)(this.options.subscribeChangesEvent,e)])}add(e){const a=new RequestModel(e,this);return this.requests.push(a),a}pushHandler(e,a){let s;this.requestsHash[e].length&&(s=(0,u.Z)(this.requestsHash[e],{id:a.id})),s||this.requestsHash[e].push(a)}_createConnection(e){var a=this;return r()((function*(){e&&(a.sourceRequest=e);const s=()=>{a.error=null,a.setServiceStatus(v.ox),a.sourceRequest&&a._send({requestData:a.sourceRequest}),a.firstOpen?(a.firstOpen=!1,a._notice("open")):a._notice("restore"),a._sendAll()};return a.connect=_.W.legacy.connect,a.connect.on("message",(e=>a._response(e))),a.connect.isOpened()||(yield a.connect.open()),s(),a.connect.on("open",s),a.connect.on("closeByUser",(e=>{a.error||a._notice("close",e)})),a.connect.on("close",(e=>{const s=a.error;s||a._notice("close",e),1008!==e.code?(1e3!==e.code&&1005!==e.code||a.emulateFail)&&(a.setServiceStatus(v.ti),a._notice("fail",e),s||(a.error=e)):a.wasLogout||(a._notice("logout",e),a.wasLogout=!0)})),a.connect.on("error",(function(e){a._notice("error",e),a.error=e,a.setServiceStatus(v.ti,e&&e.code)})),new Promise(((e,s)=>{if(!a.connect)return void s(new Error("No socket connection"));const i=a.connect.on("close",(e=>{i(),s(e)}));if(a.connect.isOpened())i(),e();else{let s=a.connect.on("open",(()=>{i(),s(),e()}))}}))}))()}restoreConnection(){this.connect.open()}closeConnection(){this.connect.close()}breakConnection(){this.connect.breakConnection()}_sendAll(){this.requests.forEach((e=>{e.sent&&!this.options.requestAfterReconnect||this._send(e)}))}_removeRequest(e){e.socket=null,(0,l.Z)(this.requests,(a=>a.id===e.id)),(0,p.Z)(this.requestsHash,(a=>{(0,l.Z)(a,(a=>a.id===e.id))}))}_response(e){const a=JSON.parse(e.data),s=(0,g.J2)(a);E()&&(0,g.Kz)("from server",s,a),s.forEach((e=>{this._responseDo(e,e.type)}))}_responseDo(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";const s=this.requestsHash[a];s&&s.length&&s.forEach((s=>{s._response(e,a)})),"request"===a&&this._send({requestData:[{type:"response",uuid:e.uuid,event_name:e.event_name}]})}_notice(e,a){this.requests.forEach((s=>{Array.isArray(s.callback[e])&&s.callback[e].forEach((e=>{e(a)}))}))}_send(e){return null!==e.requestData&&(E()&&(0,g.Kz)("to server",e.requestData,(0,g.M)(e.requestData)),!!this.connect&&(this.connect.sendRaw(JSON.stringify((0,g.M)(e.requestData))),e.requestData=null,e.sent=!0,!0))}}}},86954:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J2:()=>convertFromSocketRawEvents,Kz:()=>logEvent,M:()=>convertToSocketRawEvents,MA:()=>parseSocketRequest});var lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(70003),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(62540),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(62323),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(46525),lodash__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(48583),core_constants_socketEvents__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(86933),core_helper_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51116);const socketEventTypes=["push","request","response"];function convertFromSocketRawEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((e=>{const a={type:socketEventTypes[0],event_name:core_constants_socketEvents__WEBPACK_IMPORTED_MODULE_0__.q5[e.e]};return e.ts&&(a.timestamp=e.ts),e.t&&(a.type=socketEventTypes[e.t-1]),e.d&&(a.data=e.d),e.err&&(a.error=e.err),e.uuid&&(a.uuid=e.uuid),a}))}function convertToSocketRawEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((e=>{const a={t:socketEventTypes.indexOf(e.type)+1,e:Number((0,lodash__WEBPACK_IMPORTED_MODULE_2__.Z)(core_constants_socketEvents__WEBPACK_IMPORTED_MODULE_0__.q5)[e.event_name])};return e.uuid&&(a.uuid=e.uuid),e.data&&(a.d=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.Z)(e.data)),e.timestamp&&(a.ts=e.timestamp),a}))}function logEvent(type,parsedData,rawData){let events=(0,lodash__WEBPACK_IMPORTED_MODULE_4__.Z)((0,lodash__WEBPACK_IMPORTED_MODULE_5__.Z)(parsedData,"event_name"),((e,a,s)=>e.concat("".concat(a.length>1?"".concat(a.length," "):"").concat(s))),[]);const filterMyEvents=window.filterMyEvents||(0,core_helper_util__WEBPACK_IMPORTED_MODULE_1__.ej)("filterMyEvents"),excludedOftenMyEvents=window.excludedOftenMyEvents||(0,core_helper_util__WEBPACK_IMPORTED_MODULE_1__.ej)("excludedOftenMyEvents");let excludedMyEvents=window.excludedMyEvents||(0,core_helper_util__WEBPACK_IMPORTED_MODULE_1__.ej)("excludedMyEvents");if(excludedOftenMyEvents&&(excludedMyEvents=["candle:change","tick:change","servertime:up","candle:history","user_online:change"]),"string"==typeof excludedMyEvents)try{excludedMyEvents=eval(excludedMyEvents)}catch(e){}if((filterMyEvents||excludedMyEvents)&&(events=events.filter(((e,a)=>("notice:show"===e&&parsedData[a]&&parsedData[a].data&&parsedData[a].data.forEach((e=>{console.groupCollapsed("notice %c".concat(e.name),"color: ".concat("#666666")),console.groupEnd()})),filterMyEvents&&e===filterMyEvents||!!excludedMyEvents&&!(0,lodash__WEBPACK_IMPORTED_MODULE_6__.Z)(excludedMyEvents,e))))),events.length>0){const e="ds/v2 log %c".concat("to server"===type?"⬆":"⬇"," %c").concat(events.join(", "));console.groupCollapsed(e,"color: ".concat("to server"===type?"green":"red"),"color: ".concat("#666666")),console.group("Parsed events"),console.groupEnd(),console.groupCollapsed("Raw events"),console.groupEnd(),console.groupEnd()}}function parseSocketRequest(e,a){return{type:"request",uuid:(0,core_helper_util__WEBPACK_IMPORTED_MODULE_1__.sq)(),event_name:e,data:a}}},87605:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const ajaxNative=function(t){const XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function send(url,onSucces,onError,props){let key,postDataStr,time,postData=props&&props.data?props.data:null,params=props&&props.params?props.params:null,dataType=props&&props.dataType?props.dataType:null,method=props&&props.method?props.method:"GET",context=props&&props.context?props.context:null,crossdomain=!(!props||!props.crossdomain)&&props.crossdomain,emptyResponce=!(!props||!props.emptyResponce)&&props.emptyResponce,nocache=!props||void 0===props.nocache||props.nocache;postData&&"object"==typeof postData?(postDataStr=new URLSearchParams(Object.entries(postData)).toString(),postDataStr.length&&"GET"===method&&(url=/\?/.test(url)?url:"".concat(url,"?").concat(postDataStr))):void 0!==postData&&(postDataStr=postData),nocache&&(time=(new Date).getTime()/1e3,url=/\?/.test(url)?"".concat(url,"&_=").concat(time):"".concat(url,"?_=").concat(time));const req=createXMLHTTPObject();req&&(req.open(method,url,!0),crossdomain||req.setRequestHeader("X-Requested-With","XMLHttpRequest"),postDataStr&&req.setRequestHeader("Content-type","application/x-www-form-urlencoded"),req.onreadystatechange=function(){let json;if(4==req.readyState){if(200!=req.status&&304!=req.status)return props.req=req,props.errorDesc="Ajax req.status error",void error(url,onSucces,onError,props);if("function"==typeof onSucces)if("json"==dataType){try{eval("json = ".concat(req.response,";"))}catch(e){return props.e=e,props.req=req,props.errorDesc="Ajax data type error",props.attempts=1,props.iRepeat=null,void error(url,onSucces,onError,props)}json&&"object"==typeof json?(onSucces.call(context,json,params),props.iRepeatLink&&clearInterval(props.iRepeatLink)):(props.req=req,props.errorDesc="Ajax data type error",error(url,onSucces,onError,props))}else req.response.length||emptyResponce?onSucces.call(context,req.response,params):(props.req=req,props.errorDesc="Ajax empty respone error",error(url,onSucces,onError,props))}},4!=req.readyState&&req.send(postDataStr))}function error(e,a,s,i){let r=i&&i.repeats?i.repeats:0,n=i&&i.context?i.context:null,o=i&&i.errorDesc?i.errorDesc:"unknown error",l=i&&i.attempts?i.attempts:3,c=i&&i.iRepeat?i.iRepeat:null,d=i&&i.iRepeatDone?i.iRepeatDone:0,u=i&&i.iRepeatTime?i.iRepeatTime:1e3,m=i&&i.iRepeatLink?i.iRepeatLink:null;!i.req||!i.req.status||404!==i.req.status&&403!==i.req.status?r<l&&!d?(i.repeats=r+=1,send(e,a,s,i)):(!d&&r>=l&&("function"==typeof s?(i.error1=!0,i.error2=!1,s.call(n,i)):"".concat(o,"(").concat(e,")")),d<c?m=setTimeout((()=>{d++,i.iRepeatDone=d,i.iRepeatLink=m,i.iRepeatTime=u+3e3,send(e,a,s,i)}),u):d&&("function"==typeof s?(i.error2=!0,i.error1=!1,s.call(n,i)):"2.".concat(o,"(").concat(e,")"),clearTimeout(m))):"function"==typeof s?(i.error1=!0,i.error2=!0,s.call(n,i)):"".concat(o,"(").concat(e,")")}function createXMLHTTPObject(){let e=!1;for(let a=0;a<XMLHttpFactories.length;a++){try{e=XMLHttpFactories[a]()}catch(e){continue}break}return e}return t.send=send,t}({});function __WEBPACK_DEFAULT_EXPORT__(e){if(!e.url)return!1;let a=(void 0!==e.appUrl?e.appUrl:"")+e.url,s=e.type||"GET",i=e.data||null,r=e.params||null,n=e.dataType||"json",o=e.nocache||!0,l=e.context||this,c=e.onLoad||null,d=e.onError||null,u=void 0!==e.iRepeat?e.iRepeat:30,m=e.iRepeatTime,p=e.attempts,h=e.emptyResponce,v=e.crossdomain||!1;e.states||(e.states={ajaxRepeatAttempts:0,ajaxErrorFlag:!1}),ajaxNative.send(a,c,d,{data:i,params:r,context:l,method:s,nocache:o,dataType:n,iRepeat:u,iRepeatTime:m,attempts:p,emptyResponce:h,crossdomain:v})}},51098:(e,a,s)=>{"use strict";s.d(a,{ZP:()=>n});s(27378);var i=s(31542),r=s(23615);const n={doAction:{doAction(e,a,s,i,r,n){let o,l=a&&a.actionEvents?a:this.props.actions||this.context.actions;a&&a.actionEvents&&(a=s,s=i,i=r,r=n),e?(o="function"==typeof e.value?e.value.call(null,a,s,i,r):e.value,Array.isArray(o)?o.__isParams?l.trigger(e.type,o[0],o[1],o[2],o[3],o[4]):l.trigger(e.type,o):null===o?l.trigger(e.type,a,s,i,r):void 0!==o&&l.trigger(e.type,o)):console.error("doAction: Action not found!",this)}},childWithContext:{contextTypes:{actions:s.n(r)().object},doAction(e,a){const s="".concat(this.constructor.displayName,".");this.context.actions&&this.context.actions.trigger(s+e),a&&a.preventDefault&&a.preventDefault()}},changeContextBinding:{model:null,componentDidMount(){this.switchModel(this.context.models)},UNSAFE_componentWillReceiveProps(e,a){this.switchModel(a.models)},componentWillUnmount(){this.unbindModel()},switchModel(e){this.model&&this.model!==e&&this.unbindModel(),this.model=e,this.bindModel()}},unmountMe:{unmountMe(){i.unmountComponentAtNode(i.findDOMNode(this).parentNode)}},focus:{focus(e){null!=e&&e.focus&&e.focus()}},getUserFormClass:{getClass(e,a){return a+(this.props.messages&&this.props.messages[e]?" -error":"")}}}},30327:(e,a,s)=>{"use strict";let i;s.d(a,{Z:()=>r}),e=s.hmd(e),function(e,a,s){var r=function e(a,s,i){i=n.extend({},n.options,i);let r,o,l=n.runValidations(a,s,i);for(r in l)for(o in l[r])if(n.isPromise(l[r][o]))throw new Error("Use validate.async if you want support for promises");return e.processValidationResults(l,i)},n=r;n.extend=function(e){return[].slice.call(arguments,1).forEach((a=>{for(const s in a)e[s]=a[s]})),e},n.extend(r,{version:{major:0,minor:10,patch:0,metadata:"development",toString(){let e=n.format("%{major}.%{minor}.%{patch}",n.version);return n.isEmpty(n.version.metadata)||(e+="+".concat(n.version.metadata)),e}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations(e,a,s){let i,r,o,l,c,d,u,m=[];for(i in(n.isDomElement(e)||n.isJqueryElement(e))&&(e=n.collectFormValues(e)),a)for(r in o=n.getDeepObjectValue(e,i),l=n.result(a[i],o,e,i,s,a),l){if(c=n.validators[r],!c)throw u=n.format("Unknown validator %{name}",{name:r}),new Error(u);d=l[r],d=n.result(d,o,e,i,s,a),d&&m.push({attribute:i,value:o,validator:r,globalOptions:s,attributes:e,options:d,error:c.call(c,o,d,i,e,s)})}return m},processValidationResults(e,a){e=n.pruneEmptyErrors(e,a),e=n.expandMultipleErrors(e,a),e=n.convertErrorMessages(e,a);const s=a.format||"grouped";if("function"!=typeof n.formatters[s])throw new Error(n.format("Unknown format %{format}",a));return e=n.formatters[s](e),n.isEmpty(e)?void 0:e},async(e,a,s){const i=(s=n.extend({},n.async.options,s)).wrapErrors||function(e){return e};!1!==s.cleanAttributes&&(e=n.cleanAttributes(e,a));const r=n.runValidations(e,a,s);return new n.Promise(((o,l)=>{n.waitForResults(r).then((()=>{const c=n.processValidationResults(r,s);c?l(new i(c,s,e,a)):o(e)}),(e=>{l(e)}))}))},single:(e,a,s)=>(s=n.extend({},n.single.options,s,{format:"flat",fullMessages:!1}),n({single:e},{single:a},s)),waitForResults:e=>e.reduce(((e,a)=>n.isPromise(a.error)?e.then((()=>a.error.then((e=>{a.error=e||null})))):e),new n.Promise((e=>{e()}))),result(e){const a=[].slice.call(arguments,1);return"function"==typeof e&&(e=e(...a)),e},isNumber:e=>"number"==typeof e&&!isNaN(e),isFunction:e=>"function"==typeof e,isInteger:e=>n.isNumber(e)&&e%1==0,isBoolean:e=>"boolean"==typeof e,isObject:e=>e===Object(e),isDate:e=>e instanceof Date,isDefined:e=>null!=e,isPromise:e=>!!e&&n.isFunction(e.then),isJqueryElement:e=>e&&n.isString(e.jquery),isDomElement:e=>!!e&&(!(!e.querySelectorAll||!e.querySelector)&&(!(!n.isObject(document)||e!==document)||("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName))),isEmpty(e){let a;if(!n.isDefined(e))return!0;if(n.isFunction(e))return!1;if(n.isString(e))return n.EMPTY_STRING_REGEXP.test(e);if(n.isArray(e))return 0===e.length;if(n.isDate(e))return!1;if(n.isObject(e)){for(a in e)return!1;return!0}return!1},format:n.extend(((e,a)=>n.isString(e)?e.replace(n.format.FORMAT_REGEXP,((e,s,i)=>"%"===s?"%{".concat(i,"}"):String(a[i]))):e),{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:e=>n.isNumber(e)?100*e%1==0?"".concat(e):parseFloat(Math.round(100*e)/100).toFixed(2):n.isArray(e)?e.map((e=>n.prettify(e))).join(", "):n.isObject(e)?e.toString():(e="".concat(e)).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,((e,a,s)=>"".concat(a," ").concat(s.toLowerCase()))).toLowerCase(),stringifyValue:e=>n.prettify(e),isString:e=>"string"==typeof e,isArray:e=>"[object Array]"==={}.toString.call(e),isHash:e=>n.isObject(e)&&!n.isArray(e)&&!n.isFunction(e),contains:(e,a)=>!!n.isDefined(e)&&(n.isArray(e)?-1!==e.indexOf(a):a in e),unique:e=>n.isArray(e)?e.filter(((e,a,s)=>s.indexOf(e)==a)):e,forEachKeyInKeypath(e,a,s){if(!n.isString(a))return;let i,r="",o=!1;for(i=0;i<a.length;++i)switch(a[i]){case".":o?(o=!1,r+="."):(e=s(e,r,!1),r="");break;case"\\":o?(o=!1,r+="\\"):o=!0;break;default:o=!1,r+=a[i]}return s(e,r,!0)},getDeepObjectValue(e,a){if(n.isObject(e))return n.forEachKeyInKeypath(e,a,((e,a)=>{if(n.isObject(e))return e[a]}))},collectFormValues(e,a){let s,i,r,o,l,c,d={};if(n.isJqueryElement(e)&&(e=e[0]),!e)return d;for(a=a||{},o=e.querySelectorAll("input[name], textarea[name]"),s=0;s<o.length;++s)r=o.item(s),n.isDefined(r.getAttribute("data-ignored"))||(c=n.sanitizeFormValue(r.value,a),"number"===r.type?c=c?+c:null:"checkbox"===r.type?r.attributes.value?r.checked||(c=d[r.name]||null):c=r.checked:"radio"===r.type&&(r.checked||(c=d[r.name]||null)),d[r.name]=c);for(o=e.querySelectorAll("select[name]"),s=0;s<o.length;++s){if(r=o.item(s),r.multiple)for(i in c=[],r.options)l=r.options[i],l.selected&&c.push(n.sanitizeFormValue(l.value,a));else c=n.sanitizeFormValue(r.options[r.selectedIndex].value,a);d[r.name]=c}return d},sanitizeFormValue:(e,a)=>(a.trim&&n.isString(e)&&(e=e.trim()),!1!==a.nullify&&""===e?null:e),capitalize:e=>n.isString(e)?e[0].toUpperCase()+e.slice(1):e,pruneEmptyErrors:e=>e.filter((e=>!n.isEmpty(e.error))),expandMultipleErrors(e){const a=[];return e.forEach((e=>{n.isArray(e.error)?e.error.forEach((s=>{a.push(n.extend({},e,{error:s}))})):a.push(e)})),a},convertErrorMessages(e,a){a=a||{};const s=[];return e.forEach((e=>{let i=n.result(e.error,e.value,e.attribute,e.options,e.attributes,e.globalOptions);n.isString(i)?("^"===i[0]?i=i.slice(1):!1!==a.fullMessages&&(i="".concat(n.capitalize(n.prettify(e.attribute))," ").concat(i)),i=i.replace(/\\\^/g,"^"),i=n.format(i,{value:n.stringifyValue(e.value)}),s.push(n.extend({},e,{error:i}))):s.push(e)})),s},groupErrorsByAttribute(e){const a={};return e.forEach((e=>{const s=a[e.attribute];s?s.push(e):a[e.attribute]=[e]})),a},flattenErrorsToArray:e=>e.map((e=>e.error)),cleanAttributes(e,a){function s(e,a,s){return n.isObject(e[a])?e[a]:e[a]=!!s||{}}return n.isObject(a)&&n.isObject(e)?function e(a,s){if(!n.isObject(a))return a;let i,r,o=n.extend({},a);for(r in a)i=s[r],n.isObject(i)?o[r]=e(o[r],i):i||delete o[r];return o}(e,a=function(e){let a,i={};for(a in e)e[a]&&n.forEachKeyInKeypath(i,a,s);return i}(a)):{}},exposeModule(){i=r},warn(e){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] ".concat(e))},error(e){"undefined"!=typeof console&&console.error&&console.error("[validate.js] ".concat(e))}}),r.validators={presence(e,a){if(a=n.extend({},this.options,a),n.isEmpty(e))return a.message||this.message||"can't be blank"},length(e,a,s){if(n.isEmpty(e))return;let i,r=(a=n.extend({},this.options,a)).is,o=a.maximum,l=a.minimum,c=[];const d=(e=(a.tokenizer||function(e){return e})(e)).length;return n.isNumber(d)?(n.isNumber(r)&&d!==r&&(i=a.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",c.push(n.format(i,{count:r}))),n.isNumber(l)&&d<l&&(i=a.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",c.push(n.format(i,{count:l}))),n.isNumber(o)&&d>o&&(i=a.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",c.push(n.format(i,{count:o}))),c.length>0?a.message||c:void 0):(n.error(n.format("Attribute %{attr} has a non numeric value for `length`",{attr:s})),a.message||this.notValid||"has an incorrect length")},numericality(e,a){if(n.isEmpty(e))return;a=n.extend({},this.options,a);let s,i,r=[],o={greaterThan:(e,a)=>e>a,greaterThanOrEqualTo:(e,a)=>e>=a,equalTo:(e,a)=>e===a,lessThan:(e,a)=>e<a,lessThanOrEqualTo:(e,a)=>e<=a,divisibleBy:(e,a)=>e%a==0};if(n.isString(e)&&a.strict){let s="^(0|[1-9]\\d*)";if(a.onlyInteger||(s+="(\\.\\d+)?"),s+="$",!new RegExp(s).test(e))return a.message||a.notValid||this.notValid||"must be a valid number"}if(!0!==a.noStrings&&n.isString(e)&&(e=+e),!n.isNumber(e))return a.message||a.notValid||this.notValid||"is not a number";if(a.onlyInteger&&!n.isInteger(e))return a.message||a.notInteger||this.notInteger||"must be an integer";for(s in o)if(i=a[s],n.isNumber(i)&&!o[s](e,i)){const e="not".concat(n.capitalize(s)),o=a[e]||this[e]||"must be %{type} %{count}";r.push(n.format(o,{count:i,type:n.prettify(s)}))}return a.odd&&e%2!=1&&r.push(a.notOdd||this.notOdd||"must be odd"),a.even&&e%2!=0&&r.push(a.notEven||this.notEven||"must be even"),r.length?a.message||r:void 0},datetime:n.extend((function(e,a){if(!n.isFunction(this.parse)||!n.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(n.isEmpty(e))return;let s,i=[],r=(a=n.extend({},this.options,a)).earliest?this.parse(a.earliest,a):NaN,o=a.latest?this.parse(a.latest,a):NaN;return e=this.parse(e,a),isNaN(e)||a.dateOnly&&e%864e5!=0?(s=a.notValid||a.message||this.notValid||"must be a valid date",n.format(s,{value:arguments[0]})):(!isNaN(r)&&e<r&&(s=a.tooEarly||a.message||this.tooEarly||"must be no earlier than %{date}",s=n.format(s,{value:this.format(e,a),date:this.format(r,a)}),i.push(s)),!isNaN(o)&&e>o&&(s=a.tooLate||a.message||this.tooLate||"must be no later than %{date}",s=n.format(s,{date:this.format(o,a),value:this.format(e,a)}),i.push(s)),i.length?n.unique(i):void 0)}),{parse:null,format:null}),date:(e,a)=>(a=n.extend({},a,{dateOnly:!0}),n.validators.datetime.call(n.validators.datetime,e,a)),format(e,a){(n.isString(a)||a instanceof RegExp)&&(a={pattern:a});let s,i=(a=n.extend({},this.options,a)).message||this.message||"is invalid",r=a.pattern;if(!n.isEmpty(e))return n.isString(e)?(n.isString(r)&&(r=new RegExp(a.pattern,a.flags)),s=r.exec(e),s&&s[0].length==e.length?void 0:i):i},inclusion(e,a){if(n.isEmpty(e))return;if(n.isArray(a)&&(a={within:a}),a=n.extend({},this.options,a),n.contains(a.within,e))return;const s=a.message||this.message||"^%{value} is not included in the list";return n.format(s,{value:e})},exclusion(e,a){if(n.isEmpty(e))return;if(n.isArray(a)&&(a={within:a}),a=n.extend({},this.options,a),!n.contains(a.within,e))return;const s=a.message||this.message||"^%{value} is restricted";return n.format(s,{value:e})},email:n.extend((function(e,a){const s=(a=n.extend({},this.options,a)).message||this.message||"is not a valid email";if(!n.isEmpty(e))return n.isString(e)&&this.PATTERN.exec(e)?void 0:s}),{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality(e,a,s,i){if(n.isEmpty(e))return;n.isString(a)&&(a={attribute:a});const r=(a=n.extend({},this.options,a)).message||this.message||"is not equal to %{attribute}";if(n.isEmpty(a.attribute)||!n.isString(a.attribute))throw new Error("The attribute must be a non empty string");let o=n.getDeepObjectValue(i,a.attribute);return(a.comparator||function(e,a){return e===a})(e,o,a,s,i)?void 0:n.format(r,{attribute:n.prettify(a.attribute)})},url(e,a){if(n.isEmpty(e))return;let s=(a=n.extend({},this.options,a)).message||this.message||"is not a valid url",i=a.schemes||this.schemes||["http","https"],r=a.allowLocal||this.allowLocal||!1;if(!n.isString(e))return s;let o="".concat("^(?:(?:").concat(i.join("|"),"):\\/\\/)")+"(?:\\S+(?::\\S*)?@)?";o+="(?:";let l="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";r?l+="?":o+="(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})";const c="".concat("(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*").concat(l,")");o+="".concat("(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|").concat(c,"(?::\\d{2,5})?")+"(?:\\/[^\\s]*)?$";return new RegExp(o,"i").exec(e)?void 0:s}},r.formatters={detailed:e=>e,flat:n.flattenErrorsToArray,grouped(e){let a;for(a in e=n.groupErrorsByAttribute(e))e[a]=n.flattenErrorsToArray(e[a]);return e}},r.exposeModule(r,this,e,a,s)}.call(void 0,"undefined"!=typeof exports?exports:null,e,"undefined"!=typeof define?define:null);const r=i},32299:(e,a,s)=>{"use strict";s.d(a,{a:()=>n});var i=s(27378),r=s(17302);function n(){return i.createElement("div",{className:"chart-spinner"},i.createElement(r.$j,null))}},65307:(e,a,s)=>{"use strict";s.d(a,{RZ:()=>r,dW:()=>i});Object.freeze({changeChartType:"emscripten_changeChartType",setLibType:"emscripten_setLibType",clearData:"emscripten_clearData",setServerTime:"emscripten_setServerTime",resize:"emscripten_resize",setColorScheme:"emscripten_setColorScheme",setInputCallbacksTarget:"emscripten_setInputCallbacksTarget",clearHistoryModel:"emscripten_clearHistoryModel",addCandleToHistoryModel:"emscripten_addCandleToHistoryModel",addTickToHistoryModel:"emscripten_addTickToHistoryModel",pushHistoryModel:"emscripten_pushHistoryModel",addCandle:"emscripten_addCandle",updateCandle:"emscripten_updateCandle",addTick:"emscripten_addTick",addIndicator:"emscripten_addIndicator",setIndicatorsComponentActive:"emscripten_setIndicatorsComponentActive",addIndicatorsComponentColor:"emscripten_addIndicatorsComponentColor",addIndicatorsComponentOpacity:"emscripten_addIndicatorsComponentOpacity",addIndicatorsComponentPeriods:"emscripten_addIndicatorsComponentPeriods",setIndicatorsComponentStyle:"emscripten_setIndicatorsComponentStyle",setIndicatorsComponentWidth:"emscripten_setIndicatorsComponentWidth",initStrikesArray:"emscripten_initStrikesArray",addStrikeToArray:"emscripten_addStrikeToArray",flushStrikesArray:"emscripten_flushStrikesArray",selectStrike:"emscripten_selectStrike",scrollToLastCandle:"emscripten_scrollToLastCandle",changeHorizontalZoomBy:"emscripten_changeHorizontalZoomBy",setPrecision:"emscripten_setPrecision",setTimeframe:"emscripten_setTimeframe",setDealDuration:"emscripten_setDealDuration",setCandleWidth:"emscripten_setCandleWidth",setCandleMargin:"emscripten_setCandleMargin",setCurrentScrollValue:"emscripten_setCurrentScrollValue",setVerticalMagnificationClamp:"emscripten_setVerticalMagnificationClamp",initDealsArray:"emscripten_initDealsArray",addDealToArray:"emscripten_addDealToArray",flushDealsArray:"emscripten_flushDealsArray",removeDeal:"emscripten_removeDeal",selectDeal:"emscripten_selectDeal",unselectDeal:"emscripten_unselectDeal",setDealExpiration:"emscripten_setDealExpiration",addOrders:"emscripten_addOrder",removeOrders:"emscripten_removeOrder",selectOrder:"emscripten_selectOrder",addNews:"emscripten_addNews",removeAllNews:"emscripten_removeAllNews",setStopOrderEditModeEnabled:"emscripten_setStopOrderEditModeEnabled"});const i=Object.freeze({LINE:0,CANDLE:1,BAR:2,"HEIKEN-ASHI":3}),r=Object.freeze({FOREX:0,DIGITAL:1});Object.freeze({adx:20,alligator:8,aroon:9,awesome:21,bearspower:10,bollinger:6,bullspower:11,cci:12,demarker:13,detrendedPrice:17,ema:4,gator:19,ichimoku:7,macd:0,momentum:16,parabolic:1,rateOfChange:15,rsi:5,sma:3,stochastic:2,williamsr:18,wma:22,zigZag:14,pivotPoints:25,bwFractals:23,donchianChannel:27,stochrsi:24,inversionBollinger:26,moonPhasesIndicator:28})},71221:(e,a,s)=>{"use strict";s.d(a,{IA:()=>i});s(49491);function i(e,a){return[e?"".concat(Math.floor(e)).length:1,a]}},71028:(e,a,s)=>{"use strict";s.d(a,{P:()=>v});var i,r,n,o,l,c=s(50391),d=s.n(c),u=s(32952),m=s.n(u),p=s(28660),h=s(26763);let v=(i=(0,p.bindAs)(h.NOTICE_STORE),r=(0,p.onBind)(h.NOTICE_SERVICE),n=(0,p.onBind)(h.PAGE_SERVICE),i((l=class NoticeStore{constructor(){d()(this,"api",{closeNotice:this.closeNotice.bind(this),showNotice:this.showNotice.bind(this)})}closeNotice(e,a){return this.noticeService.remove(e,a),!1}showNotice(e){this.noticeService.add(e)}onNoticeServiceBind(e){this.noticeService=e}onPageServiceBind(e){this.page=e.page}},m()(l.prototype,"onNoticeServiceBind",[r],Object.getOwnPropertyDescriptor(l.prototype,"onNoticeServiceBind"),l.prototype),m()(l.prototype,"onPageServiceBind",[n],Object.getOwnPropertyDescriptor(l.prototype,"onPageServiceBind"),l.prototype),o=l))||o)},21378:(e,a,s)=>{"use strict";s.d(a,{q:()=>DefaultEventHandlers});var i=s(47014),r=s.n(i),n=s(50391),o=s.n(n),l=s(31257),c=s(51116),d=s(65457);class DefaultEventHandlers{constructor(){o()(this,"setNotice",(e=>(e.notice||(e.notice={}),e.notice.name||(e.notice.name=e.name||"defaultName"),e.id||(e.id=(0,c.sq)()),e.notice.statUrl||(e.notice.statUrl="/notice/action"),e))),o()(this,"onBeforeAdd",r()((function*(){}))),o()(this,"onAfterAdd",function(){var e=r()((function*(e){e.notice.saveOpen&&l.e.saveStat("show",e.id,e.notice.name,e.notice.statUrl)}));return function(a){return e.apply(this,arguments)}}()),o()(this,"onTimeout",(e=>{e.notice.saveAutoClose&&l.e.saveStat("auto_hide",e.id,e.notice.name,e.notice.statUrl)})),o()(this,"onClose",(e=>{d.X.addHideHashNotice(e),e.notice.saveClose&&l.e.saveStat("hide",e.id,e.notice.name,e.notice.statUrl)}))}}},31257:(e,a,s)=>{"use strict";s.d(a,{e:()=>Http});var i=s(71978),r=s(66713);class Http{static saveStat(e,a,s,n){i.Z.post(n,{version:"v1",project:r.Fw.BINARY,data:{operation_type:e,notice_id:a,notice_name:s}})}}},96667:(e,a,s)=>{"use strict";s.d(a,{Z:()=>m});var i=s(47014),r=s.n(i),n=s(33821),o=s(26763),l=s(86933),c=s(2926),d=s(51116),u=s(44175);class DataService extends((0,n.Z)(c.Z)){onStart(){var e=()=>super.onStart,a=this;return r()((function*(){const s=yield u.q.getActual();return a.options.url="".concat(s.otp.ws.common.url||""),e().call(a)}))()}requestVersionApi(){return{type:"push",event_name:"api_version:set",data:[{ver:2}]}}requestActivePair(e,a){const s=a.map((a=>({cat:e,pair:a})));return{type:"request",uuid:(0,d.sq)(),event_name:"pair_active:set",data:s}}sendRestore(){var e;const a=[],s=null!==(e=this.importVar(o.TRADE_MANAGER_SERVICE,"framesPairs"))&&void 0!==e?e:[];s.length&&a.push(this.requestActivePair("digital",s)),this.repeatSubscriptions(),a.length&&this.request(a)}}const m=new DataService({reconnect:!0,id:o.DATA_SERVICE,subscribeChangesEvent:l.U3.CHANGES_SUBSCRIBE,unSubscribeChangesEvent:l.U3.CHANGES_UNSUBSCRIBE})},45032:(e,a,s)=>{"use strict";var i,r,n,o,l=s(85676),c=s.n(l),d=s(50391),u=s.n(d),m=s(32952),p=s.n(m),h=(s(13893),s(60521)),v=s(47731);i=h.observable.ref,r=class DealCurrentServiceBo{constructor(){c()(this,"userSelectedDeal",n,this),c()(this,"userDealType",o,this),u()(this,"updateDeals",jest.fn()),u()(this,"filterRawData",jest.fn((e=>e))),u()(this,"parseRawData",jest.fn((e=>e))),u()(this,"dealModel",{parse:jest.fn((e=>e))})}},n=p()(r.prototype,"userSelectedDeal",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=p()(r.prototype,"userDealType",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.J.BINARY}})},59797:(e,a,s)=>{"use strict";s.d(a,{Z:()=>c});var i=s(50391),r=s.n(i),n=s(46188),o=s(80969),l=s(40285);class ForexLimitModel extends o.Z{constructor(){super(...arguments),r()(this,"attributes",{type:{type:"string",value:l.$i.AMOUNT},value:{type:"number",value:0},trailing:{type:"boolean",value:!1}})}parse(e){return this.generate(e)}generate(e){const a={};return(0,n.Z)(this.attributes,((s,i)=>{e&&void 0!==e[i]?a[i]="value"===i?Number(e[i]):e[i]:a[i]=s.value})),a}}const c=new ForexLimitModel},48833:(e,a,s)=>{"use strict";s.d(a,{Z:()=>Cache});var i=s(14936),r=s.n(i),n=s(50391),o=s.n(n),l=s(71389);const c=["v"],d=e=>"string"==typeof e?JSON.parse(e):e;class Cache{constructor(e,a){o()(this,"cache",{}),this.version=e.version,this.useLocalStorage=e.useLocalStorage,this.tradeManagerService=a}getCache(e,a){if(!Object.prototype.hasOwnProperty.call(this.cache,e)){const a=this.useLocalStorage?(0,l.r)(e,d):this.tradeManagerService.appService.getOption(e);this.cache[e]=this.parseData(a),this.invalidateCache(e,this.tradeManagerService.tradeFrames)}const s=this.cache[e][a];return void 0===s?null:s}parseData(e){const a=e&&"object"==typeof e?e.v:void 0;if(!e||"object"!=typeof e||a!==this.version)return this.migrate(a,e);const s={v:this.version};return this.tradeManagerService.tradeFrames.forEach((a=>{a.id in e&&(s[a.id]=e[a.id])})),s}migrate(e,a){const s={v:this.version};return e||(s[this.tradeManagerService.tradeFrames[0].id]=a),s}setCache(e,a,s){this.cache[e]||(this.cache[e]={}),this.cache[e].v||(this.cache[e].v=this.version),a&&void 0!==s&&(this.cache[e][a]=s),this.useLocalStorage?(0,l.L)(e,this.cache[e],d):this.tradeManagerService.appService.setOption(e,this.cache[e])}removeCache(e,a){a?(delete this.cache[a][e],this.setCache(a,e)):Object.keys(this.cache).forEach((a=>{delete this.cache[a][e],this.setCache(a,e)}))}invalidateCache(e,a){let s=!1;const i=this.cache[e],n=(i.v,r()(i,c));Object.keys(n).forEach((i=>{a.map((e=>e.id)).includes(i)||(delete this.cache[e][i],s=!0)})),s&&this.setCache(e)}}},2949:(e,a,s)=>{"use strict";s.d(a,{D:()=>TradeFrameModel});var i=s(14936),r=s.n(i),n=s(72155);const o=["id"],l=(0,n.kP)("0123456789abcdefg",5);class TradeFrameModel{static generate(e){return{id:l(),settings:e,ready:!1,serviceInterface:null}}static parse(e){return{id:e.id,settings:r()(e,o),ready:!1,serviceInterface:null}}static parseAll(e){return e.map((e=>TradeFrameModel.parse(e)))}}new TradeFrameModel},71662:(e,a,s)=>{"use strict";s.d(a,{O:()=>BaseScenario});class BaseScenario{init(e){return this.tradeManagerService=e,this}getStore(e,a){const s=this.getFrameService(e);if(s&&s.binder)return s.binder.getService(a)}getFrameService(e){const a=this.tradeManagerService.findTradeFrameById(e);return a&&a.serviceInterface||null}getFrameSettings(e){const a=this.tradeManagerService.findTradeFrameById(e);return a&&a.settings||null}}},72185:(e,a,s)=>{"use strict";s.d(a,{S:()=>M,t:()=>L});var i,r,n,o,l,c,d,u,m,p=s(49491),h=s.n(p),v=s(85676),g=s.n(v),_=s(50391),f=s.n(_),E=(s(13893),s(32952)),S=s.n(E),y=s(60521),b=s(28660),C=s(98064),T=s(7581),A=s(90237),k=s(48833),w=s(4780),N=s(2949),R=s(66531),I=s(26763),D=s(66713),O=s(27967);const L=2;let M=(i=(0,b.bindAs)(I.TRADE_MANAGER_SERVICE),r=(0,b.onStart)(I.APP_SERVICE),n=(0,b.onBind)(I.RATE_SERVICE,I.UI_SERVICE,I.ACCOUNT_SERVICE),i((l=class TradeManagerService{get tradeFramesLength(){return this.tradeFrames.length}constructor(){f()(this,"tradeFrameServicesDisposers",{}),f()(this,"framesLoadedCount",0),f()(this,"subscribes",{}),g()(this,"framesLoaded",c,this),g()(this,"tradeFrames",d,this),g()(this,"lastStartedFrame",u,this),g()(this,"lastStoppedFrame",m,this),f()(this,"api",{selectPair:this.selectPair}),this.selectPair=this.selectPair.bind(this),this.cloneTradeFrame=this.cloneTradeFrame.bind(this),this.removeTradeFrame=this.removeTradeFrame.bind(this)}onStart(e){return this.appService=e,this.isBinary=this.appService.defaultProject===D.yy,!0}onBind(e,a,s){this.uiService=a,this.rateService=e,this.accountService=s,this.initCaches(),this.initFrames(),this.initReactions()}initCaches(){this.localStorageCache=new k.Z({useLocalStorage:!0,version:"1.0"},this)}getDefaultFrameSettings(e){var a;const s=this.accountService.isCommonAccount(this.accountService.selectedAccount)?"line":"candle",i=this.appService.rateCollection.find((e=>e.type===s)),r=this.appService.dealsBo.amounts[this.accountService.selectedAccount.currencyNameForLimits],n=(this.appService.dealsFx&&this.appService.dealsFx.amounts||{})[this.accountService.selectedAccount.currencyNameForLimits],o={[D.yy]:this.appService.pairDefaultBo,[D.c0]:this.appService.pairDefaultFx,[D.ik]:this.appService.pairDefaultSpt},l={[D.yy]:(null==r?void 0:r.default)||this.appService.dealSum,[D.c0]:(null==n?void 0:n.default)||this.appService.dealSumFx,[D.ik]:this.appService.dealSumSpt},c=null!==(a=e.project)&&void 0!==a?a:this.appService.getDefaultProject();return{project:c,pairId:e.pairId||o[c]||o[D.c0],rateIdPrevType:0,rateId:i?i.id:this.appService.rateCollection[0].id,dealSum:l[c],dealDuration:this.appService.dealDurationList[0]}}initFrames(){const e=w.N.getAllParams(),a=e.asset,s=e.project,i=e.tradeDuration,r=this.getDefaultFrameSettings({pairId:a,project:s}),n=(0,A.Rx)(),o=Array.isArray(n)?n.filter((e=>this.appService.availableProjects[e.project])):[],l=o.length&&o||this.appService.tradeFrames||[],c=h()({},r);let d;if(Array.isArray(l)&&0!==l.length){a&&((0,C.Z)(l).pairId=a),s&&((0,C.Z)(l).project=s),i&&((0,C.Z)(l).dealDuration=Number(i),(0,C.Z)(l).dealPickerType="duration");const e=l.map((e=>Object.assign({},r,e)));e&&e.length&&(d=(0,C.Z)(e).project),N.D.parseAll(e).forEach((e=>{this.appService.availableProjects[e.settings.project]?this.addTradeFrame(e):this.addTradeFrame(N.D.generate(c))}))}else this.addTradeFrame(N.D.generate(c)),d=c.project;d&&(0,R.n)(d)}onFrameStart(e,a){this.setServiceInterface(e,a),this.tradeFrameServicesDisposers[e]=(0,y.reaction)((()=>({id:a.tradeFrameId,settings:a.settings})),(e=>{let a=e.id,s=e.settings;const i=this.findTradeFrameById(a);if(i)for(const e in s)i.settings[e]=s[e];this.saveFramesToLocalStorage()}),{fireImmediately:!0}),this.lastStartedFrame=e,e===this.lastStoppedFrame&&(this.lastStoppedFrame=null),this.framesLoadedCount+=1,this.framesLoadedCount===this.tradeFrames.length&&(this.framesLoaded=!0,this.framesReady())}onFramesReady(e){this.subscribes.ready||(this.subscribes.ready=[]),this.subscribes.ready.push(e)}framesReady(){const e=this.tradeFrames.map((e=>e.serviceInterface.binder));Array.isArray(this.subscribes.ready)&&this.subscribes.ready.forEach((a=>null==a?void 0:a(e)))}onBeforeFrameStop(e){this.lastStoppedFrame=e}onFrameStop(e){const a=this.tradeFrameServicesDisposers[e];"function"==typeof a&&(this.tradeFrameServicesDisposers[e]=a());const s=this.findTradeFrameById(e);s&&delete s.serviceInterface}initReactions(){this.disposers=[(0,y.reaction)((()=>this.tradeFramesLength),(()=>{this.saveFramesToLocalStorage(),this.uiService.triggerLayoutResize()}))]}setServiceInterface(e,a){const s=this.findTradeFrameById(e);s&&(s.serviceInterface=a,s.ready=!0)}saveFramesToLocalStorage(){const e=this.tradeFrames.map((e=>h()({id:e.id},e.settings)));(0,A.uN)(e)}cloneTradeFrame(e){const a=this.findTradeFrameById(e);if(a){const e=N.D.generate(h()({},a.settings));this.addTradeFrame(e)}}addTradeFrame(e){(this.uiService.isMultiChart&&this.tradeFrames.length<L||!this.tradeFrames.length)&&(this.tradeFrames.push(e),this.tradeFrames.length>1&&this.sendStatistic("multi_chart_add"))}addTradeFrames(e){e.forEach((e=>this.addTradeFrame(e)))}removeTradeFrame(e){1!==this.tradeFrames.length&&(this.onBeforeFrameStop(e),this.tradeFrames=this.tradeFrames.filter((a=>a.id!==e)),this.localStorageCache.removeCache(e),this.sendStatistic("multi_chart_close"))}findTradeFrameById(e){return this.tradeFrames.find((a=>a.id===e))}findTradeFrameByIdExept(e){return this.tradeFrames.find((a=>a.id!==e))}findTradeFrameByProject(e){return this.tradeFrames.find((a=>a.settings.project===e))}getDefaultFrame(){return(0,C.Z)(this.tradeFrames)}get framesPairModels(){return(0,T.Z)(this.tradeFrames.map((e=>{var a;return null===(a=e.serviceInterface)||void 0===a?void 0:a.selectedPair})))}get framesPairs(){return(0,T.Z)(this.tradeFrames.map((e=>e.settings.pairId||"")))}getFrameSelectedPair(e){const a=this.findTradeFrameById(e);return a?a.settings.pairId:O.d}getActivesFrames(e,a){return this.tradeFrames.filter((s=>{const i=s.settings;return!!i&&i.pairId===e&&i.project===a}))}isPairActive(e,a){return this.getActivesFrames(e,a).length>0}getSuitableFrame(e,a){const s=this.getActivesFrames(e,a);return s.length?(0,C.Z)(s):this.getDefaultFrame()}selectPair(e,a){const s=this.getDefaultFrame(),i=this.getActivesFrames(e,a);return i.length?Promise.resolve((0,C.Z)(i).serviceInterface):null!=s&&s.serviceInterface?this.selectPairInFrame(s,e,a):Promise.resolve()}selectPairWithTradeFrameId(e,a,s){let i=this.findTradeFrameById(s);if(!i){const s=this.getActivesFrames(e,a);i=(0,C.Z)(s)}return i?this.selectPairInFrame(i,e,a):Promise.resolve()}selectPairInFrame(e,a,s){if(!e.serviceInterface)return Promise.resolve(e.serviceInterface);if(e.serviceInterface.project===s)return e.serviceInterface.selectPair(a,s),Promise.resolve(e.serviceInterface);let i;e.ready=!1,e.serviceInterface.selectPair(a,s),this.lastStartedFrame=null;const r=new Promise((e=>{i=e}));return(0,y.when)((()=>!(!e.serviceInterface||!e.serviceInterface.tradeFrameId)&&this.lastStartedFrame===e.serviceInterface.tradeFrameId),(()=>{i(e.serviceInterface)})),r}applyScenario(e){return e.init(this)}sendStatistic(e){try{window.dataLayer&&window.dataLayer.push({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:e,eventLabel:e})}catch(e){}}},S()(l.prototype,"tradeFramesLength",[y.computed],Object.getOwnPropertyDescriptor(l.prototype,"tradeFramesLength"),l.prototype),c=S()(l.prototype,"framesLoaded",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=S()(l.prototype,"tradeFrames",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=S()(l.prototype,"lastStartedFrame",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S()(l.prototype,"lastStoppedFrame",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S()(l.prototype,"onStart",[r],Object.getOwnPropertyDescriptor(l.prototype,"onStart"),l.prototype),S()(l.prototype,"onBind",[n],Object.getOwnPropertyDescriptor(l.prototype,"onBind"),l.prototype),S()(l.prototype,"framesPairModels",[y.computed],Object.getOwnPropertyDescriptor(l.prototype,"framesPairModels"),l.prototype),S()(l.prototype,"framesPairs",[y.computed],Object.getOwnPropertyDescriptor(l.prototype,"framesPairs"),l.prototype),S()(l.prototype,"selectPair",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"selectPair"),l.prototype),S()(l.prototype,"selectPairWithTradeFrameId",[y.action],Object.getOwnPropertyDescriptor(l.prototype,"selectPairWithTradeFrameId"),l.prototype),o=l))||o)},17330:(e,a,s)=>{"use strict";s.d(a,{$7:()=>r.$7,FM:()=>r.FM,M7:()=>r.M7,rF:()=>i.r});s(61455),s(73675);var i=s(92028),r=(s(10583),s(61312));s(53525)},61312:(e,a,s)=>{"use strict";s.d(a,{$7:()=>p,FM:()=>h,M7:()=>m});var i=s(13243),r=s(94503),n=s(61455),o=s(73675),l=s(5504),c=s(57269),d=s(54610),u=s(43871);const m=(0,i.v)({name:"AssetsFtt",dependsOn:[r.Ul],services:(e,a)=>{let s=a.fttAssetsRepository;return{fttAssetsService:new n.b(s)}}},{repositories:()=>({fttAssetsRepository:new l.k}),publicApi:e=>e}).onStart((e=>{e.fttAssetsService.load()})).enable((e=>e.tradingMechanicsService.enabled("ftt"))),p=(0,i.v)({name:"FttSentiments",dependsOn:[r.Ul],services:(e,a)=>{let s=a.fttSentimentsRepository;return{fttSentimentsService:new o.u(s)}}},{repositories:()=>({fttSentimentsRepository:new c.T}),publicApi:e=>e}).onStart((e=>{e.fttSentimentsService.load()})).enable((e=>e.tradingMechanicsService.enabled("ftt"))),h=(0,i.v)({name:"AssetsFavoriteFtt",dependsOn:[r.Ul],services:(e,a)=>{let s=a.fttAssetFavoriteRepository;return{fttAssetFavoriteService:new d.V(s)}}},{repositories:()=>({fttAssetFavoriteRepository:new u.Y}),publicApi:e=>e}).onStart((e=>{e.fttAssetFavoriteService.init()})).enable((e=>e.tradingMechanicsService.enabled("ftt")))},43871:(e,a,s)=>{"use strict";s.d(a,{Y:()=>FttAssetFavoriteRepository});class FttAssetFavoriteRepository{find(){return Promise.resolve(null)}save(e){return Promise.resolve()}subscribeOnAssetsUpdate(e){}}},5504:(e,a,s)=>{"use strict";s.d(a,{k:()=>FttAssetsRepository});var i=s(46242);class FttAssetsRepository{findAll(){return Promise.resolve([(0,i.E)("EURUSD")])}subscribeOnAssetsUpdate(e){}}},46242:(e,a,s)=>{"use strict";function i(e){const a=(new Date).getTime()/1e3,s=a+3600,i=a-3600;return{id:e,title:e,aliases:[],group:"currency",groupView:["currency"],icon:"",precision:2,timeClose:s,timeOpen:i,locked:!1,lockedReason:"",timeCloseTrading:s,timeOpenTrading:i,lockedTrading:!1,lockedTradingReason:"",winperc:80,minDuration:60,maxDuration:180,allowedFastDealsDurations:[]}}s.d(a,{E:()=>i})},57269:(e,a,s)=>{"use strict";s.d(a,{T:()=>FttSentimentsRepository});var i=s(15347);class FttSentimentsRepository{findAll(){return Promise.resolve([(0,i.T)("MMM")])}subscribeOnSentimentsUpdate(e){}}},15347:(e,a,s)=>{"use strict";function i(e){return{id:e,sentiment:0}}s.d(a,{T:()=>i})},54610:(e,a,s)=>{"use strict";s.d(a,{V:()=>FttAssetFavoriteService});var i=s(7223);class FttAssetFavoriteService extends i.t{constructor(e){super({favorites:new Map}),this.repository=e,this.updateFavorites=this.updateFavorites.bind(this)}init(){this.repository.subscribeOnAssetsUpdate(this.updateFavorites)}saveFavorite(e,a){const s=this.getState().favorites,i=[...s.entries()];a?s.set(e,s.size):s.delete(e),this.update({favorites:s}),this.repository.save(this.getState().favorites).catch((()=>{this.update({favorites:new Map(i)})}))}updateFavorites(e){this.update({favorites:e})}}},61455:(e,a,s)=>{"use strict";s.d(a,{b:()=>FttAssetsService});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(7223),c=s(46242),d=s(51559);class FttAssetsService extends l.t{constructor(e){var a;super({assets:{}}),a=this,this.repository=e,this.load=this.createTask(o()((function*(){const e=yield a.repository.findAll();a.update({assets:Array.from(e).reduce(((e,a)=>(e[a.id]=a,e)),{})}),a.repository.subscribeOnAssetsUpdate(a.handleAssetsUpdate)})),{strategy:l.T.once}),this.handleAssetsUpdate=e=>{this.update((a=>{const s=r()({},a.assets);return e.forEach((e=>{const a=s[e.id];a&&(s[e.id]=r()(r()({},a),e))})),r()(r()({},a),{},{assets:s})}))}}getAsset(e){var a;return null!==(a=this.getState().assets[e])&&void 0!==a?a:(0,c.E)(e)}getDefaultAsset(){return(0,d.n)("EURUSD",this.getState().assets)}}},73675:(e,a,s)=>{"use strict";s.d(a,{u:()=>FttSentimentsService});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(7223),c=s(15347);class FttSentimentsService extends l.t{constructor(e){var a;super({sentiments:{}}),a=this,this.repository=e,this.load=this.createTask(o()((function*(){const e=yield a.repository.findAll();return a.update({sentiments:Array.from(e).reduce(((e,a)=>(e[a.id]=a,e)),{})}),a.repository.subscribeOnSentimentsUpdate(a.handleSentimentsUpdate),a.getState().sentiments})),{strategy:l.T.once}),this.listeners={},this.handleSentimentsUpdate=e=>{this.update((a=>{const s=r()({},a.sentiments);return e.forEach((e=>{const i=s[e.id];if(i){var n;s[e.id]=r()(r()({},i),e);const o=this.listeners[e.id]||[];a.sentiments[e.id]&&(null===(n=a.sentiments[e.id])||void 0===n?void 0:n.sentiment)!==e.sentiment&&o.forEach((a=>{a(e.id,e.sentiment)}))}})),r()(r()({},a),{},{sentiments:s})}))}}addListener(e,a){this.listeners[e]?Array.isArray(this.listeners[e])&&(this.listeners[e]=[...this.listeners[e],a]):this.listeners[e]=[a]}removeListener(e,a){const s=this.listeners[e]||[];if(s.length){const i=s.indexOf(a);i>-1&&(this.listeners[e]=[...s.slice(0,i),...s.slice(i+1)])}}getSentiment(e){var a;return null!==(a=this.getState().sentiments[e])&&void 0!==a?a:(0,c.T)(e)}}},92028:(e,a,s)=>{"use strict";s.d(a,{r:()=>l});var i=s(63967),r=s(15954),n=s(61455),o=s(46242);const l=e=>{const a=(0,i.G)(n.b);return(0,r.K)(a.store,((e,a)=>{var s;return null!==(s=e.assets[a])&&void 0!==s?s:(0,o.E)(a)}),[e])}},10583:(e,a,s)=>{"use strict";s(73675)},51559:(e,a,s)=>{"use strict";function i(e,a){let s,i,r,n;const o=(e||"bitcoin").toLowerCase();return Object.keys(a).forEach((e=>{const l=a[e],c=l.id.toLowerCase();c!==o||l.locked||(s=l.id),"bitcoin"!==c||l.locked||(r=l.id),l.locked||(n=l.id),c===o&&(i=l.id)})),s||(r||(n||(i||e)))}s.d(a,{n:()=>i})},53525:(e,a,s)=>{"use strict";var i=s(13243),r=s(94503),n=s(61455),o=s(5504);(0,i.v)({name:"AssetsFtt",dependsOn:[r.b$],services:(e,a)=>{let s=a.fttAssetsRepository;return{fttAssetsService:new n.b(s)}}},{repositories:()=>({fttAssetsRepository:new o.k}),publicApi:e=>e}).onStart((e=>{e.fttAssetsService.load()})).enable((e=>e.tradingMechanicsService.enabled("ftt")))},18404:(e,a,s)=>{"use strict";s.d(a,{qS:()=>f,tA:()=>E,Cv:()=>y,lh:()=>S,D9:()=>h,L1:()=>v});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(7223),c=s(98383);class FxAssetsService extends l.t{constructor(e){var a;super({assets:{}}),a=this,this.repository=e,this.load=this.createTask(o()((function*(){const e=yield a.repository.findAll();a.update({assets:Array.from(e).reduce(((e,a)=>(e[a.id]=a,e)),{})}),a.repository.subscribeOnAssetsUpdate(a.handleAssetsUpdate)})),{strategy:l.T.once}),this.handleAssetsUpdate=e=>{this.update((a=>{const s=r()({},a.assets);return e.forEach((e=>{const a=s[e.id];a&&(s[e.id]=r()(r()({},a),e))})),r()(r()({},a),{},{assets:s})}))}}getAsset(e){var a;return null!==(a=this.getState().assets[e])&&void 0!==a?a:(0,c.E)(e)}getDefaultAsset(){return function(e,a){let s,i,r,n;const o=(e||"bitcoin").toLowerCase();return Object.keys(a).forEach((e=>{const l=a[e],c=l.id.toLowerCase();c!==o||l.locked||(s=l.id),"bitcoin"!==c||l.locked||(r=l.id),l.locked||(n=l.id),c===o&&(i=l.id)})),s||r||n||i||e}("EURUSD",this.getState().assets)}}var d=s(9687);class FxCommissionsService extends l.t{constructor(e){var a;super({commissions:{}}),a=this,this.repository=e,this.load=this.createTask(o()((function*(){const e=yield a.repository.findAll();return a.update({commissions:Array.from(e).reduce(((e,a)=>(e[a.id]=a,e)),{})}),a.repository.subscribeOnCommissionsUpdate(a.handleCommissionsUpdate),a.getState().commissions})),{strategy:l.T.once}),this.handleCommissionsUpdate=e=>{this.update((a=>{const s=r()({},a.commissions);return e.forEach((e=>{const a=s[e.id];a&&(s[e.id]=r()(r()({},a),e))})),r()(r()({},a),{},{commissions:s})}))}}getCommission(e){var a;return null!==(a=this.getState().commissions[e])&&void 0!==a?a:(0,d.q)(e)}}function u(e){return{id:e,sentiment:0}}class FxSentimentsService_FxSentimentsService extends l.t{constructor(e){var a;super({sentiments:{}}),a=this,this.repository=e,this.load=this.createTask(o()((function*(){const e=yield a.repository.findAll();return a.update({sentiments:Array.from(e).reduce(((e,a)=>(e[a.id]=a,e)),{})}),a.repository.subscribeOnSentimentsUpdate(a.handleSentimentsUpdate),a.getState().sentiments})),{strategy:l.T.once}),this.listeners={},this.handleSentimentsUpdate=e=>{this.update((a=>{const s=r()({},a.sentiments);return e.forEach((e=>{const i=s[e.id];if(i){var n;s[e.id]=r()(r()({},i),e);const o=this.listeners[e.id]||[];a.sentiments[e.id]&&(null===(n=a.sentiments[e.id])||void 0===n?void 0:n.sentiment)!==e.sentiment&&o.forEach((a=>{a(e.id,e.sentiment)}))}})),r()(r()({},a),{},{sentiments:s})}))}}addListener(e,a){this.listeners[e]?Array.isArray(this.listeners[e])&&(this.listeners[e]=[...this.listeners[e],a]):this.listeners[e]=[a]}removeListener(e,a){const s=this.listeners[e]||[];if(s.length){const i=s.indexOf(a);i>-1&&(this.listeners[e]=[...s.slice(0,i),...s.slice(i+1)])}}getSentiment(e){var a;return null!==(a=this.getState().sentiments[e])&&void 0!==a?a:u(e)}}var m=s(63967),p=s(15954);const h=e=>{const a=(0,m.G)(FxAssetsService);return(0,p.K)(a.store,((e,a)=>{var s;return null!==(s=e.assets[a])&&void 0!==s?s:(0,c.E)(a)}),[e])},v=e=>{const a=(0,m.G)(FxCommissionsService);return(0,p.K)(a.store,((e,a)=>{var s;return null!==(s=e.commissions[a])&&void 0!==s?s:(0,d.q)(a)}),[e])};var g=s(13243),_=s(94503);class FxAssetFavoriteService extends l.t{constructor(e){super({favorites:new Map}),this.repository=e,this.updateFavorites=this.updateFavorites.bind(this)}init(){this.repository.subscribeOnAssetsUpdate(this.updateFavorites)}saveFavorite(e,a){const s=this.getState().favorites,i=[...s.entries()];a?s.set(e,s.size):s.delete(e),this.update({favorites:s}),this.repository.save(this.getState().favorites).catch((()=>{this.update({favorites:new Map(i)})}))}updateFavorites(e){this.update({favorites:e})}}class FxAssetsRepository{findAll(){return Promise.resolve([(0,c.E)("MMM")])}subscribeOnAssetsUpdate(e){}}class FxCommissionsRepository{findAll(){return Promise.resolve([(0,d.q)("MMM")])}subscribeOnCommissionsUpdate(e){}}class FxSentimentsRepository{findAll(){return Promise.resolve([u("MMM")])}subscribeOnSentimentsUpdate(e){}}class FxAssetFavoriteRepository{find(){return Promise.resolve(null)}save(e){return Promise.resolve()}subscribeOnAssetsUpdate(e){}}const f=(0,g.v)({name:"AssetsFx",dependsOn:[_.Ul],services:(e,a)=>{let s=a.fxAssetsRepository;return{fxAssetsService:new FxAssetsService(s)}}},{repositories:()=>({fxAssetsRepository:new FxAssetsRepository}),publicApi:e=>e}).onStart((e=>{e.fxAssetsService.load()})).enable((e=>e.tradingMechanicsService.enabled("fx"))),E=(0,g.v)({name:"FxCommissions",dependsOn:[_.Ul],services:(e,a)=>{let s=a.fxCommissionsRepository;return{fxCommissionsService:new FxCommissionsService(s)}}},{repositories:()=>({fxCommissionsRepository:new FxCommissionsRepository}),publicApi:e=>e}).onStart((e=>{e.fxCommissionsService.load()})).enable((e=>e.tradingMechanicsService.enabled("fx"))),S=(0,g.v)({name:"FxSentiments",dependsOn:[_.Ul],services:(e,a)=>{let s=a.fxSentimentsRepository;return{fxSentimentsService:new FxSentimentsService_FxSentimentsService(s)}}},{repositories:()=>({fxSentimentsRepository:new FxSentimentsRepository}),publicApi:e=>e}).onStart((e=>{e.fxSentimentsService.load()})).enable((e=>e.tradingMechanicsService.enabled("fx"))),y=(0,g.v)({name:"AssetsFavoriteFx",dependsOn:[_.Ul],services:(e,a)=>{let s=a.fxAssetFavoriteRepository;return{fxAssetFavoriteService:new FxAssetFavoriteService(s)}}},{repositories:()=>({fxAssetFavoriteRepository:new FxAssetFavoriteRepository}),publicApi:e=>e}).onStart((e=>{e.fxAssetFavoriteService.init()})).enable((e=>e.tradingMechanicsService.enabled("fx")));(0,g.v)({name:"AssetsFx",dependsOn:[_.b$],services:(e,a)=>{let s=a.fxAssetsRepository;return{fxAssetsService:new FxAssetsService(s)}}},{repositories:()=>({fxAssetsRepository:new FxAssetsRepository}),publicApi:e=>e}).onStart((e=>{e.fxAssetsService.load()})).enable((e=>e.tradingMechanicsService.enabled("fx")))},98383:(e,a,s)=>{"use strict";function i(e){const a=(new Date).getTime()/1e3,s=a+3600,i=a-3600;return{id:e,title:e,aliases:[],group:"currency",groupView:["currency"],icon:"",precision:2,timeClose:s,timeOpen:i,locked:!1,lockedReason:"schedule",timeCloseTrading:s,timeOpenTrading:i,lockedTrading:!1,lockedTradingReason:"schedule",lockedBuy:!1,lockedSell:!1,allowedMultiplicators:[1,10,20],swapCommissionBuy:302e-6,swapCommissionSell:302e-6,stopOutRate:.5,marginCallToRate:.5,stopLossRate:.05,takeProfitRate:.05,minCommission:4e-5,openCommissionMax:.15}}s.d(a,{E:()=>i})},9687:(e,a,s)=>{"use strict";function i(e){return{id:e,commission:0}}s.d(a,{q:()=>i})},19511:(e,a,s)=>{"use strict";s.d(a,{H:()=>n,b:()=>o});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{defaultMessage:"There are no active events right now. Watch for stories about events, and check back here from time to time so you don't miss anything.",id:"ev_no_events"}),o=()=>i.createElement(r._,{defaultMessage:"You haven't participated in any events yet. Keep an eye on stories and the Events section so you don't miss anything.",id:"empty_state_tournaments"})},59757:(e,a,s)=>{"use strict";s.d(a,{AA:()=>u.AA,FL:()=>d.FL,V1:()=>m.V,XS:()=>n.X,Xw:()=>c.X,Yz:()=>i.Y,ZJ:()=>u.ZJ,dk:()=>u.dk,eO:()=>o.eO,f5:()=>u.f5,jW:()=>m.j,k7:()=>o.k7,nC:()=>p.n,p7:()=>o.p7,pT:()=>l.p,r7:()=>r.r,tW:()=>d.tW,uw:()=>o.uw});s(5914);var i=s(7350),r=s(2286),n=s(56190),o=s(82079),l=(s(57415),s(27065)),c=s(2328),d=s(35146),u=s(74680),m=s(37792),p=(s(85514),s(46597));s(51561)},46597:(e,a,s)=>{"use strict";s.d(a,{n:()=>EventsService});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(7223);class EventsService extends l.t{constructor(e){var a;super({isReady:!1,history:{selected:null,categories:[]}},{allChildrenResolved:()=>{this.update({isReady:!0})}}),a=this,this.repository=e,this.load=this.createTask(o()((function*(){const e=yield a.repository.find();e&&a.update(e)})),{strategy:l.T.once})}addCategory(e){this.update((a=>{var s;return{history:a.history.categories.find((a=>a.id===e.id))?a.history:{categories:[...a.history.categories,e],selected:null!==(s=a.history.selected)&&void 0!==s?s:e}}}))}selectCategory(e){this.update((a=>{var s;return r()(r()({},a),{},{history:r()(r()({},a.history),{},{selected:null!==(s=a.history.categories.find((a=>a.id===e)))&&void 0!==s?s:a.history.selected})})}))}}},51561:(e,a,s)=>{"use strict";s(74199)},85514:(e,a,s)=>{"use strict";s(47014)},7350:(e,a,s)=>{"use strict";s.d(a,{Y:()=>n});var i=s(27378),r=s(17302);const n=i.memo((e=>{let a=e.icon,s=e.description;return i.createElement(r.xu,null,i.createElement(r.xu,{padding:[0,0,48,0]},i.createElement(r.xu,{horizontalAlign:"center"},i.createElement(r.xu,{padding:[0,0,16,0]},a),i.createElement(r.xv,{variant:"M / Regular",align:"center",color:"contrast-beta"},s))))}))},37792:(e,a,s)=>{"use strict";s.d(a,{V:()=>l,j:()=>c});var i=s(49491),r=s.n(i),n=(s(2286),s(56190),s(82079),s(57415),s(27065),s(2328),s(35146));s(74680);const o=r()({},{ACTUAL:"actual",HISTORY:"history"}),l={[o.ACTUAL]:n.FL.EVENTS,[o.HISTORY]:n.FL.EVENTS_HISTORY},c=e=>!!e&&e.toUpperCase()in o},2286:(e,a,s)=>{"use strict";s.d(a,{r:()=>f});var i=s(27378),r=s(13225),n=s(2050),o=s(46124),l=s(17302),c=s(77740),d=s(60042),u=s.n(d),m=s(19511),p=s(57415),h=s(7350),v=s(82079),g=s(28610);const _={order:999,content:i.createElement(h.Y,{icon:i.createElement("div",{className:g.Z.noEventIcon},i.createElement(c.SP0,{fontSize:"inherit"})),description:i.createElement(m.H,null)})},f=i.memo((e=>{let a=e.className;const s=(0,r.z)(v.k7),c=(0,n.x)(v.eO),d=(0,o.k)(v.p7,[]),m=(0,o.k)(v.uw,[_]),h=i.useMemo((()=>m.sort(((e,a)=>e.order-a.order))[0]),[m]);return i.useEffect((()=>(s({mounted:!0}),()=>{s({mounted:!1})})),[s]),i.createElement("div",{className:u()(g.Z.host,a)},i.createElement(p.kM,{memoryId:"actual",className:g.Z.scroll},i.createElement("div",{className:g.Z.topCards},c),i.createElement("div",{className:g.Z.cards},d.sort(((e,a)=>a.order-e.order)).map((e=>i.createElement("div",{className:g.Z.card,key:e.order},i.createElement(l.xu,null,e.content))))),0===d.length&&h&&i.createElement("div",{className:g.Z.noEvents},h.content)))}))},28610:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2G4ScfRtO1-k",scroll:"_3Q-6L2j1fwp7",topCards:"L70DmyAv2ZvD",cards:"_3xD5oEustmkG",card:"YfiX-x4YdmrG",noEventIcon:"NlmrMbTKDEG6",noEvents:"_7p5qy2u7uZLx"}},56190:(e,a,s)=>{"use strict";s.d(a,{X:()=>m});var i=s(49491),r=s.n(i),n=s(27378),o=s(63967),l=s(14282),c=s(77740),d=s(74199),u=s(57415);const m=n.memo((e=>{let a=e.className,s=e.small,i=e.onHistoryClick;const m=(0,o.G)(l.yD),p=n.useCallback((()=>{m.track({scope:"events_tab",category:"events_tab",action:"open",label:"completed"}),i()}),[m,i]);return n.createElement(d.V9,{className:a},n.createElement(d.V9.Center,null,(e=>s?n.createElement(d.pY,r()({align:"center",size:"small",isClipped:!0},e),n.createElement(u.XS,null)):n.createElement(d.pY,r()({align:"left",size:"medium",isClipped:!0},e),n.createElement(u.XS,null)))),n.createElement("div",null,n.createElement(d.Qe,{"data-test":"events-panel-history",onClick:p},n.createElement(c.bpu,null))))}))},82079:(e,a,s)=>{"use strict";s.d(a,{eO:()=>n,k7:()=>c,p7:()=>l,uw:()=>o});var i=s(76232),r=s(29229);const n=(0,s(84584).Z)({id:"eventsPanelActualTopCardsSlot"}),o=(0,i.t)({id:"eventsNoEventsPipe"}),l=(0,i.t)({id:"eventsPanelActualCardsPipe"}),c=(0,r.S)({id:"eventsPanelMountSideEffect"})},27065:(e,a,s)=>{"use strict";s.d(a,{p:()=>E});var i=s(27378),r=s(63967),n=s(97415),o=s(93541),l=s(60042),c=s.n(l),d=s(19511),u=s(17302),m=s(77740),p=s(14282),h=s(7350),v=s(46597),g=s(2328),_=s(18757);const f=e=>{let a=e.category,s=e.selected,r=e.onClick;const n=i.useCallback((()=>{r(a)}),[a,r]);return i.createElement(u.Af,{key:a.id,label:a.title,active:s,onClick:n})},E=i.memo((e=>{var a,s;let l=e.className;const E=(0,r.G)(p.yD),S=(0,r.G)(v.n),y=(0,n.o)(S.store).history,b=(0,o.T)(g.X,{route:null!==(a=null===(s=y.selected)||void 0===s?void 0:s.id)&&void 0!==a?a:""}),C=i.useCallback((e=>{E.track({scope:"events_tab",category:"events_tab",action:"choose",label:"completed/".concat(e.id)}),S.selectCategory(e.id)}),[E,S]);let T=null;return 0===y.categories.length?T=i.createElement(u.xu,{verticalAlign:"center",flexGrow:!0},i.createElement(h.Y,{description:i.createElement(d.b,null),icon:i.createElement("div",{className:_.Z.icon},i.createElement(m.bpu,{fontSize:"inherit"}))})):y.categories.length>1&&(T=i.createElement("div",{className:_.Z.categories},y.categories.map((e=>{var a;return i.createElement("div",{className:_.Z.category,key:e.id},i.createElement(f,{selected:e.id===(null===(a=y.selected)||void 0===a?void 0:a.id),category:e,onClick:C}))})))),i.createElement("div",{className:c()(_.Z.host,l)},T,b)}))},18757:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1yxwYRv6Uu6A",categories:"SUPgjCHfQL7o",category:"_3jbU2G0fUPRm",noEventIcon:"_26uXcjBHOPhP",noEvents:"MS4FDsRYLw-Y"}},2328:(e,a,s)=>{"use strict";s.d(a,{X:()=>i});const i=(0,s(42709).g)({id:"eventsPanelHistoryCategorySwitchSlot"})},74680:(e,a,s)=>{"use strict";s.d(a,{AA:()=>m,ZJ:()=>p,dk:()=>h,f5:()=>P});var i=s(49491),r=s.n(i),n=s(27378),o=s(74199),l=s(42709),c=s(21182),d=s(35146),u=s(57415);s(27065),s(2328);const m=(0,l.g)({id:"eventsPanelContentSwitchSlot"}),p=(0,l.g)({id:"eventsPanelHeaderSwitchSlot"}),h=(0,l.g)({id:"eventsPanelHeaderImageSwitchSlot"}),v=((0,l.g)({id:"eventsPanelHeaderActionsSwitchSlot"}),(0,c.W)(p(d.FL.EVENTS))),g=(0,c.W)(m(d.FL.EVENTS)),_=(0,c.W)(m(d.FL.EVENTS_HISTORY)),f=(0,c.W)(m(d.FL.BATTLE_ROOM_SEARCH_RESTRICTION)),E=(0,c.W)(p(d.FL.BATTLE_ROOM_RESULTS)),S=(0,c.W)(m(d.FL.BATTLE_ROOM_RESULTS)),y=(0,c.W)(p(d.FL.BATTLE_ROOM_SEARCH)),b=(0,c.W)(m(d.FL.BATTLE_ROOM_SEARCH)),C=(0,c.W)(p(d.FL.RATINGS_WELCOME)),T=(0,c.W)(m(d.FL.RATINGS_WELCOME)),A=(0,c.W)(p(d.FL.RATINGS_SUMMARY)),k=(0,c.W)(m(d.FL.RATINGS_SUMMARY)),w=(0,c.W)(p(d.FL.RATINGS_LOOTBOX)),N=(0,c.W)(h(d.FL.RATINGS_LOOTBOX)),R=(0,c.W)(m(d.FL.RATINGS_LOOTBOX)),I=(0,c.W)(p(d.FL.RATINGS_RESULTS)),D=(0,c.W)(m(d.FL.RATINGS_RESULTS)),O=(0,c.W)(p(d.FL.GAME_PROFILE_SUMMARY)),L=(0,c.W)(m(d.FL.GAME_PROFILE_SUMMARY)),M=(0,c.W)(m(d.FL.UNIVERSAL_EVENT)),P=()=>[{id:d.FL.EVENTS,title:null,component:e=>n.createElement(g,{props:e}),renderHeader:e=>n.createElement(v,{props:e})},{id:d.FL.EVENTS_HISTORY,title:null,renderHeader:e=>{let a=e.className;return n.createElement(o.V9,{className:a},n.createElement(o.V9.Center,null,(e=>n.createElement(o.pY,r()({align:"center",size:"small",isClipped:!0},e),n.createElement(u.b_,null)))))},component:e=>n.createElement(_,{props:e})},{id:d.FL.BATTLE_ROOM_SEARCH_RESTRICTION,title:null,component:e=>n.createElement(f,{props:e})},{id:d.FL.BATTLE_ROOM_RESULTS,title:null,renderHeader:e=>n.createElement(E,{props:e}),component:e=>n.createElement(S,{props:e})},{id:d.FL.BATTLE_ROOM_SEARCH,title:null,renderHeader:e=>n.createElement(y,{props:e}),component:e=>n.createElement(b,{props:e})},{id:d.FL.RATINGS_WELCOME,title:null,renderHeader:e=>n.createElement(C,{props:e}),component:e=>n.createElement(T,{props:e})},{id:d.FL.RATINGS_SUMMARY,title:null,renderHeader:e=>n.createElement(A,{props:e}),component:e=>n.createElement(k,{props:e})},{id:d.FL.RATINGS_LOOTBOX,title:null,renderHeader:e=>n.createElement(w,{props:e}),renderHeaderImage:e=>n.createElement(N,{props:e}),component:e=>n.createElement(R,{props:e})},{id:d.FL.RATINGS_RESULTS,title:null,renderHeader:e=>n.createElement(I,{props:e}),component:e=>n.createElement(D,{props:e})},{id:d.FL.GAME_PROFILE_SUMMARY,title:null,renderHeader:e=>n.createElement(O,{props:e}),component:e=>n.createElement(L,{props:e})},{id:d.FL.UNIVERSAL_EVENT,title:null,component:e=>n.createElement(M,{props:e})}]},35146:(e,a,s)=>{"use strict";s.d(a,{FL:()=>n,tW:()=>o});var i=s(49491),r=s.n(i);const n=r()(r()(r()(r()({EVENTS:"events",EVENTS_HISTORY:"events-history"},{BATTLE_ROOM_SEARCH_RESTRICTION:"battle-room/search_restriction",BATTLE_ROOM_SEARCH:"battle-room/search",BATTLE_ROOM_RESULTS:"battle-room/results"}),{RATINGS_WELCOME:"ratings/welcome",RATINGS_SUMMARY:"ratings/summary",RATINGS_LOOTBOX:"ratings/lootbox",RATINGS_RESULTS:"ratings/results"}),{GAME_PROFILE_SUMMARY:"game_profile/summary"}),{UNIVERSAL_EVENT:"universal_event/main"}),o={EVENTS:"events"}},90400:(e,a,s)=>{"use strict";s.d(a,{L0:()=>n.L,U2:()=>i.U,Un:()=>r.U});s(70163);var i=s(10432),r=s(88768),n=s(57163)},57163:(e,a,s)=>{"use strict";s.d(a,{L:()=>ProfilesService});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(7223);class ProfilesService extends l.t{constructor(e){var a;super({profiles:{},selectedId:null}),a=this,this.repository=e,this.loadOne=this.createTask(function(){var e=o()((function*(e){const s=yield a.repository.find(e);return s&&a.update((a=>({profiles:r()(r()({},a.profiles),{},{[e]:s})}))),s}));return function(a){return e.apply(this,arguments)}}(),{strategy:l.T.queue})}select(e){this.update({selectedId:e})}}},10432:(e,a,s)=>{"use strict";s.d(a,{U:()=>c});var i=s(49491),r=s.n(i),n=s(27378),o=s(74199);const l=n.lazy((()=>s.e(3322).then(s.bind(s,34651)).then((e=>({default:e.GameProfile}))))),c=e=>n.createElement(n.Suspense,{fallback:n.createElement(o.zo,null)},n.createElement(l,r()({},e)))},88768:(e,a,s)=>{"use strict";s.d(a,{U:()=>l});var i=s(27378),r=s(63967),n=s(15954),o=s(57163);const l=e=>{const a=(0,r.G)(o.L);return i.useEffect((()=>{null!==e&&a.loadOne(e)}),[e,a]),(0,n.K)(a.store,((e,a)=>{var s;return null===a?null:null!==(s=e.profiles[a])&&void 0!==s?s:null}),[e])}},81969:(e,a,s)=>{"use strict";s.d(a,{v:()=>i});const i=(0,s(84584).Z)({id:"notificationsSettingsSlot"})},11625:(e,a,s)=>{"use strict";s.d(a,{L5:()=>f,Oi:()=>o,Xb:()=>m,Y1:()=>l,_7:()=>p,aR:()=>E,eV:()=>h,gQ:()=>_,hy:()=>d,jv:()=>v,l0:()=>n,mJ:()=>S,o:()=>r,oc:()=>g,qr:()=>u,uX:()=>c});var i=s(18985);const r=(0,i.vU)({badge:{id:"profile_summary_new_block_title",defaultMessage:"NEW"},title:{id:"profile_summary_referral_title",defaultMessage:"Referral Program"}}),n=(0,i.vU)({title:{id:"error_loading_data",defaultMessage:"Error loading data"},description:{id:"something_wrong_title",defaultMessage:"Something went wrong"},closeButtonText:{id:"common_close",defaultMessage:"Close"},tryAgainButtonText:{id:"common_try_again",defaultMessage:"Try Again"}}),o=(0,i.vU)({title:{id:"referral_user_status_error_referral_unavailable_title",defaultMessage:"Referral Program Unavailable"},description:{id:"referral_user_status_error_unavailable_description",defaultMessage:"Unfortunately, the referral program isn’t available in your region"}}),l=(0,i.vU)({title:{id:"referral_user_status_neophyte_screen_title",defaultMessage:"Invite Friends & Get Rewards"},description:{id:"referral_user_status_neophyte_referral_description",defaultMessage:"Get your referral link in just 2 steps"}}),c=(0,i.vU)({title:{id:"referral_user_status_slave_screen_title",defaultMessage:"Get Reward & Invite Friends"},description:{id:"referral_user_status_slave_referral_description",defaultMessage:"Get your reward and referral link in two steps"}}),d=(0,i.vU)({title:{id:"referral_user_status_master_screen_title",defaultMessage:"Invite Friends & Get Rewards"},description:{id:"referral_user_status_master_referral_description",defaultMessage:"Send your referral link to your friends, and once they complete all the steps, both of you will receive a loot boxs"}}),u=(0,i.vU)({subtitle:{id:"referral_loot_box_subtitle",defaultMessage:"Referral reward"},title:{id:"referral_loot_box_title",defaultMessage:"MegaВох"},buttonText:{id:"referral_user_status_master_loot_box_button_title",defaultMessage:"What’s Inside?"}}),m=(0,i.vU)({listTitle:{id:"referral_lootbox_list_title",defaultMessage:"Possible Rewards"}}),p=(0,i.vU)({title:{id:"referral_trade_tooltip_title",defaultMessage:"You’re one step away!"},description:{id:"referral_trade_tooltip_desc",defaultMessage:"Make a Forex or fixed time trade to get your referral link"},link:{id:"common_close",defaultMessage:"Close"}}),h=(0,i.vU)({title:{id:"referral_user_status_master_banner_title",defaultMessage:"How does the referral program work?"}}),v=(0,i.vU)({title:{id:"referral_user_status_master_no_referrals_title",defaultMessage:"You have no referrals yet. Send your link to your friends to start."},description:{id:"referral_user_status_master_no_referrals_description",defaultMessage:"Send your link to your friends to start."}}),g=(0,i.vU)({text:{id:"referral_user_status_master_invite_friend_button_title",defaultMessage:"Invite Friends"}}),_=(0,i.vU)({title:{id:"referral_modal_share_link_title",defaultMessage:"Share Referral Link"},placeholder:{id:"referral_modal_share_link_placeholder",defaultMessage:"Link"},tooltip:{id:"referral_modal_share_link_tooltip",defaultMessage:"Copy link"},linkText:{id:"referral_modal_share_link_text",defaultMessage:"Join me on Olymp Trade! Use my link to sign up, and get a reward that'll give you a head start in trading."},linkHashtag:{id:"referral_modal_share_link_hashtag",defaultMessage:"#OlympTrader"}}),f=(0,i.vU)({title:{id:"referral_user_status_master_referrals_title",defaultMessage:"Your Referrals"},headerUserInfo:{id:"referral_user_status_master_referral_user_column_title",defaultMessage:"Referral"},headerStatus:{id:"referral_user_status_master_referral_status_column_title",defaultMessage:"Status"}}),E=(0,i.vU)({desciption:{id:"referral_user_status_master_check_your_loot_boxes_title",defaultMessage:"Your Loot Boxes"},title:{id:"referral_received_loot_box_number",defaultMessage:"{value, plural, one {# loot box} other {# loot boxes}}"}}),S=(0,i.vU)({inProgress:{id:"referral_user_status_master_referral_in_progress_status",defaultMessage:"In progress"},completed:{id:"referral_user_status_master_referral_completed_status",defaultMessage:"Complete"}})},70211:(e,a,s)=>{"use strict";s.d(a,{M:()=>i});const i=e=>{e.currentTarget.style.display="none"}},54902:(e,a,s)=>{"use strict";s.d(a,{P:()=>l});var i=s(27378),r=s(63967),n=s(97415),o=s(69761);const l=(0,i.memo)((e=>{const a=(0,r.G)(o.C).store,s=(0,n.o)(a),l=s.requestUserStatus,c=s.requestReferral,d=s.status;return"pending"!==l&&"pending"!==c||"loaded"===d?"initial"===l||"initial"===c?i.createElement(i.Fragment,null,e.initial):"failure"===l||"failure"===c?i.createElement(i.Fragment,null,e.failure):i.createElement(i.Fragment,null,e.success):i.createElement(i.Fragment,null,e.pending)}));l.displayName="PanelReferralCases"},69761:(e,a,s)=>{"use strict";s.d(a,{C:()=>ReferralService});var i=s(47014),r=s.n(i),n=s(7223);const o=e=>{const a=new Set,s=s=>{null==e||e(s),a.forEach((e=>e(s)))};return s.unlisten=e=>{a.delete(e)},s.listen=e=>(a.add(e),()=>s.unlisten(e)),s};var l=s(11625),c=s(23735);const d=function(){var e=i((function*(e){if(!navigator.clipboard)return(e=>{const a=document.createElement("textarea");let s;a.value=e,a.style.position="fixed",document.body.appendChild(a),a.focus(),a.select();try{document.execCommand("copy"),s=!0}catch(e){s=!1}return document.body.removeChild(a),s})(e);try{return yield navigator.clipboard.writeText(e),!0}catch(e){return!1}}));return function(a){return e.apply(this,arguments)}}();var u=s(45797);class ReferralService extends n.t{constructor(e){var a;super({status:"initial",requestUserStatus:"initial",requestReferral:"initial",userStatus:"unknown",storyName:"",countLootboxes:0,link:"",isBanner:!1,steps:[],referrals:[],lootbox:null,isOpenTooltipTrading:!1}),a=this,this.options=e,this.loadUserStatus=this.createTask(r()((function*(){a.update({requestUserStatus:"pending"});try{const e=yield a.options.requestUserStatus();a.update({requestUserStatus:"success",userStatus:e})}catch(e){throw a.update({requestUserStatus:"failure"}),e}})),{strategy:n.T.queue}),this.loadReferral=this.createTask(r()((function*(){a.update({requestReferral:"pending"});try{var e,s,i,r,n,o,l;const c=a.getState().userStatus,d=yield a.options.requestReferral(c);a.update({requestReferral:"success",status:"loaded",storyName:null!==(e=d.storyName)&&void 0!==e?e:"",countLootboxes:null!==(s=d.countLootboxes)&&void 0!==s?s:0,link:null!==(i=d.link)&&void 0!==i?i:"",isBanner:null!==(r=d.isBanner)&&void 0!==r&&r,steps:null!==(n=d.steps)&&void 0!==n?n:[],referrals:null!==(o=d.referrals)&&void 0!==o?o:[],lootbox:null!==(l=d.lootbox)&&void 0!==l?l:null})}catch(e){throw a.update({requestReferral:"failure"}),e}})),{strategy:n.T.queue}),this.onCardProfileMount=o((()=>{this.loadUserStatus()})),this.onCardProfileClick=o((()=>{this.loadReferral(),(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"open",eventLabel:"referral_program/".concat(this.getState().userStatus)})})),this.onPanelReferralContentMount=o((()=>{this.loadUserStatus().then(this.loadReferral)})),this.onModalShareLinkClose=o(),this.onLinkCopy=o((()=>{var e;d(null!==(e=this.getState().link)&&void 0!==e?e:""),(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"copy_link",eventLabel:this.getState().userStatus})})),this.onLinkFacebookShare=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"copy_link/facebook",eventLabel:this.getState().userStatus})})),this.onLinkWhatsappShare=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"copy_link/whatsapp",eventLabel:this.getState().userStatus})})),this.onLinkTelegramShare=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"copy_link/telegram",eventLabel:this.getState().userStatus})})),this.onLinkTwitterShare=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"copy_link/twitter",eventLabel:this.getState().userStatus})})),this.onPanelReferralActionInfoClick=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"info",eventLabel:this.getState().userStatus})})),this.onPanelReferralUnavailableClose=o(),this.onBannerLootboxClick=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"lootbox_info",eventLabel:this.getState().userStatus})})),this.onPanelErrorCloseClick=o(),this.onPanelErrorRetryClick=o((()=>{this.loadUserStatus().then(this.loadReferral)})),this.onButtonInviteClick=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"invite_a_friend",eventLabel:this.getState().userStatus})})),this.onBannerClick=o((()=>{(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"info/banner",eventLabel:this.getState().userStatus})})),this.onButtonLootboxClick=o((()=>{const e=this.getState(),a=e.countLootboxes,s=e.userStatus;(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:"lootbox_page/".concat(a),eventLabel:s})})),this.onStepClick=o((e=>{let a=e.step;(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"referral_program",eventAction:a.id,eventLabel:this.getState().userStatus})})),this.onPanelLootboxContentMount=o((()=>{this.loadUserStatus().then(this.loadReferral)})),this.onTooltipTradingCloseClick=o(this.closeTooltipTrading.bind(this)),this.onTooltipTradingClose=o(this.closeTooltipTrading.bind(this)),this.linkFormatters={facebook:this.options.formatToFacebookLink,whatsapp:this.options.formatToWhatsappLink,telegram:this.options.formatToTelegramLink,twitter:this.options.formatToTwitterLink},this.loadReferral=this.loadReferral.bind(this),this.loadUserStatus=this.loadUserStatus.bind(this),this.createHandleStepClick=this.createHandleStepClick.bind(this),this.openTooltipTrading=this.openTooltipTrading.bind(this),this.closeTooltipTrading=this.closeTooltipTrading.bind(this)}getLink(e){return(0,this.linkFormatters[e])({url:this.getState().link,text:u.NW.formatMessage(l.gQ.linkText),hashtag:u.NW.formatMessage(l.gQ.linkHashtag)})}createHandleStepClick(e,a){return()=>this.onStepClick({step:e,index:a})}openTooltipTrading(){this.update({isOpenTooltipTrading:!0})}closeTooltipTrading(){this.update({isOpenTooltipTrading:!1})}}},94503:(e,a,s)=>{"use strict";s.d(a,{Ul:()=>l,b$:()=>c});var i=s(47014),r=s.n(i),n=s(7223);class TradingMechanicsService extends n.t{constructor(e){var a;super({list:[{type:"ftt",title:"FTT",enabled:!1},{type:"fx",title:"FX",enabled:!1},{type:"fx_classic",title:"CFD",enabled:!1},{type:"spt",title:"SPT",enabled:!1}]}),a=this,this.repository=e,this.load=this.createTask(r()((function*(){const e=yield a.repository.findAll();a.update({list:Array.from(e)})})),{strategy:n.T.once})}enabled(e){var a,s;return null!==(a=null===(s=this.getState().list.find((a=>a.type===e)))||void 0===s?void 0:s.enabled)&&void 0!==a&&a}}var o=s(13243);class TradingMechanicsRepository{findAll(){return Promise.resolve([{type:"ftt",title:"Ftt",enabled:!0},{type:"spt",title:"FX",enabled:!0},{type:"spt",title:"Stocks",enabled:!0},{type:"fx_classic",title:"CFD",enabled:!0}])}}const l=(0,o.v)({name:"TradingMechanics",services:(e,a)=>{let s=a.tradingMechanicsRepository;return{tradingMechanicsService:new TradingMechanicsService(s)}}},{repositories:()=>({tradingMechanicsRepository:new TradingMechanicsRepository}),publicApi:e=>e}).onStart((e=>e.tradingMechanicsService.load())),c=(0,o.v)({name:"TradingMechanics",services:(e,a)=>{let s=a.tradingMechanicsRepository;return{tradingMechanicsService:new TradingMechanicsService(s)}}},{repositories:()=>({tradingMechanicsRepository:new TradingMechanicsRepository}),publicApi:e=>e}).onStart((e=>e.tradingMechanicsService.load()))},29204:(e,a,s)=>{"use strict";s.d(a,{PO:()=>p,ST:()=>c,is:()=>m,k1:()=>o,l4:()=>d,mZ:()=>l,o0:()=>n,xl:()=>u});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{defaultMessage:"Join for free",id:"events_join_for_free"}),o=()=>i.createElement(r._,{defaultMessage:"Starts in",id:"universal_event_starts_in"}),l=()=>i.createElement(r._,{defaultMessage:"Ends in",id:"universal_event_ends_in"}),c=()=>i.createElement(r._,{defaultMessage:"Joined",id:"events_joined"}),d=()=>i.createElement(r._,{defaultMessage:"Announce",id:"events_label_announce"}),u=()=>i.createElement(r._,{defaultMessage:"Active stage",id:"events_label_active"}),m=()=>i.createElement(r._,{defaultMessage:"Results",id:"events_results"}),p=()=>i.createElement(r._,{defaultMessage:"You haven't participated in any events yet. Keep an eye on stories and the Events section so you don't miss anything.",id:"empty_state_tournaments"})},10139:(e,a,s)=>{"use strict";s.d(a,{QQ:()=>o.Q,Td:()=>r.T,bR:()=>l.b,bp:()=>c.b,n3:()=>n.n,pr:()=>i.p});s(60638);var i=s(84659),r=s(52235),n=s(62349),o=s(52460),l=s(11633),c=s(70302)},70302:(e,a,s)=>{"use strict";s.d(a,{b:()=>EventLeaderboardService});var i=s(47014),r=s.n(i),n=s(7223),o=s(56177);class EventLeaderboardService extends n.t{constructor(e,a){var s;super({leaderboard:null,currUserId:null}),s=this,this.repository=e,this.eventListService=a,this.loadLeaderboard=this.createTask(function(){var e=r()((function*(e){s.update({leaderboard:yield s.repository.find(e)})}));return function(a){return e.apply(this,arguments)}}(),{strategy:n.T.queue}),a.subscribe((e=>{const a=e.selectedId?(0,o.G)(e,e.selectedId):null;a&&a.hasLeaderboard?this.loadLeaderboard(a.id):this.update({leaderboard:null})}))}setCurrUserId(e){this.update({currUserId:e})}}},11633:(e,a,s)=>{"use strict";s.d(a,{b:()=>EventListService});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(7223),c=s(57415),d=s(56177),u=s(65746);class EventListService extends l.t{constructor(e,a){var s;super({current:[],history:[],selectedId:null}),s=this,this.repository=e,this.timeService=a,this.load=this.createTask(o()((function*(){yield s.reload()})),{strategy:l.T.queue}),this.join=this.createTask(function(){var e=o()((function*(e){(yield s.repository.join(e))||s.update((a=>r()(r()({},a),{},{current:a.current.map((a=>a.id===e?r()(r()({},a),{},{joined:!0}):a))})))}));return function(a){return e.apply(this,arguments)}}()),this.select=this.createTask((e=>{const a=(0,d.G)(this.getState(),e);return a&&this.update({selectedId:e}),Promise.resolve(a)}),{strategy:l.T.queue}),this.checkPassedEvents=this.checkPassedEvents.bind(this),this.watcher=new c.CP({onStart:()=>{this.timeService.events.has("serverTime",this.checkPassedEvents)||this.timeService.events.on("serverTime",this.checkPassedEvents)},onStop:()=>{this.timeService.events.off("serverTime",this.checkPassedEvents)}})}reload(){var e=this;return o()((function*(){const a=e.timeService.serverTime,s=yield e.repository.findAll(),i=Array.from(s).sort(((e,a)=>e.dates.startingAt-a.dates.startingAt)).reduce(((e,s)=>{const i=(0,u.d)(s.dates,a.timestamp);return"ended"===i?e.history.push(r()(r()({},s),{},{status:i})):e.current.push(r()(r()({},s),{},{status:i})),e}),{current:[],history:[]});e.update(i)}))()}checkPassedEvents(e){const a=this.getState(),s=a.current,i={current:[],history:a.history};let n=!1;s.forEach((a=>{const s=(0,u.d)(a.dates,e.timestamp);a.status!==s&&(n=!0),"ended"===s?i.history.push(r()(r()({},a),{},{status:"ended"})):i.current.push(r()(r()({},a),{},{status:s}))})),n&&this.update(i),s.length!==i.current.length&&this.reload()}}},56177:(e,a,s)=>{"use strict";function i(e,a){var s,i;return null!==(s=null!==(i=e.history.find((e=>e.id===a)))&&void 0!==i?i:e.current.find((e=>e.id===a)))&&void 0!==s?s:null}s.d(a,{G:()=>i})},65746:(e,a,s)=>{"use strict";s.d(a,{d:()=>i});const i=(e,a)=>a<e.startingAt?"announced":a>=e.startingAt&&a<e.endingAt?"started":"ended"},84659:(e,a,s)=>{"use strict";s.d(a,{p:()=>w});var i=s(27378),r=s(2050),n=s(97415),o=s(63967),l=s(60042),c=s.n(l),d=s(29204),u=s(14282),m=s(17302),p=s(77740),h=s(83714),v=s(18985),g=s(57415),_=s(38660),f=s(42278),E=s(11633),S=s(70302),y=s(52235),b=s(5518);const C=i.memo((e=>{let a=e.startingAt;const s=(0,h.w6)();return i.createElement(g.gi,{serverTime:s.timestamp,startTime:a})})),T=e=>{let a=e.joined,s=e.pending,r=e.onClick;return a?i.createElement(m.zx,{endIcon:i.createElement("div",{className:b.Z.joinIcon},i.createElement(p.NOm,null)),disabled:!0,fullWidth:!0,onClick:r},i.createElement(d.ST,null)):i.createElement(m.zx,{loading:s,fullWidth:!0,onClick:r},i.createElement(d.o0,null))},A={announced:"announce",started:"active",ended:"results"},k=e=>{let a=e.event,s=e.eventListService,o=e.analyticsService,l=e.className,d=e.stickyJoin,u=e.eventLeaderboardService,p=e.countries;const h=(0,r.x)(y.T,{props:{galleryName:"universalEvents_".concat(a.id),storyNames:a.storyNames}}),f=(0,_.L)(a.dates,a.status),E=(0,n.o)(s.join.pending),S=i.useCallback((()=>{o.track({scope:"events_card",category:"events_card",action:"join/".concat(a.id),label:"".concat(A[a.status])}),s.join(a.id)}),[a.id,a.status,s,o]),k=(0,n.o)(u.store),w=k.leaderboard,N=k.currUserId;return i.createElement("div",{className:c()(l,b.Z.host)},i.createElement(m.xu,{flexGrow:d,padding:[0,0,8,0]},i.createElement(m.xu,{padding:[0,16,24,16]},i.createElement(g.fO,{className:b.Z.image,url:a.meta.headerImage,variant:"contain"})),i.createElement(m.xu,{padding:[0,16,8,16]},i.createElement(m.xv,{align:"center",variant:"XL / Bold"},a.meta.title)),i.createElement(m.xu,null,i.createElement(m.xv,{align:"center",color:"contrast-beta",variant:"M / Regular"},a.meta.description)),f.startingAt&&i.createElement(m.xu,{padding:[16,16,0,16]},i.createElement(g.ZJ,{timer:i.createElement(C,{startingAt:f.startingAt}),title:f.title})),0!==a.storyNames.length&&i.createElement(m.xu,{padding:[24,16,0,16]},h),w?i.createElement(m.xu,{padding:[16,0,0,0]},i.createElement(m.Z7,null,i.createElement(m.Z7.Header,{nameTitle:w.header.name,nameTooltip:w.header.nameTooltip,valueTitle:w.header.value,valueTooltip:w.header.valueTooltip,divider:!0}),w.users.map((e=>{var a;const s=null==p||null===(a=p[e.country.toLocaleLowerCase()])||void 0===a?void 0:a.flagIcon;return i.createElement(m.Z7.Item,{avatar:w.settings.showAratars?i.createElement(m.qE,{badge:s?i.createElement("img",{alt:"flag",className:b.Z.flag,src:s}):null,size:"s",url:e.avatar}):null,description:e.prize,descriptionColor:"positive-alpha",highlight:N===e.id,key:e.id,name:e.name,position:w.settings.showPosition?e.position:void 0,positionColor:e.prize?"positive-alpha":void 0,value:i.createElement(v.BK,{maximumFractionDigits:1,notation:"compact",value:e.points})})})))):null),"ended"!==a.status&&i.createElement("div",{className:c()(b.Z.footer,d&&b.Z.footer_sticky)},i.createElement(T,{joined:a.joined,pending:E,onClick:S})))},w=i.memo((e=>{let a=e.className,s=e.stickyJoin,r=e.countries,n=e.onBack;const l=(0,o.G)(E.b),c=(0,o.G)(u.yD),d=(0,o.G)(S.b),m=(0,f.f)();return(0,g.ZG)(l.watcher),i.useEffect((()=>{null===m&&n()}),[m,n]),m?i.createElement(k,{analyticsService:c,className:a,countries:r,event:m,eventLeaderboardService:d,eventListService:l,stickyJoin:s}):null}))},5518:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_33zjrZoegfsF",joinIcon:"_3WV0zvY6FQdl",footer:"_7FbLGGF3g5uv",footer_sticky:"_1m7lQ6x4vfcQ",flag:"he7RCWfL_8bG"}},52235:(e,a,s)=>{"use strict";s.d(a,{T:()=>i});const i=(0,s(84584).Z)({id:"universalEventStoriesSlot"})},38660:(e,a,s)=>{"use strict";s.d(a,{L:()=>o});var i=s(27378),r=s(29204);const n={announced:i.createElement(r.k1,null),started:i.createElement(r.mZ,null),ended:i.createElement(r.is,null)},o=(e,a)=>i.useMemo((()=>{const s={title:n[a],startingAt:null};switch(a){case"announced":s.startingAt=e.startingAt;break;case"started":s.startingAt=e.endingAt;break;case"ended":s.startingAt=null}return s}),[a,e])},42278:(e,a,s)=>{"use strict";s.d(a,{f:()=>l});var i=s(63967),r=s(15954),n=s(11633),o=s(56177);const l=()=>{const e=(0,i.G)(n.b);return(0,r.K)(e.store,(e=>null===e.selectedId?null:(0,o.G)(e,e.selectedId)),[])}},62349:(e,a,s)=>{"use strict";s.d(a,{n:()=>u});var i=s(27378),r=s(83714),n=s(29204),o=s(57415),l=s(38660);const c=i.memo((e=>{let a=e.startingAt;const s=(0,r.w6)();return i.createElement(o.gi,{serverTime:s.timestamp,startTime:null!=a?a:0})})),d={announced:"announce",started:"active"},u=i.memo((e=>{let a=e.event,s=e.eventListService,r=e.analyticsService,u=e.className,m=e.onClick;const p=a.status,h=a.meta,v=a.dates,g=a.slider,_=a.joined;(0,o.ZG)(s.watcher);const f=(0,l.L)(v,p),E=f.startingAt,S=f.title,y=i.useCallback((()=>{s.select(a.id),r.track({scope:"events_card",category:"events_card",action:"open/".concat(a.id),label:"".concat(d[a.status])}),m(a)}),[a,s,r,m]),b="announced"===p?i.createElement(n.l4,null):i.createElement(n.xl,null),C="announced"===p?"accent":"default";return i.createElement(o.K7,{className:u,onClick:y},i.createElement(o.K7.Content,{backgroundImage:h.widgetImage,gradientColor:h.widgetColor,label:b,labelColor:C,title:h.title},0!==g.length&&i.createElement(o.K7.Slider,{items:g})),i.createElement(o.K7.Footer,{color:h.widgetColor,endContent:i.createElement(o.K7.Action,{state:_?"checked":"default"}),startContent:E?i.createElement(o.K7.FooterText,{subtitle:S,title:i.createElement(c,{startingAt:E})}):i.createElement(o.K7.FooterText,{subtitle:null,title:S})}))}))},75693:(e,a,s)=>{"use strict";s.d(a,{y:()=>o});var i=s(27378),r=s(29204),n=s(57415);const o=i.memo((e=>{let a=e.event,s=e.className,o=e.onClick;const l=a.meta,c=a.dates,d=a.slider,u=i.useCallback((()=>{o(a)}),[a,o]);return i.createElement(n.K7,{className:s,onClick:u},i.createElement(n.K7.Content,{backgroundImage:l.widgetImage,gradientColor:l.widgetColor,label:i.createElement(n.K7.CompletedDate,{time:c.startingAt}),title:l.title},0!==d.length&&i.createElement(n.K7.Slider,{items:d})),i.createElement(n.K7.Footer,{color:l.widgetColor,endContent:i.createElement(n.K7.Action,{state:"default"}),startContent:i.createElement(n.K7.FooterText,{title:i.createElement(r.is,null)})}))}))},52460:(e,a,s)=>{"use strict";s.d(a,{Q:()=>v});var i=s(27378),r=s(63967),n=s(97415),o=s(17302),l=s(77740),c=s(14282),d=s(29204),u=s(59757),m=s(11633),p=s(75693),h=s(85084);const v=i.memo((e=>{let a=e.onItemClick;const s=(0,r.G)(m.b),v=(0,r.G)(c.yD),g=(0,n.o)(s.store).history,_=i.useMemo((()=>g.sort(((e,a)=>a.dates.startingAt-e.dates.startingAt))),[g]),f=i.useCallback((e=>{s.select(e.id),v.track({scope:"events_card",category:"events_card",action:"open/".concat(e.id),label:"results"}),a(e)}),[s,v,a]);return 0===_.length?i.createElement(o.xu,{verticalAlign:"center",flexGrow:!0},i.createElement(u.Yz,{description:i.createElement(d.PO,null),icon:i.createElement("div",{className:h.Z.icon},i.createElement(l.bpu,{fontSize:"inherit"}))})):i.createElement("div",{className:h.Z.cards},_.map((e=>i.createElement("div",{className:h.Z.card,key:e.id},i.createElement(p.y,{event:e,onClick:f})))))}))},85084:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={icon:"_3xxjd_SwR9Xz",cards:"_1_fZvcYA_P59",card:"_1VIMah0ldjWg"}},41044:(e,a,s)=>{"use strict";s.d(a,{N:()=>m,s:()=>p});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(77740),c=s(82844);const d={account:i.createElement(l.nr$,null),balance:i.createElement(l.MjF,null),trade:i.createElement(l.emY,null)},u=e=>{let a=e.title,s=e.text,r=e.icon,o=e.isNegative;return i.createElement("div",{className:n()("account-archive-blocker",o?"account-archive-blocker_negative":"")},i.createElement("div",{className:"account-archive-blocker__icon"},r),i.createElement("div",{className:"account-archive-blocker__content"},i.createElement("div",{className:"account-archive-blocker__title"},a),i.createElement("div",{className:"account-archive-blocker__text"},s)),i.createElement("div",{className:"account-archive-blocker__status"},o?i.createElement(l.bMz,null):i.createElement(l.NOm,null)))};u.displayName="Blocker";const m=e=>{let a=e.archiveAllowModel,s=e.isAccountChanging,r=e.goToFaq,n=e.onClick;const l=a&&!a.allowed;return a?i.createElement("div",{className:"account-archive-confirm"},i.createElement("div",{className:"account-archive-confirm__text account-archive-confirm__text-intro"},a.description),i.createElement("div",{className:"account-archive-confirm__blockers"},a.conditions.map((e=>{const a=d[e.unit_id];return i.createElement(u,{key:e.unit_id,icon:a,title:e.unit,text:e.description,isNegative:!e.satisfied})}))),a.orders_warning&&i.createElement("div",{className:"account-archive-confirm__text","data-test":"account-archive-orders-warning"},a.orders_warning),i.createElement("div",{className:"account-archive-confirm__text account-archive-confirm__text-faq"},i.createElement(c._,{id:"account_archive_faq_description",defaultMessage:"For more information, please refer to the <tag>Help Center</tag>",values:{tag:e=>i.createElement("a",{href:"#",onClick:r},e)}})),i.createElement(o.zx,{disabled:l,onClick:n,color:"negative",fullWidth:!0},s?i.createElement(o.$j,null):i.createElement(c._,{id:"account_archive_full",defaultMessage:"Archive an Account"}))):i.createElement("div",{className:"account-archive-confirm__loader"},i.createElement(o.$j,null))};m.displayName="AccountArchiveConfirm";const p=e=>{let a=e.children;return i.createElement("div",{className:"account-archive-confirm-sidebar-wrapper"},a)};p.displayName="AccountArchiveConfirmSidebarWrapper"},1673:(e,a,s)=>{"use strict";s.d(a,{E:()=>l,k:()=>c});var i=s(27378),r=s(77740),n=s(17302),o=s(82844);const l=e=>{let a=e.accountName,s=e.accountId,l=e.onClick;return i.createElement("div",{className:"account-archive-success"},i.createElement(r.fO3,{className:"account-archive-success__icon"}),i.createElement("div",{className:"account-archive-success__title"},i.createElement(o._,{id:"account_archive_success_title",defaultMessage:"Account archived"})),i.createElement("div",{className:"account-archive-success__text"},i.createElement(o._,{id:"account_archive_success_description",defaultMessage:"Your {name} account {id} has been successfully closed",values:{name:a,id:s}})),i.createElement(n.zx,{onClick:l},i.createElement(o._,{id:"pro_continue",defaultMessage:"Continue"})))};l.displayName="AccountArchiveSuccess";const c=e=>{let a=e.children;return i.createElement("div",{className:"account-archive-success-wrapper"},a)};c.displayName="AccountArchiveSuccessWrapper"},45737:(e,a,s)=>{"use strict";s.d(a,{r:()=>C});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(44495),m=s(77740),p=s(17302),h=s(82844),v=s(95029),g=s(88119),_=s(49418),f=s(27547),E=s(83929),S=s(83939),y=s(17598);const b=(0,u.animated)(v.ih),C=e=>{let a=e.className,s=e.title,i=e.accentTitle,n=e.amount,c=e.marginLevel,C=e.pnl,T=e.type,A=e.currency,k=e.isTooltip,w=e.isLoading,N=e.isIslamic,R=e.compact,I=e.covered,D=e.onClick;const O=l.useState(null),L=o()(O,2),M=L[0],P=L[1],x=l.createElement("div",{className:d()(y.Z.title,{[y.Z.title_accent]:i,[y.Z.title_compact]:R}),"data-test":"account-balance-title"},l.createElement("span",{className:y.Z.titleText,"data-test":"account-balance-title-text"},s),N?l.createElement(S.j,{className:y.Z.iconIslamic,"data-test":"account-balance-islamic-icon"}):null),F=l.createElement("div",{className:d()(y.Z.amount,{[y.Z.amount_compact]:R}),"data-test":"account-balance-value"},l.createElement(u.Spring,{to:{amount:n},config:r()(r()({},u.config.gentle),{},{duration:1e3})},(e=>l.createElement("span",{className:d()(I?g.Z.host:"")},l.createElement(b,{currency:A,value:e.amount,maximumFractionDigits:2,minimumFractionDigits:2,currencyDisplay:"demo"===T?void 0:"code"})))),R?null:l.createElement("div",{className:y.Z.icon},l.createElement(m.BDo,null)));return l.createElement(p.Xd,{ref:P,className:d()(y.Z.host,{[y.Z.host_compact]:R},a),onClick:D,"data-test":"balance"},w?l.createElement(_.D,null):null,l.createElement("div",{className:d()(y.Z.content,{[y.Z.content_compact]:R})},R?l.createElement(l.Fragment,null,l.createElement("div",{className:y.Z.contentRow},x,l.createElement("div",{className:y.Z.ml,"data-test":"account-balance-ml"},c&&c>0?l.createElement(E.g,{marginLevel:c},"ML: ",l.createElement(v.p7,{value:c})):null)),l.createElement("div",{className:d()(y.Z.contentRow,{[y.Z.contentRow_wrap]:void 0!==C})},F,l.createElement("div",{className:y.Z.pnl,"data-test":"account-balance-pnl"},c&&c>0&&void 0!==C?l.createElement(v.oI,{value:C},l.createElement(v.ih,{currency:A,value:C,isSign:!0,maximumFractionDigits:2,minimumFractionDigits:2,currencyDisplay:"demo"===T?void 0:"code"})):null))):l.createElement(l.Fragment,null,x,F)),l.createElement(f.s,{anchorEl:M,open:k||!1},l.createElement(h._,{id:"account_created_popup",defaultMessage:"{title} account created",values:{title:A.toLocaleUpperCase()}})))};C.displayName="AccountBalance"},17598:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1_Blm54cNNMW",host_compact:"_3SkBadqbX37c",content:"LcQn32lERH42",content_compact:"_1ZhDI0L9DgUP",contentRow:"_1LJ4D60y8UTE",contentRow_wrap:"_12Xvs7wvhHS3",title:"_26UCYpvMdvYW",titleText:"_3JfcqGMsbtkW",title_accent:"_3H-58BBxoTPq",title_compact:"vEvd08IhO8XV",amount:"_37TGWDwhkvFc",amount_compact:"_23S-_JBkn6AV",icon:"_2SX_Oj1vblAL",iconIslamic:"_13HnFokNmsAR",ml:"_2pZ3bPb4GHEb",pnl:"_3da1MCEaOSL7"}},27094:(e,a,s)=>{"use strict";s.d(a,{W:()=>c});var i=s(27378),r=s(50649),n=s(1771),o=s(43631),l=s(51701);const c=(0,r.observer)((e=>{let a=e.account,s=e.disabled,r=e.isDemoRefilling,c=e.accountEditMenu,d=e.covered,u=e.labels,m=e.onDemoRefill,p=e.onSelect;const h=a.id,v=a.selected,g=a.name,_=a.type,f=a.amountReal,E=a.bonus,S=a.currencyName,y=a.currencyIcon,b=a.isIslamic,C=a.amount<a.refill.maxAmount;return i.createElement(l.U,{disabled:s,isDemoRefillable:C,isDemoRefilling:r,accountEditMenu:c,type:_,id:h,refill:a.refill,selected:v,title:g,isIslamic:b,currency:S,currencyIcon:y,onDemoRefill:m,labels:u,onSelect:p},i.createElement(o.y,{covered:d,balance:f,currency:S,selected:v}),"demo"===_?null:i.createElement(n.r,{covered:d,bonus:E,currency:S,selected:v}))}));c.displayName="AccountCommonSelectItem"},85431:(e,a,s)=>{"use strict";s.d(a,{L:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(91496);const c=e=>{let a=e.selected,s=e.currency,r=e.labels,c=e.currencyName,d=e.currencySign;return i.createElement("div",{className:n()(l.Z.host,{[l.Z.host__selected]:a}),"data-test":"account-currency-select"},i.createElement(o.Y8.Option,{label:"".concat(s.toUpperCase()," - ").concat(c),value:s,dataTest:"account-currency-select-radio"}),i.createElement("span",{className:l.Z.description},i.createElement(i.Fragment,null,r.map((e=>i.createElement("span",{className:l.Z.label,key:e.name},i.createElement(o.Ct,{content:e.name,color:"positive",dataTest:"account-currency-label"}))))),i.createElement("span",{className:l.Z.sign},d)))};c.displayName="AccountCurrencyItem"},91496:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3cB89ly50ePz",host__selected:"_3MB3etzq8Wlh",description:"_3ASRM_3bMJyc",label:"CkQIe8vky-NU"}},78547:(e,a,s)=>{"use strict";s.d(a,{n:()=>l});var i=s(27378),r=s(60042),n=s.n(r),o=s(72590);const l=e=>{let a=e.className,s=e.icon,r=e.children;return i.createElement("div",{className:n()(o.Z.host,a)},s?i.createElement("div",{className:o.Z.icon},s):null,i.createElement("div",{className:o.Z.text},r))};l.displayName="AccountEditBanner"},72590:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1RYwAKYTZvyM",icon:"_2XVOi7GILHva",text:"Q-kMgjJYWJr6"}},45506:(e,a,s)=>{"use strict";s.d(a,{h:()=>u});var i=s(2243),r=s.n(i),n=s(27378),o=s(17302),l=s(82844),c=s(77740),d=s(43135);const u=e=>{let a=e.accountId,s=e.onRename,i=e.onDeposit,u=e.onWithdraw,m=e.onArchive,p=e.onTransfer,h=e.onTransactions;const v=n.useState(!1),g=r()(v,2),_=g[0],f=g[1],E=n.useCallback((e=>{switch(e){case"deposit":i&&i();break;case"withdraw":u&&u();break;case"rename":s&&s();break;case"archive":m&&m();break;case"transfer":p&&p();break;case"transactions":h&&h()}}),[s,i,u,m,p,h]);return!!(i||u||m||p||h)?n.createElement(o.v2,{open:_,onToggle:f,selected:"",onChange:E},n.createElement(o.v2.Trigger,null,n.createElement(o.Xd,null,n.createElement(c.nqv,null))),n.createElement(o.v2.Content,null,n.createElement(o.v2.Group,{label:n.createElement("span",{"data-test":"account-edit-menu-header"},n.createElement(l._,{id:"paym_account",defaultMessage:"Account"})," #",a)},i&&n.createElement(o.v2.Item,{value:"deposit",label:n.createElement(l._,{id:"billing_recharge",defaultMessage:"Deposit"}),icon:n.createElement(c.IWo,null),dataTest:"account-menu-deposit"}),u&&n.createElement(o.v2.Item,{value:"withdraw",label:n.createElement(l._,{id:"cabinet_tab_payout",defaultMessage:"Withdraw"}),icon:n.createElement(c.pYT,null),dataTest:"account-menu-withdraw"}),p&&n.createElement(o.v2.Item,{value:"transfer",label:n.createElement(l._,{id:"transfer",defaultMessage:"Transfer"}),icon:n.createElement(c.hS$,null),dataTest:"account-menu-transfer"}),h&&n.createElement(o.v2.Item,{value:"transactions",label:n.createElement(l._,{id:"cabinet_tab_finhistory",defaultMessage:"Transactions"}),icon:n.createElement(d.Y,null),dataTest:"account-menu-transactions"}),s&&n.createElement(o.v2.Item,{value:"rename",label:n.createElement(l._,{id:"rename",defaultMessage:"Rename"}),icon:n.createElement(c.syg,null),dataTest:"account-menu-rename"}),m&&n.createElement(o.v2.Item,{value:"archive",label:n.createElement(l._,{id:"account_archive",defaultMessage:"Archive account"}),icon:n.createElement(c.fO3,null),dataTest:"account-menu-archive"})))):null};u.displayName="AccountEditMenu"},43135:(e,a,s)=>{"use strict";s.d(a,{Y:()=>r});var i=s(27378);const r=()=>i.createElement("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4a8 8 0 11-5.65 13.66 1 1 0 00-1.42 1.42A10 10 0 102.83 8L2.2 6.49a1 1 0 00-1.84.79l1.78 4.13a1 1 0 001.32.53l4.13-1.78a1 1 0 10-.79-1.84l-2.32 1A8.03 8.03 0 0112 4z",fill:"currentColor"}),i.createElement("path",{d:"M12 7a1 1 0 011 1v4.59l1.91 1.91a1 1 0 01-1.41 1.41l-2.15-2.14a1.2 1.2 0 01-.35-.85V8a1 1 0 011-1z",fill:"currentColor"}))},460:(e,a,s)=>{"use strict";s.d(a,{_:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(8141),l=s(83747);const c=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()(l.Z.host,s),"data-test":"account-edit-panel",dir:(0,o.L)()},a)};c.Content=e=>{let a=e.children,s=e.className,r=e.indent,o=void 0===r?"default":r;return i.createElement("div",{className:n()(l.Z.content,s,{[l.Z.content_indent_small]:"small"===o}),"data-test":"account-edit-panel-content"},a)},c.Banner=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()(l.Z.banner,s),"data-test":"account-edit-panel-banner"},a)},c.Subtitle=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()(l.Z.subtitle,s),"data-test":"account-edit-panel-subtitle"},a)},c.Action=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()(l.Z.action,s),"data-test":"account-edit-panel-action"},a)},c.displayName="AccountEditPanelLayout"},83747:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"gGERNhxCJxSN",banner:"fz7oIaTBPPP3",subtitle:"_13xG7xeRNU3G",content:"_1gXYBIZdGIw2",content_indent_small:"_36CF_wHd9wdm",action:"jv2NUJxRs5-_"}},83929:(e,a,s)=>{"use strict";s.d(a,{g:()=>l});var i=s(2243),r=s.n(i),n=s(27378),o=s(31208);const l=e=>{let a=e.marginLevel,s=e.children;const i=(e=>{const a=n.useState(o.Z.normal),s=r()(a,2),i=s[0],l=s[1];return n.useEffect((()=>{e>=200&&l(o.Z.normal),e<200&&e>=100&&l(o.Z.warn),e<100&&l(o.Z.danger)}),[e]),i})(a);return n.createElement("span",{className:i},s)}},31208:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={normal:"VJGGLy10Fwh3",warn:"_3MRvVt8LfTYu",danger:"_2x2GUfOoOD2g"}},27547:(e,a,s)=>{"use strict";s.d(a,{s:()=>m});var i=s(49491),r=s.n(i),n=s(27378),o=s(29609),l=s(60042),c=s.n(l),d=s(17302);const u=e=>{let a=e.className,s=e.children,i=e.arrowProps;return n.createElement("div",{className:c()("account-on-boarding-tooltip",a),"data-test":"account-on-boarding-tooltip"},n.createElement("div",{className:c()("account-on-boarding-tooltip__content",a)},i&&n.createElement("div",r()({className:"account-on-boarding-tooltip-arrow"},i)),s))},m=e=>{let a=e.open,s=e.anchorEl,i=e.children,l=e.placement,m=void 0===l?"bottom":l,p=e.skidding,h=e.distance,v=e.className,g=e.onShow;return n.useEffect((()=>{a&&g&&g()}),[a]),n.createElement(d.rD,{anchorEl:s,open:a,transition:!0,placement:m,arrow:!0,disablePortal:!0,skidding:p,distance:h,tethered:!0,fitSizeTo:"content",className:"account-on-boarding-tooltip__popper"},(e=>{let a=e.arrowProps,s=e.TransitionProps;return n.createElement(o.Z,r()({appear:!0,classNames:{appear:"account-on-boarding-anim-enter",appearActive:"account-on-boarding-anim-enter-active",enter:"account-on-boarding-anim-enter",enterActive:"account-on-boarding-anim-enter-active",exit:"account-on-boarding-anim-exit",exitActive:"account-on-boarding-anim-exit-active"},timeout:200},s),n.createElement(u,{arrowProps:a,className:c()(v)},i))}))};m.displayName="AccountOnBoardingTooltip"},51701:(e,a,s)=>{"use strict";s.d(a,{U:()=>E});var i=s(49491),r=s.n(i),n=s(27378),o=s(60042),l=s.n(o),c=s(17302),d=s(23735),u=s(77740),m=s(82844),p=s(66257),h=s(91267),v=s(83939),g=s(3674),_=s(91496);const f={tournament:n.createElement(m._,{id:"refill_blocked_because_of_tournament",defaultMessage:"Refill is locked until tournament end"})},E=e=>{let a=e.disabled,s=e.children,i=e.isDemoRefilling,o=e.accountEditMenu,E=e.onDemoRefill,S=e.onSelect,y=e.isDemoRefillable,b=e.id,C=e.refill,T=e.selected,A=e.title,k=e.type,w=e.currency,N=e.currencyIcon,R=e.isIslamic,I=e.labels;const D=!0===a,O=k===p.Q.DEMO,L=n.useCallback((()=>{D||(S(b),(0,d.L)({event:"uaGtmEvents_clicks",eventCategory:"menu_accounts",eventAction:"choose",eventLabel:A}))}),[b,S,D,A]),M=n.useCallback((e=>{e.preventDefault(),e.stopPropagation()}),[]),P=n.useCallback((e=>{D||E&&E(),e.stopPropagation()}),[E,D]);let x=null;return O?C.blockingReason?x=n.createElement("div",{className:g.Z.demoRefillBlock,"data-test":"account-select-block"},n.createElement(c.u,{placement:"left",fitSizeTo:"content",triggerOnHover:!0,triggerOnTap:!0,delay:0,arrow:!0,transition:!0,disablePortal:!0,content:n.createElement("span",null,f[C.blockingReason])},(e=>n.createElement("span",r()({},e),n.createElement(u._V1,null))))):y&&(x=i?n.createElement(c.$j,{size:"s"}):n.createElement(c.Xd,{className:g.Z.demoRefillButton,onClick:P,"data-test":"account-select-refill-button"},n.createElement(u.tr8,null))):x=n.createElement("div",{onClick:M,"data-test":"account-item-action"}," ",o),n.createElement("div",{className:l()(g.Z.host,{[g.Z.host_selected]:T}),onClick:L,"data-test":l()("account-item","account-item-".concat(k),"account-item-id-".concat(b),{"account-item-selected":T})},n.createElement("div",{className:g.Z.icon,"data-test":"account-item-icon"},O?n.createElement(u.ScK,null):n.createElement(h.r,{iconUrl:N})),n.createElement("div",{className:g.Z.content},n.createElement("div",{className:g.Z.title},O?n.createElement("span",{className:l()(g.Z.titleName,{[g.Z.titleName_selected]:T,[g.Z.titleName_selected_demo]:T}),"data-test":"account-item-title-name"},A):n.createElement(n.Fragment,null,n.createElement("span",{className:l()(g.Z.titleName,{[g.Z.titleName_selected]:T,[g.Z.titleName_limited]:R}),"data-test":"account-item-title-name"},A),R?n.createElement(n.Fragment,null,n.createElement("span",{className:g.Z.separator},"•"),n.createElement("span",{className:g.Z.titleIslamic,"data-test":"account-item-islamic"},n.createElement(v.j,{className:g.Z.iconIslamic,"data-test":"account-item-islamic-icon"}),n.createElement(m._,{className:g.Z.titleIslamicText,id:"account_list_islamic",defaultMessage:"Islamic","data-test":"account-item-islamic-text"}))):null,n.createElement("span",{className:g.Z.separator},"•"),n.createElement("span",{className:g.Z.titleCurrency,"data-test":"account-item-title-currency"},w.toUpperCase()))),s),n.createElement("div",{className:g.Z.action},n.createElement(n.Fragment,null,I&&!R&&I.map((e=>n.createElement("span",{className:_.Z.label,key:e.name},n.createElement(c.Ct,{content:e.name,color:"positive",dataTest:"account-currency-label"}))))),x))};E.displayName="AccountSelectItem"},3674:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"PfDjwuS_RB7E",host_selected:"_3GNgDFlMcAfG",separator:"_3drgL_XOJSo_",content:"VF-AmS5Iaq3p",title:"_3BhJbtEMw_U9",titleName:"K-0OZ7fQzYQc",titleName_selected:"MYXbvEClU0Oa",titleName_selected_demo:"_2g6WJTLM0LSM",titleName_limited:"_2DngK79z9FUp",titleCurrency:"_2FI13uPzoJHv",titleIslamic:"S0RYL0jzsuPe",titleIslamicText:"_1Aag2ilAP2pn",icon:"_3nsT_dmsSaIh",iconIslamic:"_2q1eMLUrBRB9",action:"_1uu8o0clAceh",label:"_2CiDpM1WOPR9",demoRefillButton:"vj2qSotI0iKd",demoRefillBlock:"_1i6f5p0bm4Ho"}},43631:(e,a,s)=>{"use strict";s.d(a,{y:()=>d});var i=s(27378),r=s(60042),n=s.n(r),o=s(95029),l=s(1487),c=s(88119);const d=e=>{let a=e.balance,s=e.currency,r=e.floating,d=e.selected,u=e.covered;return i.createElement("div",{className:n()(l.Z.host,{[l.Z.host_selected]:d}),"data-test":"account-item-balance"},i.createElement("span",{className:n()(u?c.Z.host:"")},i.createElement(o.ih,{minimumFractionDigits:2,value:a,currency:s}))," ","number"==typeof r&&i.createElement(i.Fragment,null,0===r?"+":"",i.createElement("span",{className:n()(l.Z.floating,u?c.Z.host:"")},i.createElement(o.oI,{value:r},i.createElement(o.ih,{minimumFractionDigits:2,value:r,currency:s,isSign:!0})))))}},1487:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1CS40LTQuWa_",host_selected:"_1YbGf-D6v5Ig",floating:"xBIZwTxp7ZuM"}},1771:(e,a,s)=>{"use strict";s.d(a,{r:()=>u});var i=s(27378),r=s(60042),n=s.n(r),o=s(82844),l=s(95029),c=s(88119),d=s(86999);const u=e=>{let a=e.bonus,s=e.currency,r=e.covered,u=e.selected;return i.createElement("div",{className:d.Z.host,"data-test":"account-item-bonus"},i.createElement("span",{className:n()(d.Z.amount,{[d.Z.amount_selected]:u,[d.Z.amount_has_money]:a>0,[c.Z.host]:r}),"data-test":"account-item-bonus-amount"},i.createElement(l.ih,{minimumFractionDigits:2,value:a||0,currency:s})),i.createElement("span",{className:d.Z.separator},"•"),i.createElement("span",{className:d.Z.title,"data-test":"account-item-bonus-title"},i.createElement(o._,{id:"cabinet_bonus",defaultMessage:"Bonus"})))}},86999:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={amount:"_18EPrOUymUBz",amount_has_money:"vUV5kjRjiuAq","account-item_selected":"_1tFLqQ2XEry0",amount_selected:"_3UIspekDlLGW",title:"_3o4qdiV7cIn5",separator:"_1aP61i3-7hkB"}},4212:(e,a,s)=>{"use strict";s(49491),s(14936),s(27378)},29908:(e,a,s)=>{"use strict";s.d(a,{I:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(8141),l=s(17302);const c=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("account-select-panel",s),dir:(0,o.L)(),"data-test":"account-switcher"},a)};c.List=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("account-select-panel__list",s)},i.createElement(l.Xs,{className:n()("account-select-panel__list-scroll",s)},a))},c.Footer=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("account-select-panel__footer",s)},a)},c.displayName="AccountSelectPanelLayout"},49418:(e,a,s)=>{"use strict";s.d(a,{D:()=>r});var i=s(27378);const r=()=>i.createElement("div",{className:"account-skeleton"});r.displayName="AccountSkeleton"},49354:(e,a,s)=>{"use strict";s.d(a,{p:()=>o});var i=s(27378),r=s(17302),n=s(77740);const o=i.forwardRef(((e,a)=>{let s=e.onClick;return i.createElement(r.Xd,{ref:a,className:"add-account-button",onClick:s},i.createElement(n.PxB,null))}));o.displayName="AddAccountButton"},88119:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3EbpnVTGuPxq"}},91267:(e,a,s)=>{"use strict";s.d(a,{r:()=>n});var i=s(27378),r=s(62840);const n=e=>{let a=e.iconUrl;return a?i.createElement("img",{className:r.Z.host,"data-test":"currency-icon-img",src:a}):null}},62840:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"wzoSnNL1_X9q"}},83939:(e,a,s)=>{"use strict";s.d(a,{j:()=>l});var i=s(49491),r=s.n(i),n=s(27378),o=s(77740);const l=n.forwardRef(((e,a)=>n.createElement(o.leh,r()(r()({},e),{},{ref:a}),n.createElement("rect",{x:"2",y:"2",width:"20",height:"20",rx:"10",fill:"var(--high-alpha)"}),n.createElement("path",{d:"M11.984 6A6.002 6.002 0 0 0 6.1 12c0 3.312 2.689 6 6 6 1.55 0 2.961-.588 4.026-1.552a5.124 5.124 0 0 1-7.672-4.445 5.124 5.124 0 0 1 7.69-4.434A5.978 5.978 0 0 0 12.1 6h-.117Z",fill:"var(--contrast-beta)"}),n.createElement("path",{d:"m18.7 12-5.4 1.854L16.637 9v6L13.3 10.146 18.7 12Z",fill:"var(--contrast-beta)"}))));l.displayName="IconIslamic"},32678:(e,a,s)=>{"use strict";s.d(a,{EV:()=>h.E,Ii:()=>i.I,LP:()=>m.L,Nw:()=>p.N,UI:()=>l.U,Ws:()=>n.W,_g:()=>r._,hJ:()=>c.h,iN:()=>f.i,j2:()=>_.j,ks:()=>h.k,n6:()=>g.n,pU:()=>d.p,r2:()=>u.r,sI:()=>v.s,sl:()=>p.s,yo:()=>o.y});s(57579);var i=s(29908),r=s(460),n=s(27094),o=(s(4212),s(1771),s(43631)),l=s(51701),c=(s(83929),s(45506)),d=s(49354),u=s(45737),m=s(85431),p=(s(49418),s(41044)),h=s(1673),v=s(27547),g=s(78547),_=s(83939),f=(s(88119),s(91267),s(34119))},34119:(e,a,s)=>{"use strict";s.d(a,{i:()=>AccountEditService});var i=s(49491),r=s.n(i),n=s(59312),o=s(60521),l=s(57615),c=s(29042);class AccountEditService{constructor(){this.isActionsOnBoardingShown=!1,this.storage=new l._({namespace:"AccountEditService",backend:new c.u}),this.isActionsOnBoardingShown=this.storage.get("isActionsOnBoardingShown")||!1}get isSelectedDemo(){return Boolean(this.inputs.accountService&&this.inputs.accountService.selectedAccount&&"demo"===this.inputs.accountService.selectedAccount.type)}init(e){this.currencyList=[],this.inputs=e,e.currencyList.forEach(((a,s)=>{const i=e.currenciesInfo.find((e=>e.code===a));this.currencyList&&i&&this.currencyList.push({id:s,currency:i.code,title:i.name,sign:i.symbol,labels:i.labels})}))}editAccount(e){const a=this.inputs.accountService.accountsList.find((a=>a.id===e));if(a){const e=a.currencyName,s=a.id,i=a.name,r=a.sourceType,n=a.leverage;this.copyEditedAccount({id:s,name:i,leverage:n,sourceType:r,currency:e})}}getAccountArchiveAllow(e){return this.accountArchiveAllow=void 0,this.inputs.getAccountArchiveAllow(e).then((e=>((0,o.runInAction)((()=>{this.accountArchiveAllow=e})),Promise.resolve(e))))}createEditedAccount(e,a,s){if(this.currencyList){var i;if(this.currencyList.find((a=>a.currency===e)))this.copyEditedAccount({sourceType:this.inputs.defaultAccountType,leverage:null!==(i=this.inputs.defaultAccountLeverage)&&void 0!==i?i:null,currency:e,name:null!=s?s:"",id:a})}}addNewAccount(){this.currencyList&&this.currencyList.length&&this.createEditedAccount(this.currencyList[0].currency)}applyChanges(){this.editedAccount&&(this.editedAccount.id&&this.editedAccount.name?this.inputs.accountService.updateAccount(this.editedAccount.id,this.editedAccount.name).catch((e=>{this.inputs.showError("meta"in e?e.meta.msg:e.message)})):this.editedAccount.currency&&this.editedAccount.name&&this.inputs.accountService.createAccount(this.editedAccount.currency,this.editedAccount.name).catch((e=>{this.inputs.showError("meta"in e?e.meta.msg:e.message)})),this.inputs.closeSidebar())}archiveAccountApply(){this.archivingAccountId&&this.inputs.accountService.archiveAccount(this.archivingAccountId).then((()=>{this.inputs.openArchiveSuccess()})).catch((e=>{this.inputs.showError("meta"in e?e.meta.msg:e.message)}))}getAccountsCount(e){return this.inputs.accountService.accountsList.reduce(((a,s)=>s.currencyName===e?a+1:a),0)}updateAccount(e){this.editedAccount&&(this.editedAccount=r()(r()({},this.editedAccount),e))}actionsOnBoardingShown(){setTimeout((()=>{this.isActionsOnBoardingShown=!0,this.storage.set("isActionsOnBoardingShown",!0)}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}archiveAccount(e){this.archivingAccountId=e,this.inputs.openArchiveConfirm()}goAddNewAccount(){this.inputs.openSelectCurrency(),this.addNewAccount()}copyEditedAccount(e){this.editedAccount=r()({},e)}}(0,n.gn)([o.observable],AccountEditService.prototype,"editedAccount",void 0),(0,n.gn)([o.observable],AccountEditService.prototype,"accountArchiveAllow",void 0),(0,n.gn)([o.observable],AccountEditService.prototype,"isActionsOnBoardingShown",void 0),(0,n.gn)([o.computed],AccountEditService.prototype,"isSelectedDemo",null),(0,n.gn)([o.action],AccountEditService.prototype,"getAccountArchiveAllow",null),(0,n.gn)([o.action],AccountEditService.prototype,"createEditedAccount",null),(0,n.gn)([o.action],AccountEditService.prototype,"addNewAccount",null),(0,n.gn)([o.action],AccountEditService.prototype,"applyChanges",null),(0,n.gn)([o.action],AccountEditService.prototype,"updateAccount",null),(0,n.gn)([o.action],AccountEditService.prototype,"actionsOnBoardingShown",null),(0,n.gn)([o.action],AccountEditService.prototype,"copyEditedAccount",null)},37416:(e,a,s)=>{"use strict";s.d(a,{H:()=>c});var i=s(27378),r=s(17302),n=s(37488),o=s(87601),l=s(70770);const c=i.forwardRef(((e,a)=>{let s=e.icon,c=e.title,d=e.badge,u=e.active,m=e.badgeColor,p=e.onClick;const h=(0,n.useMediaQuery)({maxWidth:o.j$.BREAKPOINT_768});return i.createElement("div",{className:l.Z.host},i.createElement(r.zx,{checked:u,variant:"secondary",startIcon:s,size:h?"s":"m",fullWidth:h,horizontalAlign:h?"start":"center",dataTest:"asset-select-button",badge:d,badgeColor:m,ref:a,onClick:p},c))}));c.displayName="@plf/assets(components)(AssetButton)"},70770:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2m40mPndofAE"}},6794:(e,a,s)=>{"use strict";s.d(a,{g:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(77740);const c=e=>{let a=e.isFavorite,s=e.className,r=e.locked,c=e.isHighlight,d=e.onClick;return i.createElement(o.Xd,{className:n()("asset-button-favorite",r&&"asset-button-favorite_locked",a&&"asset-button-favorite_active",c&&"asset-button-favorite_highlight",s),onClick:d,"data-test":"asset-item-fav-button"},a?i.createElement(l.lk1,null):i.createElement(l.GK,null))};c.displayName="@plf/assets(components)(AssetButtonFavorite)"},20182:(e,a,s)=>{"use strict";s.d(a,{f:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(77740);const c=e=>{let a=e.className,s=e.locked,r=e.onClick;return i.createElement(o.Xd,{className:n()("asset-button-info",s&&"asset-button-info_locked",a),onClick:r,"data-test":"asset-item-info-button"},i.createElement(l.Gc9,null))};c.displayName="@plf/assets(components)(AssetButtonInfo)"},79729:(e,a,s)=>{"use strict";s.d(a,{B:()=>u});var i=s(27378),r=s(60042),n=s.n(r),o=s(77740),l=s(95029),c=s(16615);const d=e=>{let a=e.tooltip;return i.createElement(l.MZ,{disablePortal:!1,distance:4,content:i.createElement("div",{className:c.Z.tooltip},a),anchorClassName:c.Z.icon},i.createElement(o.T08,null))},u=e=>{let a=e.headerStart,s=e.headerEnd,r=e.headerStartTooltip,o=e.headerEndTooltip,l=e.className;return i.createElement("div",{className:n()(c.Z.host,l)},a&&i.createElement("div",{className:c.Z.column,"data-test":"asset-column-header-start"},i.createElement("span",{className:c.Z.text},a),r?i.createElement(d,{tooltip:r}):null),s&&i.createElement("div",{className:c.Z.column,"data-test":"asset-column-header-end"},i.createElement("span",{className:c.Z.text},s),o?i.createElement(d,{tooltip:o}):null))};u.displayName="@plf/assets(components)(AssetColumnsHeader)"},16615:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2SIQCQwC-kFN",column:"_2wgdyxG-_6lC",text:"_2CsG0DNkdxhJ",tooltip:"_36XUaWUrbXcE",icon:"_1PPP_W58OwEN",tooltipHost:"_1V4Zn-XaLQaP"}},2240:(e,a,s)=>{"use strict";s.d(a,{s:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(6794),l=s(20182);const c=i.forwardRef(((e,a)=>{let s=e.id,r=e.icon,c=e.title,d=e.value,u=e.selected,m=e.isFavorite,p=e.highlightFavorite,h=e.locked,v=e.onClick,g=e.toggleFavorite,_=e.onClickInfo,f=e.subtitle,E=e.invisible,S=void 0!==E&&E;const y=i.useCallback((e=>{_&&_(s),e.stopPropagation()}),[s,_]),b=i.useCallback((e=>{g&&g(s,m),e.stopPropagation()}),[s,g,m]),C=i.useCallback((()=>{v(s)}),[s,v]);return i.createElement("div",{className:n()("asset-item",u&&"asset-item_selected",h&&"asset-item_locked"),"data-test":"asset-item",onClick:C,ref:a},S?null:i.createElement(i.Fragment,null,i.createElement("span",{className:"asset-item__icon"},r),i.createElement("div",{className:"asset-item__title-block"},i.createElement("div",{className:"asset-item__title","data-test":"asset-item-title"},c),f?i.createElement("div",{className:"asset-item__subtitle","data-test":"asset-item-subtitle"},f):null),i.createElement("div",{className:"asset-item__value","data-test":"asset-item-value"},d),_?i.createElement(l.f,{className:"asset-item__button-info",onClick:y,locked:h}):null,g?i.createElement(o.g,{onClick:b,isFavorite:m,isHighlight:p,className:"asset-item__button-favorite",locked:h}):null))}));c.displayName="@plf/assets(components)(AssetItem)"},86534:(e,a,s)=>{"use strict";s.d(a,{R:()=>u});var i=s(2243),r=s.n(i),n=s(27378),o=s(60042),l=s.n(o),c=s(6794),d=s(20182);const u=n.forwardRef(((e,a)=>{let s=e.id,i=e.icon,o=e.title,u=e.value,m=e.subtitle,p=e.selected,h=e.onClick,v=e.locked,g=e.isFavorite,_=e.highlightFavorite,f=e.toggleFavorite,E=e.invisible,S=void 0!==E&&E,y=e.onClickInfo;const b=n.useState(!1),C=r()(b,1)[0],T=n.useCallback((()=>{h(s)}),[s,h]),A=n.useCallback((e=>{y&&y(s),e.stopPropagation()}),[s,y]),k=n.useCallback((e=>{f(s,g),e.stopPropagation()}),[s,f,g]);return n.createElement("div",{className:l()("asset-item-min",p&&"asset-item-min_selected",v&&"asset-item-min_locked"),onClick:T,ref:a},S?null:n.createElement(n.Fragment,null,n.createElement("span",{className:"asset-item-min__icon"},i),y?n.createElement(d.f,{className:l()("asset-item-min__button-info",C&&"asset-item-min__button-info_visible"),onClick:A,locked:v}):null,n.createElement(c.g,{onClick:k,isFavorite:g,isHighlight:_,className:l()("asset-item-min__button-favorite",C&&"asset-item-min__button-favorite_visible"),locked:v}),n.createElement("div",{className:l()("asset-item-min__text",C&&"asset-item-min__text_hidden")},n.createElement("div",{className:"asset-item-min__title"},o),m?n.createElement("div",{className:"asset-item-min__subtitle"},m):null),u&&n.createElement("div",{className:"asset-item-min__value","data-test":"asset-item-value"},u)))}));u.displayName="@plf/assets(components)(AssetItemMin)"},29586:(e,a,s)=>{"use strict";s.d(a,{g:()=>c});var i=s(27378),r=s(77740),n=s(18985),o=s(99318),l=s(87741);const c=e=>{let a=e.timeOpen,s=e.hour12,c=void 0!==s&&s;const d=new Date(1e3*a);return i.createElement("span",{className:l.Z.host},i.createElement(r.bpu,{className:l.Z.watch}),i.createElement("span",{className:l.Z.text},i.createElement(n.Ji,{value:d,hour12:c,month:"short",day:"numeric"})," ",i.createElement(o.B,{value:d,hour12:c})))}},87741:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2EZ81DSTApb1",watch:"_3wRf8y38vVvH",text:"_2xlsPPLk-HOt"}},38982:(e,a,s)=>{"use strict";s.d(a,{m:()=>d});var i=s(27378),r=s(60042),n=s.n(r),o=s(8141),l=s(17302);const c=i.forwardRef(((e,a)=>{let s=e.children,r=e.className;return i.createElement(l.Xs,{ref:a,className:n()("asset-menu__list-scroll",r)},s)})),d=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("asset-menu",s),dir:(0,o.L)()},a)};d.Header=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("asset-menu__header",s)},a)},d.HeaderSearch=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("asset-menu__header-search",s)},a)},d.HeaderTags=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("asset-menu__header-tags",s)},a)},d.List=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("asset-menu__list",s)},a)},d.ListScroll=c,d.IndentSmall=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:n()("asset-menu__indent-small",s)},a)}},73939:(e,a,s)=>{"use strict";s.d(a,{w:()=>l});var i=s(27378),r=s(82844),n=s(77740),o=s(65764);const l=()=>i.createElement(o.L,{icon:i.createElement(n.GK,null),text:i.createElement(r._,{id:"assets_list_fav_empty",defaultMessage:"There is nothing here yet. Add assets to Favorites to have quick access to them."})});l.displayName="@plf/assets(components)(AssetNoFavoritesStub)"},19146:(e,a,s)=>{"use strict";s.d(a,{l:()=>l});var i=s(27378),r=s(77740),n=s(82844),o=s(65764);const l=()=>i.createElement(o.L,{icon:i.createElement(r.jVj,null),text:i.createElement(n._,{id:"fx_asset_list_empty_category",defaultMessage:"There are no matching assets now. Choose another category"})});l.displayName="@plf/assets(components)(AssetNoGroupItemsStub)"},65764:(e,a,s)=>{"use strict";s.d(a,{L:()=>n});var i=s(27378),r=s(63334);const n=e=>{let a=e.icon,s=e.text;return i.createElement("div",{className:r.Z.host},i.createElement("div",{className:r.Z.icon},a),i.createElement("div",{className:r.Z.text},s))};n.displayName="@plf/assets(components)(AssetNoItemsStub)"},63334:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1pEN3O7r7CL8",text:"_2Vj1Ib2fZ8Tc",icon:"_2wuExLd8nAtR"}},62710:(e,a,s)=>{"use strict";s.d(a,{u:()=>l});var i=s(27378),r=s(82844),n=s(77740),o=s(65764);const l=()=>i.createElement(o.L,{icon:i.createElement(n.jVj,null),text:i.createElement(r._,{id:"asset_not_found_stub",defaultMessage:"There are no matching assets. Try a different keyword."})});l.displayName="@plf/assets(components)(AssetNotFoundStub)"},71100:(e,a,s)=>{"use strict";s.d(a,{d:()=>p});var i=s(2243),r=s.n(i),n=s(27378),o=s(23735),l=s(95029),c=s(65292),d=s(12225),u=s(39111),m=s(85685);const p=e=>{let a=e.items,s=e.selectSorting,i=e.selectedSorting;const p=n.useState(!1),h=r()(p,2),v=h[0],g=h[1],_=n.useRef(null),f=n.useCallback((()=>{g(!v),(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"assets_menu/sort",eventLabel:"click"})}),[g,v]),E=n.useCallback((()=>{g(!1)}),[g]),S=n.useCallback((e=>{s(e),g(!1)}),[s]);return(0,l.O3)(_,E),n.createElement(n.Fragment,null,a.length>0?n.createElement("div",{className:m.Z.host,ref:_},n.createElement(c.J,{onClick:f,sortDirection:i.dir}),v?n.createElement(d.i,null,n.createElement(u.Y,{items:a,selectedSorting:i,select:S})):null):null)};p.displayName="@plf/assets(components)(AssetSorting)"},85685:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2EI1PswJsaAz"}},12225:(e,a,s)=>{"use strict";s.d(a,{i:()=>n});var i=s(27378),r=s(30934);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.host},a)};n.displayName="@plf/assets(components)(AssetSortingDropDown)"},30934:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"qsB3oARC-MdS"}},39111:(e,a,s)=>{"use strict";s.d(a,{Y:()=>u});var i=s(27378),r=s(60042),n=s.n(r),o=s(77740),l=s(82844),c=s(59885),d=s(91299);const u=e=>{let a=e.items,s=e.selectedSorting,r=e.select;const u=i.useCallback((e=>()=>r(e)),[r]);return i.createElement("div",null,i.createElement("div",{className:d.Z.title},i.createElement(l._,{id:"assets_list_sort_by",defaultMessage:"Sort by"})),i.createElement("ul",null,a.map((e=>{var a;const r=null!==(a=c.A[e.id])&&void 0!==a?a:()=>i.createElement(i.Fragment,null,e.id),l=e.id===s.id;return i.createElement("li",{className:n()(d.Z.item,l&&d.Z.selected),key:e.id,"data-test":"assets-list-sort-by-".concat(e.id),onClick:u(e)},i.createElement("span",null,i.createElement(r,null)),l&&i.createElement(o.NOm,{"data-test":"assets-list-sort-selected",className:d.Z.icon}))}))))};u.displayName="@plf/assets(components)(AssetSortingList)"},91299:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={title:"_1WBuaDde-ypz",item:"_1hg_OwSrdotx",selected:"_3TkEM7sXwg7p",icon:"PZODg5LfE0Ka"}},59885:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var i=s(27378),r=s(82844);const n={asset_title_asc:()=>i.createElement(i.Fragment,null,i.createElement(r._,{id:"assets_list_sort_name",defaultMessage:"Name"})," (A-Z)"),asset_title_desc:()=>i.createElement(i.Fragment,null,i.createElement(r._,{id:"assets_list_sort_name",defaultMessage:"Name"})," (Z-A)"),asset_changes_asc:()=>i.createElement(i.Fragment,null,i.createElement(r._,{defaultMessage:"24 h changes",id:"assets_list_sort_ftt_daily_changes"})," ",i.createElement(r._,{defaultMessage:"(from low to high)",id:"assets_list_sort_low_to_high"})),asset_changes_desc:()=>i.createElement(i.Fragment,null,i.createElement(r._,{defaultMessage:"24 h changes",id:"assets_list_sort_ftt_daily_changes"})," ",i.createElement(r._,{defaultMessage:"(from high to low)",id:"assets_list_sort_high_to_low"})),asset_winperc_desc:()=>i.createElement(i.Fragment,null,i.createElement(r._,{id:"assets_list_header_profit",defaultMessage:"Profitability"})," ",i.createElement(r._,{defaultMessage:"(from high to low)",id:"assets_list_sort_high_to_low"})),asset_rate_asc:()=>i.createElement(i.Fragment,null,i.createElement(r._,{defaultMessage:"Mid Price",id:"assets_list_sort_spt_mid"})," ",i.createElement(r._,{defaultMessage:"(from low to high)",id:"assets_list_sort_low_to_high"})),asset_rate_desc:()=>i.createElement(i.Fragment,null,i.createElement(r._,{defaultMessage:"Mid Price",id:"assets_list_sort_spt_mid"})," ",i.createElement(r._,{defaultMessage:"(from high to low)",id:"assets_list_sort_high_to_low"}))}},22812:(e,a,s)=>{"use strict";s.d(a,{I:()=>S});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(84829),m=s(77740),p=s(17302),h=s(34133),v=s(99332),g=s(82844),_=s(45797),f=s(95029);const E=l.forwardRef(((e,a)=>{let s=e.name,i=e.value,r=e.type,n=e.selected,o=e.onClick;const c=l.useCallback((()=>{o(i)}),[i,o]);return l.createElement("div",{ref:a,className:d()("asset-tag-item",n&&"asset-tag-item_selected"),onClick:c,"data-test":"asset-tags-item"},((e,a)=>"favorites"===e?l.createElement(g._,{id:"assets_list_sort_fav",defaultMessage:"Favorites"}):"all"===e?l.createElement(g._,{id:"assets_list_sort_all",defaultMessage:"All"}):a)(r,s))}));function S(e){let a=e.items,s=e.onClick,i=e.selectedTag;const n=l.useState(0),c=o()(n,2),d=c[0],g=c[1],S=l.useState(0),y=o()(S,2),b=y[0],C=y[1],T=l.useState({container:0,content:0}),A=o()(T,2),k=A[0],w=A[1],N=(0,h.N)(_.NW.localeSrc),R=N?-1:1,I=l.useRef(null),D=l.useRef(null),O=l.useRef(null),L=l.useCallback((()=>{const e=D.current;e&&e.scrollTo({left:(Math.abs(d)+k.container-100)*R,behavior:"smooth"})}),[k,d,R]),M=l.useCallback((()=>{const e=D.current;e&&e.scrollTo({left:(Math.abs(d)-k.container)*R,behavior:"smooth"})}),[k,d,R]);l.useEffect((()=>{const e=D.current,a=O.current;let s=0;if(e&&a){g((0,v.T)(e,N?"rtl":"ltr")||0);const i=e.getBoundingClientRect().width,r=a.getBoundingClientRect().width;k.container!==i||k.content!==r?w({container:i,content:r}):b<3&&k.content===r&&(s=window.setTimeout((()=>{C(b+1)}),50))}return()=>{clearTimeout(s)}}),[k,b,N]),l.useEffect((()=>{const e=D.current,a=(0,u.Z)((()=>{e&&g((0,v.T)(e,N?"rtl":"ltr")||0)}),250);if(e)return e.addEventListener("scroll",a),()=>{e.removeEventListener("scroll",a)}}),[N]);const P=l.useCallback((()=>{C(b+1)}),[C,b]);l.useEffect((()=>(window.addEventListener("orientationchange",P),()=>{window.removeEventListener("orientationchange",P)})),[]),(0,f.Dp)(!1,I,D,O,i,16,12,N);const x=N?Math.abs(d)>2:k.container+Math.abs(d)+2<Math.floor(k.content),F=N?k.container+Math.abs(d)+2<Math.floor(k.content):Math.abs(d)>2;return l.createElement("div",{className:"asset-tags"},x?l.createElement(p.Xd,{className:"asset-tags__scroll-button asset-tags__scroll-button_next",onClick:L,"data-test":"asset-tags-scroll-next"},l.createElement(m.Ec8,{className:"asset-tags__scroll-button-icon asset-tags__scroll-button-icon-next"})):null,F?l.createElement(p.Xd,{className:"asset-tags__scroll-button asset-tags__scroll-button_back",onClick:M,"data-test":"asset-tags-scroll-prev"},l.createElement(m.D6v,{className:"asset-tags__scroll-button-icon asset-tags__scroll-button-icon-prev"})):null,l.createElement("div",{className:"asset-tags__container",ref:D},l.createElement("div",{className:"asset-tags__content",ref:O},a.map((e=>l.createElement(E,r()({key:e.value||0,ref:e.value===i?I:null,onClick:s,selected:e.value===i},e)))))))}E.displayName="@plf/assets(components)(AssetTagItem)",S.displayName="@plf/assets(components)(AssetTags)"},82767:(e,a,s)=>{"use strict";s.d(a,{h:()=>o});var i=s(27378),r=s(60042),n=s.n(r);const o=e=>{let a=e.className,s=e.value,r=e.isHighlight;return i.createElement("span",{className:n()("highlight-color",r&&"highlight-color_highlighted",a)},s)};o.displayName="@plf/assets(components)(HighlightColor)"},94091:(e,a,s)=>{"use strict";s.d(a,{L:()=>d});var i=s(27378),r=s(60042),n=s.n(r),o=s(2948),l=s(17302),c=s(77740);const d=e=>{let a=e.value,s=e.minimized,r=e.onChange;const d=(0,o.Z)(),u=i.useCallback((e=>{r(e.target.value)}),[r]),m=i.useCallback((()=>{r("")}),[r]),p=i.useMemo((()=>a&&!s?i.createElement(l.Xd,{onClick:m,"data-test":"asset-search-field-close"},i.createElement(c.bMz,{className:n()("asset-search__icon",a&&"asset-search__icon_filled")})):null),[a,s,m]);return i.createElement(l.nv,{placeholder:d.formatMessage({id:"search",defaultMessage:"Search"}),type:"text",size:"xsmall",className:"asset-search",name:"asset-search",value:a,"data-test":"asset-search-field",startIcon:i.createElement(c.jVj,{className:"asset-search__icon"}),endIcon:p,onChange:u})};d.displayName="@plf/assets(components)(SearchTextField)"},65292:(e,a,s)=>{"use strict";s.d(a,{J:()=>l});var i=s(27378),r=s(17302),n=s(77740),o=s(20986);const l=e=>{let a=e.onClick,s=e.sortDirection;return i.createElement(r.Ei,{onClick:a,variant:"secondary",size:"s",dataTest:"assets-list-sort-button",icon:s===o.B8.ASC?i.createElement(n.FOu,null):i.createElement(n.VoR,null)})};l.displayName="@plf/assets(components)(SortingButton)"},76186:(e,a,s)=>{"use strict";s.d(a,{u:()=>n});var i=s(27378),r=s(95029);const n=e=>{let a=e.className,s=e.value,n=e.isSign,o=e.sufix,l=e.dir,c=void 0===l?"ltr":l;const d=void 0!==n,u="up"===(s<=0?"down":"up")?"+":"";return i.createElement(r.oI,{value:s},i.createElement("span",{dir:c,className:a},d?u:null,s,o||""))};n.displayName="@plf/assets(components)(UpDownColor)"},25123:(e,a,s)=>{"use strict";s.d(a,{By:()=>l.B,Hk:()=>u.H,Id:()=>c.I,LW:()=>d.L,Rm:()=>i.R,du:()=>g.d,gU:()=>_.g,hE:()=>o.h,lq:()=>h.l,mc:()=>v.m,si:()=>r.s,u:()=>m.u,uJ:()=>n.u,ww:()=>p.w});s(52769);var i=s(86534),r=s(2240),n=s(76186),o=s(82767),l=s(79729),c=s(22812),d=s(94091),u=s(37416),m=(s(65764),s(62710)),p=s(73939),h=s(19146),v=s(38982),g=(s(65292),s(71100)),_=(s(12225),s(39111),s(29586))},29324:(e,a,s)=>{"use strict";s.d(a,{v:()=>v});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(17302),m=s(8141),p=s(63666);const h=["active","draggingYRef","y","close","tabs","selected","onSelect","width","height","springConfig","className","hostRef","titleAlign","titleSlot","isDraggable"];function v(e){let a=e.active,s=e.draggingYRef,i=e.y,n=e.close,l=e.tabs,v=e.selected,g=e.onSelect,_=e.width,f=e.height,E=e.springConfig,S=e.className,y=e.hostRef,b=e.titleAlign,C=void 0===b?"center":b,T=e.titleSlot,A=void 0===T?null:T,k=e.isDraggable,w=void 0===k||k,N=o()(e,h);const R=(0,m.L)(),I={active:a,draggingYRef:s,y:i,close:n,height:f-(A?104:64),width:_};return d.createElement(d.Fragment,null,d.createElement(u.E7,r()({className:c()(p.Z.host,S),tabs:l,selected:v,onSelect:g,immediate:()=>i.get()>5,active:a,springConfig:E,ref:y,dir:R},N),d.createElement(u.es,{className:p.Z.header},A,d.createElement(u.rr,null,((e,a,s,i)=>{let r=s.selected;return d.createElement(u.GD,{key:a,index:i,disabled:e.disabled,ref:e.titleRef,className:c()(p.Z.button,{[p.Z.button_thin]:"start"===C})},d.createElement(u.Uq,{title:e.title,aSelected:r,hasValue:void 0!==e.value,textAlign:C}),void 0!==e.value&&d.createElement(u.jj,{value:e.value,aSelected:r}))})),d.createElement(u.Qv,null)),d.createElement(u.jm,{isScale:!0,disabled:!w},((e,a,s)=>{let i=s.selected,r=s.scale;return d.createElement(u.ZH,{key:a,aSelected:i,aScale:r,className:p.Z.panel,style:{height:f}},e.content(I))}))))}},63666:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={header:"_3-v7GH_c-wr6",button:"_1SeDpviPIuxE",button_thin:"_2_jaa0cYSNJ-",panel:"_1qQjE8pTUJ1E"}},120:(e,a,s)=>{"use strict";s.d(a,{A:()=>S});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(44495),m=s(37488),p=s(40285),h=s(17302),v=s(95029),g=s(13669),_=s(58892),f=s(5024);const E=["y","height","active","value","onChange","buttonHeight","presets","descriptionTop","descriptionBottom","springConfig","className","inputConfig","inputProps","textFieldProps","inputSize","acceptButton","hostRef"];function S(e){let a=e.y,s=e.height,i=e.active,n=void 0===i||i,l=e.value,S=e.onChange,y=e.buttonHeight,b=void 0===y?49:y,C=e.presets,T=void 0===C?[]:C,A=e.descriptionTop,k=e.descriptionBottom,w=e.springConfig,N=(void 0===w&&u.config.stiff,e.className),R=e.inputConfig,I=e.inputProps,D=e.textFieldProps,O=e.inputSize,L=void 0===O?"default":O,M=e.acceptButton,P=e.hostRef,x=o()(e,E);const F=(0,d.useRef)(null),B=(0,d.useRef)(!1),Z=(0,d.useRef)(null),U=(0,f.c)(),H=4*b,G=T.length?40:0,V=(0,m.useMediaQuery)({orientation:"portrait"}),W=(0,d.useCallback)((e=>{let a=parseFloat(e);Number.isNaN(a)&&(a=0),S(a)}),[S]),j=(0,d.useCallback)((()=>{n&&(Z.current&&clearTimeout(Z.current),Z.current=window.setTimeout((()=>{var e;n&&(null==F||null===(e=F.current)||void 0===e||e.focus())})))}),[n,F]),z=(0,d.useCallback)((e=>{S(Number(e))}),[S]),q=(0,d.useCallback)((e=>{"Backspace"===e&&(U(30),S(0))}),[S,U]),K=(0,d.useMemo)((()=>M&&d.createElement(u.a.div,{className:"sheet-amount__accept-button",style:(0,g.v)({y:a,active:n,height:s,scaleMultiplier:V?.5:1,translateMultiplier:.9})},M)),[M,n,s,V,a]);return(0,d.useEffect)((()=>{let e;return n?e=setTimeout((()=>{var a;if(e=void 0,null===(a=F.current)||void 0===a||a.focus(),B.current)return;if(B.current=n,!F.current||!F.current.lastElementChild||F.current.selectionStart!==F.current.selectionEnd)return;const s=F.current.lastElementChild;F.current.selectionStart=String(s.value).length,F.current.selectionEnd=String(s.value).length}),100):B.current=n,()=>{e&&clearTimeout(e)}}),[n,F]),d.createElement("div",r()({className:c()("sheet-amount",N,{"sheet-amount_active":n}),ref:P},x),d.createElement("div",{className:c()("sheet-amount-value",M&&"sheet-amount-value_with-accept"),style:{height:s-(V?H+G:0)-(V&&M?b:0)}},A?d.createElement(u.a.div,{className:"sheet-amount-value__description sheet-amount-value__description_top",style:(0,g.v)({y:a,active:n,height:s,translateMultiplier:.25})},A):null,d.createElement(u.a.div,{className:"sheet-amount-value__inner",style:(0,g.v)({y:a,active:n,height:s,scaleMultiplier:.2,translateMultiplier:.25})},d.createElement(v.KG,{allowedEmpty:!0,config:r()({style:"decimal",maximumFractionDigits:2,minimumFractionDigits:0,maximumIntegerDigits:p.aK.AMOUNT},R),value:0===l?"":l,onChange:W},(e=>{let a=e.value,s=e.onChange;return d.createElement(h.Yj,r()(r()({},D),{},{value:a,className:"sheet-amount-value__input-container",classNameContent:"sheet-amount-value__input-content",classNameInputWrapper:"sheet-amount-value__input-wrapper",classNameInput:c()("sheet-amount-value__input","large"===L&&"sheet-amount-value__input_size-large"),inputProps:r()(r()({},I),{},{classNameScroll:c()("sheet-amount-value__input-scroll",null==I?void 0:I.classNameScroll),classNameCaret:c()("sheet-amount-value__input-caret",null==I?void 0:I.classNameCaret),classNameCharsWrapper:c()("sheet-amount-value__input-chars-wrapper",null==I?void 0:I.classNameCharsWrapper),classNameChar:c()("sheet-amount-value__input-char",null==I?void 0:I.classNameChar),placeholder:(null==I?void 0:I.placeholder)||"0"}),hideMeta:!0,onChange:s,onBlur:j,inputRef:F}))}))),k&&d.createElement(u.a.div,{className:"sheet-amount-value__description sheet-amount-value__description_bottom",style:(0,g.v)({y:a,active:n,height:s,translateMultiplier:.5})},k),!V&&K),d.createElement(u.a.div,{className:"sheet-amount-keyboard__container",style:(0,g.v)({y:a,active:n,height:s,scaleMultiplier:V?.5:1,translateMultiplier:.8})},T.length?d.createElement(h.N1,{buttons:T.map((e=>({value:String(e),label:e}))),onClick:z,className:"sheet-amount-keyboard__presets",classNameButton:"sheet-amount-keyboard__preset"}):null,d.createElement(h.N1,{buttons:_.b,onLongPress:q,classNameButton:"sheet-amount-keyboard__button"})),V&&K)}},54634:(e,a,s)=>{"use strict";s.d(a,{d:()=>n});var i=s(27378),r=s(44495);function n(e){let a=e.error,s=e.springConfig;const n=(0,r.useTransition)(a?[a]:[],{keys:e=>e.code,from:{opacity:0,transform:"translateY(100%)"},enter:{opacity:1,transform:"translateY(0)"},leave:{opacity:0,transform:"translateY(0)"},config:s});return i.createElement("div",{className:"sheet-amount__error"},n(((e,a)=>a&&i.createElement(r.a.div,{style:e,className:"sheet-amount__error-item"},a.text))))}},42053:(e,a,s)=>{"use strict";s.d(a,{V:()=>m});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(95029),d=s(120);s(44495);const u=["currency","inputProps"];function m(e){let a=e.currency,s=e.inputProps,i=o()(e,u);const n=(0,c.By)(a),m=(0,c.NG)(a);return l.createElement(d.A,r()(r()({},i),{},{inputProps:r()(r()({},s),{},{prefix:m===c.Fx.BEFORE?l.createElement(l.Fragment,null,null==s?void 0:s.prefix,n):null==s?void 0:s.prefix,suffix:m===c.Fx.AFTER?l.createElement(l.Fragment,null," ",n,null==s?void 0:s.suffix):null==s?void 0:s.suffix})}))}},68363:(e,a,s)=>{"use strict";s.d(a,{U:()=>g});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(37488),m=s(17302);const p=["active","draggingYRef","y","close","tabs","selected","onSelect","width","height","springConfig","className","classNameHeader","hostRef"],h=5,v=3;function g(e){let a=e.active,s=e.draggingYRef,i=e.y,n=e.close,l=e.tabs,g=e.selected,_=e.onSelect,f=e.width,E=e.height,S=e.springConfig,y=e.className,b=e.classNameHeader,C=e.hostRef,T=o()(e,p);const A=(0,u.useMediaQuery)({orientation:"portrait"}),k={active:a,draggingYRef:s,y:i,close:n,height:E-64,width:f,visibleCount:A?h:v,itemHeight:48};return d.createElement(m.E7,r()({className:c()("sheet-duration-tabulator",y),tabs:l,selected:g,onSelect:_,immediate:()=>i.get()>5,direction:A?"x":"y",active:a,springConfig:S,ref:C},T),d.createElement(m.es,{className:c()("sheet-duration-tabulator__header",b)},d.createElement(m.rr,null,((e,a,s,i)=>{let r=s.selected;return d.createElement(m.GD,{key:a,index:i,disabled:e.disabled,className:"sheet-duration-tabulator__button"},d.createElement(m.Uq,{title:e.title,aSelected:r,selectedClassName:"sheet-duration-tabulator__tab-title-inner_selected"}))})),d.createElement(m.Qv,{className:"sheet-duration-tabulator__selection",lineHeight:"100%"})),d.createElement(m.Vf,null,((e,a,s)=>{let i=s.selected;return d.createElement(m.ZH,{key:a,aSelected:i,className:"sheet-duration-tabulator__panel",style:{height:A?E:""}},e.content(k))})))}},88677:(e,a,s)=>{"use strict";Object.freeze({BINARY:"binary",SECONDS:"seconds",TURBO:"turbo"})},14414:(e,a,s)=>{"use strict";s.d(a,{m:()=>h});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(14936),c=s.n(l),d=s(27378),u=s(50439),m=s(17302);const p=["value","min","max","onSelect","items","itemHeight","visibleCount","active","className","transSec","virtualize","springConfig"];function h(e){let a=e.value,s=e.min,i=e.max,n=e.onSelect,l=e.items,h=e.itemHeight,v=void 0===h?48:h,g=e.visibleCount,_=void 0===g?5:g,f=e.active,E=void 0===f||f,S=e.className,y=e.transSec,b=e.virtualize,C=void 0===b||b,T=e.springConfig,A=c()(e,p);const k=d.useState(0),w=o()(k,2),N=w[0],R=w[1],I=d.useCallback((e=>{const r=Number(e.value),o=l.findIndex((e=>e===r));R(o),r!==a&&n((0,u.Z)(r,s,i))}),[a,s,i,l,n]);return d.useEffect((()=>{const e=l.findIndex((e=>e===a));R(e)}),[a,l]),d.createElement(m.yU,r()({itemHeight:v,visibleCount:_,className:S},A),d.createElement(m.aj,{height:v*_,items:l.map((e=>({value:"".concat(e),label:"".concat(e," ").concat(y)}))),selectedIndex:N,visibleCount:_,onSelect:I,active:E,virtualize:C,springConfig:T}))}},39021:(e,a,s)=>{"use strict";s.d(a,{y:()=>g});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(44495),d=s(18985),u=s(45797),m=s(17302),p=s(13669);s(58892);const h=["y","description"],v=(0,d.vU)({hour_short:{id:"hour_short",defaultMessage:"h"},min:{id:"min",defaultMessage:"min"}});function g(e){let a=e.y,s=e.description,i=o()(e,h);const n=i.active,d=void 0===n||n,g=i.height;return l.createElement(c.animated.div,{className:"sheet-duration-picker__content",style:(0,p.v)({y:a,active:d,height:g,scaleMultiplier:1})},l.createElement("div",{className:"sheet-duration-picker__description"},s),l.createElement(m.yU.Duration,r()(r()({},i),{},{transHour:u.NW.formatMessage(v.hour_short),transMin:u.NW.formatMessage(v.min)})))}},53546:(e,a,s)=>{"use strict";s.d(a,{K:()=>v});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(44495),d=s(18985),u=s(45797),m=s(14414);const p=["y","description"],h=(0,d.vU)({sec:{id:"sec",defaultMessage:"sec"}});function v(e){let a=e.y,s=e.description,i=o()(e,p);const n=i.active,d=void 0===n||n;return l.createElement(c.animated.div,{className:"sheet-duration-picker__content",style:{transform:a?a.to((e=>d&&e<0?"scaleY(".concat(1+-e/i.height,")"):"scaleY(1)")):void 0,willChange:a?a.to((e=>d&&e<0?"transform":"")):void 0}},l.createElement("div",{className:"sheet-duration-picker__description"},s),l.createElement(m.m,r()({transSec:u.NW.formatMessage(h.sec)},i)))}},68945:(e,a,s)=>{"use strict";s.d(a,{H:()=>o});var i=s(27378),r=s(82844),n=s(95029);const o=e=>{let a=e.duration;return i.createElement("div",{className:"sheet-fast-duration-screen"},i.createElement("div",null,i.createElement(r._,{id:"fast_deal_duration_description",defaultMessage:"<tag>This asset is only available for fixed-duration trading. The trade will close after</tag> <value>5 sec</value>",values:{tag:e=>i.createElement("div",{className:"sheet-fast-duration-screen__description"},e),value:()=>i.createElement("div",{className:"sheet-fast-duration-screen__value"},(0,n.yC)(a,"s"))}})))}},2018:(e,a,s)=>{"use strict";s.d(a,{n:()=>y});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(44495),m=s(37488),p=s(17302),h=s(40285),v=s(82844),g=s(95029),_=s(13669),f=s(58892),E=s(5024);const S=["y","height","active","currency","stopLoss","stopOut","isTrailingStop","takeProfit","getLimitsRange","getLimitsDiapasonFormatted","validate","trailingLevel","locale","onChange","limitTypes","descriptionTop","acceptButton","convert","masked","buttonHeight","className","hostRef"];function y(e){let a=e.y,s=e.height,i=e.active,n=void 0===i||i,l=e.currency,y=e.stopLoss,b=void 0===y?{type:h.$i.AMOUNT,value:void 0,trailing:!1}:y,C=e.stopOut,T=e.isTrailingStop,A=void 0!==T&&T,k=e.takeProfit,w=void 0===k?{type:h.$i.AMOUNT,value:void 0,trailing:!1}:k,N=e.getLimitsRange,R=e.getLimitsDiapasonFormatted,I=e.validate,D=e.trailingLevel,O=e.locale,L=e.onChange,M=e.limitTypes,P=e.descriptionTop,x=e.acceptButton,F=e.convert,B=e.masked,Z=e.buttonHeight,U=void 0===Z?49:Z,H=e.className,G=e.hostRef,V=o()(e,S);const W=(0,d.useRef)(!1),j=(0,d.useRef)(h.FM.STOP_LOSS),z=(0,d.useRef)(null),q={[h.FM.STOP_LOSS]:(0,d.useRef)(null),[h.FM.TAKE_PROFIT]:(0,d.useRef)(null)},K=(0,E.c)(),Y=4*U,X=M.length>1,J=(0,m.useMediaQuery)({orientation:"portrait"}),Q=(0,d.useCallback)((e=>{n&&(z.current&&clearTimeout(z.current),z.current=setTimeout((()=>{var a;n&&j.current===e&&(null===(a=q[j.current].current)||void 0===a||a.focus())})))}),[n,q]),$=(0,d.useCallback)((e=>{n&&(j.current=e)}),[n]),ee=(0,d.useCallback)((e=>{const a=e&&void 0===b.value?String(C):b.value;L(h.FM.STOP_LOSS,r()(r()({},b),{},{value:a,trailing:e}))}),[L,b,C]),te=(0,d.useCallback)(((e,a)=>{const s=e===h.FM.STOP_LOSS?b:w;L(e,r()(r()({},s),{},{value:a}))}),[L,b,w]),ae=(0,d.useCallback)(((e,a)=>{const s=M.indexOf(a)===M.length-1?0:M.indexOf(a)+1,i=M[s],n="takeProfit"===e?w:b,o=(0,g.s_)(n);if(o&&o.value){const s=(0,g.p8)(i),n=r()(r()({},o),{},{type:i,value:(0,g.lu)(F(a,i,o.value,e),s)});L(e,(0,g.FM)(n.type,n))}else L(e,(0,g.FM)(i))}),[L,b,w,M,g.p8,F]),se=(0,d.useCallback)((e=>{"Backspace"===e&&(K(30),te(j.current,void 0))}),[te,K]),ie=(0,d.useMemo)((()=>x&&d.createElement(u.animated.div,{className:"sheet-amount__accept-button",style:(0,_.v)({y:a,active:n,height:s,scaleMultiplier:J?.5:1,translateMultiplier:.9})},x)),[x,n,s,J,a]);return(0,d.useEffect)((()=>{let e;return n?e=setTimeout((()=>{var a;if(e=null,null===(a=q[j.current].current)||void 0===a||a.focus(),W.current)return;W.current=n;const s=q[j.current].current;if(!s||!s.lastElementChild||s.selectionStart!==s.selectionEnd)return;const i=s.lastElementChild;s.selectionStart=String(i.value).length,s.selectionEnd=String(i.value).length}),100):W.current=n,()=>{e&&clearTimeout(e)}}),[n,q]),(0,d.useEffect)((()=>()=>{z.current&&clearTimeout(z.current)}),[z]),d.createElement("div",r()({className:c()("sheet-limits",H,{"sheet-limits_active":n}),ref:G},V),d.createElement("div",{className:c()("sheet-limits-value",x&&"sheet-limits-value_with-accept"),style:{height:s-(J?Y:0)-(J&&x?U:0)}},P&&d.createElement(u.animated.div,{className:"sheet-limits-value__description sheet-limits-value__description_top",style:(0,_.v)({y:a,active:n,height:s,translateMultiplier:.25})},P),A?d.createElement(u.animated.div,{className:"sheet-limits-value__inner sheet-limits-value__inner_switcher",style:(0,_.v)({y:a,active:n,height:s,scaleMultiplier:.2,translateMultiplier:.25})},d.createElement(g.SX,{name:"sheet_limits_trailing-switcher",precision:(0,g.p8)("amount"),stopLoss:b,currency:l,getTrailingLevel:()=>D,onChange:ee})):null,d.createElement(u.animated.div,{className:"sheet-limits-value__inner",style:(0,_.v)({y:a,active:n,height:s,scaleMultiplier:.2,translateMultiplier:.25})},d.createElement("div",{className:"sheet-limits-value__input"},d.createElement(g.O6,{isMeta:!0,mask:B?"-".concat(g.wX):void 0,label:d.createElement(v._,{id:"fx_loss_limit",defaultMessage:"Stop Loss"}),precision:(0,g.p8)(b.type),currency:l,value:b.value,limitType:b.type,limitName:h.FM.STOP_LOSS,limitsRange:null==N?void 0:N(),limitDiapason:R(h.FM.STOP_LOSS,b.type),locale:O,autoFocus:!1,trailingStop:b.trailing,textFieldComponent:p.Yj,inputRef:q[h.FM.STOP_LOSS],inputProps:{classNameChar:"sheet-limits-value__input-char",classNameCharsWrapper:"sheet-limits-value__input-chars-wrapper"},onBlur:()=>{Q(h.FM.STOP_LOSS)},onFocus:()=>{$(h.FM.STOP_LOSS)},validate:e=>I(h.FM.STOP_LOSS,e),onChange:e=>{te(h.FM.STOP_LOSS,e)}})),d.createElement("div",{className:c()("sheet-limits-value__input",X&&"sheet-limits-value__input_with-button")},d.createElement(g.O6,{isMeta:!0,label:d.createElement(v._,{id:"fx_takeProfit",defaultMessage:"Take Profit"}),precision:(0,g.p8)(w.type),currency:l,value:w.value,limitType:w.type,limitName:h.FM.TAKE_PROFIT,limitsRange:null==N?void 0:N(),limitDiapason:R(h.FM.TAKE_PROFIT,w.type),locale:O,textFieldComponent:p.Yj,inputRef:q[h.FM.TAKE_PROFIT],inputProps:{classNameChar:"sheet-limits-value__input-char",classNameCharsWrapper:"sheet-limits-value__input-chars-wrapper"},onBlur:()=>{Q(h.FM.TAKE_PROFIT)},onFocus:()=>{$(h.FM.TAKE_PROFIT)},validate:e=>I(h.FM.TAKE_PROFIT,e),onChange:e=>{te(h.FM.TAKE_PROFIT,e)},onSwitch:X?e=>{ae("stopLoss",e),ae("takeProfit",e)}:void 0}))),!J&&ie),d.createElement(u.animated.div,{className:"sheet-limits-keyboard__container",style:(0,_.v)({y:a,active:n,height:s,scaleMultiplier:J?.5:1,translateMultiplier:.8})},d.createElement(p.N1,{buttons:f.b,onLongPress:se,classNameButton:"sheet-limits-keyboard__button"})),J&&ie)}},33550:(e,a,s)=>{"use strict";s.d(a,{c:()=>E});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(44495),m=s(37488),p=s(13669),h=(s(58892),s(82844)),v=s(17302);const g=["y","multiplier","multiplierList","onSelect","label","className","hostRef","dataTest"],_=5,f=3;function E(e){let a=e.y,s=e.multiplier,i=e.multiplierList,n=e.onSelect,l=e.label,E=e.className,S=e.hostRef,y=e.dataTest,b=o()(e,g);const C=b.active,T=void 0===C||C,A=b.height,k=(0,m.useMediaQuery)({orientation:"portrait"}),w=i.map(((e,a)=>({value:String(e),label:"x".concat(e).concat(a===i.length-1?" (max)":"")})));return d.createElement(d.Fragment,null,d.createElement("div",{className:c()("sheet-multiplier__description",E),ref:S,"data-test":y},d.createElement(h._,{id:"fx_tips_multiplier",defaultMessage:"It multiplies your profit from the trade"})),d.createElement(u.animated.div,{className:"sheet-multiplier__content",style:(0,p.v)({y:a,active:T,height:A,scaleMultiplier:1})},d.createElement(v.yU.Select,r()({options:w,selected:String(s),onSelect:e=>{n(Number(e.value))},visibleCount:k?_:f,itemHeight:48},b)),l))}},74425:(e,a,s)=>{"use strict";s.d(a,{q:()=>S});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(44495),m=s(37488),p=s(17302),h=s(95029),v=s(13669),g=s(58892),_=s(5024),f=s(93591);const E=["y","height","active","value","precision","action","error","onChange","buttonHeight","className","description","acceptButton","acceptButtonHeight"];function S(e){let a=e.y,s=e.height,i=e.active,n=void 0===i||i,l=e.value,S=e.precision,y=e.action,b=e.error,C=e.onChange,T=e.buttonHeight,A=void 0===T?49:T,k=e.className,w=e.description,N=e.acceptButton,R=e.acceptButtonHeight,I=void 0===R?72:R,D=o()(e,E);const O=(0,d.useRef)(null),L=(0,d.useRef)(!1),M=(0,d.useRef)(null),P=(0,_.c)(),x=4*A,F=(0,m.useMediaQuery)({orientation:"portrait"}),B=(0,d.useCallback)((e=>{C(e)}),[C]),Z=(0,d.useCallback)((()=>{n&&(M.current&&clearTimeout(M.current),M.current=setTimeout((()=>{var e;n&&(null==O||null===(e=O.current)||void 0===e||e.focus())})))}),[n,O]),U=(0,d.useCallback)((e=>{"Backspace"===e&&(P(30),C(0))}),[C,P]);(0,d.useEffect)((()=>{let e;return n?e=setTimeout((()=>{var a;if(e=void 0,null===(a=O.current)||void 0===a||a.focus(),L.current)return;if(L.current=n,!O.current||!O.current.lastElementChild||O.current.selectionStart!==O.current.selectionEnd)return;const s=O.current.lastElementChild;O.current.selectionStart=String(s.value).length,O.current.selectionEnd=String(s.value).length}),100):L.current=n,()=>{e&&clearTimeout(e)}}),[n,O]);const H=(0,d.useMemo)((()=>N&&d.createElement(u.animated.div,{className:f.Z.acceptButton,style:(0,v.v)({y:a,active:n,height:s,scaleMultiplier:F?.5:1,translateMultiplier:.9})},N)),[N,n,s,F,a]);return d.createElement("div",r()({className:c()(f.Z.host,k,{[f.Z.host_active]:n})},D),d.createElement("div",{className:f.Z.value,style:{height:s-(F?x:0)-(F&&N?I:0)}},w&&d.createElement(u.animated.div,{className:f.Z.description,style:(0,v.v)({y:a,active:n,height:s,translateMultiplier:.25})},w),d.createElement(u.animated.div,{className:f.Z.inner,style:(0,v.v)({y:a,active:n,height:s,scaleMultiplier:.2,translateMultiplier:.25})},d.createElement("div",{className:f.Z.input},d.createElement(h.I5,{value:l,error:b,action:y,precision:S,textFieldComponent:p.Yj,inputRef:O,onChange:B,onBlur:Z,inputProps:{classNameCharsWrapper:f.Z.inputCharsWrapper}}))),!F&&H),d.createElement(u.animated.div,{className:f.Z.keyboardContainer,style:(0,v.v)({y:a,active:n,height:s,scaleMultiplier:F?.5:1,translateMultiplier:.8})},d.createElement(p.N1,{buttons:g.b,onLongPress:U,classNameButton:f.Z.keyboardButton})),F&&H)}},93591:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3-gpBSHFRocs",acceptButton:"_3Dfscj6jRf-G",value:"_1eFaL1jUNCS8",inner:"_3P7hTyTCwz5S",description:"_3VQ8ZHrmB_iM",input:"_2A4D2LoxwJkf",inputCharsWrapper:"_32Ie_-ZaMCPM",keyboardContainer:"_2-k6GjZWp6Oh",keyboardButton:"YbWxFsMSSB6R"}},1216:(e,a,s)=>{"use strict";s.d(a,{R:()=>y});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(44495),m=s(37488),p=s(13669),h=(s(58892),s(18985)),v=s(45797),g=s(17302),_=s(18137),f=s(78606);const E=["y","description","info","acceptButton","twoSide","acceptButtonHeight"],S=(0,h.vU)({day_today:{id:"day_today",defaultMessage:"Today"},day_tomorrow:{id:"day_tomorrow",defaultMessage:"Tomorrow"}});function y(e){let a=e.y,s=e.description,i=e.info,n=e.acceptButton,l=e.twoSide,h=e.acceptButtonHeight,y=void 0===h?72:h,b=o()(e,E);const C=b.height,T=b.active,A=void 0===T||T,k=(0,m.useMediaQuery)({orientation:"portrait"}),w=(0,d.useMemo)((()=>i&&d.createElement(u.animated.div,{className:c()(f.Z.info,l&&f.Z.info_two_side),style:(0,p.v)({y:a,active:A,height:C,translateMultiplier:.25})},i)),[i,A,l,a]),N=(0,d.useMemo)((()=>n&&d.createElement(u.animated.div,{className:c()(f.Z.acceptButton,l&&f.Z.acceptButton_two_side),style:(0,p.v)({y:a,active:A,height:C,scaleMultiplier:k?.5:1,translateMultiplier:.9})},n)),[n,A,C,k,l,a]);return!l||k?d.createElement(d.Fragment,null,d.createElement(_.b,r()({classNameContainer:f.Z.content,classNameDescription:f.Z.description,styleContainer:{height:n?C-y:void 0},y:a,description:s,info:w},b)),N):d.createElement("div",{className:c()(f.Z.host,{[f.Z.host_active]:A})},d.createElement("div",{className:f.Z.value,style:{height:C-(k&&n?49:0)}},s&&d.createElement(u.animated.div,{className:f.Z.valueDescription,style:(0,p.v)({y:a,active:A,height:C,translateMultiplier:.25})},s),!k&&w,!k&&N),d.createElement(u.animated.div,{className:f.Z.pickerContainer,style:(0,p.v)({y:a,active:A,height:C,scaleMultiplier:k?.5:1,translateMultiplier:1.3})},d.createElement(g.yU.Time,r()(r()({},b),{},{transToday:v.NW.formatMessage(S.day_today),transTomorrow:v.NW.formatMessage(S.day_tomorrow)}))),k&&w,k&&N)}},78606:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2PzIW1pW30lZ",info:"wCqiKQn8WkK8",acceptButton:"klywJHTcRPDK",acceptButton_two_side:"_3sdwBdHzTKL1",description:"oiyXKFmFASve",pickerContainer:"_2ZmibbniXH7w",value:"_19OOjA8I9WZH",valueDescription:"_1v0tBD_J24ot"}},81018:(e,a,s)=>{"use strict";s.d(a,{r:()=>f});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(14936),c=s.n(l),d=s(50439),u=s(60042),m=s.n(u),p=s(27378),h=s(44495),v=s(90437),g=s(13669);s(58892);const _=["y","height","active","strikes","springConfig","header","children","className","hostRef"];function f(e){let a=e.y,s=e.height,i=e.active,n=e.strikes,l=e.springConfig,u=void 0===l?h.config.slow:l,f=e.header,E=e.children,S=e.className,y=e.hostRef,b=c()(e,_);const C=(0,p.useRef)(!1),T=58,A=s-44,k=Math.floor(A/T),w=(0,h.useSpring)((()=>({y:0}))),N=o()(w,2),R=N[0].y,I=N[1];(0,p.useEffect)((()=>{I({y:0})}),[n.length,k,I,T]);const D=(0,v.c0)((e=>{let a=e.event,s=e.first,i=e.last,r=o()(e.vxvy,2)[1],l=o()(e.movement,2)[1],c=e.cancel,m=e.canceled;if(s?C.current=!0:i&&(C.current=!1),a&&a.cancelBubble||k>=n.length)return void(c&&c());!i&&Math.abs(l)>0&&a&&a.stopPropagation();const p=(0,v.U6)(l,-(n.length-k)*T,0);if(i){let e=Math.round(p/T)*T;e=(0,d.Z)(m?e:e+T*Math.round(20*r),-(n.length-k)*T,0),I({y:e,immediate:!1,config:u})}else I({y:p,immediate:!0})}),{initial:()=>[0,R.get()],axis:"y"}),O=(0,h.useTransition)(n,{keys:e=>e.id,from:e=>{let a=e.id;return{strikeY:(n[0].id-a)*T,opacity:0}},enter:e=>{let a=e.id;return{strikeY:(n[0].id-a)*T,opacity:1}},update:e=>{let a=e.id;return{strikeY:(n[0].id-a)*T,opacity:1}},leave:e=>{let a=e.id;return{strikeY:(n[0].id-a)*T,opacity:0}},config:u.duration?u:{mass:5,tension:500,friction:100}});return p.createElement(h.a.div,r()({className:m()("sheet-strikes",S),style:(0,g.v)({y:a,active:i,height:s,scaleMultiplier:1}),ref:y},b),f,p.createElement("div",r()({className:"sheet-strikes__list",style:{height:A}},D()),O(((e,a,s,r)=>{let o=e.strikeY,l=e.opacity;return p.createElement(h.a.div,{className:"sheet-strikes__list-item-container",style:{transform:o&&(0,h.to)([o,R],((e,a)=>"translateY(".concat(a+e,"px)"))),opacity:l,zIndex:n[0].id+a.id,willChange:i?"transform, opacity":""}},E(a,r,n))}))))}},18137:(e,a,s)=>{"use strict";s.d(a,{b:()=>E});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(60042),c=s.n(l),d=s(27378),u=s(44495),m=s(17302),p=s(18985),h=s(45797),v=s(13669),g=(s(58892),s(39989));const _=["y","description","info","classNameContainer","classNameDescription","classNameInfo","styleContainer"],f=(0,p.vU)({day_today:{id:"day_today",defaultMessage:"Today"},day_tomorrow:{id:"day_tomorrow",defaultMessage:"Tomorrow"}});function E(e){let a=e.y,s=e.description,i=e.info,n=e.classNameContainer,l=e.classNameDescription,p=e.classNameInfo,E=e.styleContainer,S=o()(e,_);const y=S.active,b=void 0===y||y,C=S.height;return d.createElement(u.animated.div,{className:c()(g.Z.host,n),style:r()(r()({},(0,v.v)({y:a,active:b,height:C,scaleMultiplier:1})),E)},d.createElement("div",{className:c()(g.Z.description,l)},s),d.createElement(m.yU.Time,r()(r()({},S),{},{transToday:h.NW.formatMessage(f.day_today),transTomorrow:h.NW.formatMessage(f.day_tomorrow)})),d.createElement(u.animated.div,{className:c()(g.Z.info,p),style:(0,v.v)({y:a,active:b,height:C,translateMultiplier:-.25})},i))}},39989:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_6Uhl0wSW5TmL",description:"_2LdCWr0ITlpl",info:"_3j-xwK3BtJJW"}},58892:(e,a,s)=>{"use strict";s.d(a,{b:()=>c});var i=s(49491),r=s.n(i),n=s(27378),o=s(77740),l=s(17302);const c=[l.FK,l.gr,l.sw,l.DH,l.IY,l.Pb,l.dJ,l.$0,l.B,l.rW,l.TZ,r()(r()({},l.CM),{},{label:n.createElement(o._pB,null)})];l.FK,l.gr,l.sw,l.DH,l.IY,l.Pb,l.dJ,l.$0,l.B,r()(r()({},l.rW),{},{size:50}),r()(r()({},l.BL),{},{label:"+/-",size:50}),l.TZ,r()(r()({},l.CM),{},{label:n.createElement(o._pB,null)})},48956:(e,a,s)=>{"use strict";s.d(a,{R:()=>d});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378);const c=["active"];function d(e){const a=(0,l.memo)(e);let s;return function(e){return l.createElement(a,r()({},(e=>{let a=e.active,i=o()(e,c);return!a&&s||(s=i),r()(r()({},s),{},{active:a})})(e)))}}},13669:(e,a,s)=>{"use strict";s.d(a,{v:()=>i});const i=e=>{let a=e.y,s=e.active,i=e.height,r=e.scaleMultiplier,n=void 0===r?0:r,o=e.translateMultiplier,l=void 0===o?0:o;return{transform:a?a.to((e=>s&&e<0?"scaleY(".concat(1+-e/i*n,") translateY(").concat(-e*l,"px)"):"scaleY(1) translateY(0)")):void 0,willChange:a?a.to((e=>s&&e<0?"transform":"")):void 0}}},5024:(e,a,s)=>{"use strict";s.d(a,{c:()=>r});var i=s(27378);const r="object"==typeof navigator&&"vibrate"in navigator?()=>(0,i.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;navigator.vibrate(e)}),[]):()=>()=>{}},68114:(e,a,s)=>{"use strict";s.d(a,{HN:()=>_.H,Kk:()=>c.K,R9:()=>i.R,Rn:()=>p.R,Ub:()=>o.U,Vj:()=>n.V,bn:()=>v.b,ce:()=>u.c,dh:()=>r.d,nw:()=>d.n,qV:()=>m.q,rO:()=>h.r,v6:()=>g.v,yu:()=>l.y});s(57764),s(58892);var i=s(48956),r=(s(120),s(54634)),n=s(42053),o=(s(88677),s(68363)),l=s(39021),c=s(53546),d=s(2018),u=s(33550),m=s(74425),p=s(1216),h=s(81018),v=s(18137),g=s(29324),_=s(68945)},14978:(e,a,s)=>{"use strict";s.d(a,{Fv:()=>o.F,Iv:()=>r.I,Km:()=>i.K,LR:()=>l.L,_t:()=>c.g,dr:()=>u.T,q_:()=>d._,tO:()=>n.t});s(62652);var i=s(96048),r=s(9342),n=s(52652),o=s(52439),l=s(32816),c=(s(3858),s(46547)),d=(s(44186),s(5349)),u=s(11184)},52652:(e,a,s)=>{"use strict";s.d(a,{t:()=>CloudMessagingService});var i=s(47014),r=s.n(i),n=s(29448);const o={default:"idle",granted:"allowed",denied:"disabled"};class CloudMessagingService{constructor(e,a,s,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.W;this.library=e,this.http=a,this.storage=s,this.systemNotification=i,this.defaultOptions=r,this.foregroundMessageHandlers=[],this.onMessageUnsubscribe=null,this.statusListeners=new Set,this.handleForegroundMessage=this.handleForegroundMessage.bind(this)}get permission(){return this.systemNotification.permission}set status(e){this.statusListeners.forEach((a=>a(e))),this.storage.set("status",e)}get status(){var e;return null!==(e=this.storage.get("status"))&&void 0!==e?e:this.defaultOptions.status}set token(e){this.storage.set("token",e)}get token(){var e;return null!==(e=this.storage.get("token"))&&void 0!==e?e:this.defaultOptions.token}get typeChange(){var e;return null!==(e=this.storage.get("typeChange"))&&void 0!==e?e:this.defaultOptions.typeChange}set typeChange(e){this.storage.set("typeChange",e)}get tokenCreatedAt(){var e;return null!==(e=this.storage.get("tokenCreatedAt"))&&void 0!==e?e:this.defaultOptions.tokenCreatedAt}set tokenCreatedAt(e){this.storage.set("tokenCreatedAt",e)}initialize(){}start(){return r()((function*(){}))()}allow(){var e=arguments,a=this;return r()((function*(){let s=e.length>0&&void 0!==e[0]?e[0]:"auto";yield a.createFirebaseToken();let i=!1;return a.token&&(i=yield a.saveToken()),a.token&&i&&(a.typeChange=s,a.status="allowed",a.listenLibraryMessage().finally((()=>{}))),a.isAllowed()}))()}disable(){var e=arguments,a=this;return r()((function*(){let s=e.length>0&&void 0!==e[0]?e[0]:"auto";return a.token&&(yield a.deleteFirebaseToken()),!a.token&&a.isAllowed()&&(yield a.deleteToken()),a.typeChange=s,a.status="disabled",a.unlistenLibraryMessage(),a.isDisabled()}))()}reset(){var e=arguments,a=this;return r()((function*(){let s=e.length>0&&void 0!==e[0]?e[0]:"auto";return a.token&&(yield a.deleteFirebaseToken()),!a.token&&a.isAllowed()&&(yield a.deleteToken()),a.typeChange=s,a.status="idle",a.unlistenLibraryMessage(),a.isIdle()}))()}resetStatus(){}clearToken(){var e=this;return r()((function*(){yield e.disable()}))()}isAllowed(){return"allowed"===this.status}isDisabled(){return"disabled"===this.status}isIdle(){return"idle"===this.status}isSystemNotificationGranted(){return"granted"===this.permission}isSystemNotificationDenied(){return"denied"===this.permission}getPermission(){return this.permission}onForegroundMessage(e){return this.foregroundMessageHandlers.push(e),()=>{this.foregroundMessageHandlers.filter((a=>a!==e))}}requestPermission(){var e=this;return r()((function*(){return yield e.systemNotification.requestPermission(),e.permission}))()}syncSettings(){var e=this;return r()((function*(){const a=o[e.permission];if(a!==e.status&&"auto"===e.typeChange){const s={idle:()=>e.reset(),allowed:()=>e.allow(),disabled:()=>e.disable()}[a];if(!s)return;yield s()}}))()}updateToken(){var e=this;return r()((function*(){var a;if(!e.isAllowed())return;(new Date).getTime()-(null!==(a=e.tokenCreatedAt)&&void 0!==a?a:(new Date).getTime())<6048e5||(yield e.disable(),yield e.allow())}))()}onStatusChanged(e){return this.statusListeners.add(e),()=>{this.statusListeners.delete(e)}}handleForegroundMessage(e){for(let i=0;i<this.foregroundMessageHandlers.length;i+=1){var a,s;null===(a=(s=this.foregroundMessageHandlers)[i])||void 0===a||a.call(s,e)}}createFirebaseToken(){var e=this;return r()((function*(){try{e.token=(yield e.library.getToken())||"",e.tokenCreatedAt=(new Date).getTime()}catch(a){e.token=null,e.tokenCreatedAt=null}}))()}saveToken(){var e=this;return r()((function*(){return!!e.token&&(yield e.http.saveToken(e.token))}))()}deleteFirebaseToken(){var e=this;return r()((function*(){try{yield e.library.deleteToken()}catch(e){}e.token=null,e.tokenCreatedAt=null}))()}deleteToken(){var e=this;return r()((function*(){try{return yield e.http.deleteToken()}catch(e){return!1}}))()}listenLibraryMessage(){var e=this;return r()((function*(){e.unlistenLibraryMessage(),e.onMessageUnsubscribe=yield e.library.onMessage(e.handleForegroundMessage)}))()}unlistenLibraryMessage(){var e;null===(e=this.onMessageUnsubscribe)||void 0===e||e.call(this)}}},29448:(e,a,s)=>{"use strict";s.d(a,{W:()=>i});const i={status:"idle",token:null,typeChange:"auto",tokenCreatedAt:null}},96048:(e,a,s)=>{"use strict";s.d(a,{K:()=>FirebaseProvider});var i=s(47014),r=s.n(i),n=s(19669);class FirebaseProvider{deleteToken(){return r()((function*(){const e=yield(0,n.Pr)();return!!e&&e.messaging().deleteToken()}))()}getToken(){return r()((function*(){const e=yield(0,n.Pr)();return e?e.messaging().getToken():""}))()}onMessage(e){return r()((function*(){const a=yield(0,n.Pr)();return a?a.messaging().onMessage(e):()=>{}}))()}}},9342:(e,a,s)=>{"use strict";s.d(a,{I:()=>r});var i=s(99446);function r(){return!(i.Q5&&i.G6||i.gn||"CriOS"===i.BF)&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}},5349:(e,a,s)=>{"use strict";s.d(a,{_:()=>NotificationRequestService});var i=s(47014),r=s.n(i),n=s(57615),o=s(29042),l=s(44186),c=s(83037),d=s(39653),u=s(82082);class NotificationRequestService{constructor(){this.isAvailable=!1,this.isScenario=!1,this.status=void 0,this.handlers={[l.xm.SHOW_NOTIFICATION_REQUEST]:null,[l.xm.REQUEST_ACCEPT]:null},this.showNotificationRequestTimeoutId=-1,this.firstDealHandler=null,this.inappRequestConfig=null,this.clearScenario=this.clearScenario.bind(this),this.handleShown=this.handleShown.bind(this),this.handleShowInstruction=this.handleShowInstruction.bind(this),this.handleAccept=this.handleAccept.bind(this),this.handleClose=this.handleClose.bind(this)}get currentScenario(){return this.offerScenarioService.getCurrent()}init(e,a,s){this.offerScenarioService=new c.V(l.DF,new n._({namespace:e,backend:new o.u})),this.isAvailable=a,this.firstDealHandler=s}load(e){const a=this.offerScenarioService.getCurrent();if(a&&a.isDailyIntervalPassed)switch(a.name){case"first_offer_after_delay":this.showNotificationRequestWithDelay();break;case"second_offer_after_first_deal":case"third_offer_after_first_deal":e()}}stop(){this.status=void 0,this.isScenario=!1,this.clearScenario()}show(e){var a,s,i;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const o=this.handlers[l.xm.SHOW_NOTIFICATION_REQUEST];o&&(this.status=e,this.isScenario=r,"requesting"===this.status?o((0,u.c)(this.status,this.handleShown,this.handleAccept,this.handleClose,{title:null===(a=this.inappRequestConfig)||void 0===a?void 0:a.title,description:null===(s=this.inappRequestConfig)||void 0===s?void 0:s.description,actionText:null===(i=this.inappRequestConfig)||void 0===i?void 0:i.actionText})):o((0,u.c)(this.status,this.handleShown,(()=>this.handleShowInstruction(n)),this.handleClose,{isAvailable:this.isAvailable})))}onRequestAccept(e){return this.handlers[l.xm.REQUEST_ACCEPT]=e,()=>{this.handlers[l.xm.REQUEST_ACCEPT]=null}}onShowNotificationRequest(e){return this.handlers[l.xm.SHOW_NOTIFICATION_REQUEST]=e,()=>{this.handlers[l.xm.SHOW_NOTIFICATION_REQUEST]=null}}handleShowInstruction(e){d.T.log("unblock_dialog_click_instruction","unblock_dialog_click_instruction"),null==e||e()}setInappRequestConfig(e){this.inappRequestConfig=e}clearScenario(){window.clearTimeout(this.showNotificationRequestTimeoutId),this.firstDealHandler&&(this.firstDealHandler(),this.firstDealHandler=null),this.handlers[l.xm.REQUEST_ACCEPT]=null}handleShown(){var e;if(this.status)switch(this.status){case"blocked":d.T.log("unblock_dialog_show","unblock_dialog_show");break;case"requesting":d.T.log("custom_dialog_shown",this.isScenario?null===(e=this.currentScenario)||void 0===e?void 0:e.name:"subscribe_price_asset_chart")}}handleAccept(){var e=this;return r()((function*(){const a=e.handlers[l.xm.REQUEST_ACCEPT];if(!e.currentScenario||!a)return;d.T.log("custom_dialog_granted",e.isScenario?e.currentScenario.name:"subscribe_price_asset_chart");const s=yield a();d.T.log(s?"native_dialog_granted":"native_dialog_denied",e.isScenario?e.currentScenario.name:"subscribe_price_asset_chart"),e.isScenario||e.clearScenario()}))()}handleClose(){var e;d.T.log("custom_dialog_denied",this.isScenario?null===(e=this.currentScenario)||void 0===e?void 0:e.name:"subscribe_price_asset_chart"),this.currentScenario&&this.isScenario&&this.offerScenarioService.next()}showNotificationRequestWithDelay(){window.clearTimeout(this.showNotificationRequestTimeoutId),this.showNotificationRequestTimeoutId=window.setTimeout((()=>this.show("requesting",!0)),NotificationRequestService.NOTIFICATION_REQUEST_DELAY)}}NotificationRequestService.NOTIFICATION_REQUEST_DELAY=l.SF},83037:(e,a,s)=>{"use strict";s.d(a,{V:()=>OfferScenarioService});class OfferScenarioService{constructor(e,a){this.scenarios=e,this.storage=a}static isDailyIntervalPassed(e,a){const s=e+864e5*a;return Date.now()>=s}getCurrent(){const e=this.getCurrentMeta(),a=this.scenarios[e.index];return a?{name:a.name,isDailyIntervalPassed:OfferScenarioService.isDailyIntervalPassed(e.activatedTime,a.dailyInterval)}:null}next(){const e=this.getCurrentMeta();this.setCurrentMeta({index:e.index+1,activatedTime:Date.now()})}setCurrentMeta(e){this.storage.set("offerIndex",e.index),this.storage.set("offerActivatedTime",e.activatedTime)}getCurrentMeta(){return{index:this.storage.get("offerIndex")||0,activatedTime:this.storage.get("offerActivatedTime")||Date.now()}}}},39653:(e,a,s)=>{"use strict";s.d(a,{T:()=>NotificationRequestAnalytics});var i=s(23735);class NotificationRequestAnalytics{static log(e,a){(0,i.L)({event:"uaGtmEvents_clicks",eventCategory:"push_permission_request",eventAction:e,eventLabel:a||""})}}},44186:(e,a,s)=>{"use strict";s.d(a,{DF:()=>n,SF:()=>i,xm:()=>r});const i=3e5,r={SHOW_NOTIFICATION_REQUEST:"onShowNotificationRequest",REQUEST_ACCEPT:"onAccept"},n=[{name:"first_offer_after_delay",dailyInterval:0},{name:"second_offer_after_first_deal",dailyInterval:3},{name:"third_offer_after_first_deal",dailyInterval:5}]},82082:(e,a,s)=>{"use strict";s.d(a,{c:()=>h});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(14936),c=s.n(l),d=s(27378),u=s(30029),m=s(17793);const p=["onEntered","onClick","onClose"];function h(e,a,s,i,n){return function(l){var h,v,g,_;let f=l.onEntered,E=l.onClick,S=l.onClose,y=c()(l,p);const b=d.useCallback((()=>{a(),f&&f(...args)}),[f]),C=d.useCallback(o()((function*(){yield s(),E&&E(...arguments),S&&S(...arguments)})),[E,S]),T=d.useCallback((function(){i(),S&&S(...arguments)}),[S]);switch(e){case"requesting":return d.createElement(u.H,r()(r()({onEntered:b,onClose:T,onClick:C},y),{},{title:null!==(h=null==n?void 0:n.title)&&void 0!==h?h:y.title,description:null!==(v=null==n?void 0:n.description)&&void 0!==v?v:y.description,actionText:null!==(g=null==n?void 0:n.actionText)&&void 0!==g?g:y.actionText}));case"blocked":return d.createElement(m.M,r()({isAvailable:null!==(_=null==n?void 0:n.isAvailable)&&void 0!==_&&_,onEntered:b,onClose:T,onClick:C},y))}}}},46547:(e,a,s)=>{"use strict";s.d(a,{g:()=>NotificationService});var i=s(59312),r=s(60521),n=s(52439),o=(s(27378),s(60042),s(77740),s(17302),s(42151),s(3858));class NotificationService{constructor(){this.messages=(0,r.observable)([]),this.customFallbacks={deals:void 0,deals_soft:void 0}}addMessage(e){this.messages.find((a=>a.id===e.id))||this.messages.push(e)}removeMessage(e){this.messages.remove(e)}removeMessageById(e){const a=this.messages.find((a=>a.id===e));a&&this.messages.remove(a)}addCustomForegroundMessageByFallback(e,a){this.customFallbacks[e]=a}addForegroundMessage(e,a){const s=this.convertPayloadToMessage(o.E.parse("native",e),a);s&&this.addMessage(s)}addForegroundMessageByFallback(e,a,s){const i=this.convertPayloadToMessage(o.E.parse("socket",e),s,a);i&&this.addMessage(i)}convertPayloadToMessage(e,a,s){const i=this.customFallbacks[e.type],r=i?i({message:e,onMessageShown:s}):(0,n.F)(e,s,a);return r?{id:e.id,component:r}:null}}(0,i.gn)([r.action.bound],NotificationService.prototype,"addForegroundMessage",null),(0,i.gn)([r.action.bound],NotificationService.prototype,"addForegroundMessageByFallback",null)},18716:(e,a,s)=>{"use strict";s.d(a,{q:()=>NotificationAnalytics});var i=s(23735);class NotificationAnalytics{static log(e,a,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"timeout";(0,i.L)({event:"uaGtmEvents_clicks",eventCategory:"push_notification",eventAction:"show"===e?"notification_show/".concat(a):"notification_close/".concat(a,"/").concat(NotificationAnalytics.transformCloseReasonToRaw(r)),eventLabel:s})}static transformCloseReasonToRaw(e){switch(e){case"timeout":return"timeout";case"clickClose":return"click_close"}}}},12010:(e,a,s)=>{"use strict";s.d(a,{w:()=>i});const i=5e3},3858:(e,a,s)=>{"use strict";s.d(a,{E:()=>NotificationTransformer});var i=s(49491),r=s.n(i),n=s(96111);class NotificationTransformer{static parse(e,a){const s={id:a.data.id,title:a.notification.title,description:a.notification.body,meta:{source:e,pushId:NotificationTransformer.getQueryOfNeededUtmParameters(a.data.web_deep_link)||a.data.push_name}};switch(a.data.web_deep_link&&(s.actionLink=NotificationTransformer.transformUtmMediumParameterWithPushType(e,a.data.web_deep_link)),a.data.view_type){case"badge":case"default":case"progress":{const e=r()({type:a.data.view_type},s);return a.data.action_title&&(e.actionText=a.data.action_title),a.data.in_app_image_url&&(e.image=a.data.in_app_image_url),e}case"deals":case"deals_soft":return r()(r()({type:a.data.view_type},s),{},{data:NotificationTransformer.parseMessageDealsPayloadData(a.data)})}}static parseMessageDealsPayloadData(e){let a=[];try{a=JSON.parse(e.deals)}catch(e){console.error(e)}return{before:{points:Number(e.before_points),serviceLevel:e.before_service_level,step:{id:Number(e.before_step_id),points:Number(e.before_step_points),maxId:void 0!==e.before_step_max_step_id?Number(e.before_step_max_step_id):e.before_step_max_step_id,nextId:void 0!==e.before_step_next_id?Number(e.before_step_next_id):e.before_step_next_id,nextPoints:void 0!==e.before_step_next_points?Number(e.before_step_next_points):e.before_step_next_points}},after:{points:Number(e.after_points),serviceLevel:e.after_service_level,step:{id:Number(e.after_step_id),points:Number(e.after_step_points),maxId:void 0!==e.after_step_max_step_id?Number(e.after_step_max_step_id):e.after_step_max_step_id,nextId:void 0!==e.after_step_next_id?Number(e.after_step_next_id):e.after_step_next_id,nextPoints:void 0!==e.after_step_next_points?Number(e.after_step_next_points):e.after_step_next_points}},deals:a.map((e=>{const a={pair:e.pair.toLowerCase(),amount:Number(e.amount),currency:e.currency,points:Number(e.points),count:Number(e.count)};switch(e.platform){case"bo":return r()(r()({},a),{},{platform:e.platform,duration:Number(e.duration)});case"fx":return r()(r()({},a),{},{platform:e.platform,multiplicator:Number(e.multiplicator)})}}))}}static transformUtmMediumParameterWithPushType(e,a){const s=n.parseUrl(a),i=s.url,r=s.query;"utm_medium"in r&&"push"===r.utm_medium&&(r.utm_medium="".concat(r.utm_medium,"_").concat(e));return["is_retargeting"].map((e=>{e in r&&("is_retargeting"===e?"true"===r[e]&&delete r[e]:delete r[e])})),n.stringifyUrl({url:i,query:r})}static getQueryOfNeededUtmParameters(e){if(!e)return"";const a=n.parseUrl(e).query,s=Object.keys(a).reduce(((e,s)=>{switch(s){case"utm_campaign":case"utm_content":case"utm_term":e[s]=a[s]||null}return e}),{utm_campaign:"(not set)",utm_content:"(not set)",utm_term:"(not set)"});return n.stringify(s)}}},74051:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"Ymt4RoWHNddw"}},32816:(e,a,s)=>{"use strict";s.d(a,{L:()=>f});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(77740),m=s(17302),p=s(42151),h=s(12010),v=s(11220),g=s(74051);const _=["onEntered","onClick","onClose","className","title","description","actionText"];function f(e,a,s,i){return function(n){let c=n.onEntered,f=n.onClick,E=n.onClose,S=n.className,y=(n.title,n.description,n.actionText,o()(n,_));const b=(0,v.U)({message:s,onEntered:c,onClick:f,onClose:E,onMessageShown:i}),C={autoHideDuration:void 0,IconCloseComponent:u.bMz,onEntered:b.onEntered,onClose:b.onClose,onClick:s.actionLink?b.onClick:s.onClick},T=l.useCallback((()=>{var e;null===(e=b.onClose)||void 0===e||e.call(b,null,s.id)}),[b]);return 0!==s.data.deals.length?l.createElement(m.G,r()(r()({},C),{},{renderContent:()=>l.createElement(p.Y,{pairsConfig:e,serviceLevelsConfig:a,data:s.data,onAnimationEnd:T}),className:d()(S,g.Z.host)},y)):l.createElement(m.G,r()(r()({},C),{},{type:"default",autoHideDuration:s.autoHideDuration||h.w,title:s.title,className:S,description:s.description,actionText:s.actionText},y))}}},54396:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={image:"_3-Yrcg_LVcfJ"}},52439:(e,a,s)=>{"use strict";s.d(a,{F:()=>_});var i=s(14936),r=s.n(i),n=s(49491),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(77740),m=s(17302),p=s(12010),h=s(11220),v=s(54396);const g=["onEntered","onClick","onClose"];function _(e,a,s){return function(i){let n=i.onEntered,c=i.onClick,_=i.onClose,f=r()(i,g);const E=(0,h.U)({message:e,onEntered:n,onClick:c,onClose:_,onMessageShown:a,navigationService:s});return l.createElement(m.G,o()({image:(y=e.image,"string"==typeof y?function(e){return l.createElement("img",o()(o()({},e),{},{className:d()(v.Z.image,e.className),src:y,alt:""}))}:y),type:(S=e.type,"badge"===S?"badge":"default"),title:"badge"===e.type?l.createElement(m.xv,{color:"contrast-beta",variant:"S / Regular"},e.title):e.title,description:"badge"===e.type?l.createElement(m.xv,{color:"contrast-alpha",variant:"M / Bold"},e.description):e.description,actionText:e.actionText,IconCloseComponent:u.bMz,autoHideDuration:e.autoHideDuration||p.w,onEntered:E.onEntered,onClick:E.onClick,onClose:E.onClose},f));var S,y}}},11220:(e,a,s)=>{"use strict";s.d(a,{U:()=>n});var i=s(27378),r=s(18716);const n=e=>{let a=e.message,s=e.onEntered,n=e.onClick,o=e.onClose,l=e.onMessageShown,c=e.navigationService;return i.useMemo((()=>({onEntered:(e,i)=>{r.q.log("show",a.meta.source,a.meta.pushId),l&&l(a.id),s&&s(e,i)},onClick:a.actionLink?(e,s)=>{a.actionLink&&c&&(null==c||c.tryOpenDeepLink(a.actionLink,!1).finally((()=>{}))),n&&n(e,s),o&&o(e,s)}:a.onClick,onClose:(e,s,i)=>{r.q.log("close",a.meta.source,a.meta.pushId,i),o&&o(e,s,i)}})),[a,s,n,o,l,c])}},11184:(e,a,s)=>{"use strict";s.d(a,{T:()=>c});var i=s(59312),r=s(27378),n=s(60521),o=s(50649),l=s(15696);let c=class Notifications extends r.Component{constructor(){super(...arguments),this.handleClose=(e,a)=>{this.props.notificationService.removeMessageById(a)}}get firstOfMessagesQueue(){return this.props.notificationService.messages.length&&this.props.notificationService.messages[0]||null}render(){if(!document.body)return null;const e=this.firstOfMessagesQueue;return r.createElement("div",{id:"notifications"},r.createElement(l.Z,{component:null},e?r.createElement(e.component,{id:e.id,key:"notifications-".concat(e.id),className:"not-c-notifications",onClose:this.handleClose}):[]))}};(0,i.gn)([n.computed],c.prototype,"firstOfMessagesQueue",null),c=(0,i.gn)([o.observer],c)},17793:(e,a,s)=>{"use strict";s.d(a,{M:()=>p});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(77740),d=s(17302),u=s(82844);const m=["onEntered","onClick","onClose","isAvailable"],p=e=>{let a=e.onEntered,s=e.onClick,i=e.onClose,n=e.isAvailable,p=o()(e,m);return l.createElement(d.G,r()({image:c._V1,title:l.createElement(u._,{id:"notifications_blocked_to_push_title",defaultMessage:"Notifications Are Disabled"}),description:l.createElement(u._,{id:"notifications_blocked_to_push_desc",defaultMessage:"Allow notifications in your browser settings to receive important information."}),actionText:n&&l.createElement(u._,{id:"notifications_blocked_to_push_action",defaultMessage:"How to allow notifications"}),IconCloseComponent:c.bMz,onEntered:a,onClick:n?s:void 0,onClose:i},p))}},30029:(e,a,s)=>{"use strict";s.d(a,{H:()=>p});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(77740),d=s(17302),u=s(82844);const m=["title","description","actionText","onEntered","onClick","onClose"],p=e=>{let a=e.title,s=e.description,i=e.actionText,n=e.onEntered,p=e.onClick,h=e.onClose,v=o()(e,m);return l.createElement(d.G,r()({image:c.pPA,title:null!=a?a:l.createElement(u._,{id:"subscribe_to_push_title",defaultMessage:"Enable notifications"}),description:null!=s?s:l.createElement(u._,{id:"subscribe_to_push_desc",defaultMessage:"So you do not miss important news."}),actionText:null!=i?i:l.createElement(u._,{id:"subscribe_to_push_accept",defaultMessage:"Enable"}),IconCloseComponent:c.bMz,onEntered:n,onClick:p,onClose:h},v))}},42151:(e,a,s)=>{"use strict";s.d(a,{Y:()=>b});var i=s(47014),r=s.n(i),n=s(2243),o=s.n(n),l=s(27378),c=s(44495),d=s(47799),u=s(97346),m=s(60142),p=s(41283),h=s(45960),v=s(72881),g=s(1494),_=s(24559),f=s(86069),E=s(27050),S=s(75650);const y=(0,c.animated)(f.XP),b=e=>{let a=e.pairsConfig,s=e.serviceLevelsConfig,i=e.data,n=i.after,f=i.before,b=i.deals,C=e.onAnimationEnd;const T=l.useState(0),A=o()(T,2),k=A[0],w=A[1],N=l.useState(""),R=o()(N,2),I=R[0],D=R[1],O=l.useState(0),L=o()(O,2),M=L[0],P=L[1],x=l.useState(0),F=o()(x,2),B=F[0],Z=F[1],U=(0,c.useSpring)({from:{height:"44px",paddingBottom:"12px"}},[]),H=o()(U,2),G=H[0],V=H[1],W=(0,c.useSpring)({from:{opacity:0}},[]),j=o()(W,2),z=j[0],q=j[1],K=(0,c.useTransition)(I,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{easing:d.G,duration:10}},[I]),Y=o()(K,1)[0],X=(0,c.useSpring)({from:{opacity:0}},[]),J=o()(X,2),Q=J[0],$=J[1],ee=(0,c.useSpring)({from:{color:"#fff",translateX:"0%"}},[]),te=o()(ee,2),ae=te[0],se=te[1],ie=(0,c.useSpring)({from:{translateX:"0%",backgroundColor:"#fff"}},[]),re=o()(ie,2),ne=re[0],oe=re[1],le=(0,c.useTransition)(k,{from:{opacity:0,transform:"translateX(12px)"},enter:{opacity:1,transform:"translateX(0px)"},leave:{opacity:0,transform:"translateX(-12px)"},config:{easing:u.yx,duration:300},immediate:0===k},[k]),ce=o()(le,1)[0],de=l.useCallback(function(){var e=r()((function*(e,a,s,i){const r=(0,E.S)(a,s,b,e),n=i[r.before.serviceLevel],o=i[r.after.serviceLevel];var l;(yield Promise.all([...se.start({color:null==n?void 0:n.color,translateX:"".concat(r.before.percent,"%"),config:{duration:0}}),...oe.start({translateX:"".concat(r.before.percent,"%"),backgroundColor:"#fff",config:{duration:0}}),...$.start({opacity:0,config:{duration:0}})]),0===e?(n&&D(n.iconUrl),P(r.before.stepId),Z(r.before.maxStepId),yield Promise.all(V.start({height:"68px",paddingBottom:"4px",delay:1100,config:{easing:u.yx,duration:200}})),yield Promise.all(q.start({opacity:1,config:{easing:u.yx,duration:200}}))):yield(0,E.p)(800),yield Promise.all($.start({opacity:1,config:{easing:u.yx,duration:200}})),r.before.serviceLevel!==r.after.serviceLevel||r.before.stepId!==r.after.stepId)?(yield Promise.all(oe.start({translateX:"100%",config:{duration:200,easing:u.Dh}})),D(null!==(l=null==o?void 0:o.iconUrl)&&void 0!==l?l:""),P(r.after.stepId),Z(r.after.maxStepId),yield Promise.all([...oe.start({translateX:"0%",config:{duration:0}}),...se.start({color:null==o?void 0:o.color,translateX:"0%",config:{duration:0}})]),yield Promise.all(oe.start({translateX:"".concat(r.after.percent,"$"),config:{duration:200,easing:u.Dh}})),yield(0,E.p)(500)):(yield Promise.all(oe.start({translateX:"".concat(r.after.percent,"%"),config:{duration:200,easing:u.Dh}})),yield(0,E.p)(900));yield Promise.all([...oe.start({backgroundColor:null==o?void 0:o.color,config:{duration:200,easing:u.Dh}}),...$.start({opacity:0,config:{easing:u.yx,duration:200}})]),w((e=>{const a=e+1;return a<b.length?a:(C(),e)}))}));return function(a,s,i,r){return e.apply(this,arguments)}}(),[b,V,$,q,se,oe,C]),ue=l.useCallback(r()((function*(){yield(0,E.p)(1500),w((e=>{const a=e+1;return a<b.length?a:(C(),e)}))})),[b.length,C]);return l.useEffect((()=>{f&&n&&s?de(k,f,n,s):ue()}),[k,f,n,s,de,ue]),l.createElement(c.animated.div,{className:S.Z.host,style:G},l.createElement("div",{className:S.Z.detailsContainer},ce(((e,s)=>{var i,r,n;const o=b[s];if(!o)return null;let d;switch(o.platform){case"bo":d=l.createElement(m.n,{seconds:o.duration});break;case"fx":d=l.createElement(p.p,{value:o.multiplicator})}return l.createElement(c.animated.div,{className:S.Z.details,style:e,key:"".concat(s)},l.createElement(v.f,{id:o.pair,icon:null===(i=a[o.pair])||void 0===i?void 0:i.icon,counter:o.count,className:S.Z.pairIcon}),l.createElement("div",{className:S.Z.content},l.createElement("div",{className:S.Z.row},l.createElement("div",{className:S.Z.rowLeft},l.createElement(h.i,{name:null!==(r=null===(n=a[o.pair])||void 0===n?void 0:n.title)&&void 0!==r?r:o.pair})),l.createElement("div",{className:S.Z.rowRight},l.createElement(_.w,{mechanic:o.platform}))),l.createElement("div",{className:S.Z.row},l.createElement("div",{className:S.Z.rowLeft},l.createElement(g.F,{amount:o.amount,currency:o.currency}),o.points&&l.createElement(y,{value:o.points,className:S.Z.xp,style:Q})),l.createElement("div",{className:S.Z.rowRight},d))))}))),l.createElement(c.animated.div,{className:S.Z.serviceLevel,style:z},l.createElement("div",{className:S.Z.serviceLevelIconContainer},Y(((e,a)=>l.createElement(c.animated.img,{style:e,key:a,src:a,className:S.Z.serviceLevelIcon})))),l.createElement("div",{className:S.Z.serviceLevelSteps},l.createElement("span",null,M),l.createElement("span",{className:S.Z.serviceLevelStepSeparator}," / "),l.createElement("span",{className:S.Z.serviceLevelStepMax},B)),l.createElement("div",{className:S.Z.serviceLevelProgress},l.createElement("div",{className:S.Z.serviceLevelProgressBarContainer},l.createElement(c.animated.div,{className:S.Z.serviceLevelProgressBar,style:ae}),l.createElement(c.animated.div,{className:S.Z.serviceLevelNextProgressBar,style:ne})))))}},75650:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1odGwaeHve1x",detailsContainer:"_2700KZ2wqUfK",details:"l5d_kUypScDF",pairIcon:"SCwj9OO6Xjot",content:"_1tFUvuHfI3Xj",row:"_3URYjJ2vofJH",rowLeft:"_2oiyZLyOQPMB",rowRight:"_19tvp61UVyqo",xp:"_2M6M81vir7tO",serviceLevel:"_2kB6obtOX6X5",serviceLevelIconContainer:"_11_7i7eFQBIP",serviceLevelIcon:"eX00PdC2bXiy",serviceLevelSteps:"_2bk6gYdjjgeK",serviceLevelStepSeparator:"_2m32K4l4e6J3",serviceLevelStepMax:"fa6Ot3SKKwQN",serviceLevelProgress:"_3h6dL3kl7JGH",serviceLevelProgressBarContainer:"_1qo_HZtWSeCC",serviceLevelProgressBar:"_372QLeR8X4oe",serviceLevelNextProgressBar:"_2Nue77ut4C5X"}},60142:(e,a,s)=>{"use strict";s.d(a,{n:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(82844),l=s(71933);const c=e=>{let a=e.seconds,s=e.className;const r=i.useMemo((()=>({seconds:a,minutes:Math.floor(a/60)%60,hours:Math.floor(a/3600)%24})),[a]);let c;return c=r.hours?i.createElement(i.Fragment,null,i.createElement(o._,{id:"tou_timer_short_hour",defaultMessage:"{hours} h",values:{hours:r.hours}}),i.createElement("span",null," "),i.createElement(o._,{id:"tou_timer_short_minute",defaultMessage:"{minutes} min",values:{minutes:r.minutes}})):r.minutes?i.createElement(o._,{id:"tou_timer_short_minute",defaultMessage:"{minutes} min",values:{minutes:r.minutes}}):i.createElement(o._,{id:"tou_timer_short_second",defaultMessage:"{seconds} sec",values:{seconds:r.seconds}}),i.createElement("span",{className:n()(l.Z.host,s)},c)}},71933:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"OviFb7hm5Dbn"}},24559:(e,a,s)=>{"use strict";s.d(a,{w:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(30956);const l={bo:"FTT",fx:"FX"},c=e=>{var a;let s=e.mechanic,r=e.className;return i.createElement("span",{className:n()(o.Z.host,r)},null!==(a=l[s])&&void 0!==a?a:s)}},30956:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3GaE_aHcIgqn"}},41283:(e,a,s)=>{"use strict";s.d(a,{p:()=>l});var i=s(27378),r=s(60042),n=s.n(r),o=s(43400);const l=e=>{let a=e.value,s=e.className;return i.createElement("span",{className:n()(o.Z.host,s)},"×",a)}},43400:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_19Ro2Y83g2tb"}},72881:(e,a,s)=>{"use strict";s.d(a,{f:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(95029),l=s(79995);const c=e=>{let a=e.id,s=e.icon,r=e.counter,c=void 0===r?0:r,d=e.className;return i.createElement("span",{"data-test":"pair-icon-notification-".concat(a),className:n()(l.Z.host,d)},c>1&&i.createElement("span",{className:l.Z.counter},c),i.createElement(o.JO,{className:l.Z.image,size:"large",src:s||o.DI}))}},79995:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"S70hExltRey9",image:"_2_PBs5U5RkS3",counter:"_3fRuFDgw-RZ8"}},45960:(e,a,s)=>{"use strict";s.d(a,{i:()=>l});var i=s(27378),r=s(60042),n=s.n(r),o=s(45594);const l=e=>{let a=e.name,s=e.className;return i.createElement("span",{className:n()(o.Z.host,s)},a)}},45594:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"o9hshuuMpfqt"}},1494:(e,a,s)=>{"use strict";s.d(a,{F:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(95029),l=s(55047);const c=e=>{let a=e.currency,s=e.amount,r=e.className;const c=Math.abs(s);let d="";return 0!==s&&(d=s>0?"+":"-"),i.createElement("span",{className:n()(l.Z.host,{[l.Z.host_state_success]:"+"===d,[l.Z.host_state_none]:""===d,[l.Z.host_state_failed]:"-"===d},r)},i.createElement("span",null,d),i.createElement(o.ih,{currency:a,value:c,isSign:!1}))}},55047:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3nACZdcXt-kv",host_state_success:"_3yyoBv965CiC",host_state_none:"_1xw8CWe5aHOk",host_state_failed:"_1KJa-c2IvOT6"}},86069:(e,a,s)=>{"use strict";s.d(a,{XP:()=>h});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(18985),m=s(40399);const p=["value","className"],h=e=>{let a=e.value,s=e.className,i=o()(e,p);return l.createElement("span",r()({className:d()(m.Z.host,s)},i),l.createElement(u.BK,{value:a}),l.createElement("span",null,"XP"))}},40399:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2Ipe9cG0b-CY"}},27050:(e,a,s)=>{"use strict";s.d(a,{S:()=>n,p:()=>r});const i=e=>e>100?100:e<0?0:((e,a)=>{const s=Math.pow(10,a);return Math.round(e*s)/s})(e,3),r=e=>new Promise((a=>setTimeout(a,e))),n=(e,a,s,r)=>{var n,o,l,c;const d={before:{serviceLevel:e.serviceLevel,stepId:e.step.id,maxStepId:e.step.maxId,percent:0},after:{serviceLevel:e.serviceLevel,stepId:e.step.id,maxStepId:e.step.maxId,percent:0}},u=s.slice(0,r+1).reduce(((e,a,s)=>{var i;const n=null!==(i=a.points)&&void 0!==i?i:0;return s!==r&&(e.before+=n),e.after+=n,e}),{after:0,before:0}),m=e.points+u.before,p=e.points+u.after;let h=null!==(n=e.step.nextPoints)&&void 0!==n?n:m,v=null!==(o=a.step.nextPoints)&&void 0!==o?o:m;return m>h?(d.before.serviceLevel=a.serviceLevel,d.before.stepId=a.step.id,d.before.maxStepId=a.step.maxId,d.before.percent=i((m-h)/v*100)):(d.before.serviceLevel=e.serviceLevel,d.before.stepId=e.step.id,d.before.maxStepId=e.step.maxId,d.before.percent=i(m/h*100)),h=null!==(l=e.step.nextPoints)&&void 0!==l?l:p,v=null!==(c=a.step.nextPoints)&&void 0!==c?c:p,p>h?(d.after.serviceLevel=a.serviceLevel,d.after.stepId=a.step.id,d.after.maxStepId=a.step.maxId,d.after.percent=i((p-h)/v*100)):(d.after.serviceLevel=e.serviceLevel,d.after.stepId=e.step.id,d.after.maxStepId=e.step.maxId,d.after.percent=i(p/h*100)),d}},42951:(e,a,s)=>{"use strict";s.d(a,{V:()=>n});var i=s(27378),r=s(74262);const n=e=>{let a=e.children;return i.createElement(r.RQ,null,a)}},1535:(e,a,s)=>{"use strict"},72204:(e,a,s)=>{"use strict";s(49491),s(27378),s(1535)},55017:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={contentItem:"_1fh3Oh3yV7PH"}},39323:(e,a,s)=>{"use strict";s.d(a,{S:()=>o});var i=s(27378),r=s(74262),n=s(55017);const o=e=>{let a=e.accentedTitle,s=e.accentedValue,o=e.title,l=e.value,c=e.icon;return i.createElement(r.nN,{className:n.Z.contentItem,data:o,highlighted:a,highlightedValue:s,value:l,icon:c})}},44442:(e,a,s)=>{"use strict";s.d(a,{h:()=>l});var i=s(49491),r=s.n(i),n=s(27378),o=s(74262);const l=e=>n.createElement(o.Eh,r()({},e))},64239:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={allowance:"_1md3IGNnkIkc",allowanceTitle:"_1o5OJUt-pKy4"}},88070:(e,a,s)=>{"use strict";s.d(a,{B:()=>u});var i=s(49491),r=s.n(i),n=s(27378),o=s(82844),l=s(92762),c=s(95029),d=s(64239);const u=e=>{let a=e.currency,s=e.isPositive,i=e.value,u=e.title;return n.createElement(c.oI,{className:d.Z.allowance,value:i},n.createElement("span",{className:d.Z.allowanceTitle},n.createElement(o._,r()(r()({},u),{},{values:{[s?"profit":"loss"]:n.createElement(l.b,{isSign:!0,currency:a,"data-test":"ct-spt-trades-header-pnl-value",value:i})}}))))}},73061:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={quantity:"_1K93t_XKfsIG"}},75287:(e,a,s)=>{"use strict";s.d(a,{M:()=>o});var i=s(27378),r=s(82844),n=s(73061);const o=e=>{let a=e.value;return i.createElement("span",{className:n.Z.quantity},i.createElement(r._,{id:"ct_spt_trades_header_qty",values:{qty:i.createElement("span",{"data-test":"stocks-history-header-quantity"},a)},defaultMessage:"Quantity: {qty}"}))}},28932:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={row:"_1ZPTyocqoFnB",content:"_2ytakbLdj08W",emptyStart:"_3TudnA1iVeFW",full:"_3ypOe8p9q544",withPadding:"_2-0JMFBSqD8P"}},53341:(e,a,s)=>{"use strict";s.d(a,{V:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(74262),l=s(28932);const c=e=>{let a=e.color,s=e.align,r=void 0===s?"full":s,c=e.view,d=e.children;return i.createElement("div",{className:n()({[l.Z.row]:"end"===r})},i.createElement(o.tK,{color:a},i.createElement("div",{className:n()(l.Z.content,{[l.Z.full]:"full"===r,[l.Z.emptyStart]:"end"===r,[l.Z.withPadding]:"withPadding"===c})},d)))}},20021:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={unaccented:"_2NwgKcR4CYfN",title:"_3OdiJCrP9W34",text:"_1g-UL6oG_w-W",negative:"_1Rf5Fc5DAEwM",negativeText:"_1jSi_-eiiZA-",icon:"_31zna94jOt0W"}},98163:(e,a,s)=>{"use strict";s.d(a,{a:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(77740),l=s(20021);const c=e=>{let a=e.isNegative,s=e.isTitle,r=e.children;return i.createElement("span",{className:n()(l.Z.unaccented,{[l.Z.negative]:a,[l.Z.text]:!s,[l.Z.title]:s})},a&&i.createElement(o.Gc9,{className:l.Z.icon}),i.createElement("span",{className:n()(l.Z.unaccented,{[l.Z.negativeText]:a})},r))}},38654:(e,a,s)=>{"use strict";s.d(a,{D:()=>c});var i=s(2243),r=s.n(i),n=s(27378),o=s(8141),l=s(74262);const c=e=>{let a=e.id,s=e.dataId,i=e.lastOpenId,c=e.dataTest,d=e.onOpen,u=e.onClose,m=e.renderHeader,p=e.renderContent;const h=n.useState(a===i),v=r()(h,2),g=v[0],_=v[1],f=n.useCallback((()=>{g||"function"!=typeof d?g&&"function"==typeof u&&u():d(),_(!g)}),[_,g]);return n.useEffect((()=>{g||i!==a||_(!0)}),[_,i]),n.createElement(l.WT,{"data-id":s,key:a,"data-test":c,grouped:!1,isOpened:g,selected:g,onClick:f,hostRef:null,dir:(0,o.L)()},n.createElement(l.WT.Header,null,n.createElement(m,null)),n.createElement(l.WT.Body,null,n.createElement(p,null)))}},7535:(e,a,s)=>{"use strict";s(42951),s(72204),s(39323),s(44442),s(88070),s(75287),s(53341),s(98163),s(38654)},29376:(e,a,s)=>{"use strict";s.d(a,{N:()=>l});var i=s(27378),r=s(97256),n=s(54535),o=s(73034);const l=e=>{let a=e.scrollToContext,s=e.items,l=e.ItemComponent,c=e.preRenderCount;const d=(0,n.Z)({items:s,preRenderCount:c}),u=(0,o.c)({items:d,ItemComponent:l});return i.useEffect((()=>{(null==a?void 0:a.scrollToId)&&a.scrollToElement(document.querySelector("[data-id=".concat(null==a?void 0:a.scrollToId,"]")))}),[a,null==a?void 0:a.scrollToId,d,s]),i.createElement(i.Fragment,null,Object.keys(u).map((e=>i.createElement(i.Fragment,{key:e},i.createElement(r.w,{date:1e3*u[e].anyDateOfDay,"data-test":"stocks-list-date-label"}),u[e].components))))}},73034:(e,a,s)=>{"use strict";s.d(a,{c:()=>o});var i=s(49491),r=s.n(i),n=s(27378);const o=e=>{let a=e.items,s=e.ItemComponent;return a.reduce(((e,a)=>{const i=(e=>{const a=new Date(1e3*e);return"".concat(a.getDate(),".").concat(a.getMonth(),".").concat(a.getFullYear())})(a.date);return r()(r()({},e),{},{[i]:{anyDateOfDay:a.date,components:[...e[i]&&e[i].components||[],n.createElement(s,r()({key:a.id},a))]}})}),{})}},52738:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={container:"_30mKcZOfhXTe"}},83820:(e,a,s)=>{"use strict";s.d(a,{h:()=>o});var i=s(27378),r=s(17302),n=s(52738);const o=()=>i.createElement("div",{className:n.Z.container},i.createElement(r.$j,null))},67795:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={date:"_32uZweIafdF1"}},97256:(e,a,s)=>{"use strict";s.d(a,{w:()=>m});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(18985),d=s(67795);const u=["date"],m=e=>{let a=e.date,s=void 0===a?Date.now():a,i=o()(e,u);const n=new Date(s).getFullYear(),m=(new Date).getFullYear();return l.createElement("time",r()({className:d.Z.date},i),n===m?l.createElement(c.Ji,{value:s,hour12:!1,month:"long",day:"numeric"}):l.createElement(c.Ji,{value:s,hour12:!1,month:"long",day:"numeric",year:"numeric"}))}},67029:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3qEfmkhnFcMW"}},12135:(e,a,s)=>{"use strict";s.d(a,{r:()=>o});var i=s(27378),r=s(82844),n=s(67029);const o=()=>i.createElement("div",{className:n.Z.host},i.createElement(r._,{id:"ct_stp_trades_notrades",defaultMessage:"You have not made a single buy or sell trade in Stocks mode yet"}))},14905:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={container:"_2VKh-87a7pAx",title:"fsihhrcuo5Pn",description:"_3sIpgREYBUbc",button:"_17BxKz2HAuv_"}},33736:(e,a,s)=>{"use strict";s.d(a,{j:()=>l});var i=s(27378),r=s(17302),n=s(82844),o=s(14905);const l=e=>{let a=e.onClick;return i.createElement("div",{className:o.Z.container},i.createElement("h2",{className:o.Z.title},i.createElement(n._,{id:"spt_something_wrong_title",defaultMessage:"Something went wrong"})),i.createElement("p",{className:o.Z.description},i.createElement(n._,{id:"spt_something_wrong_description",defaultMessage:"We are working with this right now"})),i.createElement("div",{className:o.Z.button},i.createElement(r.zx,{onClick:a},i.createElement(n._,{id:"spt_retry_button",defaultMessage:"Refresh"}))))}},92762:(e,a,s)=>{"use strict";s.d(a,{b:()=>u});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(95029);const d=["maximumFractionDigits","minimumFractionDigits"],u=e=>{let a=e.maximumFractionDigits,s=void 0===a?2:a,i=e.minimumFractionDigits,n=void 0===i?2:i,u=o()(e,d);return l.createElement(c.ih,r()({maximumFractionDigits:s,minimumFractionDigits:n},u))}},91981:(e,a,s)=>{"use strict";s.d(a,{k:()=>u});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(18985);const d=["date"],u=e=>{let a=e.date,s=o()(e,d);return l.createElement("span",r()({},s),l.createElement(c.Ji,{value:new Date(1e3*a),year:"2-digit",month:"2-digit",day:"2-digit"})," ",l.createElement(c.Ji,{value:new Date(1e3*a),minute:"2-digit",hour:"2-digit",hour12:!1}))}},43256:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var i=s(49491),r=s.n(i),n=s(27378);const o=e=>n.createElement("div",r()({},e))},81216:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={skeleton:"_1ZuHdsyZPkUx",bone:"_1PBvjbC1th5J","skeleton-bone-blink":"_3Ht96ZlXj1QV",disclaimer:"_1LCw3ir2uYxH",date:"_2uvTfi3gaEsD",card:"_2fDYvgiQJH96"}},5020:(e,a,s)=>{"use strict";s.d(a,{d:()=>l});var i=s(27378),r=s(60042),n=s.n(r),o=s(81216);const l=()=>i.createElement("div",null,i.createElement("span",{className:n()(o.Z.bone,o.Z.disclaimer)}),i.createElement("div",null,i.createElement("span",{className:n()(o.Z.bone,o.Z.date)})),i.createElement("div",null,[...Array(3)].map(((e,a)=>i.createElement("span",{key:"skeleton-".concat(e).concat(a),className:n()(o.Z.bone,o.Z.card)})))))},24529:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={button:"LPOYiEpAjAkB"}},76843:(e,a,s)=>{"use strict";s.d(a,{n:()=>l});var i=s(27378),r=s(17302),n=s(82844),o=s(24529);const l=e=>{let a=e.onClick;return i.createElement("div",{className:o.Z.button},i.createElement(r.zx,{fullWidth:!0,onClick:a},i.createElement(n._,{id:"ct_spt_load_more",defaultMessage:"Load more"})))}},29026:(e,a,s)=>{"use strict";s.d(a,{p:()=>u});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(95029);const d=["maximumFractionDigits","minimumFractionDigits"],u=e=>{let a=e.maximumFractionDigits,s=void 0===a?2:a,i=e.minimumFractionDigits,n=void 0===i?2:i,u=o()(e,d);return l.createElement(c.l1,r()({maximumFractionDigits:s,minimumFractionDigits:n,style:"percent"},u))}},86791:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2k5BhyXHzSpn",iconHolder:"_2Ra1kTm2oIqW",icon:"_28JrxQGHONJs"}},20690:(e,a,s)=>{"use strict";s.d(a,{u:()=>h});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(77740),d=s(17302),u=s(86791);const m=["basePlacement"],p=["ref"],h=e=>{let a=e.content;return l.createElement(d.u,{arrow:!0,transition:!0,disablePortal:!0,delay:80,content:e=>{let s=e.basePlacement,i=o()(e,m);return l.createElement(d._v,r()({className:u.Z.host,placement:s},i),a)}},(e=>{let a=e.ref,s=o()(e,p);return l.createElement("span",r()({className:u.Z.iconHolder,ref:a},s),l.createElement(c.T08,{className:u.Z.icon}))}))}},88780:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={container:"_3eaNCDLbqlON",iconHolder:"_3lMth4ObzAkZ",icon:"nb6Cb7tGtdfv",description:"_2HKXWMSNjV6C",button:"_1o7R_XzRDV7i"}},51014:(e,a,s)=>{"use strict";s.d(a,{K:()=>l});var i=s(27378),r=s(82844),n=s(77740),o=s(88780);const l=e=>{let a=e.isDemoUnavailable,s=e.isRealUnavailable;return i.createElement("div",{className:o.Z.container},i.createElement("div",{className:o.Z.iconHolder},i.createElement(n.Gc9,{className:o.Z.icon})),i.createElement("p",{className:o.Z.description},s?i.createElement(r._,{id:"ct_stp_trades_demo",defaultMessage:"Trading is only available with a demo account"}):null,a?i.createElement(r._,{id:"spt_demo_is_prohibited_here",defaultMessage:"This trading mode is unavailable on a Demo account"}):null))}},37004:(e,a,s)=>{"use strict";var i,r,n;s.d(a,{Gl:()=>r,N1:()=>n}),function(e){e.purchase="purchase",e.sale="sale"}(i||(i={})),function(e){e.success="success",e.canceled="canceled"}(r||(r={})),function(e){e.manual="manual",e.request="request",e.forced="forced"}(n||(n={}))},54535:(e,a,s)=>{"use strict";s.d(a,{Z:()=>o});var i=s(2243),r=s.n(i),n=s(27378);const o=e=>{let a=e.onRender,s=e.items,i=e.preRenderCount,o=void 0===i?5:i,l=e.preRenderTimout,c=void 0===l?300:l;const d=o>0,u=n.useState(d),m=r()(u,2),p=m[0],h=m[1];return n.useEffect((()=>{const e=setTimeout((()=>{p&&h(!1)}),c);return()=>{clearTimeout(e)}}),[]),n.useEffect((()=>{a&&a()}),[p,a]),(e=>{let a=e.items,s=e.preRenderCount;return e.isPreRender&&a.length>s?a.slice(0,s):a})({items:s,preRenderCount:o,isPreRender:p})}},7294:(e,a,s)=>{"use strict";s.d(a,{mt:()=>n});var i=s(27378),r=s(64489);const n=e=>{let a=e.scroll,s=e.isNeedSubscribe,n=e.throttleDelay,o=void 0===n?1e3:n,l=e.runEvent,c=e.checkIsNeedRunEvent;const d=(0,r.Z)((e=>{let a=e.checkIsNeedRunEvent,s=e.runEvent;return e=>{const i="object"==typeof(r=e)&&r.target&&"number"==typeof r.target.scrollHeight?r.target:null;var r;null!==i&&a(i)&&s()}})({runEvent:l,checkIsNeedRunEvent:c}),o,{leading:!0});i.useEffect((()=>((e=>{let a=e.scroll,s=e.isNeedSubscribe,i=e.handleOnScroll;null!==a.scrollRef.current&&s?a.scrollRef.current.addEventListener("scroll",i,{capture:!0}):null===a.scrollRef.current||s||a.scrollRef.current.removeEventListener("scroll",i,{capture:!0})})({isNeedSubscribe:s,scroll:a,handleOnScroll:d}),(e=>{let a=e.scroll,s=e.handleOnScroll;return()=>{null!==a.scrollRef.current&&a.scrollRef.current.removeEventListener("scroll",s,{capture:!0})}})({scroll:a,handleOnScroll:d}))),[s,a,d])}},99287:(e,a,s)=>{"use strict";s.d(a,{CF:()=>u.C,Kj:()=>p.K,N5:()=>d.N,Op:()=>m.O,V1:()=>l.V,tr:()=>h});var i=s(49491),r=s.n(i),n=(s(1454),s(27378)),o=s(28373),l=s(10552),c=(s(7535),s(55932)),d=s(66328),u=s(78105),m=s(48754),p=(s(33736),s(43256),s(5020),s(51014));s(37004),s(7294),s(39808);const h=(0,o.k)(l.V,(e=>n.createElement(c.t,r()({},e))))},10552:(e,a,s)=>{"use strict";s.d(a,{V:()=>i});const i=(0,s(13243).v)({name:"StocksDealsHistory"})},55932:(e,a,s)=>{"use strict";s.d(a,{t:()=>f});var i=s(2243),r=s.n(i),n=s(27378),o=s(51014),l=s(12135),c=s(83820),d=s(33736),u=s(43256),m=s(5020),p=s(76843),h=s(7294),v=s(5495);s(39808);const g=e=>e.scrollHeight-e.scrollTop-e.offsetHeight+e.clientTop<375,_=e=>e.scrollTop+e.offsetHeight-e.clientTop===e.scrollHeight,f=e=>{let a=e.height,s=e.isAvailable,i=e.isDemoUnavailable,f=e.isRealUnavailable,E=e.isError,S=e.isFinite,y=e.isLoading,b=e.isInit,C=e.scroll,T=e.scrollToHash,A=e.clearScrollData,k=e.analytics,w=e.deals,N=e.loadNext,R=e.loadNextIfNoError;const I=w.length>0,D=n.useCallback((()=>{k&&k.eventLoadMore(),N()}),[]),O=n.useCallback((()=>{k&&k.eventReload(),N()}),[]),L=n.useCallback((()=>{k&&k.eventScrollEnd()}),[]),M=n.useState(null==T?void 0:T.id),P=r()(M,2),x=P[0],F=P[1];n.useEffect((()=>{s&&!b&&R()}),[s,b,w]),n.useEffect((()=>{C.toValue(0,"auto")}),[]),n.useEffect((()=>{(null==T?void 0:T.id)&&F(null==T?void 0:T.id)}),[T]);return(0,h.mt)({scroll:C,runEvent:R,checkIsNeedRunEvent:g,isNeedSubscribe:s}),(0,h.mt)({scroll:C,runEvent:L,checkIsNeedRunEvent:_,isNeedSubscribe:S,throttleDelay:100}),s?n.createElement(u.A,null,!I&&y&&n.createElement(m.d,null),!I&&!y&&E&&n.createElement(d.j,{onClick:O}),!I&&!y&&!E&&n.createElement(l.r,null),I&&n.createElement(v.y,{scrollToContext:{scrollToElement:e=>{"function"==typeof A&&A(),e&&C.toElement(e.getBoundingClientRect(),"center","center","smooth")},scrollToId:(null==T?void 0:T.id)||"",lastScrollToId:(null==T?void 0:T.id)||x||""},analytics:k,deals:w,preRenderCount:(B=a,B/125+1)}),I&&y&&n.createElement(c.h,null),I&&!y&&!S&&E&&n.createElement(p.n,{onClick:D})):n.createElement(u.A,null,n.createElement(o.K,{isDemoUnavailable:i,isRealUnavailable:f}));var B}},5495:(e,a,s)=>{"use strict";s.d(a,{y:()=>m});var i=s(49491),r=s.n(i),n=s(27378),o=s(66713),l=s(55945),c=(s(74262),s(95029),s(60042),s(77740),s(38654)),d=s(29376);const u=(e,a)=>s=>{const i=n.useCallback((()=>n.createElement(l.h,r()({},s))),[s.id]),d=n.useCallback((()=>n.createElement(l.V,r()({},s))),[s.id]),u=a.lastScrollToId?+a.lastScrollToId.replace("".concat(o.Fw.STOCKS,"-"),""):null;return n.createElement(c.D,{dataId:"".concat(o.Fw.STOCKS,"-").concat(s.id),lastOpenId:u,id:s.id,key:s.id,dataTest:"spt-deal-history-card-".concat(s.operationType),onOpen:()=>e.eventCardOpen(s.operationType),onClose:()=>e.eventCardClose(s.operationType),renderHeader:i,renderContent:d})},m=n.memo((e=>{let a=e.analytics,s=e.deals,i=e.scrollToContext,r=e.preRenderCount;return n.createElement(d.N,{scrollToContext:i,preRenderCount:r,items:s,ItemComponent:u(a,i)})}),((e,a)=>e.deals.length===a.deals.length&&e.scrollToContext.scrollToId===a.scrollToContext.scrollToId))},70843:(e,a,s)=>{"use strict";s.d(a,{s:()=>E,t:()=>f});var i=s(27378),r=s(82844),n=s(42951),o=s(39323),l=s(44442),c=s(92762),d=(s(95029),s(75287)),u=s(53341),m=s(98163),p=(s(74262),s(91981)),h=s(29026),v=s(20690),g=s(37004),_=s(72051);const f=e=>{let a=e.assetName,s=e.assetTitle,n=e.currency,o=e.icon,p=e.quantity,h=e.status,v=e.total;const _=h===g.Gl.canceled;return i.createElement(l.h,{grouped:!1,pairId:a,icon:o,pairTitle:i.createElement(m.a,{isTitle:!0},s),subTitle:i.createElement(m.a,null,i.createElement(r._,{id:"ct_spt_trade_mode_name",defaultMessage:"Stocks"})),renderAmount:i.createElement(m.a,{isNegative:_},i.createElement(r._,{id:"ct_spt_trades_bought","data-test":"ct-spt-trades-bought-type",defaultMessage:"Buy"}))},i.createElement(u.V,{color:"gamma"},i.createElement(d.M,{value:p})),i.createElement(u.V,null,i.createElement(c.b,{"data-test":"spt-deal-history-header-buy-total",currency:n,value:-v})))},E=e=>{let a=e.accountId,s=e.cost,l=e.currency,d=e.currencyAccount,u=e.date,m=e.id,f=e.purchaseFee,E=e.quantity,S=e.rateQuoteToAccount,y=e.salesSuccessFee,b=e.status,C=e.total,T=e.totalAccount,A=e.unitBoughtPrice,k=e.updatedAt;const w=b===g.Gl.canceled;return i.createElement(n.V,null,i.createElement(_.I,{deal:{id:m,accountId:a,status:b}}),w&&i.createElement(o.S,{title:i.createElement(r._,{id:"ct_spt_canceled_purchase",defaultMessage:"Cancelled purchase"}),value:i.createElement(p.k,{"data-test":"stocks-history-buy-update-at",date:k}),icon:i.createElement(v.u,{content:i.createElement(r._,{id:"ct_spt_cancel_purchase_tooltip",defaultMessage:"The purchase was cancelled for technical reasons. Invested funds have been returned to your account."})}),accentedValue:!0,accentedTitle:!0}),i.createElement(o.S,{title:i.createElement(r._,{id:"ct_spt_trades_card_buyprice",defaultMessage:"Bought at"}),value:i.createElement(c.b,{"data-test":"stocks-history-buy-unit-buy-price",currency:l,value:A})}),i.createElement(o.S,{title:i.createElement(r._,{id:"ct_spt_trades_card_qty",defaultMessage:"Quantity"}),value:i.createElement("span",{"data-test":"stocks-history-buy-qty"},E)}),i.createElement(o.S,{title:i.createElement(r._,{id:"ct_spt_buy_grosscost",defaultMessage:"Cost"}),value:i.createElement(c.b,{"data-test":"stocks-history-buy-gross-cost",currency:l,value:s})}),i.createElement(o.S,{title:i.createElement(r._,{id:"ct_spt_buy_purchasefee",defaultMessage:"Purchase Fee"}),value:i.createElement(h.p,{"data-test":"stocks-history-buy-purchase-fee",value:f})}),i.createElement(o.S,{title:l===d?i.createElement(r._,{id:"ct_spt_buy_cost",defaultMessage:"Total Cost"}):i.createElement(r._,{id:"spt_stock_currency_total",defaultMessage:"Total in {spt_stck_crrnc}",values:{spt_stck_crrnc:null==l?void 0:l.toUpperCase()}}),value:i.createElement(c.b,{"data-test":"stocks-history-total-cost",currency:l,value:C}),accentedValue:!0}),l===d?null:i.createElement(o.S,{title:i.createElement(r._,{id:"spt_exchange_rate",defaultMessage:"Exchange Rate"}),value:i.createElement(i.Fragment,null,i.createElement(c.b,{currency:l,value:1})," ="," ",i.createElement(c.b,{"data-test":"stocks-history-buy-exchange-rate-quote",currency:d,value:S})),icon:i.createElement(v.u,{content:i.createElement(r._,{id:"ct_spt_exchrate_buy_tooltip",defaultMessage:"Currency exchange rate fixed at the moment of the purchase."})})}),l===d?null:i.createElement(o.S,{title:i.createElement(r._,{id:"spt_total_in_account_currency",defaultMessage:"Total in {spt_stck_crrnc}",values:{spt_accnt_crrnc:null==d?void 0:d.toUpperCase()}}),value:i.createElement(c.b,{"data-test":"stocks-history-buy-total-account",currency:d,value:T})}),i.createElement(o.S,{title:i.createElement(r._,{id:"spt_trading_account_history",defaultMessage:"Trading account"}),value:0===a?"DEMO":"#".concat(a)}),i.createElement("br",null),i.createElement(o.S,{title:i.createElement(r._,{id:"ct_spt_ssf_rate",defaultMessage:"Sale Success Fee Rate"}),value:i.createElement(h.p,{"data-test":"stocks-history-buy-sales-success-fee",value:y})}),i.createElement("br",null),i.createElement(o.S,{title:i.createElement(r._,{id:"ct_spt_trade_id",defaultMessage:"Trade ID"}),value:i.createElement("span",{"data-test":"stocks-history-buy-trade-id"},m)}),i.createElement(o.S,{title:i.createElement(r._,{id:"ct_stp_trades_card_date",defaultMessage:"Date and Time"}),value:i.createElement(p.k,{"data-test":"stocks-history-buy-date-time",date:u})}))}},72051:(e,a,s)=>{"use strict";s.d(a,{I:()=>d});var i=s(27378),r=s(21182),n=s(39808),o=s(5457);const l=(0,r.W)(n.C),c=(e,a)=>i.createElement("div",{className:o.Z.host},a),d=e=>i.createElement(l,{props:{deal:e.deal},wrapper:c})},5457:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1C9fEa-6NpTh"}},51816:(e,a,s)=>{"use strict";s.d(a,{M:()=>b,k:()=>y});var i=s(27378),r=s(18985),n=s(82844),o=s(42951),l=s(39323),c=s(44442),d=s(88070),u=s(75287),m=s(53341),p=s(98163),h=(s(74262),s(20690)),v=s(92762),g=s(29026),_=s(91981),f=s(37004),E=s(72051);const S=(0,r.vU)({profit:{id:"ct_spt_trades_header_netprofit",defaultMessage:"Net Profit: "},loss:{id:"ct_spt_trades_header_netloss",defaultMessage:"Net Loss: "}}),y=e=>{let a=e.assetName,s=e.assetTitle,r=e.currencyAccount,o=e.icon,l=e.netProfitOrLossAccount,h=e.quantity,g=e.status,_=e.totalAccount;const E=l>=0,y=E?"profit":"loss",b=g===f.Gl.canceled;return i.createElement(c.h,{grouped:!1,icon:o,pairId:a,pairTitle:i.createElement(p.a,{isTitle:!0},s),subTitle:i.createElement(p.a,null,i.createElement(n._,{id:"ct_spt_trade_mode_name",defaultMessage:"Stocks"})),renderAmount:i.createElement(p.a,{isNegative:b},i.createElement(n._,{id:"ct_spt_trades_sold","data-test":"ct-spt-trades-sold-type",defaultMessage:"Sold"})),renderControls:i.createElement(m.V,{view:"withPadding",color:"gamma"},i.createElement(u.M,{value:h}),i.createElement(d.B,{currency:r,value:l,isPositive:E,title:S[y]}))},i.createElement(m.V,{align:"end"},i.createElement(v.b,{"data-test":"spt-deal-history-header-sell-total",currency:r,value:_,isSign:!0})))},b=e=>{let a=e.accountId,s=e.avgBuyPrice,r=e.avgSuccessFee,c=e.currency,d=e.currencyAccount,u=e.date,m=e.id,p=e.invested,S=e.netProfitOrLoss,y=e.netProfitOrLossAccount,b=e.proceeds,C=e.profitOrLoss,T=e.quantity,A=e.rateQuoteToAccount,k=e.reason,w=e.saleSuccessFee,N=e.soldPrice,R=e.status,I=e.total,D=e.totalAccount,O=e.updatedAt;const L=k===f.N1.forced,M=R===f.Gl.canceled;return i.createElement(o.V,null,i.createElement(E.I,{deal:{id:m,accountId:a,status:R}}),L&&i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_forced_status",defaultMessage:"Sold"}),value:i.createElement(n._,{id:"ct_spt_reason_sold",defaultMessage:"by the broker"}),icon:i.createElement(h.u,{content:i.createElement(n._,{id:"ct_spt_forced_sale_tooltip",defaultMessage:"The sale was made automatically because quotes for this asset are no longer available."})}),accentedValue:!0,accentedTitle:!0}),M&&i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_canceled_sale",defaultMessage:"Sold"}),value:i.createElement(_.k,{"data-test":"stocks-history-sell-update-at",date:O}),icon:i.createElement(h.u,{content:i.createElement(n._,{id:"ct_spt_cancel_sale_tooltip",defaultMessage:"The sale was cancelled for technical reasons. Detailed information has been sent to your email."})}),accentedValue:!0,accentedTitle:!0}),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_trades_card_sellprice",defaultMessage:"Sold at"}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-sold-price",currency:c,value:N})}),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_trades_card_qty",defaultMessage:"Quantity"}),value:i.createElement("span",{"data-test":"stocks-history-sell-qty"},T)}),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_sell_grossproceed",defaultMessage:"Proceeds"}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-proceeds",currency:c,value:b})}),i.createElement("br",null),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_avgbuyprice",defaultMessage:"Avg Buy Price"}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-avg-buy-price",currency:c,value:s}),icon:i.createElement(h.u,{content:i.createElement(n._,{id:"ct_spt_avgbuyprice_tooltip",defaultMessage:"Average price you paid for units in the position. It is equal to position investments divided by position volume."})})}),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_sell_invested",defaultMessage:"Invested"}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-invested",currency:c,value:p}),icon:i.createElement(h.u,{content:i.createElement(n._,{id:"ct_spt_sell_invested_tooltip",defaultMessage:"Investments in the units you are selling upon purchase — average buy price multiplied by quantity of units for sale."})})}),i.createElement(l.S,{title:C>=0?i.createElement(n._,{id:"ct_spt_gross_profit",defaultMessage:"Gross Profit"}):i.createElement(n._,{id:"ct_spt_gross_loss",defaultMessage:"Gross Loss"}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-gross-pnl",isSign:!0,currency:c,value:C})}),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_sell_ssf",defaultMessage:"Sale Success Fee"}),value:i.createElement(i.Fragment,null,i.createElement(v.b,{"data-test":"stocks-history-sell-avg-success-fee",currency:c,value:w}),"(",i.createElement(g.p,{"data-test":"stocks-history-sell-avg-success-fee-perc",value:r}),")"),icon:i.createElement(h.u,{content:i.createElement(n._,{id:"ct_spt_sell_avgssf_tooltip",defaultMessage:"The position average fee is averaged since fees for units bought at various trades may differ."})})}),i.createElement("br",null),c===d?i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_sell_totalproceeds",defaultMessage:"Total"}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-total",currency:c,value:I}),accentedValue:!0}):i.createElement(l.S,{title:i.createElement(n._,{id:"spt_stock_currency_total",defaultMessage:"Total in {spt_stck_crrnc}",values:{spt_stck_crrnc:null==c?void 0:c.toUpperCase()}}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-total",currency:c,value:I}),accentedValue:!0}),i.createElement(l.S,{title:c===d?S>=0?i.createElement(n._,{id:"ct_stp_trades_card_netprofit",defaultMessage:"Net Profit"}):i.createElement(n._,{id:"ct_stp_trades_card_netloss",defaultMessage:"Net Loss"}):S>=0?i.createElement(n._,{id:"ct_spt_net_profit_stock",defaultMessage:"Net Profit in {stck_crnnc}",values:{stck_crnnc:null==c?void 0:c.toUpperCase()}}):i.createElement(n._,{id:"ct_spt_net_loss_stock",defaultMessage:"Net Loss in {stck_crrnc}",values:{stck_crrnc:null==c?void 0:c.toUpperCase()}}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-net-pnl",isSign:!0,currency:c,value:S})}),c===d?null:i.createElement(l.S,{title:i.createElement(n._,{id:"spt_exchange_rate",defaultMessage:"Exchange Rate"}),value:i.createElement(i.Fragment,null,i.createElement(v.b,{currency:c,value:1})," ="," ",i.createElement(v.b,{"data-test":"stocks-history-sell-exchange-rate-quote",currency:d,value:A})),icon:i.createElement(h.u,{content:i.createElement(n._,{id:"ct_spt_exchrate_buy_tooltip",defaultMessage:"Currency exchange rate fixed at the moment of the purchase."})})}),c===d?null:i.createElement(l.S,{title:i.createElement(n._,{id:"spt_total_in_account_currency",defaultMessage:"Total in {spt_stck_crrnc}",values:{spt_accnt_crrnc:null==d?void 0:d.toUpperCase()}}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-total-account",currency:d,value:D})}),c===d?null:i.createElement(l.S,{title:y>=0?i.createElement(n._,{id:"ct_spt_net_profit_accnt",defaultMessage:"Net Profit in {accnt_crrnc}",values:{accnt_crrnc:null==d?void 0:d.toUpperCase()}}):i.createElement(n._,{id:"ct_spt_net_loss_accnt",defaultMessage:"Net Loss in {accnt_crnnc}",values:{accnt_crnnc:null==d?void 0:d.toUpperCase()}}),value:i.createElement(v.b,{"data-test":"stocks-history-sell-net-pnl-account",isSign:!0,currency:d,value:y})}),i.createElement("br",null),i.createElement(l.S,{title:i.createElement(n._,{id:"spt_trading_account_history",defaultMessage:"Trading account"}),value:i.createElement("span",{"data-test":"stocks-history-sell-trading-account"},0===a?"DEMO":"#".concat(a))}),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_spt_trade_id",defaultMessage:"Trade ID"}),value:i.createElement("span",{"data-test":"stocks-history-sell-trade-id"},m)}),i.createElement(l.S,{title:i.createElement(n._,{id:"ct_stp_trades_card_date",defaultMessage:"Date and Time"}),value:i.createElement(_.k,{"data-test":"stocks-history-sell-date-time",date:u})}))}},55945:(e,a,s)=>{"use strict";s.d(a,{V:()=>d,h:()=>c});var i=s(49491),r=s.n(i),n=s(27378),o=s(70843),l=s(51816);const c=e=>{switch(e.operationType){case"purchase":return n.createElement(o.t,r()({},e));case"sale":return n.createElement(l.k,r()({},e));default:return null}},d=e=>{switch(e.operationType){case"purchase":return n.createElement(o.s,r()({},e));case"sale":return n.createElement(l.M,r()({},e));default:return null}}},39808:(e,a,s)=>{"use strict";s.d(a,{C:()=>i});const i=(0,s(84584).Z)({id:"stocksDealsHistoryCardContentSlot"})},66328:(e,a,s)=>{"use strict";s.d(a,{N:()=>DealsHistoryService});var i=s(49491),r=s.n(i),n=s(47014),o=s.n(n),l=s(59312),c=s(60521),d=s(32296),u=s(62257);const m={id:0,type:"demo"},p={};class DealsHistoryService{constructor(e){this.isLoading=!1,this.isError=!1,this.account=m,this.accountsDeals=p,this.accountsConnections={},this.createConnection=e,this.setAccount=this.setAccount.bind(this),this.loadNextIfNoError=this.loadNextIfNoError.bind(this),this.loadNext=this.loadNext.bind(this),this.handleLoaded=this.handleLoaded.bind(this),this.handleError=this.handleError.bind(this),this.addAccountDeals=this.addAccountDeals.bind(this)}get isFinite(){return this.connection.isFinite}get deals(){const e=this.accountsDeals[this.account.id];return e&&e.items?e.items:[]}get isInit(){const e=this.accountsDeals[this.account.id];return(null==e?void 0:e.isInit)||!1}get connection(){return this.accountsConnections[this.account.id]}setLastDeal(e){this.lastDeal=(0,u.x)(e,this.pairCollection)}loadNextIfNoError(){var e=this;return o()((function*(){if(!e.isError)return e.loadNext()}))()}loadNext(){var e=this;return o()((function*(){if(!e.isFinite&&!e.isLoading)return e.fetchDealsHistory()}))()}reload(){var e=this;return o()((function*(){if(!e.isFinite&&!e.isLoading)return e.connection.resetCursor(),e.clearAccountDeals(),e.fetchDealsHistory()}))()}setAccount(e){this.account=e,this.initAccountConnection()}addAccountDeals(e){var a;const s=e&&e.length?e[0].accountId:this.account.id,i=(null===(a=this.accountsDeals[s])||void 0===a?void 0:a.items)||[],r=[...e,...i],n={[s]:{items:(0,d.m)(r,"id").sort(((e,a)=>a.id-e.id))}};(0,c.set)(this.accountsDeals,n)}initAccountDeals(){const e=this.accountsDeals[this.account.id],a={[this.account.id]:r()(r()({},e),{},{isInit:!0})};(0,c.set)(this.accountsDeals,a)}fetchDealsHistory(){return this.isLoading=!0,this.isError=!1,this.initAccountDeals(),this.connection.fetch(this.account).then(this.connection.setNextCursor).then((e=>(0,u.d)(e,this.pairCollection))).then(this.handleLoaded).catch(this.handleError)}initAccountConnection(){this.accountsConnections[this.account.id]||(this.accountsConnections[this.account.id]=this.createConnection())}clearAccountDeals(){(0,c.set)(this.accountsDeals,{[this.account.id]:{items:[]}})}handleLoaded(e){this.isLoading=!1,this.addAccountDeals(e)}handleError(){this.isLoading=!1,this.isError=!0}}(0,l.gn)([c.observable],DealsHistoryService.prototype,"isLoading",void 0),(0,l.gn)([c.observable],DealsHistoryService.prototype,"isError",void 0),(0,l.gn)([c.observable],DealsHistoryService.prototype,"account",void 0),(0,l.gn)([c.observable],DealsHistoryService.prototype,"lastDeal",void 0),(0,l.gn)([c.computed],DealsHistoryService.prototype,"isFinite",null),(0,l.gn)([c.computed],DealsHistoryService.prototype,"deals",null),(0,l.gn)([c.observable],DealsHistoryService.prototype,"accountsDeals",void 0),(0,l.gn)([c.action],DealsHistoryService.prototype,"setLastDeal",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"loadNextIfNoError",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"loadNext",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"reload",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"setAccount",null),(0,l.gn)([c.action.bound],DealsHistoryService.prototype,"addAccountDeals",null),(0,l.gn)([c.action.bound],DealsHistoryService.prototype,"initAccountDeals",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"fetchDealsHistory",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"clearAccountDeals",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"handleLoaded",null),(0,l.gn)([c.action],DealsHistoryService.prototype,"handleError",null)},78105:(e,a,s)=>{"use strict";s.d(a,{C:()=>Cursor});var i=s(59312),r=s(60521);const n=1,o=100,l=null,c=null;class Cursor{constructor(){this.page=n,this.limit=o,this.pages=l,this.records=c,this.init=this.init.bind(this),this.next=this.next.bind(this),this.get=this.get.bind(this),this.reset=this.reset.bind(this)}get isFinite(){return!!this.isInit&&this.page>this.pages}get isInit(){return this.pages!==l&&this.records!==c}init(e){this.pages=e.pages,this.records=e.records}get(){return{limit:this.limit,page:this.page}}next(){this.isFinite||this.page++}reset(){this.page=n,this.pages=l}setLimit(e){if(this.isInit){const a=this.limit,s=this.page>1?this.page-1:1,i=a%s>0?1:0,r=this.records%e>0?1:0,n=a*s,o=Math.trunc(n/e)+i;this.page=0===o?1:o,this.pages=Math.trunc(this.records/e)+r}this.limit=e}}(0,i.gn)([r.observable],Cursor.prototype,"page",void 0),(0,i.gn)([r.observable],Cursor.prototype,"limit",void 0),(0,i.gn)([r.observable],Cursor.prototype,"pages",void 0),(0,i.gn)([r.computed],Cursor.prototype,"isFinite",null),(0,i.gn)([r.action],Cursor.prototype,"init",null),(0,i.gn)([r.action],Cursor.prototype,"next",null),(0,i.gn)([r.action],Cursor.prototype,"reset",null),(0,i.gn)([r.action],Cursor.prototype,"setLimit",null)},48754:(e,a,s)=>{"use strict";s.d(a,{O:()=>DealsHistoryHttp});var i=s(49491),r=s.n(i),n=s(59312),o=s(60521),l=s(94811);class DealsHistoryHttp{constructor(e,a,s){this.http=e,this.project=s,this.cursor=a,this.fetch=this.fetch.bind(this),this.setNextCursor=this.setNextCursor.bind(this),this.resetCursor=this.resetCursor.bind(this)}fetch(e){let a=e.id,s=e.type;return this.http.post("/deals/history",{version:"v1",project:this.project,data:r()({account_id:a,group:s},this.cursor.get())})}setNextCursor(e){return this.cursor.init((0,l.l)(e)),this.cursor.next(),e}resetCursor(){this.cursor.reset()}get isFinite(){return this.cursor.isFinite}}(0,n.gn)([o.computed],DealsHistoryHttp.prototype,"isFinite",null)},94811:(e,a,s)=>{"use strict";s.d(a,{l:()=>i});const i=e=>({pages:e.pagination_info.pages,records:e.pagination_info.records})},62257:(e,a,s)=>{"use strict";s.d(a,{d:()=>o,x:()=>n});const i=(e,a)=>{var s;const i=null===(s=null==a?void 0:a.getById(e.asset))||void 0===s?void 0:s.icon,r=e.sale_values.pnl,n=e.sale_values.avg_buy_price,o=e.units_float_qty,l=e.price,c=e.sale_values.avg_sale_success_fee_perc,d="d"===e.currency_account?"demo":e.currency,u="d"===e.currency_account?"demo":e.currency_account;return{accountId:e.account_id,assetName:e.asset,assetTitle:e.asset_title,avgBuyPrice:n,avgSuccessFee:c,currency:d,currencyAccount:u,date:e.date_time,icon:i,id:e.id,invested:+(n*o).toFixed(12),netProfitOrLoss:e.sale_values.net_pnl,netProfitOrLossAccount:e.sale_values.net_pnl_account,operationType:e.type,proceeds:+(l*o).toFixed(12),profitOrLoss:r,quantity:o,rateQuoteToAccount:e.rate_quote_to_account,reason:e.reason,saleSuccessFee:e.fee,soldPrice:l,status:e.status,total:e.total,totalAccount:e.total_account,updatedAt:e.updated_at}},r=(e,a)=>{var s;const i=null===(s=null==a?void 0:a.getById(e.asset))||void 0===s?void 0:s.icon,r=e.price,n=e.units_float_qty,o="d"===e.currency_account?"demo":e.currency,l="d"===e.currency_account?"demo":e.currency_account;return{accountId:e.account_id,assetName:e.asset,assetTitle:e.asset_title,cost:+(r*n).toFixed(8),currency:o,currencyAccount:l,date:e.date_time,icon:i,id:e.id,operationType:e.type,purchaseFee:e.fee_perc,quantity:n,rateQuoteToAccount:e.rate_quote_to_account,reason:e.reason,salesSuccessFee:e.purchase_values.sale_success_fee_perc,status:e.status,total:e.total,totalAccount:e.total_account,unitBoughtPrice:r,updatedAt:e.updated_at}},n=(e,a)=>{return(s=e.type,{purchase:r,sale:i}[s])(e,a);var s},o=(e,a)=>e.deals.map((e=>n(e,a)))},32296:(e,a,s)=>{"use strict";s.d(a,{m:()=>i});const i=(e,a)=>[...e.reduce(((e,s)=>{const i=null==s?s:s[a];return e.has(i)||e.set(i,s),e}),new Map).values()]},74228:(e,a,s)=>{"use strict";s.d(a,{F5:()=>o,FE:()=>i,Ki:()=>l,LQ:()=>r,d0:()=>n});const i="928243f2-86d8-48d3-8a33-75cd0bc12f2a",r=360018687040,n={ar:"3",en:"5",es:"9",fr:"6",hi:"8",id:"11",ja:"10",ko:"12",ms:"13",pt:"1",ru:"2",th:"26",tr:"14",vi:"21",zh:"25",fa:"35"};var o,l;!function(e){e.NOT_INITED="not inited",e.IN_PROCESS="in progress",e.SUCCESS="success",e.ERROR="error"}(o||(o={})),function(e){e.LIVECHAT="lc",e.ZENDESK="zd",e.LIVETEX="lt"}(l||(l={}))},73446:(e,a,s)=>{"use strict";s.d(a,{Z:()=>n});var i=s(44933),r=s(6678);const n=e=>({zd:i.V.getInstance,lt:r.M.getInstance}[e])},47208:(e,a,s)=>{"use strict";s.d(a,{Ki:()=>i.Ki,NL:()=>o.N,Z$:()=>r.Z,_E:()=>n._});s(66731);var i=s(74228),r=s(73446),n=s(1962),o=s(79861);s(44933)},1962:(e,a,s)=>{"use strict";s.d(a,{_:()=>LiveChatWidget});var i=s(47014),r=s.n(i),n=s(27378),o=s(46830),l=s(74228),c=s(46682);class LiveChatWidget extends n.Component{constructor(e){super(e),this.timeout=0,this.onChatWindowOpened=()=>{(0,c._V)()},this.setCustomIdentityProvider(),this.onChatLoaded=this.onChatLoaded.bind(this),this.onChatWindowMinimized=this.onChatWindowMinimized.bind(this),this.hideShowChat=this.hideShowChat.bind(this)}setCustomIdentityProvider(){var e=this;window.__lc=window.__lc||{},window.__lc.custom_identity_provider=()=>{const a=function(){var a=r()((function*(){const a=yield e.props.fetchToken();return{accessToken:a.access_token,creationDate:a.creation_date,entityId:a.entity_id,expiresIn:a.expires_in,licenseId:a.license_id,tokenType:a.token_type}}));return function(){return a.apply(this,arguments)}}();return{getToken:()=>a(),getFreshToken:()=>a(),hasToken:()=>Promise.resolve(!0),invalidate:()=>Promise.resolve(!1)}}}componentDidUpdate(e){e.active!==this.props.active&&this.hideShowChat()}hideChat(){var e,a;try{window.commonMethodRunner.close()}catch(e){console.error(e)}this.props.dontHide||"function"==typeof(null===(e=window.LC_API)||void 0===e?void 0:e.hide_chat_window)&&(null===(a=window.LC_API)||void 0===a||a.hide_chat_window())}showChat(){var e,a;this.props.minimizeOnStart?this.minimizeChat():"function"==typeof(null===(e=window.LC_API)||void 0===e?void 0:e.show_full_view)&&(null===(a=window.LC_API)||void 0===a||a.show_full_view())}hideShowChat(){(0,c.$m)(),this.props.active?this.showChat():this.hideChat()}minimizeChat(){var e,a;"function"==typeof(null===(e=window.LC_API)||void 0===e?void 0:e.minimize_chat_window)&&(null===(a=window.LC_API)||void 0===a||a.minimize_chat_window())}onChatWindowMinimized(){this.props.onHide&&this.props.onHide(),(0,c.p3)(),this.props.hideOnMinimize&&this.hideChat()}onChatLoaded(e){e.on_after_load=this.hideShowChat}getGroupID(){return this.props.groupId&&Object.values(l.d0).includes(this.props.groupId)?this.props.groupId:l.d0[this.props.lang]||l.d0.en}render(){const e=this.props,a=e.groupId,s=e.params;return n.createElement(o.Z,{license:Number("12581301"),group:Number(a)||Number(this.getGroupID()),onChatLoaded:this.onChatLoaded,onChatWindowMinimized:this.onChatWindowMinimized,onChatWindowOpened:this.onChatWindowOpened,params:s})}}LiveChatWidget.defaultProps={active:!0,hideOnMinimize:!1,minimizeOnStart:!0,dontHide:!1}},46682:(e,a,s)=>{"use strict";s.d(a,{$m:()=>n,_V:()=>o,p3:()=>l});const i=document.createElement("button");let r;const n=()=>{try{if(document.querySelector(".chat-widget__close-button"))return;const e="http://www.w3.org/2000/svg",a=document.getElementById("chat-widget-container");i.type="button",i.onclick=()=>window.LC_API.hide_chat_window(),i.classList.add("chat-widget__close-button");const s=document.createElementNS(e,"svg");s.setAttributeNS(null,"color","inherit"),s.setAttributeNS(null,"viewBox","0 0 32 32");const r=document.createElementNS(e,"path");r.setAttributeNS(null,"d","M17.4,16l5.3,5.3c0.4,0.4,0.4,1,0,1.4c-0.4,0.4-1,0.4-1.4,0L16,17.4l-5.3,5.3c-0.4,0.4-1,0.4-1.4,0\tc-0.4-0.4-0.4-1,0-1.4l5.3-5.3l-5.3-5.3c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0\tc0.4,0.4,0.4,1,0,1.4L17.4,16z"),s.appendChild(r),i.appendChild(s),a&&a.appendChild(i)}catch(e){}},o=()=>{try{i.style.display="none"}catch(e){}},l=()=>{try{clearTimeout(r),r=setTimeout((()=>{i.removeAttribute("style")}),500)}catch(e){}}},79861:(e,a,s)=>{"use strict";s.d(a,{N:()=>o});var i=s(27378),r=s(31542),n=s(1962);const o=e=>{let a=e.active,s=e.onHide,o=e.hideOnMinimize,l=e.minimizeOnStart,c=e.lang,d=e.groupId,u=e.params,m=e.fetchToken;var p,h;window.LC_API&&("function"==typeof(null===(p=window.LC_API)||void 0===p?void 0:p.show_full_view)&&(null===(h=window.LC_API)||void 0===h||h.show_full_view()));(0,r.render)(i.createElement(n._,{active:a,onHide:s,hideOnMinimize:o,minimizeOnStart:l,fetchToken:m,lang:c,groupId:d,params:u}),document.body.appendChild(document.createElement("div")))}},6678:(e,a,s)=>{"use strict";s.d(a,{M:()=>LivetexWidget});var i=s(30390);class LivetexWidget{constructor(e){this.data=e}static getInstance(e){return LivetexWidget.instance||(LivetexWidget.instance=new LivetexWidget(e)),LivetexWidget.instance}open(){var e,a,s,r,n,o;return(0,i.G)({openChat:!0,lang:this.data.lang,userId:null===(e=this.data.user)||void 0===e?void 0:e.id,email:null===(a=this.data.user)||void 0===a?void 0:a.email,name:null===(s=this.data.user)||void 0===s?void 0:s.name,phone:null===(r=this.data.user)||void 0===r?void 0:r.phone,serviceLevel:null===(n=this.data.serviceLevels)||void 0===n||null===(o=n.level)||void 0===o?void 0:o.name,supportChat:this.data.currentSupportChat}),Promise.resolve()}show(){var e,a,s,r,n,o;return(0,i.G)({openChat:!1,lang:this.data.lang,userId:null===(e=this.data.user)||void 0===e?void 0:e.id,email:null===(a=this.data.user)||void 0===a?void 0:a.email,name:null===(s=this.data.user)||void 0===s?void 0:s.name,phone:null===(r=this.data.user)||void 0===r?void 0:r.phone,serviceLevel:null===(n=this.data.serviceLevels)||void 0===n||null===(o=n.level)||void 0===o?void 0:o.name,supportChat:this.data.currentSupportChat}),Promise.resolve()}}LivetexWidget.instance=null},30390:(e,a,s)=>{"use strict";function i(e){if("true"===localStorage.getItem("DISABLE_LIVETEX_CHAT"))return;window.LiveTex=window.LiveTex||{};const a=e.lang,s=e.userId,i=e.supportChat,r=e.email,n=e.name,o=e.phone,l=e.serviceLevel,c=e.openChat,d=void 0===c||c;if(!i)return;if(window.LiveTex.inited&&d)return void window.LiveTex.showWelcomeWindow();if(window.LiveTex.loading)return;window.LiveTex.loading=!0;const u="ar"===a||"hi"===a||"ms"===a||"bn"===a||"ur"===a||"ja"===a||"fl"===a?"en":a,m="https://widgets-3-omni-iframe.livetex.me";window.liveTexID=i.chatId,window.liveTex=!0,window.liveTex_object=!0,window.ltLang=u,window.ltSkipBrowserCheck=!0,window.ltDebug=!0,window.LiveTex={onLiveTexReady(){window.LiveTex.setConversationAttributes({email:"".concat(r)||"",name:"".concat(n)||"",phone:"".concat(o)||"",trader_id:"".concat(s)||"not identified",service_level:"".concat(l)||""},{is_identify:s?"1":"0",user_id:"".concat(s||"0")}),d&&window.LiveTex.showWelcomeWindow(),function(){const e=window.document.querySelector(".lt-welcome");if(!e)return;const a=e.querySelector(".lt-wrapper-close");a&&(a.dataset.test="livetex-close-button")}()}};const p=e=>m+e,h=new XMLHttpRequest;h.onreadystatechange=function(){if(4===h.readyState&&200===h.status){window.LiveTex.envSettings=JSON.parse(h.responseText),window.LiveTex.envSettings.LTX_URL="".concat(m,"/");const e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=p("/js/app3.js"),e.onload=function(){document.body.removeChild(e),window.LiveTex.inited=!0,window.LiveTex.loading=!1},document.body.appendChild(e)}else 200!==h.status&&(window.LiveTex.loading=!1)},h.open("GET",p("/js/widgetsSettings.json")),h.send()}s.d(a,{G:()=>i})},44933:(e,a,s)=>{"use strict";s.d(a,{V:()=>ZendeskWidget});var i=s(47014),r=s.n(i),n=s(74228),o=s(5382);class ZendeskWidget{constructor(e){this.data=e,this.initStatus=n.F5.NOT_INITED}static getInstance(e){return ZendeskWidget.instance||(ZendeskWidget.instance=new ZendeskWidget(e)),ZendeskWidget.instance}open(e){var a=this;return r()((function*(){a.initStatus===n.F5.NOT_INITED&&(yield a.init(e)),a.initStatus===n.F5.SUCCESS&&(window.zE("webWidget","open"),window.zE("webWidget","show"))}))()}show(){var e=this;return r()((function*(){e.initStatus===n.F5.NOT_INITED&&(yield e.init()),e.initStatus===n.F5.SUCCESS&&window.zE("webWidget","show")}))()}setLocale(e){window.zE("webWidget","setLocale",e)}init(){var e=arguments,a=this;return r()((function*(){let s=!(e.length>0&&void 0!==e[0])||e[0];return a.initStatus=n.F5.IN_PROCESS,(yield a.loadScript())&&a.initForm(a.data)?(a.setLocale(a.data.lang),s&&window.zE("webWidget:on","close",(()=>{window.zE("webWidget","hide")})),a.initStatus=n.F5.SUCCESS,!0):(a.initStatus=n.F5.ERROR,!1)}))()}loadScript(){return r()((function*(){return new Promise((e=>{const a=document.createElement("script");a.id="ze-snippet",a.src="https://static.zdassets.com/ekr/snippet.js?key=".concat(n.FE),document.body.appendChild(a),a.onload=()=>{window.zE("webWidget","hide"),e(!0)},a.onerror=()=>{console.error("Zendesk load error"),e(!1)}}))}))()}initForm(e){var a,s,i;return e.currentSupportChat?(window.zESettings={webWidget:{color:{theme:"#1c1c45"},contactForm:{fields:[{id:n.LQ,prefill:{"*":e.currentSupportChat.chatId}},{id:"name",prefill:{"*":"".concat((null===(a=e.user)||void 0===a?void 0:a.name)||""," ").concat((null===(s=e.user)||void 0===s?void 0:s.surname)||"").trim()}},{id:"email",prefill:{"*":null===(i=e.user)||void 0===i?void 0:i.email}}]}}},window.zE("webWidget:on","open",(()=>{this.removeCustomField(n.LQ)})),!0):(console.error("Missing support chat data"),!1)}removeCustomField(e){this.getWebWidgetForm().then((a=>{var s,i;a&&(null===(s=a.querySelector('label[data-fieldid="key:'.concat(e,'"]')))||void 0===s||null===(i=s.parentElement)||void 0===i||i.remove())}))}getWebWidgetForm(){return r()((function*(){const e=yield(0,o.r)(document.body,"#webWidget");return e&&(0,o.f)(e)&&null!==e.contentDocument?(0,o.r)(e.contentDocument.body,"form"):null}))()}}ZendeskWidget.instance=null},5382:(e,a,s)=>{"use strict";s.d(a,{f:()=>r,r:()=>i});const i=(e,a)=>{const s=document.querySelector(a);return new Promise((i=>{if(s)return i(s);const r=new MutationObserver((()=>{const s=e.querySelector(a);if(s)return r.disconnect(),i(s)}));r.observe(e,{childList:!0,subtree:!0})}))},r=e=>null!==e&&"IFRAME"===e.tagName},88407:(e,a,s)=>{"use strict";s.d(a,{z:()=>Collapsible});var i=s(49491),r=s.n(i),n=s(27378),o=s(60042),l=s.n(o);class Collapsible extends n.Component{constructor(e){super(e),this.setContainerRef=e=>{this.container=e},this.setContentRef=e=>{this.content=e},e.initialStyle?this.initialStyle=r()({},e.initialStyle):this.initialStyle=e.isOpened?{height:"auto",overflow:"initial",opacity:"1"}:{height:"0px",overflow:"hidden",opacity:"0"}}componentDidMount(){this.onResize()}shouldComponentUpdate(e){const a=this.props,s=a.isOpened,i=a.children;return e.isOpened!==s||e.children!==i}getSnapshotBeforeUpdate(){if(!this.container||!this.content)return null;if("auto"===this.container.style.height){const e=this.content.clientHeight;this.container.style.height="".concat(e,"px")}return null}componentDidUpdate(){this.onResize()}componentWillUnmount(){window.clearTimeout(this.timeout)}onResize(){if(window.clearTimeout(this.timeout),!this.container||!this.content)return;const e=this.props,a=e.isOpened,s=e.checkTimeout,i=this.container.clientHeight,r=this.content.clientHeight;!a&&0===i||a&&r===i?this.onRest({isOpened:a,contentHeight:r}):(this.onWork({isOpened:a,contentHeight:r}),this.timeout=window.setTimeout((()=>this.onResize()),s))}onWork(e){let a=e.isOpened,s=e.contentHeight;if(!this.container||!this.content)return;const i=a&&this.container.style.height==="".concat(s,"px"),r=!a&&"0px"===this.container.style.height;i||r||(this.container.style.overflow="hidden",this.container.style.height=a?"".concat(s,"px"):"0px",this.container.style.opacity=a?"1":"0",this.props.onWork&&this.props.onWork({isOpened:a}))}onRest(e){let a=e.isOpened,s=e.contentHeight;if(!this.container||!this.content)return;const i=a&&this.container.style.height==="".concat(s,"px"),r=!a&&"0px"===this.container.style.height;(i||r)&&(this.container.style.overflow=a?"initial":"hidden",this.container.style.height=a?"auto":"0px"),this.props.onRest&&this.props.onRest({isOpened:a})}render(){const e=this.props,a=e.theme,s=e.children,i=e.classNameWrapper,r=e.classNameContent;return n.createElement("div",{ref:this.setContainerRef,className:l()("collapsible-wrapper",a.wrapper,i),style:this.initialStyle},n.createElement("div",{ref:this.setContentRef,className:l()("collapsible-content",a.content,r)},s))}}Collapsible.defaultProps={theme:{wrapper:"ReactCollapse--wrapper",content:"ReactCollapse--content"},checkTimeout:50}},40222:(e,a,s)=>{"use strict";s.d(a,{P:()=>p});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(77740);const m=["isOpened","className","onClick"],p=e=>{let a=e.isOpened,s=e.className,i=e.onClick,n=void 0===i?()=>null:i,c=o()(e,m);return l.createElement("span",r()({onClick:n,className:d()("collapsible-arrows",a&&"collapsible-arrows_opened",s)},c),l.createElement(u.BDo,null))}},83669:(e,a,s)=>{"use strict";s.d(a,{u:()=>CollapsibleUnmount});var i=s(27378),r=s(88407),n=s(69845);const o=()=>null,l=()=>null;o.displayName="Header",l.displayName="Body";class CollapsibleUnmount extends i.Component{constructor(e){super(e),this.onWork=e=>{let a=e.isOpened;this.setState({isResting:!1,isOpened:a})},this.onRest=e=>{let a=e.isOpened;this.setState({isResting:!0,isOpened:a,isInitialRender:!1})},this.getInitialStyle=()=>{const e=this.state,a=e.isOpened;return e.isInitialRender&&a?{height:"auto",overflow:"initial",opacity:"1"}:{height:"0px",overflow:"hidden",opacity:"0"}},this.state={isResting:!0,isOpened:e.isOpened,isInitialRender:!0}}componentDidUpdate(e){const a=this.props.isOpened;e.isOpened!==a&&this.setState({isResting:!1,isOpened:a,isInitialRender:!1})}render(){const e=(0,n.H)(this.props.children,o),a=(0,n.H)(this.props.children,l),s=this.state,c=s.isResting,d=s.isOpened;return i.createElement("div",{className:"collapsible-unmount"},e&&e.props.children,c&&!d?null:i.createElement(r.z,{onWork:this.onWork,onRest:this.onRest,initialStyle:this.getInitialStyle(),isOpened:d},a.props.children))}}CollapsibleUnmount.Header=o,CollapsibleUnmount.Body=l},13964:(e,a,s)=>{"use strict";s.d(a,{o:()=>l});var i=s(27378),r=s(60042),n=s.n(r),o=s(53113);const l=e=>{let a=e.value,s=e.className,r=e.children;const l=(0,o.Q)(a);return i.createElement("span",{className:n()("colored-amount","colored-amount_".concat(l),s)},r)}},25745:(e,a,s)=>{"use strict";s.d(a,{i:()=>f});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(45797),m=s(59343),p=(s(76692),s(12751)),h=s(46082),v=s(89998),g=s(84049);s(37488);const _=["value","currency","className","minimumFractionDigits","maximumFractionDigits","currencyDisplay","isSign"],f=e=>{let a=e.value,s=e.currency,i=e.className,n=e.minimumFractionDigits,c=void 0===n?0:n,f=e.maximumFractionDigits,E=void 0===f?2:f,S=e.currencyDisplay,y=e.isSign,b=o()(e,_);const C=(0,u.bU)(),T=(0,p.G)({style:"currency",currency:s,currencyDisplay:S,locale:C,minimumFractionDigits:c,maximumFractionDigits:E}),A=(0,m.V)(),k=a<0&&!1!==y||y;let w=l.useMemo((()=>T.format(Math.abs(a))),[T,a]);const N=l.useMemo((()=>{var e;return T.formatToParts?(null===(e=T.formatToParts().find((e=>"currency"===e.type)))||void 0===e?void 0:e.value)||"":(0,v.h)(T)}),[T]),R=l.useMemo((()=>(0,g.B)(s)),[s]),I=l.useMemo((()=>w.replace(N,R)),[N,R,w]),D=l.useMemo((()=>a>0?"+":a<0?"-":""),[a]);return w=(0,h.t)(s)&&S?w.replace(N,s.toLocaleUpperCase()):w,l.createElement("span",r()({dir:"ltr",className:d()(i)},b),!A&&k?D:null,S?w:I,A&&k?D:null)};f.displayName="CurrencyAmount"},52925:(e,a,s)=>{"use strict";s.d(a,{H:()=>m,n:()=>p});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c);const u=["className","value","data","icon","iconValue","highlighted","highlightedValue","multiline","onClick","isCollapsible","contrasted","type"],m={DEAL:"deal",ORDER:"order"},p=e=>{let a=e.className,s=e.value,i=e.data,n=e.icon,c=void 0===n?null:n,p=e.iconValue,h=void 0===p?null:p,v=e.highlighted,g=e.highlightedValue,_=e.multiline,f=e.onClick,E=e.isCollapsible,S=e.contrasted,y=e.type,b=void 0===y?m.DEAL:y,C=o()(e,u);return l.createElement("div",r()({className:d()("data-value-field",a,{"data-value-field_collapsible":E}),onClick:f},C),void 0!==s?l.createElement("span",{className:"data-value-field__line"}):null,l.createElement("span",{className:d()("data-value-field__text","data-value-field__text-data",{"data-value-field__text-data_highlighted":v,"data-value-field__text_wrap":_})},l.createElement("span",{className:d()("data-value-field__text-wrapper","data-value-field__text-wrapper_type-".concat(b),"data-value-field__text-wrapper_data",c&&"data-value-field__text-wrapper_iconed"),"data-test":C["data-test"]&&"".concat(C["data-test"],"-data")},i,c&&l.createElement("span",{className:"data-value-field__icon"},c))),void 0!==s?l.createElement("span",{className:d()("data-value-field__text","data-value-field__text-value",{"data-value-field__text-value_highlighted":v||g,"data-value-field__text-value_contrasted":S,"data-value-field__text_wrap":_})},l.createElement("span",{className:d()("data-value-field__text-wrapper","data-value-field__text-wrapper_type-".concat(b),"data-value-field__text-wrapper_value",h&&"data-value-field__text-wrapper_iconed"),"data-test":C["data-test"]&&"".concat(C["data-test"],"-value")},h&&l.createElement("span",{className:"data-value-field__icon"},h),s)):null)}},18548:(e,a,s)=>{"use strict";s.d(a,{F:()=>v});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(14936),c=s.n(l),d=s(27378),u=s(88407),m=s(40222),p=s(52925);const h=["children","shifted"],v=e=>{let a=e.children,s=e.shifted,i=c()(e,h);const n=d.useState(!0),l=o()(n,2),v=l[0],g=l[1],_=d.useCallback((()=>g(!v)),[v]);return d.createElement(d.Fragment,null,d.createElement(p.n,r()(r()({},i),{},{onClick:_,highlighted:!v,isCollapsible:!0,icon:d.createElement(m.P,{isOpened:!v})})),d.createElement(u.z,{isOpened:!v},s?d.createElement("div",{className:"data-value-field_shifted"},a):a))}},17639:(e,a,s)=>{"use strict";s.d(a,{P:()=>o});var i=s(27378),r=s(60042),n=s.n(r);const o=e=>{let a=e.className,s=e.children,r=e.buttonBlock,o=e.position,l=e.dataTest;const c=i.useRef(null);return i.useEffect((()=>{if(c.current&&o&&"top"!==o){const e=20,a=c.current.getBoundingClientRect(),s=window.innerHeight-(a.bottom-e),i=0-a.y+e;s<0&&("left-bottom"===o?c.current.style.bottom="".concat(Math.min(Math.abs(i),Math.abs(s)),"px"):c.current.style.top="".concat(Math.max(i,s),"px"))}}),[]),i.createElement("div",{ref:c,className:n()("float-panel",{"float-panel_left":"left"===o,"float-panel_left-bottom":"left-bottom"===o,"float-panel_right":"right"===o,"float-panel_top":"top"===o},a,r&&"float-panel_with-btn-group"),"data-test":l},s,r&&i.createElement("div",{className:"float-panel__button-group"},r))}},32531:(e,a,s)=>{"use strict";s.d(a,{l:()=>u});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=(s(76692),s(12751));s(37488);const d=["value","style","minimumFractionDigits","maximumFractionDigits","locale","className"],u=e=>{let a=e.value,s=e.style,i=e.minimumFractionDigits,n=e.maximumFractionDigits,u=e.locale,m=e.className,p=o()(e,d);const h=(0,c.G)({style:s,maximumFractionDigits:n,minimumFractionDigits:i,locale:u}),v="percent"===s?Number(a)/100:a;return l.createElement("span",r()({className:m},p),h?h.format(v):a)}},99067:(e,a,s)=>{"use strict";s.d(a,{K:()=>FormattedInputRifm});var i=s(49491),r=s.n(i),n=s(26338),o=s(27378),l=s(99973),c=s(89998),d=s(84049),u=s(29634),m=s(16743);const p=(e,a,s)=>{const i=(0,u.oq)(e,a.formatter,a.acceptRegExp,a.decimalSeparator,s.config);return(0,u.jc)(i,s.mask)},h=(e,a,s)=>{const i=(0,u.YQ)(e,a.formatter,a.acceptRegExp,s.config);return(0,u.jc)(i,s.mask)},v=e=>"number"==typeof e.maximumFractionDigits&&e.maximumFractionDigits>0?p:h;class FormattedInputRifm extends o.Component{constructor(e){super(e),this.state={isFocus:!1,value:"",config:r()({},(0,l.j)(this.props.config))},this.handleChange=e=>{const a=(0,u.ce)(e,this.formatOptions.acceptRegExp);let s=e;s=!this.props.allowedEmpty&&0===parseFloat(this.state.value)&&Number(e)>=10?"".concat(Number(e)/10):this.props.allowedEmpty||""!==a?a:"0",this.setState({value:s}),this.props.onChange(s.replace(",","."))},this.handleFocus=e=>{this.setState({isFocus:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleBlur=e=>{this.setState({isFocus:!1}),this.props.onBlur&&this.props.onBlur(e)};const a=e.isSigned,s=e.mask;this.formatFn=v(this.state.config),this.formatOptions=(0,u.qz)(this.state.config,{isSigned:a}),this.format=e=>this.formatFn(e,this.formatOptions,{mask:s,config:this.state.config})}componentDidMount(){this.setState({value:(0,u.o)(this.props.value,this.formatOptions.decimalSeparator)})}componentDidUpdate(e){const a=(0,u.o)(this.props.value,this.formatOptions.decimalSeparator);if((0,n.Z)(e.config,this.props.config))this.state.isFocus||isNaN(Number(this.props.value))||Number(this.props.value)===Number(this.state.value.replace(",","."))||this.setState({value:a});else{const e=(0,l.j)(this.props.config);this.setState({config:e}),this.formatFn=v(e),this.formatOptions=(0,u.qz)(e,{isSigned:this.props.isSigned})}}render(){const e=this.props,a=e.children,s=e.config.currency;return o.createElement(m.V,{decimalSeparator:this.formatOptions.decimalSeparator,accept:this.formatOptions.acceptRegExp,format:this.format,onChange:this.handleChange,value:this.state.value,replace:e=>{if(s){const a=(0,c.h)(this.formatOptions.formatter),i=(0,d.B)(s);return e.replace(a,i)}return e}},(e=>{let s=e.value,i=e.onChange;return a({value:s,onChange:i,onBlur:this.handleBlur,onFocus:this.handleFocus})}))}}},99692:(e,a,s)=>{"use strict";s.d(a,{M:()=>l});var i=s(34586);const r=1e6,n=1e3,o=/(\d+)(?!.*\d)/i,l=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=Math.abs(e);return l>=r?(0,i.x)(e>0?Math.floor(e/r):Math.ceil(e/r),a,s).replace(o,"$1M"):l>=n?(0,i.x)(e>0?Math.floor(e/n):Math.ceil(e/n),a,s).replace(o,"$1K"):(0,i.x)(e,a,s)}},34586:(e,a,s)=>{"use strict";s.d(a,{x:()=>d});var i=s(49491),r=s.n(i),n=s(99973),o=s(89998),l=s(84049),c=(s(27378),s(29634));const d=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={style:"currency",currency:"usd"},d=r()(r()({minimumFractionDigits:0},(0,n.j)(a)),i);if(Number.isNaN(e))return"";const u=(0,c.gp)(d),m=(0,o.h)(u),p=u.format(e),h=a.currency?p.replace(m,(0,l.B)(a.currency)):p;return(0,c.jc)(h,s.mask)}},11636:(e,a,s)=>{"use strict";s.d(a,{V:()=>l});var i=s(49491),r=s.n(i),n=s(99973),o=(s(27378),s(29634));const l=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={style:"decimal"},l=r()(r()({},(0,n.j)(a)),i);if(Number.isNaN(e))return"";const c=(0,o.gp)(l),d=c.format(e);return(0,o.jc)(d,s.mask)}},8812:(e,a,s)=>{"use strict";s.d(a,{T:()=>l});var i=s(49491),r=s.n(i),n=s(99973),o=(s(27378),s(29634));const l=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={style:"percent"},l=r()(r()({},(0,n.j)(a)),i);if(Number.isNaN(e))return"";const c=(0,o.gp)(l),d=c.format(e/100);return(0,o.jc)(d,s.mask)}},16743:(e,a,s)=>{"use strict";s.d(a,{V:()=>o});var i=s(2243),r=s.n(i),n=s(27378);const o=e=>{const a=(e=>{const a=n.useReducer((e=>e+1),0),s=r()(a,2)[1],i=n.useRef(null),o=e.replace,l=e.append,c=o?o(e.format(e.value)):e.format(e.value),d=n.useRef(!1);return n.useLayoutEffect((()=>{if(!i.current)return;let a=i.current.eventValue;const r=i.current,n=r.input,d=r.isSizeIncreaseOperation,u=r.isDeleleteButtonDown,m=r.isNoOperation;i.current=null;const p=u&&m,h=a.slice(n.selectionStart).search(e.accept||/\d/g),v=-1!==h?h:0,g=a=>(a.match(e.accept||/\d/g)||[]).join(""),_=g(a.substr(0,n.selectionStart)),f=e=>{let a=0,s=0;for(let i=0;i!==_.length;++i){let r=e.indexOf(_[i],a)+1,n=g(e).indexOf(_[i],s)+1;n-s>1&&(r=a,n=s),s=Math.max(n,s),a=Math.max(a,r)}return a};if(!0===e.mask&&d&&!m){let e=f(a);const s=g(a.substr(e))[0];e=a.indexOf(s,e),a="".concat(a.substr(0,e)).concat(a.substr(e+1))}let E=e.format(a);"function"!=typeof l||n.selectionStart!==a.length||m||(d?E=l(E):""===g(E.slice(-1))&&(E=E.slice(0,-1)));const S=o?o(E):E;return c===S?s():e.onChange(S),()=>{let a=f(E);if(e.mask&&(d||u&&!p))for(;E[a]&&""===g(E[a]);)a+=1;n.selectionStart=n.selectionEnd=a+(p?1+v:0)}})),n.useEffect((()=>{const e=e=>{"Delete"===e.code&&(d.current=!0)},a=e=>{"Delete"===e.code&&(d.current=!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",a)}}),[]),{value:i.current?i.current.eventValue:c,onChange:a=>{let r=a.target.value;if(r.length>c.length){const a=r.split("").findIndex(((e,a)=>e!==c[a]));/[,.]/.test(r[a])&&(r="".concat(r.substr(0,a)).concat(e.decimalSeparator).concat(r.substr(a+1)))}i.current={eventValue:r,input:a.target,isSizeIncreaseOperation:r.length>c.length,isDeleleteButtonDown:d.current,isNoOperation:c===e.format(r)},s()}}})(e);return e.children(a)}},29634:(e,a,s)=>{"use strict";s.d(a,{YQ:()=>_,ce:()=>p,gp:()=>E,jc:()=>h,o:()=>v,oq:()=>g,qz:()=>y,wX:()=>m});var i=s(14936),r=s.n(i),n=s(2243),o=s.n(n),l=s(89518),c=s.n(l),d=s(99973);s(27378);const u=["locale"],m="###",p=(e,a)=>(e.match(a)||[]).join(""),h=(e,a)=>"string"==typeof a?a.replace(m,e):e,v=(e,a)=>String(e).replace(".",a),g=(e,a,s,i,r)=>{const n="number"==typeof r.maximumFractionDigits?r.maximumFractionDigits:2,l="number"==typeof r.minimumFractionDigits?r.minimumFractionDigits:0,c="number"==typeof r.maximumIntegerDigits?r.maximumIntegerDigits:null,d=p(e,s),u=/[-+]/.exec(d);if("-"===d||"+"===d)return d;let m="",h=d;Array.isArray(u)&&(m=u[0],h=(d.match(/[^-+]/g)||[]).join(""));const v=h.split(i),g=o()(v,2),_=g[0],f=g[1],E="string"==typeof _&&c?_.slice(0,c):_;let S="string"==typeof f?f.slice(0,n):"";S=S.length<l?"".concat(S).concat(new Array(l-S.length).fill("0").join("")):S;const y=Number.parseFloat("".concat(E,".").concat(S));if(Number.isNaN(y))return"";const b=a.format(y);if(h.includes(i)){let e="",a=b;const s=/\s?[^\d.,`\s]+$/.exec(b);s&&(a=b.slice(0,s.index),e=b.slice(s.index));const r=a.split(i),n=o()(r,1)[0],l=S;return"".concat(m).concat(n).concat(i).concat(l).concat(e)}return"".concat(m).concat(b)},_=(e,a,s,i)=>{const r=p(e,s),n="number"==typeof(null==i?void 0:i.maximumIntegerDigits)?i.maximumIntegerDigits:null;if("-"===r||"+"===r)return r;const o=/[-+]/.exec(r);let l="",c=r;Array.isArray(o)&&(l=o[0],c=(r.match(/[^-+]/g)||[]).join(""));const d=n?c.slice(0,n):c,u=Number.parseInt(d,10);return Number.isNaN(u)?"":"".concat(l).concat(a.format(u))},f=e=>{const a=(0,d.j)(e),s=a.locale,i=r()(a,u);return new Intl.NumberFormat(s,i)},E=c()(f),S=(e,a)=>{const s=null!=a&&a.isSigned?"\\-+":"";return new RegExp("[\\d".concat(e).concat(s,"]+"),"g")};c()(S);const y=c()(((e,a)=>{const s=f(e),i=(e=>{const a=/[,.]/.exec(e.format(1.1));return a?a[0]:"."})(s);return{formatter:s,decimalSeparator:i,acceptRegExp:S(i,a)}}))},71430:(e,a,s)=>{"use strict";s.d(a,{Y:()=>DurationFormattedInput});var i=s(2243),r=s.n(i),n=s(27378),o=s(27443);const l=":",c="",d="00".concat(l,"00"),u=(e,a)=>{const s=Math.floor(e/36e5),i=(e-36e5*s)/6e4;return"".concat((0,o.LB)(s)).concat(a).concat((0,o.LB)(i))},m=e=>Number(e);function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c,d=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const p=a.split(s),h=r()(p,2),v=h[0],g=h[1];let _=Number(u),f=String(e).split(s),E=r()(f,2),S=E[0],y=E[1];S=(0,o.gW)(S);const b=Number(S[0]),C=Number(S[1]);b>2?(S=v,_-=1):2===b&&(2===Number(v[0])&&C>3?(S="2".concat(v[1]),_-=2):C>2&&(S="23")),y=(0,o.gW)(y),Number(y[0])>5&&(y=(0,o.gW)(g),_-=1);const T=d||"00"!==S?"".concat(S).concat(s).concat(y).concat(n):"".concat(m(y)).concat(i);return[T,_]}class DurationFormattedInput extends n.Component{constructor(e){super(e),this.justSelected=!1,this.handleFocus=e=>{var a,s;this.justSelected=!0,this.setState({isFocus:!0}),null===(a=(s=this.props).onFocus)||void 0===a||a.call(s,e)},this.handleBlur=e=>{var a,s;this.setState({isFocus:!1}),null===(a=(s=this.props).onBlur)||void 0===a||a.call(s,e)},this.handleSelect=e=>{const a=e.target,s=a.selectionStart||0,i=a.selectionEnd||0,r=this.props.value/36e5>=1,n=this.props.value/6e4<10;if(this.justSelected&&!r){this.justSelected=!1;const e=0===i?2:n?3:2;a.selectionStart=a.selectionEnd=i+this.state._colonLength+e}else s<=2&&i>2?a.selectionEnd=2:s>2&&i<=this.state._colonLength+2?(a.selectionStart=this.state._colonLength+2,a.selectionEnd=this.state._colonLength+2):s>2&&s<this.state._colonLength+2&&i>this.state._colonLength+2?a.selectionStart=this.state._colonLength+2:s>2&&i>=this.state._maxPosition?a.selectionEnd=this.state._maxPosition:(s>this.state._maxPosition||i>this.state._maxPosition)&&(a.selectionStart=a.selectionEnd=this.state._maxPosition)},this.handleKeyDown=e=>{const a=e.keyCode,s=e.target,i=s.selectionEnd||0;this.justSelected=!1,i+1===3&&39===a?s.selectionStart=s.selectionEnd=this.state._colonLength+1:i-1===this.state._colonLength+1&&37===a?s.selectionStart=s.selectionEnd=3:i+1>this.state._maxPosition&&39===a&&(s.selectionStart=s.selectionEnd=this.state._maxPosition)};const a=d,s=e.colon?e.colon:l,i=e.suffix?e.suffix:c,n=e.suffixShort?e.suffixShort:c,o=s.length+4,m=p(u(e.value,s),a,s,i,n,!1),h=r()(m,1)[0];this.state={value:h,_colon:s,_suffix:i,_suffixShort:n,_maxPosition:o,_colonLength:s.length,_defaultValue:a,isFocus:!1}}componentDidUpdate(e,a){if(!this.state.isFocus&&(0,o.hj)(this.props.value)&&(0,o.hj)(e.value)&&this.props.value!==e.value||a.isFocus!==this.state.isFocus){const e=p(u(this.props.value,this.state._colon),this.state._defaultValue,this.state._colon,this.state._suffix,this.state._suffixShort,this.state.isFocus),a=r()(e,1)[0];this.setState({value:a})}}onInputChange(e,a){const s=this.state.value,i=e.target,n=i.value,l=i.selectionEnd||0,c=n.length>s.length,d=n[l-1],u=c?d:null,m=c?null:s[l],h=n.length===s.length?s[l-1]:null,v=this.state._colon,g=v.length,_=this.state._maxPosition;this.justSelected=!1;let f=s,E=l;null!==u?l>_?E=_:3===l&&u===v?f="".concat(n.substr(0,l-1)).concat(v).concat(n.substr(l+g)):3===l&&(0,o.hj)(u)?(f="".concat(n.substr(0,l-1)).concat(v).concat(u).concat(n.substr(l+1+g)),E=l+g):(0,o.hj)(u)?(f=n.substr(0,l-1)+u+n.substr(l+1),2!==l&&5!==l||(E=l+g)):E=l-1:null!==h?(0,o.hj)(d)?f=l-1==2||l-1==5?"".concat(n.substr(0,l-1)).concat(v).concat(n.substr(l)):n:(f=s,E=l-1):void 0===d||v.includes(d)||(0,o.hj)(d)?null!==m&&(l===this.state._colonLength+2-1&&v.includes(m)?(f="".concat(n.substr(0,l-this.state._colonLength),"0").concat(v).concat(n.substr(l)),E=l-this.state._colonLength):f="".concat(n.substr(0,l),"0").concat(n.substr(l))):(f=s,E=l-1);const S=p(f,s,v,this.state._suffix,this.state._suffixShort,this.state.isFocus,E),y=r()(S,2),b=y[0],C=y[1];this.setState({value:b},(()=>{i.selectionStart=C,i.selectionEnd=C,a((0,o.ZE)(b.slice(0,-this.state._suffixShort.length),v))})),e.persist()}render(){const e=this.state.value,a=this.props,s=a.onChange,i=a.children;return n.createElement(n.Fragment,null,i({onChange:e=>this.onInputChange(e,(e=>s&&s(e))),onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onFocus:this.handleFocus,onBlur:this.handleBlur,value:e}))}}},85883:(e,a,s)=>{"use strict";s(2243);var i=s(27378);i.Component},47482:(e,a,s)=>{"use strict";s.d(a,{R:()=>TimeFormattedInput});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(27378),c=s(27443);const d=":",u="00".concat(d,"00"),m="00".concat(d,"00").concat(d,"00");function p(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const l=i.split(r),u=o()(l,3),m=u[0],p=u[1],h=u[2];let v=Number(n),g=String(s).split(r),_=o()(g,3),f=_[0],E=_[1],S=_[2];f=(0,c.gW)(f),e?Number(f[0])>2?(f=m,v-=1):2===Number(f[0])&&(2===Number(m[0])&&Number(f[1])>3?(f="2".concat(m[1]),v-=2):Number(f[1])>2&&(f="23")):0===Number(f[0])&&0===Number(f[1])?f=m:Number(f[0])>1?(f="0".concat(f[0]),v+=1):1===Number(f[0])&&(1===Number(m[0])&&Number(f[1])>2?(f="0".concat(f[1]),v-=2):Number(f[1])>2&&(f="12")),E=(0,c.gW)(E),Number(E[0])>5&&(E=p,v-=1),a&&(S=(0,c.gW)(S),Number(S[0])>5&&(S=h,v-=1));const y=a?"".concat(f).concat(r).concat(E).concat(r).concat(S):"".concat(f).concat(r).concat(E);return[y,v]}class TimeFormattedInput extends l.Component{constructor(e){super(e);const a=Boolean(e.showSeconds),s=a?m:u,i=e.colon&&1===e.colon.length?e.colon:d,r=Boolean(e.is24Format),n=p(r,a,this.props.value,s,i),l=o()(n,1)[0];this.state={value:l,_colon:i,_showSeconds:a,_defaultValue:s,_is24Format:r,_maxLength:s.length},this.onInputChange=this.onInputChange.bind(this)}componentDidUpdate(e){if(this.props.value!==e.value){const e=p(this.state._is24Format,this.state._showSeconds,this.props.value,this.state._defaultValue,this.state._colon),a=o()(e,1)[0];this.setState({value:a})}this.props.is24Format!==e.is24Format&&this.setState({_is24Format:this.props.is24Format})}onInputChange(e,a){const s=this.state.value,i=e.target,r=i.value,n=i.selectionEnd||0,l=r.length>s.length,d=r[n-1],u=l?d:null,m=l?null:s[n],h=r.length===s.length?s[n-1]:null,v=this.state._colon;let g=s,_=n;null!==u?n>this.state._maxLength?_=this.state._maxLength:3!==n&&6!==n||u!==v?3!==n&&6!==n||!(0,c.hj)(u)?(0,c.hj)(u)?(g=r.substr(0,n-1)+u+r.substr(n+1),2!==n&&5!==n||(_=n+1)):_=n-1:(g="".concat(r.substr(0,n-1)).concat(v).concat(u).concat(r.substr(n+2)),_=n+1):g="".concat(r.substr(0,n-1)).concat(v).concat(r.substr(n+1)):null!==h?(0,c.hj)(d)?g=n-1==2||n-1==5?"".concat(r.substr(0,n-1)).concat(v).concat(r.substr(n)):r:(g=s,_=n-1):void 0===d||d===v||(0,c.hj)(d)?null!==m&&(2!==n&&5!==n||m!==v?g="".concat(r.substr(0,n),"0").concat(r.substr(n)):(g="".concat(r.substr(0,n-1),"0").concat(v).concat(r.substr(n)),_=n-1)):(g=s,_=n-1);const f=p(this.state._is24Format,this.state._showSeconds,g,s,v,_),E=o()(f,2),S=E[0],y=E[1];this.setState({value:S},(()=>{i.selectionStart=y,i.selectionEnd=y,a(S)})),e.persist()}render(){const e=this.state.value,a=this.props,s=a.onChange,i=a.children;return l.createElement(l.Fragment,null,i({onChange:e=>this.onInputChange(e,(e=>s&&s(e))),value:e}))}}TimeFormattedInput.defaultProps={showSeconds:!1,is24Format:!0,colon:d,children:e=>l.createElement("input",r()({type:"text"},e))}},27443:(e,a,s)=>{"use strict";s.d(a,{LB:()=>o,ZE:()=>n,gW:()=>r,hj:()=>i});const i=e=>{const a=Number(e);return!isNaN(a)&&String(e)===String(a)},r=e=>{const a="".concat(e||"","00").substr(0,2);return isNaN(Number(a))?"00":a},n=(e,a)=>{const s=e.split(a).map(Number);return 60*s[0]*60*1e3+60*s[1]*1e3},o=e=>e<10?"0".concat(e):"".concat(e)},15580:(e,a,s)=>{"use strict";s.d(a,{T:()=>u});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(92240);const d=["timestamp","children"],u=e=>{let a=e.timestamp,s=e.children,i=o()(e,d);const n=l.useRef(null),u=l.useRef(a);return l.useEffect((()=>{n.current&&a&&u.current!==a&&(n.current.classList.remove(c.Z.host_highlighted),window.setTimeout((()=>{n.current&&n.current.classList.add(c.Z.host_highlighted)}))),u.current=a}),[a]),l.createElement("span",r()(r()({},i),{},{ref:n}),s)}},92240:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host_highlighted:"_1_k-Nt2KhT6q",shake:"_1xjcCbEnfuKk"}},14454:(e,a,s)=>{"use strict";s.d(a,{Z:()=>h});var i=s(2243),r=s.n(i),n=s(27378),o=s(60042),l=s.n(o),c=(s(76692),s(59343)),d=s(62097),u=s(82172),m=(s(37488),s(13174)),p=s(45385);function h(e){let a=e.children,s=e.classNameContent,i=e.classNameContainerHasButtons,o=e.classNameWrapperHasButtons,h=e.autoScrollCorrectionLeft,v=void 0===h?0:h,g=e.autoScrollCorrectionRight,_=void 0===g?0:g,f=e.scrollDelayTimeout,E=void 0===f?500:f,S=e.NextButton,y=e.BackButton;const b=(0,c.V)(),C=b?-1:1,T=!(!S||!y),A=n.useState(n.useRef(null)),k=r()(A,2),w=k[0],N=k[1],R=n.useState(!0),I=r()(R,2),D=I[0],O=I[1],L=n.useRef(null),M=n.useRef(null),P=n.useCallback((e=>{D||N(e)}),[D]);n.useEffect((()=>{const e=setTimeout((()=>{O(!1)}),E);return()=>{clearTimeout(e)}}),[E]);const x=(0,u.x)(L,250).width,F=(0,u.x)(M,250).width,B=(0,m.v)(L,b,T,F);(0,d.D)(D,w,L,M,"",v,_,b);const Z=n.useCallback((()=>{const e=L.current;e&&(e.scrollLeft=(Math.abs(e.scrollLeft)+x-100)*C)}),[x,C]),U=n.useCallback((()=>{const e=L.current;e&&(e.scrollLeft=(Math.abs(e.scrollLeft)-x)*C)}),[x,C]),H=Math.floor(F)>x+3,G=b?Math.abs(B)>3:x+Math.abs(B)+3<Math.floor(F),V=b?x+Math.abs(B)+3<Math.floor(F):Math.abs(B)>3,W=T&&H&&y,j=T&&H&&S;return n.createElement("div",{className:p.Z.host},T&&H&&y?n.createElement(y,{disabled:!V,next:!1,onClick:U}):null,n.createElement("div",{className:l()(p.Z.wrapper,W&&j&&o)},n.createElement("div",{className:p.Z.container,ref:L},n.createElement("div",{className:l()(p.Z.content,s,W&&j&&i),ref:M},a(P)))),T&&H&&S?n.createElement(S,{disabled:!G,next:!0,onClick:Z}):null)}h.displayName="HorizontalScroll"},45385:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3N67WNaoa350",wrapper:"_3G5KWpMXLk1k",container:"_1EDYEPE-tK5T",content:"_3YUQthUBCOEz"}},51013:(e,a,s)=>{"use strict";s.d(a,{J:()=>l});var i=s(27378),r=s(60042),n=s.n(r),o=(s(20548),s(16803));const l=e=>{let a=e.className,s=e.src,r=e.size,l=void 0===r?"medium":r,c=e.dataTest;return i.createElement("span",{className:n()(o.Z.icon,o.Z[l],a),"data-test":c,style:{backgroundImage:"url(".concat(s)}})}},16803:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={icon:"_1kJv1CB2yEI0",small:"jb_T6ajPNCT4",medium:"_3vSpEkRJi81r",large:"xrZ4LIYTPqo5"}},20548:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i=s.e(1689).then(s.t.bind(s,71689,17))},55962:(e,a,s)=>{"use strict";s.d(a,{h:()=>v});var i=s(49491),r=s.n(i),n=s(2243),o=s.n(n),l=s(14936),c=s.n(l),d=s(27378),u=s(60042),m=s.n(u),p=s(17302);const h=["selected","tabs","handleSelect","className","controlled","headerClassName"];function v(e){const a=e.selected,s=e.tabs,i=e.handleSelect,n=e.className,l=e.controlled,u=e.headerClassName,v=c()(e,h),g=d.useState(a),_=o()(g,2),f=_[0],E=_[1];return d.useEffect((()=>{l&&E(a)}),[l,a]),d.createElement(p.E7,r()({className:m()("panel-tabs",n),tabs:s,selected:f,onSelect:function(e){l||E(e),i(e)}},v),d.createElement(p.es,{className:m()("panel-tabs__header",u)},d.createElement(p.rr,null,((e,a,s,i)=>{let r=s.selected;return d.createElement(p.GD,{disabled:e.isDisabled,key:a,index:i,className:"panel-tabs__button","data-test":e.dataTest},d.createElement(p.Uq,{title:e.title,aSelected:r,className:"panel-tabs__tab",selectedClassName:"panel-tabs__tab_selected"}))})),d.createElement(p.Qv,{className:"panel-tabs__selection",lineHeight:"100%"})),d.createElement(p.Vf,{className:"panel-tabs__container"},((e,a,s)=>{let i=s.selected;return d.createElement(p.ZH,{key:a,aSelected:i,className:"panel-tabs__panel"},e.content({height:"calc(100% - 64px)"}))})))}},69545:(e,a,s)=>{"use strict";s.d(a,{p:()=>r});var i=s(27378);const r=e=>{let a=e.value,s=e.maximumFractionDigits,r=e.className,n=e.isSign,o=e.dir,l=void 0===o?"ltr":o;return i.createElement("span",{dir:l,className:r},n&&a>0?"+":"","".concat(s?a.toFixed(s):a,"%"))}},90156:(e,a,s)=>{"use strict";s.d(a,{MZ:()=>v,j0:()=>h});var i=s(14936),r=s.n(i),n=s(49491),o=s.n(n),l=s(27378),c=s(60042),d=s.n(c),u=s(17302);const m=["ref"],p=e=>{let a=e.className,s=e.children,i=e.arrowProps;return l.createElement("div",{className:d()("deal-form-popper__content",a)},i&&l.createElement("div",o()({className:"deal-form-popper-arrow"},i)),s)},h=e=>{let a=e.open,s=e.placement,i=void 0===s?"top":s,r=e.anchorEl,n=e.arrow,o=void 0===n||n,c=e.disablePortal,m=void 0===c||c,h=e.skidding,v=void 0===h?0:h,g=e.distance,_=void 0===g?0:g,f=e.transition,E=void 0!==f&&f,S=e.children,y=e.className;return l.createElement(l.Fragment,null,l.createElement(u.rD,{anchorEl:r,open:a,transition:E,placement:i,arrow:o,disablePortal:m,skidding:v,distance:_,tethered:!0,fitSizeTo:"content",className:d()("deal-form-popper",y)},(e=>{let a=e.arrowProps;return l.createElement(p,{arrowProps:a,className:y},S)})))},v=e=>{let a=e.content,s=e.children,i=e.distance,n=e.anchorClassName,c=e.disablePortal,d=void 0===c||c,h=e.disableTooltipContentClick,v=void 0!==h&&h;const g=e=>{e.preventDefault(),e.stopPropagation()};return l.createElement(u.u,{placement:"top",fitSizeTo:"content",triggerOnHover:!0,triggerOnTap:!0,arrow:!0,transition:!0,hideOnOutsideClick:!0,disablePortal:d,distance:i,style:{zIndex:10,whiteSpace:"normal"},content:e=>{let s=e.arrowProps;return l.createElement("div",{className:"deal-form-popper",onClick:v?g:void 0},l.createElement(p,{arrowProps:s},a))}},(e=>{let a=e.ref,i=r()(e,m);return l.createElement("span",o()(o()({ref:a},i),{},{className:n}),s)}))}},51243:(e,a,s)=>{"use strict";var i=s(27378);s(31542),s(60042);i.Component},57862:(e,a,s)=>{"use strict";s.d(a,{P:()=>c});var i=s(27378),r=s(60042),n=s.n(r),o=s(17302),l=s(8141);function c(e){let a=e.tabs,s=e.currentTab,r=e.className,c=e.contentClassName,d=e.position,u=void 0===d?"static":d,m=e.clickTab;const p=a[s];let h="";const v=(0,l.L)(),g=Object.keys(a),_={"--tabs-length":Object.keys(a).length};return i.createElement("div",{className:n()("trading-tabulator","static"===u&&"trading-tabulator_static","sticky"===u&&"trading-tabulator_sticky",r),style:_},i.createElement("div",{className:n()("trading-tabulator__tabs"),dir:v},i.createElement("div",{className:"trading-tabulator__tabs-wrapper"},g?g.map(((e,r)=>{const n=a[e],l=s===e?"trading-tabulator__tab_active":"";return s===e&&(h=String(r)),n?i.createElement(o.Xd,{className:"trading-tabulator__tab ".concat(l),key:e,"data-test":"trading-tabulator-tab-".concat(e),onClick:()=>{m(e)}},n.title):null})):null,i.createElement("div",{className:"trading-tabulator__line trading-tabulator__line_index-".concat(h)}," "),i.createElement("div",{className:"trading-tabulator__line-bg"}," "))),p?i.createElement("div",{className:n()("trading-tabulator__content",c),dir:v},p.component):null)}},71179:(e,a,s)=>{"use strict";s.d(a,{_:()=>r,e:()=>YoutubePlayer});var i=s(27378);function r(e){const a=/\/([^\/]+)$/.exec(e);return a&&a[1]?a[1]:""}class YoutubePlayer extends i.Component{constructor(){super(...arguments),this.node=null,this.onPlayerReady=e=>{const a=this.props.onPlayerReady;e.target&&"function"==typeof a&&a(e.target)}}componentDidMount(){this.initYtApi()}onStateChange(e,a,s){let i;const r=this.YT.PlayerState,n=r.PLAYING,o=r.PAUSED,l=r.ENDED;switch(e){case n:i="onPlay";break;case o:i="onPause";break;case l:i="onEnd";break;default:i=""}this.props.onEvent&&this.props.onEvent(e,this.props.videoId,a,s),this.props[i]&&this.props[i](this.props.videoId,a,s)}initYtApi(){window.YT?this.apiInited():this.connectToYTApi()}connectToYTApi(){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const a=document.querySelector("script");a&&a.parentNode&&(a.parentNode.insertBefore(e,a),window.onYouTubeIframeAPIReady=()=>this.apiInited())}apiInited(){this.YT=window.YT,this.props.apiInited&&this.props.apiInited(),this.initVideo()}initVideo(){if(!this.props.videoId)return;const e=this.props,a=e.videoId,s=e.playerVars;if(this.node){const e=new this.YT.Player(this.node,{videoId:a,playerVars:s,events:{onReady:this.onPlayerReady,onStateChange:a=>{this.onStateChange(a.data,e.getVideoData().title,a)}}})}}render(){return i.createElement("div",{className:this.props.className,ref:e=>{this.node=e}})}}YoutubePlayer.displayName="YoutubePlayer"},3230:(e,a,s)=>{"use strict";s.d(a,{X:()=>FxLimitEditor});var i=s(49491),r=s.n(i),n=s(27378),o=s(73598),l=s(71152),c=s(7923),d=s(32551),u=(s(30468),s(40285)),m=s(17302),p=s(82844),h=s(29634),v=s(34288),g=s(25691);function _(e){return e.takeProfit&&!e.stopLoss?e.takeProfit.type:!e.takeProfit&&e.stopLoss?e.stopLoss.type:e.defaultLimitType}class FxLimitEditor extends n.Component{constructor(e){super(e),this.state={stopLoss:(0,c.FM)(_(e),e.stopLoss),takeProfit:(0,c.FM)(_(e),e.takeProfit),stopLossError:void 0,takeProfitError:void 0,isPristine:e.isPristine},this.handleTrailingChange=this.handleTrailingChange.bind(this),this.handleApplyChanges=this.handleApplyChanges.bind(this),this.handleError=this.handleError.bind(this),this.handleApply=this.handleApply.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}updateLimit(e,a){"stopLoss"===e?this.setState({stopLoss:r()(r()({},this.state.stopLoss),a)}):"takeProfit"===e&&this.setState({takeProfit:r()(r()({},this.state.takeProfit),a)}),this.state.isPristine&&this.setState({isPristine:!1})}convert(e,a,s,i){return this.props.convert(e,a,s,i)}handleSwitchLimit(e,a){const s=this.props.limitTypes,i=s.indexOf(a)===s.length-1?0:s.indexOf(a)+1,n=s[i],o=(0,c.s_)(this.state[e]);if(o&&o.value){const s=this.getPrecision(n),i=r()(r()({},o),{},{type:n,value:n===u.$i.PERCENT?(0,d.c)(this.convert(a,n,o.value,e)):(0,l.l)(this.convert(a,n,o.value,e),s)});this.updateLimit(e,(0,c.FM)(i.type,i))}else this.updateLimit(e,r()(r()({},this.state[e]),{},{type:n}))}getPrecision(e){switch(e){case"amount":return 2;case"percent":return 0;default:return this.props.precision}}handleTrailingChange(e,a){var s;a.stopPropagation();const i=this.state.stopLoss,n=i.value,o=i.type,c=this.getPrecision(o),d=e&&!n?String((0,l.l)(this.props.getStopOut(o),c)):n;this.props.turnOffTrailingStop&&!e&&null!==(s=this.props.stopLoss)&&void 0!==s&&s.trailing?(this.setState({stopLoss:r()(r()({},this.state.stopLoss),{},{trailing:e})}),this.props.turnOffTrailingStop().catch((()=>{this.setState({stopLoss:r()(r()({},this.state.stopLoss),{},{trailing:!e})})}))):this.updateLimit("stopLoss",{value:d,trailing:a.target.checked})}handleApplyChanges(e,a){this.updateLimit(e,{value:a})}handleError(e,a){"stopLoss"===e?this.setState({stopLossError:a}):this.setState({takeProfitError:a})}hasErrors(){return!!this.state.stopLossError||!!this.state.takeProfitError}handleApply(){if(!this.hasErrors()){const e=(0,c.s_)(this.state.stopLoss),a=(0,c.s_)(this.state.takeProfit),s={stopLoss:void 0,takeProfit:void 0};null!=e&&e.value&&(e.value=(0,l.l)(e.value,this.getPrecision(e.type))),null!=a&&a.value&&(a.value=(0,l.l)(a.value,this.getPrecision(a.type))),s.stopLoss=e,s.takeProfit=a,this.props.onApply(s)}}handleKeyDown(e){switch(e.key){case"Enter":this.handleApply();break;case"Escape":"function"==typeof this.props.toggle&&this.props.toggle()}}render(){var e;const a=this.props,s=a.title,i=a.isDiapason,r=void 0===i||i,l=a.deal,c=a.currency,d=a.precision,u=a.onCancel,_=a.isTrailingStop,f=a.locale,E=a.getTrailingLevel,S=a.masked,y=a.isSigned,b=a.limitTypes,C=a.trailingSwitcherName,T=a.getLimitsDiapasonFormatted,A=a.getLimitsRange,k=this.state,w=k.stopLoss,N=k.takeProfit,R=k.isPristine,I=b.length>1;return n.createElement("div",{className:"fx-limit-editor","data-test":"limit-editor-panel",onKeyDown:this.handleKeyDown},_||l&&null!==(e=l.stopLoss)&&void 0!==e&&e.trailing?n.createElement(g.S,{name:C,stopLoss:w,currency:c,precision:d,getTrailingLevel:E,onChange:this.handleTrailingChange}):n.createElement("span",null),s,n.createElement("div",{className:"fx-limit-editor__row"},n.createElement(o.Qj,null,(()=>n.createElement(v.O,{isMeta:r,mask:S?"-".concat(h.wX):void 0,isSigned:y,label:n.createElement(p._,{id:"fx_loss_limit",defaultMessage:"Stop Loss"}),precision:this.getPrecision(w.type),currency:c,value:w.value,limitType:w.type,limitName:"stopLoss",limitsRange:null==A?void 0:A(),limitDiapason:null==T?void 0:T("stopLoss",w.type),locale:f,autoFocus:!1,onError:this.handleError,trailingStop:w.trailing,validate:e=>this.props.validate("stopLoss",e),onChange:e=>{this.handleApplyChanges("stopLoss",e)},onSwitch:I?e=>{this.handleSwitchLimit("stopLoss",e),this.handleSwitchLimit("takeProfit",e)}:void 0})))),n.createElement("div",{className:"fx-limit-editor__row"},n.createElement(o.Qj,null,(()=>n.createElement(v.O,{isMeta:r,mask:S?"+".concat(h.wX):void 0,isSigned:y,label:n.createElement(p._,{id:"fx_takeProfit",defaultMessage:"Take Profit"}),precision:this.getPrecision(N.type),currency:c,value:N.value,limitType:N.type,limitName:"takeProfit",limitsRange:null==A?void 0:A(),limitDiapason:null==T?void 0:T("takeProfit",N.type),locale:f,onError:this.handleError,validate:e=>this.props.validate("takeProfit",e),onChange:e=>{this.handleApplyChanges("takeProfit",e)},onSwitch:I?e=>{this.handleSwitchLimit("stopLoss",e),this.handleSwitchLimit("takeProfit",e)}:void 0})))),n.createElement(o.Qj,null,(()=>n.createElement("div",{className:"fx-limit-editor__buttons"},"function"==typeof u?n.createElement(m.kc,{borderRadius:0},n.createElement(m.zx,{variant:"secondary",fullWidth:!0,onClick:u,dataTest:"fx-limit-editor-cancel"},n.createElement(p._,{id:"cancel",defaultMessage:"Cancel"}))):null,n.createElement(m.kc,{borderRadius:0},n.createElement(m.zx,{fullWidth:!0,disabled:this.hasErrors()||R,onClick:this.handleApply,dataTest:"fx-limit-editor-apply"},n.createElement(p._,{id:"apply",defaultMessage:"Apply"})))))))}}FxLimitEditor.defaultProps={limitTypes:["percent","amount"],isPristine:!1}},34288:(e,a,s)=>{"use strict";s.d(a,{O:()=>FxLimitInput});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(50649),d=s(60042),u=s.n(d),m=s(26338),p=s(7923),h=s(3264),v=(s(30468),s(7262)),g=s(82844),_=s(17302),f=s(99067),E=s(29634),S=s(6290);const y=["value","validate","onChange","onError","mask","isSigned","trailingStop","currency","onSwitch","limitType","limitDiapason","limitsRange","precision","limitName","locale","autoFocus","textFieldComponent","inputProps","isMeta"];function b(e){return void 0===e?"":"".concat(e)}const C=(0,c.observer)((e=>{let a=e.limitDiapason,s=e.limitName,i=e.error,r=e.onClick;if(!a.from)return null;const n=()=>{r(s)};return a.from&&!a.to?l.createElement("div",{className:u()("fx-limit-editor__meta-diapason",{"fx-limit-editor__meta-diapason_error":i})},l.createElement(g._,{id:"limit_diapason_tp",defaultMessage:"from {from}",values:{from:l.createElement("a",{href:"javascript:;",className:u()("fx-limit-editor__meta-link",{"fx-limit-editor__meta-diapason_error":i}),onClick:n},l.createElement("span",{dir:"ltr"},a.from))}})):l.createElement("div",{className:u()("fx-limit-editor__meta-diapason",{"fx-limit-editor__meta-diapason_error":i})},"takeProfit"===s?l.createElement(g._,{id:"limit_diapason_tp",defaultMessage:"from {from}",values:{from:l.createElement("span",{dir:"ltr"},a.from)}}):l.createElement(g._,{id:"limit_diapason_sl",defaultMessage:"from {from} to {to}",values:{from:l.createElement("span",{dir:"ltr"},a.from),to:l.createElement("span",{dir:"ltr"},a.to)}}))}));class FxLimitInput extends l.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.copyValueToInput=this.copyValueToInput.bind(this),this.state={value:b(e.value),error:void 0}}validate(e){var a,s;const i=this.props.validate({type:this.props.limitType,value:e,trailing:this.props.trailingStop});return this.setState({error:i}),null===(a=(s=this.props).onError)||void 0===a||a.call(s,this.props.limitName,i),i}handleChange(e){let a=e;this.props.mask&&"stopLoss"===this.props.limitName&&(a=""===e?"":this.props.mask.replace(E.wX,e)),this.setState({value:a}),this.validate(a),this.props.onChange(a||void 0)}copyValueToInput(e){if(this.props.limitsRange){var a;const s=null===(a=this.props.limitsRange[e])||void 0===a?void 0:a.from;s&&this.handleChange(b(s))}}componentDidMount(){this.validate(this.state.value)}componentDidUpdate(e,a){if(e.limitType!==this.props.limitType||!(0,m.Z)(e.limitDiapason,this.props.limitDiapason)||e.trailingStop!==this.props.trailingStop){!this.validate(b(this.state.value))&&a.error&&e.trailingStop!==this.props.trailingStop&&this.props.onChange(this.state.value?this.state.value:void 0)}if(e.value!==this.props.value){const e=(0,h.y)(b(this.props.value),this.props.precision);this.setState({value:e},(()=>{this.validate(this.state.value)}))}}render(){const e=this.props,a=(e.value,e.validate,e.onChange,e.onError,e.mask),s=e.isSigned,i=(e.trailingStop,e.currency),n=e.onSwitch,c=e.limitType,d=e.limitDiapason,m=(e.limitsRange,e.precision),h=e.limitName,E=e.locale,b=e.autoFocus,T=e.textFieldComponent,A=void 0===T?_.nv:T,k=e.inputProps,w=e.isMeta,N=void 0===w||w,R=o()(e,y),I=this.state.error,D=(0,v.X)(c);return l.createElement(l.Fragment,null,l.createElement(_.xu,{display:"grid",gap:"s",gridAutoFlow:"column",horizontalAlign:"space-between",padding:[0,0,"s",0]},l.createElement(f.K,{value:this.state.value,onChange:this.handleChange,config:{style:"decimal",locale:E,minimumFractionDigits:0,maximumFractionDigits:m,maximumIntegerDigits:D},allowedEmpty:!0,mask:a,isSigned:s,onBlur:this.props.onBlur},(e=>{let a=e.value,s=e.onChange,i=e.onFocus,n=e.onBlur;return l.createElement(A,r()({"data-test":"fx-limit-editor-input-field-".concat(h,"-").concat(c),labelOnTop:!0,className:u()("fx-limit-input__input",I&&"fx-limit-input_error"),value:a,onChange:s,onFocus:i,onBlur:n,hideMeta:!0,error:I,autoFocus:b||!1,inputProps:r()({},k)},R))})),n&&l.createElement(S.o,{currency:i,limitType:c,onClick:()=>{n(c)}})),d&&N?!I||I!==p.Xy.SlTrailingStopEmpty&&I!==p.Xy.TpMoreThenMax?l.createElement(C,{onClick:this.copyValueToInput,error:I,limitDiapason:d,limitName:h}):l.createElement("div",{className:"fx-limit-editor__meta-error"},l.createElement(g._,r()({},(0,p.lB)(I,d)))):null)}}},6290:(e,a,s)=>{"use strict";s.d(a,{o:()=>c});var i=s(27378),r=s(40285),n=s(17302),o=s(98484),l=s(77740);const c=e=>{let a=e.limitType,s=e.currency,c=e.onClick,d=null;switch(a){case r.$i.PRICE:d=i.createElement(l.kVp,null);break;case r.$i.AMOUNT:d=(0,o.Y)(s);break;case r.$i.PERCENT:d="%"}return i.createElement(i.Fragment,null,d&&i.createElement(n.zx,{color:"neutral",variant:"secondary",size:"l",dataTest:"fx-limit-editor-type-switcher-".concat(a),onClick:c},i.createElement(n.al,{content:d,minScale:.5})))}},25691:(e,a,s)=>{"use strict";s.d(a,{S:()=>v});var i=s(27378),r=s(50649),n=s(7923),o=(s(30468),s(17302)),l=s(77740),c=s(82844),d=s(32531),u=s(69545),m=s(25745),p=s(90156);const h=()=>i.createElement("span",{onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"fx-limit-editor__trailing-help","data-test":"fx-limit-editor-trailing-stop-tooltip"},i.createElement(l.T08,null)),v=(0,r.observer)((e=>{let a=e.stopLoss,s=e.onChange,r=e.getTrailingLevel,l=e.currency,v=e.precision,g=e.name;const _=null==r?void 0:r((0,n.s_)(a));return i.createElement(o.rs,{fullWidth:!0,name:g,dataTest:"fx-limit-editor-trailing-stop-switcher",checked:!!a&&a.trailing,onChange:s,label:i.createElement("div",{className:"fx-limit-editor__switch-label"},i.createElement(c._,{id:"trailing_stoploss",defaultMessage:"Trailing Stop Loss"}),i.createElement(p.MZ,{content:i.createElement(i.Fragment,null,i.createElement(c._,{id:"trailing_stop_description",defaultMessage:"An order to close the trade. Follows the price at a specified distance."}),i.createElement("br",null),_?i.createElement(c._,{id:"trailing_stop_distance",defaultMessage:"Trailing Stop level: {level}",values:{level:"amount"===a.type?i.createElement(m.i,{value:_,currency:l}):"percent"===a.type?i.createElement(u.p,{value:_}):"price"===a.type?i.createElement(d.l,{value:_,minimumFractionDigits:v,maximumFractionDigits:v}):_+""}}):null),disableTooltipContentClick:!0,anchorClassName:"fx-limit-editor__switcher-tooltip-wrapper"},i.createElement(h,null)))})}))},94237:(e,a,s)=>{"use strict";s.d(a,{I:()=>v});var i=s(49491),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(17302),d=s(40285),u=s(82844),m=s(99067),p=(s(29634),s(15580));const h=["value","action","error","onChange","precision","textFieldComponent","inputProps"],v=e=>{let a=e.value,s=e.action,i=e.error,n=e.onChange,v=e.precision,g=e.textFieldComponent,_=void 0===g?c.nv:g,f=e.inputProps,E=o()(e,h);const S=l.useCallback((e=>{let a=parseFloat(e);Number.isNaN(a)&&(a=0),n(a)}),[n]),y=i?l.createElement(p.T,{"data-test":"order-form-input-quote-error",timestamp:i.timestamp},l.createElement(u._,r()({},i))):null;return l.createElement(m.K,{allowedEmpty:!0,config:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:v||10,maximumIntegerDigits:d.aK.PRICE},onChange:S,value:0===a?"":a},(e=>{let a=e.value,i=e.onChange;return l.createElement(_,r()({value:a,onChange:i,labelOnTop:!0,inputProps:r()({},f),"data-test":"order-form-input-quote",action:y?void 0:s,error:y,label:l.createElement(u._,{id:"order_setup_open_quote",defaultMessage:"Opening Price"})},E))}))}},30468:(e,a,s)=>{"use strict";s.d(a,{y:()=>l});var i=s(18985),r=s(45797),n=s(46548);const o=(0,i.vU)({day:{id:"day",defaultMessage:"day"},h:{id:"h",defaultMessage:"h"},hour:{id:"hour",defaultMessage:"hour"},min:{id:"min",defaultMessage:"min"},sec:{id:"sec",defaultMessage:"sec."}}),l=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d h m s",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{d:r.NW.formatMessage(o.day),h:r.NW.formatMessage(o.h),m:r.NW.formatMessage(o.min),s:r.NW.formatMessage(o.sec)};const i=(0,n.R)(e),l=i.d,c=i.h,d=i.m,u=i.s;return a.replace(/d/,l?"".concat(l," ").concat(s.d):"").replace(/h/,c?"".concat(c," ").concat(s.h):"").replace(/m/,d?"".concat(d," ").concat(s.m):"").replace(/s/,u?"".concat(u," ").concat(s.s):"").replace(/\s+/g," ").trim()}},3264:(e,a,s)=>{"use strict";s.d(a,{y:()=>r});var i=s(71152);function r(e,a){const s=Number(e),r=s<0,n=Math.abs(s),o=e.split(".");return!Number.isNaN(n)&&Math.floor(n)!==n&&2===o.length&&o[1].length>a?((0,i.l)(n,a)*(r?-1:1)).toString():e}},32295:(e,a,s)=>{"use strict";s.d(a,{I:()=>r});var i=s(71152);function r(e,a,s,r,n){if(s&&a&&r&&n){const o=.01,l=a*s,c=Math.min(Math.max(r,l),n),d=Math.max(o,e*c);return{percent:0===e?0:(0,i.l)(100*c,2),amount:0===e?0:(0,i.l)(d,2)}}return{percent:0,amount:0}}},7262:(e,a,s)=>{"use strict";s.d(a,{X:()=>r});var i=s(40285);const r=e=>{switch(e){case i.$i.PRICE:return i.aK.PRICE;case i.$i.AMOUNT:return i.aK.AMOUNT;case i.$i.PERCENT:return i.aK.PERCENT;default:return i.aK.AMOUNT}}},40599:(e,a,s)=>{"use strict";s.d(a,{x:()=>o});var i=s(49491),r=s.n(i),n=s(52730);const o=(e,a)=>null==e?void 0:e.map((e=>((e,a)=>{if(e&&e.id&&e.title)return r()(r()({},e),{},{project:(0,n.I)(a),mechanic:a})})(a[(0,n.I)(null==e?void 0:e.project)].find((a=>a.id===e.id)),e.project))).filter((e=>!!e))},7923:(e,a,s)=>{"use strict";s.d(a,{CG:()=>w,FM:()=>D,VL:()=>E,Xy:()=>y,dn:()=>P,jM:()=>k,lB:()=>I,md:()=>N,nH:()=>R,p8:()=>S,s_:()=>O});var i=s(49491),r=s.n(i),n=s(89518),o=s.n(n),l=s(72785),c=s(40285),d=(s(27378),s(29634),s(34586)),u=s(11636),m=s(8812),p=s(16505),h=s(71152),v=s(32551);const g=999999999999.99,_=999999999,f=9999999999.999998;function E(e,a){return e*(a-1)}const S=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;switch(e){case c.$i.AMOUNT:return 2;case c.$i.PERCENT:return 0;default:return a}};var y;function b(e,a){return+(a/e*100).toFixed(10)}function C(e,a){return+(e/100*a).toFixed(10)}function T(e,a){let s=a.commission,i=a.cursOpen;return(e+s)*i/(a.multiplicator*a.dir*a.sum)+i}function A(e,a){let s=a.commission,i=a.cursOpen,r=a.multiplicator,n=a.dir;return(-i+e)*r*a.sum*n/i-s}function k(e,a,s,i,r){if(e===a)return s;if(e===c.$i.AMOUNT&&a===c.$i.PERCENT)return b(i,s);if(e===c.$i.PERCENT&&a===c.$i.AMOUNT)return C(i,s);if(r){const i=r.commission,n=r.cursOpen,o=r.multiplicator,l=r.sum,d="up"===r.dir?1:-1;if(e===c.$i.AMOUNT&&a===c.$i.PRICE)return T(s,{commission:i,cursOpen:n,multiplicator:o,dir:d,sum:l});if(e===c.$i.PRICE&&a===c.$i.AMOUNT)return A(s,{commission:i,cursOpen:n,multiplicator:o,dir:d,sum:l});if(e===c.$i.PRICE&&a===c.$i.PERCENT)return function(e,a){let s=a.commission,i=a.cursOpen,r=a.multiplicator,n=a.dir,o=a.sum;return b(o,A(e,{commission:s,cursOpen:i,multiplicator:r,dir:n,sum:o}))}(s,{commission:i,cursOpen:n,multiplicator:o,dir:d,sum:l});if(e===c.$i.PERCENT&&a===c.$i.PRICE)return function(e,a){let s=a.commission,i=a.cursOpen,r=a.multiplicator,n=a.dir,o=a.sum;return T(C(o,e),{commission:s,cursOpen:i,multiplicator:r,dir:n,sum:o})}(s,{commission:i,cursOpen:n,multiplicator:o,dir:d,sum:l})}return 0}function w(e,a,s,i,r){const n=i.stopLoss,o=i.takeProfit;if("down"===(null==r?void 0:r.dir)&&a===c.FM.TAKE_PROFIT&&s===c.$i.PRICE){if(e>o.from)return y.TpLessThenMin;if(e<o.to)return y.TpMoreThenMax}else if(a===c.FM.STOP_LOSS){if(e<n.from)return y.SlLessThenMin;if(e>n.to)return y.SlMoreThenMax}else{if(e<o.from)return y.TpLessThenMin;if(e>o.to)return y.TpMoreThenMax}}function N(e,a){return!e.length&&a?y.SlTrailingStopEmpty:void 0}!function(e){e.SlLessThenMin="SlLessThenMin",e.SlMoreThenMax="SlMoreThenMax",e.TpLessThenMin="TpLessThenMin",e.TpMoreThenMax="TpMoreThenMax",e.WrongFormat="WrongFormat",e.SlTrailingStopEmpty="SlTrailingStopEmpty",e.TpIsNegative="TpIsNegative"}(y||(y={}));const R=o()(((e,a,s)=>({amount:i=>(0,d.x)(Number(i),{currency:e,locale:s,maximumFractionDigits:a,minimumFractionDigits:0}),percent:e=>(0,m.T)(Number(e),{locale:s,maximumFractionDigits:a,minimumFractionDigits:a}),price:e=>(0,u.V)(Number(e),{locale:s,maximumFractionDigits:a,minimumFractionDigits:a})})));function I(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=a.from,n=a.to;let o,l;switch(e){case y.SlLessThenMin:l=i,o=p.K.limit_error_sl_min;break;case y.SlMoreThenMax:l=n,o=p.K.limit_error_sl_max;break;case y.TpLessThenMin:l=i,o=p.K.limit_error_tp_min;break;case y.TpMoreThenMax:l=n,o=p.K.limit_error_tp_max;break;case y.WrongFormat:o=p.K.wrong_format;break;case y.SlTrailingStopEmpty:o=p.K.trailing_stop_empty_sl;break;case y.TpIsNegative:l=1/Math.pow(10,s),o=p.K.limit_error_tp_negative;break;default:o=p.K.limit_error_sl_min}return l&&(o=r()(r()({},o),{values:{amount:l}})),o}function D(e,a){return{type:a?a.type:e,value:a?String(a.value):void 0,trailing:!(!a||"boolean"!=typeof a.trailing)&&a.trailing}}function O(e){return e.value?{type:e.type,value:0===Number(e.value)?0:Number(e.value),trailing:e.trailing}:void 0}function L(e,a,s){const i=a===c.FM.TAKE_PROFIT&&s,r=a===c.FM.STOP_LOSS&&s,n=a===c.FM.STOP_LOSS&&!s;return i?Math.ceil(e):r?Math.floor(e):n?Math.ceil(e):e}function M(e,a,s,i,r,n){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.round;switch(e){case c.$i.PERCENT:return L(k(c.$i.AMOUNT,e,i,s,n),a,!0);case c.$i.AMOUNT:return(0,v.c)(100*k(c.$i.AMOUNT,e,i,s,n))/100;case c.$i.PRICE:return(0,h.l)(k(c.$i.AMOUNT,e,i,s,n),r,o)}}function P(e,a){var s,i,r,n,o,d;const u=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=s-(s+e)*a;return Math.round(1e5*i)/1e5}(a.dealSum,a.stopLossRate,a.floatingPnl),m=E(a.dealSum,a.stopOutRate),p=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=s+(s+e)*a;return Math.round(1e5*i)/1e5}(a.dealSum,a.takeProfitRate,a.floatingPnl),v=a.isDealOpening&&p<=0?.01:p,S=function(e,a,s){const i=a===l.em.DOWN;switch(e){case c.$i.AMOUNT:return g;case c.$i.PERCENT:return _;case c.$i.PRICE:return i&&s?1/Math.pow(10,s):f}}(e,null==a||null===(s=a.deal)||void 0===s?void 0:s.dir,null==a||null===(i=a.deal)||void 0===i?void 0:i.pair.precision),y={stopLoss:{to:M(e,c.FM.STOP_LOSS,a.dealSum,u,a.precision,a.deal,(null==a||null===(r=a.deal)||void 0===r?void 0:r.dir)===l.em.UP?Math.floor:Math.ceil),from:M(e,c.FM.STOP_LOSS,a.dealSum,m,a.precision,a.deal,(null==a||null===(n=a.deal)||void 0===n?void 0:n.dir)===l.em.UP?Math.ceil:Math.floor)},takeProfit:{from:M(e,c.FM.TAKE_PROFIT,a.dealSum,v,a.precision,a.deal,(null==a||null===(o=a.deal)||void 0===o?void 0:o.dir)===l.em.UP?Math.ceil:Math.floor),to:(0,h.l)(S,a.precision)}};if("down"===(null===(d=a.deal)||void 0===d?void 0:d.dir)&&e===c.$i.PRICE){const e=y.stopLoss.to;y.stopLoss.to=y.stopLoss.from,y.stopLoss.from=e}return y}},16505:(e,a,s)=>{"use strict";s.d(a,{K:()=>i});const i=(0,s(18985).vU)({wrong_format:{id:"wrong_format",defaultMessage:"Wrong format"},trailing_stop_empty_sl:{id:"trailing_stop_empty_sl",defaultMessage:"Stop loss can`t be empty!"},limit_error_sl_min:{id:"limit_error_sl_min",defaultMessage:"Minimum stop loss value {amount}"},limit_error_sl_max:{id:"limit_error_sl_max",defaultMessage:"Maximum stop loss value {amount}"},limit_error_tp_min:{id:"limit_error_tp_min",defaultMessage:"Minimum take profit value {amount}"},limit_error_tp_max:{id:"limit_error_tp_max",defaultMessage:"Maximum take profit value {amount}"},limit_error_tp_negative:{id:"limit_error_tp_negative",defaultMessage:"Minimum acceptable quote value is {amount}"}})},52730:(e,a,s)=>{"use strict";s.d(a,{B:()=>n,I:()=>r});var i=s(66713);const r=e=>"ftt"===e?i.bk.BINARY:e,n=e=>{switch(e){case i.bk.FOREX:return"fx";case i.bk.STOCKS:return"spt";default:return"ftt"}}},71152:(e,a,s)=>{"use strict";function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.round;const i=Math.pow(10,a);return s(e*i)/i}s.d(a,{l:()=>i})},32551:(e,a,s)=>{"use strict";function i(e){return e>0?Math.floor(e):Math.ceil(e)}s.d(a,{c:()=>i})},96956:(e,a,s)=>{"use strict";s(27378)},96691:(e,a,s)=>{"use strict";s(27378)},19305:(e,a,s)=>{"use strict";s.d(a,{S:()=>n});var i=s(27378),r=s(72785);const n=e=>{let a=e.dir,s=e.priceClose,n=e.priceOpen,o=e.precisionPip,l=void 0===o?4:o;return i.useMemo((()=>{const e=a===r.em.UP?s-n:n-s;return[e>0?"+":"",e*Math.pow(10,l)]}),[a,s,n,l])}},80446:(e,a,s)=>{"use strict";s(27378)},84468:(e,a,s)=>{"use strict";s(27378)},76692:(e,a,s)=>{"use strict";s.d(a,{F:()=>c,N:()=>u});var i=s(2243),r=s.n(i),n=s(27378),o=s(45797),l=s(474);const c={BEFORE:"before",AFTER:"after"},d=[l.Y6.USDT],u=(e,a)=>{const s=n.useState(c.BEFORE),i=r()(s,2),l=i[0],u=i[1],m=(0,o.bU)(a);return n.useEffect((()=>{if(d.includes(e))return;const a=new Intl.NumberFormat(m,{style:"currency",currency:"demo"===e?"usd":e});u(String(a.format(1)).match(/^1/g)?c.AFTER:c.BEFORE)}),[e,m,a]),l}},49165:(e,a,s)=>{"use strict";s(27378)},90957:(e,a,s)=>{"use strict";s.d(a,{g:()=>o});var i=s(2243),r=s.n(i),n=s(27378);function o(e){const a=n.useState(!0),s=r()(a,2),i=s[0],o=s[1];return n.useEffect((()=>{const a=setTimeout((()=>o(!1)),e);return()=>clearTimeout(a)}),[i,e]),i}},83816:(e,a,s)=>{"use strict";s(27378),s(99973)},69277:(e,a,s)=>{"use strict";s(27378),s(12751)},12751:(e,a,s)=>{"use strict";s.d(a,{G:()=>c});var i=s(14936),r=s.n(i),n=s(27378),o=s(99973);const l=["locale"],c=e=>{const a=(0,o.j)(e),s=a.locale,i=r()(a,l);return n.useMemo((()=>new Intl.NumberFormat(s,i)),[s,i])}},30716:(e,a,s)=>{"use strict";s.d(a,{X:()=>o});var i=s(2243),r=s.n(i),n=s(27378);function o(e){const a=(0,n.useState)(!1),s=r()(a,2),i=s[0],o=s[1],l=(0,n.useState)(!1),c=r()(l,2),d=c[0],u=c[1];return[n.useMemo((()=>({onTouchStart:a=>{u(!0),null==e||e(!0,a),o(!0)},onMouseEnter:a=>{u(!1),null==e||e(!0,a),o(!0)},onTouchEnd:d?a=>{u(!0),null==e||e(!1,a),o(!1)}:void 0,onMouseLeave:d?void 0:a=>{u(!1),null==e||e(!1,a),o(!1)}})),[d,e]),i]}},90836:(e,a,s)=>{"use strict";s.d(a,{J:()=>n});var i=s(37488),r=s(87601);const n=()=>(0,i.useMediaQuery)({maxHeight:r.j$.BREAKPOINT_540,maxWidth:r.j$.BREAKPOINT_960,orientation:"landscape"})},82172:(e,a,s)=>{"use strict";s.d(a,{x:()=>l});var i=s(2243),r=s.n(i),n=s(84829),o=s(27378);function l(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=o.useState(0),i=r()(s,2),l=i[0],c=i[1],d=o.useState(0),u=r()(d,2),m=u[0],p=u[1],h=o.useMemo((()=>{if(ResizeObserver)return new ResizeObserver((0,n.Z)((a=>{e.current&&(p(a[0].contentRect.width),c(a[0].contentRect.height))}),a))}),[e,a]);return o.useEffect((()=>(h&&e.current&&h.observe(e.current),()=>{null==h||h.disconnect()})),[h,e]),{width:m,height:l}}},255:(e,a,s)=>{"use strict";s(37488)},31781:(e,a,s)=>{"use strict";s.d(a,{O:()=>l});var i=s(89320),r=s.n(i),n=s(27378);const o=(e,a)=>{const s=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;var i,n=r()(a);try{for(n.s();!(i=n.n()).done;){const a=i.value;if(s.call(e,a))return!0}}catch(e){n.e(e)}finally{n.f()}return!1},l=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.useEffect((()=>{let i=!1;const r=a=>{const s=a.target;e.current&&e.current.contains(s)&&(i=!0)},n=r=>{const n=r.target,l=r.composedPath().some((e=>e instanceof Element&&o(e,s)));!e.current||e.current.contains(n)||l||i||a(),i=!1};let l;return e&&(l=window.setTimeout((()=>{document.addEventListener("mousedown",r,!1),document.addEventListener("click",n,!1)}),100)),()=>{document.removeEventListener("click",n,!1),document.removeEventListener("mousedown",r,!1),clearTimeout(l)}}),[e])}},70090:(e,a,s)=>{"use strict";s.d(a,{y:()=>l});var i=s(89320),r=s.n(i),n=s(27378);const o=(e,a)=>{const s=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;var i,n=r()(a);try{for(n.s();!(i=n.n()).done;){const a=i.value;if(s.call(e,a))return!0}}catch(e){n.e(e)}finally{n.f()}return!1},l=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.useEffect((()=>{const i=i=>{const r=i.target,n=i.composedPath().some((e=>e instanceof Element&&o(e,s)));!e.current||e.current.contains(r)||n||a()};let r;return e&&(r=window.setTimeout((()=>{document.addEventListener("mousedown",i,!1)}),100)),()=>{document.removeEventListener("mousedown",i,!1),clearTimeout(r)}}),[e])}},13174:(e,a,s)=>{"use strict";s.d(a,{v:()=>c});var i=s(2243),r=s.n(i),n=s(27378),o=s(84829),l=s(99332);function c(e,a){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;const c=n.useState(0),d=r()(c,2),u=d[0],m=d[1],p=e.current;let h=0;const v=n.useCallback((()=>{p&&m((0,l.T)(p,a?"rtl":"ltr")||0)}),[p,a]);n.useEffect((()=>(clearTimeout(h),h=window.setTimeout((()=>{v()}),250),()=>{clearTimeout(h)})),[i,v]);const g=n.useMemo((()=>(0,o.Z)(v,250)),[v]);return n.useEffect((()=>{if(s&&p)return p.addEventListener("scroll",g),()=>{p.removeEventListener("scroll",g)}}),[s,p,g]),u}},62097:(e,a,s)=>{"use strict";s.d(a,{D:()=>n});var i=s(27378),r=s(99332);function n(e,a,s,n,o){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=arguments.length>7&&void 0!==arguments[7]&&arguments[7];i.useEffect((()=>{if(!e&&a&&a.current&&s&&s.current&&n&&n.current){const e=a.current.getBoundingClientRect(),i=e.width,o=e.x,u=s.current.getBoundingClientRect(),m=u.width,p=u.x,h=n.current.getBoundingClientRect().width,v=(0,r.T)(s.current,d?"rtl":"ltr"),g=o-p+v;v+l>g?s.current.scrollLeft=d?-(h-m-v+(v-g))-l:g-l:g+i-v>m-c&&(s.current.scrollLeft=d?-(h-g-i)+c:g+i-m+c)}}),[e,o,s,a,n,c,l,d])}},5971:(e,a,s)=>{"use strict";s.d(a,{AS:()=>h,Lm:()=>v,iP:()=>p});var i=s(2243),r=s.n(i),n=s(14936),o=s.n(n),l=s(27378),c=s(16800);const d=["initialWidth","initialHeight"],u={debounce:200},m=()=>[window.document.documentElement.clientWidth,window.document.documentElement.clientHeight],p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const a=e.initialWidth,s=void 0===a?0:a,i=e.initialHeight,n=void 0===i?0:i,p=o()(e,d),h=(0,l.useState)("undefined"==typeof window?[s,n]:m),v=r()(h,2),g=v[0],_=v[1],f=()=>_(m);return(0,l.useEffect)((()=>(c.j0.add("resize",f,p),c.j0.add("orientationchange",f,p),()=>{c.j0.remove("resize",f,p),c.j0.remove("orientationchange",f,p)})),[p,_]),g},h=e=>p(e)[1],v=e=>p(e)[0]},95029:(e,a,s)=>{"use strict";s.d(a,{AS:()=>h.AS,B5:()=>c.B,By:()=>j.B,CG:()=>r.CG,DI:()=>q.Z,Dp:()=>g.D,F4:()=>U.F,FM:()=>r.FM,Fx:()=>d.F,HF:()=>z.H,Hj:()=>Z.H,I5:()=>C.I,Iu:()=>i.I,JO:()=>W.J,Jw:()=>f.J,KG:()=>w.K,Lm:()=>h.Lm,MZ:()=>P.MZ,Ms:()=>N.M,NG:()=>d.N,O3:()=>u.O,O6:()=>S.O,PD:()=>H.P,Ph:()=>k.P,Ps:()=>x.P,Rf:()=>D.R,S0:()=>E.S,SX:()=>y.S,VL:()=>r.VL,XI:()=>p.X,X_:()=>b.X,Xy:()=>r.Xy,Yc:()=>O.Y,Z6:()=>V.Z,_L:()=>G._,dn:()=>r.dn,eZ:()=>G.e,gZ:()=>v.g,hH:()=>L.h,iP:()=>h.iP,ih:()=>T.i,j0:()=>P.j0,jM:()=>r.jM,l1:()=>M.l,lB:()=>r.lB,lu:()=>n.l,md:()=>r.md,nH:()=>r.nH,nN:()=>Z.n,oI:()=>B.o,p7:()=>A.p,p8:()=>r.p8,s_:()=>r.s_,uL:()=>F.u,wX:()=>I.wX,xE:()=>_.x,xG:()=>R.x,xw:()=>l.x,yC:()=>o.y,yd:()=>m.y});s(74241);var i=s(32295),r=s(7923),n=s(71152),o=s(30468),l=s(40599),c=s(52730),d=s(76692),u=s(31781),m=s(70090),p=(s(69277),s(12751),s(83816),s(30716)),h=s(5971),v=s(90957),g=s(62097),_=(s(49165),s(82172)),f=s(90836),E=(s(13174),s(96956),s(84468),s(80446),s(96691),s(19305)),S=(s(255),s(34288)),y=s(25691),b=s(3230),C=s(94237),T=s(25745),A=s(69545),k=(s(51243),s(17639)),w=s(99067),N=s(99692),R=s(34586),I=(s(11636),s(8812),s(29634)),D=s(47482),O=s(71430),L=(s(85883),s(15580),s(55962)),M=s(32531),P=s(90156),x=s(57862),F=(s(88407),s(83669)),B=s(13964),Z=s(52925),U=s(18548),H=s(40222),G=s(71179),V=s(14454),W=s(51013),j=(s(99973),s(84049)),z=s(69845),q=(s(53113),s(20548))},69845:(e,a,s)=>{"use strict";s.d(a,{H:()=>r});var i=s(27378);const r=(e,a)=>{const s=[],r=a.displayName||a.name;return i.Children.forEach(e,(e=>{const a=e&&e.type&&(e.type.displayName||e.type.name);[r].includes(a)&&s.push(e)})),s[0]}},99973:(e,a,s)=>{"use strict";s.d(a,{j:()=>l});var i=s(49491),r=s.n(i),n=s(45797),o=s(46082);const l=e=>{const a=e.currency&&e.currency.toLowerCase();return r()(r()({},e),{},{locale:e.locale?(0,n.mL)(e.locale.replace("_","-")):(0,n.bU)(e.locale),currency:"demo"===a||(0,o.t)(a)?"usd":e.currency})}},53113:(e,a,s)=>{"use strict";s.d(a,{Q:()=>o});const i="win",r="loose",n="standoff",o=e=>0===e||Number.isNaN(e)?n:e>0?i:r},89998:(e,a,s)=>{"use strict";s.d(a,{h:()=>i});const i=e=>{const a=String(e.format(1)),s=a.match(/^[^\d\s]+/g),i=a.match(/[^\d\s]+$/g),r=(null==s?void 0:s.length)&&s[s.length-1],n=(null==i?void 0:i.length)&&i[i.length-1];return r&&8207!==r.charCodeAt(0)?r:n&&8207!==n.charCodeAt(0)?n:""}},84049:(e,a,s)=>{"use strict";s.d(a,{B:()=>r});var i=s(474);const r=e=>i.Ds[e]},46082:(e,a,s)=>{"use strict";s.d(a,{t:()=>r});var i=s(474);function r(e){return e===i.Y6.USDT}},90117:(e,a,s)=>{"use strict";e.exports=s.p+"images/header.66101caf.png"},72255:(e,a,s)=>{"use strict";e.exports=s.p+"images/widget.bc6610b2.png"},56694:(e,a,s)=>{"use strict";e.exports=s.p+"images/node_code.1601767d.png"},94051:(e,a,s)=>{"use strict";e.exports=s.p+"images/verify.f7edbd6d.png"},87401:(e,a,s)=>{"use strict";e.exports=s.p+"images/arrow.e215be3e.svg"},89924:e=>{"use strict";e.exports=new Promise(((e,a)=>{const s=window.chartArtifactUrl+"/remoteEntry.js",i=document.createElement("script");i.src=s,i.onload=()=>{e({get:e=>window.chartArtifact.get(e),init:e=>{try{return window.chartArtifact.init(e)}catch(e){}}})},i.onerror=a,document.head.appendChild(i)}))},26704:(e,a,s)=>{"use strict";s.d(a,{A3:()=>v,AW:()=>o,CH:()=>d,Cj:()=>h,Df:()=>y,FT:()=>S,H$:()=>g,K:()=>_,Ti:()=>b,VU:()=>p,fB:()=>u,fS:()=>m,kk:()=>c,nq:()=>E,wn:()=>l});var i=s(27378),r=s(17302),n=s(82844);const o=()=>i.createElement(n._,{defaultMessage:"Confirm",id:"pro_settings_confirm"}),l=()=>i.createElement(n._,{defaultMessage:"Continue",id:"pro_continue"}),c=()=>i.createElement(n._,{defaultMessage:"Good",id:"pro_success_title"}),d=()=>i.createElement(n._,{defaultMessage:"Code",id:"pro_2fa_app_code"}),u=e=>i.createElement(n._,{defaultMessage:"Now, you can only enter your account using the code from {provider}.",id:"2fa_enabled_provider_description",values:{provider:e.provider}}),m=e=>i.createElement(n._,{defaultMessage:"You account is now secured with {provider}",id:"pro_2fa_provider_connected",values:{provider:e.provider}}),p=e=>i.createElement(n._,{defaultMessage:"Disconnect {provider}",id:"pro_2fa_disconnect_provider",values:{provider:e.provider}}),h=()=>i.createElement(n._,{defaultMessage:"Add a Security Bot",id:"2fa_add_security_bot"}),v=()=>i.createElement(n._,{defaultMessage:"New",id:"2fa_tag_new"}),g=()=>i.createElement(n._,{defaultMessage:"Facebook Messenger",id:"2fa_fb_messenger"}),_=()=>i.createElement(n._,{defaultMessage:"Didn't receive a code?",id:"two_fa_fb_messenger_info_title"}),f=()=>i.createElement(n._,{defaultMessage:"Get auth code",id:"two_fa_fb_messenger_info_desc_button"}),E=()=>i.createElement(n._,{defaultMessage:"Write something to the chatbot and press Get auth code",id:"two_fa_fb_messenger_info_desc",values:{button:i.createElement(f,null)}}),S=()=>i.createElement(n._,{defaultMessage:"Google Authenticator",id:"pro_2fa_google_authenticator"}),y=()=>i.createElement(n._,{defaultMessage:"SMS Authentication",id:"pro_2fa_sms"}),b=e=>i.createElement(n._,{defaultMessage:"Enter the code that you received from the bot in {messenger}.",id:"2fa_enter_code_from_bot_in_messenger",values:{messenger:e.href?i.createElement(r.rU,{href:e.href,rel:"noreferrer",style:{verticalAlign:"unset"},target:"_blank"},e.messenger):i.createElement("span",null,e.messenger)}})},52338:(e,a,s)=>{"use strict";s.d(a,{YW:()=>T.Y,SN:()=>C,Ch:()=>P,NF:()=>M,Vv:()=>O,gC:()=>D,Y1:()=>B,rk:()=>F,PF:()=>H,J:()=>U,uu:()=>N,XZ:()=>w,I2:()=>TwoFactorAuthRepository,to:()=>i.t,xp:()=>W,q1:()=>V,wL:()=>q,OA:()=>z,QE:()=>J,t7:()=>X,Lz:()=>Q.L,EM:()=>Q.E});var i=s(79066),r=s(49491),n=s(47014);const o={sms:"sms",google:"google",messenger_fb:"fb_messenger"};class StateTransformer{static parse(e){const a=new URL(e.facebook_messenger_link);a.searchParams.append("ref","/getcode");const s={facebookMessengerLink:e.facebook_messenger_link,facebookMessengerGetCodeLink:a.href},i={primary:e.primary.map(StateTransformer.parseMethod),secondary:e.secondary.map(StateTransformer.parseMethod)};return e.enabled&&""!==e.type?{meta:s,type:o[e.type],isEnabled:!0,captcha:null,methods:i}:{meta:s,type:null,isEnabled:!1,captcha:null,methods:i}}static parseMethod(e){return{isNew:e.is_new,type:o[e.type]}}}const l=(e,a)=>{if(!e||!function(e){return"object"==typeof e&&null!==e&&"meta"in e}(e))return{type:"unknown",message:"System error"};const s=e.meta;switch(s.type){case"ThrottlingError":return{type:"throttling",message:s.msg,expired:s.expired};case"ValidationError":return{type:"validation",message:s.msg,field:a&&a[s.field]||s.field};case"CaptchaError":return{type:"captcha",message:s.msg};default:return{type:"unknown",message:s.msg}}};class TwoFactorAuthRepository{constructor(e){this.http=e}find(){var e=this;return n((function*(){const a=yield e.http.getTwoFactorAuthState(),s=yield e.http.getTwoFactorMethods();return StateTransformer.parse(r(r({},a),s))}))()}enableSMS(e,a){var s=this;return n((function*(){try{if(e.isConfirmed){const e=yield s.http.changeTwoFactorAuth(r({type:"sms",action:"enable"},a));return"sms_code"!==(null==e?void 0:e.required_action)?{type:"success",data:void 0}:{type:"success",data:{requiredAction:"sms_code",newCodeAfter:e.new_code_at}}}return{type:"success",data:{requiredAction:"sms_code",newCodeAfter:(yield s.http.requestConfirmPhone(r({phone:e.value},a))).new_code_at}}}catch(e){return{type:"error",error:l(e)}}}))()}confirmEnableSMS(e,a,s){var i=this;return n((function*(){try{if(e.isConfirmed)return yield i.http.changeTwoFactorAuth(r({type:"sms",action:"enable",action_data:{code:a}},s)),{type:"success",data:void 0};{yield i.http.confirmPhone(e.value,a);const n=yield i.http.changeTwoFactorAuth(r({type:"sms",action:"enable",action_data:{code:a}},s));return"sms_code"!==(null==n?void 0:n.required_action)?{type:"success",data:void 0}:{type:"success",data:{requiredAction:"sms_code",newCodeAfter:n.new_code_at}}}}catch(e){return{type:"error",error:l(e,{code:"code"})}}}))()}disableSMS(e){var a=this;return n((function*(){let s=e.code,i=e.captcha;try{const e=yield a.http.changeTwoFactorAuth(r({type:"sms",action:"disable",action_data:s?{code:s}:void 0},i));return"sms_code"!==(null==e?void 0:e.required_action)?{type:"success",data:void 0}:{type:"success",data:{requiredAction:"sms_code",newCodeAfter:e.new_code_at}}}catch(e){return{type:"error",error:l(e,{code:"code"})}}}))()}enableGoogle(e,a){var s=this;return n((function*(){try{yield s.http.changeTwoFactorAuth({type:"google",action:"enable",action_data:{code:e,secret_code:a}})}catch(e){return l(e,{code:"code"})}}))()}disableGoogle(e){var a=this;return n((function*(){try{const s=yield a.http.changeTwoFactorAuth({type:"google",action:"disable",action_data:{code:e}});return"ga_code"!==(null==s?void 0:s.required_action)?{type:"success",data:void 0}:{type:"success",data:{requiredAction:s.required_action}}}catch(e){return{type:"error",error:l(e,{code:"code"})}}}))()}getGoogleQRCode(){var e=this;return n((function*(){try{const a=yield e.http.getTwoFactorAuthGoogleQrCode();return{type:"success",data:{url:a.qr_code_link,secretCode:a.secret_code}}}catch(e){return{type:"error",error:l(e)}}}))()}enableFacebookMessenger(e){var a=this;return n((function*(){try{return yield a.http.changeTwoFactorAuth({type:"messenger_fb",action:"enable",action_data:{code:e}}),{type:"success",data:void 0}}catch(e){return{type:"error",error:l(e,{code:"code"})}}}))()}disableFacebookMessenger(e){var a=this;return n((function*(){try{const s=yield a.http.changeTwoFactorAuth({type:"messenger_fb",action:"disable",action_data:e?{code:e}:void 0});return"messenger_code"!==(null==s?void 0:s.required_action)?{type:"success",data:void 0}:{type:"success",data:{requiredAction:"messenger_code",newCodeAfter:s.new_code_at}}}catch(e){return{type:"error",error:l(e,{code:"code"})}}}))()}}var c=s(27378),d=s(63967),u=s(97415),m=s(82844),p=s(77740),h=s(17302),v=s(14936);const g=["type"],_={google:"Google",sms:"SMS",fb_messenger:"Facebook Messenger"},f=e=>{let a=e.type,s=v(e,g);return c.createElement("span",r({},s),_[a])};var E=s(60042),S="_3dMQZkrPnOPD",y="_1_O0-YNBBj_R";const b=e=>e.isChecked?c.createElement(p.NOm,{className:E(y,e.className),"data-test":"2fa-w-entry-button-icon-enabled"}):c.createElement(p.az_,{className:E(S,e.className),"data-test":"2fa-w-entry-button-icon-disabled"}),C=c.memo((e=>{let a=e.onClick;const s=(0,d.G)(i.t),r=(0,u.o)(s.store);return c.createElement(h.zx,{dataTest:"pro-p-settings-b-2fa",endIcon:c.createElement(b,{isChecked:r.isEnabled}),horizontalAlign:"start",startIcon:c.createElement(p.S9Z,null),understring:r.isEnabled?c.createElement(m._,{defaultMessage:"Connected via {name}",id:"pro_settings_2fa_desc_connected",values:{name:c.createElement(f,{type:r.type})}}):c.createElement(m._,{defaultMessage:"Set it up to enhance your security",id:"pro_settings_2fa_desc"}),variant:"secondary",fullWidth:!0,onClick:a},c.createElement(m._,{defaultMessage:"Two-factor authentication",id:"pro_2fa"}))}));var T=s(74123),A=s(74199);const k=c.lazy((()=>s.e(9949).then(s.bind(s,59949)).then((e=>({default:e.TwoFactorAuth}))))),w=()=>c.createElement(m._,{defaultMessage:"Two-factor authentication",id:"pro_2fa"}),N=e=>c.createElement(c.Suspense,{fallback:c.createElement(A.zo,null)},c.createElement(k,r({},e)));var R=s(26704);const I=c.lazy((()=>s.e(9748).then(s.bind(s,49748)).then((e=>({default:e.TwoFactorAuthFacebookMessengerDisconnect}))))),D=()=>c.createElement(R.VU,{provider:c.createElement(R.H$,null)}),O=e=>c.createElement(c.Suspense,{fallback:c.createElement(A.zo,null)},c.createElement(I,r({},e))),L=c.lazy((()=>s.e(716).then(s.bind(s,60716)).then((e=>({default:e.TwoFactorAuthFacebookMessengerConnect}))))),M=R.H$,P=e=>c.createElement(c.Suspense,{fallback:c.createElement(A.zo,null)},c.createElement(L,r({},e))),x=c.lazy((()=>s.e(1356).then(s.bind(s,41356)).then((e=>({default:e.TwoFactorAuthGoogleConnect}))))),F=()=>c.createElement(m._,{"data-test":"profile-settings-two-factor-google-title",defaultMessage:"Google Authentication",id:"pro_2fa_google"}),B=e=>c.createElement(c.Suspense,{fallback:c.createElement(A.zo,null)},c.createElement(x,r({},e))),Z=c.lazy((()=>s.e(8860).then(s.bind(s,78860)).then((e=>({default:e.TwoFactorAuthGoogleDisconnect}))))),U=()=>c.createElement(R.VU,{provider:c.createElement(R.FT,null)}),H=e=>c.createElement(c.Suspense,{fallback:c.createElement(A.zo,null)},c.createElement(Z,r({},e))),G=c.lazy((()=>s.e(2337).then(s.bind(s,52337)).then((e=>({default:e.TwoFactorAuthSmsConnect}))))),V=R.Df,W=e=>c.createElement(c.Suspense,{fallback:c.createElement(A.zo,null)},c.createElement(G,r({},e))),j=c.lazy((()=>s.e(996).then(s.bind(s,20996)).then((e=>({default:e.TwoFactorAuthSmsDisconnect}))))),z=()=>c.createElement(R.VU,{provider:c.createElement(R.Df,null)}),q=e=>c.createElement(c.Suspense,{fallback:c.createElement(A.zo,null)},c.createElement(j,r({},e))),K={SMS:"sms",FACEBOOK:"facebook",GOOGLE:"google"},Y={[K.SMS]:T.Y.TWO_FACTOR_AUTH_SMS_CONNECT,[K.FACEBOOK]:T.Y.TWO_FACTOR_AUTH_FACEBOOK_MESSENGER_CONNECT,[K.GOOGLE]:T.Y.TWO_FACTOR_AUTH_GOOGLE_CONNECT},X=e=>!!e&&e.toUpperCase()in K,J=function(){var e=n((function*(e,a){let s;yield e.load();const i=e.getState().isEnabled;return s=a&&X(a)&&!i?Y[a]:T.Y.TWO_FACTOR_AUTH,s}));return function(a,s){return e.apply(this,arguments)}}();var Q=s(99339)},79066:(e,a,s)=>{"use strict";s.d(a,{t:()=>TwoFactorAuthService});var i=s(47014),r=s(7223);const n="google",o="sms",l="fb_messenger",c=null;class TwoFactorAuthService extends r.t{constructor(e){var a;super({type:c,meta:{facebookMessengerLink:"",facebookMessengerGetCodeLink:""},captcha:null,isEnabled:!1,methods:{primary:[],secondary:[]}}),a=this,this.repository=e,this.load=this.createTask(i((function*(){const e=yield a.repository.find();e&&a.update(e)})),{strategy:r.T.once})}setCaptchaCode(e){this.update({captcha:e})}enableSMS(e,a){var s=this;return i((function*(){const i=yield s.repository.enableSMS(e,a);return"success"!==i.type||i.data||s.switchState(o),i}))()}confirmEnableSMS(e,a,s){var r=this;return i((function*(){const i=yield r.repository.confirmEnableSMS(e,a,s);return"success"!==i.type||i.data||r.switchState(o),i}))()}disableSMS(e){var a=this;return i((function*(){var s;const i=null!==(s=a.getState().captcha)&&void 0!==s?s:{},r=yield a.repository.disableSMS({code:e,captcha:i});return"success"!==r.type||r.data||a.switchState(c),r}))()}enableGoogle(e,a){var s=this;return i((function*(){const i=yield s.repository.enableGoogle(e,a);return i||s.switchState(n),i}))()}disableGoogle(e){var a=this;return i((function*(){const s=yield a.repository.disableGoogle(e);return"success"!==s.type||s.data||a.switchState(c),s}))()}getGoogleQRCode(){var e=this;return i((function*(){return yield e.repository.getGoogleQRCode()}))()}enableFacebookMessenger(e){var a=this;return i((function*(){const s=yield a.repository.enableFacebookMessenger(e);return"success"===s.type&&void 0===s.data&&a.switchState(l),s}))()}disableFacebookMessenger(e){var a=this;return i((function*(){const s=yield a.repository.disableFacebookMessenger(e);return"success"!==s.type||s.data||a.switchState(c),s}))()}switchState(e){this.update(e===c?{type:null,isEnabled:!1}:{type:e,isEnabled:!0})}}},74123:(e,a,s)=>{"use strict";s.d(a,{Y:()=>i});const i={TWO_FACTOR_AUTH:"profile_settings/two_factor_auth",TWO_FACTOR_AUTH_SMS_CONNECT:"profile_settings/two_factor_auth_sms_connect",TWO_FACTOR_AUTH_SMS_DISCONNECT:"profile_settings/two_factor_auth_sms_disconnect",TWO_FACTOR_AUTH_GOOGLE_CONNECT:"profile_settings/two_factor_auth_google_connect",TWO_FACTOR_AUTH_GOOGLE_DISCONNECT:"profile_settings/two_factor_auth_google_disconnect",TWO_FACTOR_AUTH_FACEBOOK_MESSENGER_CONNECT:"profile_settings/two_factor_auth_facebook_messenger_connect",TWO_FACTOR_AUTH_FACEBOOK_MESSENGER_DISCONNECT:"profile_settings/two_factor_auth_facebook_messenger_disconnect"}},99339:(e,a,s)=>{"use strict";s.d(a,{E:()=>n,L:()=>r});var i=s(84584);const r=(0,i.Z)({id:"twoFactorAuthConfirmPhoneSlot"}),n=(0,i.Z)({id:"twoFactorAuthDisableSlot"})},83714:(e,a,s)=>{"use strict";s.d(a,{OY:()=>o.O,e8:()=>c,w6:()=>l.w});var i=s(47014),r=s(13243),n=s(7649),o=s(93176),l=s(91727);const c=(0,r.v)({name:"BackendEnvironment",services:(e,a)=>{let s=a.timeDeltaRepository;return{timeService:new o.O(s,(()=>Math.floor(Date.now()/1e3)))}}},{repositories:()=>({timeDeltaRepository:new n.F}),publicApi:e=>e}).onStart(function(){var e=i((function*(e){return e.timeService.load()}));return function(a){return e.apply(this,arguments)}}())},7649:(e,a,s)=>{"use strict";s.d(a,{F:()=>TimeDeltaRepository});class TimeDeltaRepository{find(){return Promise.resolve(0)}subscribeOnChange(e){}}},93176:(e,a,s)=>{"use strict";s.d(a,{O:()=>TimeService});var i=s(49491),r=s(47014),n=s(7223),o=s(17595);class TimeService extends n.t{constructor(e,a){var s;super(),s=this,this.timeDeltaRepository=e,this.getClientTimestamp=a,this.events=(0,o.T)(),this.load=this.createTask(r((function*(){const e=yield s.timeDeltaRepository.find();null!==e&&(s.serverTime.delta=e),s.timeDeltaRepository.subscribeOnChange(s.handleChange),s.startServerTimeTicker()})),{strategy:n.T.once}),this.serverTimeTickerInterval=null,this.handleChange=e=>{this.serverTime.delta=e},this.startServerTimeTicker=()=>{null===this.serverTimeTickerInterval&&(this.serverTimeTickerInterval=setInterval((()=>{const e=i(i({},this.serverTime),{},{timestamp:this.getClientTimestamp()-this.serverTime.delta});e.delta===this.serverTime.delta&&e.timestamp===this.serverTime.timestamp||(this.serverTime=e,this.events.emit("serverTime",e))}),500))},this.serverTime={delta:0,timestamp:this.getClientTimestamp()}}}},17595:(e,a,s)=>{"use strict";s.d(a,{T:()=>r});var i=s(23934);const r=()=>{const e=(0,i.Z)();return e.has=(a,s)=>{const i=e.all.get(a);return!!i&&i.some((e=>e===s))},e}},91727:(e,a,s)=>{"use strict";s.d(a,{w:()=>l});var i=s(2243),r=s(27378),n=s(63967),o=s(93176);const l=()=>{const e=(0,n.G)(o.O),a=r.useState(e.serverTime),s=i(a,2),l=s[0],c=s[1];return(0,r.useEffect)((()=>{const a=e=>{c(e)};return e.events.on("serverTime",a),()=>{e.events.off("serverTime",a)}}),[e]),l}},43849:(e,a,s)=>{"use strict";s.d(a,{Am:()=>b,E9:()=>u,EC:()=>v,GK:()=>z,Gq:()=>J,Ih:()=>_,J9:()=>f,K2:()=>q,Lh:()=>ae,Lr:()=>x,Lz:()=>m,Mm:()=>V,N3:()=>U,OR:()=>re,PU:()=>se,Pe:()=>F,Qm:()=>ne,SN:()=>W,Tf:()=>g,Xw:()=>k,Yd:()=>C,Yg:()=>G,Yi:()=>S,_u:()=>d,b8:()=>ie,cs:()=>T,d4:()=>B,eY:()=>ee,hI:()=>A,hr:()=>H,jK:()=>Q,kg:()=>X,m:()=>p,oY:()=>Z,pC:()=>h,qh:()=>oe,rS:()=>le,s:()=>E,sA:()=>K,sH:()=>N,sY:()=>O,ss:()=>j,t0:()=>ce,vl:()=>w,wR:()=>te,wt:()=>Y,x:()=>$,zo:()=>y});var i=s(27378),r=s(17302),n=s(82844),o=s(18985),l=s(45797),c=s(57415);const d=()=>i.createElement(n._,{defaultMessage:"You’re fighting now",id:"bat_card_in_battle_title"}),u=()=>i.createElement(n._,{defaultMessage:"There are no active events right now, but you can compete one-on-one in Battles and gain XP!",id:"rat_no_events_go_to_battles"}),m=()=>i.createElement(n._,{defaultMessage:"You haven't participated in any events yet. Keep an eye on stories and the Events section so you don't miss anything.",id:"empty_state_tournaments"}),p=()=>i.createElement(n._,{defaultMessage:"You’re ready",id:"bat_you_are_ready"}),h=()=>i.createElement(n._,{defaultMessage:"Yes",id:"bat_yes"}),v=()=>i.createElement(n._,{defaultMessage:"Your Opponent",id:"bat_your_opponent"}),g=e=>i.createElement(n._,{defaultMessage:"It’s time to switch on {asset}",id:"bat_time_to_switch_to_asset",values:{asset:e.title}}),_=()=>i.createElement(n._,{defaultMessage:"Switch",id:"bat_switch"}),f=()=>i.createElement(n._,{defaultMessage:"Final push!",id:"bat_final_push"}),E=()=>i.createElement(n._,{defaultMessage:"It’s time to last trade on 1 min duration",id:"bat_time_to_last_1_min_trade"}),S=()=>i.createElement(n._,{defaultMessage:"PnL",id:"bat_pnl"}),y=()=>i.createElement(n._,{defaultMessage:"Country",id:"bat_country"}),b=()=>i.createElement(n._,{defaultMessage:"Status",id:"bat_status"}),C=()=>i.createElement(n._,{defaultMessage:"Proceed",id:"bat_proceed"}),T=()=>i.createElement(n._,{defaultMessage:"League positions",id:"bat_league_positions"}),A=()=>i.createElement(n._,{defaultMessage:"New search",id:"bat_new_search"}),k=()=>i.createElement(n._,{defaultMessage:"Rematch",id:"bat_rematch"}),w=()=>i.createElement(n._,{defaultMessage:"Soon",id:"bat_soon"}),N=()=>i.createElement(n._,{defaultMessage:"Continue searching ?",id:"bat_continue_searching"}),R=(0,o.vU)({ready:{id:"bat_accept_ready",defaultMessage:"I'm ready!"},letsDoIt:{id:"bat_accept_lets_do_it",defaultMessage:"Let's do it!"},letsGo:{id:"bat_accept_lets_go",defaultMessage:"Let's go!"}}),I=[R.ready,R.letsDoIt,R.letsGo];let D=0;const O=()=>(D=I[D+1]?D+1:0,l.NW.formatMessage(I[D])),L=(0,o.vU)({cant:{id:"bat_decline_cant",defaultMessage:"Sorry, I can't"},goingToPass:{id:"bat_decline_going_to_pass",defaultMessage:"Sorry, I'm going to pass"},toSkip:{id:"bat_decline_have_to_skip",defaultMessage:"I have to skip"}}),M=[L.cant,L.goingToPass,L.toSkip];let P=0;const x=()=>(P=M[P+1]?P+1:0,l.NW.formatMessage(M[P])),F=()=>i.createElement(n._,{defaultMessage:"Reward",id:"rat_reward"}),B=e=>i.createElement(n._,{defaultMessage:"Level {level}",id:"pro_status_level",values:{level:i.createElement(o.BK,{value:e.level})}}),Z=()=>i.createElement(n._,{defaultMessage:"Switch to FTT Mode",id:"bat_push_switch_to_ftt_title"}),U=()=>i.createElement(n._,{defaultMessage:"Battles are not available in Forex and Stocks modes. Choose any FTT asset",id:"bat_push_switch_to_ftt_descr"}),H=()=>i.createElement(n._,{defaultMessage:"Choose FTT Asset",id:"bat_push_switch_to_ftt_action"}),G=()=>i.createElement(n._,{defaultMessage:"Choose Live Account",id:"bat_push_choose_live_account_title"}),V=()=>i.createElement(n._,{defaultMessage:"Trades made on a Demo Account during the battle are not counted",id:"bat_push_choose_live_account_descr"}),W=()=>i.createElement(n._,{defaultMessage:"Switch to Live Account",id:"bat_push_choose_live_account_action"}),j=()=>i.createElement(n._,{defaultMessage:"Victory",id:"bat_victory"}),z=()=>i.createElement(n._,{defaultMessage:"Defeat",id:"bat_defeat"}),q=()=>i.createElement(n._,{defaultMessage:"Tie",id:"bat_tie"}),K=()=>i.createElement(n._,{defaultMessage:"Battle finished",id:"bat_battle_finished"}),Y=()=>i.createElement(n._,{defaultMessage:"XP earned",id:"bat_xp_earned"}),X=()=>i.createElement(n._,{defaultMessage:"Total trades",id:"bat_total_trades"}),J=()=>i.createElement(n._,{defaultMessage:"Profitable trades",id:"bat_profitable_trades"}),Q=()=>i.createElement(n._,{defaultMessage:"Winning streak",id:"bat_winning_streak"}),$=()=>i.createElement(n._,{defaultMessage:"Time to join has run out",id:"bat_time_to_join_has_run_out"}),ee=()=>i.createElement(n._,{defaultMessage:"Waiting for opponent",id:"bat_waiting_for_opponent"}),te=()=>i.createElement(n._,{defaultMessage:"Your opponent is waiting!",id:"bat_your_opponent_is_waiting"}),ae=()=>i.createElement(n._,{defaultMessage:"Ready to battle?",id:"bat_ready_to_battle"}),se=()=>i.createElement(n._,{defaultMessage:"Searching for opponent",id:"bat_searching_for_opponent"}),ie=()=>i.createElement(n._,{defaultMessage:"Search for opponent",id:"bat_search_for_opponent"}),re=()=>i.createElement(n._,{defaultMessage:"Cancel",id:"bat_cancel"}),ne=()=>i.createElement(n._,{defaultMessage:"Daily Challenge",id:"bat_daily_challenge"}),oe=()=>i.createElement(n._,{defaultMessage:"No activity",id:"bat_no_activity"}),le=e=>i.createElement(n._,{defaultMessage:"Battles involve making trades using a live account. And to do that, you need to have at least {num} on it.",id:"bat_paywall_desc",values:{num:i.createElement(r.xv,{as:"span",color:"contrast-alpha",variant:"M / Bold",inline:!0},i.createElement(c.F,{currency:e.currency,value:e.amount}))}}),ce=()=>i.createElement(n._,{defaultMessage:"Make Deposit",id:"bat_paywall_button"})},14828:(e,a,s)=>{"use strict";s.d(a,{y:()=>BattleRoomsService});var i=s(47014),r=s(49491),n=s(7223),o=s(64386);const l=(e,a)=>a<e.dates.startingAt?"announced":a>=e.dates.startingAt&&a<e.dates.endingAt?"started":"ended",c=(e,a)=>{if(null===e)return null;const s=l(e,a);return"ended"!==s?r(r({},e),{},{status:s}):null};class BattleRoomsService extends n.t{constructor(e,a,s){var r;super({actual:null,history:[],selectedId:null}),r=this,this.repository=e,this.historyRepository=a,this.timeService=s,this.load=this.createTask(i((function*(){const e=r.timeService.serverTime,a=yield r.repository.find(),s={actual:c(a,e.timestamp)};r.update(s),r.repository.subscribeOnActualChange(r.handleActualChange),r.repository.subscribeOnLeaderboardChange(r.handleLeaderboardChange),r.timeService.events.on("serverTime",r.checkPassedBattleRooms)})),{strategy:n.T.once}),this.loadHistory=this.createTask(i((function*(){const e=yield r.historyRepository.findAll();r.update({history:Array.from(e)}),r.historyRepository.subscribeOnAdded(r.handleHistoryAdded)})),{strategy:n.T.once}),this.checkPassedBattleRooms=this.checkPassedBattleRooms.bind(this),this.handleActualChange=this.handleActualChange.bind(this)}select(e){const a=(0,o.kk)(this.getState(),e);a&&this.update({selectedId:a.id})}checkPassedBattleRooms(e){const a=this.getState(),s=a.actual,i={actual:null,history:a.history};if(s){const a=l(s,e.timestamp);s.status!==a&&"ended"!==a&&(i.actual=r(r({},s),{},{status:a}),this.update(i))}}handleActualChange(e){const a=this.getState();this.update(r(r({},a),{},{actual:e}))}handleLeaderboardChange(e){let a=e.battleRoomId,s=e.leaderboard;this.update((e=>null===e.actual||e.actual.id!==a?e:r(r({},e),{},{actual:r(r({},e.actual),{},{leaderboard:s})})))}handleHistoryAdded(e){const a=this.getState();a.history.find((a=>a.id===e.id))||this.update({history:a.history.concat(e)})}}},64386:(e,a,s)=>{"use strict";function i(e,a){var s;return null!==(s=e.history.find((e=>e.id===a)))&&void 0!==s?s:null}function r(e,a){var s;return(null===(s=e.actual)||void 0===s?void 0:s.id)===a?e.actual:null}function n(e,a){var s;return null!==(s=r(e,a))&&void 0!==s?s:i(e,a)}s.d(a,{kk:()=>n,r2:()=>i,v2:()=>r})},89e3:(e,a,s)=>{"use strict";s.d(a,{o:()=>SearchService});var i=s(49491),r=s(47014),n=s(7223);class SearchService extends n.t{constructor(e,a){var s;super({search:{status:"idle",onlineCount:0,meta:{title:"",description:"",rewardDescription:"",headerImage:"",widgetImage:"",widgetColor:"",splashImage:"",storyId:null},rules:[],autoSearchEnabled:!1},restriction:null}),s=this,this.searchRepository=e,this.restrictionRepository=a,this.load=this.createTask(r((function*(){const e=yield s.searchRepository.find();e&&s.update({search:e}),s.searchRepository.subscribeOnChange((e=>{s.update({search:e})})),s.restrictionRepository.subscribeOnChange((e=>{s.update({restriction:e})}))})),{strategy:n.T.once}),this.search=this.createTask(function(){var e=r((function*(e){let a;if("start"===e){const e=yield s.restrictionRepository.find();if(s.update({restriction:e}),null!==e)return!1;a=yield s.searchRepository.searchStart()}else a=yield s.searchRepository.searchStop();if(a)throw a;return s.updateAfterSearch(e),!0}));return function(a){return e.apply(this,arguments)}}(),{strategy:n.T.queue})}updateAfterSearch(e){"start"===e?this.update((e=>"idle"===e.search.status?i(i({},e),{},{search:i(i({},e.search),{},{status:"pending"})}):e)):this.update((e=>"pending"===e.search.status?i(i({},e),{},{search:i(i({},e.search),{},{status:"idle"})}):e))}}},52356:(e,a,s)=>{"use strict";s.d(a,{V:()=>v,w:()=>p});var i=s(49491),r=s(14936),n=s(27378),o=s(44495),l=s(60042),c=s(18985),d=s(57415);const u=["value","delay"],m={accent:"Dbmf144vWsOs",purple:"_2YjdHagggIt4"},p=e=>{let a,s=e.value,i=e.color,r=e.symbol,o=void 0===r?"none":r,u=e.className;switch(o){case"none":a=n.createElement(c.BK,{maximumFractionDigits:2,value:s});break;case"percent":a=n.createElement(c.BK,{maximumFractionDigits:2,style:"percent",value:s/100});break;case"xp":a=n.createElement(d.ay,{value:Math.floor(s)})}return n.createElement("span",{className:l(i&&m[i],u)},a)},h=(0,o.animated)(p),v=e=>{let a=e.value,s=e.delay,l=r(e,u);return n.createElement(o.Spring,{config:i(i({},o.config.gentle),{},{duration:1500}),delay:s,to:{value:a}},(e=>n.createElement(h,i(i({},l),{},{value:e.value}))))}},41767:(e,a,s)=>{"use strict";s.d(a,{U:()=>R});var i=s(2243),r=s(27378),n=s(60042),o=s(43849),l=s(18985),c=s(57415),d="Bi3u91tdBDLU",u="_1Ls478l_5n2G",m="u6oSXxMlCxyQ",p="YlmDam0aJIyK",h="_2BRrWzsNgXIy";const v=e=>{let a=e.className,s=e.children;return r.createElement("div",{className:n(d,a)},s)};v.Row=e=>{let a=e.left,s=e.center,i=e.right,o=e.className;return r.createElement("div",{className:n(u,o)},r.createElement("div",{className:m},a),r.createElement("div",{className:p},s),r.createElement("div",{className:n(m,h)},i))};var g=s(4281),_=s(52356),f="_3P_hFNwwb_T1",E="Q-PTdP07epDJ",S="_28aaTOrlMsR5",y="_3WBPm2tUJs3o",b="nmU8vYW4tOxv",C="_2K-amVVH0wfi",T="JJSYriGU3v0I";const A={xpEarned:r.createElement(o.wt,null),dealsCount:r.createElement(o.kg,null),dealsSuccessfulCount:r.createElement(o.Gq,null),dealsStreakCount:r.createElement(o.jK,null)},k=Object.keys(A),w={purple:b,accent:C,gamma:T},N=(e,a)=>e>a?w.accent:w.gamma,R=r.memo((e=>{let a=e.leaderboard,s=e.statistics,d=e.className;const u=r.useMemo((()=>k.reduce(((e,i)=>(e[i]||(e[i]={user:0,opponent:0}),s[a.opponent.id]&&(e[i].opponent=s[a.opponent.id][i]),s[a.user.id]&&(e[i].user=s[a.user.id][i]),e)),{})),[a,s]);return r.createElement("div",{className:n(f,d)},r.createElement(v,null,r.createElement("div",{className:E},r.createElement("div",{className:S},r.createElement("div",{className:y},a.opponent.noActivity?r.createElement(c.ZT,{color:"gamma",weight:"bold",noLeading:!0},r.createElement(o.qh,null)):r.createElement(c.ZT,{weight:"bold",noLeading:!0},r.createElement(_.w,{color:"purple",symbol:"percent",value:a.opponent.points}))),r.createElement(c.ZT,{color:"gamma",component:"div",variant:"s"},r.createElement(o.Yi,null)),r.createElement("div",{className:y},a.user.noActivity?r.createElement(c.ZT,{align:"right",color:"gamma",weight:"bold",noLeading:!0},r.createElement(o.qh,null)):r.createElement(c.ZT,{align:"right",weight:"bold",noLeading:!0},r.createElement(_.w,{color:"accent",symbol:"percent",value:a.user.points})))),r.createElement(g.m,{opponentColor:a.opponent.noActivity?"gamma":"purple",opponentNoActivity:a.opponent.noActivity,opponentPoints:a.opponent.points,userColor:a.user.noActivity?"gamma":"accent",userNoActivity:a.user.noActivity,userPoints:a.user.points})),Object.entries(u).map((e=>{let a=i(e,2),s=a[0],n=a[1];return r.createElement(v.Row,{center:r.createElement(c.ZT,{color:"gamma",component:"div",variant:"s",noWrap:!0},A[s]),key:s,left:r.createElement(c.ZT,{variant:"s",weight:"bold",noWrap:!0},r.createElement("span",{className:(o=n.opponent,d=n.user,o>d?w.purple:w.gamma)},r.createElement(l.BK,{value:n.opponent}))),right:r.createElement(c.ZT,{variant:"s",weight:"bold",noWrap:!0},r.createElement("span",{className:N(n.user,n.opponent)},r.createElement(l.BK,{value:n.user})))});var o,d}))))}))},4281:(e,a,s)=>{"use strict";s.d(a,{m:()=>h});var i=s(27378),r=s(60042),n="_35PwUmU6FIFI",o="t-_ynlTD3V4Y",l="_18eFByUBQGUj",c="TSxygoJpb1RA",d="_2JX2sFsW-tJB";const u={accent:"_2OLca0gGE3O3",purple:"wJecm8VcIpSv",gamma:"_1VbRdWnCtfS5"},m=(e,a)=>e?l:a?c:l,p=(e,a)=>e>a?c:l,h=e=>{let a=e.userPoints,s=e.userColor,l=e.userNoActivity,c=void 0!==l&&l,h=e.opponentPoints,v=e.opponentColor,g=e.opponentNoActivity,_=void 0!==g&&g,f=e.className;const E=Math.abs(a),S=Math.abs(h),y=E+S,b=0===y?50:E/y*100,C=0===y?50:S/y*100,T=i.useMemo((()=>c||_?m(_,c):p(C,b)),[_,c,b,C]),A=i.useMemo((()=>c||_?m(c,_):p(b,C)),[_,c,b,C]);return i.createElement("div",{className:r(n,f)},i.createElement("div",{className:r(o,T)},i.createElement("div",{className:r(d,u[v]),style:{transform:"translateX(".concat(C-100,"%)")}})),i.createElement("div",{className:r(o,A)},i.createElement("div",{className:r(d,u[s]),style:{transform:"translateX(".concat(100-b,"%)")}})))}},27782:(e,a,s)=>{"use strict";s.d(a,{W:()=>U});var i=s(27378),r=s(60042),n=s(57415),o="_1_WrmjHWRc9M",l="_3rnO8C87zVf6",c="_2JmgvEUNTrAt",d="_1_Km4Cpbq8Zt";const u={purple:"_1TafnQTIMFpq",accent:"_2-MEW4WfPt_M",gamma:"_3XWiJYfdOLnw",transparent:"bUgBaNo6X2Vy"},m={alpha:"_2Nim6Ee9KFOi",transparent:"_1tZn6M7lAaf7"},p=i.memo((e=>{let a,s,p=e.url,h=e.noActivity,v=e.color,g=e.className;return"transparent"===v?(a=u.transparent,s=m.transparent):(a=h?u.gamma:u[v],s=m.alpha),i.createElement("div",{className:r(o,g)},i.createElement("div",{className:r(c,a)},i.createElement("div",{className:r(d,s)},i.createElement(n.qE,{className:l,url:p}))))}));var h=s(52356);const v=i.memo((e=>{let a=e.points,s=e.description,r=e.className;return i.createElement(n.Af,{className:r,color:"high",size:"small",tip:s},i.createElement(n.ZT,{color:"positive",variant:"m",weight:"bold",noWrap:!0},"+",i.createElement(h.w,{symbol:"xp",value:a})))}));var g=s(18985);const _=i.memo((e=>{let a=e.leaderboard;return i.createElement("span",null,i.createElement(g.BK,{value:"win"===a.opponent.status?1:0}),i.createElement("span",null," - "),i.createElement(g.BK,{value:"win"===a.user.status?1:0}))}));var f=s(43849);const E={active:null,draw:i.createElement(f.K2,null),loss:i.createElement(f.GK,null),win:i.createElement(f.ss,null)};var S="_2NT-YNcTX01R",y="_1YZAi2SoVkPF",b="VTWm3tzrrPsw",C="ZN47Cj-JfkfF",T="_10fDdMT574ze",A="mYiOk-va5loJ",k="_3pEVFay_l7Gv",w="_1GkBuggzNVed",N="mPFz4AKqXadG";const R=i.memo((e=>{let a=e.meta,s=e.leaderboard,o=e.awardPoints,l=e.className,c=e.animated,d=e.hideColors,u=e.onAnimationEnd;const m=void 0!==o&&o>0;return i.createElement("div",{className:r(S,c&&y,l)},i.createElement("header",{className:A},i.createElement(n.ZT,{className:b,variant:"xl"},E[s.user.status]),m&&i.createElement("div",{className:k},i.createElement(v,{className:C,description:a.rewardDescription,points:o}))),i.createElement("div",{className:w},i.createElement("div",{className:N,onAnimationEnd:u},i.createElement(p,{color:d?"transparent":"purple",key:s.opponent.id,noActivity:s.opponent.noActivity,url:s.opponent.avatar})),i.createElement("div",{className:T},i.createElement(n.ZT,{variant:"m",weight:"bold"},i.createElement(_,{leaderboard:s}))),i.createElement("div",{className:N},i.createElement(p,{color:d?"transparent":"accent",key:s.user.id,noActivity:s.user.noActivity,url:s.user.avatar}))))}));var I="_3nr4zCiU75eC",D="_1gJIKR0g2d2v",O="_1ZU6WSKyIG6_",L="_11O9VSUJlE-_",M="_2ATZ7HpYNwO_",P="ht-8XvT50Bdv",x="_148HgzFJefFP",F="_1KbHL_6jHKMa",B="_1AJfgI6t0LZE";const Z=i.memo((e=>{let a=e.meta,s=e.awardPoints,o=e.leaderboard,l=e.className,c=e.animated,d=e.hideColors,u=e.onAnimationEnd;const m=void 0!==s&&s>0;return i.createElement(i.Fragment,null,i.createElement("div",{className:P},i.createElement("div",{className:F},i.createElement(p,{color:d?"transparent":"purple",key:o.opponent.id,noActivity:o.opponent.noActivity,url:o.opponent.avatar})),i.createElement("div",{className:x}),i.createElement("div",{className:F},i.createElement(p,{color:d?"transparent":"accent",key:o.user.id,noActivity:o.user.noActivity,url:o.user.avatar}),m&&i.createElement(v,{className:B,description:a.rewardDescription,points:s}))),i.createElement("div",{className:r(I,c&&D,l)},i.createElement("header",{className:M},i.createElement(n.ZT,{className:O,variant:"xl",onAnimationEnd:u},E[o.user.status]),i.createElement("div",{className:L},i.createElement(n.ZT,{variant:"xxl"},i.createElement(_,{leaderboard:o}))))))})),U=i.memo((e=>{var a;let s=e.meta,r=e.landscape,n=e.leaderboard,o=e.ratingsChanges,l=e.className,c=e.animated,d=e.hideColors,u=e.onAnimationEnd;const m=null===(a=o[n.user.id])||void 0===a?void 0:a.points;return r?i.createElement(Z,{animated:c,awardPoints:m,className:l,hideColors:d,leaderboard:n,meta:s,onAnimationEnd:u}):i.createElement(R,{animated:c,awardPoints:m,className:l,hideColors:d,leaderboard:n,meta:s,onAnimationEnd:u})}))},96646:(e,a,s)=>{"use strict";s.d(a,{Z:()=>c});var i=s(27378),r=s(63967),n=s(97415),o=s(14828),l=s(64386);const c=e=>{const a=(0,r.G)(o.y),s=(0,n.o)(a.store),c=i.useMemo((()=>{if(null===s.selectedId)return null;switch(e){case"actual":return(0,l.v2)(s,s.selectedId);case"history":return(0,l.r2)(s,s.selectedId);case"any":return(0,l.kk)(s,s.selectedId);default:return null}}),[e,s]);if(null===c)throw new Error("Not found selected battle room");return c}},14282:(e,a,s)=>{"use strict";s.d(a,{F0:()=>d,yD:()=>l.y});var i=s(47014),r=s(13243),n=s(16035),o=s(47009),l=s(42690),c=s(58379);const d=(0,r.v)({name:"BrowserEnvironment",services:(e,a)=>({commandService:new o.V(a.commandRepository),analyticsService:new l.y(a.analyticsRepository)})},{repositories:()=>({commandRepository:new n.F,analyticsRepository:new c.z}),publicApi:e=>e}).onAllChildrenResolved(function(){var e=i((function*(e){return e.commandService.load()}));return function(a){return e.apply(this,arguments)}}())},58379:(e,a,s)=>{"use strict";s.d(a,{z:()=>AnalyticsRepository});class AnalyticsRepository{save(e){return console.group("Analytic event"),console.groupEnd(),Promise.resolve()}}},16035:(e,a,s)=>{"use strict";s.d(a,{F:()=>CommandRepository});class CommandRepository{find(){return Promise.resolve(null)}done(e){return Promise.resolve()}resolve(e){return Promise.resolve(null)}}},42690:(e,a,s)=>{"use strict";s.d(a,{y:()=>AnalyticsService});var i=s(7223);class AnalyticsService extends i.t{constructor(e){super(),this.repository=e,this.track=e=>{this.repository.save(e)}}}},47009:(e,a,s)=>{"use strict";s.d(a,{V:()=>CommandService});var i=s(2243),r=s(89320),n=s(47014),o=s(87368),l=s(7223);class CommandService extends l.t{constructor(e){var a;super(),a=this,this.repository=e,this.load=this.createTask(n((function*(){const e=yield a.repository.find();return e&&(yield a.handleCommand(e)),e})),{strategy:l.T.once}),this.resolveCommand=this.createTask(function(){var e=n((function*(e){const s=yield a.repository.resolve(e);return!!s&&a.handleCommand(s)}));return function(a){return e.apply(this,arguments)}}(),{strategy:l.T.queue}),this.commands=new Map}registerCommand(e,a){var s;this.commands.set(e,(null!==(s=this.commands.get(e))&&void 0!==s?s:[]).concat(a))}handleCommand(e){var a=this;return n((function*(){let s=!1;var n,l=r(a.commands);try{for(l.s();!(n=l.n()).done;){const a=i(n.value,2),r=a[0],l=a[1];if(r(e)){var c,d=!1,u=!1;try{for(var m,p=o(l);d=!(m=yield p.next()).done;d=!1){const a=m.value;yield a(e)}}catch(e){u=!0,c=e}finally{try{d&&null!=p.return&&(yield p.return())}finally{if(u)throw c}}s=!0}}}catch(e){l.e(e)}finally{l.f()}return s&&(yield a.repository.done(e)),s}))()}}},42621:(e,a,s)=>{"use strict";s.d(a,{$H:()=>z,Ac:()=>Z,Bh:()=>l,Cm:()=>X,FB:()=>P,Fe:()=>g,Fh:()=>H,Fi:()=>u,Gr:()=>p,Hc:()=>L,Qz:()=>k,Ry:()=>A,T2:()=>O,Tk:()=>j,U8:()=>S,Ue:()=>E,VK:()=>F,VT:()=>M,W7:()=>h,WJ:()=>C,WU:()=>T,Zj:()=>Y,_G:()=>N,aL:()=>w,d$:()=>W,fc:()=>G,g$:()=>_,go:()=>D,ij:()=>f,is:()=>I,jR:()=>m,jp:()=>v,k5:()=>B,mB:()=>d,nS:()=>c,oM:()=>Q,pc:()=>$,qA:()=>R,qd:()=>K,sV:()=>o,se:()=>J,tB:()=>b,tx:()=>q,wW:()=>y,xH:()=>U,zG:()=>V,zS:()=>x});var i=s(27378),r=s(82844),n=s(18985);const o=()=>i.createElement(r._,{defaultMessage:"Join now",id:"rat_card_join_title"}),l=()=>i.createElement(r._,{defaultMessage:"This week's leagues are over",id:"rat_card_ended_title"}),c=()=>i.createElement(r._,{defaultMessage:"View results",id:"rat_card_ended_subtitle"}),d=()=>i.createElement(r._,{defaultMessage:"There are no active events right now, but you can still win Boost Cubes in Leagues!",id:"rat_no_events_go_to_leagues"}),u=()=>i.createElement(r._,{defaultMessage:"Trophy",id:"rat_trophy"}),m=()=>i.createElement(r._,{defaultMessage:"Here's What You Could Win",id:"rat_here_what_you_could_win"}),p=()=>i.createElement(r._,{defaultMessage:"Let's Go!",id:"rat_lets_go"}),h=e=>i.createElement(r._,{defaultMessage:"Awards for Top-{count} Traders",id:"rat_awards_for_top_traders",values:{count:i.createElement(n.BK,{value:e.count})}}),v=()=>i.createElement(r._,{defaultMessage:"Show us what you can do! Earn points, get to the top of the leaderboard, and move on to the next League with new awards and boosts.",id:"rat_league_active_description"}),g=e=>i.createElement(r._,{defaultMessage:"Show us what you can do! Earn points, get to the top of the leaderboard, and get a {trophy} every time you do.",id:"rat_league_active_no_next_league_description",values:{trophy:e.trophyName}}),_=()=>i.createElement(r._,{defaultMessage:"Active",id:"rat_league_active"}),f=()=>i.createElement(r._,{defaultMessage:"This box contains several useful trading items",id:"rat_results_lootbox_award_description"}),E=()=>i.createElement(r._,{defaultMessage:"This box is waiting for you in the Bonuses and Promo Codes section. Check it out!",id:"rat_results_lootbox_award_location"}),S=()=>i.createElement(r._,{defaultMessage:"Check Out Box",id:"rat_check_out_box"}),y=()=>i.createElement(r._,{defaultMessage:"What Did I Win?",id:"rat_results_what_did_i_win"}),b=()=>i.createElement(r._,{defaultMessage:"What Should I Do Next?",id:"rat_results_what_should_i_do_next"}),C=e=>i.createElement(r._,{defaultMessage:"You were {place} on the leaderboard and went back one League. But don't worry, you'll have another shot at getting back to this League!",id:"rat_results_down_description",values:{place:i.createElement(n.BK,{value:e.place})}}),T=e=>i.createElement(r._,{defaultMessage:"Congratulations! You were {place} on the leaderboard and advance to the next League.",id:"rat_results_up_description",values:{place:i.createElement(n.BK,{value:e.place})}}),A=e=>i.createElement(r._,{defaultMessage:"Good job! You were {place} on the leaderboard and stay in the same league. But don't worry, you'll have another shot at advancing to the next League!",id:"rat_results_standoff_description",values:{place:i.createElement(n.BK,{value:e.place})}}),k=e=>i.createElement(r._,{defaultMessage:"Good job! You were {place} on the leaderboard and get a {trophy}, but you'll stay in the same league. Don't worry, you'll have another shot at advancing to the next one!",id:"rat_results_standoff_with_trophy_description",values:{place:i.createElement(n.BK,{value:e.place}),trophy:e.trophyName}}),w=e=>i.createElement(r._,{defaultMessage:"Congratulations! You were {place} on the leaderboard and got a {trophy}.",id:"rat_results_up_no_next_league_description",values:{place:i.createElement(n.BK,{value:e.place}),trophy:e.trophyName}}),N=e=>i.createElement(r._,{defaultMessage:"Good job! You were {place} on the leaderboard and stay in the same league, but you don't get a {trophy}. Don't worry, you'll have another shot at winning it!",id:"rat_results_standoff_no_trophy_description",values:{place:i.createElement(n.BK,{value:e.place}),trophy:e.trophyName}}),R=()=>i.createElement(r._,{defaultMessage:"Completed",id:"rat_completed"}),I=()=>i.createElement(r._,{defaultMessage:"Results",id:"rat_results"}),D=()=>i.createElement(r._,{defaultMessage:"Next League",id:"rat_next_league"}),O=()=>i.createElement(r._,{defaultMessage:"Successfully complete the previous League to advance to this one. Good luck! ",id:"rat_next_league_description"}),L=()=>i.createElement(r._,{defaultMessage:"Leaders",id:"rat_leaders"}),M=()=>i.createElement(r._,{defaultMessage:"Contenders",id:"rat_contenders"}),P=()=>i.createElement(r._,{defaultMessage:"Outsiders",id:"rat_outsiders"}),x=()=>i.createElement(r._,{defaultMessage:"How Leagues Work",id:"rat_how_leagues_work_title"}),F=()=>i.createElement(r._,{defaultMessage:"Take a look at the basic rules and conditions",id:"rat_how_leagues_work_description"}),B=()=>i.createElement(r._,{defaultMessage:"Time Left",id:"rat_time_left"}),Z=()=>i.createElement(r._,{defaultMessage:"Current League",id:"rat_current_league"}),U=()=>i.createElement(r._,{defaultMessage:"What's Inside?",id:"rat_whats_inside"}),H=()=>i.createElement(r._,{defaultMessage:"League Trophy",id:"rat_league_trophy"}),G=()=>i.createElement(r._,{defaultMessage:"Go to Current League",id:"rat_go_to_current_league"}),V=()=>i.createElement(r._,{defaultMessage:"You've already completed this League. Become one of the leaders of the current League so you don't have to come back and repeat this one.",id:"rat_league_has_ended_description"}),W=()=>i.createElement(r._,{defaultMessage:"This League has ended",id:"rat_league_has_ended"}),j=()=>i.createElement(r._,{defaultMessage:"Learn More About Leagues",id:"rat_learn_more_about_leagues"}),z=()=>i.createElement(r._,{defaultMessage:"Compete with traders in Events",id:"rat_compete_with_traders"}),q=()=>i.createElement(r._,{defaultMessage:"Battles are 1-on-1 competitions between traders. You can find Battles in the Events tab.",id:"rat_battles_tooltip"}),K=()=>i.createElement(r._,{defaultMessage:"Trade on your live account",id:"rat_trade_on_live_account"}),Y=()=>i.createElement(r._,{defaultMessage:"Successful trades will give you more XP. The greater the trade amount, the more XP you'll earn.",id:"rat_live_account_tooltip"}),X=()=>i.createElement(r._,{defaultMessage:"How to Get XP",id:"rat_how_get_xp"}),J=()=>i.createElement(r._,{defaultMessage:"Ready to challenge yourself?",id:"rat_welcome_subtitle"}),Q=()=>i.createElement(r._,{defaultMessage:"Leagues",id:"rat_welcome_to_leagues"}),$=()=>i.createElement(r._,{defaultMessage:"Join Leagues",id:"rat_join_leagues"})},98225:(e,a,s)=>{"use strict";s.d(a,{BC:()=>n.BC,CQ:()=>c.C,HM:()=>u.H,MH:()=>i.M,P8:()=>g.x,Qo:()=>o.Q,Yz:()=>r.Y,_7:()=>l._,fT:()=>d.f,gb:()=>h.g,oP:()=>v.w,qp:()=>m.q,vN:()=>_.w,w_:()=>p.w});s(86568);var i=s(29820),r=s(2497),n=s(89852),o=s(32545),l=s(71979),c=s(48050),d=s(43583),u=s(91101),m=s(57773),p=s(63564),h=s(14856),v=s(31339),g=s(43630),_=s(39754)},57773:(e,a,s)=>{"use strict";s.d(a,{q:()=>HistoryService});var i=s(49491),r=s(47014),n=s(7223);class HistoryService extends n.t{constructor(e,a){var s;super({nextUpdateAt:0,lastTransition:null}),s=this,this.repository=e,this.timeService=a,this.load=this.createTask(r((function*(){const e=s.getState().nextUpdateAt;if(s.timeService.serverTime.timestamp>=e){const e=yield s.repository.find();e&&s.update(e)}})),{strategy:n.T.queue})}markAsViewed(e){var a=this;return r((function*(){yield a.repository.markAsViewed(e),a.update((a=>{var s;return(null===(s=a.lastTransition)||void 0===s?void 0:s.id)===e?i(i({},a),{},{lastTransition:i(i({},a.lastTransition),{},{viewed:!0})}):a}))}))()}}},91101:(e,a,s)=>{"use strict";s.d(a,{H:()=>LootBoxesService});var i=s(49491),r=s(47014),n=s(7223);class LootBoxesService extends n.t{constructor(e){var a;super({lootBoxes:{}}),a=this,this.repository=e,this.load=this.createTask(function(){var e=r((function*(e){if(a.getState().lootBoxes[e])return;const s=yield a.repository.find(e);s&&a.update((a=>i(i({},a),{},{lootBoxes:i(i({},a.lootBoxes),{},{[e]:s})})))}));return function(a){return e.apply(this,arguments)}}(),{strategy:n.T.queue})}}},63564:(e,a,s)=>{"use strict";s.d(a,{w:()=>RatingsService});var i=s(49491),r=s(47014),n=s(7223);class RatingsService extends n.t{constructor(e,a){var s;super({season:{id:-1,dates:{startingAt:0,endingAt:0,rebalancingAt:0},meta:{title:"",rulesStoryId:null},welcomeMeta:{description:"",widgetImage:"",headerImage:"",bannerImage:"",widgetColor:""}},leagues:[],leaderboard:{user:{id:0,name:"",country:"",avatar:"",points:0,position:0},players:[]},user:{league:null},selectedAward:null}),s=this,this.repository=e,this.timeService=a,this.load=this.createTask(r((function*(){const e=s.getState().season,a=s.timeService.serverTime;if(-1!==e.id&&a.timestamp<e.dates.rebalancingAt)return;const i=yield s.repository.find();i&&s.updateState(i),s.repository.subscribeOnLeaderboardChange(s.handleLeaderboardChange)})),{strategy:n.T.queue}),this.handleLeaderboardChange=this.handleLeaderboardChange.bind(this)}selectLeague(e){this.update({selectedLeagueId:e})}selectAward(e){this.update({selectedAward:e})}handleLeaderboardChange(e){null===this.getState().user.league?this.repository.find().then((e=>e&&this.updateState(e))):this.update((a=>i(i({},a),{},{leaderboard:e})))}updateState(e){const a=e.leagues.find((a=>{var s;return(null===(s=e.user.league)||void 0===s?void 0:s.id)===a.id}));this.update((s=>{var r,n,o;return i(i({},e),{},{selectedLeagueId:null!==(r=null!==(n=null==a?void 0:a.id)&&void 0!==n?n:s.selectedLeagueId)&&void 0!==r?r:null===(o=e.leagues[0])||void 0===o?void 0:o.id})}))}}},14856:(e,a,s)=>{"use strict";s.d(a,{g:()=>SettingsService});var i=s(49491),r=s(47014),n=s(7223);class SettingsService extends n.t{constructor(e){var a;super({bannerVisibility:{aboutRatings:!1}}),a=this,this.bannerVisibilityRepository=e,this.load=this.createTask(r((function*(){const e=yield a.bannerVisibilityRepository.find();a.update((a=>i(i({},a),{},{bannerVisibility:null!=e?e:a.bannerVisibility})))})),{strategy:n.T.once}),this.toggleBanner=this.createTask(function(){var e=r((function*(e){const s=a.getState().bannerVisibility;try{const r=!s[e],n=i(i({},s),{},{[e]:r});yield a.bannerVisibilityRepository.update(n),a.update((a=>i(i({},a),{},{bannerVisibility:i(i({},a.bannerVisibility),{},{[e]:r})})))}catch(r){throw a.update((a=>i(i({},a),{},{bannerVisibility:i(i({},a.bannerVisibility),{},{[e]:s[e]})}))),r}}));return function(a){return e.apply(this,arguments)}}(),{strategy:n.T.queue})}}},43583:(e,a,s)=>{"use strict";s.d(a,{f:()=>n});var i=s(47014),r=s(59757);const n=function(){var e=i((function*(e,a,s){yield Promise.all([e.load(),a.load()]);const i=e.getState().user,n=a.getState().lastTransition;if("summary"===s)return null===n||n.viewed?i.league?r.FL.RATINGS_SUMMARY:r.FL.RATINGS_WELCOME:r.FL.RATINGS_RESULTS}));return function(a,s,i){return e.apply(this,arguments)}}()},43630:(e,a,s)=>{"use strict";s.d(a,{x:()=>c});var i=s(27378),r=s(63967),n=s(97415),o=s(74199),l=s(63564);const c=i.memo((()=>{const e=(0,r.G)(l.w),a=(0,n.o)(e.store).selectedAward;return a?i.createElement(o.KE,{size:"large",url:a.meta.bigWidgetImage}):null}))},89852:(e,a,s)=>{"use strict";s.d(a,{BC:()=>l});var i=s(49491),r=s(27378),n=s(74199);const o=r.lazy((()=>s.e(7766).then(s.bind(s,67766)).then((e=>({default:e.Lootbox}))))),l=e=>r.createElement(r.Suspense,{fallback:r.createElement(n.zo,null)},r.createElement(o,i({},e)))},39754:(e,a,s)=>{"use strict";s.d(a,{w:()=>l});var i=s(49491),r=s(27378),n=s(42621),o=s(74199);const l=r.memo((e=>{let a=e.className;return r.createElement(o.V9,{className:a},r.createElement(o.V9.Center,null,(e=>r.createElement(o.pY,i({align:"center",size:"small",isClipped:!0},e),r.createElement(n.is,null)))))}))},32545:(e,a,s)=>{"use strict";s.d(a,{Q:()=>l});var i=s(49491),r=s(27378),n=s(74199);const o=r.lazy((()=>s.e(5879).then(s.bind(s,45879)).then((e=>({default:e.Results}))))),l=e=>r.createElement(r.Suspense,{fallback:r.createElement(n.zo,null)},r.createElement(o,i({},e)))},31339:(e,a,s)=>{"use strict";s.d(a,{w:()=>m});var i=s(49491),r=s(27378),n=s(63967),o=s(97415),l=s(14282),c=s(77740),d=s(74199),u=s(63564);const m=r.memo((e=>{let a=e.className,s=e.onStoryOpenClick;const m=(0,n.G)(l.yD),p=(0,n.G)(u.w),h=(0,o.o)(p.store).season,v=r.useCallback((()=>{null!==h.meta.rulesStoryId&&(null==s||s(h.meta.rulesStoryId),m.track({scope:"leagues",category:"leagues",action:"active",label:"info_icon"}))}),[h,m,s]);return r.createElement(d.V9,{className:a},r.createElement(d.V9.Center,null,(e=>r.createElement(d.pY,i({align:"center",size:"small",isClipped:!0},e),r.createElement("span",null)))),r.createElement("div",null,null!==h.meta.rulesStoryId&&r.createElement(d.Qe,{"data-test":"rat_summary_summary-header_icon",onClick:v},r.createElement(c.Gc9,null))))}))},71979:(e,a,s)=>{"use strict";s.d(a,{_:()=>l});var i=s(49491),r=s(27378),n=s(74199);const o=r.lazy((()=>s.e(6811).then(s.bind(s,56811)).then((e=>({default:e.Summary}))))),l=e=>r.createElement(r.Suspense,{fallback:r.createElement(n.zo,null)},r.createElement(o,i({},e)))},48050:(e,a,s)=>{"use strict";s.d(a,{C:()=>l});var i=s(49491),r=s(27378),n=s(74199);const o=r.lazy((()=>s.e(7336).then(s.bind(s,17336)).then((e=>({default:e.Welcome}))))),l=e=>r.createElement(r.Suspense,{fallback:r.createElement(n.zo,null)},r.createElement(o,i({},e)))},29820:(e,a,s)=>{"use strict";s.d(a,{M:()=>h});var i=s(27378),r=s(63967),n=s(97415),o=s(14282),l=s(57415),c=s(63564),d=s(57773),u=s(87947),m=s(51413),p=s(12501);const h=i.memo((e=>{let a=e.onClick;const s=(0,r.G)(o.yD),h=(0,r.G)(c.w),v=(0,r.G)(d.q),g=(0,n.o)(h.store),_=g.season,f=g.leagues,E=g.user,S=g.leaderboard,y=(0,n.o)(v.store).lastTransition,b=i.useMemo((()=>{return null===E.league?{status:"not_started"}:y&&!1===y.viewed?{status:"results",league:null!==(e=f.find((e=>e.id===y.leagueId)))&&void 0!==e?e:E.league}:{status:"in_progress",league:E.league};var e}),[E,f,y]);i.useEffect((()=>{h.load(),v.load()}),[h,v]);const C=i.useCallback((()=>{a(),s.track({scope:"leagues",category:"leagues",action:"main_card",label:"open/widget/".concat(b.status)})}),[b.status,s,a]);let T;switch(b.status){case"not_started":T=i.createElement(u.Z,{leagues:f});break;case"in_progress":T=i.createElement(m.K,{endingAt:_.dates.rebalancingAt,leaderboard:S,userLeague:b.league});break;case"results":T=i.createElement(p.l,{userLeague:b.league})}return i.createElement(l.Zb,{"data-test":"rat-entry-card",hasHighlight:"results"===b.status},i.createElement(l.Zb.Content,{onClick:C},T))}))},64825:(e,a,s)=>{"use strict";s.d(a,{L:()=>l});var i=s(27378),r=s(17302),n=s(18985),o=s(57415);const l=i.memo((e=>{let a=e.position,s=e.config;const l=i.useMemo((()=>s.moveUpPositions&&a>=s.moveUpPositions.from&&a<=s.moveUpPositions.to?"positive-alpha":s.moveDownPositions&&a>=s.moveDownPositions.from&&a<=s.moveDownPositions.to?"negative-alpha":"contrast-gamma"),[a,s]);return i.createElement(r.xv,{color:l,variant:"S Compact / Bold"},i.createElement(o.C4,{position:i.createElement(n.BK,{compactDisplay:"short",value:a})}))}))},51413:(e,a,s)=>{"use strict";s.d(a,{K:()=>u});var i=s(27378),r=s(17302),n=s(83714),o=s(57415),l=s(64825),c=s(72922);const d=e=>{let a=e.endingAt;const s=(0,n.w6)();return i.createElement(o.gi,{format:"short",serverTime:s.timestamp,startTime:a})},u=i.memo((e=>{let a=e.endingAt,s=e.userLeague,n=e.leaderboard;return i.createElement(r.xu,null,i.createElement("img",{alt:"",className:c.Z.icon,"data-test":"rat-entry-card-stage-joined-icon",src:s.meta.icon}),i.createElement(r.xu,null,i.createElement("div",{className:c.Z.title},i.createElement(r.xv,{variant:"M Compact / Bold"},s.meta.title)),n.user&&i.createElement(l.L,{config:s.leaderboardConfig,position:n.user.position})),i.createElement("div",{className:c.Z.timer},i.createElement(r.Ct,{color:"neutralGamma",content:i.createElement(d,{endingAt:a})})))}))},72922:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={icon:"_6PkGWxjhNwCO",timer:"_3jBWW2lBWAu8",title:"_1ZuKBHGGXfXu"}},87947:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var i=s(27378),r=s(42621),n=s(17302),o=s(98502);const l=i.memo((e=>{let a=e.leagues;return i.createElement(n.xu,null,i.createElement("div",{className:o.Z.icons},i.createElement("div",{className:o.Z.iconsSlider,"data-test":"rat-entry-card-stage-not-join-icons"},a.map((e=>i.createElement("img",{alt:"",className:o.Z.icon,key:e.id,src:e.meta.icon}))),a.map((e=>i.createElement("img",{alt:"",className:o.Z.icon,key:"".concat(e.id,"_2"),src:e.meta.icon}))))),i.createElement(n.xu,null,i.createElement("div",{className:o.Z.title},i.createElement(n.xv,{variant:"M Compact / Bold"},i.createElement(r.oM,null))),i.createElement(n.xv,{color:"contrast-gamma",variant:"S Compact / Bold"},i.createElement(r.sV,null))))}))},98502:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={icons:"_3nR_4Aba7n_T",iconsSlider:"_1g7DPQDgu5SY",loop:"_33OtqQU73fCJ",icon:"leey8NwG-3jF",title:"_3ZpkTgQ_Zmao"}},12501:(e,a,s)=>{"use strict";s.d(a,{l:()=>l});var i=s(27378),r=s(42621),n=s(17302),o=s(81717);const l=i.memo((e=>{let a=e.userLeague;return i.createElement(n.xu,null,i.createElement("img",{alt:"",className:o.Z.icon,src:a.meta.icon}),i.createElement(n.xu,null,i.createElement("div",{className:o.Z.title},i.createElement(n.xv,{variant:"M Compact / Bold"},i.createElement(r.Bh,null))),i.createElement(n.xv,{color:"contrast-gamma",variant:"S Compact / Bold"},i.createElement(r.nS,null))))}))},81717:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={icon:"_2WkXoXVkG72i",title:"_2tdMuoJZ0fft"}},2497:(e,a,s)=>{"use strict";s.d(a,{Y:()=>u});var i=s(27378),r=s(63967),n=s(15954),o=s(42621),l=s(59757),c=s(63564),d=s(89861);const u=i.memo((()=>{const e=(0,r.G)(c.w),a=(0,n.K)(e.store,(e=>e.leagues[e.leagues.length-2]),[]);return i.createElement(l.Yz,{description:i.createElement(o.mB,null),icon:a?i.createElement("img",{className:d.Z.image,src:a.meta.icon}):null})}))},89861:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={image:"_3JVCgeTdzyu9"}},95601:(e,a,s)=>{"use strict";s.d(a,{AA:()=>o.AA,KT:()=>o.KT,LY:()=>c.L,MX:()=>o.MX,NR:()=>o.NR,NS:()=>o.NS,Tb:()=>d.T,Uc:()=>m.U,VY:()=>l.V,bR:()=>o.bR,eM:()=>u.e,fs:()=>o.fs,gj:()=>o.gj,ir:()=>v,tJ:()=>o.tJ,u$:()=>h});s(21713);var i=s(27378),r=s(13243),n=s(28373),o=s(61487),l=s(2162),c=s(26814),d=s(95408),u=s(58275),m=s(83992),p=s(49791);const h=(0,r.v)({name:"PlatformLayout",services:()=>({layout:new p.P})},{publicApi:e=>e}),v=(0,n.k)(h,(e=>{let a=e.children;return i.createElement(o.Ar,null,a)}))},49791:(e,a,s)=>{"use strict";s.d(a,{P:()=>LayoutService});var i=s(49491),r=s(2243),n=s(7223),o=s(94689);class LayoutService extends n.t{constructor(){super({isDesktop:!0,isActiveOverlay:!0,overlay:{}}),this.attach(this.store.map((e=>{let a=e.overlay,s=e.isDesktop;return{isActiveOverlay:Object.entries(a).every((e=>{const a=r(e,2),i=a[0];return!a[1]||!(!s||i!==o.Z.MinorSidebar&&i!==o.Z.MajorSidebar)}))}})))}setMinorSidebar(e){this.setOverlayState(o.Z.MinorSidebar,e)}setMajorSidebar(e){this.setOverlayState(o.Z.MajorSidebar,e)}setIsDesktopLayout(e){this.update({isDesktop:e})}setOverlayState(e,a){this.update((s=>i(i({},s),{},{overlay:i(i({},s.overlay),{},{[e]:a})})))}}},94689:(e,a,s)=>{"use strict";var i;s.d(a,{Z:()=>i}),function(e){e.MinorSidebar="minorSidebar",e.MajorSidebar="majorSidebar"}(i||(i={}))},83992:(e,a,s)=>{"use strict";s.d(a,{U:()=>i});const i=(0,s(84584).Z)({shared:!0,id:"logoSlot"})},61487:(e,a,s)=>{"use strict";s.d(a,{AA:()=>b,Ar:()=>T,KT:()=>_,MX:()=>E,NR:()=>v,NS:()=>S,bR:()=>f,fs:()=>g,gj:()=>y,tJ:()=>h});var i=s(27378),r=s(37488),n=s(84584),o=s(2050),l=s(63967),c=s(87601),d=s(49791),u=s(95408),m=s(2162),p=s(26814);const h=(0,n.Z)({id:"binaryLayoutModalsSlot"}),v=(0,n.Z)({id:"binaryLayoutSidebarsSlot"}),g=(0,n.Z)({id:"binaryLayoutFooterSlot"}),_=(0,n.Z)({id:"binaryLayoutScreenBlockerSlot"}),f=(0,n.Z)({id:"binaryLayoutTopBannerSlot"}),E=(0,n.Z)({id:"binaryLayoutNoticesSlot"}),S=(0,n.Z)({id:"binaryLayoutGuruSlot"}),y=(0,n.Z)({id:"binaryLayoutPayOutSlot"}),b=(0,n.Z)({id:"binaryLayoutOverlaySlot"}),C=i.memo((()=>{const e=(0,o.x)(h);return i.createElement(i.Fragment,null,e)})),T=function(e){let a=e.children;const s=i.useRef(null),n=(0,o.x)(_),h=(0,o.x)(f),T=(0,o.x)(v),A=(0,o.x)(g),k=(0,o.x)(E),w=(0,o.x)(S),N=(0,o.x)(y),R=(0,o.x)(b),I=(0,l.G)(d.P),D=(0,r.useMediaQuery)({minWidth:c.j$.BREAKPOINT_961}),O=(0,r.useMediaQuery)({minWidth:c.j$.BREAKPOINT_769,maxWidth:c.j$.BREAKPOINT_960,orientation:c.eh.PORTRAIT});return i.useEffect((()=>{const e=D||O;I.setIsDesktopLayout(e)}),[I,D,O]),i.createElement(m.V.Provider,{value:{rootRef:s}},i.createElement("div",{className:"layout",ref:s},i.createElement("div",{className:"layout__floating-elements"},i.createElement("div",{id:"tooltip-full-size-portal",className:"layout__tooltip-full-size-portal"}),k,i.createElement("div",{className:"bottom-sheet"})),i.createElement("div",{className:"layout__aside-container"},i.createElement("aside",{className:"layout__aside"},i.createElement("div",{className:"layout__aside-inner"},i.createElement(p.Y,null))),T),i.createElement("main",{className:"layout__main"},i.createElement("div",{className:"layout__header"},h,i.createElement(u.P,null)),i.createElement("div",{className:"layout__body"},a,i.createElement("div",{className:"layout__guru"},w),n),i.createElement("div",{className:"layout__footer"},A)),i.createElement("div",{className:"layout__payout"},N),i.createElement(C,null),i.createElement("div",{className:"layout__overlay"},R)))}},84592:(e,a,s)=>{"use strict";s.d(a,{h:()=>n});var i=s(27378),r=s(60042);const n=e=>{let a=e.dir,s=e.className,n=e.children;return i.createElement("header",{dir:a,className:r("header",s)},n)}},95408:(e,a,s)=>{"use strict";s.d(a,{P:()=>u,T:()=>d});var i=s(27378),r=s(84584),n=s(2050),o=s(17302),l=s(84592),c=s(59343);const d=(0,r.Z)({id:"platformHeaderSlot"}),u=()=>{const e=(0,c.V)(),a=(0,i.useMemo)((()=>e?"flex-start":"flex-end"),[e]);return i.createElement(l.h,{className:"com-header-platform"},i.createElement(o.xu,{direction:"row",horizontalAlign:a,fullWidth:!0,fitContainer:!0,padding:"m",gap:"m"},(0,n.x)(d)))}},78627:(e,a,s)=>{"use strict";s.d(a,{Mg:()=>n,Vo:()=>l,_D:()=>o});var i=s(27378),r=s(97650);s(67529);const n=e=>{let a=e.children;return i.createElement(r.O,{className:"sidebar-menu-vertical"},a)},o=e=>{let a=e.children;return i.createElement(r.O,{className:"sidebar-menu-vertical__body"},a)},l=e=>{let a=e.children;return i.createElement(r.O,{className:"sidebar-menu-vertical__footer"},a)}},67529:(e,a,s)=>{"use strict";s.d(a,{y:()=>d});var i=s(49491),r=s(27378),n=s(60042),o=s(17302),l=s(82844);const c=r.memo((e=>{let a=e.value,s=a;return"number"==typeof a&&(s=a>0?r.createElement(o.AT,{count:a}):null),r.createElement("div",{className:"sidebar-menu-vertical__counter"},s)})),d=e=>r.createElement("li",{className:n("sidebar-menu-vertical__item",{"sidebar-menu-vertical__item_selected":e.id===e.selectedId||e.selected})},r.createElement("button",{style:e.style,className:"sidebar-menu-vertical__button",onClick:()=>{e.onClick({id:e.id,menuIndex:e.menuIndex})},"data-test":e.dataTest?e.dataTest:""},r.createElement("span",{className:"sidebar-menu-vertical__icon"},e.icon,r.createElement(c,{value:e.unreadNotifications})),e.title&&r.createElement("span",{className:"sidebar-menu-vertical__title"},r.createElement(l._,i({},e.title)))),e.children,e.slot)},64235:(e,a,s)=>{"use strict";s.d(a,{S:()=>r});var i=s(27378);const r=e=>{let a=e.children;return i.createElement("ul",{className:"sidebar-menu-vertical__list"},a)}},97650:(e,a,s)=>{"use strict";s.d(a,{O:()=>r});var i=s(27378);const r=e=>{let a=e.children,s=e.className;return i.createElement("div",{className:s},a)}},26814:(e,a,s)=>{"use strict";s.d(a,{L:()=>u,Y:()=>m});var i=s(27378),r=s(37488),n=s(84584),o=s(2050),l=s(87601),c=s(78627),d=s(58275);const u=(0,n.Z)({id:"sidebarMenuFooterSlot"}),m=()=>{const e=(0,o.x)(u),a=(0,r.useMediaQuery)({query:"(min-width: ".concat(l.j$.BREAKPOINT_1024,"px) and (min-height: ").concat(l.j$.BREAKPOINT_480,"px)")});return i.createElement(c.Mg,null,i.createElement(c._D,null,i.createElement(d.B,{isDesktop:a})),a&&i.createElement(c.Vo,null,e))}},69242:(e,a,s)=>{"use strict";s.d(a,{G:()=>l});var i=s(27378),r=s(21182),n=s(83992);const o=(0,r.W)(n.U),l=()=>i.createElement("div",{className:"sidebar-menu-vertical__logo"},i.createElement(o,{props:{size:"small"}}))},58275:(e,a,s)=>{"use strict";s.d(a,{B:()=>u,e:()=>d});var i=s(27378),r=s(76232),n=s(46124),o=s(69242),l=s(64235),c=s(67529);const d=(0,r.t)({id:"navigationMenuItemsPipe"}),u=e=>{const a=(0,n.k)(d,[],e);return i.createElement(l.S,null,e.isDesktop?i.createElement(o.G,null):null,a.map(((e,a)=>i.createElement(c.y,{key:e.id,menuIndex:a,id:e.id,icon:e.icon,onClick:e.onClick,selected:e.selected,title:e.title,slot:e.slot,dataTest:e.dataTest,unreadNotifications:e.unreadNotifications}))))}},2162:(e,a,s)=>{"use strict";s.d(a,{V:()=>i});const i=s(27378).createContext({rootRef:{current:null}})},33302:(e,a,s)=>{"use strict";s.d(a,{a:()=>Action});var i=s(27378);s(60042);class Action extends i.Component{constructor(e){super(e),this.state={error:void 0,processing:!1},this.isMount=!1,this.handleClick=this.handleClick.bind(this),this.handleSuccessResponse=this.handleSuccessResponse.bind(this)}componentDidMount(){this.isMount=!0}componentWillUnmount(){this.dropErrorTimeout(),this.isMount=!1}render(){const e=this.state,a=e.processing,s=e.error;return(0,this.props.children)({processing:a,error:s,onClick:this.handleClick})}setStateIfMount(e){this.isMount&&this.setState(e)}addErrorTimeout(){this.dropErrorTimeout(),void 0!==this.props.removeErrorAfter&&(this.timeoutId=window.setTimeout((()=>{this.setStateIfMount({error:void 0})}),this.props.removeErrorAfter))}dropErrorTimeout(){void 0!==this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=void 0)}handleClick(e){if(e.preventDefault(),this.state.processing)return;this.setState({processing:!0});const a=Date.now();this.props.onClick(e).then(this.handleSuccessResponse).finally((()=>{const e=Date.now()-a;e<this.props.blockingMinTime?setTimeout((()=>{this.setStateIfMount({processing:!1})}),this.props.blockingMinTime-e):this.setStateIfMount({processing:!1})}))}handleSuccessResponse(e){e&&(this.setStateIfMount({error:e}),this.addErrorTimeout())}}Action.defaultProps={blockingMinTime:300,removeErrorAfter:3e3}},85092:(e,a,s)=>{"use strict";s.d(a,{j:()=>l});var i=s(27378),r=s(60042),n=s(15696),o=s(29609);const l=e=>{let a=e.error,s=e.className;return i.createElement(n.Z,{component:null},a?i.createElement(o.Z,{key:"auth-error",classNames:{enter:"auth-c-error_state_enter",enterActive:"auth-c-error_state_enter-active",exit:"auth-c-error_state_exit-active",exitActive:"auth-c-error_state_exit-active"},timeout:250},i.createElement("div",{className:r("auth-c-error",s)},i.createElement("span",null,a))):[])}},3101:(e,a,s)=>{"use strict";s.d(a,{q:()=>m});var i=s(49491),r=s(2243),n=s(14936),o=s(27378),l=s(60042),c=s(15474),d=s(83701);const u=["sourceUrl","className"],m=o.forwardRef(((e,a)=>{let s=e.sourceUrl,m=e.className,p=n(e,u);const h=o.useState((()=>s?null:c.f7T)),v=r(h,2),g=v[0],_=v[1],f=o.useCallback((()=>{_(c.f7T)}),[]);return o.createElement("div",i({className:l(d.Z.host,m),ref:a},p),g?o.createElement(g,{className:l(d.Z.iconPlaceholder)}):o.createElement("img",{className:l(d.Z.image),src:s,width:"96",height:"96",onError:f,alt:"User avatar"}))}));m.displayName="auth(components)(Avatar)"},83701:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1ZTCZBN7FXIo",image:"XythExM6w2jM",iconPlaceholder:"_13w7jgALXfYE"}},80502:(e,a,s)=>{"use strict";s.d(a,{E:()=>d});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(20602);const c=["className"],d=n.forwardRef(((e,a)=>{let s=e.className,d=r(e,c);return n.createElement("div",i(i({},d),{},{className:o(l.Z.host,s),ref:a}))}));d.displayName="auth(components)(FieldRow)"},20602:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1mU2XWLkj-SM"}},97360:(e,a,s)=>{"use strict";s.d(a,{j:()=>c});var i=s(49491),r=s(14936),n=s(27378),o=s(60042);const l=["className"],c=n.forwardRef(((e,a)=>{let s=e.className,c=r(e,l);return n.createElement("div",i(i({},c),{},{className:o("auth-note",s),ref:a}))}));c.displayName="auth(components)(Note)"},49013:(e,a,s)=>{"use strict";s.d(a,{O:()=>c});var i=s(27378),r=s(60042),n=s(15474),o=s(82020);const l={aa:{title:"Apple",className:o.Z.host_id_aa,IconComponent:n.Xqp},fb:{title:"Facebook",className:o.Z.host_id_fb,IconComponent:n.zJ_},gp:{title:"Google",className:o.Z.host_id_gp,IconComponent:n.kBK},ln:{title:"Line Messenger",className:o.Z.host_id_ln,IconComponent:n.OBu}},c=e=>{let a=e.id,s=e.href,n=e.disabled;const c=l[a]||{className:"",title:"",IconComponent:()=>null};return i.createElement("a",{className:r(o.Z.host,n&&o.Z.host_disabled,c.className),href:s,"data-test":"soc-redirect-".concat(a),title:c.title,"aria-disabled":n,tabIndex:n?-1:void 0},i.createElement(c.IconComponent,null))};c.displayName="auth(components)(OAuthProvider)"},82020:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"lvEPrH0n82zt",host_disabled:"_IlDTyhqPdTn",host_id_aa:"aCJkaQT_wfZP",host_id_fb:"yIOXb7mYa2cS",host_id_gp:"cMoMgkNnyzG8",host_id_ln:"_19_TLQRgTRah"}},93713:(e,a,s)=>{"use strict";s.d(a,{L:()=>u});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(15474);const c=["id","className"],d={aa:l.Xqp,fb:l.zJ_,gp:l.kBK,ln:l.OBu},u=e=>{let a=e.id,s=e.className,l=r(e,c);const u=d[a];return n.createElement(u,i(i({},l),{},{className:o("auth-c-provider-icon auth-c-provider-icon_type_".concat(a),s)}))}},97597:(e,a,s)=>{"use strict";s.d(a,{d:()=>d});var i=s(27378),r=s(60042),n=s(30559),o=s(17302),l=s(33302),c=s(66583);const d=e=>{let a=e.serverTime,s=e.resendAt,d=e.processing,u=e.disabled,m=e.className,p=e.onClick;const h=i.useMemo((()=>(s-a)/3600>=1),[s,a]),v=i.useMemo((()=>h?"h:m:s":"m:s"),[h]);return!d&&!u&&a<s?i.createElement("span",{className:r(c.Z.host,m)},i.createElement(n.Z,{id:"auth_resend_code_timer",defaultMessage:"Resend code in {time}",values:{time:i.createElement(o.Wo,{serverTime:a,startTime:s,timeFormat:v})}})):i.createElement(l.a,{onClick:p},(e=>{let a=e.onClick,s=e.processing;const l=u||d||s;return i.createElement(o.Xd,{"data-test":"auth-c-b-resend",className:r(c.Z.host,!l&&c.Z.host_state_ready,m),disabled:l,onClick:a},d||s?i.createElement(o.aN,null):i.createElement(n.Z,{id:"auth_resend_code",defaultMessage:"Resend code"}))}))};d.displayName="auth(components)(ResendCode)"},66583:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_5BbhJXY7iSk3",host_state_ready:"_3rqjrcMJiGnD"}},65786:(e,a,s)=>{"use strict";s.d(a,{d:()=>l});var i=s(27378),r=s(30559),n=s(17302),o=(s(28955),s(67314));const l=e=>{let a=e.retryAt,s=e.className,l=e.onTimerOver;const c=(0,o.w)(),d=c>=a;return i.useEffect((()=>{d&&(null==l||l())}),[d,l]),i.createElement("div",{className:s},i.createElement(r.Z,{id:"auth_resend_code_timer",defaultMessage:"Resend code in {time}",values:{time:i.createElement(n.Wo,{serverTime:c,startTime:a,timeFormat:"m:s"})}}))};l.displayName="auth(RetryLater)"},31029:(e,a,s)=>{"use strict";s.d(a,{P:()=>Strength});var i=s(49491),r=s(27378),n=s(60042),o=s(30559),l=s(18985),c=s(17302),d=s(58292);class Strength extends r.Component{constructor(e){super(e),this.state=Strength.computeState(e.password,e.minPasswordLength),e.onStatusChange&&e.onStatusChange(this.state.status)}static getDerivedStateFromProps(e,a){const s=Strength.computeState(e.password,e.minPasswordLength);return e.onStatusChange&&s.status!==a.status&&e.onStatusChange(s.status),s}static computeState(e,a){let s=0;const i={};for(let a=0;a<e.length;a++)i[e[a]]=(i[e[a]]||0)+1,s+=5.5/i[e[a]];const r={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),minLength:e.length>=a};let n,o,l=0,c=!0;for(const e in r)n=r[e],n||(c=!1),"minLength"!==e&&(l+=n?1:0);return s+=10*(l-1),s=s>100?100:Math.floor(s),o=s>85?"high":s>50?"medium":"low",{level:o,variations:r,status:c?"ready":"processing",progress:s}}render(){const e=this.props.className,a=this.state,s=a.level,l=a.progress;return r.createElement("div",{className:n(d.Z.host,{[d.Z.host_state_low]:"low"===s,[d.Z.host_state_medium]:"medium"===s,[d.Z.host_state_high]:"high"===s},e)},r.createElement("div",{className:d.Z.info},r.createElement("span",{className:d.Z.title},r.createElement(o.Z,{id:"auth_pass_strength_title",defaultMessage:"Password strength"})),s&&r.createElement("span",{className:d.Z.level},r.createElement(o.Z,i({},Strength.MESSAGES[s])))),r.createElement(c.uk,{value:l,variant:"round",size:"medium",className:d.Z.progress}))}}Strength.MESSAGES=(0,l.vU)({low:{id:"auth_pass_strength_low",defaultMessage:"Weak"},medium:{id:"auth_pass_strength_medium",defaultMessage:"Medium"},high:{id:"auth_pass_strength_high",defaultMessage:"Strong"}})},58292:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"Z1Ta4aqBJMyn",info:"_12lMt4wBIEBx",title:"u-oPffaxf7rG",level:"_1ovkCpFMx6OI",host_state_low:"_2ACfKWcFzlt8",host_state_medium:"_1M-3_rpGOGlm",host_state_high:"aypHnKSTSK5r",progress:"_2KFr1IILIMqC"}},54479:(e,a,s)=>{"use strict";s.d(a,{f:()=>o});var i=s(27378),r=s(15474),n=s(49467);const o=e=>{let a=e.children;return i.createElement("div",{className:n.Z.host},i.createElement("div",{className:n.Z.inner},i.createElement(r.NOm,{className:n.Z.icon}),a))};o.displayName="auth(components)(Success)"},49467:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"mTxQsH6YgWes",inner:"unmfRbnJY-_3",icon:"_2v8V-dVywnvE"}},32263:(e,a,s)=>{"use strict";s.d(a,{i:()=>d});var i=s(27378),r=s(60042),n=s(30559),o=s(15474),l=s(17302),c=s(50114);const d=i.forwardRef(((e,a)=>{let s=e.className,d=e.description,u=e.withSupportButton,m=e.title,p=e.onSupportClick;return i.createElement("div",{className:r(c.Z.host,s),ref:a,"data-test":"auth-troubles-informer"},i.createElement(o.az_,{className:c.Z.icon,fontSize:"inherit","data-test":"auth-troubles-informer-icon"}),m&&i.createElement("div",{className:c.Z.title,"data-test":"auth-troubles-informer-title"},m),d&&i.createElement("p",{className:c.Z.description,"data-test":"auth-troubles-informer-description"},d),u&&i.createElement(l.xu,{direction:"row",fullWidth:!0,padding:[40,0,0,0]},i.createElement(l.zx,{variant:"secondary",dataTest:"auth-troubles-informer-action",fullWidth:!0,onClick:p},i.createElement(n.Z,{id:"contact_support",defaultMessage:"Contact support team"}))))}));d.displayName="auth(components)(TroublesInformer)"},50114:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1rLvhY7Zv_DQ",icon:"_2a4IPKIlSIKu",title:"_2MloWCGN06Sz",description:"PhLaLTr1v6IR"}},96488:(e,a,s)=>{"use strict";s.d(a,{n:()=>m});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(73717),c=(s(26203),s(3101)),d=s(23131);const u=["avatarUrl","firstName","email","className"],m=n.forwardRef(((e,a)=>{let s=e.avatarUrl,m=e.firstName,p=e.email,h=e.className,v=r(e,u);const g=n.useMemo((()=>p?(0,l.o)(p):""),[p]),_=m&&n.createElement("div",{className:d.Z.firstName},m),f=g&&n.createElement("div",{className:d.Z.email},g);return n.createElement("div",i({className:o(d.Z.host,h),ref:a},v),n.createElement(c.q,{sourceUrl:s}),_,f)}));m.displayName="auth(components)(User)"},23131:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_29ERJSWj5oit",firstName:"_1QQdrGUAqLss",email:"_10JNrgnDpyKF"}},64755:(e,a,s)=>{"use strict";s.d(a,{I:()=>i});const i={AR:"ar",EN:"en",ES:"es",FR:"fr",HI:"hi",ID:"id",JP:"ja",KO:"ko",MS:"ms",PT:"pt",RU:"ru",TH:"th",TR:"tr",VI:"vi",ZH:"zh",FA:"fa"}},78262:(e,a,s)=>{"use strict";s.d(a,{G:()=>i});const i={LOGIN:"#action=auth",REGISTRATION:"#action=register"}},59564:(e,a,s)=>{"use strict";s.d(a,{T:()=>l});var i=s(27378),r=s(30559),n=s(17302),o=s(12433);const l=e=>{let a=e.message,s=e.onConfirm;return i.createElement(o.V,{text:a,className:"auth-d-oauth-already-linked",footer:i.createElement(n.kc,{borderRadius:0},i.createElement(n.zx,{onClick:s,fullWidth:!0,dataTest:"auth-d-oauth-already-linked-b-ok"},i.createElement(r.Z,{id:"auth_ok",defaultMessage:"Ok"})))})}},63813:(e,a,s)=>{"use strict";s.d(a,{j:()=>l});var i=s(27378),r=s(17302),n=s(12433),o=s(55330);const l=e=>{let a=e.onConfirm,s=e.onCancel,l=e.title,c=e.content,d=e.negativeButtonTitle,u=e.positiveButtonTitle;return i.createElement(n.V,{text:i.createElement("div",{className:o.Z.content,"data-test":"auth-d-oauth-fb-warning-content"},i.createElement("h2",{className:o.Z.title},l),c),className:o.Z.host,footer:i.createElement(r.xu,{direction:"row",fullWidth:!0},i.createElement(r.kc,{borderRadius:0},i.createElement(r.zx,{fullWidth:!0,variant:"secondary",onClick:s,dataTest:"auth-d-oauth-fb-warning-b-cancel"},d),i.createElement(r.zx,{fullWidth:!0,color:"negative",onClick:a,dataTest:"auth-d-oauth-fb-warning-b-accept"},u)))})}},55330:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_245dDWsqgDP4",title:"xzxxW5y267Lb",content:"_1sa5GamhRF-4"}},56548:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var i=s(27378),r=s(30559),n=s(17302),o=s(33302),l=s(12433),c=s(85092);const d=e=>i.createElement(l.V,{text:i.createElement(r.Z,{id:"auth_dialog_oauth_unlink_description",defaultMessage:"Do you want to disconnect your {provider} account?",values:{provider:e.providerName}}),className:"auth-d-oauth-unlink",footer:i.createElement(n.xu,{direction:"row",fullWidth:!0,gap:"s"},i.createElement(n.kc,{borderRadius:0},i.createElement(n.zx,{variant:"secondary",onClick:e.onCancel,dataTest:"auth-d-oauth-unlink-b-cancel",horizontalAlign:"center",fullWidth:!0},i.createElement(r.Z,{id:"auth_dialog_oauth_unlink_cancel",defaultMessage:"Cancel"})),i.createElement(o.a,{onClick:e.onConfirm},(e=>{let a=e.onClick,s=e.processing,o=e.error;return i.createElement(i.Fragment,null,i.createElement(c.j,{error:null==o?void 0:o.message,className:"auth-d-oauth-unlink__error"}),i.createElement(n.zx,{horizontalAlign:"center",fullWidth:!0,color:"negative",loading:s,dataTest:"auth-d-oauth-unlink-b-confirm",onClick:a},i.createElement(r.Z,{id:"auth_dialog_oauth_unlink_confirm",defaultMessage:"Disconnect"})))}))))})},25570:(e,a,s)=>{"use strict";s.d(a,{D:()=>l});var i=s(27378),r=s(30559),n=s(17302),o=s(12433);const l=e=>i.createElement(o.V,{text:i.createElement(r.Z,{id:"auth_dialog_oauth_unlink_forbidden_description",defaultMessage:"You can not disconnect the account without having a verified email address. Please complete email confirmation first."}),className:"auth-d-oauth-unlink-forbidden",footer:i.createElement(n.xu,{direction:"row",fullWidth:!0},i.createElement(n.kc,{borderRadius:0},i.createElement(n.zx,{fullWidth:!0,variant:"secondary",onClick:e.onCancel,dataTest:"auth-d-oauth-unlink-forbidden-b-cancel"},i.createElement(r.Z,{id:"auth_dialog_oauth_unlink_cancel",defaultMessage:"Cancel"})),i.createElement(n.zx,{fullWidth:!0,onClick:e.onConfirm,dataTest:"auth-d-oauth-unlink-forbidden-b-confirm"},i.createElement(r.Z,{id:"auth_dialog_oauth_unlink_forbidden_confirm",defaultMessage:"Confirm email"}))))})},12433:(e,a,s)=>{"use strict";s.d(a,{V:()=>n});var i=s(27378),r=s(60042);const n=e=>{let a=e.text,s=e.footer,n=e.className;return i.createElement("div",{className:r("auth-d-c-dialog",n)},i.createElement("div",{className:"auth-d-c-dialog__container"},i.createElement("div",{className:"auth-d-c-dialog__content"},a)),i.createElement("div",{className:"auth-d-c-dialog__footer"},s))}},18721:(e,a,s)=>{"use strict";s.d(a,{R:()=>d});var i=s(2243),r=s(27378),n=s(83796),o=s(30559),l=s(26203),c=(s(44749),s(48952));const d=e=>{let a=e.lang,s=e.name,d=e.publicKey,u=e.className;const m=r.useState(!1),p=i(m,2),h=p[0],v=p[1],g=r.useMemo((()=>({validate:e=>!e&&r.createElement(o.Z,{id:"auth_captcha_required",defaultMessage:"Please confirm you are human"}),beforeSubmit(){v(!0)},afterSubmit(){v(!1)}})),[]),_=(0,n.U$)(s,g),f=_.input,E=f.value,S=f.onChange,y=_.meta,b=r.useCallback((e=>{S(e)}),[S]),C=r.useCallback((()=>{S("")}),[S]);return r.useEffect((function(){h&&y.dirty&&y.submitFailed&&(v(!1),S(""))}),[h,y.dirty,y.submitFailed,S]),r.createElement(l.e,{lang:a,error:(0,c.N)(y),publicKey:d,className:u,name:s,code:E,onChange:b,onExpired:C,onError:C})};d.displayName="auth(fields)(CaptchaField)"},32912:(e,a,s)=>{"use strict";s.d(a,{j:()=>m});var i=s(49491),r=s(14936),n=s(27378),o=s(83796),l=s(30559),c=s(17302),d=(s(44749),s(48952));const u=["name","label","required","disabled"],m=e=>{let a=e.name,s=e.label,m=e.required,p=e.disabled,h=r(e,u);const v=n.useCallback((e=>{if(m&&!e)return n.createElement(l.Z,{id:"auth_agreement_required",defaultMessage:"Please check the box to confirm"})}),[m]),g=(0,o.U$)(a,{validate:v,type:"checkbox"}),_=g.input,f=g.meta;return n.createElement(c.XZ,i(i({},h),{},{name:a,label:s,checked:_.checked,disabled:p||f.submitting,error:(0,d.N)(f),onChange:_.onChange}))};m.displayName="auth(fields)(CheckboxField)"},41223:(e,a,s)=>{"use strict";s.d(a,{S:()=>c});var i=s(49491),r=s(14936),n=s(27378),o=s(83796);const l=["name","value"],c=e=>{let a=e.name,s=void 0===a?"unknown_hidden":a,c=e.value,d=r(e,l);const u=(0,o.U$)(s,{initialValue:c}).input;return n.createElement("input",i(i({},d),{},{type:"hidden",name:s,value:u.value}))};c.displayName="auth(fields)(HiddenField)"},19857:(e,a,s)=>{"use strict";s.d(a,{Z:()=>v});var i=s(49491),r=s(2243),n=s(14936),o=s(27378),l=s(83796),c=s(30559),d=s(17302),u=s(15474),m=(s(44749),s(48952)),p=s(53361);const h=["autoComplete","name","size","defaultValue","minLength","disabled","required"],v=e=>{let a=e.autoComplete,s=e.name,v=void 0===s?"undefined":s,g=e.size,_=void 0===g?"medium":g,f=e.defaultValue,E=e.minLength,S=e.disabled,y=e.required,b=n(e,h);const C=o.useState("password"),T=r(C,2),A=T[0],k=T[1],w=o.useCallback((e=>y&&!e?o.createElement(c.Z,{id:"empty_fields",defaultMessage:"Please fill in all the fields"}):E&&e.length<E?o.createElement(c.Z,{id:"password_length_restriction",defaultMessage:"A password must contain more than 4 characters"}):void 0),[E,y]),N=o.useCallback((()=>{k("password"===A?"text":"password")}),[A]),R=(0,l.U$)(v,{validate:w,initialValue:f}),I=R.input,D=R.meta;return o.createElement(d.nv,i(i({},b),{},{autoComplete:a,type:A,name:v,size:_,value:I.value,disabled:S||D.submitting,error:(0,m.N)(D),endIcon:o.createElement(d.Xd,{type:"button",className:p.Z.visibilityAction,onClick:N},"password"===A?o.createElement(u.N38,{fontSize:"inherit"}):o.createElement(u.trW,{fontSize:"inherit"})),onBlur:I.onBlur,onChange:I.onChange,onFocus:I.onFocus}))};v.displayName="auth(fields)(PasswordField)"},53361:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={visibilityAction:"_2jvGEIpTHEzf"}},22866:(e,a,s)=>{"use strict";s.d(a,{m:()=>d});var i=s(49491),r=s(27378),n=s(83796),o=s(30559),l=s(17302),c=(s(44749),s(48952));const d=e=>{let a=e.name,s=void 0===a?"undefined":a,d=e.options,u=e.fullWidth,m=void 0===u||u,p=e.placeholder,h=e.disabled,v=e.required;const g=r.useCallback((e=>{if(v&&!e)return r.createElement(o.Z,{id:"currency_not_selected",defaultMessage:"Choose the account currency"})}),[v]),_=(0,n.U$)(s,{validate:g}),f=_.input,E=_.meta,S=(0,r.useMemo)((()=>d.map((e=>r.createElement(l.Ph.Option,i({key:e.value},e))))),[d]);return r.createElement(l.Ph,{value:f.value,error:(0,c.N)(E),disabled:h||E.submitting,placeholder:p,fullWidth:m,onChange:f.onChange},S)};d.displayName="auth(fields)(SelectField)"},34263:(e,a,s)=>{"use strict";s.d(a,{n:()=>m});var i=s(49491),r=s(14936),n=s(27378),o=s(83796),l=s(30559),c=s(17302),d=(s(44749),s(48952));const u=["autoComplete","type","name","size","defaultValue","minLength","disabled","required"],m=e=>{let a=e.autoComplete,s=e.type,m=e.name,p=void 0===m?"undefined":m,h=e.size,v=void 0===h?"medium":h,g=e.defaultValue,_=e.minLength,f=e.disabled,E=e.required,S=r(e,u);const y=n.useCallback((e=>E&&!e?n.createElement(l.Z,{id:"empty_fields",defaultMessage:"Please fill in all the fields"}):_&&e.length<_?n.createElement("div",null,"A field must contain more than ",_," characters"):void 0),[_,E]),b=(0,o.U$)(p,{validate:y,initialValue:g}),C=b.input,T=b.meta;return n.createElement(c.nv,i(i({},S),{},{autoComplete:a,type:s,name:p,size:v,value:C.value,disabled:f||T.submitting,error:(0,d.N)(T),onBlur:C.onBlur,onChange:C.onChange,onFocus:C.onFocus}))};m.displayName="auth(fields)(TextField)"},46482:(e,a,s)=>{"use strict";s.d(a,{FN:()=>c.F,IL:()=>l.I,LC:()=>p.L,St:()=>u.S,Y2:()=>i.Z,YV:()=>o.j,aU:()=>m.a,cr:()=>d.c,iq:()=>r.D,jj:()=>h.j,p5:()=>n.T});s(17700);var i=s(56548),r=s(25570),n=s(59564),o=s(63813),l=s(45114),c=s(89073),d=s(93164),u=s(33870),m=(s(88412),s(16256),s(66499),s(34764),s(37995),s(72643),s(99790),s(85420),s(24746),s(33302)),p=s(93713),h=s(85092)},66499:(e,a,s)=>{"use strict";var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=(s(64939),s(30966),s(63405),s(9689),s(2850),s(18971),s(82240)),c=(s(6731),s(6397),s(43647),s(17302)),d=s(91482),u=s(64585),m=s(42784),p=s(28176),h=s(57432),v=s(13256),g=s(60829),_=s(61314),f=s(60862);const E=["defaultPath","className","projectBackgroundColor"];n.forwardRef(((e,a)=>{let s=e.defaultPath,S=e.className,y=e.projectBackgroundColor,b=r(e,E);const C=(0,c.Fg)().dir,T=(0,m.p)(),A=T.routerService,k=A.current,w=A.go,N=T.authService,R=N.initialized,I=N.restriction,D=(0,u.u)(R),O=(0,g.u)({projectBackgroundColor:y}),L=n.useMemo((()=>R||k?"serviceUnavailable"===I?n.createElement("div",{className:f.Z.content},n.createElement(l.y,null)):n.createElement(n.Fragment,null,n.createElement(h.$,{tabs:d.K1}),n.createElement(v.Z,{tabs:d.pf,contentClassName:f.Z.content})):n.createElement("div",{className:f.Z.loader},n.createElement(c.$j,null))),[k,R,I]);return n.useEffect((function(){R&&w(D||s)}),[R,s,D,w]),n.createElement("div",i(i({},b),{},{dir:C,className:o(f.Z.host,S),style:O,ref:a}),n.createElement("div",{className:f.Z.inner},n.createElement(p.U,{className:f.Z.title}),n.createElement(_.y,null,L)))})).displayName="auth(layouts)(DefaultLayout)"},60862:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3qbxpnLaRhQH",title:"RMNFGVpLz8Hg",inner:"_2-JhffPuQ8iy",content:"_3PJqTaEtRYtd",loader:"_2W_49krnTy9K"}},34764:(e,a,s)=>{"use strict";var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=(s(64939),s(30966),s(63405),s(9689),s(2850),s(18971),s(82240)),c=(s(6731),s(6397),s(43647),s(17302)),d=s(91482),u=s(64585),m=s(42784),p=s(57432),h=s(13256),v=s(60829),g=s(61314),_=s(75305);const f=["defaultPath","className","projectBackgroundColor","LogoComponent"];n.forwardRef(((e,a)=>{let s=e.defaultPath,E=e.className,S=e.projectBackgroundColor,y=e.LogoComponent,b=r(e,f);const C=(0,c.Fg)().dir,T=(0,m.p)(),A=T.routerService,k=A.current,w=A.go,N=T.authService,R=N.initialized,I=N.restriction,D=(0,u.u)(R),O=(0,v.u)({projectBackgroundColor:S}),L=n.useMemo((()=>R||k?"serviceUnavailable"===I?n.createElement("div",{className:_.Z.content},n.createElement(l.y,null)):n.createElement(n.Fragment,null,n.createElement(p.$,{tabs:d.K1}),n.createElement(h.Z,{tabs:d.pf,contentClassName:_.Z.content})):n.createElement("div",{className:_.Z.loader},n.createElement(c.$j,null))),[k,R,I]);return n.useEffect((function(){R&&w(D||s)}),[R,s,D,w]),n.createElement("div",i(i({},b),{},{dir:C,className:o(_.Z.host,E),style:O,ref:a}),n.createElement("div",{className:_.Z.inner},n.createElement(y,{className:_.Z.logo}),n.createElement(g.y,null,L)))})).displayName="auth(layouts)(FullScreenLayout)"},75305:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1ostSQ1ZKy9N",logo:"_1sGM8fDhZIuC",inner:"_3FYRC16OpJ-w",content:"fNEoE1LjehmT",loader:"_3LgVtr9b4wSF"}},37995:(e,a,s)=>{"use strict";var i=s(49491),r=s(2243),n=s(14936),o=s(27378),l=s(60042),c=(s(64939),s(30966),s(63405),s(9689),s(2850),s(18971),s(82240)),d=(s(6731),s(6397),s(43647),s(17302)),u=s(42784),m=s(91482),p=s(64585),h=s(57432),v=s(13256),g=s(60829),_=s(35907),f=s(26453);const E=["api","className","projectBackgroundColor","homePageUrl","MinimizedLogoComponent","onRouteChanged"];o.forwardRef(((e,a)=>{let s=e.api,S=e.className,y=e.projectBackgroundColor,b=e.homePageUrl,C=e.MinimizedLogoComponent,T=e.onRouteChanged,A=n(e,E);const k=(0,d.Fg)().dir,w=o.useState(!1),N=r(w,2),R=N[0],I=N[1],D=(0,u.p)(),O=D.routerService,L=O.current,M=O.go,P=D.authService,x=P.initialized,F=P.restriction,B=(0,g.u)({projectBackgroundColor:y}),Z=(0,p.u)(x),U=o.useCallback((e=>{null==T||T(e),I(!!e)}),[T,I]),H=o.useCallback((()=>{U(null)}),[U]),G=o.useMemo((()=>x||L?"serviceUnavailable"===F?o.createElement("div",{className:f.Z.panelInner},o.createElement("div",{className:f.Z.content},o.createElement("div",{className:f.Z.contentInner},o.createElement(c.y,null)))):o.createElement("div",{className:f.Z.panelInner},o.createElement(h.$,{tabs:m.K1}),o.createElement(v.Z,{tabs:m.pf,className:f.Z.content,contentClassName:f.Z.contentInner})):o.createElement("div",{className:f.Z.panelInner},o.createElement("div",{className:f.Z.content},o.createElement("div",{className:f.Z.contentInner},o.createElement(d.$j,null))))),[L,x,F]);return o.useImperativeHandle(s,(function(){return{open(e){U(e),M(e)},close(){U(null)}}}),[M,U]),o.useEffect((function(){x&&Z&&(U(Z),M(Z))}),[x,Z,M,U]),o.useEffect((function(){document.body.style.overflow=R?"hidden":""}),[R]),o.createElement("div",i(i({},A),{},{dir:k,className:l(f.Z.host,R&&f.Z.host_state_open,S),ref:a,style:B,tabIndex:-1}),o.createElement("div",{className:f.Z.backdrop,onClick:H}),o.createElement(d.Xs,{className:f.Z.panel,"data-test":"login_form_layout"},o.createElement(_.h,{className:f.Z.mobileHeader,homePageUrl:b,LogoComponent:C,onCloseClick:H}),G))})).displayName="auth(layouts)(PanelLayout)"},26453:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2FOXyt4r4fik",host_state_open:"_2tlQmZUJl4GH",backdrop:"Ioo1U_jcPVfi",mobileHeader:"_1vzeS6boKCvo",panel:"-SZIr9SgnWtg",panelInner:"_3gepSYLqY_jQ",content:"nm6YeCH2bwp-",contentInner:"_2DKxgrw8HNpr"}},61314:(e,a,s)=>{"use strict";s.d(a,{y:()=>d});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(8860);const c=["className","children"],d=e=>{let a=e.className,s=e.children,d=r(e,c);const u=n.useRef(null),m=n.useRef(null);return n.useEffect((function(){if(!u.current||!m.current)return;const e=new ResizeObserver((e=>{if(u.current){const a=e[0];u.current.style.height="".concat(a.contentRect.height,"px")}}));return e.observe(m.current),()=>e.disconnect()}),[]),n.createElement("div",i(i({},d),{},{className:o(l.Z.host,a),ref:u}),n.createElement("div",{className:l.Z.inner,ref:m},s))};d.displayName="auth(layouts)(components)(ContentFrame)"},8860:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_122T_ieU6taC",inner:"_3eJ4DG5HjN5A"}},35907:(e,a,s)=>{"use strict";s.d(a,{h:()=>m});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(15474),c=s(17302),d=s(25946);const u=["homePageUrl","className","LogoComponent","onCloseClick"],m=e=>{let a=e.homePageUrl,s=e.className,m=e.LogoComponent,p=e.onCloseClick,h=r(e,u);return n.createElement("div",i(i({},h),{},{className:o(d.Z.host,s)}),n.createElement(c.Xd,{className:d.Z.slot,component:"a",href:a,"data-test":"auth-layout-header-logo-button"},n.createElement(m,{className:d.Z.logo})),n.createElement(c.Xd,{className:d.Z.slot,onClick:p,"data-test":"auth-layout-header-close-button"},n.createElement(l.bMz,{className:d.Z.iconClose})))};m.displayName="auth(layouts)(components)(Header)"},25946:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_35MbkMScXbk_",slot:"_1Yh_4_zXVL0g",logo:"xTA-79m54aLS",iconClose:"D7nyGA-j0ECa"}},88412:(e,a,s)=>{"use strict";s.d(a,{_:()=>ProviderSDKFallback});var i=s(49491),r=s(12521),n=s(95808);class ProviderSDKFallback{constructor(e){this.configuration=e,this.popup=null,this.popupMonitorInterval=null,this.id="oauth-".concat(this.configuration.providerId,"-").concat(ProviderSDKFallback.instanceCounter),ProviderSDKFallback.instanceCounter+=1}login(e){const a=(0,r.stringifyUrl)({url:this.configuration.apiUrl,query:i(i({},e),{},{[this.configuration.redirectUrlKey]:(0,n.GF)(this.configuration.providerId,e[this.configuration.redirectUrlKey])})});return this.popup=(0,n.Mw)({url:a,id:this.id,width:503,height:510}),new Promise(((a,s)=>{this.popup&&!this.popup.closed||s("ProviderSDKFallback[".concat(this.id,"]: Can't open popup."));let i="idle";const r=o=>{var l,c;o.origin===window.location.origin&&(o.source instanceof Window&&o.source.name!==this.id||((0,n.b)(o.data)&&o.data.providerId===this.configuration.providerId&&o.data.state===e.state?(i="success",null===(l=this.popup)||void 0===l||l.close(),a({authResponse:{id_token:o.data.code}})):(i="error",null===(c=this.popup)||void 0===c||c.close(),s("ProviderSDKFallback[".concat(this.id,"]: Some queries params is incorrect."))),window.removeEventListener("message",r)))};window.addEventListener("message",r),this.popupMonitorInterval=window.setInterval((()=>{var e;(null===(e=this.popup)||void 0===e?void 0:e.closed)&&(null!==this.popupMonitorInterval&&(window.clearInterval(this.popupMonitorInterval),this.popupMonitorInterval=null),this.popup=null,"success"!==i&&s("ProviderSDKFallback[".concat(this.id,"]: Popup is closed.")))}),100)}))}}ProviderSDKFallback.instanceCounter=0},94066:(e,a,s)=>{"use strict";s.d(a,{J:()=>i,M:()=>r});const i="/oauth-callback",r="providerId"},16256:(e,a,s)=>{"use strict";s(12521)},95808:(e,a,s)=>{"use strict";s.d(a,{GF:()=>c,Mw:()=>o,b:()=>l});var i=s(12521),r=s(99446),n=s(94066);function o(e){const a=r.tq?0:e.width,s=r.tq?0:e.height,i=(window.screenX<0?window.screen.width+window.screenX:window.screenX)+(window.outerWidth-a)/2,n=window.screenY+(window.outerHeight-s)/2.5,o=["left=".concat(i),"top=".concat(n),"resizable=yes","scrollbars=no","centerscreen=yes","toolbar=0"];return 0!==a&&o.push("width=".concat(a)),0!==s&&o.push("height=".concat(s)),window.open(e.url,e.id,o.join(","))}function l(e){return"object"==typeof e&&null!==e&&"providerId"in e&&"code"in e&&"state"in e}function c(e,a){const s=new URL(a);return s.pathname=n.J,(0,i.stringifyUrl)({url:s.href,query:{[n.M]:e}})}},69877:(e,a,s)=>{"use strict";function i(){return Date.now()/1e3}s.d(a,{k:()=>i})},28955:(e,a,s)=>{"use strict";s.d(a,{C:()=>r});var i=s(69877);const r=new class TimeService{constructor(){this.tickId=null,this.listeners=[],this.serverTime=(0,i.k)(),this.tick=this.tick.bind(this)}subscribe(e){return this.listeners.push(e),this.listeners.length&&null===this.tickId&&this.start(),()=>{this.listeners=this.listeners.filter((a=>a!==e)),0===this.listeners.length&&this.stop()}}tick(){this.serverTime=(0,i.k)(),this.listeners.forEach((e=>e(this.serverTime)))}start(){this.tick(),this.tickId=window.setInterval(this.tick,1e3)}stop(){this.tickId&&(window.clearInterval(this.tickId),this.tickId=null)}}},67314:(e,a,s)=>{"use strict";s.d(a,{w:()=>o});var i=s(2243),r=s(27378),n=s(28955);function o(){const e=r.useState(0),a=i(e,2),s=a[0],o=a[1],l=r.useMemo((()=>n.C.subscribe(o)),[]);return r.useEffect((function(){return l}),[l]),s}},44749:(e,a,s)=>{"use strict";s.d(a,{w:()=>c});var i=s(49491),r=s(2243),n=s(27378),o=s(83796),l=s(25908);const c=n.memo((e=>{let a=e.exclude,s=void 0===a?{}:a;const c=n.useState(!1),d=r(c,2),u=d[0],m=d[1],p=(0,o.cI)(),h=n.useCallback((()=>{p.getRegisteredFields().forEach((e=>{s[e]||e in l.G.fields&&p.change(e,l.G.fields[e])}))}),[s,p]);return n.useEffect((function(){if(!u)return p.subscribe((()=>{m(!0),h()}),{visited:!0})}),[u,p,h]),n.useEffect((function(){if(u)return p.subscribe((e=>{let a=e.values;const s=p.getState(),r=s.active?{[s.active]:a[s.active]}:{};l.G.update(i(i({},a),r))}),{values:!0})}),[u,p]),null}))},48952:(e,a,s)=>{"use strict";s.d(a,{N:()=>l});var i=s(49491),r=s(27378),n=s(30559),o=s(91062);function l(e){return!e.touched||e.submitting?null:"string"==typeof e.error||r.isValidElement(e.error)?e.error:(0,o.W)(e.error)?r.createElement(n.Z,i({},e.error)):"string"!=typeof e.submitError||e.dirtySinceLastSubmit?null:e.submitError}},25908:(e,a,s)=>{"use strict";s.d(a,{G:()=>i});const i=new class GlobalFieldsStore{constructor(){this.fields={},this.listeners=[],this.update=this.update.bind(this)}update(e){for(const a in e)this.fields[a]=e[a];this.listeners.forEach((e=>e()))}onUpdate(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((a=>a!==e))}}}},91062:(e,a,s)=>{"use strict";function i(e){return Boolean("object"==typeof e&&null!==e&&"id"in e&&"defaultMessage"in e)}s.d(a,{W:()=>i})},26203:(e,a,s)=>{"use strict";s.d(a,{e:()=>u});var i=s(2243),r=s(47014),n=s(27378),o=s(17302),l=s(22132),c=s(19392);function d(){return(d=r((function*(e){return new Promise((a=>{setTimeout(a,e)}))}))).apply(this,arguments)}const u=e=>{let a=e.lang,s=e.theme,u=e.publicKey,m=e.className,p=e.name,h=e.code,v=e.error,g=e.onChange,_=e.onExpired,f=e.onError;const E=(0,o.tm)(),S=n.useRef(null),y=n.useRef(null),b=n.useMemo((()=>new l.q({key:u,lang:a,theme:s})),[a,u,s]),C=n.useState(!1),T=i(C,2),A=T[0],k=T[1],w=n.useState(!1),N=i(w,2),R=N[0],I=N[1],D=n.useCallback(r((function*(){A&&!R&&null===y.current&&null!==S.current&&(I(!0),yield function(e){return d.apply(this,arguments)}(250),y.current=yield b.render(S.current,{onChange:g,onExpired:_,onError:f}),I(!1))})),[A,R,b,g,_,f]);return n.useEffect((function(){D()}),[D]),n.useEffect((function(){if(!S.current||!S.current.firstElementChild)return;const e=S.current,a=S.current.firstElementChild,s=Math.min(e.offsetWidth/a.offsetWidth,1),i=a.offsetWidth*s,r=a.offsetHeight*s;e.style.width="".concat(i,"px"),e.style.height="".concat(r,"px"),a.style.transform="scale(".concat(s,")")})),n.useEffect((function(){const e=S.current,a=a=>{e&&a.unobserve(e)},s=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(k(!0),a(s))}))}));return e&&s.observe(e),()=>a(s)}),[]),n.useEffect((function(){E&&null!==y.current&&"string"==typeof h&&""===h&&b.reset(y.current)}),[b,E,h]),n.createElement("div",{className:m},n.createElement("input",{name:p,type:"hidden",value:h}),n.createElement("div",{className:c.Z.widget,ref:S}),v&&n.createElement(o.Q6,{error:!0},v))};u.displayName="auth(lib)(Captcha)"},19392:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={widget:"_2UZYH5P8NHcg"}},22132:(e,a,s)=>{"use strict";s.d(a,{q:()=>ReCaptchaService});var i=s(47014),r=s(12521);class ReCaptchaService{constructor(e){let a=e.key,s=e.lang,i=e.theme;this.key=a,this.lang=s,this.theme=i}get loading(){return Boolean(ReCaptchaService.requestSDK)}static throwError(e){if("type"in e)throw Error(e.message);throw Error(JSON.stringify({message:"Something went wrong in ReCaptchaService",internal_code:"ki_yY_J6"},null,2))}render(e,a){var s=this;return i((function*(){const i=yield s.getSDK();return i&&"render"in i?i.render(e,{theme:s.theme,sitekey:s.key,callback:null==a?void 0:a.onChange,"expired-callback":null==a?void 0:a.onExpired,"error-callback":null==a?void 0:a.onError}):(i&&ReCaptchaService.throwError(i),null)}))()}reset(e){var a=this;return i((function*(){const s=yield a.getSDK();s&&"reset"in s?s.reset(e):s&&ReCaptchaService.throwError(s)}))()}getSDK(){var e=this;return i((function*(){return ReCaptchaService.SDK?ReCaptchaService.SDK:(ReCaptchaService.requestSDK||(ReCaptchaService.requestSDK=new Promise(((a,s)=>{window[ReCaptchaService.ON_LOAD_HOOK_NAME]=()=>{void 0!==window.grecaptcha?(ReCaptchaService.SDK=window.grecaptcha,a(ReCaptchaService.SDK)):s({type:"NotFound",message:"'grecaptcha' is doesn't defined."}),ReCaptchaService.requestSDK=null,window[ReCaptchaService.ON_LOAD_HOOK_NAME]=void 0};const i=document.createElement("script");i.src=(0,r.stringifyUrl)({url:ReCaptchaService.SDK_URL,query:{onload:ReCaptchaService.ON_LOAD_HOOK_NAME,render:"explicit",hl:e.lang}}),i.async=!0,i.defer=!0,i.onerror=e=>{s({type:"FailedLoad",message:e})},document.body.append(i)}))),ReCaptchaService.requestSDK)}))()}}ReCaptchaService.SDK_URL="https://www.recaptcha.net/recaptcha/api.js",ReCaptchaService.ON_LOAD_HOOK_NAME="globalReCaptchaLoadHook",ReCaptchaService.SDK=window.grecaptcha,ReCaptchaService.requestSDK=null},73717:(e,a,s)=>{"use strict";function i(e){return e.replace(/(.{2})(.*)(?=@)/,(function(e,a,s){for(let e=0;e<s.length;e+=1)a+="*";return a}))}s.d(a,{o:()=>i})},56628:(e,a,s)=>{"use strict";s.d(a,{U:()=>o,v:()=>n});var i=s(27378),r=s(97601);const n={navigationToRootRoute:{classNames:{enter:r.Z.navigationToRootRoute_state_enter,enterActive:r.Z.navigationToRootRoute_state_enterActive,exit:r.Z.navigationToRootRoute_state_exitActive,exitActive:r.Z.navigationToRootRoute_state_exitActive},timeout:450},navigationToSubRoute:{classNames:{enter:r.Z.navigationToSubRoute_state_enter,enterActive:r.Z.navigationToSubRoute_state_enterActive,exit:r.Z.navigationToSubRoute_state_exitActive,exitActive:r.Z.navigationToSubRoute_state_exitActive},timeout:450},navigationFromLeft:{classNames:{enter:r.Z.navigationFromLeft_state_enter,enterActive:r.Z.navigationFromLeft_state_enterActive,exit:r.Z.navigationFromLeft_state_exitActive,exitActive:r.Z.navigationFromLeft_state_exitActive},timeout:350},navigationFromRight:{classNames:{enter:r.Z.navigationFromRight_state_enter,enterActive:r.Z.navigationFromRight_state_enterActive,exit:r.Z.navigationFromRight_state_exitActive,exitActive:r.Z.navigationFromRight_state_exitActive},timeout:350}};function o(e){return i.useCallback((a=>i.cloneElement(a,e?{classNames:n.navigationToSubRoute.classNames,timeout:n.navigationToSubRoute.timeout}:{classNames:n.navigationToRootRoute.classNames,timeout:n.navigationToRootRoute.timeout})),[e])}},97601:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={navigationToRootRoute_state_enter:"_1c49POymOB57",navigationToRootRoute_state_enterActive:"M8Nd_XvsSAPz",navigationToRootRoute_state_exit:"l8FPWzmtIuXH",navigationToRootRoute_state_exitActive:"_2nQ_wEeMIxa9",navigationToSubRoute_state_enter:"_3a8Fe6vlg8Au",navigationToSubRoute_state_enterActive:"cLO7MaNF9hl_",navigationToSubRoute_state_exit:"QcMCKyBWuA-Q",navigationToSubRoute_state_exitActive:"_1Tf7lkqWNoS6",navigationFromLeft_state_enter:"_28UBZSmjHrT3",navigationFromLeft_state_enterActive:"_2Q4ZdaIFVmNZ",navigationFromLeft_state_exit:"_2bBv1gGg-AgR",navigationFromLeft_state_exitActive:"PrIGAUqK1BST",navigationFromRight_state_enter:"_2osNQb0FLYWg",navigationFromRight_state_enterActive:"_1G-XpnGaM0iE",navigationFromRight_state_exit:"_3XkjzebNySCq",navigationFromRight_state_exitActive:"_2__SGxY_E3ax"}},65004:(e,a,s)=>{"use strict";s.d(a,{B:()=>l});var i=s(27378),r=s(12759),n=(s(28955),s(67314)),o=s(89413);const l=e=>{let a=e.error;const s=(0,n.w)();if(!(0,r.V)(a))return null;const l=a.expired;switch(a.type){case"unknown":case"token_expired":return i.createElement("div",{className:o.Z.host,"data-test":"ErrorMessage"},a.message);case"throttling":return!l||s<l?i.createElement("div",{className:o.Z.host,"data-test":"ErrorMessage"},a.message):null;default:return null}};l.displayName="auth(modules)(ErrorMessage)"},89413:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2eEizPvmmmba"}},80993:(e,a,s)=>{"use strict";s.d(a,{X:()=>c});var i=s(27378),r=s(57569),n=s(17302),o=s(15474),l=s(30559);const c=()=>i.createElement("div",{className:r.Z.host},i.createElement(n.xu,{direction:"row",gap:"m"},i.createElement(o.Gc9,null),i.createElement(n.xu,{direction:"column",gap:"xs"},i.createElement(n.xv,{variant:"M / Bold",color:"contrast-alpha"},i.createElement(l.Z,{defaultMessage:"Didn't receive a code?",id:"two_fa_fb_messenger_info_title"})),i.createElement(n.xv,{variant:"S / Regular",color:"contrast-beta"},i.createElement(l.Z,{defaultMessage:"Write something to the chatbot and press Get auth code",id:"two_fa_fb_messenger_info_desc",values:{button:i.createElement(l.Z,{defaultMessage:"Get auth code",id:"two_fa_fb_messenger_info_desc_button"})}})))))},57569:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2tei3mBNv4SV"}},53771:(e,a,s)=>{"use strict";s.d(a,{I:()=>h});var i=s(49491),r=s(2243),n=s(27378),o=s(18721),l=s(32912),c=s(41223),d=s(19857),u=s(22866),m=s(34263),p=s(80502);const h=e=>{let a=e.fields,s=e.disabled,h=e.captcha;const v=Object.entries(a).map((e=>{let a=r(e,2),o=a[0],h=a[1];switch(null==h?void 0:h.type){case"select":return n.createElement(p.E,{key:o},n.createElement(u.m,i(i({},h.nativeProps),{},{name:o,options:h.options,placeholder:h.label,required:h.required,disabled:s})));case"text":case"email":return n.createElement(p.E,{key:o},n.createElement(m.n,i(i({},h.nativeProps),{},{name:o,type:h.type,label:h.label,autoComplete:h.autoComplete,defaultValue:h.defaultValue,minLength:h.minLength,required:h.required,disabled:h.disabled||s,blocked:h.blocked})));case"password":return n.createElement(p.E,{key:o},n.createElement(d.Z,i(i({},h.nativeProps),{},{name:o,label:h.label,autoComplete:h.autoComplete,defaultValue:h.defaultValue,minLength:h.minLength,required:h.required,disabled:s})));case"boolean":return n.createElement(p.E,{key:o},n.createElement(l.j,i(i(i({},h.nativeProps),h.uiProps),{},{name:o,label:h.label,required:h.required,disabled:s})));case"hidden":return n.createElement(c.S,i(i({key:o},h.nativeProps),{},{name:o,value:h.value}));default:return null}}));return n.createElement(n.Fragment,null,v,h&&n.createElement(p.E,null,n.createElement(o.R,{lang:h.lang,name:h.type,publicKey:h.publicKey})))};h.displayName="auth(modules)(Fields)"},28176:(e,a,s)=>{"use strict";s.d(a,{U:()=>c});var i=s(27378),r=s(60042),n=s(17302),o=s(42784),l=s(57863);const c=e=>{let a=e.className;const s=(0,o.p)().routerService.current,c=i.useMemo((()=>(null==s?void 0:s.parent)?s.parent.title:s?s.title:null),[s]);return i.createElement("div",{className:r(l.Z.host,a)},c||i.createElement(n.$j,{size:"s"}))};c.displayName="auth(modules)(MainTitle)"},57863:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3lLSiGRiqdcr"}},57432:(e,a,s)=>{"use strict";s.d(a,{$:()=>d});var i=s(49491),r=s(27378),n=s(15474),o=s(17302),l=s(42784),c=s(89550);const d=e=>{let a=e.tabs,s=void 0===a?{}:a;const d=(0,l.p)().routerService,u=d.current,m=d.go,p=d.back,h=r.useMemo((()=>Object.keys(s)),[s]),v=r.useMemo((()=>!!(null==u?void 0:u.path)&&h.includes(u.path)),[null==u?void 0:u.path,h]),g=r.useCallback((e=>{m(e)}),[m]);if(!u)return null;let _;return _=v?r.createElement(o.E7,{className:c.Z.libNav,tabs:s,selected:u.path,onSelect:g},r.createElement(o.es,{className:c.Z.libNavHeader},r.createElement(o.rr,null,((e,a,s,n)=>{let l=s.selected;return r.createElement(o.GD,i({key:a,index:n},e.nativeProps),r.createElement(o.Uq,{title:e.title,aSelected:l}))})),r.createElement(o.Qv,{fullWidthBg:!0}))):r.createElement("header",{className:c.Z.nav},r.createElement(o.Xd,{"data-test":"auth-layout-header-back-button",className:"".concat(c.Z.slot," ").concat(c.Z.slot_start),onClick:p},r.createElement(n.vjc,{flipForRtl:!0})),r.createElement("h2",{className:c.Z.title,"data-test":"auth-layout-header-title"},u.title),r.createElement("div",{className:c.Z.slot,"data-test":"auth-layout-header-slot"})),r.createElement("div",{className:c.Z.host},_)};d.displayName="auth(modules)(NavHeader)"},89550:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"u4RexuYxHFeV",libNav:"grTy06nYlQeQ",libNavHeader:"_2p6wgWh4NStp",nav:"Gmr0X3H4T7nj",slot:"_3u8nqaoSw6-K",slot_start:"_3LDiXF9QnHot","slide-slot-start-from-left":"iKtNsCu7B6vP",title:"_1TLVIF6utD8K"}},72383:(e,a,s)=>{"use strict";s.d(a,{N:()=>c});var i=s(27378),r=s(30559),n=s(42784),o=s(49013),l=s(42753);const c=e=>{let a=e.disabled;const s=(0,n.p)().authService.oAuthProviders;return s.length?i.createElement("div",{className:l.Z.host},i.createElement("div",{className:l.Z.header},i.createElement(r.Z,{id:"auth_continue_with",defaultMessage:"Or continue with"})),i.createElement("div",{className:l.Z.items},s.map((e=>i.createElement(o.O,{key:e.id,id:e.id,href:e.href,disabled:a}))))):null};c.displayName="auth(modules)(OAuthProviders)"},42753:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"DdAuIajZ73x6",header:"IFKHYJDY_mPi",items:"_1fQqjhd7r47B"}},8181:(e,a,s)=>{"use strict";s.d(a,{Y:()=>l});var i=s(27378),r=s(83796),n=s(31029),o=s(19665);const l=e=>{let a=e.minLength;const s=(0,r.cl)().values.password,l=void 0===s?"":s;return i.createElement("div",{className:o.Z.host},i.createElement(n.P,{password:l,minPasswordLength:a}))};l.displayName="auth(modules)(PasswordStrength)"},19665:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2BPaKk3mLug3"}},11295:(e,a,s)=>{"use strict";s.d(a,{d:()=>u});var i=s(47014),r=s(2243),n=s(27378),o=s(17302),l=s(97597),c=(s(28955),s(67314)),d=s(90263);const u=e=>{let a=e.resendAt,s=e.onTimerOver,u=e.onRequestClick;const m=n.useState(!1),p=r(m,2),h=p[0],v=p[1],g=n.useState(!1),_=r(g,2),f=_[0],E=_[1],S=n.useState(null),y=r(S,2),b=y[0],C=y[1],T=(0,c.w)(),A=T>=a,k=n.useCallback(i((function*(){const e=yield u();"boolean"!=typeof e&&"validation"!==e.type&&C(e)})),[u]);n.useEffect((function(){function e(){return(e=i((function*(){yield k(),E(!0),v(!1)}))).apply(this,arguments)}h||f||(v(!0),function(){e.apply(this,arguments)}())}),[h,f,k]),n.useEffect((function(){A&&(null==s||s(),C(null))}),[A,s]);const w=n.useMemo((()=>!(!b||!("message"in b))&&b.message),[b]);return n.createElement("div",{className:d.Z.host},n.createElement(l.d,{serverTime:T,processing:!f,disabled:!!b&&"throttling"!==b.type,resendAt:a,onClick:k}),w&&n.createElement(o.Q6,{error:!0},w))};u.displayName="auth(modules)(ResendCode)"},90263:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"qVFk-nIiknHL"}},13256:(e,a,s)=>{"use strict";s.d(a,{Z:()=>u});var i=s(27378),r=s(60042),n=s(15696),o=s(29609),l=s(42784),c=s(56628),d=s(76434);const u=e=>{let a=e.className,s=e.contentClassName,u=e.tabs,m=void 0===u?[]:u;const p=(0,l.p)().routerService.current,h=i.useMemo((()=>{var e;if(!p)return{key:null,content:null,isSub:!1};const a=null!==(e=m.find((e=>e.path===p.path)))&&void 0!==e?e:null;return a?{key:"root",content:i.createElement(n.Z,{component:null},i.createElement(o.Z,{key:p.path,classNames:a.cssTransition.classNames,timeout:a.cssTransition.timeout},i.createElement("div",{className:s},i.createElement(a.Component,null))))}:{key:p.path,content:i.createElement("div",{className:s},p.Component?i.createElement(p.Component,null):null),isSub:Boolean(p.parent)}}),[s,p,m]),v=(0,c.U)(h.isSub);return null===h.key?null:i.createElement(n.Z,{className:r(d.Z.host,a),childFactory:v},i.createElement(o.Z,{key:h.key,timeout:0},h.content))};u.displayName="auth(modules)(Routes)"},76434:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3XEqdT9rvZzN"}},86698:(e,a,s)=>{"use strict";s.d(a,{M:()=>o});var i=s(27378),r=s(17302),n=s(65786);const o=e=>{let a=e.loading,s=e.children,o=e.retryAt,l=e.disabled,c=e.dataTest;return i.createElement(r.xu,{direction:"row",fullWidth:!0,padding:[16,0,0,0]},i.createElement(r.zx,{type:"submit",color:"accent",loading:a,disabled:l||Boolean(o),dataTest:c,fullWidth:!0},o?i.createElement(n.d,{retryAt:o}):s))};o.displayName="auth(modules)(SubmitButton)"},30966:(e,a,s)=>{"use strict";s.d(a,{m:()=>f});var i=s(47014),r=s(27378),n=s(83796),o=s(30559),l=s(17302),c=s(44749),d=s(85420),u=s(42784),m=s(65004),p=s(53771),h=s(86698),v=s(72383),g=s(80502),_=s(99790);const f=()=>{const e=(0,u.p)(),a=e.authService,s=a.login,f=a.forms.login,E=f.fields,S=f.captcha,y=e.routerService.go,b=r.useCallback((()=>{y(d.JZ.RESTORE_PASSWORD)}),[y]),C=r.useCallback(function(){var e=i((function*(e){return yield s(e)}));return function(a){return e.apply(this,arguments)}}(),[s]);return r.createElement(n.l0,{onSubmit:C},(e=>{let a=e.handleSubmit,s=e.submitting,i=e.submitErrors;var n;return r.createElement("form",{"data-test":"auth-form-login",noValidate:!0,onSubmit:a},r.createElement(c.w,{exclude:_.u}),null===(n=i)||void 0===n?void 0:n.formErrors.map((e=>e?r.createElement(m.B,{error:e}):null)),r.createElement(p.I,{fields:E,captcha:S}),r.createElement(g.E,null,r.createElement(l.rU,{"data-test":"auth-forgot-password-button",component:"button",type:"button",disabled:s,onClick:b},r.createElement(o.Z,{id:"auth_forgot_password",defaultMessage:"Forgot your password?"}))),r.createElement(h.M,{loading:s,dataTest:"form-signin-button"},r.createElement(o.Z,{id:"auth_log_in",defaultMessage:"Log In"})),r.createElement(v.N,{disabled:s}))}))};f.displayName="auth(panels)(Login)"},63405:(e,a,s)=>{"use strict";s.d(a,{q:()=>g});var i=s(49491),r=s(47014),n=s(27378),o=s(83796),l=(s(18721),s(32912),s(41223),s(19857)),c=(s(22866),s(34263),s(30559)),d=s(55873),u=s(42784),m=s(80502),p=s(65004),h=s(8181),v=s(86698);const g=()=>{const e=(0,u.p)().authService,a=e.setNewPassword,s=e.forms.newPassword.retryAt,g=(0,d.U)().token,_=n.useCallback((e=>e.password!==e.passwordRepeat?{passwordRepeat:n.createElement(c.Z,{id:"repeat_wrong",defaultMessage:"The password you re-entered does not match"})}:void 0),[]),f=n.useCallback(function(){var e=r((function*(e){return yield a(i(i({},e),{},{token:(Array.isArray(g)?g[0]:g)||""}))}));return function(a){return e.apply(this,arguments)}}(),[a,g]);return n.createElement(o.l0,{validate:_,onSubmit:f},(e=>{let a=e.handleSubmit,i=e.submitting,r=e.submitErrors;var o;return n.createElement("form",{"data-test":"auth-form-new-password",noValidate:!0,onSubmit:a},null===(o=r)||void 0===o?void 0:o.formErrors.map((e=>e?n.createElement(p.B,{error:e}):null)),n.createElement(m.E,null,n.createElement(l.Z,{name:"password",label:n.createElement(c.Z,{id:"pro_change_password_new_password",defaultMessage:"New Password"}),required:!0,minLength:4,autoComplete:"off","data-test":"input-password"})),n.createElement(m.E,null,n.createElement(l.Z,{name:"passwordRepeat",label:n.createElement(c.Z,{id:"pro_change_password_new_password_repeat",defaultMessage:"Confirm New Password"}),required:!0,minLength:4,autoComplete:"off","data-test":"input-passwordRepeat"})),n.createElement(h.Y,{minLength:4}),n.createElement(v.M,{dataTest:"form-signin-button",loading:i,retryAt:s},n.createElement(c.Z,{id:"auth_change_password",defaultMessage:"Change password"})))}))};g.displayName="auth(panels)(NewPassword)"},9689:(e,a,s)=>{"use strict";s.d(a,{Y:()=>v});var i=s(47014),r=s(27378),n=s(83796),o=s(30559),l=s(44749),c=s(42784),d=s(65004),u=s(53771),m=s(86698),p=s(72383),h=s(99790);const v=()=>{const e=(0,c.p)().authService,a=e.register,s=e.forms.registration,v=s.fields,g=s.captcha,_=s.notes,f=r.useCallback(function(){var e=i((function*(e){return yield a(e)}));return function(a){return e.apply(this,arguments)}}(),[a]),E=r.useMemo((()=>{var e;return null!==(e=null==_?void 0:_.agreement)&&void 0!==e?e:null}),[_]);return r.createElement(n.l0,{onSubmit:f},(e=>{let a=e.handleSubmit,s=e.submitting,i=e.submitErrors;var n;return r.createElement("form",{"data-test":"auth-form-registration",noValidate:!0,onSubmit:a},r.createElement(l.w,{exclude:h.u}),null===(n=i)||void 0===n?void 0:n.formErrors.map((e=>e?r.createElement(d.B,{error:e}):null)),r.createElement(u.I,{fields:v,captcha:g}),r.createElement(m.M,{loading:s,dataTest:"form-signup-button"},r.createElement(o.Z,{id:"auth_register",defaultMessage:"Register"})),E,r.createElement(p.N,{disabled:s}))}))};v.displayName="auth(panels)(Registration)"},2850:(e,a,s)=>{"use strict";s.d(a,{d:()=>p});var i=s(47014),r=s(27378),n=s(83796),o=s(30559),l=s(42784),c=s(65004),d=s(53771),u=s(86698),m=s(96488);const p=()=>{const e=(0,l.p)().authService,a=e.registerByOAuth,s=e.forms.registrationByOAuth,p=s.fields,h=s.notes,v=s.meta,g=s.captcha,_=r.useCallback(function(){var e=i((function*(e){return yield a(e)}));return function(a){return e.apply(this,arguments)}}(),[a]),f=r.useMemo((()=>{var e;return null!==(e=null==h?void 0:h.agreement)&&void 0!==e?e:null}),[h]);return r.createElement(n.l0,{onSubmit:_},(e=>{let a=e.handleSubmit,s=e.submitting,i=e.submitErrors;var n;return r.createElement("form",{"data-test":"auth-form-registration-by-oauth",noValidate:!0,onSubmit:a},null===(n=i)||void 0===n?void 0:n.formErrors.map((e=>e?r.createElement(c.B,{error:e}):null)),r.createElement(m.n,{avatarUrl:null==v?void 0:v.avatarUrl,firstName:null==v?void 0:v.firstName}),r.createElement(d.I,{fields:p,captcha:g}),r.createElement(u.M,{loading:s,dataTest:"form-signup-button"},r.createElement(o.Z,{id:"auth_register",defaultMessage:"Register"})),f)}))};p.displayName="auth(panels)(RegistrationByOAuth)"},18971:(e,a,s)=>{"use strict";s.d(a,{g:()=>l});var i=s(27378),r=s(30559),n=s(32263),o=s(42784);const l=()=>{const e=(0,o.p)().authService;return i.createElement(n.i,{title:i.createElement(r.Z,{id:"auth_reg_unavailable_title",defaultMessage:"Client registration unavailable"}),description:i.createElement(r.Z,{id:"auth_reg_unavailable_descr",defaultMessage:"We apologize, but new account registration is not available for clients from your region."}),withSupportButton:!e.supportButtonHidden,onSupportClick:e.goToSupport})};l.displayName="auth(panels)(RegistrationUnavailable)"},64939:(e,a,s)=>{"use strict";s.d(a,{v:()=>g});var i=s(47014),r=s(2243),n=s(27378),o=s(83796),l=s(30559),c=s(44749),d=s(42784),u=s(65004),m=s(53771),p=s(86698),h=s(97360),v=s(54479);const g=()=>{const e=(0,d.p)().authService,a=e.resetPassword,s=e.resetForm,g=e.forms.restorePassword,_=g.fields,f=g.captcha,E=g.retryAt,S=n.useState(!1),y=r(S,2),b=y[0],C=y[1],T=n.useCallback(function(){var e=i((function*(e){const s=yield a(e);return"boolean"==typeof s&&C(s),s}));return function(a){return e.apply(this,arguments)}}(),[a]);return n.useEffect((()=>function(){s("restorePassword")}),[s]),b?n.createElement(v.f,null,n.createElement(l.Z,{id:"auth_info_was_sent",defaultMessage:"We have sent you a link to reset your password. It could take a few minutes for the email to arrive. Check your spam folder if you don't see it in your inbox."})):n.createElement(o.l0,{onSubmit:T},(e=>{let a=e.handleSubmit,s=e.submitting,i=e.submitErrors;var r;return n.createElement("form",{"data-test":"auth-form-restore-password",noValidate:!0,onSubmit:a},n.createElement(c.w,null),null===(r=i)||void 0===r?void 0:r.formErrors.map((e=>e?n.createElement(u.B,{error:e}):null)),n.createElement(h.j,null,n.createElement(l.Z,{id:"auth_pass_change_order",defaultMessage:"Please enter the email address you used to register the account and we will send you a link to reset your password."})),n.createElement(m.I,{fields:_,disabled:!!E,captcha:f}),n.createElement(p.M,{retryAt:E,loading:s,dataTest:"button-restore-password"},n.createElement(l.Z,{id:"auth_restore",defaultMessage:"Restore"})))}))};g.displayName="auth(panels)(RestorePassword)"},82240:(e,a,s)=>{"use strict";s.d(a,{y:()=>l});var i=s(27378),r=s(30559),n=s(32263),o=s(42784);const l=()=>{const e=(0,o.p)(),a=e.brokerName,s=e.authService;return i.createElement(n.i,{title:i.createElement(r.Z,{id:"service_unavailable_in_county_title",defaultMessage:"Service unavailable"}),description:i.createElement(r.Z,{id:"service_unavailable_in_county_descr",defaultMessage:"We apologize, but the {name} platform does not operate in your region.",values:{name:a}}),withSupportButton:!s.supportButtonHidden,onSupportClick:s.goToSupport})};l.displayName="auth(panels)(ServiceUnavailable)"},43647:(e,a,s)=>{"use strict";s.d(a,{h:()=>v});var i=s(47014),r=s(27378),n=s(83796),o=s(17302),l=s(30559),c=s(42784),d=s(65004),u=s(53771),m=s(86698),p=s(80993),h=s(97360);const v=()=>{const e=(0,c.p)().authService,a=e.twoFactorAuth,s=e.forms.twoFactorAuth,v=s.fields,g=s.retryAt,_=e.twoFactorAuthMeta.facebookMessengerLink,f=r.useCallback(function(){var e=i((function*(e){return yield a(e)}));return function(a){return e.apply(this,arguments)}}(),[a]);return r.createElement(n.l0,{onSubmit:f},(e=>{let a=e.handleSubmit,s=e.submitting,i=e.submitErrors;var n;return r.createElement("form",{"data-test":"auth-form-2fa-facebook-messenger",noValidate:!0,onSubmit:a},null===(n=i)||void 0===n?void 0:n.formErrors.map((e=>e?r.createElement(d.B,{error:e}):null)),r.createElement(h.j,null,r.createElement(l.Z,{id:"auth_2fa_messenger_enter_code_message",defaultMessage:"Enter the code from the {messenger}",values:{messenger:r.createElement(o.rU,{href:_,rel:"noreferrer",target:"_blank"},r.createElement("span",null,"Facebook Messenger"))}})),r.createElement(u.I,{fields:v}),r.createElement(m.M,{retryAt:g,loading:s,dataTest:"auth-form-2fa-sms-submit"},r.createElement(l.Z,{id:"confirm",defaultMessage:"Confirm"})),r.createElement(p.X,null))}))};v.displayName="auth(panels)(TwoFactorAuthFacebookMessenger)"},6731:(e,a,s)=>{"use strict";s.d(a,{m:()=>p});var i=s(47014),r=s(27378),n=s(83796),o=s(30559),l=s(42784),c=s(65004),d=s(53771),u=s(86698),m=s(97360);const p=()=>{const e=(0,l.p)().authService,a=e.twoFactorAuth,s=e.forms.twoFactorAuth,p=s.fields,h=s.retryAt,v=r.useCallback(function(){var e=i((function*(e){return yield a(e)}));return function(a){return e.apply(this,arguments)}}(),[a]);return r.createElement(n.l0,{onSubmit:v},(e=>{let a=e.handleSubmit,s=e.submitting,i=e.submitErrors;var n;return r.createElement("form",{"data-test":"auth-form-2fa-google",noValidate:!0,onSubmit:a},null===(n=i)||void 0===n?void 0:n.formErrors.map((e=>e?r.createElement(c.B,{error:e}):null)),r.createElement(m.j,null,r.createElement(o.Z,{id:"auth_2fa_google_enter_message",defaultMessage:'Enter a 6-digit code from the application "Google Authenticator"'})),r.createElement(d.I,{fields:p}),r.createElement(u.M,{retryAt:h,loading:s,dataTest:"auth-form-2fa-google-submit"},r.createElement(o.Z,{id:"confirm",defaultMessage:"Confirm"})))}))};p.displayName="auth(panels)(TwoFactorAuthGoogle)"},6397:(e,a,s)=>{"use strict";s.d(a,{l:()=>h});var i=s(47014),r=s(27378),n=s(83796),o=s(30559),l=s(42784),c=s(65004),d=s(53771),u=s(86698),m=s(11295),p=s(97360);const h=()=>{const e=(0,l.p)().authService,a=e.twoFactorAuth,s=e.resendTwoFactorAuth,h=e.forms.twoFactorAuth,v=h.fields,g=h.retryAt,_=h.newCodeAfter,f=r.useCallback(i((function*(){return yield s("sms")})),[s]),E=r.useCallback(function(){var e=i((function*(e){return yield a(e)}));return function(a){return e.apply(this,arguments)}}(),[a]);return r.createElement(n.l0,{onSubmit:E},(e=>{let a=e.handleSubmit,s=e.submitting,i=e.submitErrors;var n;return r.createElement("form",{"data-test":"auth-form-2fa-sms",noValidate:!0,onSubmit:a},null===(n=i)||void 0===n?void 0:n.formErrors.map((e=>e?r.createElement(c.B,{error:e}):null)),r.createElement(p.j,null,r.createElement(o.Z,{id:"pro_edit_phone_enter_code_description",defaultMessage:"In a few moments you'll get an SMS with a code. Please enter the code to confirm your phone number."})),r.createElement(d.I,{fields:v}),r.createElement(u.M,{disabled:"token_expired"===(null==i?void 0:i.type),dataTest:"auth-form-2fa-sms-submit",retryAt:g,loading:s},r.createElement(o.Z,{id:"confirm",defaultMessage:"Confirm"})),r.createElement(m.d,{resendAt:null!=_?_:0,onRequestClick:f}))}))};h.displayName="auth(panels)(TwoFactorAuthSMS)"},72643:(e,a,s)=>{"use strict";s(49491),s(14936),s(27378);var i=s(85420);s(91482),s(68664),s(61322),s(28775);i.JZ.TWO_FACTOR_AUTH_GOOGLE,i.JZ.TWO_FACTOR_AUTH_SMS,i.JZ.TWO_FACTOR_AUTH_FACEBOOK_MESSENGER},28775:(e,a,s)=>{"use strict";s.d(a,{t:()=>l});var i=s(49491),r=s(27378),n=s(57434),o=(s(28955),s(68664));const l=r.createContext({brokerName:"",routerService:i(i({},o.Y6),{},{go:()=>{},back:()=>null}),authService:i(i({},n.Y),{},{login:()=>Promise.resolve(!0),register:()=>Promise.resolve(!0),registerByOAuth:()=>Promise.resolve(!0),resetPassword:()=>Promise.resolve(!0),setNewPassword:()=>Promise.resolve(!0),twoFactorAuth:()=>Promise.resolve(!0),resendTwoFactorAuth:()=>Promise.resolve(!0),goToSupport:()=>{},resetForm:()=>{}})})},42784:(e,a,s)=>{"use strict";s.d(a,{p:()=>n});var i=s(27378),r=s(28775);const n=()=>i.useContext(r.t)},99790:(e,a,s)=>{"use strict";s.d(a,{u:()=>i});const i={recaptcha:!0}},12759:(e,a,s)=>{"use strict";function i(e){return"object"==typeof e&&null!==e&&"type"in e}s.d(a,{V:()=>i})},91482:(e,a,s)=>{"use strict";s.d(a,{K1:()=>S,pf:()=>y});var i=s(27378),r=s(64939),n=s(30966),o=s(63405),l=s(9689),c=s(2850),d=s(18971),u=(s(82240),s(6731)),m=s(6397),p=s(43647),h=s(30559),v=s(42784),g=s(56628),_=s(85420);_.JZ.REGISTRATION,h.Z,_.JZ.REGISTER_BY_OAUTH,h.Z,c.d,_.JZ.LOGIN,h.Z,_.JZ.TWO_FACTOR_AUTH_GOOGLE,h.Z,u.m,_.JZ.TWO_FACTOR_AUTH_SMS,h.Z,m.l,_.JZ.TWO_FACTOR_AUTH_FACEBOOK_MESSENGER,h.Z,p.h,_.JZ.RESTORE_PASSWORD,h.Z,r.v,_.JZ.NEW_PASSWORD,h.Z,o.q;const f={title:i.createElement(h.Z,{id:"auth_form_registration",defaultMessage:"Registration"}),Component:()=>"registrationUnavailable"===(0,v.p)().authService.restriction?i.createElement(d.g,null):i.createElement(l.Y,null)},E={title:i.createElement(h.Z,{id:"auth_form_login",defaultMessage:"Login"}),Component:n.m},S={[_.JZ.LOGIN]:{title:E.title,nativeProps:{"data-test":"form-tab-signin"}},[_.JZ.REGISTRATION]:{title:f.title,nativeProps:{"data-test":"form-tab-signup"}}},y=[{path:_.JZ.LOGIN,cssTransition:g.v.navigationFromLeft,Component:E.Component},{path:_.JZ.REGISTRATION,cssTransition:g.v.navigationFromRight,Component:f.Component}]},85420:(e,a,s)=>{"use strict";s.d(a,{JZ:()=>r,z1:()=>n});var i=s(78262);const r={LOGIN:"(.*)".concat(i.G.LOGIN),REGISTRATION:"(.*)".concat(i.G.REGISTRATION),REGISTER_BY_OAUTH:"/oauth(.*)",RESTORE_PASSWORD:"(.*)#action=restore-pass",NEW_PASSWORD:"(.*)#action=change-pass",TWO_FACTOR_AUTH_GOOGLE:"(.*)#action=2fa-google",TWO_FACTOR_AUTH_SMS:"(.*)#action=2fa-sms",TWO_FACTOR_AUTH_FACEBOOK_MESSENGER:"(.*)#action=2fa-fb-messenger"},n={AUTH_PLATFORM:{obsolete:"(.*)#action=auth_platform",expected:r.LOGIN},OPEN_PLATFORM:{obsolete:"(.*)#action=open_platform",expected:r.LOGIN}}},64585:(e,a,s)=>{"use strict";s.d(a,{u:()=>o});var i=s(27378),r=s(10405),n=s(85420);function o(e){return i.useMemo((()=>{const a=Object.values(n.JZ).find((e=>{const a=function(e,a){const s=Object.values(a).find((a=>a.obsolete.includes(e)));return s?s.expected:e}(e,n.z1);return r(a).exec("".concat(window.location.pathname).concat(window.location.search).concat(window.location.hash))}));return a?(e&&window.history.replaceState("",document.title,"".concat(window.location.pathname).concat(window.location.search)),a):null}),[e])}},55873:(e,a,s)=>{"use strict";s.d(a,{U:()=>r});var i=s(12521);function r(){return(0,i.parse)(window.location.search)}},24746:(e,a,s)=>{"use strict";s(12521),s(85420)},57434:(e,a,s)=>{"use strict";s.d(a,{Y:()=>i});const i={initialized:!1,lang:s(64755).I.EN,restriction:null,oAuthProviders:[],captchaRequirement:{type:"recaptcha",publicKey:"",destinations:[]},supportButtonHidden:!1,forms:{login:{fields:{}},registration:{fields:{}},registrationByOAuth:{fields:{}},restorePassword:{fields:{}},newPassword:{},twoFactorAuth:{fields:{}}},twoFactorAuthMeta:{facebookMessengerLink:""}}},61322:(e,a,s)=>{"use strict";s(47014),s(2243),s(14936),s(49491),s(27378),s(28955),s(57434)},45114:(e,a,s)=>{"use strict";s.d(a,{I:()=>AppleAdapter});var i=s(47014);class AppleAdapter{constructor(e){this.configuration=e}loadSDK(){return AppleAdapter.loadPromise||(AppleAdapter.loadPromise=new Promise(((e,a)=>{let s=!1;const i=document.createElement("script");i.id=AppleAdapter.SDK_ID,i.src=AppleAdapter.SDK_URL,i.onerror=()=>{console.error("AppleAdapter loading error, might be blocked"),a()},i.onload=()=>{if(s)return e();s=!0;try{AppleID.auth.init({clientId:this.configuration.clientId,scope:AppleAdapter.SCOPES.join(" "),redirectURI:this.configuration.redirectUrl,usePopup:!0}),e()}catch(e){console.error(e),AppleAdapter.loadPromise=void 0,a(e)}},document.body.appendChild(i)}))),AppleAdapter.loadPromise}logIn(){return i((function*(){try{return{type:"success",auth:{token:(yield AppleID.auth.signIn()).authorization.id_token}}}catch(e){return console.error("AppleAdapter.logIn",e),{type:"error",message:"System error"}}}))()}logOut(){return Promise.resolve()}}AppleAdapter.SDK_ID="auth-aa-js-sdk",AppleAdapter.SDK_URL="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",AppleAdapter.SCOPES=["name","email"]},89073:(e,a,s)=>{"use strict";s.d(a,{F:()=>FacebookAdapter});var i=s(47014);class FacebookAdapter{constructor(e){this.configuration=e}loadSDK(){return FacebookAdapter.loadPromise||(FacebookAdapter.loadPromise=new Promise(((e,a)=>{const s=document.createElement("script");s.onerror=()=>{console.error("FacebookAdapter loading error, might be blocked"),a()},s.id=FacebookAdapter.SDK_ID,s.src=FacebookAdapter.SDK_URL,document.body.appendChild(s),window.fbAsyncInit=()=>{window.FB.init({appId:this.configuration.appId,status:!1,xfbml:!1,version:"v8.0"}),e()}}))),FacebookAdapter.loadPromise}logIn(){return i((function*(){try{return yield new Promise((e=>{window.FB.login((a=>{a.authResponse?e({type:"success",auth:{token:a.authResponse.accessToken}}):e({type:"error",message:a.status})}),{scope:FacebookAdapter.SCOPES.join(", ")})}))}catch(e){return console.error("FacebookAdapter.logIn",e),{type:"error",message:"System error"}}}))()}logOut(){return i((function*(){try{return yield new Promise((e=>{window.FB.getAuthResponse()?window.FB.logout((()=>{e()})):window.FB.getLoginStatus((a=>{"connected"===a.status?window.FB.logout((()=>{e()})):e()}))}))}catch(e){console.error("FacebookAdapter.logOut",e)}}))()}}FacebookAdapter.SDK_ID="auth-fb-js-sdk",FacebookAdapter.SDK_URL="https://connect.facebook.net/en_US/sdk.js",FacebookAdapter.SCOPES=["email","public_profile"]},93164:(e,a,s)=>{"use strict";s.d(a,{c:()=>GoogleAdapter});var i=s(47014);class GoogleAdapter{constructor(e){this.configuration=e}loadSDK(){return GoogleAdapter.loadPromise||(GoogleAdapter.loadPromise=new Promise(((e,a)=>{const s=document.createElement("script");s.src=GoogleAdapter.SDK_URL,s.id=GoogleAdapter.SDK_ID,s.async=!0,s.defer=!0,s.onerror=()=>{console.error("GoogleAdapter loading error, might be blocked"),a(),GoogleAdapter.loadPromise=void 0},s.onload=()=>{e()},document.body.appendChild(s)}))),GoogleAdapter.loadPromise}logIn(){var e=this;return i((function*(){return yield new Promise(((a,s)=>{GoogleAdapter.CLIENT=google.accounts.oauth2.initCodeClient({client_id:e.configuration.clientId,scope:GoogleAdapter.SCOPES.join(" "),ux_mode:"popup",callback:e=>{a(e.code)},error_callback:e=>{s(e.message)}}),GoogleAdapter.CLIENT.requestCode()})).then((e=>({type:"success",auth:{token:e}}))).catch((e=>(console.error("GoogleAdapter.logIn",e),{type:"error",message:"System error"})))}))()}logOut(){return i((function*(){return Promise.resolve()}))()}}GoogleAdapter.SDK_ID="auth-gp-js-sdk",GoogleAdapter.SDK_URL="https://accounts.google.com/gsi/client",GoogleAdapter.SCOPES=["profile","openid","email"]},33870:(e,a,s)=>{"use strict";s.d(a,{S:()=>LineAdapter});var i=s(47014),r=s(72155),n=s(88412);s(12521);class LineAdapter{constructor(e){this.configuration=e,this.sdkFallback=new n._({providerId:"ln",apiUrl:"https://access.line.me/oauth2/v2.1/authorize",redirectUrlKey:LineAdapter.REDIRECT_URL_KEY})}loadSDK(){return Promise.resolve()}logIn(){var e=this;return i((function*(){try{return{type:"success",auth:{token:(yield e.sdkFallback.login({response_type:"code",client_id:e.configuration.clientId,state:(0,r.x0)(),scope:LineAdapter.SCOPES.join(" "),[LineAdapter.REDIRECT_URL_KEY]:e.configuration.redirectUrl})).authResponse.id_token}}}catch(e){return console.error("LineAdapter.logIn",e),{type:"error",message:"System error"}}}))()}logOut(){return i((function*(){return Promise.resolve()}))()}}LineAdapter.REDIRECT_URL_KEY="redirect_uri",LineAdapter.SCOPES=["profile","openid","email"]},68664:(e,a,s)=>{"use strict";s.d(a,{Y6:()=>i});s(2243),s(49491),s(27378);const i={current:null}},60829:(e,a,s)=>{"use strict";function i(e){return{"--auth-form-max-size":"354px","--auth-form-project-background":e.projectBackgroundColor}}s.d(a,{u:()=>i})},78428:(e,a,s)=>{"use strict";var i;s.d(a,{$:()=>i}),function(e){e.Demo="demo",e.Common="common",e.CommonFx="common_fx",e.Soft="soft"}(i||(i={}))},60299:(e,a,s)=>{"use strict";s.d(a,{v:()=>AccountModel});var i=s(49491),r=s(474),n=s(78428),o=s(66257);class AccountModel{static parseAll(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Array.isArray(e))return[];const c=[],d=[];let u;for(let b=0;b<e.length;b+=1){var m;const C=e[b];if(a&&(u=a.find((e=>e.code===C.currency)),!u))throw new Error("Currency ".concat(C.currency," not found in currencyInfo "));const T=C.type,A=i(i({},AccountModel.DEFAULT_ACCOUNT),{},{id:C.id,name:C.name,sourceType:T,status:C.status,openedAt:C.opened_at,closedAt:C.closed_at,currencyIcon:(null===(m=u)||void 0===m?void 0:m.flag_image)||"",group:C.group,operations:C.operations});switch(T){case n.$.Common:case n.$.CommonFx:{var p,h,v,g,_;const e=C.balance,a=null!==(p=null===(h=u)||void 0===h?void 0:h.symbol)&&void 0!==p?p:r.Ds[C.currency];A.type=o.Q.REAL,A.currencyName=C.currency,A.currencyNameForLimits=C.currency,A.currencyLet=a,A.amount=null!==(v=null==e?void 0:e.amount_free)&&void 0!==v?v:0,A.amountReal=null!==(g=null==e?void 0:e.amount_real)&&void 0!==g?g:0,A.bonus=null!==(_=null==e?void 0:e.amount_bonus_free)&&void 0!==_?_:0,A.isIslamic=l,c.push(A);break}case n.$.Demo:{var f,E;const e=C.balance;A.type=o.Q.DEMO,A.currencyName="demo",A.currencyNameForLimits=C.currency,A.currencyLet=r.Ds.demo,A.amount=null!==(f=null==e?void 0:e.amount_free)&&void 0!==f?f:0,A.amountReal=null!==(E=null==e?void 0:e.amount_real)&&void 0!==E?E:0,A.refill.maxAmount=(null==s?void 0:s.amount[C.currency])||AccountModel.MAX_DEMO_REFILL_AMOUNT,d.push(A);break}case n.$.Soft:{var S,y;const e=C.balance;A.type=o.Q.SOFT,A.currencyName="olc",A.currencyLet=r.Ds.olc,A.amount=null!==(S=null==e?void 0:e.amount_free)&&void 0!==S?S:0,A.amountReal=null!==(y=null==e?void 0:e.amount_real)&&void 0!==y?y:0,A.refill.maxAmount=0,d.push(A);break}default:console.error("Unhandled account model: ".concat(JSON.stringify(C)))}}return c.sort(((e,a)=>e.id-a.id)).concat(d)}}AccountModel.DEFAULT_ACCOUNT={id:-1,type:o.Q.STUB,sourceType:n.$.Common,name:o.Q.STUB,currencyLet:r.Ds.usd,currencyName:"usd",currencyNameForLimits:"usd",amount:0,amountReal:0,bonus:0,balanceHold:0,balancePayoutAmount:0,refill:{maxAmount:0,blockingReason:null},selected:!1,closedAt:0,openedAt:0,status:"open",currencyIcon:"",isIslamic:!1,operations:[]},AccountModel.MAX_DEMO_REFILL_AMOUNT=1e4},89288:(e,a,s)=>{"use strict";s.d(a,{P:()=>AccountRepository});var i=s(29042),r=s(57615);class AccountRepository{static get storageService(){return null===this._storageService&&(this._storageService=new r._({namespace:"ACCOUNT_SERVICE",backend:new i.u})),this._storageService}static getAccountId(){return AccountRepository.storageService.get("currentAccountId")}static setAccountId(e){return AccountRepository.storageService.set("currentAccountId",e)}}AccountRepository._storageService=null},66257:(e,a,s)=>{"use strict";s.d(a,{Q:()=>i});const i={STUB:"stub",DEMO:"demo",REAL:"real",VIRTUAL:"virtual",SOFT:"soft"}},37718:(e,a,s)=>{"use strict";s.d(a,{I:()=>NoticeQueue});var i=s(47014),r=s(59312),n=s(60521),o=s(3319);class NoticeQueue{constructor(){this.counters=[],this.collections={},this.noticeHash={},this.noticeWaiting={}}get time(){return this.timeService?this.timeService.serverTime:0}setTimeService(e){this.timeService=e}addCollections(e){for(let a=0;a<e.length;a++){const s=e[a],i=s.name,r=s.model;this.collections[i]=r;const n=this.getWaitingNotices(i);n&&(this.removeWaitingNotices(i),this.add(n))}}removeCollections(e){for(let a=0;a<e.length;a++)delete this.collections[e[a]]}getCollection(e){return this.collections[e]}getNotice(e){const a=e.id;let s,i=e.collectionName;if(!i&&a){const e=this.getNoticeHash(a);i=e&&e.collectionName}if(i&&(s=this.getCollection(i)),s)return s.get(a)}add(e){return e instanceof Array?this.addNotices(e):this.addNotice(e)}remove(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.H.USER_CLOSE;return e instanceof Array?this.removeNotices(e,a):this.removeNotice(e,a)}addWaiting(e){return e instanceof Array?this.addWaitingNotices(e):this.addWaitingNotice(e)}addWaitingNotices(e){for(let a=0;a<e.length;a++)this.addWaitingNotice(e[a])}addWaitingNotice(e){const a=e.collectionName;if(!a)return;this.noticeWaiting[a]||(this.noticeWaiting[a]=[]);const s=this.noticeWaiting[a];s&&s.push(e)}removeWaitingNotices(e){delete this.noticeWaiting[e]}getWaitingNotices(e){return this.noticeWaiting[e]}addNotices(e){for(let a=0;a<e.length;a++)this.addNotice(e[a])}addNotice(e){var a=this;if(!e||e.isExpired||this.getNoticeHash(e))return;const s=this.getCollection(e.collectionName);if(s){if((!s||"function"!=typeof s.shouldAdd||s.shouldAdd(e))&&(s&&"function"==typeof s.setNotice&&(e=s.setNotice(e)),s)){const r=function(){var a=i((function*(){"function"==typeof s.onBeforeAdd&&(yield s.onBeforeAdd(e))}));return function(){return a.apply(this,arguments)}}(),n=function(){var r=i((function*(){s.add(e),a.setNoticeHash(e),e.period&&a.startCounter(e)}));return function(){return r.apply(this,arguments)}}(),o=function(){var a=i((function*(){"function"==typeof s.onAfterAdd&&(yield s.onAfterAdd(e))}));return function(){return a.apply(this,arguments)}}();r().then(n).then(o)}}else this.addWaiting(e)}removeNotices(e,a){for(let s=0;s<e.length;s++)this.removeNotice(e[s],a)}removeNotice(e,a){let s=this.getNoticeHash(e);if(!s&&e instanceof Object&&e.collectionName){const a=this.getCollection(e.collectionName);if(a&&"function"==typeof a.setNotice){const i=a.setNotice&&a.setNotice(e);s=this.getNoticeHash(i)}}if(!s)return;const i=this.getCollection(s.collectionName);let r;if(i&&(r=i.get(s.id)),r){const e=this.counters.find((e=>r&&e.id===r.id));e&&this.removeCounter(e)}r&&i&&i.remove(r.id),this.removeNoticeHash(s),a===o.H.USER_CLOSE&&i&&i.onClose&&r&&i.onClose(r),a===o.H.TIME_IS_OVER&&i&&i.onTimeout&&r&&i.onTimeout(r)}setNoticeHash(e){e&&e.id&&(this.noticeHash[e.id]=e)}getNoticeHash(e){return e&&"object"==typeof e?this.noticeHash[e.id]:"number"==typeof e||"string"==typeof e?this.noticeHash[e]:void 0}removeNoticeHash(e){e&&"object"==typeof e&&delete this.noticeHash[e.id],"number"!=typeof e&&"string"!=typeof e||delete this.noticeHash[e]}startCounter(e){const a={id:e.id,period:e.period||0};a.disposer=(0,n.reaction)((()=>this.time),(()=>{this.decrementCounter(a)})),this.counters.push(a)}decrementCounter(e){const a=e.period;if(e.period=a-1,e.period<=0){const a=e.id;this.remove(a,o.H.TIME_IS_OVER),this.removeCounter(e)}}removeCounter(e){if(e&&"object"==typeof e&&"function"==typeof e.disposer){e.disposer();const a=this.counters.findIndex((a=>a.id===e.id));this.counters.splice(a,1)}}}(0,r.gn)([n.computed],NoticeQueue.prototype,"time",null)},3319:(e,a,s)=>{"use strict";s.d(a,{H:()=>i});const i={TIME_IS_OVER:"timeIsOver",USER_CLOSE:"userClose"}},96235:(e,a,s)=>{"use strict";s.d(a,{z:()=>AsyncStorageService});var i=s(2243),r=s(47014);class AsyncStorageService{constructor(e){this.namespace=e.namespace,this.defaultTtl=e.defaultTtl,this.backend=e.backend}set(e,a,s){const i={v:a,ea:(s=s||this.defaultTtl)?Math.floor(Date.now()/1e3)+s:null};return this.backend.set(this.namespace,e,i)}get(e){var a=this;return r((function*(){const s=yield a.backend.get(a.namespace,e);if(void 0!==s&&!(yield a.tryDeleteIfExpired(e,s)))return s.v}))()}getAll(){var e=this;return r((function*(){return(yield e.backend.getAll(e.namespace)).map((e=>{let a=i(e,2);return[a[0],a[1].v]}))}))()}delete(e){return this.backend.delete(this.namespace,e)}deleteExpired(){var e=this;return r((function*(){const a=yield e.backend.getAll(e.namespace);for(let s=0;s<a.length;s+=1)yield e.tryDeleteIfExpired(a[s][0],a[s][1])}))()}clear(){var e=this;return r((function*(){return e.backend.clear(e.namespace)}))()}tryDeleteIfExpired(e,a){var s=this;return r((function*(){const i=Math.floor(Date.now()/1e3);return!!(a.ea&&i>=a.ea)&&(yield s.backend.delete(s.namespace,e),!0)}))()}}},57615:(e,a,s)=>{"use strict";s.d(a,{_:()=>SyncStorageService});var i=s(2243);class SyncStorageService{constructor(e){this.namespace=e.namespace,this.defaultTtl=e.defaultTtl,this.backend=e.backend,this.deleteExpired()}set(e,a,s){const i={v:a,ea:(s=s||this.defaultTtl)?Math.floor(Date.now()/1e3)+s:null};return this.backend.set(this.namespace,e,i)}get(e){const a=this.backend.get(this.namespace,e);if(void 0!==a&&!this.tryDeleteIfExpired(e,a))return a.v}getAll(){return this.backend.getAll(this.namespace).map((e=>{let a=i(e,2);return[a[0],a[1].v]}))}delete(e){return this.backend.delete(this.namespace,e)}clear(){return this.backend.clear(this.namespace)}deleteExpired(){const e=this.backend.getAll(this.namespace);for(let a=0;a<e.length;a+=1)this.tryDeleteIfExpired(e[a][0],e[a][1])}tryDeleteIfExpired(e,a){const s=Math.floor(Date.now()/1e3);return!!(a.ea&&s>=a.ea)&&(this.backend.delete(this.namespace,e),!0)}}},29490:(e,a,s)=>{"use strict";s.d(a,{g:()=>InMemorySyncBackend});class InMemorySyncBackend{constructor(){this.namespaces={}}get(e,a){var s;return null===(s=this.namespaces[e])||void 0===s?void 0:s[a]}getAll(e){return Object.entries(this.namespaces[e]||{})}set(e,a,s){this.namespaces[e]||(this.namespaces[e]={}),this.namespaces[e][a]=s}delete(e,a){const s=this.namespaces[e];s&&delete s[a]}clear(e){this.namespaces[e]={}}}},60884:(e,a,s)=>{"use strict";s.d(a,{h:()=>IndexDBBackend});var i=s(47014);class IndexDBBackend{constructor(){this.handleClose=this.handleClose.bind(this)}static isIDBErrorEvent(e){return"object"==typeof e&&null!==e&&"error"in e}static isIDBDatabaseCloseEvent(e){return"object"==typeof e&&null!==e&&"target"in e}get(e,a){var s=this;return i((function*(){const i=yield s.getDb(e);return new Promise(((e,s)=>{const r=i.transaction([IndexDBBackend.TABLE],"readonly"),n=r.objectStore(IndexDBBackend.TABLE).get(a);n.onsuccess=()=>{const a=n.result;e(a)},n.onerror=e=>{IndexDBBackend.isIDBErrorEvent(e.target)&&s(e.target.error),s(r.error)}}))}))()}getAll(e){var a=this;return i((function*(){const s=yield a.getDb(e);return new Promise(((e,a)=>{const i=s.transaction([IndexDBBackend.TABLE],"readonly"),r=i.objectStore(IndexDBBackend.TABLE).openCursor(),n=[];r.onsuccess=()=>{const a=r.result;a?(n.push([a.primaryKey.toString(),a.value]),a.continue()):e(n)},r.onerror=e=>{IndexDBBackend.isIDBErrorEvent(e.target)&&a(e.target.error),a(i.error)}}))}))()}set(e,a,s){var r=this;return i((function*(){try{const i=yield r.getDb(e);yield new Promise(((e,r)=>{const n=i.transaction([IndexDBBackend.TABLE],"readwrite");n.onerror=e=>{IndexDBBackend.isIDBErrorEvent(e.target)&&r(e.target.error),r(n.error)};n.objectStore(IndexDBBackend.TABLE).put(s,a),n.oncomplete=()=>{e()}}))}catch(e){return{type:"system",message:e}}}))()}delete(e,a){var s=this;return i((function*(){try{const i=yield s.getDb(e);yield new Promise(((e,s)=>{const r=i.transaction([IndexDBBackend.TABLE],"readwrite");r.onerror=e=>{IndexDBBackend.isIDBErrorEvent(e.target)&&s(e.target.error),s(r.error)};r.objectStore(IndexDBBackend.TABLE).delete(a),r.oncomplete=()=>{e()}}))}catch(e){return{type:"system",message:e}}}))()}clear(e){var a=this;return i((function*(){try{const s=yield a.getDb(e);yield new Promise(((e,a)=>{const i=s.transaction([IndexDBBackend.TABLE],"readwrite");i.onerror=e=>{IndexDBBackend.isIDBErrorEvent(e.target)&&a(e.target.error),a(i.error)};i.objectStore(IndexDBBackend.TABLE).clear(),i.oncomplete=()=>{e()}}))}catch(e){return{type:"system",message:e}}}))()}getDb(e){return this.connection?Promise.resolve(this.connection):new Promise(((a,s)=>{const i=indexedDB.open(e,1);i.onupgradeneeded=()=>{i.result.createObjectStore(IndexDBBackend.TABLE,{autoIncrement:!1})},i.onsuccess=()=>{this.connection=i.result,this.connection.onclose=this.handleClose,a(this.connection)},i.onerror=()=>{s(i.error)}}))}handleClose(e){IndexDBBackend.isIDBDatabaseCloseEvent(e)&&this.connection===e.target&&(this.connection.onclose=()=>{},this.connection=void 0)}}IndexDBBackend.TABLE="core"},29042:(e,a,s)=>{"use strict";s.d(a,{u:()=>LocalStorageBackend});class LocalStorageBackend{get(e,a){try{const s=this.getStorageData(e);if(s[a])return s[a]}catch(e){console.error(e)}}getAll(e){try{return Object.entries(this.getStorageData(e))}catch(e){console.error(e)}return[]}set(e,a,s){try{const i=this.getStorageData(e);return i[a]=s,this.saveStorageData(e,i)}catch(e){return{type:"system",message:e}}}delete(e,a){try{const s=this.getStorageData(e);return delete s[a],this.saveStorageData(e,s)}catch(e){return{type:"system",message:e}}}clear(e){try{return this.saveStorageData(e,{})}catch(e){return{type:"system",message:e}}}getStorageData(e){try{const a=window.localStorage.getItem(e)||"{}";return JSON.parse(a)}catch(e){console.error(e)}return{}}saveStorageData(e,a){const s=JSON.stringify(a);if(s.length>=LocalStorageBackend.MAX_VALUE_SIZE)return{type:"memory_out",message:"Size limit exceeded: ".concat(LocalStorageBackend.MAX_VALUE_SIZE," bytes")};window.localStorage.setItem(e,s)}}LocalStorageBackend.MAX_VALUE_SIZE=524288},64208:(e,a,s)=>{"use strict";s.d(a,{O:()=>TimeService});var i=s(59312),r=s(60521),n=s(53601),o=s(46469),l=s(49393),c=s(7033);class TimeService{constructor(){this.serverTime=(0,n.z)(Date.now()),this.timeDelta=0,this.appClockTm=null,this.serverTimeNotObservable=(0,n.z)(Date.now()),this.isCalibrated=!1,this.getServerTime=()=>this.serverTime,this.calibrateTimeDelta=this.calibrateTimeDelta.bind(this)}get serverTimeMinutes(){return new Date(1e3*this.serverTime).getMinutes()}get todayDate(){return new Date(1e3*this.serverTime).getDate()}init(){this.appClock(),this.dsService.onOpen((()=>{(0,o.W)(1,this.dsService,this.calibrateTimeDelta),this.initObservers()}))}initObservers(){const e=(0,l.s)(1e3,1e4);(0,r.reaction)((()=>this.serverTimeMinutes),(()=>{(0,o.W)(1,this.dsService,this.calibrateTimeDelta)}),{fireImmediately:!1,delay:e})}calibrateTimeDelta(e){this.timeDelta=e,this.isCalibrated=!0,this.appClock()}setServerTime(e,a){(e&&e>this.serverTime||a)&&(this.serverTime=e,this.serverTimeNotObservable=e,this.timeDelta=(0,c.l)(e,new Date))}appClock(){this.appClockTm&&window.clearInterval(this.appClockTm),this.setServerTime((0,n.z)(Date.now())-this.timeDelta,!0),this.appClockTm=window.setInterval((()=>{this.setServerTime((0,n.z)(Date.now())-this.timeDelta)}),500)}}(0,i.gn)([r.observable],TimeService.prototype,"serverTime",void 0),(0,i.gn)([r.observable],TimeService.prototype,"isCalibrated",void 0),(0,i.gn)([r.computed],TimeService.prototype,"todayDate",null)},90650:(e,a,s)=>{"use strict";s.d(a,{g:()=>l,u:()=>o});var i=s(2243),r=s(27378),n=s(42568);const o={AM:"AM",PM:"PM"},l=e=>{let a=e.sign,s=e.onClick;const l=r.useState(a),c=i(l,2),d=c[0],u=c[1];return r.createElement(n.R,{onClick:()=>{const e=d===o.AM?o.PM:o.AM;u(e),s(e)}},d)}},96311:(e,a,s)=>{"use strict";s.d(a,{x:()=>o});var i=s(27378),r=s(60042),n=s(82844);const o=e=>{let a=e.className,s=e.dataTest,o=e.currency,l=e.allowDeposit,c=void 0!==l&&l,d=e.onClick;return c?i.createElement("button",{className:r("deal-form-amount-deposit-button",a),"data-test":s,onClick:d},"demo"===o?i.createElement(n._,{id:"refill_text",defaultMessage:"Refill"}):i.createElement(n._,{id:"billing_recharge",defaultMessage:"Deposit"})):null}},98346:(e,a,s)=>{"use strict";s.d(a,{n:()=>u});var i=s(49491),r=s(27378),n=s(60042),o=s(82844),l=s(95029);const c="deal-form-amount-error_suggest",d="deal-form-amount-error_danger",u=e=>{let a=e.className,s=e.classNameLink,u=e.error,m=e.forcedType,p=e.locale,h=e.currency,v=e.onClick,g=e.onDeposit;const _=r.useMemo((()=>m||(null==u?void 0:u.type)),[m,u]),f=r.useCallback((e=>{if(e.value)return"currency"===e.formatType?(0,l.xG)(e.value,{locale:p,currency:h}):String(e.value)}),[h,p]);return u?r.createElement("span",{className:n("deal-form-amount-error","suggest"===_?c:d,a)},r.createElement(o._,i(i({},u.descriptor),{},{values:{a(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return r.createElement("a",{className:n("deal-form-amount-error__link deal-form-amount-error__link_deposit",s),href:"#",onClick:g},a)},amount:u.value?r.createElement("a",{className:n("deal-form-amount-error__link",s),href:"#",onClick:v},f(u)):""}}))):null}},46326:(e,a,s)=>{"use strict";s.d(a,{_:()=>d});var i=s(2243),r=s(27378),n=s(60042),o=s(40285),l=s(95029),c=s(6600);const d=e=>{let a=e.currency,s=e.error,d=e.isValid,u=e.isValidLimits,m=void 0===u||u,p=e.className,h=e.onFocus,v=e.onBlur,g=e.setValue,_=e.locale,f=e.config,E=e.value,S=e.children,y=e.isTooltipShown,b=e.allowDeposit,C=e.onDeposit;const T=d&&m?null:"error",A=r.useState(null),k=i(A,2),w=k[0],N=k[1],R=r.useCallback((()=>{null==h||h(!0)}),[h]),I=r.useCallback((()=>{null==v||v(!1)}),[v]),D=r.useCallback((e=>{let a=parseFloat(e);Number.isNaN(a)&&(a=0),g(a)}),[g]),O=r.useMemo((()=>Object.assign({maximumFractionDigits:2,minimumFractionDigits:0,maximumIntegerDigits:o.aK.AMOUNT},f)),[f]);return r.createElement(r.Fragment,null,r.createElement("div",{className:n(p),ref:N},r.createElement(l.KG,{allowedEmpty:!0,config:O,value:0===E?"":E,onFocus:R,onBlur:I,onChange:D},(e=>S(e,T)))),r.createElement(c.L,{anchorEl:w,isShown:y,error:s,locale:_,currency:a,allowDeposit:b,handleDepositClick:C,setAmount:g}))}},95084:(e,a,s)=>{"use strict";s.d(a,{T:()=>o});var i=s(27378),r=s(82844),n=s(95029);const o=e=>{let a=e.currency;return i.createElement(i.Fragment,null,i.createElement(r._,{id:"deal_form_amount_title",defaultMessage:"Amount"}),","," ",i.createElement("span",{"data-test":"deal-form-amount-currency"},(0,n.By)(a)))}},6600:(e,a,s)=>{"use strict";s.d(a,{L:()=>u});var i=s(27378),r=s(60042),n=s(29609),o=s(95029),l=s(98346),c=s(96311);const d=e=>{let a=e.error,s=e.onClick,n=e.locale,o=e.currency,d=e.allowDeposit,u=e.onClickDeposit;return a?i.createElement("span",{"data-test":"deal-form-amount-error-tooltip",className:r("deal-form-amount-tooltip-content",{"deal-form-amount-tooltip-content_with-btn":d})},i.createElement(l.n,{forcedType:"suggest",error:a,currency:o,locale:n,className:r("deal-form-amount-tooltip-content__title",{"deal-form-amount-tooltip-content__title_with-btn":d}),classNameLink:"deal-form-amount-tooltip-content__link",onClick:s,onDeposit:u}),i.createElement(c.x,{currency:o,allowDeposit:d,className:"deal-form-amount-tooltip-content__button",dataTest:"deal-form-amount-error-tooltip-deposit",onClick:u})):null},u=e=>{let a=e.currency,s=e.locale,r=e.setAmount,l=e.handleDepositClick,c=e.allowDeposit,u=e.error,m=e.anchorEl,p=e.isShown,h=void 0===p||p;const v=i.useCallback((e=>{e.preventDefault(),u&&u.value&&r(u.value)}),[u,r]);return i.createElement(n.Z,{in:h,timeout:200,classNames:"amount-tooltip-fade",unmountOnExit:!0},i.createElement(o.j0,{transition:!0,anchorEl:m,open:!0,distance:8},i.createElement(d,{error:u,locale:s,currency:a,allowDeposit:c,onClick:v,onClickDeposit:l})))}},61922:(e,a,s)=>{"use strict";s.d(a,{l:()=>d});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(24811);const c=["inState","className","children"],d=e=>{let a=e.inState,s=e.className,d=e.children,u=r(e,c);return n.createElement(l.d,i({in:a,timeout:150,animType:"slideUp"},u),n.createElement("div",{className:o("deal-form-animbox",s)},d))}},24811:(e,a,s)=>{"use strict";s.d(a,{d:()=>d});var i=s(49491),r=s(14936),n=s(27378),o=s(29609);const l=["children","animType"],c={slideUp:"anim-wrapper-slide-up",slideSideRight:"anim-wrapper-slide-side-right",slideSideLeft:"anim-wrapper-slide-side-left"},d=e=>{let a=e.children,s=e.animType,d=void 0===s?"slideUp":s,u=r(e,l);return n.createElement(o.Z,i({classNames:c[d],mountOnEnter:!0,unmountOnExit:!0},u),a)}},86141:(e,a,s)=>{"use strict";s.d(a,{z:()=>o});var i=s(27378),r=s(18985),n=(s(68516),s(17435),s(30362),s(62853));const o=e=>{let a=e.date;const s=i.useCallback((()=>new Date(1e3*a)),[a])();return i.createElement(i.Fragment,null,i.createElement(r.Ji,{value:s,month:"long",day:"2-digit"})," ",i.createElement(r.Ji,{value:s,minute:"numeric",hour:"numeric",hour12:!1})," ",(0,n.u)(s))};o.displayName="AssetScheduleDate"},44535:(e,a,s)=>{"use strict";s.d(a,{R:()=>l});var i=s(50439),r=s(27378),n=s(17302),o=s(95029);const l=e=>{let a=e.opened,s=e.height,l=e.className,c=e.children,d=e.toggleSheet;const u=(0,o.Lm)(),m=(0,r.useCallback)((e=>{e===n.tW.HIDDEN&&d()}),[d]);return r.createElement(n.yo,{state:a?n.tW.EXPANDED:n.tW.HIDDEN,onChangeState:m,width:(0,i.Z)(u,768),height:s,className:l,containerSelector:".bottom-sheet"},(e=>c(e)))}},87134:(e,a,s)=>{"use strict";s.d(a,{M:()=>n});var i=s(27378),r=s(95029);function n(e){var a;const s=i.useRef(null);return(0,r.O3)(s,(()=>e.hidePanel(e.panel)),(null!==(a=e.excludeSelectors)&&void 0!==a?a:[]).concat('[data-test="SelectOptions"]')),i.createElement("div",{ref:s},e.children)}},41023:(e,a,s)=>{"use strict";s.d(a,{M:()=>u});var i=s(49491),r=s(14936),n=s(27378),o=s(44495),l=s(95029);const c=["value","currency","isSign"],d=(0,o.animated)(l.ih),u=e=>{let a=e.value,s=e.currency,l=e.isSign,u=r(e,c);return n.createElement(o.Spring,{to:{amount:a},config:i(i({},o.config.gentle),{},{duration:700})},(e=>n.createElement(d,{currency:s,value:e.amount,maximumFractionDigits:2,minimumFractionDigits:2,isSign:l,"data-test":u["data-test"]})))}},27321:(e,a,s)=>{"use strict";s.d(a,{K:()=>g});var i=s(49491),r=s(2243),n=s(14936),o=s(27378),l=s(60042),c=s(29609),d=s(15696),u=s(17302),m=s(95029),p=s(1e4);const h=["className","icon","additionalIcon","customIcon","children","subTitle","isLoading","minimized","animationType","winPercent","onHover"];function v(e,a,s,i,r,n){const o=((new Date).getTime()-e)/700,l=Math[a?"min":"max"],c=(s-i)*o+i,d=l(Math.round(c),s);r(d),d!==s&&requestAnimationFrame((()=>v(e,a,s,i,r)))}const g=o.forwardRef(((e,a)=>{let s=e.className,g=e.icon,_=e.additionalIcon,f=void 0===_?null:_,E=e.customIcon,S=e.children,y=e.subTitle,b=e.isLoading,C=e.minimized,T=e.animationType,A=e.winPercent,k=void 0===A?0:A,w=e.onHover,N=n(e,h);const R=(0,m.XI)(w),I=r(R,1)[0],D=o.useState(!1),O=r(D,2),L=O[0],M=O[1],P=o.useState(""),x=r(P,2),F=x[0],B=x[1],Z=o.useState(k),U=r(Z,2),H=U[0],G=U[1];let V;V&&k===H&&(cancelAnimationFrame(V),V=void 0),o.useEffect((()=>{if(k!==H){M(!L);B(k>H?"up":"down");const e=k>H,a=(new Date).getTime();V=requestAnimationFrame((()=>v(a,e,k,H,G)))}}),[k]);const W=H&&"winperc"===T;return o.createElement(u.Xd,i(i({className:l("deal-button",{"deal-button_has-subtitle":!!y},s),ref:a},I),N),b?o.createElement("div",{className:"deal-button__loading"},o.createElement(u.aN,null)):o.createElement(o.Fragment,null,o.createElement("div",{className:"deal-button__content deal-button__content_left"},o.createElement(c.Z,{appear:!0,in:!!y,timeout:{enter:1e3,exit:600},classNames:"deal-button-animation deal-button-animation__title"},o.createElement("div",{className:"deal-button__title"},W?o.createElement(c.Z,{in:L,onEntered:()=>M(!1),appear:!0,timeout:{enter:1e3,exit:1e3},classNames:"title"},o.createElement("div",null,S)):o.createElement("div",null,S))),o.createElement(d.Z,{className:"deal-button__sub-title"},o.createElement(c.Z,{key:String(o.isValidElement(y)?y.type:!!y),timeout:{enter:1e3,exit:600},classNames:"deal-button-animation deal-button-animation__sub-title"},o.createElement("div",{className:"deal-button__sub-title-value deal-button-animation deal-button-animation__sub-title"},W?o.createElement(o.Fragment,null,o.createElement(c.Z,{in:L,onEntered:()=>M(!1),appear:!0,timeout:{enter:1e3,exit:1e3},classNames:"subtitle"},o.createElement("div",{className:"tick"},"+".concat(H,"%"))),o.createElement(c.Z,{in:L,onEntered:()=>M(!1),appear:!0,timeout:{enter:1e3,exit:1e3},classNames:"icon-winperc, icon-winperc_".concat(F)},o.createElement("div",{className:"deal-button__icon_additional deal-button__icon_additional_".concat(F)},f))):o.createElement(o.Fragment,null,y))))),o.createElement("div",{className:"deal-button__content deal-button__content_right"},o.createElement(p.g,{position:E?"bottom":"top"},o.createElement(c.Z,{appear:!0,in:!C,timeout:{enter:700,exit:100},classNames:"deal-button-animation deal-button-animation__icon deal-button-animation__icon_main"},o.createElement("div",{className:"deal-button__icon deal-button__icon_main"},g)),o.createElement(d.Z,{className:"deal-button__icon"},o.createElement(c.Z,{key:String(o.isValidElement(E)?E.type:E),timeout:{enter:1e3,exit:600},classNames:"deal-button-animation deal-button-animation__icon deal-button-animation__icon_default"},o.createElement("div",{className:"deal-button__icon"},E)))))))}))},22085:(e,a,s)=>{"use strict";s.d(a,{u:()=>l});var i=s(27378),r=s(60042),n=s(77740),o=s(27321);const l=i.forwardRef(((e,a)=>{let s=e.titleUp,l=e.titleDown,c=e.children,d=e.onClickUp,u=e.onClickDown,m=e.onHoverUp,p=e.onHoverDown,h=e.className,v=e.customIcon,g=e.subTitleUp,_=e.subTitleDown,f=e.winPercentUp,E=void 0===f?0:f,S=e.winPercentDown,y=void 0===S?0:S,b=e.isDisabledUp,C=e.isDisabledDown,T=e.isLoading,A=e.inline,k=e.minimized,w=e.animationType,N=e.isMutedUp,R=e.isMutedDown,I=e.setButtonUpRef,D=e.setButtonDownRef;return i.createElement("div",{className:r("deal-buttons js_tu_deal_buttons",h,{"deal-buttons_inline":A}),ref:a},i.createElement(o.K,{className:r("deal-button_up",N&&"deal-button_muted"),icon:i.createElement(n.Qe8,null),additionalIcon:i.createElement(n.QDf,null),"data-test":"deal-button-up",onClick:d,customIcon:v,minimized:k,subTitle:g,winPercent:E,animationType:w,disabled:b,isLoading:T,onHover:m,ref:I},s),c,i.createElement(o.K,{className:r("deal-button_down",R&&"deal-button_muted"),icon:i.createElement(n.lTW,null),additionalIcon:i.createElement(n.QDf,null),"data-test":"deal-button-down",onClick:u,minimized:k,customIcon:v,subTitle:_,winPercent:y,animationType:w,disabled:C,isLoading:T,onHover:p,ref:D},l))}));l.displayName="DealButtons"},76100:(e,a,s)=>{"use strict";s.d(a,{D:()=>n,V:()=>o});var i=s(27378),r=s(24811);const n=e=>{let a=e.children;return i.createElement("div",{className:"deal-form-animation-container-wrapper"},a)},o=e=>{let a=e.active,s=e.toLeft,n=void 0!==s&&s,o=e.children;return i.createElement(r.d,{in:a,timeout:300,animType:n?"slideSideLeft":"slideSideRight"},i.createElement("div",{className:"deal-form-animation-container"},o))}},79472:(e,a,s)=>{"use strict";s.d(a,{z:()=>v});var i=s(49491),r=s(27378),n=s(60042),o=s(17302),l=s(18985),c=s(8141),d=s(45797),u=s(82844),m=s(1e4),p=s(2380);const h=(0,l.vU)({cancel:{id:"cancel",defaultMessage:"Cancel"}}),v=e=>{let a=e.className,s=e.dataTest,l=void 0===s?{}:s,v=e.endIcon,g=e.endIconActive,_=e.isActive,f=e.isDisabled,E=e.isMinified,S=void 0!==E&&E,y=e.isThin,b=void 0!==y&&y,C=e.isMultiline,T=e.startIcon,A=e.title,k=e.titleContent,w=e.cancelContent,N=e.handleCancel,R=e.togglePanel;const I=n(p.Z.host,a),D=n(p.Z.text,{[p.Z.text_minified]:S,[p.Z.text_multiline]:C},S?p.Z.text_minify_transition:p.Z.text_maximize_transition),O=n(p.Z.icon,{[p.Z.icon_minified]:S});return r.createElement(m.g,{position:_?"bottom":"top",isThin:b,color:"alpha"},r.createElement(o.k$,{dir:(0,c.L)(),className:I,"data-test":l.normal,classNameEndIcon:O,endIcon:v,fullWidth:!0,disabled:f,onClick:R,textAlign:"left",title:A},r.createElement("span",{className:D},k),r.createElement("span",{"data-test":"deal-form-mode-button-label"},T)),r.createElement(o.k$,{dir:(0,c.L)(),className:I,"data-test":l.active,classNameEndIcon:O,endIcon:g,fullWidth:!0,disabled:f,onClick:N,textAlign:"left",title:d.NW.formatMessage(h.cancel)},r.createElement("span",{className:D},w||r.createElement(u._,i({},h.cancel)))))}},2380:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2Ep5cbW-8vb6",text:"_8i_KsfFvDO5-",text_minified:"_239Vn-QnRrtW",text_multiline:"LynPxB5Mqxzt",text_minify_transition:"_1XgkXgc1xj57",text_maximize_transition:"_3svARqksB96f",label:"_32FWVpoUuITo",icon:"_3IShRISPkZlP",icon_minified:"_1Uyd1-9Aqo76"}},29879:(e,a,s)=>{"use strict";s.d(a,{v:()=>u});var i=s(49491),r=s(27378),n=s(68114),o=s(95029),l=s(44535),c=s(58029);const d=(0,n.R9)(n.v6),u=e=>{let a=e.opened,s=e.selected,n=e.tabs,u=e.height,m=e.onSelect,p=e.toggleSheet,h=e.titleSlot,v=e.titleAlign;const g=(0,o.AS)(),_=r.useRef(null),f=r.useRef(null),E=(0,o.xE)(a?_:f).height,S=u>g;return r.createElement(l.R,{opened:a,toggleSheet:p,height:S?E:u},(e=>r.createElement("div",{className:c.Z.host,ref:_,style:S?{maxHeight:g}:{}},r.createElement(d,i(i({},e),{},{active:a,selected:s,onSelect:m,tabs:n,titleSlot:h,titleAlign:v})))))}},58029:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_26jDFoT8YtoD"}},62667:(e,a,s)=>{"use strict";s.d(a,{j:()=>o});var i=s(2243),r=s(27378),n=s(95029);const o=e=>{const a=e.children,s=e.duration,o=e.onChange,l=e.onFocus,c=e.onBlur,d=e.colon,u=e.suffix,m=e.suffixShort,p=r.useState(s),h=i(p,2),v=h[0],g=h[1];return r.useEffect((()=>{g(s)}),[s]),r.createElement("div",{className:"duration-input"},r.createElement(n.Yc,{value:v,colon:d,suffix:u,suffixShort:m,onChange:e=>{g(e),o(e)},onFocus:l,onBlur:c},(e=>{let s=e.value,i=e.onChange,r=e.onKeyDown,n=e.onSelect,o=e.onFocus,l=e.onBlur;return a({value:s,onChange:i,onKeyDown:r,onSelect:n,onFocus:o,onBlur:l})})))}},20099:(e,a,s)=>{"use strict";s(2243),s(27378),s(95029)},48945:(e,a,s)=>{"use strict";s.d(a,{s:()=>c});var i=s(2243),r=s(27378),n=s(17302),o=s(82844),l=s(95029);const c=e=>{let a=e.position,s=e.onAccept,c=e.onApply,d=e.onCancel;const u=r.useState(!1),m=i(u,2),p=m[0],h=m[1];return r.createElement(l.Ph,{className:"hold-use-panel",position:a,buttonBlock:r.createElement(r.Fragment,null,r.createElement(n.zx,{onClick:d,dataTest:"hold_use_cancel_button",fullWidth:!0,variant:"secondary"},r.createElement(o._,{id:"cancel",defaultMessage:"Cancel"})),r.createElement(n.zx,{onClick:c,dataTest:"hold_use_proceed_button",fullWidth:!0,color:"warning"},r.createElement(o._,{id:"proceed",defaultMessage:"Proceed"})))},r.createElement("div",{className:"hold-use-panel__header"},r.createElement(o._,{id:"important_info",defaultMessage:"Important information"})),r.createElement("div",{className:"hold-use-panel__desc"},r.createElement(o._,{id:"fx_hold_use_warning_info",defaultMessage:"You are using money requested for withdrawal to open a new trade"})),r.createElement("div",{className:"hold-use-panel__switcher"},r.createElement(n.rs,{fullWidth:!0,name:"hold_use_check",checked:p,onChange:e=>{h(e),s(e)},size:"s",label:r.createElement(o._,{id:"fx_deals_use_hold_check",defaultMessage:"Do not show this warning again"})})))}},42568:(e,a,s)=>{"use strict";s.d(a,{R:()=>o});var i=s(60042),r=s(27378),n=s(17302);const o=e=>{let a=e.children,s=e.textAlign,o=e.disabled,l=e.onClick;return r.createElement(n.k$,{"data-test":"deal-form-input-button",variant:"contained",size:"medium",className:i("input-button","right"===s&&"input-button_align-right"),textAlign:s,onClick:l,disabled:o},a)}},26567:(e,a,s)=>{"use strict";s.d(a,{_:()=>o});var i=s(27378),r=s(17302),n=s(77740);const o=e=>{let a=e.increaseValue,s=e.decreaseValue,o=e.increaseDisabled,l=void 0!==o&&o,c=e.decreaseDisabled,d=void 0!==c&&c,u=e.isMartinGale;const m=u?i.createElement(n.taH,null):i.createElement(n.fOs,null),p=u?i.createElement(n.cGh,null):i.createElement(n.iU,null);return i.createElement("div",{className:"input-controls","data-test":"deal-form-input-controls"},i.createElement(r.Xd,{"data-test":"deal-form-input-controls-minus",onClick:s,className:"input-controls__button",disabled:d},m),i.createElement(r.Xd,{"data-test":"deal-form-input-controls-plus",onClick:a,className:"input-controls__button",disabled:l},p))}},5069:(e,a,s)=>{"use strict";s.d(a,{d:()=>n});var i=s(49491),r=s(27378);const n=e=>r.createElement("div",i({"data-test":"deal-form-input-overlay-button",className:"input-overlay-button"},e))},75669:(e,a,s)=>{"use strict";s.d(a,{P:()=>l});var i=s(27378),r=s(60042),n=s(17302),o=s(77740);const l=e=>{let a=e.onClick,s=e.dir,l=e.className,c=e.size,d=void 0===c?"s":c,u=e.disabled,m=void 0!==u&&u,p=e.isMartinGale;const h=p?i.createElement(o.taH,null):"l"===d?i.createElement(o.ded,null):i.createElement(o.fOs,null),v=p?i.createElement(o.cGh,null):"l"===d?i.createElement(o.PxB,null):i.createElement(o.iU,null);return i.createElement("div",{className:r("deal-form-input-step-button",l)},i.createElement(n.Ei,{color:"neutral",size:d,variant:"flat",dataTest:"deal-form-input-step-button-".concat(s),onClick:a,disabled:m,icon:"decrease"===s?h:v}))}},56856:(e,a,s)=>{"use strict";s.d(a,{A:()=>p});var i=s(59312),r=s(27378),n=s(50649),o=s(60042),l=s(17302),c=s(77740),d=s(82844),u=s(95029),m=s(65293);let p=class OneClickPanel extends r.Component{constructor(){super(...arguments),this.handleClose=()=>{var e,a;null===(e=(a=this.props).onCancel)||void 0===e||e.call(a)},this.handleAccept=e=>{this.props.onAccept(e)},this.handleApply=()=>{this.props.onApply()}}render(){const e=this.props,a=e.position,s=e.className,i=e.children,n=e.isOneClick,p=e.dataTest,h=e.disabled,v=e.onCancel,g=r.createElement(l.zx,{disabled:h,dataTest:"deals-make-deal",fullWidth:!0,onClick:this.handleApply},r.createElement(d._,{id:"deals_make_deal",defaultMessage:"Open a trade"}));return r.createElement(u.Ph,{className:o(m.Z.host,a&&m.Z.host_fluid,s),position:a,buttonBlock:a?g:void 0,dataTest:p},r.createElement("div",{className:m.Z.header},r.createElement(d._,{id:"deals_deals_conditions",defaultMessage:"Trade terms"}),v?r.createElement(l.Xd,{onClick:this.handleClose,className:m.Z.close},r.createElement(c.bMz,null)):null),r.createElement("div",{className:m.Z.content},i),r.createElement("div",{className:m.Z.footer},r.createElement("div",{className:m.Z.switcher},r.createElement(l.rs,{fullWidth:!0,name:"one_click_deal_check",checked:n,onChange:this.handleAccept,label:r.createElement("span",{className:m.Z.label},r.createElement(d._,{id:"deal_form_dialog_one_click_deal_check",defaultMessage:"Make trades with 1 click"}))})),a?null:g))}};p.Content=e=>{let a=e.children;return r.createElement("div",{className:m.Z.block},a)},p=(0,i.gn)([n.observer],p)},65293:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host_top:"_1AxsbF8fe_qv",host_fluid:"_3xCsi36aDjou",host:"_3gu9ktANJXtC",header:"HjE2PvLdC4Jp",footer:"_2R0xzKufutOE",block:"MFeAEeFOTE1F",button:"klxQTcjVuokQ",close:"_1ZnjXg3CuebM",label:"_3T8i0eu7L3xR",switcher:"_3Efd1WoAv_fi"}},99485:(e,a,s)=>{"use strict";s.d(a,{v:()=>d});var i=s(27378),r=s(60042),n=s(8141),o=s(95029),l=s(44535),c=s(85186);const d=e=>{let a=e.opened,s=e.className,d=e.children,u=e.toggleSheet;const m=(0,o.AS)(),p=(0,n.L)(),h=i.useRef(null),v=i.useRef(null),g=(0,o.xE)(a?h:v).height;return i.createElement(l.R,{className:r(c.Z.bg,s),opened:a,toggleSheet:u,height:g},(()=>i.createElement("div",{className:c.Z.host,dir:p,ref:h,style:{maxHeight:m}},i.createElement("div",{className:c.Z.header}),d)))}},85186:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3l5fcFlXRzGi",header:"_37h3k023AbGh",bg:"_2oQzpQdZkDfP"}},99583:(e,a,s)=>{"use strict";s.d(a,{Y:()=>v});var i=s(27378),r=s(73598),n=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),o=(s(8280),s(87188)),l=s(61922),c=s(87134),d=(s(17302),s(95029),s(60042),s(77740),s(17016),s(79472),s(1094),s(27588)),u=s(92657),m=(s(7034),s(13564),s(52229),s(18571),s(57140),s(56391),s(99767),s(3259)),p=(s(37488),s(64052)),h=s(13011);const v=e=>{let a=e.isOrders,s=e.dealOrderService,v=e.hidePanel,g=e.panel,_=e.toggleOrderForm,f=e.isBottomSheet,E=e.isPairLocked;const S=i.useContext(o.T),y=(0,p.L)(S);return i.createElement(r.Qj,null,(()=>{const e=a||E,r=g===n.r.Order;return i.createElement(i.Fragment,null,f?i.createElement(m.D,{dealOrderService:s,opened:r,toggleOrderForm:_}):i.createElement(l.l,{inState:g===n.r.Order},i.createElement(c.M,{hidePanel:v,panel:n.r.Order},i.createElement(u.f,{position:"left",toggleOrderForm:_,dealOrderService:s}))),i.createElement(h.O,{isOrderButton:e,isRiskFreeButton:!1,renderOrderButton:i.createElement(d.F,{isMinified:!1,isThin:!y,toggleOrderForm:_,dealOrderService:s})}))}))}},13011:(e,a,s)=>{"use strict";s.d(a,{O:()=>o});var i=s(27378),r=s(15696),n=s(29609);const o=e=>{let a=e.isOrderButton,s=e.isRiskFreeButton,o=e.renderOrderButton,l=e.renderRiskFreeButton;return i.createElement("div",{className:"order-risk-buttons-block"},i.createElement(r.Z,{component:null},s?i.createElement(n.Z,{timeout:{enter:900,exit:900},key:"riskfreeButton",classNames:"order-risk-buttons-animation"},i.createElement("div",{className:"order-risk-buttons-block__item"},l)):null,s&&a&&i.createElement(n.Z,{timeout:{enter:900,exit:900},key:"riskfreeButtonSpacer",classNames:"order-risk-buttons-spacer-animation"},i.createElement("div",{className:"order-risk-buttons-block__spacer"})),a?i.createElement(n.Z,{timeout:{enter:900,exit:900},key:"orderButton",classNames:"order-risk-buttons-animation"},i.createElement("div",{className:"order-risk-buttons-block__item"},o)):null))}},52360:(e,a,s)=>{"use strict";s.d(a,{c:()=>S});var i=s(27378),r=s(73598),n=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),o=(s(8280),s(87188)),l=s(37488),c=s(23735),d=s(61922),u=s(87134),m=(s(17302),s(95029),s(60042),s(77740),s(17016),s(79472),s(1094)),p=s(27588),h=(s(92657),s(7034),s(13564),s(52229),s(18571)),v=s(57140),g=(s(56391),s(99767),s(3259),s(30902)),_=s(73609),f=(s(12327),s(64052)),E=s(13011);const S=e=>{let a=e.isOrders,s=e.riskFreeService,S=e.dealOrderService,y=e.togglePanel,b=e.hidePanel,C=e.panel,T=e.isAdaptive,A=e.isTutorialActive,k=e.isBottomSheet,w=e.isPairLocked;const N=i.useContext(o.T),R=(0,f.L)(N),I=!(0,l.useMediaQuery)({minHeight:375})&&!R,D=i.useCallback((()=>{C!==n.r.Order&&(0,c.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"open_asset/to_order",eventLabel:"".concat(S.inputs.pairId,"_on_ftt_").concat("demo"===s.inputs.account.type?"demo":"real_current_account")}),y(n.r.Order)}),[y,s,S,C]),O=i.useCallback((()=>{y(n.r.RiskFree)}),[y]),L=i.useCallback((()=>{b(n.r.RiskFree)}),[b]);return i.createElement(r.Qj,null,(()=>{const e=a,r=s.isAvailable,o=S.isOrder,l=s.isActivated,c=e&&!l||w,f=r&&!o&&!w,y=Boolean(f||T),M=Boolean(e&&!l||T),P=C===n.r.RiskFree,x=C===n.r.Order,F=I||N||f&&!R;return i.createElement(i.Fragment,null,k?i.createElement(v.k,{dealOrderService:S,opened:x,toggleOrderForm:D}):i.createElement(d.l,{inState:x,className:A?"deal-form-animbox_is-tutorial":""},i.createElement(u.M,{hidePanel:b,panel:n.r.Order,excludeSelectors:[".".concat(m.R," *")]},i.createElement(h.L,{position:T?"top":"left",toggleOrderForm:D,dealOrderService:S}))),i.createElement(d.l,{inState:P},i.createElement(u.M,{hidePanel:b,panel:n.r.RiskFree},i.createElement(_.A,{hidePanel:L,position:T?"top":"left",riskFreeService:s}))),i.createElement(E.O,{isOrderButton:c,isRiskFreeButton:f,renderRiskFreeButton:i.createElement(g.E,{isDisabled:S.isOrder,isMinified:M,isThin:!R,isPushed:P,togglePanel:O,riskFreeService:s}),renderOrderButton:i.createElement(p.F,{dealOrderService:S,isMinified:y,isThin:F,isPushed:x,toggleOrderForm:D})}))}))}},88821:(e,a,s)=>{"use strict";s.d(a,{c:()=>l});var i=s(49491),r=s(27378),n=s(44495);const o=(0,n.animated)((e=>{let a=e.percent;return r.createElement(r.Fragment,null,Math.floor(a))})),l=e=>{let a=e.value;return r.createElement(n.Spring,{to:{percent:a},config:i(i({},n.config.gentle),{},{duration:700})},(e=>r.createElement(r.Fragment,null,r.createElement(o,{percent:e.percent}),"%")))}},98684:(e,a,s)=>{"use strict";s.d(a,{_:()=>p});var i=s(49491),r=s(2243),n=s(27378),o=s(60042),l=s(34133),c=s(45797),d=s(95029),u=s(64424);const m=n.forwardRef(((e,a)=>{let s=e.label,i=e.value,r=e.selected,l=e.onClick;const c=n.useCallback((()=>{l(i)}),[i,l]);return n.createElement("div",{ref:a,className:o(u.Z.chip,{[u.Z.chip_selected]:r}),onClick:c,"data-test":"sheet-chip"},s)}));function p(e){let a=e.options,s=e.onChange,o=e.selected;const p=n.useState(0),h=r(p,2),v=h[0],g=h[1],_=n.useState({container:0,content:0}),f=r(_,2),E=f[0],S=f[1],y=(0,l.N)(c.NW.localeSrc),b=n.useRef(null),C=n.useRef(null),T=n.useRef(null);n.useEffect((()=>{const e=C.current,a=T.current;let s=0;if(e&&a){const i=e.getBoundingClientRect().width,r=a.getBoundingClientRect().width;E.container!==i||E.content!==r?S({container:i,content:r}):v<3&&E.content===r&&(s=window.setTimeout((()=>{g(v+1)}),50))}return()=>{clearTimeout(s)}}),[E,v]);const A=n.useCallback((()=>{g(v+1)}),[g,v]);return n.useEffect((()=>(window.addEventListener("orientationchange",A),()=>{window.removeEventListener("orientationchange",A)})),[]),(0,d.Dp)(!1,b,C,T,o,16,12,y),n.createElement("div",{className:u.Z.host,"data-test":"sheet-chips"},n.createElement("div",{className:u.Z.container,ref:C},n.createElement("div",{className:u.Z.content,ref:T},a.map((e=>n.createElement(m,i({key:e.value||0,ref:e.value===o?b:null,onClick:s,selected:e.value===o},e)))))))}m.displayName="@plf/deal-form(components)(SheetChip)",p.displayName="@plf/deal-form(components)(SheetChips)"},64424:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_39C6z19SgmtC",container:"g6x6qqdW2JY9",content:"_3O010iKaUw2W",chip:"_1XwTApUc97Ez",chip_selected:"wi-8KCIQUSKg"}},76274:(e,a,s)=>{"use strict";s.d(a,{V:()=>p});var i=s(49491),r=s(14936),n=s(27378),o=s(17302),l=s(18985),c=s(82844),d=s(40982);const u=["signal","serverTime","onClose","setContentRef","basePlacement"],m=(0,l.vU)({relevance:{id:"trading_signals_signal_relevance",defaultMessage:"Signal relevance"},up:{id:"trading_signals_popup_up_description",defaultMessage:"Enter the amount and open an UP trade"},down:{id:"trading_signals_popup_down_description",defaultMessage:"Enter the amount and open a DOWN trade"},cancel:{id:"cancel",defaultMessage:"Cancel"}}),p=e=>{let a=e.signal,s=e.serverTime,l=e.onClose,p=e.setContentRef,h=e.basePlacement,v=r(e,u);if(!s&&!a)return null;const g=a.advice,_=a.actualUntil;return n.createElement(o._v,i({placement:h,padding:"small",withLimitWidth:!1,ref:p},v),n.createElement("div",{className:d.Z.host},n.createElement("div",{className:d.Z.header},n.createElement(c._,i({className:d.Z.relevance},m.relevance)),n.createElement(o.Wo,{serverTime:s||0,startTime:_||0,className:d.Z.count,timeFormat:"m:s"})),n.createElement(c._,i({className:d.Z.advice},m[g])),n.createElement(o.rU,{onClick:l},n.createElement(c._,i({},m.cancel)))))}},40982:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3QSbZ8_fqSC5",header:"_2gCirrPywC-T",relevance:"_3Eoaa_ZzUo9i",count:"_2BF3DOdhJZ2y",advice:"_37ovIMjBCjP1"}},31074:(e,a,s)=>{"use strict";s.d(a,{j:()=>m});var i=s(49491),r=s(14936),n=s(2243),o=s(27378),l=s(17302),c=s(76274),d=s(50158);const u=["basePlacement"],m=o.memo((e=>{let a=e.anchorEl,s=e.signal,m=e.serverTime,p=e.placement,h=void 0===p?"left":p,v=e.onClose;const g=o.useState(!1),_=n(g,2),f=_[0],E=_[1],S=o.useState(null),y=n(S,2),b=y[0],C=y[1],T=o.useMemo((()=>"left"===h?0:90),[h]);o.useEffect((()=>{s&&a&&E(!0)}),[s,a]);const A=o.useCallback((()=>{E(!1),v&&v()}),[E,v]);return(0,l.O3)(b,A),s?o.createElement(l.rD,{anchorEl:a,open:f,disablePortal:!1,distance:T,fitSizeTo:"content",placement:h,arrow:"left"===h,className:d.Z.host},(e=>{let a=e.basePlacement,n=r(e,u);return o.createElement(c.V,i({signal:s,serverTime:m,onClose:A,setContentRef:C,basePlacement:a},n))})):null}))},50158:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"EqsPYl05h0kT"}},1e4:(e,a,s)=>{"use strict";s.d(a,{g:()=>o});var i=s(27378),r=s(60042),n=s(65870);const o=e=>{let a=e.children,s=e.position,o=e.color,l=void 0===o?"default":o,c=e.className,d=e.isThin;return i.createElement("div",{className:r(n.Z.host,c,{[n.Z.host_thin]:d,[n.Z.host_bg_alpha]:"alpha"===l}),"data-test":"switch-button"},i.createElement("div",{className:r(n.Z.content,"top"===s?n.Z.content_top:n.Z.content_bottom)},a))}},65870:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2bHOhpCTK4I7",host_thin:"_3U8tB0rZmXz2",host_bg_alpha:"_3IA18c0C_44R",content:"_1tUmLuAx3o2x",content_top:"_2dDeBX_qHMIb",content_bottom:"_3UZGoeBRrWBy"}},50068:(e,a,s)=>{"use strict";s.d(a,{M:()=>_});var i=s(49491),r=s(2243),n=s(14936),o=s(60042),l=s(27378),c=s(25935),d=(s(68516),s(17435),s(30362),s(17302)),u=s(18985),m=s(95029),p=s(90650);const h=["is24Format","inputTimeStamp","onChange","colon","serverTimeStamp","onFocusToggle","hideDate","dateConfig","endIcon","classNameContainer","readOnly","labelOnTop","onClick"],v=(e,a)=>{const s=864e5;return e<=a?e+s:e-s>a?e-s:e},g=(e,a,s,i)=>{const r=a.split(i).map(Number);let n=r[0];const o=r[1],l=new Date(e);return 12===n&&s===p.u.AM?n=0:12!==n&&s===p.u.PM&&(n+=12),l.setHours(n,o,0)},_=e=>{const a=e.is24Format,s=void 0===a||a,_=e.inputTimeStamp,f=e.onChange,E=e.colon,S=void 0===E?":":E,y=e.serverTimeStamp,b=e.onFocusToggle,C=e.hideDate,T=void 0!==C&&C,A=e.dateConfig,k=void 0===A?{month:"2-digit",day:"2-digit"}:A,w=e.endIcon,N=e.classNameContainer,R=e.readOnly,I=void 0!==R&&R,D=e.labelOnTop,O=void 0===D||D,L=e.onClick,M=n(e,h),P=(0,c.y)(_,s,S),x=r(P,2),F=x[0],B=x[1],Z=l.useState(B),U=r(Z,2),H=U[0],G=U[1],V=l.useState(F),W=r(V,2),j=W[0],z=W[1],q=e=>{G(e),f(v(g(y,j,e,S),y))},K=()=>{b&&b(!0)},Y=()=>{b&&b(!1)};return l.useEffect((()=>{z(F),G(B)}),[F,B]),l.createElement("div",{className:o("time-input",N)},l.createElement(m.Rf,{is24Format:s,value:j,colon:S,onChange:e=>{z(e),f(v(g(y,e,H,S),y))}},(e=>{let a=e.value,s=e.onChange;return l.createElement(d.nv,i(i({},M),{},{inputProps:{readOnly:I,onClick:L,"data-test":M["data-test"]},value:a,onChange:s,onFocus:K,onBlur:Y,labelOnTop:O,endIcon:w||H&&l.createElement(p.g,{sign:H,onClick:q})}))})),T?null:l.createElement("div",{className:"time-input__date"},l.createElement(u.Ji,i({value:new Date(_)},k))))}},87188:(e,a,s)=>{"use strict";s.d(a,{T:()=>i});const i=s(27378).createContext(!1)},68537:(e,a,s)=>{"use strict";s.d(a,{H:()=>_});var i=s(49491),r=s(27378),n=s(60042),o=s(37488),l=s(17302),c=s(66257),d=s(87601),u=s(95029),m=s(95084),p=s(5069),h=s(64052),v=s(46326),g=(s(1712),s(22252),s(78624));const _=e=>{let a=e.accountType,s=e.error,_=e.isValid,f=e.value,E=e.currency,S=e.locale,y=e.startIcon,b=e.endIcon,C=e.setAmount,T=e.allowDeposit,A=e.openRechargeTooltip,k=e.refillDemoBalance,w=e.isButton,N=e.isMultiChart,R=e.isAccent,I=void 0!==R&&R,D=e.onClick,O=e.onFocus;const L=r.useCallback((()=>{a===c.Q.DEMO?k():A()}),[a,k,A]),M=(0,h.L)(N),P=(0,r.useMemo)((()=>{const e=w?r.createElement(p.d,{onClick:D}):void 0;return M?e:w?r.createElement(r.Fragment,null,e,b):b}),[b,w,M,D]),x=!(0,o.useMediaQuery)({maxWidth:d.j$.BREAKPOINT_768,orientation:"portrait"})&&a===c.Q.REAL&&(null==s?void 0:s.type)===g.L.NOT_ENOUGH_MONEY;return r.createElement(r.Fragment,null,r.createElement(v._,{config:{style:M?"decimal":"currency",currency:M?void 0:E},accountType:a,className:"input-with-step",currency:E,isTooltipShown:!_&&!x,value:f,error:s,isValid:_,locale:S,allowDeposit:T,setValue:C,onFocus:O,onDeposit:L},((e,a)=>r.createElement(l.nv,i(i({size:M?void 0:"xsmall",labelOnTop:!0,inputProps:{placeholder:M?"0":(0,u.xG)(0,{currency:E}),readOnly:w,onClick:w?void 0:D,"data-test":"deal-amount-input"}},e),{},{error:a,hideMeta:!0,className:"input-with-step__input",classNameContent:n("input-with-step__content",{"input-with-step__content_accent":I}),classNameInput:"input-with-step__input-base",classNameInputWrapper:n("input-with-step__input-wrapper",{"input-with-step__input-wrapper_button":w}),label:M?r.createElement(m.T,{currency:E}):void 0,startIcon:M?null:y,endIcon:P})))))}},39755:(e,a,s)=>{"use strict";s.d(a,{H:()=>u});var i=s(27378),r=s(37488),n=s(73598),o=s(87601),l=s(26567),c=s(75669),d=s(68537);const u=e=>{let a=e.boDealAttributesService,s=e.amountService,u=e.riskFreeService,m=e.isMultiChart,p=e.onFocus,h=e.isFocus;const v=(0,r.useMediaQuery)({minWidth:o.j$.BREAKPOINT_961}),g=i.useCallback((()=>{a.inputs.isBottomSheet&&a.inputs.openDealFormSheet("boAmount")}),[a.inputs]);return i.createElement(n.Qj,null,(()=>{const e=s.isErrorsVisible;return i.createElement(i.Fragment,null,i.createElement(d.H,{accountType:s.inputs.account.type,error:e?s.errors.amount:null,isValid:!e||s.isValidAmount,value:s.amount,currency:s.inputs.currency,locale:s.inputs.locale,allowDeposit:s.allowDeposit,setAmount:s.setAmount,openRechargeTooltip:s.inputs.openRechargeTooltip,refillDemoBalance:s.inputs.refillDemoBalance,isButton:a.inputs.isBottomSheet,isAccent:u.isActivated,isMultiChart:m,startIcon:i.createElement(c.P,{isMartinGale:s.inputs.isMartinGale,disabled:s.decreaseDisabled,dir:"decrease",onClick:s.decreaseDealAmount}),endIcon:i.createElement(c.P,{isMartinGale:s.inputs.isMartinGale,disabled:s.increaseDisabled,dir:"increase",onClick:s.increaseDealAmount}),onFocus:p,isFocus:h,onClick:g}),!m&&v?i.createElement(l._,{isMartinGale:s.inputs.isMartinGale,increaseDisabled:s.increaseDisabled,decreaseDisabled:s.decreaseDisabled,increaseValue:s.increaseDealAmount,decreaseValue:s.decreaseDealAmount}):null)}))}},60551:(e,a,s)=>{"use strict";s.d(a,{x:()=>d});var i=s(27378),r=s(25935),n=(s(68516),s(17435),s(30362),s(37488)),o=s(87601),l=s(82844),c=s(17302);const d=e=>{let a=e.time,s=e.is24Format,d=e.onClick;const u=(0,n.useMediaQuery)({maxWidth:o.j$.BREAKPOINT_768});return i.createElement(c.Xd,{className:"deal-form-new-time-button",onClick:d},i.createElement(l._,{id:"new_time",defaultMessage:"New time{br}{time}",values:{br:u?" ":i.createElement("br",null),time:i.createElement(i.Fragment,null,(0,r.y)(1e3*a,s))}}))}},46313:(e,a,s)=>{"use strict";s.d(a,{M:()=>C,Q:()=>w});var i=s(47014),r=s(2243),n=s(27378),o=s(73598),l=s(37488),c=s(84584),d=s(21182),u=s(68516),m=(s(17435),s(30362),s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),p=(s(8280),s(77740)),h=s(87601),v=s(99318),g=s(18985),_=s(82844),f=s(95029),E=s(22085),S=(s(60042),s(4622)),y=(s(17302),s(41023),s(88821),s(31074)),b=s(60551);const C=(0,c.Z)({id:"beforeButtonsBoSlot"}),T=(0,d.W)(C);function A(e,a){return e?a:null}function k(e){let a=e.value;return a?n.createElement(n.Fragment,null,"+".concat(a,"%")):null}const w=e=>{let a=e.dealOrderService,s=e.boCreateOrderService,c=e.boOpenDealService,d=e.panelService,C=e.boDealAttributesService,w=e.timePickerService,N=e.dealTimeService,R=e.riskFreeService,I=e.selectedSignal,D=e.onCloseSignalsTooltip,O=e.children,L=e.inline,M=e.isOrders,P=e.dealFormBootstrapService;const x=a.inputs.serverTimeStamp,F=(0,l.useMediaQuery)({maxWidth:h.j$.BREAKPOINT_369}),B=(0,S.W)(),Z=n.useState(),U=r(Z,2),H=U[0],G=U[1],V=n.useState(null),W=r(V,2),j=W[0],z=W[1],q=n.useState(null),K=r(q,2),Y=K[0],X=K[1],J=n.useState(null),Q=r(J,2),$=Q[0],ee=Q[1];n.useEffect((()=>{if(!I)return;const e=I.advice;L&&$?G($):"up"===e&&j?G(j):"down"===e&&Y&&G(Y)}),[I,L,j,Y,$]);const te=n.useCallback(i((function*(){s.isOpening||c.isOpening||(a.isOrder?s.createOrder("up"):((d.isPanelVisible(m.r.OneClick)||d.isPanelVisible(m.r.HoldUse))&&(yield d.hidePanelAsync()),c.startDeal("up")))})),[d,s,c,a.isOrder]),ae=n.useCallback(i((function*(){s.isOpening||c.isOpening||(a.isOrder?s.createOrder("down"):((d.isPanelVisible(m.r.OneClick)||d.isPanelVisible(m.r.HoldUse))&&(yield d.hidePanelAsync()),c.startDeal("down")))})),[d,s,c,a.isOrder]),se=n.useCallback((()=>{N.setTimeClose(N.timeCloseLimits.min)}),[N]);return n.createElement(o.Qj,null,(()=>{const e=a.currentOrder,i=C.inputs.selectedStrike,r=i.winpercDown,o=i.winpercUp,l=0!==i.id||B;let d;const m=R.isActivated,h=M,S=R.isAvailable,Z=a.isOrder,U=R.isActivated,G=h&&!U,V=S&&!Z,W=Number(G)+Number(V),j=l?n.createElement(k,{value:o}):null,q=l?n.createElement(k,{value:r}):null,K=l?o:void 0,Y=l?r:void 0,J=Boolean(I&&"up"!==I.advice),Q=Boolean(I&&"down"!==I.advice);if(e&&"time"===e.type){const a=new Date(e.openTimeStamp);d=new Date(x).getDate()===a.getDate()?n.createElement(v.B,{value:a,hour12:!C.inputs.is24Format}):n.createElement(n.Fragment,null,n.createElement(v.B,{value:a,hour12:!C.inputs.is24Format}),", ",n.createElement("span",{className:"formatted-date"},n.createElement(g.Ji,{value:a,hour12:!C.inputs.is24Format,month:"2-digit",day:"2-digit"})))}else d=e?n.createElement(f.l1,{style:"decimal",value:e.openQuote,minimumFractionDigits:C.inputs.pair.precision||6,maximumFractionDigits:C.inputs.pair.precision||6,"data-test":"deal-button-order-quote"}):null;const ie="time"===w.pickerType&&N.error===u.Tr.timeCloseLessThenMin,re=P.inputs.hasFastDurationDeal&&P.inputs.fastDealsNumberRestriction&&"fastDuration"===w.pickerType;return ie?n.createElement(b.x,{time:N.timeCloseLimits.min,is24Format:C.inputs.is24Format,onClick:se}):n.createElement(n.Fragment,null,n.createElement(y.j,{signal:I,anchorEl:H,serverTime:N.inputs.serverTime,placement:L?"top":"left",onClose:D}),n.createElement(T,{props:{buttonContainerRef:$}}),n.createElement(E.u,{className:"deal-buttons_count-".concat(W),inline:L,minimized:G&&V&&F,customIcon:A(a.isOrder,n.createElement(p.bpu,null))||A(m,n.createElement(p.rF,null)),isLoading:a.isOrder?s.isOpening:c.isOpening,subTitleUp:d||j,subTitleDown:d||q,winPercentUp:K,winPercentDown:Y,titleUp:n.createElement(_._,{id:"deals_upper",defaultMessage:"Up"}),titleDown:n.createElement(_._,{id:"deals_lower",defaultMessage:"Down"}),isDisabledUp:C.inputs.disabledControls.buttonUp||re,isDisabledDown:C.inputs.disabledControls.buttonDown||re,isMutedUp:J,isMutedDown:Q,animationType:d?"order":"winperc",onClickUp:te,onClickDown:ae,setButtonUpRef:z,setButtonDownRef:X,ref:ee},O))}))}},7391:(e,a,s)=>{"use strict";s.d(a,{l:()=>o});var i=s(27378),r=s(73598),n=s(48945);const o=e=>{let a=e.boOpenDealService,s=e.position,o=e.onCancel;const l=i.useCallback((()=>a.startDeal(a.dir,!1,!0)),[a]);return i.createElement(r.Qj,null,(()=>i.createElement(n.s,{position:s,onAccept:a.acceptHoldUse,onApply:l,onCancel:o})))}},19883:(e,a,s)=>{"use strict";s.d(a,{v:()=>v});var i=s(2243),r=s(27378),n=s(73598),o=s(60042),l=s(37488),c=s(25935),d=(s(68516),s(17435),s(30362),s(82844)),u=s(87601),m=s(95029),p=s(56856),h=s(61331);const v=r.memo((e=>{let a=e.amount,s=e.winperc,v=e.lastRate,g=e.isOneClick,_=e.dir,f=e.currency,E=e.position,S=e.pairPrecision,y=e.profit,b=e.pickerType,C=e.duration,T=e.timeClose,A=e.is24Format,k=e.onCancel,w=e.onAccept,N=e.onApply;const R=(0,l.useMediaQuery)({minWidth:u.j$.BREAKPOINT_540})&&!E,I=(0,c.y)(1e3*T,A),D=i(I,2),O=D[0],L=D[1],M=C>=60?(0,m.yC)(C,"d h m"):r.createElement(r.Fragment,null,C," ",r.createElement(d._,{id:"sec",defaultMessage:"sec."})),P=r.createElement(n.Qj,null,(()=>r.createElement(m.l1,{"data-test":"up"===_?"ftt-deal-confirm-higher-than-quote":"ftt-deal-confirm-lower-than-quote",value:v(),style:"decimal",maximumFractionDigits:S,minimumFractionDigits:S})));return r.createElement(p.A,{className:h.Z.host,dataTest:"bo-one-click-panel",position:E,isOneClick:g,onCancel:k,onAccept:w,onApply:N},r.createElement(p.A.Content,null,r.createElement(m.nN,{"data-test":"ftt-deal-confirm-amount",data:r.createElement(d._,{id:"deal_confirm_field_amount",defaultMessage:"Trade Amount"}),value:r.createElement(m.ih,{className:o(h.Z.bold,h.Z.hightlighted),currency:f,minimumFractionDigits:2,value:a})}),r.createElement(m.nN,{"data-test":"ftt-deal-confirm-profitability",data:r.createElement(d._,{id:"deal_confirm_field_profitability",defaultMessage:"Profitability"}),value:r.createElement(m.p7,{value:s})}),r.createElement(m.nN,{"data-test":"ftt-deal-confirm-time",data:r.createElement(d._,{id:"deal_confirm_field_time",defaultMessage:"Time"}),value:r.createElement(r.Fragment,null,"time"===b?r.createElement(d._,{id:"deal_confirm_field_time_expiration",defaultMessage:"by {time}",values:{time:r.createElement(r.Fragment,null,O," ",L)}}):r.createElement(r.Fragment,null,M))}),r.createElement(m.nN,{"data-test":"ftt-deal-confirm-direction",data:r.createElement(d._,{id:"deal_confirm_field_direction",defaultMessage:"Direction"}),value:r.createElement(m.oI,{value:"up"===_?1:-1},r.createElement("span",{className:o(h.Z.capitalized,h.Z.bold)},"up"===_?r.createElement(d._,{id:"deals_upper",defaultMessage:"Up"}):r.createElement(d._,{id:"deals_lower",defaultMessage:"Down"})))})),r.createElement(p.A.Content,null,r.createElement(r.Fragment,null,r.createElement(d._,{className:h.Z.text,id:"deal_confirm_description_profit",defaultMessage:"The profit will amount to {value}",values:{value:r.createElement(m.oI,{value:y},r.createElement(m.ih,{className:h.Z.bold,isSign:!0,currency:f,value:y}))}}),R?" ":r.createElement("br",null),"time"===b?r.createElement(r.Fragment,null,"up"===_?r.createElement(d._,{className:h.Z.text,id:"deal_confirm_time_result_up",defaultMessage:"if by {time} the price quote is above {rate}",values:{time:r.createElement(r.Fragment,null,O," ",L),rate:P}}):r.createElement(d._,{className:h.Z.text,id:"deal_confirm_time_result_down",defaultMessage:"if by {time} the price quote is below {rate}",values:{time:r.createElement(r.Fragment,null,O," ",L),rate:P}})):r.createElement(r.Fragment,null,"up"===_?r.createElement(d._,{className:h.Z.text,id:"deal_confirm_duration_result_up",defaultMessage:"if after {duration} the price quote is above {rate}",values:{duration:M,rate:P}}):r.createElement(d._,{className:h.Z.text,id:"deal_confirm_duration_result_down",defaultMessage:"if after {duration} the price quote is below {rate}",values:{duration:M,rate:P}})))))}),((e,a)=>!!a.position&&(e.amount!==a.amount||e.duration!==a.duration||e.dir!==a.dir)));v.displayName="BoOneClickPanel"},61331:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3HeemhGXu36f",bold:"_1LAgNCFLyHy6",hightlighted:"gIP_UXYj75t4",capitalized:"_1ZBH9p6ztKjO",text:"_3F0_MdwhHx79"}},63819:(e,a,s)=>{"use strict";s.d(a,{B:()=>o});var i=s(27378),r=s(50649),n=s(19883);const o=(0,r.observer)((e=>{let a=e.boOpenDealService,s=e.boDealAttributesService,r=e.timePickerService,o=e.dealTimeService,l=e.dealDurationService,c=e.amountService,d=e.onCancel,u=e.position;const m=s.inputs.selectedStrike,p=m.winpercUp,h=m.winpercDown,v=m.delta,g="up"===a.dir?p:h,_=c.amount+c.amount/100*g-c.amount;return i.createElement(n.v,{amount:c.amount,position:u,profit:_,winperc:g,lastRate:()=>s.inputs.currentQuote+v,isOneClick:a.inputs.isOneClick,dir:a.dir,currency:s.inputs.currency,is24Format:s.inputs.is24Format,pickerType:r.pickerType,pairPrecision:s.inputs.pair.precision,duration:l.duration,timeClose:o.timeClose,onCancel:d,onApply:()=>{a.startDeal(a.dir,!0,!1)},onAccept:a.acceptOneClick})}))},72985:(e,a,s)=>{"use strict";s.d(a,{t:()=>n});var i=s(27378),r=s(89727);const n=e=>{let a=e.defaultPair,s=e.isLoading,n=e.NoExplorerAsset,o=e.ExplorerAsset,l=e.onClick;return s?i.createElement(r.a,null):a?i.createElement(o,{id:a.id,project:a.project,title:a.title,onClick:l}):i.createElement(n,null)}},61054:(e,a,s)=>{"use strict";s.d(a,{G:()=>d});var i=s(27378),r=s(73598),n=s(11590),o=s(96969),l=s(17716),c=s(13435);const d=e=>{let a=e.selectedPair,s=a.locked,d=a.lockedReason,u=a.lockedTrading,m=a.lockedTradingReason,p=a.timeOpenTrading,h=e.serverTime;return s&&"schedule"===d?i.createElement(o.E,{time:p}):s?i.createElement(c.g,null):u&&"schedule"===m&&!s?i.createElement(r.Qj,null,(()=>i.createElement(l.S,{serverTime:h(),timeOpen:p}))):i.createElement(n.Ar,null,i.createElement(c.g,null))};d.displayName="CloseReason"},11590:(e,a,s)=>{"use strict";s.d(a,{Ar:()=>c,B7:()=>u,Dx:()=>m,T0:()=>h,_v:()=>p,qp:()=>d});var i=s(14936),r=s(27378),n=s(77740),o=s(56073);const l=["children"],c=e=>{let a=e.children;return r.createElement("div",{className:o.Z.host},a)};c.displayName="(CloseReason)Layout";const d=e=>{let a=e.children;return r.createElement("span",{className:o.Z.timeWrapper},a)};d.displayName="(CloseReason)Time";const u=e=>{let a=e.children;return r.createElement("span",{className:o.Z.timer},a)};u.displayName="(CloseReason)Timer";const m=e=>{let a=e.children,s=i(e,l);return r.createElement("div",{className:o.Z.title,"data-test":s["data-test"]}," ",a)};m.displayName="(CloseReason)Title";const p=e=>{let a=e.children;return r.createElement("span",{className:o.Z.tooltipContent},a)};p.displayName="(CloseReason)TooltipContent";const h=()=>r.createElement(n.T08,{className:o.Z.icon});h.displayName="(CloseReason)IconHelp"},56073:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"aCErJIzouY_J",title:"_2r1oNpbgSNEj",icon:"l69CphVIBEsl",tooltipContent:"_1DisetF9JyYE",timer:"_1jD__qNqdx-d",timeWrapper:"ba2FodsIu7Hv"}},96969:(e,a,s)=>{"use strict";s.d(a,{E:()=>v});var i=s(49491),r=s(14936),n=s(27378),o=s(17302),l=s(37488),c=s(82844),d=s(18985),u=s(87601),m=s(86141),p=s(11590);const h=["ref"],v=e=>{let a=e.time;const s=n.useCallback((()=>new Date(1e3*a)),[a])(),v=(0,l.useMediaQuery)({maxWidth:u.j$.BREAKPOINT_768,orientation:"portrait"});return n.createElement(p.Dx,{"data-test":"deal-form-closed-asset-schedule-stub"},n.createElement(c._,{id:"trade_stub_locked_asset_title",defaultMessage:"Trading is closed until {date}",values:{date:n.createElement(n.Fragment,null,n.createElement(d.Ji,{value:new Date(s),month:"2-digit",day:"2-digit"})," ",n.createElement(p.qp,null,n.createElement(d.Ji,{value:new Date(s),minute:"numeric",hour:"numeric",hour12:!1}),n.createElement(o.u,{placement:v?"top-end":"left",content:n.createElement(p._v,null,n.createElement(c._,{id:"trade_stub_asset_open_tooltip",defaultMessage:"Trading session for this asset is closed now. The asset is unavailable until {date}",values:{date:n.createElement(m.z,{date:a})}})),arrow:!0,transition:!0,delay:100,disablePortal:!0,interactive:!1,triggerOnHover:!0,triggerOnTap:!0},(e=>{let a=e.ref,s=r(e,h);return n.createElement(n.Fragment,null,n.createElement("span",i(i({ref:a},s),{},{"data-test":"deal-form-stub-asset-help-tooltip"}),n.createElement(p.T0,null)))}))))}}))};v.displayName="TradeClosedByAssetSchedule"},13435:(e,a,s)=>{"use strict";s.d(a,{g:()=>o});var i=s(27378),r=s(82844),n=s(11590);const o=()=>i.createElement(n.Dx,{"data-test":"deal-form-closed-tech-reason-stub"},i.createElement(r._,{id:"trade_stub_closed_by_techreason_title",defaultMessage:"Trading is currently unavailable."}));o.displayName="TradeClosedByTechnicalReason"},17716:(e,a,s)=>{"use strict";s.d(a,{S:()=>l});var i=s(27378),r=s(82844),n=s(93212),o=s(11590);const l=e=>{let a=e.serverTime,s=e.timeOpen;return i.createElement(o.Dx,{"data-test":"deal-form-closed-trade-schedule-stub"},i.createElement(r._,{id:"trade_stub_locked_trading_title",defaultMessage:"Trading will open in {time}",values:{time:i.createElement(o.B7,null,i.createElement(n.S,{time:s,serverTime:a})," ")}}))};l.displayName="TradeClosedByTradeSchedule"},54698:(e,a,s)=>{"use strict";s.d(a,{v:()=>r});s(61054);var i=s(11590);const r={Layout:i.Ar,Title:i.Dx,Timer:i.B7,Time:i.qp,IconHelp:i.T0,TooltipContent:i._v}},92513:(e,a,s)=>{"use strict";s.d(a,{b:()=>d});var i=s(27378),r=s(26299);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.closeReason},a)};n.displayName="DealFormStub.CloseReason";const o=e=>{let a=e.children;return i.createElement("div",{className:r.Z.orderButton},a)};o.displayName="DealFormStub.Order";const l=e=>{let a=e.children;return i.createElement("div",{className:r.Z.defaultAsset},a)};l.displayName="DealFormStub.DefaultAsset";const c=()=>i.createElement("div",{className:r.Z.gradientLine});c.displayName="DealFormStub.GradientLine";const d=e=>{let a=e.children;return i.createElement("div",{className:r.Z.host,"data-test":"deal-form-stub"},a)};d.CloseReason=n,d.Order=o,d.DefaultAsset=l,d.GradientLine=c,d.displayName="DealFormStub"},26299:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1DFcx0IWaJ5Y",closeReason:"_2A52fHYvOW5r",orderButton:"_2_ndv-3zYQLu",defaultAsset:"_1hKCCbm_hX7d",gradientLine:"_1IhwsPGEIvDg"}},96941:(e,a,s)=>{"use strict";s.d(a,{WJ:()=>o,YU:()=>c,t5:()=>l});var i=s(27378),r=s(82844),n=s(59631);const o=e=>{let a=e.children,s=e.onClick;return i.createElement("a",{"data-test":"deal-form-stub-asset-action",className:n.Z.link,href:"javascript:;",onClick:s},a)},l=e=>{let a=e.id,s=e.project,n=e.title,l=e.onClick;const c=i.useCallback((()=>{a&&l(a,s)}),[a,s,l]);return i.createElement(r._,{id:"trade_stub_default_asset",defaultMessage:"You can trade the most popular open asset — {asset} or create pending order",values:{asset:i.createElement(o,{onClick:c},n)}})},c=()=>i.createElement(r._,{id:"trade_stub_closed_by_trade_schedule_subtitle",defaultMessage:"The exchange is currently not working. No asset quotes are available."})},59631:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={link:"_11PZFvnVlavE"}},89727:(e,a,s)=>{"use strict";s.d(a,{a:()=>o});var i=s(27378),r=s(17302),n=s(96906);const o=()=>i.createElement("div",{className:n.Z.host},i.createElement(r.$j,{size:"s"}))},96906:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"LhrFKLpDSttW"}},93212:(e,a,s)=>{"use strict";s.d(a,{S:()=>o});var i=s(27378),r=s(46548);function n(e){return e<10?"0".concat(e):e.toString()}const o=e=>{let a=e.serverTime;const s=e.time-a,o=(0,r.R)(s>=0?s:0),l=o.d,c=o.h,d=o.m,u=o.s;return i.createElement(i.Fragment,null,"".concat(s>86400?"".concat(n(l),":"):"").concat(n(c),":").concat(n(d),":").concat(n(u)))}},98458:(e,a,s)=>{"use strict";s.d(a,{t:()=>m});var i=s(27378),r=s(73598),n=s(23735),o=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943),s(8280),s(17302),s(95029),s(60042),s(77740),s(17016),s(79472),s(1094),s(27588),s(92657),s(7034),s(13564),s(52229),s(18571),s(57140),s(56391),s(99767),s(3259),s(37488),s(34799)),l=s(92513),c=s(61054),d=(s(11590),s(72985)),u=s(96941);const m=e=>{let a=e.dealFormBootstrapService.inputs,s=e.isTutorialActive,m=e.dealOrderService,p=e.isBottomSheet,h=e.accountType;const v=(e,s)=>{(0,n.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"closed_asset/to_asset",eventLabel:"".concat(a.selectedPair.id,"/to/").concat(e,"/ftt/to/").concat("bo"===s?"ftt":s,"/").concat("demo"===h?"demo":"real_current_account")}),a.selectPair(e,s)},g=i.useCallback((()=>a.serverTimeStamp),[a.serverTimeStamp]),_=a.selectedPair.quick;return i.createElement(r.Qj,null,(()=>{const e=!a.defaultPair||a.defaultPair.locked||a.defaultPair.lockedTrading?{id:a.defaultActivePair.id,title:a.defaultActivePair.title,project:"bo"}:a.defaultPair;return i.createElement(l.b,null,i.createElement(l.b.GradientLine,null),i.createElement(l.b.CloseReason,null,i.createElement(c.G,{selectedPair:{timeOpen:a.selectedPair.timeOpen,timeOpenTrading:a.selectedPair.timeOpenTrading,locked:a.selectedPair.locked,lockedTrading:a.selectedPair.lockedTrading,lockedReason:a.selectedPair.lockedReason,lockedTradingReason:a.selectedPair.lockedTradingReason,title:a.selectedPair.title},serverTime:g})),i.createElement(l.b.DefaultAsset,null,i.createElement(d.t,{defaultPair:e,isLoading:!a.recommendedAssets,ExplorerAsset:u.t5,NoExplorerAsset:u.YU,onClick:v})),_?i.createElement(i.Fragment,null):i.createElement(l.b.Order,null,i.createElement(o.O,{dealOrderService:m,isTutorialActive:s,isBottomSheet:p,analytics:{accountType:h,fromPairId:a.selectedPair.id,toPairId:a.defaultPair?a.defaultPair.id:""}})))}))}},83898:(e,a,s)=>{"use strict";s.d(a,{J:()=>u});var i=s(27378),r=s(73598),n=s(23735),o=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943),s(8280),s(17302),s(95029),s(60042),s(77740),s(17016),s(79472),s(1094),s(27588),s(92657),s(7034),s(13564),s(52229),s(18571),s(57140),s(56391),s(99767),s(3259),s(30675)),l=(s(37488),s(92513)),c=s(72017),d=s(13989);const u=e=>{let a=e.dealFormBootstrapService.inputs,s=e.isTutorialActive,u=e.dealOrderService,m=e.isBottomSheet,p=e.accountType;const h=(e,s)=>{(0,n.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"closed_asset/to_asset",eventLabel:"".concat(a.selectedPair.id,"/to/").concat(e,"/fx/to/").concat("bo"===s?"ftt":s,"/").concat("demo"===p?"demo":"real_current_account")}),a.selectPair(e,s)},v=i.useCallback((()=>a.serverTimeStamp),[a.serverTimeStamp]);return i.createElement(r.Qj,null,(()=>{const e=!a.defaultPair||a.defaultPair.locked||a.defaultPair.lockedTrading?{id:a.defaultActivePair.id,title:a.defaultActivePair.title,project:"fx"}:a.defaultPair;return i.createElement(l.b,null,i.createElement(l.b.GradientLine,null),i.createElement(l.b.CloseReason,null,i.createElement(c.G,{selectedPair:{timeOpen:a.selectedPair.timeOpen,timeOpenTrading:a.selectedPair.timeOpenTrading,locked:a.selectedPair.locked,lockedTrading:a.selectedPair.lockedTrading,lockedReason:a.selectedPair.lockedReason,lockedTradingReason:a.selectedPair.lockedTradingReason,title:a.selectedPair.title},serverTime:v,lockedBuy:a.selectedPair.lockedBuy&&a.selectedPair.lockedSell})),i.createElement(l.b.DefaultAsset,null,i.createElement(d.t,{defaultPair:e,isLoading:!a.recommendedAssets,onClick:h,lockedBuy:a.selectedPair.lockedBuy&&a.selectedPair.lockedSell})),a.selectedPair.lockedBuy?null:i.createElement(l.b.Order,null,i.createElement(o.H,{dealOrderService:u,isTutorialActive:s,isBottomSheet:m,analytics:{accountType:p,fromPairId:a.selectedPair.id,toPairId:a.defaultPair?a.defaultPair.id:""}})))}))}},13989:(e,a,s)=>{"use strict";s.d(a,{t:()=>c});var i=s(49491),r=s(27378),n=s(89727),o=s(96941),l=s(40320);const c=e=>{let a=e.isLoading,s=e.lockedBuy,c=e.defaultPair,d=e.onClick;return a?r.createElement(n.a,null):s&&c?r.createElement(l.h,i({onClick:d},c)):s&&!c?r.createElement(l.o,null):c?r.createElement(o.t5,i({onClick:d},c)):r.createElement(o.YU,null)}},72017:(e,a,s)=>{"use strict";s.d(a,{G:()=>o});var i=s(27378),r=s(61054),n=(s(11590),s(78761));const o=e=>{let a=e.selectedPair,s=e.serverTime;return e.lockedBuy?i.createElement(n.A,null):i.createElement(r.G,{selectedPair:a,serverTime:s})};o.displayName="(fx)CloseReason"},40320:(e,a,s)=>{"use strict";s.d(a,{h:()=>o,o:()=>l});var i=s(27378),r=s(82844),n=s(96941);const o=e=>{let a=e.id,s=e.project,o=e.title,l=e.onClick;const c=i.useCallback((()=>{a&&l(a,s)}),[a,s,l]);return i.createElement(r._,{id:"closed_trading_sell_only_suggestion_title_fx",defaultMessage:"Try another asset, such as {asset}, which you can trade on without restrictions",values:{asset:i.createElement(n.WJ,{onClick:c},o)}})},l=()=>i.createElement(r._,{id:"closed_trading_sell_only_description_fx",defaultMessage:"To trade without restrictions, choose another asset"})},78761:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var i=s(27378),r=s(82844),n=s(54698);const o=()=>i.createElement(n.v.Title,{"data-test":"deal-form-close-only-fx-stub"},i.createElement(r._,{id:"closed_trading_sell_only_title_fx",defaultMessage:"You Can Only Close Active Trades"}));o.displayName="TradeCloseOnlyFx"},62196:(e,a,s)=>{"use strict";s.d(a,{s:()=>l});var i=s(27378),r=s(77740),n=s(82844),o=s(79472);const l=e=>{let a=e.cancelOrder,s=e.className,l=e.isDisabled,c=e.isOrder,d=e.isMinified,u=e.isThin,m=e.isPushed,p=e.toggleOrderForm;return i.createElement(o.z,{className:s,dataTest:{normal:"order-form-button-open",active:"order-form-button-cancel"},handleCancel:a,endIcon:i.createElement(r.bpu,null),endIconActive:i.createElement(r.bMz,null),isActive:c,isDisabled:l,isMinified:d,isPushed:m,isMultiline:!u,isThin:u,titleContent:u?i.createElement(n._,{id:"trading_create_order_short",defaultMessage:"Order"}):i.createElement(n._,{id:"trading_create_order",defaultMessage:"Enable Orders"}),cancelContent:u?null:i.createElement(n._,{id:"trading_cancel_order",defaultMessage:"Disable Orders"}),togglePanel:p})}},77538:(e,a,s)=>{"use strict";s.d(a,{c:()=>m});var i=s(27378),r=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711)),n=(s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943),s(8280),s(17302)),o=s(82844),l=s(95029),c=s(68837),d=s(17016),u=s(46938);const m=e=>{let a=e.className,s=e.classNamePanel,m=e.onChangeOrderType,p=e.isOrder,h=e.isValid,v=e.orderType,g=e.position,_=e.pairId,f=e.quoteContent,E=e.submitOrderForm,S=e.timeContent,y=e.toggleOrderForm;i.useEffect((()=>{p&&h&&y()}),[p,h]);const b=i.useCallback((e=>{switch(e.key){case"Enter":h&&E();break;case"Escape":y()}}),[h,E,y]);return i.createElement(l.Ph,{position:g,buttonBlock:i.createElement(d.I,{isValid:!0,onClick:E}),className:s},i.createElement("div",{className:a,"data-test":"order-form",onKeyDown:b},i.createElement(c.o,{asset:_}),i.createElement("div",{className:u.Z.tabs},i.createElement(n.mQ,{selected:v,onSelect:m,dataTest:"order-form-tabs"},i.createElement(n.mQ.Item,{name:r.Km.QUOTE,label:i.createElement(o._,{id:"order_setup_type_quote",defaultMessage:"By Price"}),dataTest:"order-form-tabs-title-quote"},f),i.createElement(n.mQ.Item,{name:r.Km.TIME,label:i.createElement(o._,{id:"order_setup_type_time",defaultMessage:"By Time"}),dataTest:"order-form-tabs-title-time"},S)))))}},46938:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={tabs:"_28Fy0dFnZSUh",content:"_3pfNmed8uCGL"}},68837:(e,a,s)=>{"use strict";s.d(a,{o:()=>d});var i=s(60042),r=s(27378),n=s(77740),o=s(82844),l=s(95029),c=s(73685);const d=e=>{let a=e.className,s=e.asset,d=e.noWrap,u=void 0!==d&&d;return r.createElement("div",{className:i(c.Z.host,{[c.Z.host_no_wrap]:u},a)},r.createElement(o._,{className:i(c.Z.text,{[c.Z.text_no_wrap]:u}),id:"order_setup_title",defaultMessage:"Place an Order on {asset}",values:{asset:s},"data-test":"order-form-title"}),r.createElement(l.MZ,{content:r.createElement(o._,{id:"order_setup_description",defaultMessage:"An Order is a trade that will be opened when the parameters you set are met. If the trade is not opened within seven days, your order will be automatically canceled.","data-test":"order-form-title-tooltip-content"})},r.createElement(n.T08,{"data-test":"order-form-title-tooltip-help-icon",className:c.Z.tooltipIcon})))}},73685:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"OIqnoCTg_gR_",host_no_wrap:"p79SH4zG5nR9",text:"_2diXkjUFcE2O",text_no_wrap:"_3AaD6OC9bBTG",tooltipIcon:"_2KXiVeI9khnk"}},14907:(e,a,s)=>{"use strict";s.d(a,{g:()=>c});var i=s(27378),r=s(17302),n=s(77740),o=s(37488),l=s(82844);const c=e=>{let a=e.children,s=e.onToggleOrderForm;const c=(0,o.useMediaQuery)({maxWidth:768});return i.createElement(i.Fragment,null,a,i.createElement(r.zx,{fullWidth:!0,endIcon:i.createElement(n.bpu,null),horizontalAlign:c?"center":"start",variant:"secondary",onClick:s,dataTest:"deal-form-stub-order-button"},i.createElement(l._,{id:"trading_create_order",defaultMessage:"Setup Order"})))}},72456:(e,a,s)=>{"use strict";s.d(a,{b:()=>l});var i=s(27378),r=s(82844),n=s(95029),o=s(76694);const l=e=>{let a=e.openQuote,s=e.winperc,l=e.precision;const c=i.createElement(n.l1,{value:a,style:"decimal",maximumFractionDigits:l,minimumFractionDigits:l});return s&&s>1?i.createElement(r._,{className:o.Z.host,id:"order_setup_quote_explain_profit",defaultMessage:"Your trade will be opened if the asset price reaches {quote} and the profitability is {profitability} or higher",values:{quote:c,profitability:i.createElement(n.p7,{value:s})}}):i.createElement(r._,{className:o.Z.host,id:"order_setup_quote_explain",defaultMessage:"Your trade will be opened if the asset price reaches {quote}",values:{quote:c}})}},76694:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1pG3Kxl8f2sZ"}},17016:(e,a,s)=>{"use strict";s.d(a,{I:()=>o});var i=s(27378),r=s(82844),n=s(17302);function o(e){let a=e.isValid,s=e.onClick;return i.createElement(n.zx,{disabled:!a,dataTest:"order-form-submit",fullWidth:!0,onClick:s},i.createElement(r._,{id:"order_setup_continue",defaultMessage:"Continue"}))}o.displayName="DealOrder(OrderSubmitButton)"},28671:(e,a,s)=>{"use strict";s.d(a,{i:()=>n});var i=s(27378),r=s(17302);const n=e=>{let a=e.children;return i.createElement(r.xu,{padding:["m",0],gap:"m"},a)}},39307:(e,a,s)=>{"use strict";s.d(a,{J:()=>d});var i=s(2243),r=s(27378),n=s(25935),o=(s(68516),s(17435),s(30362),s(82844)),l=s(95029),c=s(83725);const d=e=>{let a=e.openTimeStamp,s=e.is24Format,d=void 0===s||s,u=e.colon,m=void 0===u?":":u,p=e.winperc;const h=((e,a)=>{const s=new Date(e),i=new Date(a);return s.getDate()===i.getDate()&&s.getMonth()===i.getMonth()&&s.getFullYear()===i.getFullYear()})(a,e.serverTimeStamp)?r.createElement(o._,{id:"order_setup_today",defaultMessage:"today"}):r.createElement(o._,{id:"order_setup_tomorrow",defaultMessage:"tomorrow"}),v=(0,n.y)(a,d,m),g=i(v,1)[0];return p&&p>1?r.createElement(o._,{className:c.Z.host,id:"order_setup_time_explain_profit",defaultMessage:"Your trade will be opened {day} at {time} if the profitability is {profitability} or higher",values:{day:h,time:g,profitability:r.createElement(l.p7,{value:p})}}):r.createElement(o._,{className:c.Z.host,id:"order_setup_time_explain",defaultMessage:"Your trade will be opened {day} at {time}",values:{day:h,time:g}})}},83725:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3jA1Z_LLCOYj"}},14345:(e,a,s)=>{"use strict";s.d(a,{z:()=>u});var i=s(49491),r=s(2243),n=s(27378),o=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711)),l=(s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943),s(8280),s(82844)),c=s(50068);const d=e=>{let a=e.children;return n.createElement("span",{"data-test":"order-form-input-time-error"},a)},u=e=>{let a=e.errors,s=e.is24Format,u=e.openTimeStamp,m=e.action,p=e.handleTimeChange,h=e.serverTimeStamp,v=e.validate;const g=n.useState(!1),_=r(g,2),f=_[0],E=_[1];n.useEffect((()=>{f||v()}),[h,f,v]);const S=a.get(o.iR.TIME),y=a.get(o.iR.SCHEDULE);let b=null;S?b=n.createElement(d,null,n.createElement(l._,i({},S))):y&&(b=n.createElement(d,null,n.createElement(l._,i({},y))));return n.createElement(c.M,{"data-test":"order-form-input-time",onFocus:()=>{E(!0)},onBlur:()=>{E(!1),v()},error:b,action:b?void 0:m,is24Format:s,label:n.createElement(l._,{id:"order_setup_open_time",defaultMessage:"Opening Time"}),hideDate:!0,inputTimeStamp:u,serverTimeStamp:h,onChange:p})}},1094:(e,a,s)=>{"use strict";s.d(a,{R:()=>o,x:()=>c});var i=s(27378),r=s(17302),n=s(82844);const o="order-winperc-input-select",l=[i.createElement(r.Ph.Option,{key:"1",value:"1",label:i.createElement(n._,{id:"order_setup_profit_any",defaultMessage:"Any"}),dataTest:"order-winperc-select-option"}),i.createElement(r.Ph.Option,{key:"70",value:"70",label:i.createElement(n._,{id:"order_profit_from_70",defaultMessage:"from 70%"}),dataTest:"order-winperc-select-option"}),i.createElement(r.Ph.Option,{key:"80",value:"80",label:i.createElement(n._,{id:"order_profit_from_80",defaultMessage:"from 80%"}),dataTest:"order-winperc-select-option"}),i.createElement(r.Ph.Option,{key:"90",value:"90",label:i.createElement(n._,{id:"order_profit_from_90",defaultMessage:"from 90%"}),dataTest:"order-winperc-select-option"})],c=e=>{let a=e.onChange,s=e.className,o=e.winperc;const c=i.useCallback((e=>a(Number(e))),[a]);return i.createElement("div",{className:s},i.createElement(r.Ph,{fullWidth:!0,floatingLabel:!0,placeholder:i.createElement(n._,{id:"order_setup_profit",defaultMessage:"Profitability"}),value:o.toString(),dataTest:"order-winperc-select",onChange:c},l))}},16960:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var i=s(27378),r=s(82844),n=s(98684);const o=[{value:"1",label:i.createElement(r._,{id:"order_profit_any",defaultMessage:"Any Profitability"})},{value:"70",label:i.createElement(r._,{id:"order_profit_from_70",defaultMessage:"from 70%"})},{value:"80",label:i.createElement(r._,{id:"order_profit_from_80",defaultMessage:"from 80%"})},{value:"90",label:i.createElement(r._,{id:"order_profit_from_90",defaultMessage:"from 90%"})}],l=e=>{let a=e.winperc,s=e.onChange;const r=i.useCallback((e=>{s(Number(e))}),[s]);return i.createElement(n._,{options:o,selected:String(a),onChange:r})};l.displayName="@plf/deal-form(components)(SheetOrderWinpercChips)"},54149:(e,a,s)=>{"use strict";s.d(a,{v:()=>l});var i=s(27378),r=s(82844),n=s(29879),o=s(37711);const l=e=>{let a=e.opened,s=e.orderType,l=e.quoteContent,c=e.timeContent,d=e.height,u=e.title,m=e.onChangeOrderType,p=e.toggleOrderForm;return i.createElement(n.v,{selected:s,tabs:{[o.Km.QUOTE]:{title:i.createElement(r._,{id:"order_setup_type_quote",defaultMessage:"By Price"}),content:l},[o.Km.TIME]:{title:i.createElement(r._,{id:"order_setup_type_time",defaultMessage:"By Time"}),content:c}},height:d,opened:a,titleSlot:u,titleAlign:"start",onSelect:m,toggleSheet:p})}},18571:(e,a,s)=>{"use strict";s.d(a,{L:()=>u});var i=s(27378),r=s(50649),n=s(28671),o=s(77538),l=s(7034),c=s(52229),d=s(79752);const u=(0,r.observer)((e=>{let a=e.toggleOrderForm,s=e.dealOrderService,r=e.position;return i.createElement(o.c,{position:r,isOrder:s.isOrder,isValid:s.isValid,orderType:s.orderType,pairId:s.inputs.pairTitle,onChangeOrderType:s.setOrderTypeChange,toggleOrderForm:a,submitOrderForm:s.submitOrderForm,timeContent:i.createElement(n.i,null,i.createElement(d.d,{dealOrderService:s}),i.createElement(l.u,{dealOrderService:s})),quoteContent:i.createElement(n.i,null,i.createElement(d.d,{dealOrderService:s}),i.createElement(c.N,{dealOrderService:s}))})}))},34799:(e,a,s)=>{"use strict";s.d(a,{O:()=>h});var i=s(2243),r=s(27378),n=s(73598),o=s(23735),l=s(61922),c=s(87134),d=s(14907),u=s(1094),m=s(18571),p=s(57140);const h=e=>{let a=e.dealOrderService,s=e.isAdaptive,h=e.isTutorialActive,v=e.isBottomSheet,g=e.analytics;const _=r.useState(!1),f=i(_,2),E=f[0],S=f[1],y=r.useCallback((()=>{E||(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"closed_asset/to_order",eventLabel:"from_".concat(g.fromPairId,"_to_").concat(g.toPairId,"_on_ftt_").concat("demo"===g.accountType?"demo":"real_current_account")}),S(!E),E||(a.actualizeOpenTime(),a.actualizeOpenQuote())}),[E,g,a]),b=r.useCallback((()=>{S(!1)}),[]);return r.createElement(n.Qj,null,(()=>r.createElement(d.g,{onToggleOrderForm:y},v?r.createElement(p.k,{dealOrderService:a,opened:E,toggleOrderForm:y}):r.createElement(l.l,{inState:E,className:h?"deal-form-animbox_is-tutorial":""},r.createElement(c.M,{hidePanel:b,excludeSelectors:[".".concat(u.R," *")]},r.createElement(m.L,{position:s?"top":"left",toggleOrderForm:y,dealOrderService:a}))))))}},57140:(e,a,s)=>{"use strict";s.d(a,{k:()=>h});var i=s(2243),r=s(27378),n=s(50649),o=s(95029),l=s(68837),c=s(54149),d=s(56391),u=s(99767),m=s(82565),p=s(37654);const h=(0,n.observer)((e=>{let a=e.toggleOrderForm,s=e.dealOrderService,n=e.opened;const h=(0,o.iP)(),v=i(h,2),g=v[0],_=v[1]>g,f=(0,r.useMemo)((()=>e=>{let i=e.y,n=e.height,o=e.active;return r.createElement(d.H,{dealOrderService:s,y:i,height:n,active:o,description:r.createElement(m.e,{dealOrderService:s}),onSubmit:a})}),[s,a]),E=(0,r.useMemo)((()=>e=>{let i=e.y,n=e.height,o=e.active;return r.createElement(u.y,{dealOrderService:s,y:i,height:n,active:o,twoSide:!0,isPortrait:_,info:r.createElement(p.x,{dealOrderService:s}),description:r.createElement(m.e,{dealOrderService:s}),onSubmit:a})}),[s,_,a]);return r.createElement(c.v,{opened:n,title:r.createElement(l.o,{asset:s.inputs.pairTitle,noWrap:!0}),orderType:s.orderType,quoteContent:f,timeContent:E,height:_?538:364,onChangeOrderType:s.setOrderTypeChange,toggleOrderForm:a})}))},27588:(e,a,s)=>{"use strict";s.d(a,{F:()=>o});var i=s(27378),r=s(50649),n=s(62196);const o=(0,r.observer)((e=>{let a=e.dealOrderService,s=e.isMinified,r=e.isThin,o=e.isPushed,l=e.toggleOrderForm;return i.createElement(n.s,{cancelOrder:a.cancelOrder,isDisabled:a.inputs.disabledControls.buttonOrder,isMinified:s,isThin:r,isOrder:a.isOrder,isPushed:o,toggleOrderForm:l})}))},92657:(e,a,s)=>{"use strict";s.d(a,{f:()=>d});var i=s(27378),r=s(50649),n=s(28671),o=s(77538),l=s(7034),c=s(52229);const d=(0,r.observer)((e=>{let a=e.toggleOrderForm,s=e.dealOrderService,r=e.position;return i.createElement(o.c,{position:r,isOrder:s.isOrder,isValid:s.isValid,orderType:s.orderType,pairId:s.inputs.pairTitle,onChangeOrderType:s.setOrderTypeChange,toggleOrderForm:a,submitOrderForm:s.submitOrderForm,timeContent:i.createElement(n.i,null,i.createElement(l.u,{dealOrderService:s})),quoteContent:i.createElement(n.i,null,i.createElement(c.N,{dealOrderService:s}))})}))},30675:(e,a,s)=>{"use strict";s.d(a,{H:()=>p});var i=s(2243),r=s(27378),n=s(73598),o=s(23735),l=s(61922),c=s(87134),d=s(14907),u=s(92657),m=s(3259);const p=e=>{let a=e.dealOrderService,s=e.isAdaptive,p=e.isTutorialActive,h=e.isBottomSheet,v=e.analytics;const g=r.useState(!1),_=i(g,2),f=_[0],E=_[1],S=r.useCallback((()=>{f||(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"closed_asset/to_order",eventLabel:"from_".concat(v.fromPairId,"_to_").concat(v.toPairId,"_on_fx_").concat("demo"===v.accountType?"demo":"real_current_account")}),E(!f),f||(a.actualizeOpenTime(),a.actualizeOpenQuote())}),[f,v,a]),y=r.useCallback((()=>{E(!1)}),[]);return r.createElement(n.Qj,null,(()=>r.createElement(d.g,{onToggleOrderForm:S},h?r.createElement(m.D,{dealOrderService:a,opened:f,toggleOrderForm:S}):r.createElement(l.l,{inState:f,className:p?"deal-form-animbox_is-tutorial":""},r.createElement(c.M,{hidePanel:y},r.createElement(u.f,{position:s?"top":"left",toggleOrderForm:S,dealOrderService:a}))))))}},13564:(e,a,s)=>{"use strict";s.d(a,{m:()=>o});var i=s(27378),r=s(50649),n=s(72456);const o=(0,r.observer)((e=>{let a=e.dealOrderService;return i.createElement(n.b,{openQuote:a.openQuote,winperc:a.inputs.needWinperc?a.winperc:void 0,precision:a.inputs.pairPrecision})}))},52229:(e,a,s)=>{"use strict";s.d(a,{N:()=>c});var i=s(27378),r=s(50649),n=s(95029),o=s(37711),l=s(13564);const c=(0,r.observer)((e=>{let a=e.dealOrderService;return i.createElement(n.I5,{value:a.openQuote,action:i.createElement(l.m,{dealOrderService:a}),error:a.errors[o.Km.QUOTE].get(o.iR.ZERO_QUOTE),precision:a.inputs.pairPrecision,onChange:a.setQuoteOpenChange})}))},37654:(e,a,s)=>{"use strict";s.d(a,{x:()=>o});var i=s(27378),r=s(50649),n=s(39307);const o=(0,r.observer)((e=>{let a=e.dealOrderService;return i.createElement(n.J,{openTimeStamp:a.openTimeStamp,is24Format:a.inputs.is24Format,winperc:a.inputs.needWinperc?a.winperc:void 0,serverTimeStamp:a.inputs.serverTimeStamp})}))},7034:(e,a,s)=>{"use strict";s.d(a,{u:()=>c});var i=s(27378),r=s(50649),n=s(37711),o=s(14345),l=s(37654);const c=(0,r.observer)((e=>{let a=e.dealOrderService;return i.createElement(o.z,{validate:a.validate,serverTimeStamp:a.inputs.serverTimeStamp,openTimeStamp:a.openTimeStamp,is24Format:a.inputs.is24Format,handleTimeChange:a.setTimeOpenChange,errors:a.errors[n.Km.TIME],action:i.createElement(l.x,{dealOrderService:a})})}))},79752:(e,a,s)=>{"use strict";s.d(a,{d:()=>o});var i=s(27378),r=s(50649),n=s(1094);const o=(0,r.observer)((e=>{let a=e.dealOrderService,s=e.className,r=e.classNameDescription;return i.createElement(n.x,{winperc:a.winperc,className:s,classNameDescription:r,onChange:a.setWinpercChange})}))},56391:(e,a,s)=>{"use strict";s.d(a,{H:()=>u});var i=s(27378),r=s(50649),n=s(68114),o=s(37711),l=s(17016),c=s(13564);const d=(0,n.R9)(n.qV),u=(0,r.observer)((e=>{let a=e.dealOrderService,s=e.y,r=e.height,n=e.active,u=e.description,m=e.onSubmit;const p=a.errors,h=a.inputs.pairPrecision,v=a.isValid,g=a.openQuote,_=a.orderType,f=a.setQuoteOpenChange,E=a.submitOrderForm,S=(0,i.useCallback)((()=>{E(),v&&(null==m||m())}),[v,m,E]);return i.createElement(d,{y:s,height:r,active:n&&_===o.Km.QUOTE,value:g,action:i.createElement(c.m,{dealOrderService:a}),error:p[o.Km.QUOTE].get(o.iR.ZERO_QUOTE),precision:h,description:u,acceptButton:i.createElement(l.I,{isValid:!0,onClick:S,hasRounding:!0}),onChange:f})}))},99767:(e,a,s)=>{"use strict";s.d(a,{y:()=>m});var i=s(50439),r=s(27378),n=s(50649),o=s(17302),l=s(68114),c=s(37711),d=s(17016);const u=(0,l.R9)(l.Rn),m=(0,n.observer)((e=>{let a=e.dealOrderService,s=e.y,n=e.height,l=e.active,m=e.info,p=e.description,h=e.twoSide,v=e.isPortrait,g=e.onSubmit;const _=a.hasGapInSchedule,f=a.inputs,E=f.minDuration,S=f.is24Format,y=f.pairTimeClose,b=f.pairTimeOpen,C=a.isValid,T=a.openTimeStamp,A=a.orderType,k=a.serverTimeStampInMinutes,w=a.setTimeOpenChange,N=a.submitOrderForm,R=a.timeMax,I=a.timeMin,D=l&&A===c.Km.TIME,O=(0,r.useMemo)((()=>_?[{from:y-1e3*(E||0)-1e3,to:b}]:void 0),[_,E,y,b]);(0,r.useEffect)((()=>{if(!D)return;const e=(0,i.Z)(O?(0,o.S0)(T,O):T,I,R);e!==T&&w(e)}),[O,D,w,T,R,I]);const L=(0,r.useCallback)((()=>{N(),C&&(null==g||g())}),[N,C,g]);return r.createElement(u,{y:s,height:n,active:D,value:T,visibleCount:v||h?5:3,min:I,max:R,gaps:O,todayDate:new Date(k).getDate(),hour12:!S,info:m,description:p,acceptButton:r.createElement(d.I,{isValid:!0,onClick:L,hasRounding:!0}),twoSide:h,onSelect:w})}))},3259:(e,a,s)=>{"use strict";s.d(a,{D:()=>p});var i=s(2243),r=s(27378),n=s(50649),o=s(95029),l=s(68837),c=s(54149),d=s(56391),u=s(99767),m=s(37654);const p=(0,n.observer)((e=>{let a=e.toggleOrderForm,s=e.dealOrderService,n=e.opened;const p=(0,o.iP)(),h=i(p,2),v=h[0],g=h[1]>v,_=(0,r.useMemo)((()=>e=>{let i=e.y,n=e.height,o=e.active;return r.createElement(d.H,{dealOrderService:s,y:i,height:n,active:o,onSubmit:a})}),[s,a]),f=(0,r.useMemo)((()=>e=>{let i=e.y,n=e.height,o=e.active;return r.createElement(u.y,{dealOrderService:s,y:i,height:n,active:o,isPortrait:g,twoSide:!0,info:r.createElement(m.x,{dealOrderService:s}),onSubmit:a})}),[s,g,a]);return r.createElement(c.v,{opened:n,title:r.createElement(l.o,{asset:s.inputs.pairTitle,noWrap:!0}),orderType:s.orderType,quoteContent:_,timeContent:f,height:g?508:364,onChangeOrderType:s.setOrderTypeChange,toggleOrderForm:a})}))},82565:(e,a,s)=>{"use strict";s.d(a,{e:()=>o});var i=s(27378),r=s(50649),n=s(16960);const o=(0,r.observer)((e=>{let a=e.dealOrderService;return i.createElement(n.Z,{winperc:a.winperc,onChange:a.setWinpercChange})}))},699:(e,a,s)=>{"use strict";s.d(a,{O:()=>c});var i=s(27378),r=s(17302),n=s(82844),o=s(95029),l=s(56861);const c=e=>{let a=e.position,s=e.amountService;const c=i.useCallback((()=>{s.inputs.openRechargeTooltip()}),[s]);return i.createElement(o.Ph,{position:a,buttonBlock:i.createElement(i.Fragment,null,i.createElement(r.zx,{onClick:c,dataTest:"deal_form_deposit_panel_button",fullWidth:!0},i.createElement(n._,{id:"billing_recharge",defaultMessage:"Deposit"})))},i.createElement("div",{className:l.Z.header},i.createElement(n._,{id:"you_dont_have_funds",defaultMessage:"You don't have enough funds"})),i.createElement("div",{className:l.Z.description},i.createElement(n._,{id:"you_dont_have_funds_action",defaultMessage:"Deposit to your trading account to open a trade."})))}},56861:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={header:"B5hbMfOn6eoI",description:"_3OghRP1uDi6r"}},13681:(e,a,s)=>{"use strict";s.d(a,{f:()=>o});var i=s(27378),r=s(82844),n=s(95029);const o=e=>{let a=e.duration;return i.createElement(n.Ph,{className:"fixed-duration-panel",position:"left"},i.createElement(r._,{id:"fast_deal_duration_description",defaultMessage:"<tag>This asset is only available for fixed-duration trading. The trade will close after</tag> <value>5 sec</value>",values:{tag:e=>i.createElement("div",{className:"fixed-duration-panel__description"},e),value:()=>i.createElement("div",{className:"fixed-duration-panel__value"},(0,n.yC)(a,"s"))}}))}},45270:(e,a,s)=>{"use strict";s.d(a,{z:()=>n});var i=s(27378),r=s(13681);const n=e=>{let a=e.dealDurationService;return i.createElement(r.f,{duration:a.duration})}},8066:(e,a,s)=>{"use strict";s.d(a,{S:()=>g});var i=s(27378),r=s(60042),n=s(37488),o=s(17302),l=s(66257),c=s(87601),d=s(95029),u=s(5069),m=s(95084),p=s(46326),h=s(64052),v=(s(1712),s(22252),s(78624));const g=e=>{let a=e.accountType,s=e.error,g=e.isValidAmount,_=e.isValidLimits,f=e.value,E=e.currency,S=e.locale,y=e.startIcon,b=e.endIcon,C=e.setAmount,T=e.allowDeposit,A=e.openRechargeTooltip,k=e.refillDemoBalance,w=e.isButton,N=e.isMultiChart,R=e.onClick;const I=(0,h.L)(N),D=i.useCallback((()=>{a===l.Q.DEMO?k():A()}),[a,k,A]),O=(0,n.useMediaQuery)({maxWidth:c.j$.BREAKPOINT_768,orientation:"portrait"}),L=!O&&a===l.Q.REAL&&(null==s?void 0:s.type)===v.L.NOT_ENOUGH_MONEY;return i.createElement(i.Fragment,null,i.createElement(p._,{config:{style:I?"decimal":"currency",currency:I?void 0:E},accountType:a,className:"deal-amount",currency:E,value:f,setValue:C,isTooltipShown:!g&&!L,isValid:g,isValidLimits:_,error:s,locale:S,allowDeposit:T,onDeposit:D},((e,a)=>{let s=e.value,n=e.onChange,l=e.onBlur,c=e.onFocus;return i.createElement(o.nv,{size:I?void 0:"xsmall",labelOnTop:!0,inputProps:{placeholder:I?"0":(0,d.xG)(0,{currency:E}),readOnly:w,"data-test":"deal-amount-input"},value:s,onChange:n,onBlur:l,onFocus:c,error:a,hideMeta:!0,className:"deal-amount__input",classNameContent:r("deal-amount__content",{"deal-amount__content_centered":O,"deal-amount__content_button":w}),classNameInput:r("deal-amount__input-base",{"deal-amount__input-base_error":O&&!g,"deal-amount__input-base_centered":O}),classNameInputWrapper:r("deal-amount__input-wrapper",{"deal-amount__input-wrapper_button":w}),label:I?i.createElement(m.T,{currency:E}):void 0,onClick:w?void 0:R,startIcon:y,endIcon:w?i.createElement(i.Fragment,null,i.createElement(u.d,{onClick:R}),b):b})})))}},76641:(e,a,s)=>{"use strict";s.d(a,{h:()=>c});var i=s(27378),r=s(60042),n=s(17302),o=s(82844),l=s(95029);const c=e=>{let a=e.position,s=e.multiplicatorList,c=e.multiplicator,d=e.setMultiplicator,u=e.toggleMultiplicatorPanel;return i.createElement(l.Ph,{position:a},i.createElement("div",{className:"multiplicator-table","data-test":"deal-form-multiplicator-list"},i.createElement("div",{className:"multiplicator-table__header"},i.createElement(o._,{id:"deal_form_multiplicator_title",defaultMessage:"Multiplies your profit from the trade"})),i.createElement("ul",{className:"multiplicator-table__list"},s.map((e=>i.createElement("li",{"data-test":"deal-form-multiplicator-item-".concat(c),key:e,className:r({"multiplicator-table__item_only":1===s.length})},i.createElement(n.zx,{variant:e===c?"primary":"secondary",fullWidth:!0,onClick:()=>{d(e),u()}},"x",e)))))))}},51062:(e,a,s)=>{"use strict";s.d(a,{H:()=>m});var i=s(60042),r=s(27378),n=s(37488),o=s(73598),l=s(26567),c=(s(29916),s(71549),s(98186)),d=s(42568),u=s(8066);const m=e=>{let a=e.isMobile,s=e.fxDealAttributesService,m=e.isMultiChart,p=e.amountService,h=e.fxLimitService,v=e.toggleMultiplicator,g=e.isLimits,_=e.toggleLimits;const f=(0,n.useMediaQuery)({minWidth:961}),E=r.useCallback((()=>{s.inputs.openDealFormSheet("fxAmount")}),[s]);return r.createElement(o.Qj,null,(()=>{const e=a,n=p.isErrorsVisible;return r.createElement(r.Fragment,null,r.createElement(u.S,{accountType:p.inputs.account.type,error:n?p.errors.amount:null,isValidAmount:!n||p.isValidAmount,isValidLimits:!e||!(h.limitErrors.stopLoss||h.limitErrors.takeProfit),value:p.amount,currency:p.inputs.currency,locale:p.inputs.locale,allowDeposit:p.allowDeposit,setAmount:p.setAmount,openRechargeTooltip:p.inputs.openRechargeTooltip,refillDemoBalance:p.inputs.refillDemoBalance,isButton:s.inputs.isBottomSheet,isMultiChart:m,onClick:s.inputs.isBottomSheet?E:void 0,startIcon:a?r.createElement("div",{className:"deal-amount__input-button"},g?r.createElement(c.d,{limitService:h,dealAttributesService:s,onClick:_,isMultiChart:!1}):null):null,endIcon:r.createElement("div",{className:i(a&&"deal-amount__input-button")},r.createElement(d.R,{onClick:v,textAlign:e?"right":void 0},"x".concat(s.multiplicator)))}),!m&&f?r.createElement(l._,{increaseDisabled:p.increaseDisabled,decreaseDisabled:p.decreaseDisabled,increaseValue:p.increaseDealAmount,decreaseValue:p.decreaseDealAmount}):null)}))}},3070:(e,a,s)=>{"use strict";s.d(a,{S:()=>o});var i=s(27378),r=s(50649),n=s(76641);const o=(0,r.observer)((e=>{let a=e.fxDealAttributesService,s=e.onClick,r=e.position;return i.createElement(n.h,{position:r,multiplicator:a.multiplicator,multiplicatorList:a.inputs.pair.multiplicatorList,setMultiplicator:a.setMultiplicator,toggleMultiplicatorPanel:s})}))},79471:(e,a,s)=>{"use strict";s.d(a,{N:()=>c});var i=s(27378),r=s(60042),n=s(82844),o=s(95029),l=s(10357);const c=e=>{let a=e.commission,s=e.currency,c=e.className,d=e.iconPosition,u=e.hidden;return i.createElement("div",{"data-test":"forex-deal-form-commission",className:r("deal-form-commission",{"deal-form-commission_hidden":u},c)},"start"===d?i.createElement(l.l,null):null,i.createElement("span",{"data-test":"forex-commission-value",className:"deal-form-commission__text"},i.createElement(n._,{id:"commission",defaultMessage:"Commission"}),":"," ",i.createElement(o.ih,{value:a,currency:s,minimumFractionDigits:2})),"end"===d?i.createElement(l.l,null):null)}},10357:(e,a,s)=>{"use strict";s.d(a,{l:()=>l});var i=s(27378),r=s(82844),n=s(77740),o=s(95029);const l=()=>i.createElement(o.MZ,{distance:6,content:i.createElement(r._,{"data-test":"deal-form-commission-tooltip",id:"fx_commission_description",defaultMessage:"This is the fee to be charged for the trade. It's calculated based on the investment amount and the multiplier you apply."})},i.createElement("span",{className:"deal-form-commission__tooltip-wrapper"},i.createElement("span",{className:"deal-form-commission__help-icon","data-test":"deal-form-commission-help"},i.createElement(n.T08,null))))},75568:(e,a,s)=>{"use strict";s.d(a,{$:()=>o});var i=s(27378),r=s(73598),n=s(79471);const o=e=>{let a=e.isMobile,s=e.fxDealAttributesService,o=e.dealOrderService;return i.createElement(r.Qj,null,(()=>i.createElement(n.N,{commission:s.commission,currency:s.inputs.currency,iconPosition:a?void 0:"start",hidden:!!o.currentOrder})))}},65585:(e,a,s)=>{"use strict";s.d(a,{I:()=>f,x:()=>S});var i=s(47014),r=s(2243),n=s(27378),o=s(73598),l=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),c=(s(8280),s(77740)),d=s(84584),u=s(21182),m=s(99318),p=s(18985),h=s(82844),v=s(95029),g=s(22085),_=s(31074);const f=(0,d.Z)({id:"beforeButtonsFxSlot"}),E=(0,u.W)(f),S=e=>{let a=e.dealOrderService,s=e.panelService,d=e.fxCreateOrderService,u=e.fxOpenDealService,f=e.fxDealAttributesService,S=e.selectedSignal,y=e.onCloseSignalsTooltip,b=e.children,C=e.inline,T=e.onHoverUp,A=e.onHoverDown;const k=n.useState(),w=r(k,2),N=w[0],R=w[1],I=n.useState(null),D=r(I,2),O=D[0],L=D[1],M=n.useState(null),P=r(M,2),x=P[0],F=P[1],B=n.useState(null),Z=r(B,2),U=Z[0],H=Z[1];n.useEffect((()=>{if(!S)return;const e=S.advice;C&&U?R(U):"up"===e&&O?R(O):"down"===e&&x&&R(x)}),[S,C,O,x,U]);const G=n.useCallback(i((function*(){f.inputs.pair.lockedBuy?u.inputs.showTopMessage("info",{id:"pair_available_only_for_sell",defaultMessage:'The asset is only available for a "Down" trade.'}):d.isOpening||u.isOpening||(a.isOrder?d.createOrder("up"):((s.isPanelVisible(l.r.OneClick)||s.isPanelVisible(l.r.HoldUse))&&(yield s.hidePanelAsync()),u.startDeal("up")))})),[s,d,u,a.isOrder,f]),V=n.useCallback(i((function*(){f.inputs.pair.lockedSell?u.inputs.showTopMessage("info",{id:"pair_available_only_for_buy",defaultMessage:'The asset is only available for an "Up" trade.'}):d.isOpening||u.isOpening||(a.isOrder?d.createOrder("down"):((s.isPanelVisible(l.r.OneClick)||s.isPanelVisible(l.r.HoldUse))&&(yield s.hidePanelAsync()),u.startDeal("down")))})),[s,d,u,a.isOrder,f]);return n.createElement(o.Qj,null,(()=>{const e=a.currentOrder;let s;const i=Boolean(S&&"up"!==S.advice),r=Boolean(S&&"down"!==S.advice);if(e&&"time"===e.type){const i=new Date(e.openTimeStamp);s=n.createElement(o.Qj,null,(()=>new Date(a.inputs.serverTimeStamp).getDate()===i.getDate()?n.createElement(m.B,{value:i,hour12:!f.inputs.is24Format}):n.createElement(n.Fragment,null,n.createElement(m.B,{value:i,hour12:!f.inputs.is24Format}),", ",n.createElement("span",{className:"formatted-date"},n.createElement(p.Ji,{value:i,hour12:!f.inputs.is24Format,day:"2-digit",month:"2-digit"})))))}else s=e?n.createElement(v.l1,{value:e.openQuote,style:"decimal",minimumFractionDigits:f.inputs.pair.precision||6,maximumFractionDigits:f.inputs.pair.precision||6}):null;return n.createElement(n.Fragment,null,n.createElement(_.j,{signal:S,anchorEl:N,serverTime:f.inputs.serverTime,placement:C?"top":"left",onClose:y}),n.createElement(E,{props:{buttonContainerRef:U}}),n.createElement(g.u,{inline:C,customIcon:a.isOrder?n.createElement(c.bpu,null):null,isLoading:a.isOrder?d.isOpening:u.isOpening,subTitleUp:s,subTitleDown:s,isDisabledUp:f.inputs.disabledControls.buttonUp,isDisabledDown:f.inputs.disabledControls.buttonDown,isMutedUp:i,isMutedDown:r,onClickUp:G,onClickDown:V,titleUp:n.createElement(h._,{id:"fx_deals_upper",defaultMessage:"Up"}),titleDown:n.createElement(h._,{id:"fx_deals_lower",defaultMessage:"Down"}),onHoverUp:a.isOrder?void 0:T,onHoverDown:a.isOrder?void 0:A,setButtonUpRef:L,setButtonDownRef:F,ref:H},b))}))}},62586:(e,a,s)=>{"use strict";s.d(a,{l:()=>o});var i=s(27378),r=s(73598),n=s(48945);const o=e=>{let a=e.fxOpenDealService,s=e.position,o=e.onCancel;const l=i.useCallback((()=>a.startDeal(a.dir,!1,!0)),[a]);return i.createElement(r.Qj,null,(()=>i.createElement(n.s,{position:s,onAccept:a.acceptHoldUse,onApply:l,onCancel:o})))}},80458:(e,a,s)=>{"use strict";s.d(a,{N:()=>v});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(17302),c=s(77740),d=s(82844),u=s(95029),m=s(56856),p=s(25460);const h=["ref"],v=n.memo((e=>{let a=e.amount,s=e.lastRate,v=e.isOneClick,g=e.dir,_=e.multiplicator,f=e.commissionAmount,E=e.currency,S=e.position,y=e.pairPrecision,b=e.getStopOut,C=e.onCancel,T=e.onAccept,A=e.onApply;return n.createElement(m.A,{className:p.Z.host,dataTest:"fx-one-click-panel",isOneClick:v,position:S,onCancel:C,onAccept:T,onApply:A},n.createElement(m.A.Content,null,n.createElement(u.nN,{"data-test":"fx-deal-form-one-click-field-quote",data:n.createElement(d._,{id:"deal_confirm_field_opening_quote",defaultMessage:"Opening Quote"}),value:n.createElement(u.l1,{value:s,style:"decimal",maximumFractionDigits:y,minimumFractionDigits:y})}),n.createElement(u.nN,{"data-test":"fx-deal-form-one-click-field-amount",data:n.createElement(d._,{id:"deal_confirm_field_amount",defaultMessage:"Trade Amount"}),value:n.createElement(u.ih,{className:o(p.Z.bold,p.Z.hightlighted),currency:E,value:a,minimumFractionDigits:2})}),n.createElement(u.nN,{"data-test":"fx-deal-form-one-click-field-multiplier",data:n.createElement(d._,{id:"fx_multiplier",defaultMessage:"Multiplier"}),value:"x".concat(_)}),n.createElement(u.nN,{"data-test":"fx-deal-form-one-click-field-direction",data:n.createElement(d._,{id:"deal_confirm_field_direction",defaultMessage:"Direction"}),value:n.createElement(u.oI,{value:"up"===g?1:-1,className:p.Z.bold},"up"===g?n.createElement(d._,{id:"deals_upper",defaultMessage:"Up"}):n.createElement(d._,{id:"deals_lower",defaultMessage:"Down"}))}),n.createElement(u.nN,{"data-test":"fx-deal-form-one-click-field-commission",data:n.createElement(d._,{id:"fx_commission",defaultMessage:"Commissions"}),value:n.createElement(n.Fragment,null,f?n.createElement(u.ih,{value:0-f,currency:E,minimumFractionDigits:2}):n.createElement(n.Fragment,null,"—"))}),n.createElement(u.nN,{"data-test":"fx-deal-form-one-click-field-stopout",data:n.createElement(d._,{id:"fx_stopOut",defaultMessage:"Stop out"}),value:n.createElement(u.ih,{value:b("amount"),currency:E}),icon:n.createElement(l.u,{placement:"top",triggerOnHover:!0,triggerOnTap:!1,arrow:!0,transition:!0,disablePortal:!0,content:n.createElement("div",{className:p.Z.tooltip},n.createElement(d._,{id:"deal_confirm_stop_out_description",defaultMessage:"The price level at which the trade will close automatically to avoid further losses"}))},(e=>{let a=e.ref,s=r(e,h);return n.createElement("span",i({ref:a},s),n.createElement(c.T08,null))}))})),n.createElement(m.A.Content,null,n.createElement(n.Fragment,null,"up"===g?n.createElement(d._,{id:"deal_confirm_up_description_profit",defaultMessage:"You will receive a profit in case the price of the asset increases"}):n.createElement(d._,{id:"deal_confirm_down_description_profit",defaultMessage:"You will receive a profit in case the price of the asset decreases"}))))}),((e,a)=>!!a.position&&(e.dir!==a.dir||e.amount!==a.amount)));v.displayName="FxOneClickPanel"},25460:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_268a3-fn82rw",bold:"_24E-0V0embKN",hightlighted:"_1vZV_nwbkajJ",tooltip:"_2i3TNkuVB5Y9"}},79789:(e,a,s)=>{"use strict";s.d(a,{i:()=>o});var i=s(27378),r=s(50649),n=s(80458);const o=(0,r.observer)((e=>{let a=e.fxOpenDealService,s=e.fxLimitService,r=e.fxDealAttributesService,o=e.fxAmountService,l=e.onCancel,c=e.position;return i.createElement(n.N,{position:c,lastRate:r.inputs.currentQuote,isOneClick:a.inputs.isOneClick,dir:a.dir,amount:o.amount,multiplicator:r.multiplicator,commissionAmount:r.commission,currency:r.inputs.currency,onCancel:l,onApply:()=>{a.startDeal(a.dir,!0,!1)},pairPrecision:r.inputs.pair.precision,onAccept:a.acceptOneClick,getStopOut:s.getStopOut})}))},29916:(e,a,s)=>{"use strict";s.d(a,{d:()=>p});var i=s(2243),r=s(27378),n=s(60042),o=s(37488),l=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),c=(s(8280),s(17302)),d=s(8141),u=s(87601),m=s(95029);const p=r.memo((e=>{let a=e.className,s=e.stopLoss,p=e.takeProfit,h=e.onClick,v=e.currency,g=e.locale,_=e.limitErrors,f=e.disabled,E=e.panel,S=e.isMultiChart,y=e.title,b=e.precision;const C=(0,o.useMediaQuery)({minWidth:u.j$.BREAKPOINT_961}),T=(0,d.L)(),A=p?p.type:s?s.type:"amount",k="price"!==A,w="amount"===A?e=>(0,m.Ms)(Number(e),{currency:v,locale:g}):(0,m.nH)(v,(0,m.p8)(A,b),g)[A],N=p?"".concat(k?"+":"").concat(w(String(p.value))):"--",R=s?"".concat(w(String(s.value))):"--",I="".concat(R," / ").concat(N),D=r.useMemo((()=>(null==_?void 0:_.stopLoss)||(null==_?void 0:_.takeProfit)),[_]),O=r.useRef(null),L=r.useState(!1),M=i(L,2),P=M[0],x=M[1],F=r.useCallback((()=>{x(!0)}),[]);return r.useEffect((()=>{const e=null==O?void 0:O.current;if(e)return e.addEventListener("transitionend",F),()=>{e.removeEventListener("transitionend",F)}}),[F]),r.createElement(c.Xd,{dir:T,className:n("limit-button",D&&"limit-button_not-valid",E===l.r.Limits&&"limit-button_active",a),"data-test":"fx-limit-button",ref:O,disabled:f,onClick:h},!S&&y&&C?r.createElement("span",{className:"limit-button__title"},y):null,r.createElement(c.al,{dir:T,content:I,minScale:P?.5:.6}))}));p.displayName="FxLimitButton"},36991:(e,a,s)=>{"use strict";s.d(a,{g:()=>o});var i=s(27378),r=s(60042),n=s(95029);const o=e=>{let a=e.position,s=e.currency,o=e.takeProfit,l=e.stopLoss,c=e.isTrailingStop,d=e.locale,u=e.getStopOut,m=e.getLimitsDiapasonFormatted,p=e.getLimitsRange,h=e.getTrailingLevel,v=e.toggle,g=e.onCancel,_=e.className,f=e.masked,E=e.precision,S=e.limitTypes,y=e.defaultLimitType,b=e.validate,C=e.convert,T=e.updateLimit,A=e.trailingSwitcherName;const k=i.useCallback(((e,a)=>b(e,a)),[b]),w=i.useCallback(((e,a,s,i)=>C?C(e,a,s,i):s),[C]),N=i.useCallback((e=>{T(e),v()}),[T,v]);return i.createElement(n.Ph,{position:a,className:r("deal-form-limits-panel",_)},i.createElement(n.X_,{masked:f,trailingSwitcherName:A,currency:s,takeProfit:o,stopLoss:l,precision:E,defaultLimitType:y,limitTypes:S,isTrailingStop:c,locale:d,getStopOut:u,getLimitsDiapasonFormatted:m,getLimitsRange:p,getTrailingLevel:h,validate:k,convert:w,onApply:N,onCancel:g,toggle:v}))}},71549:(e,a,s)=>{"use strict";s.d(a,{K:()=>o});var i=s(27378),r=s(50649),n=s(36991);const o=(0,r.observer)((e=>{let a=e.limitService,s=e.dealAttributesService,r=e.toggle,o=e.onCancel,l=e.position;return i.createElement(n.g,{isDiapason:!0,masked:!0,precision:a.inputs.precision,position:l,defaultLimitType:"amount",limitTypes:["amount","percent"],trailingSwitcherName:"trailing_switcher_deal_form",isTrailingStop:a.inputs.isTrailingStop,locale:s.inputs.locale,currency:s.inputs.currency,takeProfit:a.limits.takeProfit,stopLoss:a.limits.stopLoss,updateLimit:a.updateLimit,getStopOut:a.getStopOut,getLimitsDiapasonFormatted:a.getLimitsDiapasonFormatted,getTrailingLevel:a.getTrailingLevel,validate:a.validate,toggle:r,onCancel:o,convert:a.convert})}))},98186:(e,a,s)=>{"use strict";s.d(a,{d:()=>o});var i=s(27378),r=s(50649),n=s(29916);const o=(0,r.observer)((e=>{let a=e.limitService,s=e.dealAttributesService,r=e.panelService,o=e.onClick,l=e.isMultiChart,c=e.title;return i.createElement(n.d,{title:c,isMultiChart:l,takeProfit:a.limits.takeProfit,stopLoss:a.limits.stopLoss,limitErrors:a.limitErrors,onClick:o,currency:s.inputs.currency,locale:s.inputs.locale,panel:null==r?void 0:r.panel,precision:a.inputs.precision})}))},61295:(e,a,s)=>{"use strict";s.d(a,{M:()=>_});var i=s(49491),r=s(14936),n=s(27378),o=s(37488),l=s(77740),c=s(17302),d=s(87601),u=s(82844),m=s(95029),p=s(41023),h=s(88821),v=s(56355);const g=["ref"],_=e=>{let a=e.winperc,s=e.amount,_=e.currency,f=e.isMultiChart;const E=(0,o.useMediaQuery)({query:"(max-width: ".concat(d.j$.BREAKPOINT_768,"px) and (max-height: ").concat(d.j$.BREAKPOINT_1024,"px)")}),S=(0,m.lu)(s/100*a,2),y=S.toString().length>9;return n.createElement(c.xu,{display:E?"grid":"flex",gridAutoFlow:E?"column":void 0,direction:E?"row":"column",gap:E?"s":void 0,verticalAlign:"center",horizontalAlign:"center",dataTest:"asset_profitability_box"},n.createElement(c.xv,{variant:"S Compact / Regular",color:"contrast-gamma"},n.createElement(u._,{id:"asset_profitability",defaultMessage:"Profitability: {percent}",values:{percent:n.createElement(c.xv,{inline:!0,as:"span",variant:"S Compact / Bold",color:"contrast-beta",dataTest:"profitability-percent"},n.createElement(h.c,{value:a}))}})),n.createElement(c.xu,{direction:"row",verticalAlign:"center",horizontalAlign:"center"},n.createElement(c.xv,{variant:E||f||y?"S Compact / Regular":"M Compact / Regular"},n.createElement(p.M,{currency:_,value:S,isSign:!0,"data-test":"profitability-amount"})),n.createElement(c.u,{placement:"top",content:n.createElement(c.xu,{fixedWidth:"136px",dataTest:"profitability-tooltip-content"},n.createElement(u._,{id:"profitability_tooltip",defaultMessage:"The profit you will receive as a result of a successful trade."})),arrow:!0,transition:!0,delay:100,interactive:!1,triggerOnHover:!0,triggerOnTap:!0},(e=>{let a=e.ref,s=r(e,g);return n.createElement(n.Fragment,null,n.createElement("span",i(i({ref:a,className:v.Z.iconQuest},s),{},{"data-test":"profitability-tooltip-button"}),n.createElement(l.T08,null)))}))))}},56355:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={iconQuest:"_34TBq9CU51zq"}},50714:(e,a,s)=>{"use strict";s.d(a,{y:()=>c});var i=s(27378),r=s(60042),n=s(4622),o=s(99137),l=s(1110);const c=e=>{let a=e.active,s=e.isMultiChart,c=e.children;const d=(0,n.W)();return i.createElement(o.B,{active:!d&&a,height:60},i.createElement("div",{className:r(l.Z.host,s&&l.Z.host_multiChart)},c))}},1110:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3DC-mJTIkjmS",host_multiChart:"_1Olxp9qC_70C"}},56808:(e,a,s)=>{"use strict";s.d(a,{q:()=>n});var i=s(27378),r=s(8836);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.host},a)}},8836:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2kGWVFDwzfq1"}},99137:(e,a,s)=>{"use strict";s.d(a,{B:()=>l});var i=s(2243),r=s(27378),n=s(29609),o=s(58898);const l=e=>{let a=e.active,s=e.height,l=e.children;const c=r.useState(!a),d=i(c,2),u=d[0],m=d[1],p=r.useCallback((()=>{m(!1)}),[a]),h=r.useCallback((()=>{m(!0)}),[]);return r.createElement("div",{style:{overflow:"hidden",height:"".concat(s,"px"),display:u?"none":"block"}},r.createElement(n.Z,{in:a,classNames:{enter:o.Z.animEnter,enterActive:o.Z.animEnterActive,exit:o.Z.animExit,exitActive:o.Z.animExitActive},enter:!0,exit:!0,unmountOnExit:!0,onEnter:p,onExited:h,timeout:500},l))}},58898:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={animEnter:"NEcCgx154_Mz",animEnterActive:"bSkX7aQOou4Z",animExit:"_3dZMM2TCR0bZ",animExitActive:"poHFquokYH15"}},4622:(e,a,s)=>{"use strict";s.d(a,{W:()=>n});var i=s(37488),r=s(87601);const n=()=>(0,i.useMediaQuery)({maxHeight:r.j$.BREAKPOINT_360-1})},6746:(e,a,s)=>{"use strict";s.d(a,{a:()=>m});var i=s(27378),r=s(18985),n=s(45797),o=s(82844),l=s(77740),c=s(79472),d=s(57783);const u=(0,r.vU)({risk_free:{id:"risk_free",defaultMessage:"Risk Free"}}),m=e=>{let a=e.className,s=e.count,r=e.handleCancel,m=e.isActivated,p=e.isDisabled,h=e.isMinified,v=void 0!==h&&h,g=e.isThin,_=e.isPushed,f=e.togglePanel;return i.createElement(c.z,{className:a,dataTest:{normal:"risk-free-button-open",active:"risk-free-button-cancel"},handleCancel:r,startIcon:i.createElement(d.j,{count:s}),endIcon:i.createElement(l.EjZ,null),endIconActive:i.createElement(l.bMz,null),isActive:m,isDisabled:Boolean(p),isMinified:v,isThin:g,isPushed:_,title:n.NW.formatMessage(u.risk_free),titleContent:i.createElement("span",{className:"risk-free-button-text"},i.createElement(o._,{id:"risk_free",defaultMessage:"Risk Free"})),togglePanel:f})}},57783:(e,a,s)=>{"use strict";s.d(a,{j:()=>r});var i=s(27378);const r=e=>{let a=e.count,s=void 0===a?0:a,r=e.className,n=void 0===r?"risk-free-count":r;return i.createElement("div",{className:n},s)}},32537:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var i=s(27378),r=s(17302),n=s(82844),o=s(77740),l=s(95029),c=s(57783);const d=e=>{let a=e.activateTrade,s=e.currency,d=e.hidePanel,u=e.tradeGroups,m=e.position,p=void 0===m?"left":m;const h=i.useRef(null);(0,l.O3)(h,d);const v=i.useCallback((e=>()=>a(e)),[a]);return i.createElement(l.Ph,{position:p,hostRef:h,className:"risk-free-selector"},i.createElement("header",{className:"risk-free-selector__header"},i.createElement(n._,{id:"riskfree_trades",defaultMessage:"Risk-free trades"}),i.createElement(l.MZ,{content:i.createElement("div",{className:"risk-free-selector__tooltip"},i.createElement(n._,{id:"riskfree_info_tooltip",defaultMessage:"A risk-free trade lets you keep your investment even if the trade ends up unprofitable"}))},i.createElement(o.T08,{className:"risk-free-selector__tooltip-trigger"}))),i.createElement("div",{className:"risk-free-selector__trades-list"},u.map((e=>{let a=e.amount,n=e.count,o=e.firstTradeId;return i.createElement(r.k$,{className:"risk-free-selector__trade",key:"risk-free-selector__trade".concat(o),onClick:v(o)},i.createElement(l.ih,{value:a,currency:s}),i.createElement(c.j,{count:n}))}))))}},30902:(e,a,s)=>{"use strict";s.d(a,{E:()=>o});var i=s(27378),r=s(50649),n=s(6746);const o=(0,r.observer)((e=>{let a=e.isDisabled,s=e.isMinified,r=void 0!==s&&s,o=e.isThin,l=e.isPushed,c=e.riskFreeService,d=e.togglePanel;return i.createElement(n.a,{count:c.totalDealsCount,handleCancel:c.deactivateTrade,isActivated:c.isActivated,isDisabled:a,isMinified:r,isThin:o,togglePanel:d,isPushed:l})}))},73609:(e,a,s)=>{"use strict";s.d(a,{A:()=>c});var i=s(27378),r=s(50649),n=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),o=(s(8280),s(32537));const l=(e,a)=>{const s={};return e.forEach((e=>{const i=e.amounts[a];s[i]?s[i].count++:s[i]={amount:i,count:1,firstTradeId:e.id}})),Object.values(s).sort(((e,a)=>e.amount-a.amount))},c=(0,r.observer)((e=>{let a=e.hidePanel,s=e.riskFreeService,r=e.position,c=void 0===r?"left":r;return i.createElement(o.Z,{position:c,activateTrade:e=>{s.activateTrade(e),a(n.r.RiskFree)},currency:s.inputs.account.currencyName,hidePanel:a,tradeGroups:l(s.trades,s.inputs.account.currencyName)})}))},12327:(e,a,s)=>{"use strict";s.d(a,{L:()=>RiskFreeService});var i=s(49491),r=s(59312),n=s(60521),o=s(57615),l=s(29042),c=s(29490);const d="activatedDealId";class RiskFreeService{constructor(e){this.trades=[],this.activatedDealId=null,this.storage=new o._({namespace:"RiskFreeService",backend:"undefined"!=typeof window?new l.u:new c.g}),this.inputs=i({},e),this.updateInputValues(this.inputs),this.activatedDealId=this.storage.get(d)||null}get totalDealsCount(){return this.trades.filter((e=>{let a=e.id;return this.activatedDealId!==a&&"demo"!==this.inputs.account.type})).length}get isActivated(){return Boolean(this.trades.find((e=>{let a=e.id;return this.activatedDealId===a&&"demo"!==this.inputs.account.type})))}get activatedAmount(){const e=this.trades.find((e=>{let a=e.id;return this.activatedDealId===a}));return e?e.amounts[this.inputs.account.currencyName]:null}get isAvailable(){return Boolean(this.totalDealsCount||this.isActivated)}updateInputs(e){(0,n.set)(this.inputs,e),this.updateInputValues(e)}updateTrades(e){e&&(this.trades=e)}updateInputValues(e){e.riskFreeTradesUserValues&&(this.trades=e.riskFreeTradesUserValues)}activateTrade(e){const a=this.trades.find((a=>a.id===e));a&&(this.activatedDealId=a.id,this.storage.set(d,a.id))}deactivateTrade(){this.activatedDealId=null,this.storage.delete(d)}startTrade(){this.deactivateTrade()}}(0,r.gn)([n.observable],RiskFreeService.prototype,"inputs",void 0),(0,r.gn)([n.observable],RiskFreeService.prototype,"trades",void 0),(0,r.gn)([n.observable.ref],RiskFreeService.prototype,"activatedDealId",void 0),(0,r.gn)([n.computed],RiskFreeService.prototype,"totalDealsCount",null),(0,r.gn)([n.computed],RiskFreeService.prototype,"isActivated",null),(0,r.gn)([n.computed],RiskFreeService.prototype,"activatedAmount",null),(0,r.gn)([n.computed],RiskFreeService.prototype,"isAvailable",null),(0,r.gn)([n.action.bound],RiskFreeService.prototype,"updateInputs",null),(0,r.gn)([n.action.bound],RiskFreeService.prototype,"updateTrades",null),(0,r.gn)([n.action.bound],RiskFreeService.prototype,"activateTrade",null),(0,r.gn)([n.action.bound],RiskFreeService.prototype,"deactivateTrade",null),(0,r.gn)([n.action.bound],RiskFreeService.prototype,"startTrade",null)},19615:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var i=s(27378),r=s(82844),n=s(95029);const o=e=>{let a=e.replacement,s=e.anchorEl;return i.createElement(n.j0,{anchorEl:s,open:!0},i.createElement(r._,{id:"time_picker_invalid_time",defaultMessage:"Invalid time. Try {action}",values:{action:a}}))}},55493:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={tooltipWidth:"_13Nptvzb4J8P"}},61362:(e,a,s)=>{"use strict";s.d(a,{G:()=>d});var i=s(27378),r=s(17302),n=s(82844),o=s(95029),l=s(53473);const c=e=>{let a=e.isOrder;const s="time"===e.pickerType?i.createElement(n._,{id:"trade_close_at",defaultMessage:"Trade will close at"}):i.createElement(n._,{id:"trade_close_after",defaultMessage:"Trade will close after"});return a?i.createElement(n._,{id:"timepicker_order_warning",defaultMessage:"An order can only be set up using the Timer"}):s},d=e=>{let a=e.position,s=e.durationPanelContent,d=e.timePanelContent,u=e.fastTimePanelContent,m=e.handlePickerTypeChange,p=e.picketType,h=e.isOrder;return i.createElement(o.Ph,{position:a,dataTest:"time-time-picker-panel"},i.createElement(r.mQ,{fullWidth:!0,selected:p,onSelect:m},u?i.createElement(r.mQ.Item,{name:"fastDuration",label:i.createElement("span",{"data-test":"deal-form-time-picker-tab-timer"},i.createElement(n._,{id:"picker_deals_duration_quick",defaultMessage:"Quick"}))},i.createElement(l.o,{title:i.createElement(c,{isOrder:h,pickerType:"duration"})},u)):null,i.createElement(r.mQ.Item,{name:"duration",label:i.createElement("span",{"data-test":"deal-form-time-picker-tab-timer"},i.createElement(n._,{id:"deal_type_timer",defaultMessage:"Timer"}))},i.createElement(l.o,{title:i.createElement(c,{isOrder:h,pickerType:"duration"})},s)),i.createElement(r.mQ.Item,{name:"time",disabled:h,label:i.createElement("span",{"data-test":"deal-form-time-picker-tab-clock"},i.createElement(n._,{id:"deal_type_clock",defaultMessage:"Clock"}))},i.createElement(l.o,{title:i.createElement(c,{isOrder:h,pickerType:"time"})},d))))}},53473:(e,a,s)=>{"use strict";s.d(a,{o:()=>n});var i=s(27378),r=s(8141);const n=e=>{let a=e.title,s=e.children;const n=(0,r.L)();return i.createElement("div",{className:"time-picker-panel-table","data-test":"time-picker-panel-table",dir:n},i.createElement("div",{className:"time-picker-panel-table__header"},a),i.createElement("div",{className:"time-picker-panel-table__list"},s))}},70468:(e,a,s)=>{"use strict";s.d(a,{$:()=>o});var i=s(27378),r=s(17302),n=s(95029);const o=e=>{let a=e.presets,s=e.onClick;return i.createElement(i.Fragment,null,a.filter((e=>e>=60)).map(((e,a)=>i.createElement(r.zx,{key:a,size:"s",fullWidth:!0,variant:"secondary",onClick:()=>{s(e)},dataTest:"time-picker-duration-preset-button"},(0,n.yC)(e,"d h m")))))}},60431:(e,a,s)=>{"use strict";s.d(a,{V:()=>o});var i=s(27378),r=s(17302),n=s(95029);const o=e=>{let a=e.presets,s=e.onClick;return i.createElement(i.Fragment,null,a.map(((e,a)=>i.createElement(r.zx,{key:a,size:"s",variant:"secondary",fullWidth:!0,onClick:()=>{s(e)},dataTest:"time-picker-duration-preset-button"},(0,n.yC)(e,"s")))))}},92156:(e,a,s)=>{"use strict";s.d(a,{g:()=>l});var i=s(2243),r=s(27378),n=s(25935),o=(s(68516),s(17435),s(30362),s(17302));const l=e=>{let a=e.presets,s=e.is24Format,l=e.serverTimeRounded,c=e.onClick;return r.createElement(r.Fragment,null,a.map(((e,d)=>{const u=a.length===d+1?l+e:l+e+60,m=(0,n.y)(1e3*u,s),p=i(m,2),h=p[0],v=p[1];return r.createElement(o.zx,{key:d,size:"s",fullWidth:!0,variant:"secondary",onClick:()=>{c(u)},dataTest:"time-picker-time-preset-button"},h," ",v)})))}},34966:(e,a,s)=>{"use strict";s.d(a,{n:()=>S});var i=s(2243),r=s(27378),n=s(73598),o=s(60042),l=s(18985),c=s(8141),d=s(82844),u=s(45797),m=s(17302),p=s(95029),h=s(62667),v=s(26567),g=s(75669),_=s(5069),f=s(55493);const E=(0,l.vU)({h:{id:"h",defaultMessage:"h"},min:{id:"min",defaultMessage:"min"},min_short:{id:"min_short",defaultMessage:"m"}}),S=e=>{let a=e.dealDurationService,s=e.dealOrderService,l=e.selectedSignal,S=e.isButton,y=void 0!==S&&S,b=e.isMobile,C=e.isMultiChart,T=e.isFastDuration,A=e.onClick,k=e.onFocus,w=e.onBlur,N=e.isFocus;const R=r.useState(null),I=i(R,2),D=I[0],O=I[1],L=(0,c.L)();r.useEffect((()=>{l&&a.setDuration(l.adviceTime)}),[l,a]);const M=r.useCallback((()=>{a.setEditing(!0),null==k||k()}),[a,k]),P=r.useCallback((()=>{a.setEditing(!1),null==w||w()}),[w,a]),x=r.useCallback((e=>{a.setDuration(e/1e3)}),[a]);return r.createElement(n.Qj,null,(()=>{var e;const i=a.getValidValue(a.duration),n=a.getValidationErrorMessage(a.duration),l=()=>{a.setDuration(s.defaultDuration)},c=a.error&&n&&n.values&&N&&!s.isOrder,S=s.defaultMaxDuration===s.defaultDuration,k=s.defaultMinDuration===s.defaultDuration,w=s.isOrder&&s.isShowDurationValidation&&!!s.errors.time.get("duration"),R=w||!s.isOrder&&a.error,I=T||a.isFixedDuration||y;return r.createElement("div",{ref:O},c?r.createElement(p.j0,{anchorEl:D,open:!0,className:b?f.Z.tooltipWidth:""},r.createElement(d._,{id:"time_picker_invalid_time",defaultMessage:"Invalid time. Try {action}",values:{action:r.createElement("a",{className:"deal-form-popper__link",href:"#",onClick:()=>{a.setDuration(i)}},null==n||null===(e=n.values)||void 0===e?void 0:e.action)}})):null,w&&k?r.createElement(p.j0,{anchorEl:D,open:!0,className:b?f.Z.tooltipWidth:""},r.createElement(d._,{id:"time_picker_invalid_time",defaultMessage:"Invalid time. Try {action}",values:{action:r.createElement("a",{className:"deal-form-popper__link",href:"#",onClick:l},(0,p.yC)(s.defaultDuration))}})):null,w&&S?r.createElement(p.j0,{anchorEl:D,open:!0,className:b?f.Z.tooltipWidth:""},r.createElement(d._,{id:"order_setup_time_error",defaultMessage:"Set the duration to no more than {min} or change the order opening time",values:{min:r.createElement("a",{className:"deal-form-popper__link",href:"#",onClick:l},(0,p.yC)(s.defaultDuration))}})):null,b||C?r.createElement(h.j,{colon:" ".concat(u.NW.formatMessage(E.h)," "),suffix:" ".concat(u.NW.formatMessage(E.min)),suffixShort:" ".concat(u.NW.formatMessage(E.min_short)),onFocus:M,onBlur:P,duration:1e3*a.duration,onChange:x},(e=>{let s=e.value,i=e.onChange,n=e.onKeyDown,l=e.onSelect,c=e.onFocus,d=e.onBlur;const u=T||a.isFixedDuration?(0,p.yC)(a.duration,"s"):s;return r.createElement(m.nv,{inputProps:{readOnly:I,onClick:A,"data-test":"deal-duration-input",dir:L},hideMeta:!0,value:u,error:R,onKeyDown:n,onSelect:l,onChange:i,onFocus:c,onBlur:d,size:"xsmall",startIcon:r.createElement(g.P,{disabled:a.decreaseDisabled,dir:"decrease",onClick:a.decreaseDuration}),endIcon:r.createElement(r.Fragment,null,y?r.createElement(_.d,{onClick:A}):null,r.createElement(g.P,{disabled:a.increaseDisabled,dir:"increase",onClick:a.increaseDuration})),className:"input-with-step__input",classNameContent:o("input-with-step__content"),classNameInput:"input-with-step__input-base",classNameInputWrapper:o("input-with-step__input-wrapper",{"input-with-step__input-wrapper_button":y})})})):r.createElement(h.j,{colon:" ".concat(u.NW.formatMessage(E.h),"   "),suffix:" ".concat(u.NW.formatMessage(E.min)),suffixShort:" ".concat(u.NW.formatMessage(E.min_short)),onFocus:M,onBlur:P,duration:1e3*a.duration,onChange:x},(e=>{let s=e.value,i=e.onChange,n=e.onKeyDown,o=e.onSelect,l=e.onFocus,c=e.onBlur;const u=T||a.isFixedDuration?(0,p.yC)(a.duration,"s"):s;return r.createElement(m.nv,{inputProps:{readOnly:I,"data-test":"deal-duration-input",dir:L},labelOnTop:!0,hideMeta:!0,value:u,error:R&&!a.isFixedDuration,label:r.createElement(d._,{id:"duration",defaultMessage:"Duration"}),onKeyDown:n,onSelect:o,onChange:i,onFocus:l,onBlur:c,endIcon:y?r.createElement(_.d,{onClick:A}):void 0})})),b||C?null:r.createElement(v._,{increaseDisabled:a.increaseDisabled,decreaseDisabled:a.decreaseDisabled,increaseValue:a.increaseDuration,decreaseValue:a.decreaseDuration}))}))}},58493:(e,a,s)=>{"use strict";s.d(a,{l:()=>u});var i=s(27378),r=s(73598),n=s(37488),o=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),l=(s(8280),s(87601)),c=s(34966),d=s(49754);const u=e=>{let a=e.timePickerService,s=e.dealDurationService,u=e.dealOrderService,m=e.dealTimeService,p=e.panelService,h=e.boDealAttributesService,v=e.selectedSignal,g=e.onFocus,_=e.isFocus,f=e.isMultiChart;const E=()=>{h.inputs.isBottomSheet&&h.inputs.openDealFormSheet("duration")},S=(0,n.useMediaQuery)({maxWidth:l.j$.BREAKPOINT_960}),y=i.useCallback((()=>{h.inputs.isBottomSheet||(s.isFixedDuration?p.showPanel(o.r.FixedDuration):p.showPanel(o.r.TimePicker)),g(!0)}),[h.inputs.isBottomSheet,g,p,s.isFixedDuration]);return i.createElement(r.Qj,null,(()=>{const e=a.pickerType;return i.createElement("div",{className:h.inputs.disabledControls.timePicker?"deal-form-alpha_disabled_block":""},("duration"===e||"fastDuration"===e)&&i.createElement(c.n,{dealDurationService:s,dealOrderService:u,selectedSignal:v,isButton:h.inputs.isBottomSheet,isFocus:_,isMobile:S,isMultiChart:f,onClick:E,isFastDuration:"fastDuration"===a.pickerType,onFocus:y}),"time"===e&&i.createElement(d.L,{dealTimeService:m,timePickerService:a,isButton:h.inputs.isBottomSheet,isMobile:S,isMultiChart:f,isFocus:_,onClick:E,onFocus:y}))}))}},3136:(e,a,s)=>{"use strict";s.d(a,{H:()=>d});var i=s(27378),r=s(50649),n=s(61362),o=s(92156),l=s(70468),c=s(60431);const d=(0,r.observer)((e=>{let a=e.dealDurationService,s=e.dealTimeService,r=e.timePickerService,d=e.dealOrderService,u=e.hideTimePicker,m=e.position,p=void 0===m?"left":m;const h=e=>{a.setDuration(e),u()};return i.createElement(n.G,{position:p,picketType:r.pickerType,isOrder:d.isOrder,timePanelContent:i.createElement(o.g,{presets:s.presets,is24Format:s.inputs.is24Format,serverTimeRounded:s.serverTimeRounded,onClick:e=>{s.setTimeClose(e),u()}}),durationPanelContent:i.createElement(l.$,{presets:a.presets,onClick:h}),fastTimePanelContent:a.isFastDurationAvailable?i.createElement(c.V,{presets:a.fastPresets,onClick:h}):null,handlePickerTypeChange:e=>{r.handlePickerTypeChange(e)}})}))},49754:(e,a,s)=>{"use strict";s.d(a,{L:()=>v});var i=s(2243),r=s(27378),n=s(73598),o=s(60042),l=s(68516),c=(s(17435),s(30362),s(82844)),d=s(50068),u=s(26567),m=s(75669),p=s(5069),h=s(19615);const v=e=>{let a=e.dealTimeService,s=e.timePickerService,v=e.isButton,g=void 0!==v&&v,_=e.isMobile,f=e.isMultiChart,E=e.onClick,S=e.onFocus,y=e.onBlur,b=e.isFocus;const C=r.useState(null),T=i(C,2),A=T[0],k=T[1];return r.createElement(n.Qj,null,(()=>{const e=a.validate(a.timeClose)===l.Tr.timeAndIsOrder,i=a.getValidValue(a.timeClose),n=a.getValidationErrorMessage(a.timeClose),v=e=>{a.setTimeClose(Math.floor(e/1e3))};return r.createElement("div",{ref:k},a.error&&n&&n.values&&b&&!e?r.createElement(h.A,{replacement:r.createElement(r.Fragment,null,r.createElement("a",{className:"deal-form-popper__link",href:"#",onClick:()=>{a.setTimeClose(i)}},n.values.action)),anchorEl:A}):null,_||f?r.createElement(d.M,{inputTimeStamp:1e3*a.timeClose,serverTimeStamp:1e3*a.serverTimeRounded,is24Format:a.inputs.is24Format,hideMeta:!0,hideDate:!0,readOnly:g,error:a.error,size:"xsmall",startIcon:r.createElement(m.P,{disabled:a.decreaseDisabled,dir:"decrease",onClick:a.decreaseTimeClose}),endIcon:r.createElement(r.Fragment,null,g?r.createElement(p.d,{onClick:E}):null,r.createElement(m.P,{disabled:a.increaseDisabled,dir:"increase",onClick:a.increaseTimeClose})),className:"input-with-step__input",classNameContent:o("input-with-step__content"),classNameInput:"input-with-step__input-base",classNameInputWrapper:o("input-with-step__input-wrapper",{"input-with-step__input-wrapper_button":g}),"data-test":"deal-time-input",onChange:v,onFocusToggle:i=>{a.setEditing(i),i?(S(),e&&(s.setPickerType("duration"),E&&E())):y&&y()},onClick:E}):r.createElement(d.M,{readOnly:g,inputTimeStamp:1e3*a.timeClose,serverTimeStamp:1e3*a.serverTimeRounded,label:r.createElement(c._,{id:"duration",defaultMessage:"Duration"}),is24Format:a.inputs.is24Format,hideMeta:!0,"data-test":"deal-time-input",error:a.error,onChange:v,onFocusToggle:i=>{a.setEditing(i),i&&(S(),e&&s.setPickerType("duration"))},onClick:E}),_||f?null:r.createElement(u._,{increaseDisabled:a.increaseDisabled,decreaseDisabled:a.decreaseDisabled,increaseValue:a.increaseTimeClose,decreaseValue:a.decreaseTimeClose}))}))}},97057:(e,a,s)=>{"use strict";s.d(a,{DZ:()=>S.D,Dx:()=>T.D,EY:()=>C.E,GB:()=>N.G,I0:()=>w.I,L:()=>y.L,MO:()=>k.M,Mx:()=>A.Mx,NB:()=>g.N,OG:()=>u.a,Rg:()=>p.R,WJ:()=>m.WJ,YU:()=>m.YU,_u:()=>h._,bN:()=>c.b,dN:()=>f.d,dj:()=>n.d,dr:()=>v.d,hi:()=>_.h,it:()=>E.i,jh:()=>o.j,nd:()=>i.n,rj:()=>A.rj,rl:()=>b.r,uE:()=>l.u,vk:()=>d.v,xy:()=>r.x});s(13023);var i=s(98346),r=s(96311),n=(s(90650),s(24811)),o=(s(87134),s(62667)),l=(s(27321),s(22085)),c=(s(68537),s(8066),s(92513)),d=s(54698),u=s(89727),m=s(96941),p=s(42568),h=s(26567),v=s(5069),g=(s(75669),s(79471)),_=(s(75568),s(76641)),f=(s(50068),s(20099),s(77538),s(62196),s(1094),s(27588),s(92657),s(7034),s(13564),s(52229),s(18571),s(57140),s(56391),s(99767),s(3259),s(30675),s(34799),s(29916)),E=(s(71549),s(98186),s(30902),s(73609),s(12327),s(1712),s(37876)),S=s(40101),y=s(78624),b=(s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),C=(s(8280),s(1e4),s(61362),s(70468),s(92156),s(34966),s(58493),s(3136),s(49754),s(26549)),T=s(72821),A=s(68516),k=s(46313),w=s(65585),N=s(61054)},4519:(e,a,s)=>{"use strict";s.d(a,{Q:()=>A});var i=s(59312),r=s(27378),n=s(50649),o=s(60042),l=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),c=(s(8280),s(87188)),d=(s(17302),s(95029),s(68516),s(17435),s(30362),s(34966),s(58493)),u=s(3136),m=(s(77740),s(61922)),p=s(87134),h=s(46313),v=s(63819),g=s(7391),_=s(39755),f=(s(37488),s(52360)),E=s(48663),S=s(45270),y=s(699),b=s(99485),C=s(50714),T=s(61295);let A=class BoDealForm extends r.Component{constructor(e){super(e),this.handleAmountInputFocus=()=>{this.hidePanel(),this.setInputFocus("amount")},this.handleTimePickerInputFocus=()=>{this.setInputFocus("duration")},this.state={inputInFocus:null},this.toggleOrderForm=this.toggleOrderForm.bind(this),this.toggleOneClick=this.toggleOneClick.bind(this),this.toggleHoldUse=this.toggleHoldUse.bind(this),this.hideDeposit=this.hideDeposit.bind(this),this.hideTimePicker=this.hideTimePicker.bind(this),this.hidePanel=this.hidePanel.bind(this),this.hidePanelAsync=this.hidePanelAsync.bind(this),this.clickOutAmountInput=this.clickOutAmountInput.bind(this)}hideTimePicker(){this.props.hidePanel(l.r.TimePicker),this.props.hidePanel(l.r.FixedDuration),"duration"===this.state.inputInFocus&&this.setInputFocus()}toggleOrderForm(){this.props.togglePanel(l.r.Order)}toggleOneClick(){this.props.togglePanel(l.r.OneClick)}clickOutAmountInput(){"amount"===this.state.inputInFocus&&this.setInputFocus()}toggleHoldUse(){this.props.togglePanel(l.r.HoldUse)}hideDeposit(){this.props.dealFormBootstrapService.panelService.panel===l.r.Deposit&&this.props.dealFormBootstrapService.amountService.setErrorVisibility(!1),this.props.hidePanel(l.r.Deposit)}clearConfirmations(){this.props.dealFormBootstrapService.boOpenDealService.clearConfirmations()}hidePanel(e){this.clearConfirmations(),this.props.hidePanel(e)}hidePanelAsync(e){this.clearConfirmations(),this.props.hidePanelAsync(e)}setInputFocus(e){this.setState({inputInFocus:e||null})}render(){const e=this.props,a=e.dealFormBootstrapService,s=e.panel,i=e.isOrders,n=e.isBottomSheet,A=e.isMultiChart,k=0!==a.inputs.selectedStrike.id;return r.createElement("div",{className:o("deal-form-alpha",{"deal-form-alpha_multi-chart":A})},r.createElement(c.T.Provider,{value:A},r.createElement(E.z,{dealOrderService:a.dealOrderService,toggleOrderForm:this.toggleOrderForm}),r.createElement("div",{className:"deal-form-alpha__block"},r.createElement(m.l,{inState:s===l.r.Deposit},r.createElement(p.M,{hidePanel:this.hideDeposit,panel:l.r.Deposit},r.createElement(y.O,{amountService:a.amountService,position:"left"}))),r.createElement(p.M,{hidePanel:this.clickOutAmountInput},r.createElement(_.H,{amountService:a.amountService,boDealAttributesService:a.boDealAttributesService,riskFreeService:a.riskFreeService,isFocus:"amount"===this.state.inputInFocus,onFocus:this.handleAmountInputFocus,isMultiChart:A}))),r.createElement("div",{className:"deal-form-alpha__block"},r.createElement(p.M,{hidePanel:this.hideTimePicker,panel:l.r.TimePicker},r.createElement(m.l,{className:a.inputs.isTutorialActive?"deal-form-animbox_is-tutorial":"",inState:s===l.r.TimePicker},r.createElement(u.H,{hideTimePicker:this.hideTimePicker,dealDurationService:a.dealDurationService,dealTimeService:a.dealTimeService,timePickerService:a.timePickerService,dealOrderService:a.dealOrderService})),r.createElement(m.l,{className:"deal-form-animbox_position-by-bottom",inState:s===l.r.FixedDuration},r.createElement(S.z,{dealDurationService:a.dealDurationService})),r.createElement(d.l,{panelService:a.panelService,dealDurationService:a.dealDurationService,dealOrderService:a.dealOrderService,dealTimeService:a.dealTimeService,timePickerService:a.timePickerService,boDealAttributesService:a.boDealAttributesService,isMultiChart:A,selectedSignal:a.inputs.selectedSignal,isFocus:"duration"===this.state.inputInFocus,onFocus:this.handleTimePickerInputFocus}))),i||a.riskFreeService.isAvailable||a.inputs.selectedPair.locked?r.createElement("div",{className:"deal-form-alpha__block deal-form-alpha__block_risk-order-buttons"},r.createElement(f.c,{isPairLocked:a.inputs.selectedPair.locked,dealOrderService:a.dealOrderService,hidePanel:this.hidePanel,isOrders:i,panel:s,riskFreeService:a.riskFreeService,togglePanel:this.props.togglePanel,isTutorialActive:a.inputs.isTutorialActive,isBottomSheet:n})):null,r.createElement("div",{className:"deal-form-alpha__block deal-form-alpha__block_no-padding"},r.createElement(h.Q,{boOpenDealService:a.boOpenDealService,panelService:a.panelService,boCreateOrderService:a.boCreateOrderService,dealOrderService:a.dealOrderService,boDealAttributesService:a.boDealAttributesService,timePickerService:a.timePickerService,dealTimeService:a.dealTimeService,riskFreeService:a.riskFreeService,selectedSignal:a.inputs.selectedSignal,onCloseSignalsTooltip:a.inputs.onCloseSignalsTooltip,isOrders:i,dealFormBootstrapService:a}),n?r.createElement(b.v,{opened:s===l.r.OneClick,toggleSheet:this.hidePanel},r.createElement(v.B,{boOpenDealService:a.boOpenDealService,boDealAttributesService:a.boDealAttributesService,amountService:a.amountService,timePickerService:a.timePickerService,dealTimeService:a.dealTimeService,dealDurationService:a.dealDurationService})):r.createElement(m.l,{className:"deal-form-animbox_position-by-bottom",inState:s===l.r.OneClick,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(p.M,{hidePanel:this.hidePanelAsync,panel:l.r.OneClick},r.createElement(v.B,{position:"left-bottom",boOpenDealService:a.boOpenDealService,boDealAttributesService:a.boDealAttributesService,amountService:a.amountService,timePickerService:a.timePickerService,dealTimeService:a.dealTimeService,dealDurationService:a.dealDurationService,onCancel:this.toggleOneClick}))),r.createElement(m.l,{inState:s===l.r.HoldUse,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(p.M,{hidePanel:this.hidePanelAsync,panel:l.r.HoldUse},r.createElement(g.l,{position:"left-bottom",boOpenDealService:a.boOpenDealService,onCancel:this.toggleHoldUse})))),r.createElement(C.y,{active:!k&&!a.dealOrderService.isOrder,isMultiChart:A},r.createElement(T.M,{amount:a.amountService.amount,winperc:a.inputs.selectedPair.winperc,currency:a.inputs.selectedAccount.currencyName,isMultiChart:A}))))}};A=(0,i.gn)([n.observer],A)},76533:(e,a,s)=>{"use strict";s.d(a,{O:()=>p});var i=s(49491),r=s(27378),n=s(73598),o=s(37488),l=s(87601),c=s(76100),d=s(98458),u=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943),s(8280),s(17302),s(95029),s(60042),s(77740),s(17016),s(79472),s(1094),s(27588),s(92657),s(7034),s(13564),s(52229),s(18571),s(57140),s(56391),s(99767),s(3259),s(92513),s(72017),s(15181)),m=s(4519);const p=e=>{const a=(0,o.useMediaQuery)({maxWidth:l.j$.BREAKPOINT_768,orientation:"portrait"});return r.createElement(n.Qj,null,(()=>{const s=(e.dealFormBootstrapService.inputs.selectedPair.locked||e.dealFormBootstrapService.inputs.selectedPair.lockedTrading)&&!e.dealFormBootstrapService.dealOrderService.isOrder;let n=null;return a&&(n=s?r.createElement(d.t,{dealFormBootstrapService:e.dealFormBootstrapService,accountType:e.dealFormBootstrapService.inputs.selectedAccount.type,boDealAttributesService:e.dealFormBootstrapService.boDealAttributesService,dealOrderService:e.dealFormBootstrapService.dealOrderService,isTutorialActive:e.dealFormBootstrapService.inputs.isTutorialActive,isBottomSheet:e.dealFormBootstrapService.inputs.isBottomSheet}):r.createElement(u.J,i({},e))),a?n:r.createElement(c.D,null,r.createElement(c.V,{active:s},r.createElement(d.t,{dealFormBootstrapService:e.dealFormBootstrapService,accountType:e.dealFormBootstrapService.inputs.selectedAccount.type,boDealAttributesService:e.dealFormBootstrapService.boDealAttributesService,dealOrderService:e.dealFormBootstrapService.dealOrderService,isTutorialActive:e.dealFormBootstrapService.inputs.isTutorialActive,isBottomSheet:e.dealFormBootstrapService.inputs.isBottomSheet})),r.createElement(c.V,{active:!s,toLeft:!0},r.createElement(m.Q,i({},e))))}))}},72821:(e,a,s)=>{"use strict";s.d(a,{D:()=>c});var i=s(59312),r=s(27378),n=s(50649),o=s(82739),l=s(76533);let c=class BoDealFormContainerDefault extends r.Component{constructor(e){super(e),this.dealFormBootstrapService=new o.t(e.inputs)}componentWillUnmount(){this.dealFormBootstrapService.stop()}render(){return r.createElement(l.O,{dealFormBootstrapService:this.dealFormBootstrapService,panel:this.dealFormBootstrapService.panelService.panel,showPanel:this.dealFormBootstrapService.panelService.showPanel,togglePanel:this.dealFormBootstrapService.panelService.togglePanel,hidePanel:this.dealFormBootstrapService.panelService.hidePanel,hidePanelAsync:this.dealFormBootstrapService.panelService.hidePanelAsync,isMultiChart:this.dealFormBootstrapService.inputs.isMultiChart,isOrders:this.dealFormBootstrapService.inputs.isOrders,isBottomSheet:this.dealFormBootstrapService.inputs.isBottomSheet,openDealFormSheet:this.dealFormBootstrapService.inputs.openDealFormSheet})}};c=(0,i.gn)([n.observer],c)},15181:(e,a,s)=>{"use strict";s.d(a,{J:()=>S});var i=s(59312),r=s(27378),n=s(50649),o=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),l=(s(8280),s(87134)),c=(s(17302),s(95029),s(68516),s(17435),s(30362),s(34966),s(58493)),d=(s(3136),s(60042),s(77740),s(61922)),u=s(46313),m=s(63819),p=s(39755),h=(s(37488),s(52360)),v=s(7391),g=s(99485),_=s(99137),f=s(56808),E=s(61295);let S=class BoMobileDealForm extends r.Component{constructor(e){super(e),this.handleAmountInputFocus=e=>{this.setInputFocus(e,"amount")},this.handleTimePickerInputFocus=e=>{this.setInputFocus(e,"duration")},this.state={inputInFocus:null},this.toggleOrderForm=this.toggleOrderForm.bind(this),this.toggleOneClick=this.toggleOneClick.bind(this),this.toggleHoldUse=this.toggleHoldUse.bind(this),this.showTimePicker=this.showTimePicker.bind(this),this.hideTimePicker=this.hideTimePicker.bind(this),this.hidePanel=this.hidePanel.bind(this),this.hidePanelAsync=this.hidePanelAsync.bind(this)}clearConfirmations(){this.props.dealFormBootstrapService.boOpenDealService.clearConfirmations()}showTimePicker(){this.props.showPanel(o.r.TimePicker)}hideTimePicker(){this.props.hidePanel(o.r.TimePicker)}toggleOrderForm(){this.props.togglePanel(o.r.Order)}toggleOneClick(){this.props.togglePanel(o.r.OneClick)}toggleHoldUse(){this.props.togglePanel(o.r.HoldUse)}setInputFocus(e,a){this.setState({inputInFocus:e&&a?a:null})}hidePanel(e){this.clearConfirmations(),this.props.hidePanel(e)}hidePanelAsync(e){this.clearConfirmations(),this.props.hidePanelAsync(e)}render(){const e=this.props,a=e.dealFormBootstrapService,s=e.panel,i=e.isOrders,n=e.isBottomSheet,S=e.isMultiChart,y=0!==a.inputs.selectedStrike.id;return r.createElement("div",{className:"bo-mobile-deal-form-alpha"},r.createElement("div",{className:"bo-mobile-deal-form-alpha__block"},n?r.createElement(g.v,{opened:s===o.r.OneClick,toggleSheet:this.hidePanel},r.createElement(m.B,{boOpenDealService:a.boOpenDealService,boDealAttributesService:a.boDealAttributesService,amountService:a.amountService,timePickerService:a.timePickerService,dealTimeService:a.dealTimeService,dealDurationService:a.dealDurationService})):r.createElement(d.l,{inState:s===o.r.OneClick,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(l.M,{hidePanel:this.hidePanelAsync,panel:o.r.OneClick},r.createElement(m.B,{position:"top",boOpenDealService:a.boOpenDealService,boDealAttributesService:a.boDealAttributesService,amountService:a.amountService,timePickerService:a.timePickerService,dealTimeService:a.dealTimeService,dealDurationService:a.dealDurationService,onCancel:this.toggleOneClick}))),r.createElement(d.l,{inState:s===o.r.HoldUse,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(l.M,{hidePanel:this.hidePanelAsync,panel:o.r.HoldUse},r.createElement(v.l,{position:"top",boOpenDealService:a.boOpenDealService,onCancel:this.toggleHoldUse}))),r.createElement(f.q,null,r.createElement(_.B,{active:!y&&!a.dealOrderService.isOrder,height:24},r.createElement(E.M,{amount:a.amountService.amount,winperc:a.inputs.selectedPair.winperc,currency:a.inputs.selectedAccount.currencyName}))),r.createElement("div",{className:"bo-mobile-deal-form-alpha-block-inputs"},r.createElement("div",{className:"bo-mobile-deal-form-alpha-block-inputs__duration"},r.createElement(c.l,{panelService:a.panelService,dealDurationService:a.dealDurationService,dealOrderService:a.dealOrderService,dealTimeService:a.dealTimeService,timePickerService:a.timePickerService,boDealAttributesService:a.boDealAttributesService,selectedSignal:a.inputs.selectedSignal,isFocus:"duration"===this.state.inputInFocus,isMultiChart:S,onFocus:this.handleTimePickerInputFocus})),r.createElement("div",{className:"bo-mobile-deal-form-alpha-block-inputs__amount"},r.createElement(p.H,{amountService:a.amountService,boDealAttributesService:a.boDealAttributesService,riskFreeService:a.riskFreeService,isMultiChart:S,isFocus:"amount"===this.state.inputInFocus,onFocus:this.handleAmountInputFocus}))),r.createElement("div",{className:"bo-mobile-deal-form-alpha-block-buttons"},r.createElement(u.Q,{inline:!0,panelService:a.panelService,boOpenDealService:a.boOpenDealService,boCreateOrderService:a.boCreateOrderService,dealOrderService:a.dealOrderService,boDealAttributesService:a.boDealAttributesService,timePickerService:a.timePickerService,dealTimeService:a.dealTimeService,riskFreeService:a.riskFreeService,selectedSignal:a.inputs.selectedSignal,onCloseSignalsTooltip:a.inputs.onCloseSignalsTooltip,dealFormBootstrapService:a,isOrders:i},r.createElement("div",{className:"deal-form-alpha__block deal-form-alpha__block_no-padding"},r.createElement(h.c,{dealOrderService:a.dealOrderService,hidePanel:this.hidePanel,isAdaptive:!0,isOrders:i,panel:s,riskFreeService:a.riskFreeService,isTutorialActive:a.inputs.isTutorialActive,togglePanel:this.props.togglePanel,isBottomSheet:n,isPairLocked:a.inputs.selectedPair.locked}))))))}};S=(0,i.gn)([n.observer],S)},82739:(e,a,s)=>{"use strict";s.d(a,{t:()=>BoDealFormBootstrapService});var i=s(49491),r=s(60521),n=s(1712),o=s(37876),l=(s(22252),s(90349)),c=s(22724),d=s(47817),u=s(58685),m=s(37711),p=s(7264),h=(s(23626),s(91667),s(51066),s(22327),s(56529)),v=s(59943),g=s(8280),_=(s(68516),s(17435),s(45498)),f=(s(30362),s(23735)),E=(s(30902),s(73609),s(12327));class BoDealFormBootstrapService{constructor(e){this.inputs=e;const a=e.dealSum,s=e.is24Format,r=e.currentQuote,S=e.serverTimeStamp,y=e.selectedPair,b=e.currency,C=e.showTopMessage,T=e.startDeal,A=e.isOneClick,k=e.isHoldUse,w=e.selectedAccount,N=e.createOrder,R=e.disabledControls,I=e.locale,D=e.saveOneClick,O=e.saveIgnoreHoldUse,L=e.saveDealSum,M=e.defaultPair,P=e.openRechargeTooltip,x=e.selectPair,F=e.cachedDurationList,B=e.defaultDurationList,Z=e.cachedTimeList,U=e.refillDemoBalance,H=e.selectedStrike,G=e.updateDurationPresets,V=e.updateTimePresets,W=e.saveDuration,j=e.defaultDuration,z=e.defaultTimeClose,q=e.hasActiveTimeDeal,K=e.isEndTurboDeals,Y=e.savePickerType,X=e.defaultPickerType,J=e.saveTimeClose,Q=e.openDealFormSheet,$=e.isBottomSheet,ee=e.riskFreeTradesUserValues,te=e.onChangePanel,ae=e.onToggleOrder,se=e.isTutorialActive,ie=e.isMartinGale,re=e.hasFixedDurationDeal,ne=e.recommendedAssets,oe=e.dealAmounts,le=y.allowedFastDealsDurations,ce=y.timeCloseTrading,de=y.timeOpen,ue=y.timeOpenTrading,me=y.id,pe=y.precision,he=y.minDuration,ve=y.maxDuration,ge=y.group,_e=y.locked,fe=y.lockedTrading,Ee=y.lockedReason,Se=y.lockedTradingReason,ye=y.title,be=y.winperc,Ce=y.quick,Te=w.amount,Ae=w.type,ke=w.id,we=w.currencyName,Ne=w.currencyNameForLimits,Re=w.refill,Ie=(0,_.B)(oe,Ne),De=Ie.min,Oe=Ie.max;this.timePickerService=new g.B({pair:{quick:Ce,allowedFastDealsDurations:le},savePickerType:Y,onPickerTypeChange:this.handelPickerTypeChange.bind(this),defaultPickerType:X}),this.dealDurationService=new u.A({serverTime:S,defaultDuration:j,pair:{allowedFastDealsDurations:le,minDuration:he,maxDuration:ve,lockedTrading:fe,timeCloseTrading:ce,quick:Ce},defaultDurationList:[...B],cachedDurationList:[...F],saveDuration:W,hasFixedDurationDeal:re,isFastDurationPicker:()=>"fastDuration"===this.timePickerService.pickerType,setPickerType:e=>{this.timePickerService.setPickerType(e)}}),this.dealTimeService=new p.q({serverTime:S,is24Format:s,pair:{minDuration:he,maxDuration:ve,lockedTrading:fe,timeCloseTrading:ce,id:me},defaultDurationList:[...B],cachedTimeList:[...Z],locale:I,hasActiveTimeDeal:q,isEndTurboDeals:K,saveTimeClose:J,defaultTimeClose:z,isOrder:!1}),this.amountService=new n.F({currency:b,amount:a,account:{amount:Te,type:Ae,refill:Re,id:ke},sumMax:Oe,pair:{id:me,sumMin:De},locale:I,openRechargeTooltip:P,refillDemoBalance:U,saveAmount:L,isMartinGale:ie,dealAmounts:oe},o.i),this.panelService=new h.K({onChangePanel:te}),this.boDealAttributesService=new c.A({currency:b,currentQuote:r,defaultPair:M?{id:M.id,title:M.title,project:M.project}:null,recommendedAssets:ne,pair:{id:me,group:ge,minAmount:De,maxAmount:Oe,locked:_e,lockedTrading:fe,lockedReason:Ee,lockedTradingReason:Se,timeOpen:de,timeOpenTrading:ue,title:ye,precision:pe,winperc:be,minDuration:he,maxDuration:ve,quick:Ce},account:{id:ke,amount:Te,type:Ae},disabledControls:i({},R),locale:I,selectPair:x,is24Format:s,selectedStrike:i({},H),openDealFormSheet:Q,isBottomSheet:$,serverTime:S}),this.dealOrderService=new m.VZ({disabledControls:i({},R),is24Format:s,currentQuote:r,serverTimeStamp:1e3*S,pairTimeClose:1e3*ce,pairTimeOpen:1e3*ue,locale:I,pairId:me,pairTitle:ye,pairPrecision:pe,pairLocked:_e||fe,minDuration:he,needWinperc:!0,isOpenedPanel:this.panelService.panel===v.r.Order,duration:j,onToggleOrder:ae,sendGaOrderSubmit:()=>{const e=this.inputs.selectedPair,a=e.id;var s;e.locked?(0,f.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"closed_asset/to_order",eventLabel:"".concat(a,"/ftt/").concat("demo"===this.inputs.selectedAccount.type?"demo":"real_current_account")}):(0,f.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"orders/set_up",eventLabel:"".concat(a,"_ftt_").concat("time"===(null==this||null===(s=this.dealOrderService)||void 0===s?void 0:s.orderType)?"clock":"quote","_").concat("demo"===this.inputs.selectedAccount.type?"demo":"real_current_account")})},getDurationLimits:()=>this.dealDurationService.getDurationLimits()}),this.boCreateOrderService=new l.p({account:{type:Ae},getDealAttributes:this.getOpenDealParams.bind(this),getOrderAttributes:this.getCreateOrderParams.bind(this),validateOrder:this.dealOrderService.validate,getValidationErrorMessage:this.amountService.getValidationErrorMessage,getDurationValidationErrorMessage:this.dealDurationService.getValidationErrorMessage,getTimeCloseValidationErrorMessage:this.dealTimeService.getValidationErrorMessage,showTopMessage:C,createOrder:N,clearOrder:this.dealOrderService.cancelOrder,showDurationValidation:this.dealOrderService.showDurationValidation}),this.riskFreeService=new E.L({account:{type:Ae,currencyName:we},riskFreeTradesUserValues:ee,showTopMessage:C}),this.boOpenDealService=new d.N({getValidationErrorMessage:this.amountService.getValidationErrorMessage,setErrorVisibility:this.amountService.setErrorVisibility,getDurationValidationErrorMessage:this.dealDurationService.getValidationErrorMessage,getTimeCloseValidationErrorMessage:this.dealTimeService.getValidationErrorMessage,getDealAttributes:this.getOpenDealParams.bind(this),getActivatedRiskFreeDealId:this.getActivatedRiskFreeDealId.bind(this),showTopMessage:C,startDeal:T,isHoldUse:k,isOneClick:A,saveOneClick:D,saveIgnoreHoldUse:O,showPanel:this.panelService.showPanel,hidePanel:this.panelService.hidePanel,updateDurationPresets:G,updateTimePresets:V,serverTime:S,deactivateRiskFree:this.riskFreeService.startTrade,isTutorialActive:se,account:{type:Ae,amount:Te},getPanel:()=>null}),this.start()}start(){this.inputs.exportApi({startDeal:this.boOpenDealService.startDeal,sumUp:this.amountService.increaseDealAmount,sumDown:this.amountService.decreaseDealAmount,setAmount:this.amountService.setAmount,startGambit:()=>this.dealOrderService.isOrder?this.boCreateOrderService.startGambit():this.boOpenDealService.startGambit(),getDurationErrorMessage:this.dealDurationService.getValidationErrorMessage,increaseDuration:this.dealDurationService.increaseDuration,decreaseDuration:this.dealDurationService.decreaseDuration,getTimeCloseErrorMessage:this.dealTimeService.getValidationErrorMessage,increaseTimeClose:this.dealTimeService.increaseTimeClose,decreaseTimeClose:this.dealTimeService.decreaseTimeClose,setDuration:this.dealDurationService.setDuration,setTimeClose:this.dealTimeService.setTimeClose,setPickerType:this.timePickerService.setPickerType,setRiskFreeTrades:this.riskFreeService.updateTrades,getIsOrder:()=>this.dealOrderService.isOrder,getIsRiskFree:()=>this.riskFreeService.isActivated,showPanel:e=>{this.panelService.showPanel(e)}}),this.amountService.updateInputs({sumMax:this.getSumMax()}),this.dealTimeService.updateInputs({isOrder:this.dealOrderService.isOrder}),this.boOpenDealService.updateInputs({getPanel:()=>this.panelService.panel}),this.inputs.setSumMax(this.getSumMax()),this.inputs.tradeDirection&&this.boOpenDealService.showOneClickDeal(this.inputs.tradeDirection),this.disposers=[(0,r.reaction)((()=>this.inputs.serverTimeStamp),(e=>{this.dealDurationService.updateInputs({serverTime:e}),this.dealTimeService.updateInputs({serverTime:e}),this.boDealAttributesService.updateInputs({serverTime:e}),this.dealOrderService.updateInputs({serverTimeStamp:1e3*e})})),(0,r.reaction)((()=>this.inputs.currentQuote),(e=>{this.boDealAttributesService.updateInputs({currentQuote:e}),this.dealOrderService.updateInputs({currentQuote:e})})),(0,r.reaction)((()=>this.inputs.is24Format),(e=>{this.dealOrderService.updateInputs({is24Format:e}),this.dealTimeService.updateInputs({is24Format:e})})),(0,r.reaction)((()=>this.inputs.isOneClick),(e=>this.boOpenDealService.updateInputs({isOneClick:e}))),(0,r.reaction)((()=>this.inputs.isHoldUse),(e=>this.boOpenDealService.updateInputs({isHoldUse:e}))),(0,r.reaction)((()=>i({},this.inputs.selectedAccount)),(e=>{this.boDealAttributesService.updateInputs({account:{amount:e.amount,type:e.type,id:e.id}}),this.amountService.updateInputs({account:{amount:e.amount,type:e.type,refill:e.refill,id:e.id}}),this.boOpenDealService.updateInputs({account:{type:e.type,amount:e.amount}}),this.riskFreeService.updateInputs({account:{type:e.type,currencyName:e.currencyName}}),this.boCreateOrderService.updateInputs({account:{type:e.type}})})),(0,r.reaction)((()=>i({},this.inputs.dealAmounts)),(e=>{const a=this.inputs.selectedPair.id,s=this.inputs.selectedAccount,i=s.amount,r=s.type,n=s.refill,o=s.id,l=s.currencyNameForLimits,c=(0,_.B)(e,l),d=c.min,u=c.max;this.amountService.updateInputs({sumMax:u,pair:{id:a,sumMin:d},account:{amount:i,type:r,refill:n,id:o}})})),(0,r.reaction)((()=>[i({},this.inputs.selectedPair),this.inputs.selectedAccount.currencyNameForLimits]),(()=>{const e=this.inputs.selectedPair,a=e.id,s=e.timeCloseTrading,i=e.timeOpen,r=e.timeOpenTrading,n=e.group,o=e.locked,l=e.lockedTrading,c=e.lockedReason,d=e.lockedTradingReason,u=e.title,m=e.maxDuration,p=e.minDuration,h=e.precision,v=e.winperc,g=e.allowedFastDealsDurations,f=e.quick,E=this.inputs.selectedAccount.currencyNameForLimits,S=this.inputs.dealAmounts,y=(0,_.B)(S,E),b=y.min,C=y.max;this.amountService.updateInputs({sumMax:this.getSumMax(),pair:{id:a,sumMin:b}}),this.dealTimeService.updateInputs({pair:{timeCloseTrading:s,lockedTrading:l,maxDuration:m,minDuration:p,id:a}}),this.dealDurationService.updateInputs({pair:{timeCloseTrading:s,lockedTrading:l,maxDuration:m,minDuration:p,quick:f,allowedFastDealsDurations:g}}),this.dealOrderService.updateInputs({pairId:a,pairTitle:u,pairTimeClose:1e3*s,pairTimeOpen:1e3*r,pairPrecision:h,pairLocked:o||l}),this.boDealAttributesService.updateInputs({pair:{id:a,maxAmount:C,minAmount:b,group:n,locked:o,lockedTrading:l,lockedReason:c,lockedTradingReason:d,timeOpen:i,timeOpenTrading:r,title:u,precision:h,winperc:v,minDuration:p,maxDuration:m,quick:f}}),this.timePickerService.updateInputs({pair:{quick:f,allowedFastDealsDurations:g}})})),(0,r.reaction)((()=>this.inputs.currency),(e=>{this.boDealAttributesService.updateInputs({currency:e}),this.amountService.updateInputs({currency:e})})),(0,r.reaction)((()=>i({},this.inputs.disabledControls)),(e=>{this.dealOrderService.updateInputs({disabledControls:e}),this.boDealAttributesService.updateInputs({disabledControls:e})})),(0,r.reaction)((()=>[...this.inputs.cachedDurationList]),(e=>{this.dealDurationService.updateInputs({cachedDurationList:e})})),(0,r.reaction)((()=>[...this.inputs.cachedTimeList]),(e=>{this.dealTimeService.updateInputs({cachedTimeList:e})})),(0,r.reaction)((()=>{const e=this.inputs;return{hasActiveTimeDeal:e.hasActiveTimeDeal,isEndTurboDeals:e.isEndTurboDeals}}),(e=>{let a=e.hasActiveTimeDeal,s=e.isEndTurboDeals;this.dealTimeService.updateInputs({hasActiveTimeDeal:a,isEndTurboDeals:s})})),(0,r.reaction)((()=>i({},this.inputs.selectedStrike)),(e=>{this.boDealAttributesService.updateInputs({selectedStrike:e})})),(0,r.reaction)((()=>this.inputs.isBottomSheet),(e=>{this.boDealAttributesService.updateInputs({isBottomSheet:e})})),(0,r.reaction)((()=>this.inputs.isMartinGale),(e=>{this.amountService.updateInputs({isMartinGale:e})})),(0,r.reaction)((()=>this.riskFreeService.activatedAmount),(e=>{this.amountService.updateInputs({riskFreeAmount:e||void 0}),e&&this.amountService.setAmount(this.amountService.getValidAmount(e))})),(0,r.reaction)((()=>this.getSumMax()),(e=>{this.amountService.updateInputs({sumMax:e}),this.inputs.setSumMax(this.getSumMax())})),(0,r.reaction)((()=>this.dealOrderService.isOrder),(e=>{this.dealTimeService.updateInputs({isOrder:e})})),(0,r.reaction)((()=>this.inputs.isTutorialActive),(e=>{this.boOpenDealService.updateInputs({isTutorialActive:e})})),(0,r.reaction)((()=>this.inputs.isOrders),(e=>{!e&&this.dealOrderService.isOrder&&this.dealOrderService.cancelOrder()})),(0,r.reaction)((()=>this.inputs.selectedPair.minDuration),(e=>{this.dealOrderService.updateInputs({minDuration:e})})),(0,r.reaction)((()=>this.panelService.panel===v.r.Order),(e=>{this.dealOrderService.updateInputs({isOpenedPanel:e})})),(0,r.reaction)((()=>this.inputs.hasFixedDurationDeal),(e=>{this.dealDurationService.updateInputs({hasFixedDurationDeal:e})})),(0,r.reaction)((()=>this.inputs.defaultPair),(()=>{this.boDealAttributesService.updateInputs({defaultPair:this.inputs.defaultPair})})),(0,r.reaction)((()=>this.inputs.recommendedAssets),(()=>{this.boDealAttributesService.updateInputs({recommendedAssets:this.inputs.recommendedAssets})})),(0,r.reaction)((()=>this.dealDurationService.duration),(e=>{this.dealOrderService.updateInputs({duration:e})}))]}getActivatedRiskFreeDealId(){return this.riskFreeService.isActivated&&this.riskFreeService.activatedDealId?this.riskFreeService.activatedDealId:null}getOpenDealParams(){return{sum:this.amountService.amount,pair:this.inputs.selectedPair.id,pickerType:this.timePickerService.pickerType,duration:this.dealDurationService.duration,timeClose:this.dealTimeService.timeClose,strikeId:this.inputs.selectedStrike.id}}getCreateOrderParams(){return this.dealOrderService.currentOrder?i({serverTime:this.inputs.serverTimeStamp},this.dealOrderService.currentOrder):null}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}handelPickerTypeChange(e){if(this.timePickerService&&this.dealDurationService){let a=this.dealDurationService.duration;if("time"===e){const e=this.dealDurationService.serverTimeRounded+(this.dealDurationService.duration<60?60:this.dealDurationService.duration);this.dealTimeService.setTimeClose(this.dealTimeService.getValidValue(e))}else if("fastDuration"===e)a=this.inputs.selectedPair.minDuration;else if("duration"===e)if(this.dealDurationService.isFixedDuration)a=this.dealDurationService.duration<60?this.dealDurationService.duration:this.inputs.selectedPair.minDuration;else{const e=120,s=this.dealTimeService.timeClose-this.inputs.serverTimeStamp,i=this.dealTimeService.timeClose-this.dealTimeService.serverTimeRounded;a=this.dealDurationService.getValidValue(s<=e?60:i)}this.dealDurationService.setDuration(a)}}getSumMax(){const e=this.inputs.selectedAccount,a=e.currencyNameForLimits,s=e.amount,i=this.inputs.dealAmounts,r=(0,_.B)(i,a).max;return this.riskFreeService.activatedAmount&&r>this.riskFreeService.activatedAmount?Math.min(s,this.riskFreeService.activatedAmount):Math.min(s,r)}}},24260:(e,a,s)=>{"use strict";s.d(a,{y:()=>A});var i=s(59312),r=s(27378),n=s(50649),o=s(60042),l=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),c=(s(8280),s(82844)),d=s(23735),u=(s(29916),s(71549)),m=s(98186),p=s(51062),h=s(3070),v=(s(95029),s(77740),s(75568)),g=s(65585),_=s(79789),f=s(62586),E=s(48663),S=s(61922),y=s(87134),b=s(699),C=s(99485),T=s(99583);let A=class FxDealForm extends r.Component{constructor(e){super(e),this.toggleLimits=this.toggleLimits.bind(this),this.toggleOrderForm=this.toggleOrderForm.bind(this),this.toggleMultiplicator=this.toggleMultiplicator.bind(this),this.hideDeposit=this.hideDeposit.bind(this),this.hidePanel=this.hidePanel.bind(this),this.hidePanelAsync=this.hidePanelAsync.bind(this)}toggleLimits(){this.props.isBottomSheet?this.props.openDealFormSheet("fxLimits"):this.props.togglePanel(l.r.Limits)}clearConfirmations(){this.props.dealFormBootstrapService.fxOpenDealService.clearConfirmations()}toggleOrderForm(){this.props.dealFormBootstrapService.panelService.panel!==l.r.Order&&(0,d.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"open_asset/to_order",eventLabel:"".concat(this.props.dealFormBootstrapService.inputs.selectedPair.id,"_on_fx_").concat("demo"===this.props.dealFormBootstrapService.inputs.selectedAccount.type?"demo":"real_current_account")}),this.props.togglePanel(l.r.Order)}toggleMultiplicator(){this.props.isBottomSheet?this.props.openDealFormSheet("fxMultiplicator"):this.props.togglePanel(l.r.Multiplicator)}hideDeposit(){this.props.dealFormBootstrapService.panelService.panel===l.r.Deposit&&this.props.dealFormBootstrapService.amountService.setErrorVisibility(!1),this.props.hidePanel(l.r.Deposit)}hidePanel(e){this.clearConfirmations(),this.props.hidePanel(e)}hidePanelAsync(e){this.clearConfirmations(),this.props.hidePanelAsync(e)}render(){const e=this.props,a=e.dealFormBootstrapService,s=e.panel,i=e.isLimits,n=e.isOrders,d=e.isBottomSheet,A=e.isMultiChart,k=e.onHoverButtonUp,w=e.onHoverButtonDown;return r.createElement("div",{className:o("deal-form-alpha",{"deal-form-alpha_multi-chart":A})},r.createElement(E.z,{dealOrderService:a.dealOrderService,toggleOrderForm:this.toggleOrderForm}),r.createElement("div",{className:"deal-form-alpha__block"},r.createElement(S.l,{inState:s===l.r.Deposit},r.createElement(y.M,{hidePanel:this.hideDeposit,panel:l.r.Deposit},r.createElement(b.O,{amountService:a.amountService,position:"left"}))),d?null:r.createElement(S.l,{inState:s===l.r.Multiplicator},r.createElement(y.M,{hidePanel:this.hidePanel,panel:l.r.Multiplicator},r.createElement(h.S,{position:"left",fxDealAttributesService:a.fxDealAttributesService,onClick:this.toggleMultiplicator}))),r.createElement(p.H,{amountService:a.amountService,fxDealAttributesService:a.fxDealAttributesService,fxLimitService:a.fxLimitService,isLimits:i,isMultiChart:A,toggleMultiplicator:this.toggleMultiplicator,toggleLimits:this.toggleLimits})),i?r.createElement("div",{className:"deal-form-alpha__block"},d?null:r.createElement(S.l,{inState:s===l.r.Limits},r.createElement(y.M,{hidePanel:this.hidePanel,panel:l.r.Limits},r.createElement(u.K,{position:"left",limitService:a.fxLimitService,dealAttributesService:a.fxDealAttributesService,toggle:this.toggleLimits}))),r.createElement(m.d,{title:r.createElement(c._,{id:"deal_form_limit_button_title",defaultMessage:"Auto-closing"}),limitService:a.fxLimitService,dealAttributesService:a.fxDealAttributesService,panelService:a.panelService,isMultiChart:A,onClick:this.toggleLimits})):null,n||a.inputs.selectedPair.locked?r.createElement("div",{className:"deal-form-alpha__block deal-form-alpha__block_risk-order-buttons"},r.createElement(T.Y,{isPairLocked:a.inputs.selectedPair.locked,dealOrderService:a.dealOrderService,hidePanel:this.hidePanel,isOrders:n,panel:s,toggleOrderForm:this.toggleOrderForm,isBottomSheet:d})):null,r.createElement("div",{className:"deal-form-alpha__block deal-form-alpha__block_no-padding"},r.createElement(g.x,{panelService:a.panelService,fxCreateOrderService:a.fxCreateOrderService,fxOpenDealService:a.fxOpenDealService,dealOrderService:a.dealOrderService,fxDealAttributesService:a.fxDealAttributesService,selectedSignal:a.inputs.selectedSignal,onCloseSignalsTooltip:a.inputs.onCloseSignalsTooltip,onHoverUp:k,onHoverDown:w}),d?r.createElement(C.v,{opened:s===l.r.OneClick,toggleSheet:this.hidePanel},r.createElement(_.i,{fxAmountService:a.amountService,fxOpenDealService:a.fxOpenDealService,fxLimitService:a.fxLimitService,fxDealAttributesService:a.fxDealAttributesService})):r.createElement(S.l,{inState:s===l.r.OneClick,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(y.M,{hidePanel:this.hidePanelAsync,panel:l.r.OneClick},r.createElement(_.i,{position:"left-bottom",fxAmountService:a.amountService,fxOpenDealService:a.fxOpenDealService,fxLimitService:a.fxLimitService,fxDealAttributesService:a.fxDealAttributesService,onCancel:this.hidePanelAsync}))),r.createElement(S.l,{inState:s===l.r.HoldUse,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(y.M,{hidePanel:this.hidePanelAsync,panel:l.r.HoldUse},r.createElement(f.l,{position:"left-bottom",fxOpenDealService:a.fxOpenDealService,onCancel:this.hidePanelAsync})))),r.createElement(v.$,{dealOrderService:a.dealOrderService,fxDealAttributesService:a.fxDealAttributesService}))}};A=(0,i.gn)([n.observer],A)},62593:(e,a,s)=>{"use strict";s.d(a,{O:()=>p});var i=s(49491),r=s(73598),n=s(27378),o=s(37488),l=s(87601),c=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943),s(8280),s(17302),s(95029),s(60042),s(77740),s(17016),s(79472),s(1094),s(27588),s(92657),s(7034),s(13564),s(52229),s(18571),s(57140),s(56391),s(99767),s(3259),s(92513),s(61054),s(11590),s(83898)),d=s(76100),u=s(24260),m=s(90252);const p=e=>{const a=(0,o.useMediaQuery)({maxWidth:l.j$.BREAKPOINT_768,orientation:"portrait"}),s=n.createElement(c.J,{dealFormBootstrapService:e.dealFormBootstrapService,accountType:e.dealFormBootstrapService.inputs.selectedAccount.type,fxDealAttributesService:e.dealFormBootstrapService.fxDealAttributesService,dealOrderService:e.dealFormBootstrapService.dealOrderService,isTutorialActive:e.dealFormBootstrapService.inputs.isTutorialActive,isBottomSheet:e.dealFormBootstrapService.inputs.isBottomSheet});return n.createElement(r.Qj,null,(()=>{const r=(e.dealFormBootstrapService.inputs.selectedPair.locked||e.dealFormBootstrapService.inputs.selectedPair.lockedBuy&&e.dealFormBootstrapService.inputs.selectedPair.lockedSell||e.dealFormBootstrapService.inputs.selectedPair.lockedTrading)&&!e.dealFormBootstrapService.dealOrderService.isOrder;let o=null;return a&&(o=r?s:n.createElement(m.b,i({},e))),a?o:n.createElement(d.D,null,n.createElement(d.V,{active:r},s),n.createElement(d.V,{active:!r,toLeft:!0},n.createElement(u.y,i({},e))))}))}},26549:(e,a,s)=>{"use strict";s.d(a,{E:()=>c});var i=s(59312),r=s(27378),n=s(50649),o=s(16059),l=s(62593);let c=class FxDealFormContainerDefault extends r.Component{constructor(e){super(e),this.dealFormBootstrapService=new o.w(e.inputs)}componentWillUnmount(){this.dealFormBootstrapService.stop()}render(){return r.createElement(l.O,{dealFormBootstrapService:this.dealFormBootstrapService,panel:this.dealFormBootstrapService.panelService.panel,showPanel:this.dealFormBootstrapService.panelService.showPanel,togglePanel:this.dealFormBootstrapService.panelService.togglePanel,hidePanel:this.dealFormBootstrapService.panelService.hidePanel,hidePanelAsync:this.dealFormBootstrapService.panelService.hidePanelAsync,isLimits:this.dealFormBootstrapService.inputs.isLimits,isMultiChart:this.dealFormBootstrapService.inputs.isMultiChart,isOrders:this.dealFormBootstrapService.inputs.isOrders,isBottomSheet:this.dealFormBootstrapService.inputs.isBottomSheet,openDealFormSheet:this.dealFormBootstrapService.inputs.openDealFormSheet,onHoverButtonUp:this.dealFormBootstrapService.inputs.onHoverButtonUp,onHoverButtonDown:this.dealFormBootstrapService.inputs.onHoverButtonDown})}};c=(0,i.gn)([n.observer],c)},90252:(e,a,s)=>{"use strict";s.d(a,{b:()=>b});var i=s(59312),r=s(27378),n=(s(1712),s(22252),s(90349),s(22724),s(47817),s(58685),s(37711),s(7264),s(23626),s(91667),s(51066),s(22327),s(56529),s(59943)),o=(s(8280),s(50649)),l=(s(29916),s(71549)),c=(s(98186),s(51062)),d=s(3070),u=(s(60042),s(95029),s(77740),s(75568)),m=s(65585),p=s(13011),h=(s(17302),s(17016),s(79472),s(1094),s(27588)),v=s(92657),g=(s(7034),s(13564),s(52229),s(18571),s(57140),s(56391),s(99767),s(3259)),_=s(61922),f=s(87134),E=(s(37488),s(79789)),S=s(62586),y=s(99485);let b=class FxMobileDealForm extends r.Component{constructor(e){super(e),this.toggleLimits=this.toggleLimits.bind(this),this.toggleOrderForm=this.toggleOrderForm.bind(this),this.toggleMultiplicator=this.toggleMultiplicator.bind(this),this.toggleOneClick=this.toggleOneClick.bind(this),this.toggleHoldUse=this.toggleHoldUse.bind(this),this.hidePanel=this.hidePanel.bind(this),this.hidePanelAsync=this.hidePanelAsync.bind(this)}clearConfirmations(){this.props.dealFormBootstrapService.fxOpenDealService.clearConfirmations()}toggleLimits(){this.props.isBottomSheet?this.props.openDealFormSheet("fxLimits"):this.props.togglePanel(n.r.Limits)}toggleOrderForm(){this.props.togglePanel(n.r.Order)}toggleMultiplicator(){this.props.isBottomSheet?this.props.openDealFormSheet("fxMultiplicator"):this.props.togglePanel(n.r.Multiplicator)}toggleOneClick(){this.props.togglePanel(n.r.OneClick)}toggleHoldUse(){this.props.togglePanel(n.r.HoldUse)}hidePanel(e){this.clearConfirmations(),this.props.hidePanel(e)}hidePanelAsync(e){this.clearConfirmations(),this.props.hidePanelAsync(e)}render(){const e=this.props,a=e.dealFormBootstrapService,s=e.panel,i=e.isLimits,o=e.isOrders,b=e.isBottomSheet,C=e.isMultiChart,T=e.onHoverButtonUp,A=e.onHoverButtonDown;return r.createElement("div",{className:"deal-form-alpha"},r.createElement(u.$,{isMobile:!0,dealOrderService:a.dealOrderService,fxDealAttributesService:a.fxDealAttributesService}),r.createElement("div",{className:"deal-form-alpha__block"},b?r.createElement(y.v,{opened:s===n.r.OneClick,toggleSheet:this.hidePanel},r.createElement(E.i,{fxAmountService:a.amountService,fxOpenDealService:a.fxOpenDealService,fxLimitService:a.fxLimitService,fxDealAttributesService:a.fxDealAttributesService})):r.createElement(_.l,{inState:s===n.r.OneClick,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(f.M,{hidePanel:this.hidePanelAsync,panel:n.r.OneClick},r.createElement(E.i,{position:"top",fxAmountService:a.amountService,fxOpenDealService:a.fxOpenDealService,fxLimitService:a.fxLimitService,fxDealAttributesService:a.fxDealAttributesService,onCancel:this.toggleOneClick}))),r.createElement(_.l,{inState:s===n.r.HoldUse,onExited:()=>{var e;return null===(e=a.panelService.transitionEndDeferred)||void 0===e?void 0:e.resolve()}},r.createElement(f.M,{hidePanel:this.hidePanelAsync,panel:n.r.HoldUse},r.createElement(S.l,{position:"top",fxOpenDealService:a.fxOpenDealService,onCancel:this.toggleHoldUse}))),b?null:r.createElement(_.l,{inState:s===n.r.Multiplicator},r.createElement(f.M,{hidePanel:this.hidePanel,panel:n.r.Multiplicator},r.createElement(d.S,{position:"top",fxDealAttributesService:a.fxDealAttributesService,onClick:this.toggleMultiplicator}))),b?r.createElement(g.D,{dealOrderService:a.dealOrderService,opened:s===n.r.Order,toggleOrderForm:this.toggleOrderForm}):r.createElement(_.l,{inState:s===n.r.Order},r.createElement(f.M,{hidePanel:this.hidePanel,panel:n.r.Order},r.createElement(v.f,{position:"top",toggleOrderForm:this.toggleOrderForm,dealOrderService:a.dealOrderService}))),b?null:r.createElement(_.l,{inState:s===n.r.Limits},r.createElement(f.M,{hidePanel:this.hidePanel,panel:n.r.Limits},r.createElement(l.K,{position:"top",limitService:a.fxLimitService,dealAttributesService:a.fxDealAttributesService,toggle:this.toggleLimits,onCancel:this.toggleLimits}))),r.createElement(c.H,{isMobile:!0,amountService:a.amountService,fxDealAttributesService:a.fxDealAttributesService,fxLimitService:a.fxLimitService,isLimits:i,isMultiChart:C,toggleMultiplicator:this.toggleMultiplicator,toggleLimits:this.toggleLimits})),r.createElement("div",{className:"deal-form-alpha__block"},r.createElement(m.x,{inline:!0,panelService:a.panelService,fxCreateOrderService:a.fxCreateOrderService,fxOpenDealService:a.fxOpenDealService,dealOrderService:a.dealOrderService,fxDealAttributesService:a.fxDealAttributesService,selectedSignal:a.inputs.selectedSignal,onCloseSignalsTooltip:a.inputs.onCloseSignalsTooltip,onHoverUp:T,onHoverDown:A},o||a.inputs.selectedPair.locked?r.createElement(p.O,{isOrderButton:!0,isRiskFreeButton:!1,renderOrderButton:r.createElement(h.F,{isMinified:!0,toggleOrderForm:this.toggleOrderForm,dealOrderService:a.dealOrderService})}):null)))}};b=(0,i.gn)([o.observer],b)},16059:(e,a,s)=>{"use strict";s.d(a,{w:()=>FxDealFormBootstrapService});var i=s(49491),r=s(60521),n=s(1712),o=(s(22252),s(40101)),l=(s(90349),s(22724),s(47817),s(58685),s(37711)),c=(s(7264),s(23626)),d=s(91667),u=s(51066),m=s(22327),p=s(56529),h=s(59943),v=(s(8280),s(68516),s(17435),s(45498)),g=(s(30362),s(23735));class FxDealFormBootstrapService{constructor(e){this.inputs=e;const a=e.dealSum,s=e.is24Format,r=e.currentQuote,_=e.serverTimeStamp,f=e.selectedPair,E=e.currency,S=e.multiplicator,y=e.showTopMessage,b=e.startDeal,C=e.isTrailingStop,T=e.isOneClick,A=e.isHoldUse,k=e.takeProfit,w=e.stopLoss,N=e.isLimits,R=e.selectedAccount,I=e.createOrder,D=e.disabledControls,O=e.locale,L=e.saveIgnoreHoldUse,M=e.saveOneClick,P=e.saveLimit,x=e.saveDealSum,F=e.saveMultiplicator,B=e.defaultPair,Z=e.refillDemoBalance,U=e.openRechargeTooltip,H=e.selectPair,G=e.isBottomSheet,V=e.openDealFormSheet,W=e.onChangePanel,j=e.onToggleOrder,z=e.isMultiChart,q=e.recommendedAssets,K=e.dealAmounts,Y=f.id,X=f.stopLossRate,J=f.stopOutRate,Q=f.takeProfitRate,$=f.timeCloseTrading,ee=f.timeOpen,te=f.timeOpenTrading,ae=f.precision,se=f.commission,ie=f.minCommission,re=f.openCommissionMax,ne=f.multiplicatorList,oe=f.group,le=f.locked,ce=f.lockedTrading,de=f.lockedBuy,ue=f.lockedSell,me=f.lockedReason,pe=f.lockedTradingReason,he=f.title,ve=R.amount,ge=R.type,_e=R.currencyNameForLimits,fe=R.refill,Ee=R.id,Se=(0,v.B)(K,_e),ye=Se.min,be=Se.max;this.amountService=new n.F({currency:E,amount:a,account:{amount:ve,type:ge,refill:fe,id:Ee},sumMax:be,pair:{id:Y,sumMin:ye},locale:O,openRechargeTooltip:U,refillDemoBalance:Z,saveAmount:x,dealAmounts:K},o.D),this.panelService=new p.K({onChangePanel:W}),this.fxDealAttributesService=new c.y({amount:a,currency:E,multiplicator:S,currentQuote:r,is24Format:s,defaultPair:B?{id:B.id,title:B.title,project:B.project}:null,recommendedAssets:q,pair:{multiplicatorList:ne,commission:se,minCommission:ie,openCommissionMax:re,group:oe,locked:le,lockedTrading:ce,lockedBuy:de,lockedSell:ue,lockedReason:me,lockedTradingReason:pe,timeOpen:ee,timeOpenTrading:te,title:he,precision:ae,id:Y},disabledControls:i({},D),locale:O,saveMultiplicator:F,selectPair:H,isBottomSheet:G,isMultiChart:z,openDealFormSheet:V,serverTime:_}),this.fxLimitService=new d.z({precision:f.precision,dealSum:a,stopLossRate:X,stopOutRate:J,takeProfitRate:Q,currency:E,isTrailingStop:C,takeProfit:k,stopLoss:w,isLimits:N,locale:O,saveLimit:P,commission:this.fxDealAttributesService.commission}),this.dealOrderService=new l.VZ({disabledControls:i({},D),is24Format:s,currentQuote:r,serverTimeStamp:1e3*_,pairId:Y,pairTitle:he,pairPrecision:ae,pairTimeClose:1e3*$,pairTimeOpen:1e3*te,pairLocked:le||ce,locale:O,isOpenedPanel:this.panelService.panel===h.r.Order,onToggleOrder:j,sendGaOrderSubmit:()=>{const e=this.inputs.selectedPair,a=e.id;var s;e.locked?(0,g.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"closed_asset/to_order",eventLabel:"".concat(a,"/fx/").concat("demo"===this.inputs.selectedAccount.type?"demo":"real_current_account")}):(0,g.L)({event:"uaGtmEvents_clicks",eventCategory:"deal_form",eventAction:"orders/set_up",eventLabel:"".concat(this.inputs.selectedPair.id,"_fx_").concat("time"===(null==this||null===(s=this.dealOrderService)||void 0===s?void 0:s.orderType)?"clock":"quote","_").concat("demo"===this.inputs.selectedAccount.type?"demo":"real_current_account")})}}),this.fxCreateOrderService=new m.T({account:{type:ge},getDealAttributes:this.getOpenDealParams.bind(this),getOrderAttributes:this.getCreateOrderParams.bind(this),validateLimits:this.fxLimitService.validate.bind(this.fxLimitService),validateOrder:this.dealOrderService.validate,getValidationErrorMessage:this.amountService.getValidationErrorMessage,showTopMessage:y,createOrder:I,clearOrder:this.dealOrderService.cancelOrder,showPanel:this.panelService.showPanel}),this.fxOpenDealService=new u.j({getValidationErrorMessage:this.amountService.getValidationErrorMessage,setErrorVisibility:this.amountService.setErrorVisibility,getDealAttributes:this.getOpenDealParams.bind(this),validateLimits:this.fxLimitService.validate.bind(this.fxLimitService),showTopMessage:y,startDeal:b,isOneClick:T,isHoldUse:A,saveOneClick:M,saveIgnoreHoldUse:L,showPanel:this.panelService.showPanel,hidePanel:this.panelService.hidePanel,account:{type:ge,amount:ve},getPanel:()=>null}),this.start()}start(){this.inputs.exportApi({startDeal:this.fxOpenDealService.startDeal,sumUp:this.amountService.increaseDealAmount,sumDown:this.amountService.decreaseDealAmount,setAmount:this.amountService.setAmount,setMultiplicator:this.fxDealAttributesService.setMultiplicator,setLimits:this.fxLimitService.updateLimit,startGambit:()=>this.dealOrderService.isOrder?this.fxCreateOrderService.startGambit():this.fxOpenDealService.startGambit()}),this.fxOpenDealService.updateInputs({getPanel:()=>this.panelService.panel}),this.inputs.tradeDirection&&this.fxOpenDealService.showOneClickDeal(this.inputs.tradeDirection),this.disposers=[(0,r.reaction)((()=>this.inputs.serverTimeStamp),(e=>{this.dealOrderService.updateInputs({serverTimeStamp:1e3*e}),this.fxDealAttributesService.updateInputs({serverTime:e})})),(0,r.reaction)((()=>this.inputs.currentQuote),(e=>{this.dealOrderService.updateInputs({currentQuote:e}),this.fxDealAttributesService.updateInputs({currentQuote:e})})),(0,r.reaction)((()=>this.inputs.is24Format),(e=>this.dealOrderService.updateInputs({is24Format:e}))),(0,r.reaction)((()=>this.inputs.isTrailingStop),(e=>this.fxLimitService.updateInputs({isTrailingStop:e}))),(0,r.reaction)((()=>this.inputs.isOneClick),(e=>this.fxOpenDealService.updateInputs({isOneClick:e}))),(0,r.reaction)((()=>this.inputs.isHoldUse),(e=>this.fxOpenDealService.updateInputs({isHoldUse:e}))),(0,r.reaction)((()=>i({},this.inputs.selectedAccount)),(e=>{this.fxOpenDealService.updateInputs({account:{type:e.type,amount:e.amount}});const a=this.inputs.selectedPair.id,s=this.inputs.dealAmounts,i=(0,v.B)(s,e.currencyNameForLimits),r=i.min,n=i.max;this.amountService.updateInputs({sumMax:n,pair:{id:a,sumMin:r},account:{amount:e.amount,type:e.type,refill:e.refill,id:e.id}}),this.fxCreateOrderService.updateInputs({account:{type:e.type}})})),(0,r.reaction)((()=>i({},this.inputs.dealAmounts)),(e=>{const a=this.inputs.selectedPair.id,s=this.inputs.selectedAccount,i=s.currencyNameForLimits,r=s.amount,n=s.type,o=s.refill,l=s.id,c=(0,v.B)(e,i),d=c.min,u=c.max;this.amountService.updateInputs({sumMax:u,pair:{id:a,sumMin:d},account:{amount:r,type:n,refill:o,id:l}})})),(0,r.reaction)((()=>i({},this.inputs.selectedPair)),(e=>{let a=e.stopLossRate,s=e.stopOutRate,i=e.takeProfitRate,r=e.timeCloseTrading,n=e.timeOpen,o=e.timeOpenTrading,l=e.commission,c=e.minCommission,d=e.openCommissionMax,u=e.multiplicatorList,m=e.group,p=e.locked,h=e.lockedBuy,g=e.lockedSell,_=e.lockedTrading,f=e.lockedReason,E=e.lockedTradingReason,S=e.title,y=e.id,b=e.precision;const C=this.inputs.selectedAccount.currencyNameForLimits,T=this.inputs.dealAmounts,A=(0,v.B)(T,C),k=A.min,w=A.max;this.amountService.updateInputs({sumMax:w,pair:{id:y,sumMin:k}}),this.fxDealAttributesService.updateInputs({pair:{commission:l,minCommission:c,openCommissionMax:d,multiplicatorList:u,group:m,locked:p,lockedBuy:h,lockedSell:g,lockedTrading:_,lockedReason:f,lockedTradingReason:E,timeOpen:n,timeOpenTrading:o,title:S,precision:b,id:y}}),this.fxLimitService.updateInputs({stopLossRate:a,stopOutRate:s,takeProfitRate:i}),this.dealOrderService.updateInputs({pairPrecision:b,pairId:y,pairTitle:S,pairTimeClose:1e3*r,pairTimeOpen:1e3*o,pairLocked:p||_})})),(0,r.reaction)((()=>this.fxDealAttributesService.commission),(e=>{this.fxLimitService.updateInputs({commission:e})})),(0,r.reaction)((()=>this.inputs.currency),(e=>{this.fxLimitService.updateInputs({currency:e}),this.fxDealAttributesService.updateInputs({currency:e}),this.amountService.updateInputs({currency:e})})),(0,r.reaction)((()=>i({},this.inputs.disabledControls)),(e=>{this.dealOrderService.updateInputs({disabledControls:e}),this.fxDealAttributesService.updateInputs({disabledControls:e})})),(0,r.reaction)((()=>this.inputs.isLimits),(e=>{this.fxLimitService.updateInputs({isLimits:e})})),(0,r.reaction)((()=>this.amountService.amount),(e=>{this.fxDealAttributesService.updateInputs({amount:e}),this.fxLimitService.updateInputs({dealSum:e})})),(0,r.reaction)((()=>this.inputs.isBottomSheet),(e=>{this.fxDealAttributesService.updateInputs({isBottomSheet:e})})),(0,r.reaction)((()=>this.inputs.isMultiChart),(e=>{this.fxDealAttributesService.updateInputs({isMultiChart:e})})),(0,r.reaction)((()=>this.inputs.isOrders),(e=>{!e&&this.dealOrderService.isOrder&&this.dealOrderService.cancelOrder()})),(0,r.reaction)((()=>this.panelService.panel===h.r.Order),(e=>{this.dealOrderService.updateInputs({isOpenedPanel:e})})),(0,r.reaction)((()=>this.inputs.defaultPair),(()=>{this.fxDealAttributesService.updateInputs({defaultPair:this.inputs.defaultPair})})),(0,r.reaction)((()=>this.inputs.recommendedAssets),(()=>{this.fxDealAttributesService.updateInputs({recommendedAssets:this.inputs.recommendedAssets})}))]}getOpenDealParams(){return{sum:this.amountService.amount,stopLoss:this.fxLimitService.limits.stopLoss||null,takeProfit:this.fxLimitService.limits.takeProfit||null,pair:this.inputs.selectedPair.id,multiplicator:this.fxDealAttributesService.multiplicator,isLimits:this.inputs.isLimits}}getCreateOrderParams(){return this.dealOrderService.currentOrder}stop(){this.disposers&&this.disposers.forEach((e=>{e()})),this.fxDealAttributesService.stop(),this.panelService.stop(),this.dealOrderService.stop(),this.amountService.stop()}}},7849:(e,a,s)=>{"use strict";s.d(a,{L:()=>r});var i=s(27378);const r=e=>{let a=e.toggleOrderForm,s=e.isValidOrderForm,r=e.isOrder;return i.useEffect((()=>{r&&!s&&a()}),[r,s,a]),null}},48663:(e,a,s)=>{"use strict";s.d(a,{z:()=>o});var i=s(27378),r=s(50649),n=s(7849);const o=(0,r.observer)((e=>{let a=e.dealOrderService,s=e.toggleOrderForm;return i.createElement(n.L,{isValidOrderForm:a.isValid,toggleOrderForm:s,isOrder:a.isOrder})}))},1712:(e,a,s)=>{"use strict";s.d(a,{F:()=>AmountService});var i=s(49491),r=s(59312),n=s(60521),o=(s(68516),s(17435)),l=s(30362),c=s(66257),d=s(23735),u=s(95029),m=s(78624);class AmountService{constructor(e,a,s){this.errors={amount:null},this.amount=100,this.allowDeposit=!1,this.isErrorsVisible=!1,this.disposers=[],this.increaseDealAmount=()=>{const e=this.getNewStepAmount(this.amount,!1),a=this.doValidateAmount(e);if(a&&a.value)this.setAmount(a.value);else{if(a&&!a.value)return;this.sendAnalytic(!1,this.amount,e),this.setAmount(e)}},this.decreaseDealAmount=()=>{const e=this.getNewStepAmount(this.amount,!0),a=this.doValidateAmount(e);if(a&&a.value)this.setAmount(a.value);else{if(a&&!a.value)return;this.sendAnalytic(!0,this.amount,e),this.setAmount(e)}},this.inputs=i({},e),this.amount=this.inputs.amount,this.validateFn=a,this.stepConfig=null!=s?s:{isMultiplyStep:!0,allowNegative:!1},this.validateAmount=this.validateAmount.bind(this),this.getValidationErrorMessage=this.getValidationErrorMessage.bind(this),this.setErrorVisibility=this.setErrorVisibility.bind(this),this.doValidateAmount=this.doValidateAmount.bind(this),this.initReactions(),this.stepAmount=new o.L(this.stepConfig),this.stepAmountMartingale=new l._}get increaseDisabled(){const e=Math.min(this.inputs.sumMax,this.inputs.account.amount);return this.amount>=e}get decreaseDisabled(){const e=Math.min(this.inputs.pair.sumMin,this.inputs.account.amount);return this.amount<=e||this.amount>e&&this.inputs.pair.sumMin>this.inputs.account.amount}get isValidAmount(){return!this.errors.amount}setErrorVisibility(e){this.isErrorsVisible=e}getValidationErrorMessage(e){this.validateAmount();const a=this.errors[e];let s=null;return a&&(s=a.descriptor,s&&void 0!==a.value&&(s=i(i({},s),{},{values:{amount:(0,u.xG)(a.value,{locale:this.inputs.locale,currency:this.inputs.currency,minimumFractionDigits:2})}}))),s}doValidateAmount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.amount;const a=Number(e),s=this.inputs.account.type===c.Q.DEMO,i=this.inputs,r=i.riskFreeAmount,n=i.pair;return this.validateFn(a,r&&r<n.sumMin?r:n.sumMin,this.inputs.sumMax,this.inputs.account.amount,s)}getValidAmount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.amount;const a=this.inputs,s=a.riskFreeAmount,i=a.pair,r=a.sumMax,n=s&&s<i.sumMin?s:i.sumMin,o=r,l=this.inputs.account.amount;return e<n&&l>=n?n:e>o&&l>=e?o:e}validateAmount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.amount;this.errors.amount=null,this.allowDeposit=!1;const a=this.doValidateAmount(e);if(a){const e=Object.assign({},a);return e.type!==m.L.NOT_ENOUGH_MONEY||this.inputs.account.refill.blockingReason||(this.allowDeposit=!0),this.errors.amount=i({},e),e}return null}setAmount(e){this.amount=e,this.validateAmount(),this.inputs.saveAmount(this.amount)}updateInputs(e){(0,n.set)(this.inputs,e)}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}getNewStepAmount(e,a){return a?this.inputs.isMartinGale?this.stepAmountMartingale.decreaseValue(e):this.stepAmount.decreaseValue(e):this.inputs.isMartinGale?this.stepAmountMartingale.increaseValue(e):this.stepAmount.increaseValue(e)}initReactions(){this.disposers.push((0,n.reaction)((()=>[this.inputs.account.amount,this.inputs.pair.sumMin,this.inputs.sumMax,this.inputs.pair.id]),(()=>this.validateAmount()),{fireImmediately:!0}),(0,n.reaction)((()=>this.inputs.account.id),(()=>{this.setErrorVisibility(!1)}),{fireImmediately:!0}))}sendAnalytic(e,a,s){this.inputs.isMartinGale&&(0,d.L)({event:"uaGtmEvents_clicks",eventCategory:"main_chart",eventAction:"change_deal_sum/".concat(e?"divide_2":"multiply_2"),eventLabel:"".concat(a,"/").concat(s)})}}(0,r.gn)([n.observable],AmountService.prototype,"errors",void 0),(0,r.gn)([n.observable],AmountService.prototype,"amount",void 0),(0,r.gn)([n.observable],AmountService.prototype,"inputs",void 0),(0,r.gn)([n.observable],AmountService.prototype,"allowDeposit",void 0),(0,r.gn)([n.observable],AmountService.prototype,"isErrorsVisible",void 0),(0,r.gn)([n.computed],AmountService.prototype,"increaseDisabled",null),(0,r.gn)([n.computed],AmountService.prototype,"decreaseDisabled",null),(0,r.gn)([n.computed],AmountService.prototype,"isValidAmount",null),(0,r.gn)([n.action],AmountService.prototype,"setErrorVisibility",null),(0,r.gn)([n.action.bound],AmountService.prototype,"setAmount",null),(0,r.gn)([n.action],AmountService.prototype,"updateInputs",null)},37876:(e,a,s)=>{"use strict";s.d(a,{i:()=>n});var i=s(22252),r=s(78624);const n=(e,a,s,n,o)=>{let l=null;if(Number.isNaN(e))l={type:r.L.WRONG_FORMAT,descriptor:i.t.WRONG_FORMAT};else if(o&&n<a||n<=0)l={type:r.L.NOT_ENOUGH_MONEY,descriptor:i.t.NOT_ENOUGH_MONEY};else if(o&&e<a||!o&&e<a&&n>=a)l={type:r.L.MIN_AMOUNT,descriptor:i.t.MIN_EDGE,value:a,formatType:"currency"};else if(!o&&e<n&&n<a)l={type:r.L.MIN_AMOUNT,descriptor:i.t.MIN_EDGE,value:n,formatType:"currency"};else if(e>n&&n<=s||e>s){const a=e>n&&n<=s?n:s;l={type:r.L.MAX_AMOUNT,descriptor:i.t.MAX_EDGE,value:a,formatType:"currency"}}return l}},78624:(e,a,s)=>{"use strict";s.d(a,{L:()=>i});const i={WRONG_FORMAT:"wrongFormat",NOT_ENOUGH_MONEY:"notEnoughMoney",MIN_AMOUNT:"minAmount",MAX_AMOUNT:"maxAmount",MAX_DEALS_AMOUNT:"maxDealsAmount",MAX_BALANCE_AMOUNT:"maxBalanceAmount",MIN_BALANCE_AMOUNT:"minBalanceAmount"}},40101:(e,a,s)=>{"use strict";s.d(a,{D:()=>n});var i=s(22252),r=s(78624);const n=(e,a,s,n,o)=>{let l=null;if(Number.isNaN(e))l={type:r.L.WRONG_FORMAT,descriptor:i.t.WRONG_FORMAT};else if(n<a||n<=0)l={type:r.L.NOT_ENOUGH_MONEY,descriptor:i.t.NOT_ENOUGH_MONEY};else if(o&&e<a||!o&&e<a&&n>=a)l={type:r.L.MIN_AMOUNT,descriptor:i.t.MIN_EDGE,value:a,formatType:"currency"};else if(e>n&&n<=s||e>s){const a=e>n&&n<=s?n:s;l={type:r.L.MAX_AMOUNT,descriptor:i.t.MAX_EDGE,value:a,formatType:"currency"}}return l}},22252:(e,a,s)=>{"use strict";s.d(a,{t:()=>r});var i=s(18985);const r=(0,i.vU)({NOT_ENOUGH_MONEY:{id:"no_enough_funds",defaultMessage:"Not enough funds"},MIN_EDGE:{id:"min_deal_amount_error",defaultMessage:"Minimum investment — {amount}"},MAX_EDGE:{id:"max_deal_amount_error",defaultMessage:"Maximum investment — {amount}"},WRONG_FORMAT:{id:"wrong_format",defaultMessage:"Incorrect format"}});(0,i.vU)({MIN_DEAL_AMOUNT_BORDER:{id:"fxc_min_deal_amount_error",defaultMessage:"Minimum trade volume is {amount}"},MAX_DEAL_AMOUNT_BORDER:{id:"fxc_max_deal_amount_error",defaultMessage:"Maximum trade volume exceeded. Maximum volume: {amount}"},MAX_DEALS_AMOUNT_BORDER:{id:"fxc_max_account_deals_amount_error",defaultMessage:"Maximum net trade volume exceeded. Maximum volume: {amount}"},MAX_BALANCE_REAL_AMOUNT_BORDER:{id:"fxc_max_available_real_amount_border",defaultMessage:"Not enough free margin. You may close some trades, make a deposit, or reduce the trade’s volume. Maximum volume: {amount}"},MAX_BALANCE_DEMO_AMOUNT_BORDER:{id:"fxc_max_available_demo_amount_border",defaultMessage:"Not enough free margin. You may close some trades, refill account, or reduce the trade’s volume. Maximum volume: {amount}"},BALANCE_REAL_AMOUNT_LESS_THAN_MIN_DEAL_BORDER:{id:"fxc_min_available_real_amount_less_min_border",defaultMessage:"Not enough free margin. To open a new trade, you may either close some of your active trades or <a>deposit additional funds</a>"},BALANCE_DEMO_AMOUNT_LESS_THAN_MIN_DEAL_BORDER:{id:"fxc_min_available_demo_amount_less_min_border",defaultMessage:"Not enough free margin. To open a new trade, you may either close some of your active trades or <a>refill your balance</a>"},MAX_SUGGEST_AMOUNT_BORDER:{id:"fxc_max_amount_suggest",defaultMessage:"Maximum volume: {amount}"},WRONG_FORMAT:{id:"wrong_format",defaultMessage:"Incorrect format"}})},90349:(e,a,s)=>{"use strict";s.d(a,{p:()=>BoCreateOrderService});var i=s(49491),r=s(2243),n=s(59312),o=s(60521),l=s(68516),c=(s(17435),s(30362),s(18985)),d=s(19669);const u=(0,c.vU)({order_created_successfully:{id:"order_created_successfully",defaultMessage:"Order for {asset} was created successfully"},order_error_timepicker:{id:"timepicker_order_warning",defaultMessage:"An order can only be set up using the timer."}});class BoCreateOrderService{constructor(e){this.isOpening=!1,this.dir="up",this.inputs=e}updateInputs(e){(0,o.set)(this.inputs,e)}setDealDir(e){this.dir=e}startGambit(){this.createOrder("down",!0),this.createOrder("up",!0)}createOrder(e,a){d.Sv.startMark(d.Sv.PerformanceMetric.CreateOrder);const s=this.inputs.getDealAttributes(),n=s.sum,o=s.pair,c=s.pickerType,m=s.duration,p=s.timeClose,h=this.inputs.getOrderAttributes();if(this.setDealDir(e),this.inputs.showDurationValidation(!0),!h)return;let v;const g=this.inputs.validateOrder()[h.type];if(0!==g.size){const e=Array.from(g).filter((e=>"duration"!==r(e,1)[0]));v=e.length&&e[0].length?e[0][1]:void 0}const _=this.inputs.getValidationErrorMessage("amount"),f="duration"===c&&m&&this.inputs.getDurationValidationErrorMessage(m),E="time"===c&&p&&this.inputs.getTimeCloseValidationErrorMessage(p),S=_||v||f||E;Array.from(g).some((e=>"duration"===r(e,1)[0]))||!!f||(S?this.inputs.showTopMessage("info","time"===c?u.order_error_timepicker:S):this.isOpening&&!a||(this.isOpening=!0,this.inputs.createOrder(i({sum:n,dir:e,pair:o,duration:"time"===c&&p?(0,l.f4)(p-h.serverTime):m||0},h)).then((()=>{this.inputs.showTopMessage("success",i(i({},u.order_created_successfully),{},{values:{asset:o}}))})).catch((e=>{e.message&&this.inputs.showTopMessage("error",e.message)})).finally((()=>{d.Sv.stopMark(d.Sv.PerformanceMetric.CreateOrder),setTimeout((()=>{this.inputs.clearOrder(),this.isOpening=!1}),0)}))))}}(0,n.gn)([o.observable],BoCreateOrderService.prototype,"inputs",void 0),(0,n.gn)([o.observable],BoCreateOrderService.prototype,"isOpening",void 0),(0,n.gn)([o.observable],BoCreateOrderService.prototype,"dir",void 0),(0,n.gn)([o.action],BoCreateOrderService.prototype,"updateInputs",null),(0,n.gn)([o.action.bound],BoCreateOrderService.prototype,"setDealDir",null),(0,n.gn)([o.action.bound],BoCreateOrderService.prototype,"startGambit",null),(0,n.gn)([o.action.bound],BoCreateOrderService.prototype,"createOrder",null)},22724:(e,a,s)=>{"use strict";s.d(a,{A:()=>BoDealAttributesService});var i=s(49491),r=s(59312),n=s(60521);class BoDealAttributesService{constructor(e){this.isOrderMode=!0,this.inputs=i({},e)}updateInputs(e){(0,n.set)(this.inputs,e)}}(0,r.gn)([n.observable],BoDealAttributesService.prototype,"inputs",void 0),(0,r.gn)([n.observable],BoDealAttributesService.prototype,"isOrderMode",void 0),(0,r.gn)([n.action],BoDealAttributesService.prototype,"updateInputs",null)},47817:(e,a,s)=>{"use strict";s.d(a,{N:()=>BoOpenDealService});var i=s(59312),r=s(60521),n=s(68516),o=(s(17435),s(30362),s(19669)),l=(s(56529),s(59943));class BoOpenDealService{constructor(e){this.isOpening=!1,this.dir="up",this.disposers=[],this.confirmations={holdUse:!1,oneClick:!1},this.inputs=e,this.initReactions()}initReactions(){this.disposers=[(0,r.reaction)((()=>this.inputs.account.type),(e=>{"demo"===e&&"oneClick"===this.inputs.getPanel()&&this.inputs.hidePanel()}))]}updateInputs(e){(0,r.set)(this.inputs,e)}acceptOneClick(e){this.inputs.saveOneClick(e)}acceptHoldUse(e){this.inputs.saveIgnoreHoldUse(e)}setDealDir(e){this.dir=e}startGambit(){this.inputs.getActivatedRiskFreeDealId()||(this.startDeal("down",!1,!1,!0),this.startDeal("up",!1,!1,!0))}showOneClickDeal(e){this.setDealDir(e),"demo"!==this.inputs.account.type&&this.inputs.showPanel(l.r.OneClick)}clearConfirmations(){for(const e in this.confirmations)this.confirmations[e]=!1}startDeal(e,a,s,i){o.Sv.startMark(o.Sv.PerformanceMetric.StartDeal),this.inputs.setErrorVisibility(!0),a&&(this.confirmations.oneClick=!0),s&&(this.confirmations.holdUse=!0);const r=this.inputs.getDealAttributes(),c=r.sum,d=r.pair,u=r.pickerType,m=r.timeClose,p=r.duration,h=r.strikeId;this.setDealDir(e);const v="duration"===u&&p&&this.inputs.getDurationValidationErrorMessage(p),g="time"===u&&m&&this.inputs.getTimeCloseValidationErrorMessage(m),_=this.inputs.getValidationErrorMessage("amount")||v||g;if("real"===this.inputs.account.type&&!this.inputs.account.amount)return void this.inputs.showPanel(l.r.Deposit);if(_)return;if(this.inputs.isHoldUse&&!this.confirmations.holdUse&&!this.inputs.isTutorialActive)return void this.inputs.showPanel(l.r.HoldUse);if(!this.inputs.isOneClick&&!this.confirmations.oneClick&&!this.inputs.isTutorialActive&&"demo"!==this.inputs.account.type)return void this.inputs.showPanel(l.r.OneClick);this.clearConfirmations();const f={sum:c,pair:d,dir:e,pickerType:u,pos:h,timeClose:m||0,duration:p||0,riskFreeId:this.inputs.getActivatedRiskFreeDealId()};"time"===u&&"number"==typeof m?this.inputs.updateTimePresets((0,n.f4)(m-this.inputs.serverTime)):"number"==typeof p&&this.inputs.updateDurationPresets(p),this.inputs.hidePanel(),this.isOpening&&!i||(this.isOpening=!0,this.inputs.startDeal(f).then((e=>(this.inputs.deactivateRiskFree(),Promise.resolve(e)))).catch((e=>{e&&e.message&&this.inputs.showTopMessage("info",e.message)})).finally((()=>{o.Sv.stopMark(o.Sv.PerformanceMetric.StartDeal),setTimeout((()=>{this.isOpening=!1}),0)})))}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}}(0,i.gn)([r.observable],BoOpenDealService.prototype,"inputs",void 0),(0,i.gn)([r.observable],BoOpenDealService.prototype,"isOpening",void 0),(0,i.gn)([r.observable],BoOpenDealService.prototype,"dir",void 0),(0,i.gn)([r.action],BoOpenDealService.prototype,"updateInputs",null),(0,i.gn)([r.action.bound],BoOpenDealService.prototype,"acceptOneClick",null),(0,i.gn)([r.action.bound],BoOpenDealService.prototype,"acceptHoldUse",null),(0,i.gn)([r.action.bound],BoOpenDealService.prototype,"setDealDir",null),(0,i.gn)([r.action.bound],BoOpenDealService.prototype,"startGambit",null),(0,i.gn)([r.action.bound],BoOpenDealService.prototype,"startDeal",null)},58685:(e,a,s)=>{"use strict";s.d(a,{A:()=>DealDurationService});var i=s(49491),r=s(59312),n=s(60521),o=s(68516),l=(s(17435),s(30362),s(18985)),c=s(95029);const d=(0,l.vU)({time_picker_invalid_time:{id:"time_picker_invalid_time",defaultMessage:"Invalid time. Try {action}"}});class DealDurationService{constructor(e){this.presets=[],this.fastPresets=[],this.isEditing=!1,this.disposers=[],this.inputs=e,this.updatePresets(),this.updateFastPresets(),this.duration=this.getDefDuration(),this.initReactions()}get serverTimeRounded(){return(0,o.rj)(this.inputs.serverTime)}get isFixedDuration(){return this.inputs.pair.quick}get isFastDurationAvailable(){return!(!this.inputs.pair.allowedFastDealsDurations||!this.inputs.pair.allowedFastDealsDurations.length)}get isFastDuration(){return this.isFastDurationAvailable&&this.inputs.isFastDurationPicker()}updateInputs(e){(0,n.set)(this.inputs,e)}setDuration(e){this.error=this.validate(e),this.duration=e,this.error||this.inputs.saveDuration(e)}setEditing(e){this.isEditing=e}increaseDuration(){this.stepDuration("increase")}decreaseDuration(){this.stepDuration("decrease")}validate(e){if(!this.isFastDuration)return(0,o.qG)(e,this.serverTimeRounded,this.inputs.pair)}getValidationErrorMessage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.duration;return this.validate(e)?i(i({},d.time_picker_invalid_time),{},{values:{action:(0,c.yC)(this.getValidValue(this.duration),"d h m")}}):null}getValidValue(e){const a=this.getDurationLimits(),s=a.durationMax,i=a.durationMin,r=this.inputs.pair.allowedFastDealsDurations,n=r&&this.isFastDuration,o=n?r[r.length-1]:s,l=n?r[0]:Math.max(60,i);return this.isFixedDuration?i:e>o?o:e<l?l:e}get increaseDisabled(){const e=this.getNextStepValue("increase",this.duration),a=this.validate(e);return!(!a||a!==o.Tr.durationMoreThenMax)}get decreaseDisabled(){const e=this.getNextStepValue("decrease",this.duration),a=this.validate(e),s=this.inputs.pair.allowedFastDealsDurations;return s?this.duration===s[0]:!(!a||a!==o.Tr.durationLessThenMin)}getDurationLimits(){return(0,o.Mx)(this.serverTimeRounded,this.inputs.pair)}getNextStepValue(e,a){let s=a+("increase"===e?60:-60);if(this.inputs.pair.allowedFastDealsDurations&&this.isFastDuration){s=("increase"===e?this.inputs.pair.allowedFastDealsDurations.find((e=>e>a)):[...this.inputs.pair.allowedFastDealsDurations].reverse().find((e=>e<a)))||a}return s}stepDuration(e){const a=this.getNextStepValue(e,this.duration),s=this.inputs.pair.allowedFastDealsDurations;return"increase"===e&&s&&this.isFastDuration&&a===this.duration&&a===s[s.length-1]?(this.setDuration(60),void this.inputs.setPickerType("duration")):"decrease"===e&&s&&!this.isFastDuration&&60===this.duration?(this.setDuration(s[s.length-1]),void this.inputs.setPickerType("fastDuration")):void(this.validate(a)?this.setDuration(this.getValidValue(a)):this.setDuration(a))}getDefDuration(){return this.getValidValue(this.inputs.defaultDuration)}initReactions(){this.disposers.push((0,n.reaction)((()=>this.serverTimeRounded),(()=>{this.updatePresets();this.validate(this.duration)===o.Tr.durationMoreThenMax&&this.setDuration(this.isEditing?this.duration:this.getValidValue(this.duration))})),(0,n.reaction)((()=>[...this.inputs.cachedDurationList]),(()=>{this.updateFastPresets(),this.updatePresets()})),(0,n.reaction)((()=>"".concat(this.inputs.pair.maxDuration,",").concat(this.inputs.pair.minDuration,",").concat(this.inputs.pair.timeCloseTrading)),(()=>{this.error=this.validate(this.duration),this.isFastDurationAvailable&&this.duration<60&&!this.inputs.isFastDurationPicker()&&this.inputs.setPickerType("fastDuration"),(this.duration<this.inputs.pair.minDuration||this.isFixedDuration)&&this.setDuration(this.inputs.pair.minDuration),this.updateFastPresets(),this.updatePresets()})),(0,n.reaction)((()=>this.inputs.pair.allowedFastDealsDurations),(()=>{this.getValidValue(this.duration)})))}filterNotValid(e,a,s){return e.filter((e=>e>=a&&e<=s))}updatePresets(){const e=(0,o.Mx)(this.serverTimeRounded,this.inputs.pair),a=e.timeCloseMax,s=e.durationMin,i=e.durationMax,r=a-this.serverTimeRounded,l=s<60?60:s,c=(0,o.LF)(this.filterNotValid((0,n.toJS)(this.inputs.cachedDurationList),l,i),this.filterNotValid((0,n.toJS)(this.inputs.defaultDurationList),l,i),l,r>0?r:i);(0,n.set)(this.presets,c)}updateFastPresets(){this.fastPresets=this.inputs.pair.allowedFastDealsDurations||[]}}(0,r.gn)([n.observable],DealDurationService.prototype,"inputs",void 0),(0,r.gn)([n.observable],DealDurationService.prototype,"presets",void 0),(0,r.gn)([n.observable],DealDurationService.prototype,"fastPresets",void 0),(0,r.gn)([n.observable],DealDurationService.prototype,"duration",void 0),(0,r.gn)([n.observable],DealDurationService.prototype,"error",void 0),(0,r.gn)([n.observable],DealDurationService.prototype,"isEditing",void 0),(0,r.gn)([n.computed],DealDurationService.prototype,"serverTimeRounded",null),(0,r.gn)([n.computed],DealDurationService.prototype,"isFixedDuration",null),(0,r.gn)([n.computed],DealDurationService.prototype,"isFastDurationAvailable",null),(0,r.gn)([n.computed],DealDurationService.prototype,"isFastDuration",null),(0,r.gn)([n.action],DealDurationService.prototype,"updateInputs",null),(0,r.gn)([n.action.bound],DealDurationService.prototype,"setDuration",null),(0,r.gn)([n.action.bound],DealDurationService.prototype,"setEditing",null),(0,r.gn)([n.action.bound],DealDurationService.prototype,"increaseDuration",null),(0,r.gn)([n.action.bound],DealDurationService.prototype,"decreaseDuration",null),(0,r.gn)([n.action.bound],DealDurationService.prototype,"getValidationErrorMessage",null),(0,r.gn)([n.computed],DealDurationService.prototype,"increaseDisabled",null),(0,r.gn)([n.computed],DealDurationService.prototype,"decreaseDisabled",null),(0,r.gn)([n.action],DealDurationService.prototype,"updatePresets",null),(0,r.gn)([n.action],DealDurationService.prototype,"updateFastPresets",null)},37711:(e,a,s)=>{"use strict";s.d(a,{Km:()=>v,VZ:()=>DealOrderService,iR:()=>g});var i=s(2243),r=s(49491),n=s(59312),o=s(60521),l=s(25935),c=(s(68516),s(17435),s(30362),s(57615)),d=s(29042),u=s(45797),m=s(66303);const p=6e4,h=864e5,v={TIME:"time",QUOTE:"quote"},g={TIME:"time",SCHEDULE:"schedule",ZERO_QUOTE:"zeroQuote",DURATION:"duration"},_=[1,70,80,90];class DealOrderService{constructor(e){this.errors={[v.QUOTE]:new Map,[v.TIME]:new Map},this.isOrder=!1,this.openTimeStamp=Date.now(),this.openQuote=0,this.isShowDurationValidation=!1,this.disposers=[],this.storage=new c._({namespace:"DealOrderService",backend:new d.u}),this.inputs=r({},e),this.openQuote=e.currentQuote,this.orderType=e.pairLocked?v.TIME:v.QUOTE,this.openTimeStamp=DealOrderService.getDefaultOpenTS(e.serverTimeStamp),this.winperc=this.getDefaultWinperc(),this.validate=this.validate.bind(this),this.showDurationValidation=this.showDurationValidation.bind(this),this.initReactions()}get serverTimeStampInMinutes(){return Math.floor(this.inputs.serverTimeStamp/p)*p}get defaultMaxDuration(){const e=this.orderType===v.TIME?this.openTimeStamp:this.serverTimeStampInMinutes,a=(Math.min(this.timeMax,this.inputs.pairTimeClose)-e)/1e3;if(this.inputs.getDurationLimits){const e=this.inputs.getDurationLimits().durationMax;return a<0?e:Math.min(a,e)}return a}get defaultMinDuration(){if(this.inputs.getDurationLimits){return this.inputs.getDurationLimits().durationMin}return 60}get defaultDuration(){if(this.inputs.duration){if(this.inputs.duration>this.defaultMaxDuration)return this.defaultMaxDuration;if(this.inputs.duration<this.defaultMinDuration)return this.defaultMinDuration}return this.inputs.duration||60}get timeMin(){const e=1e3*(this.inputs.minDuration||0),a=this.serverTimeStampInMinutes+p;return a+e>=this.inputs.pairTimeClose?this.inputs.pairTimeOpen:a}get timeMax(){const e=this.serverTimeStampInMinutes+h;if(this.inputs.pairTimeOpen>=e&&this.inputs.pairTimeClose<e){const e=1e3*(this.inputs.minDuration||0);return this.inputs.pairTimeClose-e-p}return e}get isValidOpenQuote(){return!!this.openQuote&&0!==this.openQuote}get isValidTSByTime(){return this.openTimeStamp>this.inputs.serverTimeStamp&&this.openTimeStamp<this.inputs.serverTimeStamp+h}get isValidByDuration(){return!this.inputs.duration||this.defaultMaxDuration>=this.inputs.duration&&this.defaultMinDuration<=this.inputs.duration}get hasGapInSchedule(){return this.serverTimeStampInMinutes+h+p>=this.inputs.pairTimeClose}get isValidTSBySchedule(){return!(this.openTimeStamp>=this.inputs.pairTimeClose&&this.openTimeStamp<this.inputs.pairTimeOpen+6e4)}get isValidTimeCloseBySchedule(){return this.validateTradeTimeOpen(this.openTimeStamp)}get isValid(){return this.orderType===v.TIME?this.isValidTSBySchedule&&this.isValidTimeCloseBySchedule&&this.isValidTSByTime:this.isValidOpenQuote}static getDefaultOpenTS(e){const a=new Date(e),s=a.getHours()+1;return a.setHours(s),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.getTime()}static roundSeconds(e){const a=new Date(e);return a.setSeconds(0),a.setMilliseconds(0),a.getTime()}actualizeOpenTime(){const e=DealOrderService.getDefaultOpenTS(this.inputs.serverTimeStamp),a=this.validateTradeTimeOpen(this.inputs.pairTimeOpen)&&this.inputs.pairTimeOpen>this.inputs.serverTimeStamp&&this.inputs.pairTimeOpen<this.inputs.serverTimeStamp+h?DealOrderService.roundSeconds(this.inputs.pairTimeOpen)+6e4:e;this.setTimeOpenChange(this.inputs.pairLocked?a:e)}actualizeOpenQuote(){this.setQuoteOpenChange(this.inputs.currentQuote)}initReactions(){this.disposers=[(0,o.when)((()=>!!this.inputs.currentQuote),(()=>{this.setQuoteOpenChange(this.inputs.currentQuote)})),(0,o.reaction)((()=>[this.openQuote,this.openTimeStamp]),(()=>this.validate()),{fireImmediately:!0}),(0,o.reaction)((()=>this.inputs.pairId),(()=>{this.isOrder&&this.cancelOrder()})),(0,o.reaction)((()=>this.inputs.pairPrecision),(e=>{const a=this.openQuote.toFixed(e);this.setQuoteOpenChange(Number(a))})),(0,o.reaction)((()=>this.currentOrder),(e=>{this.inputs.onToggleOrder(e)}),{equals:o.comparer.structural}),(0,o.reaction)((()=>this.inputs.disabledControls.buttonOrder),(e=>{e&&this.cancelOrder()})),(0,o.reaction)((()=>this.inputs.isOpenedPanel),(e=>{e&&(this.isOrder&&this.cancelOrder(),this.actualizeOpenQuote(),this.actualizeOpenTime())})),(0,o.reaction)((()=>this.inputs.duration),(()=>{this.validate()}))]}showDurationValidation(e){this.validate(),this.isShowDurationValidation=e}validate(){return this.errors[v.QUOTE].clear(),this.errors[v.TIME].clear(),this.isValidTSByTime||this.errors[v.TIME].set(g.TIME,m.R.TIME_PAST),!this.isValidByDuration&&this.isValidTSBySchedule&&this.isValidTimeCloseBySchedule&&this.errors[v.TIME].set(g.DURATION,m.R.SCHEDULE_CLOSED),this.isValidTSBySchedule&&this.isValidTimeCloseBySchedule||this.orderType!==v.TIME||this.errors[v.TIME].set(g.SCHEDULE,r(r({},m.R.SCHEDULE_CLOSED),{},{values:{date:new Date(this.inputs.pairTimeOpen).toLocaleString("".concat((0,u.mL)(this.inputs.locale)),{month:"2-digit",day:"2-digit"}),time:(0,l.y)(this.inputs.pairTimeOpen+6e4,this.inputs.is24Format)[0]}})),this.isValidOpenQuote||this.errors[v.QUOTE].set(g.ZERO_QUOTE,m.R.ZERO_QUOTE),this.errors}validateTradeTimeOpen(e){const a=1e3*(this.inputs.minDuration||0);return!(e+a>=this.inputs.pairTimeClose&&e+a<this.inputs.pairTimeOpen)}get currentOrder(){return this.isOrder?{type:this.orderType,openTimeStamp:this.openTimeStamp,openQuote:this.openQuote,winperc:this.winperc}:null}correctQuoteOpen(e){this.setQuoteOpenChange(e)}updateServerTime(e){this.inputs.serverTimeStamp=e}updateInputs(e){(0,o.set)(this.inputs,e)}setOrderTypeChange(e){this.orderType=e}setTimeOpenChange(e){this.openTimeStamp=e}setQuoteOpenChange(e){this.openQuote=e}setWinpercChange(e){this.winperc=e,this.storage.set("winperc",e)}submitOrderForm(){this.isValid?(this.isOrder=!0,this.inputs.sendGaOrderSubmit()):this.errors[this.orderType].size&&(this.errors[this.orderType]=new Map(Array.from(this.errors[this.orderType],(e=>{let a=i(e,2),s=a[0],n=a[1];return n?[s,r(r({},n),{},{timestamp:Date.now()})]:[s,n]}))))}cancelOrder(){this.isOrder=!1}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}getDefaultWinperc(){const e=this.storage.get("winperc");return e&&_.includes(e)?e:_[0]}}(0,n.gn)([o.observable],DealOrderService.prototype,"inputs",void 0),(0,n.gn)([o.observable],DealOrderService.prototype,"errors",void 0),(0,n.gn)([o.observable],DealOrderService.prototype,"isOrder",void 0),(0,n.gn)([o.observable],DealOrderService.prototype,"openTimeStamp",void 0),(0,n.gn)([o.observable],DealOrderService.prototype,"openQuote",void 0),(0,n.gn)([o.observable],DealOrderService.prototype,"orderType",void 0),(0,n.gn)([o.observable],DealOrderService.prototype,"winperc",void 0),(0,n.gn)([o.observable],DealOrderService.prototype,"isShowDurationValidation",void 0),(0,n.gn)([o.computed],DealOrderService.prototype,"serverTimeStampInMinutes",null),(0,n.gn)([o.computed],DealOrderService.prototype,"isValidOpenQuote",null),(0,n.gn)([o.computed],DealOrderService.prototype,"isValidTSByTime",null),(0,n.gn)([o.computed],DealOrderService.prototype,"isValidByDuration",null),(0,n.gn)([o.computed],DealOrderService.prototype,"hasGapInSchedule",null),(0,n.gn)([o.computed],DealOrderService.prototype,"isValidTSBySchedule",null),(0,n.gn)([o.computed],DealOrderService.prototype,"isValidTimeCloseBySchedule",null),(0,n.gn)([o.computed],DealOrderService.prototype,"isValid",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"actualizeOpenTime",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"actualizeOpenQuote",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"correctQuoteOpen",null),(0,n.gn)([o.action],DealOrderService.prototype,"updateServerTime",null),(0,n.gn)([o.action],DealOrderService.prototype,"updateInputs",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"setOrderTypeChange",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"setTimeOpenChange",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"setQuoteOpenChange",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"setWinpercChange",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"submitOrderForm",null),(0,n.gn)([o.action.bound],DealOrderService.prototype,"cancelOrder",null)},66303:(e,a,s)=>{"use strict";s.d(a,{R:()=>i});const i=(0,s(18985).vU)({TIME_PAST:{id:"order_setup_time_pass_error",defaultMessage:"This time has already passed. Please choose a different time"},SCHEDULE_CLOSED:{id:"order_setup_asset_schedule_error",defaultMessage:"The asset is not available at this time. The trading session will start on {date} at {time}."},ZERO_QUOTE:{id:"order_setup_quote_error",defaultMessage:"Please specify the opening price"}})},7264:(e,a,s)=>{"use strict";s.d(a,{q:()=>DealTimeService});var i=s(2243),r=s(49491),n=s(59312),o=s(60521),l=s(25935),c=s(68516);s(17435),s(30362);const d=(0,s(18985).vU)({time_picker_invalid_time:{id:"time_picker_invalid_time",defaultMessage:"Invalid time. Try {action}"}});class DealTimeService{constructor(e){this.presets=[],this.isEditing=!1,this.disposers=[],this.inputs=e,this.timeClose=this.getValidValue(this.inputs.defaultTimeClose),this.updatePresets(),this.initReactions()}get serverTimeRounded(){return(0,c.rj)(this.inputs.serverTime)}get timeCloseLimits(){const e=(0,c.Mx)(this.serverTimeRounded,r(r({},this.inputs.pair),{},{minDuration:this.inputs.pair.minDuration<60?60:this.inputs.pair.minDuration}));return{min:e.timeCloseMin,max:e.timeCloseMax}}get increaseDisabled(){const e=this.getNextStepValue("increase",this.timeClose),a=this.validate(e);return!(!a||a!==c.Tr.timeCloseMoreThenMax)}get decreaseDisabled(){const e=this.getNextStepValue("decrease",this.timeClose),a=this.validate(e);return!(!a||a!==c.Tr.timeCloseLessThenMin)}updateInputs(e){(0,o.set)(this.inputs,e)}setTimeClose(e){const a=this.applyValidation(e);this.timeClose=e,a&&a!==c.Tr.timeCloseLessThenMin||this.inputs.saveTimeClose(e)}setEditing(e){this.isEditing=e}increaseTimeClose(){this.stepTimeClose("increase")}decreaseTimeClose(){this.stepTimeClose("decrease")}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}validate(e){return this.inputs.isOrder?c.Tr.timeAndIsOrder:(0,c.EK)(e,this.serverTimeRounded,this.inputs.pair)}applyValidation(e){return this.error=this.validate(e),this.error}getValidationErrorMessage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeClose;const a=this.validate(e),s=(0,l.y)(1e3*this.getValidValue(e),this.inputs.is24Format),n=i(s,2),o=n[0],c=n[1];return a?r(r({},d.time_picker_invalid_time),{},{values:{action:"".concat(o).concat(c?" "+c:"")}}):null}getValidValue(e){const a=this.timeCloseLimits,s=a.min,i=a.max;return e<s?s:e>i?i:e}getNextStepValue(e,a){return a+("increase"===e?60:-60)}stepTimeClose(e){const a=this.getNextStepValue(e,this.timeClose);this.validate(a)?this.setTimeClose(this.getValidValue(a)):this.setTimeClose(a)}correctTimeClose(e){const a=this.validate(e);a&&a===c.Tr.timeCloseLessThenMin&&!this.isEditing?this.setTimeClose(this.timeCloseLimits.min):this.applyValidation(this.timeClose)}initReactions(){this.disposers.push((0,o.reaction)((()=>this.serverTimeRounded),(()=>{this.correctTimeClose(this.timeClose),this.updatePresets()})),(0,o.reaction)((()=>[...this.inputs.cachedTimeList]),(()=>{this.updatePresets()})),(0,o.reaction)((()=>"".concat(this.inputs.pair.maxDuration,",").concat(this.inputs.pair.minDuration,",").concat(this.inputs.pair.timeCloseTrading)),(()=>{this.applyValidation(this.timeClose),this.updatePresets()})),(0,o.reaction)((()=>this.inputs.isOrder),(()=>{this.applyValidation(this.timeClose)})))}filterNotValid(e,a,s){return e.filter((e=>e>=a&&e<=s))}updatePresets(){const e=(0,c.Mx)(this.serverTimeRounded,this.inputs.pair),a=e.timeCloseMax,s=e.durationMin,i=e.durationMax,r=s<60?60:s,n=(0,c.LF)(this.filterNotValid((0,o.toJS)(this.inputs.cachedTimeList),r,i),this.filterNotValid((0,o.toJS)(this.inputs.defaultDurationList),r,i),r,a-this.serverTimeRounded);(0,o.set)(this.presets,n)}}(0,n.gn)([o.observable],DealTimeService.prototype,"inputs",void 0),(0,n.gn)([o.observable],DealTimeService.prototype,"presets",void 0),(0,n.gn)([o.observable],DealTimeService.prototype,"timeClose",void 0),(0,n.gn)([o.observable],DealTimeService.prototype,"error",void 0),(0,n.gn)([o.observable],DealTimeService.prototype,"isEditing",void 0),(0,n.gn)([o.computed],DealTimeService.prototype,"serverTimeRounded",null),(0,n.gn)([o.computed],DealTimeService.prototype,"timeCloseLimits",null),(0,n.gn)([o.computed],DealTimeService.prototype,"increaseDisabled",null),(0,n.gn)([o.computed],DealTimeService.prototype,"decreaseDisabled",null),(0,n.gn)([o.action],DealTimeService.prototype,"updateInputs",null),(0,n.gn)([o.action.bound],DealTimeService.prototype,"setTimeClose",null),(0,n.gn)([o.action.bound],DealTimeService.prototype,"setEditing",null),(0,n.gn)([o.action.bound],DealTimeService.prototype,"increaseTimeClose",null),(0,n.gn)([o.action.bound],DealTimeService.prototype,"decreaseTimeClose",null),(0,n.gn)([o.action.bound],DealTimeService.prototype,"getValidationErrorMessage",null),(0,n.gn)([o.action],DealTimeService.prototype,"updatePresets",null)},22327:(e,a,s)=>{"use strict";s.d(a,{T:()=>FxCreateOrderService});var i=s(49491),r=s(59312),n=s(60521),o=s(18985),l=s(19669),c=(s(56529),s(59943));const d=(0,o.vU)({order_created_successfully:{id:"order_created_successfully",defaultMessage:"Order for {asset} was created successfully"}});class FxCreateOrderService{constructor(e){this.isOpening=!1,this.dir="up",this.inputs=e}updateInputs(e){(0,n.set)(this.inputs,e)}setDealDir(e){this.dir=e}startGambit(){this.createOrder("down",!0),this.createOrder("up",!0)}createOrder(e,a){l.Sv.startMark(l.Sv.PerformanceMetric.CreateOrder);const s=this.inputs.getDealAttributes(),r=s.sum,n=s.stopLoss,o=s.takeProfit,u=s.multiplicator,m=s.pair,p=s.isLimits,h=this.inputs.getOrderAttributes();if(this.setDealDir(e),!h)return;let v;const g=this.inputs.validateOrder()[h.type];0!==g.size&&(v=Array.from(g.values())[0]);const _=this.inputs.getValidationErrorMessage("amount"),f=o&&this.inputs.validateLimits("takeProfit",o),E=n&&this.inputs.validateLimits("stopLoss",n),S=_||f||E||v;S?E||f?this.inputs.showPanel(c.r.Limits):this.inputs.showTopMessage("info",S):this.isOpening&&!a||(this.isOpening=!0,this.inputs.createOrder({sum:r,stopLoss:p&&n?n:null,takeProfit:p&&o?o:null,dir:e,multiplicator:u,pair:m,type:h.type,openTimeStamp:h.openTimeStamp,openQuote:h.openQuote}).then((()=>{this.inputs.showTopMessage("success",i(i({},d.order_created_successfully),{},{values:{asset:m}}))})).catch((e=>{e.message&&this.inputs.showTopMessage("error",e.message)})).finally((()=>{l.Sv.stopMark(l.Sv.PerformanceMetric.CreateOrder),setTimeout((()=>{this.inputs.clearOrder(),this.isOpening=!1}),0)})))}}(0,r.gn)([n.observable],FxCreateOrderService.prototype,"inputs",void 0),(0,r.gn)([n.observable],FxCreateOrderService.prototype,"isOpening",void 0),(0,r.gn)([n.observable],FxCreateOrderService.prototype,"dir",void 0),(0,r.gn)([n.action],FxCreateOrderService.prototype,"updateInputs",null),(0,r.gn)([n.action.bound],FxCreateOrderService.prototype,"setDealDir",null),(0,r.gn)([n.action.bound],FxCreateOrderService.prototype,"startGambit",null),(0,r.gn)([n.action.bound],FxCreateOrderService.prototype,"createOrder",null)},23626:(e,a,s)=>{"use strict";s.d(a,{y:()=>FxDealAttributesService});var i=s(49491),r=s(59312),n=s(60521),o=s(95029);class FxDealAttributesService{constructor(e){this.multiplicator=1,this.disposers=[],this.inputs=i({},e),this.setMultiplicator(this.getDefaultMultiplicator(this.inputs.pair.multiplicatorList,this.inputs.multiplicator)),this.initReactions()}get commission(){const e=(0,o.Iu)(this.inputs.amount,this.multiplicator,this.inputs.pair.commission,this.inputs.pair.minCommission,this.inputs.pair.openCommissionMax);return e?e.amount:0}setMultiplicator(e){this.multiplicator=e,this.inputs.saveMultiplicator(this.multiplicator)}updateInputs(e){(0,n.set)(this.inputs,e)}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}getDefaultMultiplicator(e,a){return a&&e.includes(a)?a:Math.max(...e)}initReactions(){this.disposers.push((0,n.reaction)((()=>this.inputs.pair.multiplicatorList),(e=>{this.setMultiplicator(this.getDefaultMultiplicator(e,this.multiplicator))})))}}(0,r.gn)([n.observable],FxDealAttributesService.prototype,"multiplicator",void 0),(0,r.gn)([n.observable],FxDealAttributesService.prototype,"inputs",void 0),(0,r.gn)([n.computed],FxDealAttributesService.prototype,"commission",null),(0,r.gn)([n.action.bound],FxDealAttributesService.prototype,"setMultiplicator",null),(0,r.gn)([n.action],FxDealAttributesService.prototype,"updateInputs",null)},91667:(e,a,s)=>{"use strict";s.d(a,{z:()=>FxLimitService});var i=s(49491),r=s(59312),n=s(60521),o=s(40285),l=s(95029);class FxLimitService{constructor(e){this.limits={takeProfit:void 0,stopLoss:void 0},this.inputs=i({},e),this.inputs.takeProfit&&(this.limits.takeProfit=this.inputs.takeProfit),this.inputs.stopLoss&&(this.limits.stopLoss=this.inputs.stopLoss),this.getStopOut=this.getStopOut.bind(this),this.getLimitsDiapasonFormatted=this.getLimitsDiapasonFormatted.bind(this),this.getTrailingLevel=this.getTrailingLevel.bind(this),this.convert=this.convert.bind(this),this.validate=this.validate.bind(this),this.updateLimit=this.updateLimit.bind(this)}get limitErrors(){const e=this.limits,a=e.stopLoss,s=e.takeProfit;return{stopLoss:a?this.validate(o.FM.STOP_LOSS,a):void 0,takeProfit:s?this.validate(o.FM.TAKE_PROFIT,s):void 0}}get stopOut(){return(0,l.VL)(this.inputs.dealSum,this.inputs.stopOutRate)}getLimitsRange(e){return(0,l.dn)(e,{dealSum:this.inputs.dealSum,precision:(0,l.p8)(e),stopLossRate:this.inputs.stopLossRate,stopOutRate:this.inputs.stopOutRate,takeProfitRate:this.inputs.takeProfitRate,isDealOpening:!0,floatingPnl:this.inputs.commission?-1*this.inputs.commission:0})}getTrailingLevel(e){return e?e.value:(0,l.VL)(this.inputs.dealSum,this.inputs.stopOutRate)}getStopOut(e){return this.convert("amount",e,this.stopOut)}getLimitsDiapasonFormatted(e,a){const s=(0,l.p8)(a),i=(0,l.nH)(this.inputs.currency,s,this.inputs.locale)[a],r=this.getLimitsRange(a)[e];return{from:i("".concat(r.from)),to:i("".concat(r.to))}}updateInputs(e){(0,n.set)(this.inputs,e)}updateLimit(e){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const s=e[a];this.limits[a]=s?i({},s):void 0,this.inputs.saveLimit(a,this.limits[a])}}convert(e,a,s,i){let r=(0,l.jM)(e,a,s,this.inputs.dealSum);if(i){const e=this.getLimitsRange(a);switch((0,l.CG)(r,i,a,e)){case l.Xy.SlLessThenMin:case l.Xy.TpLessThenMin:r=e[i].from;break;case l.Xy.SlMoreThenMax:case l.Xy.TpMoreThenMax:r=e[i].to}}return r}validate(e,a){if(!a)return;let s;return s=String(a.value).length?(0,l.CG)(Number(a.value),e,a.type,this.getLimitsRange(a.type)):(0,l.md)(String(a.value),a.trailing),s}}(0,r.gn)([n.observable],FxLimitService.prototype,"inputs",void 0),(0,r.gn)([n.observable],FxLimitService.prototype,"limits",void 0),(0,r.gn)([n.computed],FxLimitService.prototype,"limitErrors",null),(0,r.gn)([n.computed],FxLimitService.prototype,"stopOut",null),(0,r.gn)([n.action],FxLimitService.prototype,"updateInputs",null),(0,r.gn)([n.action.bound],FxLimitService.prototype,"updateLimit",null)},51066:(e,a,s)=>{"use strict";s.d(a,{j:()=>FxOpenDealService});var i=s(59312),r=s(60521),n=s(27778),o=s(19669),l=(s(56529),s(59943));class FxOpenDealService{constructor(e){this.isOpening=!1,this.dir="up",this.disposers=[],this.confirmations={holdUse:!1,oneClick:!1},this.inputs=e,this.initReactions()}initReactions(){this.disposers=[(0,r.reaction)((()=>this.inputs.account.type),(e=>{"demo"===e&&"oneClick"===this.inputs.getPanel()&&this.inputs.hidePanel()}))]}updateInputs(e){(0,r.set)(this.inputs,e)}acceptOneClick(e){this.inputs.saveOneClick(e)}acceptHoldUse(e){this.inputs.saveIgnoreHoldUse(e)}setDealDir(e){this.dir=e}startGambit(){this.startDeal("down",!1,!1,!0),this.startDeal("up",!1,!1,!0)}showOneClickDeal(e){this.setDealDir(e),"demo"!==this.inputs.account.type&&this.inputs.showPanel(l.r.OneClick)}clearConfirmations(){for(const e in this.confirmations)this.confirmations[e]=!1}startDeal(e,a,s,i){o.Sv.startMark(o.Sv.PerformanceMetric.StartDeal),this.inputs.setErrorVisibility(!0),a&&(this.confirmations.oneClick=!0),s&&(this.confirmations.holdUse=!0);const r=this.inputs.getDealAttributes(),c=r.sum,d=r.stopLoss,u=r.takeProfit,m=r.multiplicator,p=r.pair,h=r.isLimits;this.setDealDir(e);const v=this.inputs.getValidationErrorMessage("amount"),g=h&&u&&this.inputs.validateLimits("takeProfit",u),_=h&&d&&this.inputs.validateLimits("stopLoss",d),f=v||g||_;"real"!==this.inputs.account.type||this.inputs.account.amount?f?(_||g)&&this.inputs.showPanel(l.r.Limits):!this.inputs.isHoldUse||this.confirmations.holdUse?this.inputs.isOneClick||this.confirmations.oneClick||"demo"===this.inputs.account.type?(this.clearConfirmations(),(0,n.U)(),this.inputs.hidePanel(),this.isOpening&&!i||(this.isOpening=!0,this.inputs.startDeal({sum:c,stopLoss:h&&d?d:null,takeProfit:h&&u?u:null,dir:e,multiplicator:m,pair:p}).catch((e=>{e&&e.message&&this.inputs.showTopMessage("info",e.message)})).finally((()=>{o.Sv.stopMark(o.Sv.PerformanceMetric.StartDeal),setTimeout((()=>{this.isOpening=!1}),0)})))):this.inputs.showPanel(l.r.OneClick):this.inputs.showPanel(l.r.HoldUse):this.inputs.showPanel(l.r.Deposit)}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}}(0,i.gn)([r.observable],FxOpenDealService.prototype,"inputs",void 0),(0,i.gn)([r.observable],FxOpenDealService.prototype,"isOpening",void 0),(0,i.gn)([r.observable],FxOpenDealService.prototype,"dir",void 0),(0,i.gn)([r.action],FxOpenDealService.prototype,"updateInputs",null),(0,i.gn)([r.action.bound],FxOpenDealService.prototype,"acceptOneClick",null),(0,i.gn)([r.action.bound],FxOpenDealService.prototype,"acceptHoldUse",null),(0,i.gn)([r.action.bound],FxOpenDealService.prototype,"setDealDir",null),(0,i.gn)([r.action.bound],FxOpenDealService.prototype,"startGambit",null),(0,i.gn)([r.action.bound],FxOpenDealService.prototype,"startDeal",null)},56529:(e,a,s)=>{"use strict";s.d(a,{K:()=>PanelService});var i=s(47014),r=s(59312),n=s(60521);class PanelService{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.disposers=[],this.panelVisible=null,this.panel=null,this.transitionEndDeferred=null,this.isOneClickPanelVisible=!1,this.createDeferred=()=>{let e=()=>{},a=()=>{};const s=new Promise(((s,i)=>{e=s,a=i}));return{resolve:e,reject:a,promise:s}},this.inputs=e,this.isPanelVisible=this.isPanelVisible.bind(this),this.initReactions()}showPanel(e){this.panel=e,this.panelVisible=e}isPanelVisible(e){return this.panelVisible===e}hidePanel(e){"string"==typeof e&&e!==this.panel||(this.panel=null,this.panelVisible=null)}hidePanelAsync(e){var a=this;return i((function*(){return a.transitionEndDeferred||(a.transitionEndDeferred=a.createDeferred(),"string"==typeof e&&e!==a.panel||(a.panel=null)),yield a.transitionEndDeferred.promise.then((()=>{a.panelVisible=null,a.transitionEndDeferred=null}))}))()}togglePanel(e){this.panel===e?this.hidePanel():this.showPanel(e)}initReactions(){this.disposers=[(0,n.reaction)((()=>this.panel),(e=>{this.inputs.onChangePanel&&this.inputs.onChangePanel(e)}))]}stop(){this.disposers&&this.disposers.forEach((e=>{e()}))}}(0,r.gn)([n.observable],PanelService.prototype,"inputs",void 0),(0,r.gn)([n.observable],PanelService.prototype,"panelVisible",void 0),(0,r.gn)([n.observable],PanelService.prototype,"panel",void 0),(0,r.gn)([n.action.bound],PanelService.prototype,"showPanel",null),(0,r.gn)([n.action.bound],PanelService.prototype,"hidePanel",null),(0,r.gn)([n.action.bound],PanelService.prototype,"hidePanelAsync",null),(0,r.gn)([n.action.bound],PanelService.prototype,"togglePanel",null)},59943:(e,a,s)=>{"use strict";var i;s.d(a,{r:()=>i}),function(e){e.Order="order",e.Limits="limits",e.OneClick="oneClick",e.Multiplicator="multiplicator",e.HoldUse="holdUse",e.TimePicker="timePicker",e.RiskFree="riskFree",e.Amount="amount",e.FixedDuration="fixedDuration",e.Deposit="deposit"}(i||(i={}))},8280:(e,a,s)=>{"use strict";s.d(a,{B:()=>TimePickerService});var i=s(59312),r=s(60521);class TimePickerService{constructor(e){this.disposers=[],this.inputs=e,this.pickerType=this.getDefPickerType(),this.initReactions()}get isFixedDuration(){return this.inputs.pair.quick}get isFastDuration(){return!(!this.inputs.pair.allowedFastDealsDurations||!this.inputs.pair.allowedFastDealsDurations.length)}setPickerType(e){this.pickerType=e,this.inputs.savePickerType(e)}handlePickerTypeChange(e){this.setPickerType(e),this.inputs.onPickerTypeChange(e)}updateInputs(e){(0,r.set)(this.inputs,e)}getDefPickerType(){return this.isFixedDuration||!this.isFastDuration&&"fastDuration"===this.inputs.defaultPickerType?"duration":this.inputs.defaultPickerType}initReactions(){this.disposers.push((0,r.reaction)((()=>this.inputs.pair.quick),(()=>{this.isFixedDuration&&this.handlePickerTypeChange("duration")})),(0,r.reaction)((()=>this.isFastDuration),(()=>{this.isFastDuration||"fastDuration"!==this.pickerType||this.handlePickerTypeChange("duration")})))}}(0,i.gn)([r.observable],TimePickerService.prototype,"pickerType",void 0),(0,i.gn)([r.observable],TimePickerService.prototype,"inputs",void 0),(0,i.gn)([r.computed],TimePickerService.prototype,"isFixedDuration",null),(0,i.gn)([r.computed],TimePickerService.prototype,"isFastDuration",null),(0,i.gn)([r.action.bound],TimePickerService.prototype,"setPickerType",null),(0,i.gn)([r.action],TimePickerService.prototype,"updateInputs",null)},17435:(e,a,s)=>{"use strict";s.d(a,{L:()=>StepAmount});class StepAmount{constructor(e){this.increaseValue=e=>{const a=this.getStepParams(e,0,this.config.step,this.config.isMultiplyStep),s=this.config.linear?this.config.step:StepAmount.calcStep(e,a.step,!1);return this.roundValue(e+s)},this.decreaseValue=e=>{const a=this.getStepParams(e,1,this.config.step,this.config.isMultiplyStep),s=this.config.linear?this.config.step:StepAmount.calcStep(e,a.step,!0);let i=this.roundValue(e-s);return i<0&&!this.config.allowNegative&&(i=0),i},this.getStepParams=(e,a,s,i)=>{let r;return i&&(r=this.config.steps.filter((s=>e>=s.edge+a))[0]),r||(r={edge:0,step:s}),r},this.config=Object.assign({steps:StepAmount.defaultSteps,step:1},e),e.step&&e.isMultiplyStep&&(this.config.isMultiplyStep=!1),this.precision=StepAmount.getPrecision(this.config.step)}static getPrecision(e){const a=String(e).split(".")[1];return"string"==typeof a?a.length:0}roundValue(e){return this.precision?Math.round(e*Math.pow(10,this.precision))/Math.pow(10,this.precision):Math.round(e)}}StepAmount.defaultSteps=[{edge:1e7,step:5e6},{edge:1e6,step:1e6},{edge:1e5,step:1e5},{edge:1e4,step:1e4},{edge:1e3,step:1e3},{edge:500,step:100},{edge:100,step:50},{edge:50,step:10},{edge:10,step:5},{edge:0,step:1}],StepAmount.calcStep=(e,a,s)=>{const i=Math.abs(e%a);return i&&e>=0?s?i:a-i:i&&e<0?s?a-i:i:a}},30362:(e,a,s)=>{"use strict";s.d(a,{_:()=>StepAmountMartingale});class StepAmountMartingale{constructor(){this.increaseValue=e=>StepAmountMartingale.calcNextValue(e,!1),this.decreaseValue=e=>{let a=StepAmountMartingale.calcNextValue(e,!0);return a<0&&(a=0),a}}}StepAmountMartingale.calcNextValue=(e,a)=>function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=Math.pow(10,a);return Math.round(e*s)/s}(a?e/2:2*e,2)},68516:(e,a,s)=>{"use strict";s.d(a,{EK:()=>u,LF:()=>c,Mx:()=>l,Tr:()=>i,f4:()=>o,qG:()=>d,rj:()=>n});var i,r=s(7581);function n(e){return Math.floor(new Date(1e3*e).setSeconds(0)/1e3)}function o(e){return 60*Math.floor(e/60)}function l(e,a){const s=n(e),i=a.minDuration,r=a.maxDuration,o=a.timeCloseTrading,l=a.lockedTrading,c=function(e){return n(e)+60}(e)+i,d=Math.min(s+r,n(o)-60),u=Math.min(r,l||r<60?r:d-s);return{durationMin:Math.floor(i),durationMax:Math.floor(u<0?0:u),timeCloseMin:c,timeCloseMax:d}}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const n=o(s),l=o(i),c=(0,r.Z)((0,r.Z)(e).concat(a)),d=c.indexOf(n),u=c.indexOf(l);-1!==u&&c.splice(u,1),-1!==d&&c.splice(d,1);const m=c.slice(0,4);return[s].concat(m).concat([l]).sort(((e,a)=>e-a))}function d(e,a,s){const r=l(a,s),n=r.durationMin;return e>r.durationMax?i.durationMoreThenMax:e<n?i.durationLessThenMin:void 0}function u(e,a,s){const r=l(a,s),n=r.timeCloseMin;return e>r.timeCloseMax?i.timeCloseMoreThenMax:e<n?i.timeCloseLessThenMin:void 0}!function(e){e.durationLessThenMin="durationLessThenMin",e.durationMoreThenMax="durationMoreThenMax",e.timeCloseLessThenMin="timeCloseLessThenMin",e.timeCloseMoreThenMax="timeCloseMoreThenMax",e.timeAndIsOrder="timeAndIsOrder"}(i||(i={}))},25935:(e,a,s)=>{"use strict";s.d(a,{y:()=>i});const i=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":";const i=new Date(e),r=i.getMinutes();let n=i.getHours(),o=null;a||(o=n>=12?"PM":"AM",n%=12,n=0===n?12:n);const l=n<10?"0".concat(n):n,c=r<10?"0".concat(r):r;return["".concat(l).concat(s).concat(c),o]}},45498:(e,a,s)=>{"use strict";s.d(a,{B:()=>i});function i(e,a){return e&&e[a]?e[a]:e&&e.usd||{}}},62853:(e,a,s)=>{"use strict";function i(e){const a=e.getTimezoneOffset(),s=Math.abs(a),i=Math.floor(s/60),r=Math.floor(s-60*i);return"(UTC".concat(a>0?"-":"+").concat(i,":").concat(r<10?"0".concat(r):r,")")}s.d(a,{u:()=>i})},64052:(e,a,s)=>{"use strict";s.d(a,{L:()=>n});var i=s(37488),r=s(87601);const n=e=>(0,i.useMediaQuery)({minWidth:r.j$.BREAKPOINT_961})&&!e},74397:(e,a,s)=>{"use strict";s.d(a,{n:()=>v});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(17302),c=s(77740),d=s(95029),u=s(12972);const m=["ref"],p=["className","tooltip","valueTooltip"],h=e=>{let a=e.tooltip,s=e.isSizeFixed;return n.createElement(l.u,{interactive:!0,placement:"top",triggerOnHover:!0,triggerOnTap:!1,arrow:!0,transition:!0,disablePortal:!0,content:n.createElement("div",{className:o({[u.Z.tooltip]:s})},a)},(e=>{let a=e.ref,s=r(e,m);return n.createElement("span",i({className:u.Z.icon,ref:a},s),n.createElement(c.T08,null))}))},v=e=>{let a=e.className,s=e.tooltip,l=e.valueTooltip,c=r(e,p);return n.createElement(d.nN,i({className:o(a,u.Z.host),icon:s?n.createElement(h,{tooltip:s,isSizeFixed:!0}):null,iconValue:l?n.createElement(h,{tooltip:l}):null},c))}},12972:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2wlNO3QmHGaS",tooltip:"_3hwBy1lmCUCi",tooltip_icon:"_1EBFP2YlA2HP"}},6488:(e,a,s)=>{"use strict";s.d(a,{F:()=>d});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(95029);const c=["className"],d=e=>{let a=e.className,s=r(e,c);return n.createElement(l.F4,i({className:o(a,"data-value-field_deal")},s))}},75403:(e,a,s)=>{"use strict";s.d(a,{W:()=>DealCard,y:()=>d});var i=s(14936),r=s(49491),n=s(27378),o=s(60042),l=s(95029);const c=["children","className","selected","grouped","collapsible","injected","dir","isOpened","hostRef","embedded","onClick","type"],d={DEAL:"deal",ORDER:"order"},u=()=>null,m=()=>null,p=()=>null,h=n.forwardRef(((e,a)=>n.createElement("div",r({className:"deal-card__portal",ref:a},e))));u.displayName="Header",m.displayName="Body",p.displayName="Modal",h.displayName="Portal";class DealCard extends n.Component{constructor(e){super(e)}render(){const e=this.props,a=e.children,s=e.className,v=e.selected,g=e.grouped,_=e.collapsible,f=void 0===_||_,E=e.injected,S=e.dir,y=e.isOpened,b=e.hostRef,C=e.embedded,T=e.onClick,A=e.type,k=void 0===A?d.DEAL:A,w=i(e,c),N=(0,l.HF)(a,u),R=(0,l.HF)(a,m),I=(0,l.HF)(a,p),D=(0,l.HF)(a,h),O=n.createElement(n.Fragment,null,n.createElement("div",{className:"deal-card__modal"},I&&I.props.children),n.createElement("div",{className:"deal-card__header",onClick:T},!g&&f&&n.createElement("div",{className:"deal-card__toggle"},n.createElement(l.PD,{isOpened:y})),N&&N.props.children)),L=n.createElement("div",{className:"deal-card__body"},R.props.children);return n.createElement("div",r({dir:S,className:o("deal-card","deal-card_type-".concat(k),y&&"deal-card_opened",v&&"deal-card_selected",g&&"deal-card_grouped",E&&"deal-card_injected",C&&"deal-card_embedded",s),ref:b},w),D,f?n.createElement(l.uL,{isOpened:y},n.createElement(l.uL.Header,null,O),n.createElement(l.uL.Body,null,L)):n.createElement(n.Fragment,null,O,L))}}DealCard.defaultProps={isOpened:!1,selected:!1,dir:"rtl"},DealCard.Header=u,DealCard.Body=m,DealCard.Modal=p,DealCard.Portal=h},43373:(e,a,s)=>{"use strict";s.d(a,{U:()=>l});var i=s(27378),r=s(60042),n=s(95029),o=s(85505);const l=e=>{let a=e.value,s=e.currency,l=e.tradeDir,c=e.className,d=e.shaded;return i.createElement("div",{className:r("deal-card-amount",c)},i.createElement(o.o,{dir:l})," ",i.createElement("span",{className:r("deal-card-amount__value",{"deal-card-amount__value_shaded":d})},i.createElement(n.ih,{value:a,currency:s,minimumFractionDigits:2})))}},96205:(e,a,s)=>{"use strict";s.d(a,{m:()=>o});var i=s(60042),r=s(27378),n=s(17302);const o=e=>{let a=e.className,s=e.serverTime,o=e.timeClose;return r.createElement(n.Wo,{serverTime:s,startTime:o,render:e=>{let s=e.hours,n=e.minutes,o=e.seconds;return r.createElement("span",{className:i("deal-card-countdown",a),dir:"ltr"},"00"===s?null:r.createElement(r.Fragment,null,r.createElement("span",null,s),":"),r.createElement("span",null,n),":",r.createElement("span",null,o))}})}},11538:(e,a,s)=>{"use strict";s.d(a,{R:()=>c});var i=s(49491),r=s(14936),n=s(60042),o=s(27378);const l=["compact","children"],c=e=>{let a=e.compact,s=e.children,c=r(e,l);return o.createElement("div",i({className:n("deal-card-details",{"deal-card-details_compact":a})},c),s)}},85505:(e,a,s)=>{"use strict";s.d(a,{o:()=>d});var i=s(27378),r=s(60042),n=s(77740);const o=e=>{let a=e.children,s=e.className;return i.createElement("span",{className:r("deal-card-amount__pic",s)},a)},l=()=>i.createElement(o,{className:"deal-card-amount__pic_up"},i.createElement(n.F9O,{className:"deal-card-amount__icon"})),c=()=>i.createElement(o,{className:"deal-card-amount__pic_down"},i.createElement(n.WAH,{className:"deal-card-amount__icon"})),d=e=>{switch(e.dir){case"up":return i.createElement(l,null);case"down":return i.createElement(c,null);case"both":return i.createElement(i.Fragment,null,i.createElement(l,null),i.createElement(c,null));default:return null}}},1798:(e,a,s)=>{"use strict";s.d(a,{m:()=>d});var i=s(27378),r=s(18985),n=s(45797),o=s(77740),l=s(46548);const c=(0,r.vU)({d:{id:"day",defaultMessage:"day"},h:{id:"hour_short",defaultMessage:"h"},m:{id:"min",defaultMessage:"min"},s:{id:"sec_short",defaultMessage:"s"}}),d=e=>{let a=e.duration,s=e.className;const r=(0,l.R)(a),d=r.d,u=r.h,m=r.m,p=r.s,h=a/3600>=1,v=(d?"".concat(d," ").concat(n.NW.formatMessage(c.d)):"")+(u?" ".concat(u," ").concat(n.NW.formatMessage(c.h)):"")+(m?" ".concat(m," ").concat(n.NW.formatMessage(c.m)):"")+(p&&!h?" ".concat(p," ").concat(n.NW.formatMessage(c.s)):"");return i.createElement("div",{className:s&&"card__duration ".concat(s)},i.createElement(o.$9Y,{className:"card__duration__icon"}),v)};d.defaultProps={className:" ",duration:0}},86604:(e,a,s)=>{"use strict";s.d(a,{s:()=>n});var i=s(27378),r=s(60042);const n=e=>{let a=e.size,s=void 0===a?"medium":a,n=e.className;return i.createElement("div",{className:r("deal-card__field-margin",{"deal-card__field-margin_small":"small"===s,"deal-card__field-margin_medium":"medium"===s,"deal-card__field-margin_large":"large"===s,"deal-card__field-margin_xl":"xl"===s},n)})}},99651:(e,a,s)=>{"use strict";s.d(a,{E:()=>l});var i=s(27378),r=s(60042),n=s(60559),o=s(1599);const l=e=>{let a=e.icon,s=e.pairId,l=e.pairTitle,c=e.subTitle,d=e.dealsCount,u=e.renderAmount,m=e.children,p=e.renderControls,h=e.grouped,v=e.centered,g=e.shaded;return i.createElement("div",{className:"deal-card-header"},i.createElement("div",{className:"deal-card-header__content"},i.createElement("div",{className:"deal-card-header__row deal-card-header__block"},h?i.createElement(o.T,{shaded:g},c):i.createElement(n.h,{pairId:s,icon:a,title:l,subTitle:c,count:d,shaded:g}),u),i.createElement("div",{className:r("deal-card-header__row deal-card-header__block",{"deal-card-header__block_centered":v})},m)),p&&i.createElement("div",{className:"deal-card-header__controls"},p))};l.displayName="DealCardHeader"},61743:(e,a,s)=>{"use strict";s.d(a,{c:()=>c});var i=s(27378),r=s(17302),n=s(82844),o=s(95029),l=s(4351);const c=e=>{let a=e.isModal,s=e.rootEl,c=e.modalRootEl,d=e.amount,u=e.currency,m=e.titleText,p=e.isLoading,h=e.onClick,v=e.onClose,g=e.buttonColor,_=e.buttonText,f=e.buttonDisabled,E=e.controls,S=e.isOneClick,y=e.isOneClickSwitcherVisible,b=void 0===y||y,C=e.toggleOneClickTradeDeal;return i.createElement(l.i,{dataTestCloseButton:"deal-card-confirm-block-close-button",dataTestModalButton:"deal-card-confirm-block-submit-button",isModal:a,isLoading:p,rootEl:s,modalRootEl:c,onClick:h,onClose:v,color:g,buttonText:_,buttonDisabled:f,buttonEndText:u&&d&&i.createElement(o.ih,{minimumFractionDigits:2,value:d,currency:u}),controls:E,titleText:m},b&&i.createElement(r.rs,{fullWidth:!0,name:"deal_one_click_switcher",dataTest:"deal-modal-one-click-switcher",checked:S,onChange:C,label:i.createElement(n._,{id:"close_deal_one_click_deal",defaultMessage:"Close trades in 1 click"})}))}},1599:(e,a,s)=>{"use strict";s.d(a,{T:()=>c});var i=s(49491),r=s(14936),n=s(27378),o=s(60042);const l=["children","align","className","shaded"],c=e=>{let a=e.children,s=e.align,c=e.className,d=e.shaded,u=r(e,l);return n.createElement("div",i({"data-test":"deal-card-subtitle",className:o("deal-card-subtitle",{"deal-card-subtitle_shaded":d,"deal-card-subtitle_align-center":"center"===s,"deal-card-subtitle_align-end":"end"===s},c)},u),a)}},60559:(e,a,s)=>{"use strict";s.d(a,{h:()=>l});var i=s(60042),r=s(27378),n=s(95029),o=s(1599);const l=e=>{let a=e.icon,s=e.pairId,l=e.title,c=e.subTitle,d=e.count,u=e.shaded;return r.createElement("div",{className:"deal-card-title"},r.createElement("div",{className:"deal-card-title__asset"},d&&d>0&&r.createElement("div",{className:"deal-card-title__counter"},d),r.createElement(n.JO,{src:a||n.DI,dataTest:"pair-name-".concat(s.toLowerCase()),className:"deal-card-title__icon"})),r.createElement("div",{className:"deal-card-title__heading"},r.createElement("div",{className:i("deal-card-title__main",{"deal-card-title__main_shaded":u}),"data-test":"deal-card-title"},l),r.createElement(o.T,{shaded:u},c)))}},48308:(e,a,s)=>{"use strict";s.d(a,{t:()=>n});var i=s(27378),r=s(60042);const n=e=>{let a=e.color,s=void 0===a?"alpha":a,n=e.align,o=e.children;return i.createElement("div",{className:r("deal-card-value",{"deal-card-value_color-alpha":"alpha"===s,"deal-card-value_color-beta":"beta"===s,"deal-card-value_color-gamma":"gamma"===s,"deal-card-value_align-center":"center"===n,"deal-card-value_align-end":"end"===n})},o)}},76075:(e,a,s)=>{"use strict";s(27378)},63065:(e,a,s)=>{"use strict";s.d(a,{w:()=>d});var i=s(49491),r=s(14936),n=s(27378),o=s(95029),l=s(58674);const c=["disabled","disabledText","buttonText","currency","amount","endIconDataTest"],d=n.forwardRef(((e,a)=>{let s=e.disabled,d=e.disabledText,u=e.buttonText,m=e.currency,p=e.amount,h=e.endIconDataTest,v=r(e,c);return n.createElement(l.J,i({ref:a,disabled:s,endText:!s&&n.createElement(o.ih,{"data-test":h,minimumFractionDigits:2,currency:m,value:p})},v),s?d:u)}));d.displayName="DealCurrentCardButton"},58810:(e,a,s)=>{"use strict";s.d(a,{e:()=>l});var i=s(27378),r=s(17302),n=s(77740),o=s(88770);const l=e=>{let a=e.label,s=e.takeProfit,l=e.stopLoss,c=e.onClick,d=e.currency,u=e.precision;return i.createElement(r.zx,{fullWidth:!0,variant:"secondary",size:"s",onClick:c,overstring:a,dataTest:"deal-limits-button-test"},i.createElement("span",{className:"deal-limits-button__text"},(null==l?void 0:l.trailing)&&i.createElement(n.A_e,{className:"deal-limits-button__icon"}),i.createElement(o.P,{className:"deal-limits-button__value",limit:l,currency:d,precision:u}),"/",i.createElement(o.P,{className:"deal-limits-button__value",limit:s,currency:d,precision:u})))}},86520:(e,a,s)=>{"use strict";s(2243),s(60042),s(27378),s(17302),s(95029),s(98727)},69602:(e,a,s)=>{"use strict";s.d(a,{Z:()=>d});var i=s(60042),r=s(27378),n=s(73598),o=s(82844),l=s(95029),c=s(58674);const d=r.forwardRef(((e,a)=>{let s=e.item,d=e.currency,u=e.showModal,m=e.isLoading,p=e.isBigMargin;const h=r.useCallback((()=>u(s.id)),[u,s.id]);return r.createElement(n.Qj,null,(()=>r.createElement(r.Fragment,null,s.allowCloseAll&&s.dealsCount>0&&r.createElement("div",{className:i("deal-summary__controls",{"deal-summary__controls_big-margin":p})},r.createElement(c.J,{dataTest:"deal-summary-block-close-all-deals-button",ref:a,endText:s.availableDealsCount>0&&r.createElement(l.ih,{minimumFractionDigits:2,value:s.availableCancelAmount,currency:d}),disabled:0===s.availableDealsCount||m||s.isCanceling,onClick:h,isLoading:m||s.isCanceling,isCentered:s.dealsCount>s.availableDealsCount&&0===s.availableDealsCount},(e=>0===e.dealsCount?r.createElement(o._,{id:"deals_list_summary_no_deals",defaultMessage:"No deals"}):e.dealsCount>e.availableDealsCount&&0===e.availableDealsCount?r.createElement(o._,{id:"deals_list_market_closed_button",defaultMessage:"Market is closed"}):r.createElement(o._,{id:"deals_list_summary_close_all_button",defaultMessage:"Close all: {amount}",values:{amount:e.availableDealsCount}}))(s))))))}));d.displayName="DealSummaryControls"},98727:(e,a,s)=>{"use strict";s(60042),s(27378),s(95029)},338:(e,a,s)=>{"use strict";s(27378)},77299:(e,a,s)=>{"use strict";s(60042),s(27378)},38955:(e,a,s)=>{"use strict";s(49491),s(14936),s(27378),s(17302),s(77740)},98074:(e,a,s)=>{"use strict";s.d(a,{T:()=>l});var i=s(27378),r=s(73598),n=s(17939),o=s(4351);const l=e=>{let a=e.buttonText,s=e.buttonEndText,l=e.titleText,c=e.warnText,d=e.rootEl,u=e.modalRootEl,m=e.modalItem,p=e.onClose,h=e.onClick;return i.createElement(r.Qj,null,(()=>{var e,r,v,g;const _=(null!==(e=null==m?void 0:m.availableDealsCount)&&void 0!==e?e:0)<(null!==(r=null==m?void 0:m.dealsCount)&&void 0!==r?r:0),f=null!==(v=null==m?void 0:m.availableCancelAmount)&&void 0!==v?v:0,E=null!==(g=null==m?void 0:m.availableAmount)&&void 0!==g?g:0,S=(0,n.p)(f,E);return i.createElement(o.i,{dataTestCloseButton:"deal-summary-confirm-block-close-button",dataTestModalButton:"deal-summary-confirm-block-submit-button",isModal:!!m,rootEl:d.current,modalRootEl:u.current,isLoading:!(null==m||!m.isCanceling),onClick:()=>{null!=m&&m.isCanceling||h()},onClose:p,color:S,buttonText:a,buttonEndText:s,titleText:l},_?i.createElement("div",{className:"deal-summary-modal-warn","data-test":"deal-summary-confirm-block-warn-message"},c):null)}))}},86361:(e,a,s)=>{"use strict";s(49491),s(14936),s(27378),s(60042),s(95029)},9197:(e,a,s)=>{"use strict";s.d(a,{n:()=>c});var i=s(49491),r=s(14936),n=s(27378),o=s(60042);const l=["children","className"],c=e=>{let a=e.children,s=e.className,c=r(e,l);return n.createElement("div",i({className:o("deal-group-list",s)},c),a)}},58674:(e,a,s)=>{"use strict";s.d(a,{J:()=>n});var i=s(27378),r=s(17302);const n=i.forwardRef(((e,a)=>{let s=e.color,n=e.disabled,o=e.endText,l=e.children,c=e.isLoading,d=e.isCentered,u=e.dataTest,m=e.onClick;return i.createElement(r.zx,{fullWidth:!0,variant:s?"primary":"secondary",disabled:n,ref:a,size:"xs",loading:c,horizontalAlign:d?"center":"start",endText:!c&&o,dataTest:u,color:s,onClick:m},l)}));n.displayName="DealsListButton"},4351:(e,a,s)=>{"use strict";s.d(a,{i:()=>d});var i=s(2243),r=s(27378),n=s(29609),o=s(77740),l=s(58674);const c=e=>{let a=e.titleText,s=e.buttonText,n=e.buttonEndText,c=e.color,d=e.buttonDisabled,u=e.children,m=e.modalRootEl,p=e.rootEl,h=e.onClick,v=e.onClose,g=e.isLoading,_=e.controls,f=e.dataTestCloseButton,E=e.dataTestModalButton;const S=r.useState({top:0}),y=i(S,2),b=y[0],C=y[1],T=r.useRef(null),A=r.useRef(null);return r.useEffect((()=>{const e=m&&m.getBoundingClientRect(),a=p&&p.getBoundingClientRect(),s=A.current,i=T.current;if(s&&i){const r=s.getBoundingClientRect(),n=i.getBoundingClientRect();if(e&&a&&r&&n){const s=e.top-a.top,i=r.top-n.top;C({top:s-i})}}}),[]),r.createElement("div",{className:"deals-list-modal",ref:T,style:{top:b.top}},r.createElement("button",{onClick:v,className:"deals-list-modal__close","data-test":f},r.createElement(o.bMz,null)),a?r.createElement("div",{className:"deals-list-modal__header"},a):null,u?r.createElement("div",{className:"deals-list-modal__body"},u):null,s||_?r.createElement("div",{className:"deals-list-modal__footer"},_&&_(A,"deals-list-modal__button"),s&&r.createElement(l.J,{disabled:d,color:c,className:"deals-list-modal__button",dataTest:E,ref:A,onClick:h,isLoading:g,endText:n},s)):null)},d=e=>{let a=e.modalRootEl,s=e.rootEl,i=e.onClick,o=e.onClose,l=e.isLoading,d=e.isModal,u=e.titleText,m=e.buttonText,p=e.buttonEndText,h=e.color,v=e.buttonDisabled,g=e.controls,_=e.children,f=e.dataTestCloseButton,E=e.dataTestModalButton;return r.createElement(r.Fragment,null,r.createElement(n.Z,{in:d,classNames:"deals-list-modal-overlay-animation",timeout:300,unmountOnExit:!0},r.createElement("div",{className:"deals-list-modal-overlay"})),r.createElement(n.Z,{in:d,classNames:"deals-list-modal-animation",timeout:300,unmountOnExit:!0},r.createElement(c,{titleText:u,buttonDisabled:v,buttonText:m,buttonEndText:p,color:h,modalRootEl:a,rootEl:s,onClick:i,onClose:o,isLoading:l,controls:g,dataTestCloseButton:f,dataTestModalButton:E},_)))}},88770:(e,a,s)=>{"use strict";s.d(a,{P:()=>n});var i=s(27378),r=s(95029);const n=e=>{let a=e.limit,s=e.currency,n=e.precision,o=e.className;if(a)switch(a.type){case"amount":return i.createElement(r.ih,{minimumFractionDigits:2,currency:s,value:a.value,className:o});case"percent":return i.createElement(r.p7,{value:a.value,className:o});case"price":return i.createElement(r.l1,{value:a.value,minimumFractionDigits:n,maximumFractionDigits:n,className:o});default:return null}return i.createElement("span",{className:o},"–")}},92756:(e,a,s)=>{"use strict";var i=s(2243),r=s(27378),n=s(50649),o=s(95029);(0,n.observer)((e=>{let a=e.priceOpen,s=e.priceClose,n=e.precisionPip,l=e.precision,c=e.dir;const d=(0,o.S0)({priceOpen:a,priceClose:s,precisionPip:n,dir:c}),u=i(d,2),m=u[0],p=u[1];return r.createElement(r.Fragment,null,m,r.createElement(o.l1,{style:"decimal",value:p,maximumFractionDigits:Math.max(l-n,0),minimumIntegerDigits:Math.max(l-n,0)})," pips")}))},17939:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});const i=(e,a)=>e===a?"neutral":e>a?"positive":"negative"},70114:(e,a,s)=>{"use strict";s.d(a,{c:()=>r});const i=e=>{if(e>0)return Math.floor(e);const a=Math.ceil(e);return 0===a?0:a},r=e=>{const a=Math.abs(e);if(a>=1)return i(e);if(a<.1&&a>0)return e<0?-.1:.1;const s=Math.pow(10,1);return i(e*s)/s}},74262:(e,a,s)=>{"use strict";s.d(a,{Bo:()=>S.Bo,DI:()=>_.D,Dx:()=>y.D,Eh:()=>l.E,Gn:()=>A.G,JQ:()=>p.J,LV:()=>S.LV,Qb:()=>C.Q,RQ:()=>o.R,Ti:()=>u.T,U0:()=>n.U,UH:()=>f.U,UO:()=>S.UO,VT:()=>v.V,WT:()=>r.W,Y_:()=>T.Y,Zd:()=>d.Z,_2:()=>E._,aN:()=>b.a,ce:()=>N.c,do:()=>h.d,iQ:()=>R.i,jq:()=>w.j,nN:()=>i.n,nh:()=>m.n,p$:()=>k.p,tK:()=>c.t,uh:()=>g.u,ze:()=>S.ze});s(96137);var i=s(74397),r=(s(6488),s(75403)),n=s(43373),o=(s(96205),s(11538)),l=(s(85505),s(1798),s(86604),s(99651)),c=(s(61743),s(1599),s(60559),s(48308)),d=(s(76075),s(63065),s(58810),s(86520),s(69602)),u=(s(98727),s(338),s(77299),s(98074)),m=(s(38955),s(86361),s(9197)),p=s(58674),h=(s(4351),s(88770),s(92756),s(57672),s(29454),s(57182)),v=s(3493),g=(s(77073),s(21500),s(60297)),_=s(60121),f=s(53695),E=s(40446),S=s(94904),y=(s(34853),s(27530)),b=s(37096),C=(s(55886),s(3892),s(87487)),T=s(7081),A=s(77987),k=s(63577),w=(s(61399),s(32757),s(57522),s(20493)),N=(s(73626),s(58214),s(70114)),R=s(92087);s(95029)},92087:(e,a,s)=>{"use strict";s.d(a,{i:()=>i});const i=(0,s(13243).v)({name:"DealsList"})},57672:(e,a,s)=>{"use strict";s.d(a,{A:()=>p});var i=s(27378),r=s(50649),n=s(82844),o=s(95029),l=s(6488),c=s(74397);const d="open",u="swap",m=e=>{switch(e.name){case d:return i.createElement(n._,{id:"fx_commission_for_transaction",defaultMessage:"Trading commission"});case u:return i.createElement(n._,{id:"fx_commission_for_rollover",defaultMessage:"Overnight commission"});default:return null}},p=(0,r.observer)((e=>{let a=e.commission,s=e.commissionDetail,r=e.predictionSwapCommission,p=e.currency;return i.createElement(l.F,{data:i.createElement(n._,{id:"fx_commissions",defaultMessage:"Commissions"}),value:i.createElement(o.ih,{minimumFractionDigits:2,value:0-a,currency:p}),highlightedValue:!0},i.createElement(i.Fragment,null,s&&s.open?i.createElement(c.n,{data:i.createElement(m,{name:d}),value:i.createElement(o.ih,{minimumFractionDigits:2,value:0-s.open,currency:p}),highlighted:!0}):null,s&&s.swap?i.createElement(c.n,{data:i.createElement(m,{name:u}),value:i.createElement(o.ih,{minimumFractionDigits:2,value:0-s.swap,currency:p}),highlighted:!0}):null,r?i.createElement(c.n,{highlighted:!0,data:i.createElement(n._,{id:"fx_commission_next_overnight",defaultMessage:"Next Overnight"}),tooltip:i.createElement(n._,{id:"fx_commission_next_overnight_description",defaultMessage:"Next overnight commission will be deducted the next business day when the asset opens for trade."}),value:i.createElement(o.ih,{minimumFractionDigits:2,value:0-r,currency:p}),contrasted:!0,highlightedValue:!0}):null))}))},21500:(e,a,s)=>{"use strict";s.d(a,{n:()=>p});var i=s(27378),r=s(82844),n=s(45797),o=s(18985),l=s(8895),c=s(95472),d=s(95029),u=s(74397),m=s(11538);const p=e=>{let a=e.deal,s=e.asset;const p=new Date(1e3*a.timeOpen);return i.createElement(m.R,{"data-test":"deal-current-card-details-ftt"},i.createElement(u.n,{data:i.createElement(r._,{id:"duration",defaultMessage:"Duration"}),value:(0,c.L)(a.duration,{d:n.NW.formatMessage({id:"day",defaultMessage:"day"}),h:n.NW.formatMessage({id:"hour",defaultMessage:"hour"}),m:n.NW.formatMessage({id:"min",defaultMessage:"min"}),s:n.NW.formatMessage({id:"sec",defaultMessage:"sec."})})}),i.createElement(u.n,{data:i.createElement(r._,{id:"opening",defaultMessage:"Opening"}),value:i.createElement(d.l1,{style:"decimal",value:a.cursStrike||a.cursOpen||0,minimumFractionDigits:s.precision||6,maximumFractionDigits:s.precision||6})}),i.createElement(u.n,{data:i.createElement(r._,{id:"id_deal",defaultMessage:"Trade ID"}),value:a.id}),i.createElement(u.n,{data:i.createElement(r._,{id:"time",defaultMessage:"Time"}),value:i.createElement(i.Fragment,null,i.createElement(o.Ji,{value:p,day:"numeric",month:"short"})," ",(0,l.M)(p,{withMilliseconds:!0}))}))}},77073:(e,a,s)=>{"use strict";s.d(a,{r:()=>p});var i=s(27378),r=s(73598),n=s(82844),o=s(18985),l=s(8895),c=s(95029),d=s(74397),u=s(11538),m=s(57672);const p=e=>{let a=e.deal,s=e.asset,p=e.children;const h=new Date(1e3*a.timeOpen);return i.createElement(u.R,{"data-test":"deal-current-card-details-fx"},i.createElement(r.Qj,null,(()=>i.createElement(d.n,{data:i.createElement(n._,{id:"order_form_quote_input_action",defaultMessage:"Current quote"}),value:i.createElement(c.l1,{style:"decimal",value:a.cursCurrent,minimumFractionDigits:s.precision||6,maximumFractionDigits:s.precision||6})}))),i.createElement(d.n,{data:i.createElement(n._,{id:"opening",defaultMessage:"Opening quote"}),value:i.createElement(c.l1,{style:"decimal",value:a.cursOpen,minimumFractionDigits:s.precision||6,maximumFractionDigits:s.precision||6})}),i.createElement(d.n,{data:i.createElement(n._,{id:"id_deal",defaultMessage:"Trade ID"}),value:a.id}),i.createElement(r.Qj,null,(()=>i.createElement(m.A,{commission:a.commission,currency:a.currency,commissionDetail:a.commissionDetail,predictionSwapCommission:a.predictionSwapCommission}))),i.createElement(d.n,{data:i.createElement(n._,{id:"time",defaultMessage:"Time"}),value:i.createElement(i.Fragment,null,i.createElement(o.Ji,{value:h,day:"numeric",month:"short"})," ",(0,l.M)(h,{withMilliseconds:!0}))}),p)}},57182:(e,a,s)=>{"use strict";s.d(a,{d:()=>E});var i=s(27378),r=s(31542),n=s(73598),o=(s(60042),s(17302),s(77740),s(95029)),l=s(75403),c=s(43373),d=s(96205),u=(s(1798),s(99651)),m=s(61743),p=s(48308),h=s(63065),v=s(82844),g=s(8141),_=(s(69602),s(338),s(77299),s(17939)),f=(s(58674),s(92756),s(21500));const E=e=>{let a=e.timeService,s=e.deal,E=e.asset,S=e.isOpened,y=e.isOneClickSell,b=e.cancelDeal,C=e.selectDeal,T=e.toggleOneClickTradeDeal,A=e.selected,k=e.grouped,w=e.collapsible,N=e.injected,R=e.isCloseConfirmation,I=e.modalPortalEl,D=e.className,O=e.dealAmountEdge,L=void 0===O?{min:1,max:1,default:1}:O,M=e.onToggleCloseConfirmation;const P=s.id,x=i.useRef(null),F=i.useRef(null),B=i.useCallback((()=>M(!0)),[M]),Z=i.useCallback((()=>F.current&&M(!1)),[M]),U=i.useCallback((e=>{e.stopPropagation(),y?b(P):B()}),[y,P,B,b]),H=i.useCallback((()=>{b(P)}),[b,P]),G=i.useCallback((()=>{T(!y)}),[y,T]),V=i.useCallback((()=>{null==C||C(P)}),[P,C]),W=i.createElement(m.c,{titleText:i.createElement(v._,{id:"fx_confirm_deals_close",defaultMessage:"Are you sure that you want to close the trade?"}),rootEl:null!=I?I:F.current,modalRootEl:x.current,isModal:!!R,isOneClick:y,onClose:Z,onClick:H,toggleOneClickTradeDeal:G,controls:(e,a)=>i.createElement(n.Qj,null,(()=>i.createElement(h.w,{"data-test":"deal-current-card-close-confirm-deal-button-ftt",endIconDataTest:"deal-current-card-close-confirm-deal-button-value-ftt",className:a,ref:e,disabled:E.lockedTrading,isLoading:s.canceling,isCentered:E.lockedTrading,currency:s.currency,amount:s.return,buttonText:i.createElement(v._,{id:"close",defaultMessage:"Close"}),color:(0,_.p)(s.return,s.sum),onClick:H})))});return i.createElement(l.W,{grouped:k,collapsible:w,"data-id":"bo-".concat(P),"data-test":"deal-current-card-ftt",isOpened:S,selected:A,injected:N,onClick:V,hostRef:F,className:D,dir:(0,g.L)()},i.createElement(l.W.Modal,null,i.createElement(n.Qj,null,(()=>{const e=Boolean(!s.riskfree&&!s.cancelDisabled&&s.return&&s.sum>=L.min);return(k&&!A||E.lockedTrading||!e)&&setTimeout(Z),I?(0,r.createPortal)(W,I):W}))),i.createElement(l.W.Header,null,i.createElement(u.E,{grouped:k,pairId:E.id,icon:E.icon,pairTitle:E.title,subTitle:k?"FTT":i.createElement(i.Fragment,null,s.riskfree?i.createElement("span",{className:"deal-card-subtitle-ftt"},"RISK FREE"):"FTT"," ",i.createElement(o.p7,{value:s.winperc})),renderAmount:i.createElement(n.Qj,null,(()=>i.createElement(c.U,{tradeDir:s.dir,value:s.sum,currency:s.currency}))),renderControls:k?null:i.createElement(n.Qj,null,(()=>{const e=Boolean(!s.riskfree&&!s.cancelDisabled&&s.return&&s.sum>=L.min),a=E.lockedTrading||!e;return i.createElement(h.w,{dataTest:"deal-current-card-close-button-ftt",endIconDataTest:"deal-current-card-close-button-value-ftt",ref:x,disabled:a,isCentered:a,isLoading:s.canceling,amount:s.return,currency:s.currency,disabledText:E.lockedTrading?i.createElement(v._,{id:"deals_list_market_closed_button",defaultMessage:"Market is closed"}):i.createElement(v._,{id:"no_sale",defaultMessage:"No sale"}),buttonText:i.createElement(v._,{id:"close",defaultMessage:"Close"}),color:S?(0,_.p)(s.return,s.sum):void 0,onClick:U})}))},i.createElement(n.Qj,null,(()=>{const e=s.timeClose-a.serverTime-s.duration;return i.createElement(p.t,null,i.createElement(d.m,{serverTime:e>0?a.serverTime+e:a.serverTime,timeClose:s.timeClose}))})),i.createElement(n.Qj,null,(()=>i.createElement(p.t,null,i.createElement(o.oI,{value:s.balanceChange},i.createElement(o.ih,{"data-test":"deal-current-card-floating-amount-ftt",isSign:!0,minimumFractionDigits:2,currency:s.currency,value:s.balanceChange}))))))),i.createElement(l.W.Body,null,k&&i.createElement(n.Qj,null,(()=>{const e=Boolean(!s.riskfree&&!s.cancelDisabled&&s.return&&s.sum>=L.min),a=E.lockedTrading||!e;return i.createElement(h.w,{"data-test":"deal-current-card-close-button-ftt",endIconDataTest:"deal-current-card-close-button-value-ftt",ref:x,disabled:a,isCentered:a,isLoading:s.canceling,amount:s.return,currency:s.currency,disabledText:E.lockedTrading?i.createElement(v._,{id:"deals_list_market_closed_button",defaultMessage:"Market is closed"}):i.createElement(v._,{id:"no_sale",defaultMessage:"No sale"}),buttonText:i.createElement(v._,{id:"close",defaultMessage:"Close"}),color:(0,_.p)(s.return,s.sum),onClick:U})})),i.createElement(n.Qj,null,(()=>i.createElement(f.n,{deal:s,asset:E})))))}},3493:(e,a,s)=>{"use strict";s.d(a,{V:()=>T});var i=s(27378),r=s(31542),n=s(73598),o=s(46006),l=s(29609),c=(s(60042),s(17302),s(77740),s(95029)),d=s(75403),u=s(43373),m=(s(1798),s(99651)),p=s(61743),h=s(48308),v=s(63065),g=s(82844),_=s(8141),f=(s(69602),s(338),s(77299),s(70114)),E=s(17939),S=(s(58674),s(92756),s(40285)),y=s(29454),b=s(77073),C=s(57547);const T=e=>{let a=e.deal,s=e.asset,T=e.grouped,A=e.collapsible,k=e.isOpened,w=e.injected,N=e.isOneClickSell,R=e.selected,I=e.isCloseConfirmation,D=e.modalPortalEl,O=e.limitsFormOpened,L=e.className,M=e.dealCurrentService,P=e.toggleOneClickTradeDeal,x=e.handleLimitError,F=e.cancelDeal,B=e.selectDeal,Z=e.onToggleCloseConfirmation;const U=a.id,H=a.dir,G=i.useRef(null),V=i.useRef(null),W=i.useCallback((()=>Z(!0)),[Z]),j=i.useCallback((()=>Z(!1)),[Z]),z=i.useCallback((e=>{e.stopPropagation(),N?F(U):W()}),[N,U,W,F]),q=i.useCallback((()=>{F(U)}),[F,U]),K=i.useCallback((()=>{P(!N)}),[N,P]),Y=i.useCallback((()=>{null==B||B(U)}),[U,B]),X=i.useCallback(((e,a)=>e.addEventListener("transitionend",a,!1)),[]),J=i.createElement(p.c,{titleText:i.createElement(g._,{id:"fx_confirm_deals_close",defaultMessage:"Are you sure that you want to close the trade?"}),rootEl:null!=D?D:V.current,modalRootEl:G.current,isModal:!!I,isOneClick:N,onClose:j,onClick:q,toggleOneClickTradeDeal:K,controls:(e,r)=>i.createElement(n.Qj,null,(()=>i.createElement(v.w,{"data-test":"deal-current-card-close-confirm-deal-button-fx",endIconDataTest:"deal-current-card-close-confirm-deal-button-value-fx",className:r,ref:e,isLoading:a.canceling,isCentered:s.lockedTrading,currency:a.currency,amount:a.floatingPnl+a.sum,buttonText:i.createElement(g._,{id:"close",defaultMessage:"Close"}),color:(0,E.p)(a.sum+a.floatingPnl,a.sum),onClick:q})))});return i.createElement(d.W,{"data-id":"fx-".concat(U),grouped:T,collapsible:A,"data-test":"deal-current-card-fx",isOpened:k,selected:R,injected:w,onClick:Y,hostRef:V,className:L,dir:(0,_.L)()},i.createElement(d.W.Modal,null,i.createElement(n.Qj,null,(()=>((T&&!R||s.lockedTrading)&&j(),D?(0,r.createPortal)(J,D):J)))),i.createElement(d.W.Header,null,i.createElement(m.E,{grouped:T,pairId:s.id,icon:s.icon,pairTitle:s.title,subTitle:i.createElement(n.Qj,null,(()=>i.createElement(i.Fragment,null,T?"X".concat(a.multiplicator):"FX X".concat(a.multiplicator)))),renderAmount:i.createElement(n.Qj,null,(()=>i.createElement(u.U,{tradeDir:H,value:a.sum,currency:a.currency}))),renderControls:T?null:i.createElement(n.Qj,null,(()=>i.createElement(v.w,{dataTest:"deal-current-card-close-button-fx",endIconDataTest:"deal-current-card-close-button-value-fx",ref:G,disabled:s.lockedTrading,disabledText:i.createElement(g._,{id:"deals_list_market_closed_button",defaultMessage:"Market is closed"}),buttonText:i.createElement(g._,{id:"close",defaultMessage:"Close"}),isLoading:a.canceling,isCentered:s.lockedTrading,amount:a.floatingPnl+a.sum,currency:a.currency,color:k?(0,E.p)(a.sum+a.floatingPnl,a.sum):void 0,onClick:z})))},i.createElement(n.Qj,null,(()=>{const e=a.floatingPnl,s=(0,f.c)(e/a.sum*100);return i.createElement(i.Fragment,null,i.createElement(h.t,null,i.createElement(c.oI,{value:s},i.createElement(c.p7,{"data-test":"deal-current-card-floating-percent-fx",value:s,isSign:!0}))),i.createElement(h.t,null,i.createElement(c.oI,{value:e},i.createElement(c.ih,{"data-test":"deal-current-card-floating-amount-fx",isSign:!0,minimumFractionDigits:2,currency:a.currency,value:e}))))})))),i.createElement(d.W.Body,null,T&&i.createElement(n.Qj,null,(()=>i.createElement(v.w,{dataTest:"deal-current-card-close-button-fx",endIconDataTest:"deal-current-card-close-button-value-fx",ref:G,disabled:s.lockedTrading,disabledText:i.createElement(g._,{id:"deals_list_market_closed_button",defaultMessage:"Market is closed"}),buttonText:i.createElement(g._,{id:"close",defaultMessage:"Close"}),isLoading:a.canceling,isCentered:s.lockedTrading,amount:a.floatingPnl+a.sum,currency:a.currency,color:(0,E.p)(a.sum+a.floatingPnl,a.sum),onClick:z}))),i.createElement(n.Qj,null,(()=>(!R&&O&&M.toggleLimitsForm(!1),i.createElement(i.Fragment,null,i.createElement(o.Z,{mode:"out-in"},i.createElement(l.Z,{key:String(O),addEndListener:X,classNames:"deal-current-card-fx-fade"},i.createElement("div",{className:"deal-current-card-fx-content"},!O&&i.createElement("div",{className:"deal-current-card-fx-content__item"},i.createElement(b.r,{deal:a,asset:s})),i.createElement("div",{className:"deal-current-card-fx-content__item"},i.createElement(y.q,{title:i.createElement(C.K,{deal:a,asset:s}),opened:O,deal:a,asset:s,limitTypes:[S.$i.AMOUNT,S.$i.PERCENT,S.$i.PRICE],dealCurrentService:M,handleError:x})))))))))))}},60121:(e,a,s)=>{"use strict";s.d(a,{D:()=>m});var i=s(27378),r=s(73598),n=(s(60042),s(17302),s(77740),s(95029)),o=s(75403),l=s(43373),c=(s(1798),s(99651)),d=s(8141),u=(s(58674),s(48308));s(63065),s(69602),s(338),s(77299),s(92756);const m=e=>{let a=e.id,s=e.deals,m=e.asset,p=e.isOpened,h=e.children,v=e.toggleGroup;const g=i.useRef(null),_=i.useRef(null),f=i.useCallback((()=>{v(a)}),[a,v]),E=s[0].currency,S=s.reduce(((e,a)=>(!e.includes(a.dir)&&e.length<2&&e.push(a.dir),e)),[]),y=e=>e.reduce(((e,a)=>e+=a.sum),0);return i.createElement(o.W,{className:"deal-card_group","data-id":"ftt-".concat(a),"data-test":"deal-current-card-group-ftt",isOpened:p,onClick:f,hostRef:g,dir:(0,d.L)()},i.createElement(o.W.Portal,{ref:_}),i.createElement(o.W.Header,null,i.createElement(c.E,{pairId:m.id,icon:m.icon,pairTitle:m.title,subTitle:"FTT",renderAmount:i.createElement(r.Qj,null,(()=>{const e=y(s);return i.createElement(l.U,{tradeDir:2===S.length?"both":S[0],value:e,currency:E})})),dealsCount:s.length},i.createElement(r.Qj,null,(()=>{const e=s.reduce(((e,a)=>e+=a.balanceChange),0),a=y(s),r=Math.round(e/a*100);return i.createElement(i.Fragment,null,i.createElement(u.t,null,i.createElement(n.oI,{value:r},i.createElement(n.p7,{value:r,isSign:!0}))),i.createElement(u.t,null,i.createElement(n.oI,{value:e},i.createElement(n.ih,{isSign:!0,minimumFractionDigits:2,currency:E,value:e}))))})))),i.createElement(o.W.Body,null,h(_.current)))}},60297:(e,a,s)=>{"use strict";s.d(a,{u:()=>_});var i=s(27378),r=s(73598),n=(s(60042),s(17302),s(77740),s(95029)),o=s(75403),l=s(43373),c=(s(1798),s(99651)),d=s(61743),u=s(48308),m=s(63065),p=s(8141),h=s(82844),v=(s(69602),s(338),s(77299),s(70114)),g=s(17939);s(58674),s(92756);const _=e=>{let a=e.id,s=e.deals,_=e.asset,f=e.isOpened,E=e.isCloseConfirmation,S=e.children,y=e.cancelDeal,b=e.toggleGroup,C=e.sendStat,T=e.onToggleCloseConfirmation;const A=s[0],k=A.currency,w=A.pair,N=i.useRef(null),R=i.useRef(null),I=i.useRef(null),D=i.useCallback((()=>{null==C||C({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"close_active_trades_click",eventLabel:"fx_".concat(_.id)}),T(!0)}),[T,_.id,C]),O=i.useCallback((()=>T(!1)),[T]),L=i.useCallback((e=>{e.stopPropagation(),D()}),[D]),M=i.useCallback((()=>{null==y||y(s.map((e=>e.id))),null==C||C({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"close_active_trades_approve",eventLabel:"fx_".concat(_.id)})}),[y,s,w,C]),P=i.useCallback((()=>{b(a)}),[a,b]),x=s.reduce(((e,a)=>(!e.includes(a.dir)&&e.length<2&&e.push(a.dir),e)),[]),F=e=>e.reduce(((e,a)=>e+=a.sum),0);return i.createElement(o.W,{"data-id":"fx-".concat(a),className:"deal-card_group","data-test":"deal-current-card-group-fx",isOpened:f,onClick:P,hostRef:I,dir:(0,p.L)()},i.createElement(o.W.Portal,{ref:R}),i.createElement(o.W.Modal,null,i.createElement(r.Qj,null,(()=>i.createElement(i.Fragment,null,i.createElement(d.c,{titleText:i.createElement(h._,{id:"deals_list_current_group_modal_title",defaultMessage:"Are you sure that you want to close the trades?"}),isOneClickSwitcherVisible:!1,rootEl:I.current,modalRootEl:N.current,isModal:!!E,onClose:O,onClick:M,controls:(e,a)=>i.createElement(r.Qj,null,(()=>{const r=s.reduce(((e,a)=>e+=a.floatingPnl+a.sum),0),n=F(s),o=s.some((e=>e.canceling));return i.createElement(m.w,{dataTest:"deal-current-card-close-confirm-deal-button-fx",endIconDataTest:"deal-current-card-close-confirm-deal-button-value-fx",className:a,ref:e,isLoading:o,isCentered:_.lockedTrading,currency:k,amount:r,buttonText:i.createElement(h._,{id:"deals_list_summary_close_all_button",defaultMessage:"Close all: {amount}",values:{amount:s.length}}),color:(0,g.p)(r,n),onClick:M})}))}))))),i.createElement(o.W.Header,null,i.createElement(c.E,{pairId:_.id,icon:_.icon,pairTitle:_.title,subTitle:"FX",dealsCount:s.length,renderAmount:i.createElement(r.Qj,null,(()=>{const e=F(s);return i.createElement(l.U,{tradeDir:2===x.length?"both":x[0],value:e,currency:k})})),renderControls:i.createElement(r.Qj,null,(()=>{const e=s.reduce(((e,a)=>e+=a.floatingPnl+a.sum),0),a=s.some((e=>e.canceling));return i.createElement(m.w,{dataTest:"deal-current-card-group-close-button-fx",endIconDataTest:"deal-current-card-group-close-button-value-fx",ref:N,disabled:_.lockedTrading,disabledText:i.createElement(h._,{id:"deals_list_market_closed_button",defaultMessage:"Market is closed"}),buttonText:i.createElement(h._,{id:"deals_list_summary_close_all_button",defaultMessage:"Close all: {amount}",values:{amount:s.length}}),isLoading:a,isCentered:_.lockedTrading,amount:e,currency:k,onClick:L})}))},i.createElement(r.Qj,null,(()=>{const e=s.reduce(((e,a)=>e+=a.floatingPnl),0),a=F(s),r=(0,v.c)(e/a*100);return i.createElement(i.Fragment,null,i.createElement(u.t,null,i.createElement(n.oI,{value:r},i.createElement(n.p7,{value:r,isSign:!0}))),i.createElement(u.t,null,i.createElement(n.oI,{value:e},i.createElement(n.ih,{isSign:!0,minimumFractionDigits:2,currency:k,value:e}))))})))),i.createElement(o.W.Body,null,S(R.current)))}},29454:(e,a,s)=>{"use strict";s.d(a,{q:()=>p});var i=s(27378),r=s(73598),n=s(60042),o=s(23735),l=s(59343),c=s(82844),d=s(40285),u=s(58810),m=s(29930);const p=e=>{let a=e.deal,s=e.asset,p=e.limitTypes,h=void 0===p?[d.$i.AMOUNT,d.$i.PRICE]:p,v=e.dealCurrentService,g=e.getLimitsRange,_=e.handleError,f=void 0===_?()=>null:_,E=e.opened,S=e.title;const y=v.toggleLimitsForm,b=i.useCallback((()=>{y(),(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"sl_tp_form/open",eventLabel:"fx_".concat(s.id)})}),[s.id,y]),C=i.useCallback((()=>{y(),(0,o.L)({event:"uaGtmEvents_clicks",eventCategory:"sidebar_tradingbar",eventAction:"sl_tp_form/apply",eventLabel:"fx_".concat(s.id)})}),[s.id,y]),T=(0,l.V)();return i.createElement("div",{className:n("deal-current-card-limits",E&&"deal-current-card-limits_opened")},E?i.createElement(i.Fragment,null,i.createElement(m.P,{title:S,asset:s,deal:a,limitTypes:h,dealCurrentService:v,getLimitsRange:g,onApply:C,onError:f,onCancel:y})):i.createElement(r.Qj,null,(()=>i.createElement(u.e,{takeProfit:a.takeProfit,stopLoss:a.stopLoss,currency:a.currency,precision:s.precision,label:T?i.createElement(i.Fragment,null,i.createElement(c._,{id:"fx_takeProfit",defaultMessage:"Take Profit"}),"  /  ",i.createElement(c._,{id:"fx_stopLoss",defaultMessage:"Stop Loss"})):i.createElement(i.Fragment,null,i.createElement(c._,{id:"fx_stopLoss",defaultMessage:"Stop Loss"}),"  /  ",i.createElement(c._,{id:"fx_takeProfit",defaultMessage:"Take Profit"})),onClick:b}))))}},57547:(e,a,s)=>{"use strict";s.d(a,{K:()=>c});var i=s(27378),r=s(73598),n=s(82844),o=s(95029),l=s(29935);const c=e=>{let a=e.deal,s=e.asset;return i.createElement(r.Qj,null,(()=>i.createElement("div",{className:l.Z.host},i.createElement("div",{className:l.Z.item},i.createElement("span",{className:l.Z.label},i.createElement(n._,{id:"fx_limit_editor_meta_title",defaultMessage:"Trade limits"}))),i.createElement("div",{className:l.Z.item},i.createElement(r.Qj,null,(()=>(null==a?void 0:a.cursCurrent)?i.createElement(i.Fragment,null,i.createElement("span",{className:l.Z.label},i.createElement(n._,{id:"deal_order_price",defaultMessage:"Quote"}),":")," ",i.createElement(o.l1,{style:"decimal",value:Number(null==a?void 0:a.cursCurrent),minimumFractionDigits:s.precision||6,maximumFractionDigits:s.precision||6})):null))))))}},29935:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"VZqXBeWYMwyL",label:"_12l10KijgiKp",item:"_3NRY0EB2Jx3-"}},94904:(e,a,s)=>{"use strict";s.d(a,{Bo:()=>k,LV:()=>A,UO:()=>T,tE:()=>N,ze:()=>C});var i=s(49491),r=s(27378),n=s(76232),o=s(84584),l=s(46124),c=s(2050),d=s(28373),u=s(92087),m=s(74397),p=(s(60042),s(95029)),h=(s(75403),s(77740),s(17302),s(11538)),v=(s(1798),s(86604)),g=(s(99651),s(82844)),_=s(45797),f=s(18985),E=s(8895),S=(s(58674),s(63065),s(69602),s(338),s(77299),s(92756),s(95472)),y=s(72785);const b=(e,a)=>{if(e)return r.createElement(g._,{id:"closed_deal_status_request",defaultMessage:"upon request"});switch(a){case y.c9.CANCEL:return r.createElement(g._,{id:"closed_deal_status_early",defaultMessage:"early"});case y.c9.STANDOFF:return r.createElement(g._,{id:"closed_deal_status_refund",defaultMessage:"with a refund"});case y.c9.WIN:return r.createElement(g._,{id:"closed_deal_status_profit",defaultMessage:"with a profit"});case y.c9.LOOSE:return r.createElement(g._,{id:"closed_deal_status_loss",defaultMessage:"with a loss"});case y.c9.ERROR:return r.createElement(g._,{id:"deal_close_error",defaultMessage:"due to an error"});case y.c9.FLAT:return r.createElement(g._,{id:"closed_deal_status_flat_protection",defaultMessage:"Flat Market Protection"});default:return a}},C=(0,o.Z)({id:"dealHistoryCardFttCloseQuoteTooltipSlot"}),T=(0,n.t)({id:"isShowDealHistoryCardFttCloseQuoteTooltipPipe"}),A=(0,o.Z)({id:"dealHistoryCardFttCloseStatusTooltipSlot"}),k=(0,n.t)({id:"isShowDealHistoryCardFttCloseStatusTooltipPipe"}),w=e=>{let a=e.deal;const s=(0,l.k)(T,!1,a),i=(0,c.x)(A,{props:a}),n=(0,l.k)(k,!1,a),o=(0,c.x)(C,{props:a}),d="flat"===a.status,u=new Date(1e3*a.timeOpen),y=new Date(1e3*a.timeClose);return r.createElement(h.R,{"data-test":"deal-history-card-details-ftt"},r.createElement(m.n,{data:r.createElement(g._,{id:"profit",defaultMessage:"Income"}),value:r.createElement(p.ih,{value:a.earn,currency:a.currency,minimumFractionDigits:2}),highlightedValue:!0}),r.createElement(m.n,{data:a.refunded?r.createElement(g._,{id:"refunded_deal",defaultMessage:"Canceled"}):r.createElement(g._,{id:"closed_deal",defaultMessage:"Closed"}),value:b(a.refunded,a.status),valueTooltip:n?i:null,"data-test":"deal-status",highlightedValue:!d}),r.createElement(v.s,{size:"xl"}),r.createElement(m.n,{data:r.createElement(g._,{id:"duration",defaultMessage:"Duration"}),value:(0,S.L)(a.duration,{d:_.NW.formatMessage({id:"day",defaultMessage:"day"}),h:_.NW.formatMessage({id:"hour",defaultMessage:"hour"}),m:_.NW.formatMessage({id:"min",defaultMessage:"min"}),s:_.NW.formatMessage({id:"sec",defaultMessage:"sec."})})}),r.createElement(m.n,{data:r.createElement(g._,{id:"opening",defaultMessage:"Opening quote"}),value:r.createElement(p.l1,{style:"decimal",value:a.cursStrike||a.cursOpen||0,minimumFractionDigits:a.pair.precision||6,maximumFractionDigits:a.pair.precision||6})}),r.createElement(m.n,{data:r.createElement(g._,{id:"closing",defaultMessage:"Closing quote"}),value:r.createElement(p.l1,{style:"decimal",value:a.cursClose||0,minimumFractionDigits:a.pair.precision||6,maximumFractionDigits:a.pair.precision||6}),valueTooltip:s?o:null}),r.createElement(m.n,{data:r.createElement(g._,{id:"id_deal",defaultMessage:"Trade ID"}),value:a.id}),r.createElement(v.s,{size:"xl"}),r.createElement("div",{className:"data-value-field__column"},r.createElement(m.n,{className:"card__row_double-row",data:r.createElement(g._,{id:"trade_opened",defaultMessage:"Trade Opened"}),value:r.createElement(r.Fragment,null,r.createElement(f.Ji,{value:u,day:"numeric",month:"short"})," ",(0,E.M)(u,{withMilliseconds:!0}))}),r.createElement(m.n,{className:"card__row_double-row",data:r.createElement(g._,{id:"trade_closed",defaultMessage:"Trade closed"}),value:r.createElement(r.Fragment,null,r.createElement(f.Ji,{value:y,day:"numeric",month:"short"})," ",(0,E.M)(y,{withMilliseconds:!0}))})))},N=(0,d.k)(u.i,(e=>r.createElement(w,i({},e))))},34853:(e,a,s)=>{"use strict";s.d(a,{l:()=>_});var i=s(27378),r=s(74397),n=(s(60042),s(95029)),o=(s(75403),s(77740)),l=(s(17302),s(11538)),c=(s(1798),s(86604)),d=(s(99651),s(82844)),u=s(18985),m=s(8895),p=(s(58674),s(63065),s(88770)),h=(s(69602),s(338),s(77299),s(92756),s(72785)),v=s(57672);const g=(e,a)=>{if(e)return i.createElement(d._,{id:"refunded_deal_desc",defaultMessage:"upon request"});switch(a){case h.cO.MANUAL:return i.createElement(d._,{id:"closed_deal_status_by_trader",defaultMessage:"by the trader"});case h.cO.SL_PRICE:case h.cO.SL_AMOUNT:case h.cO.SL_PERCENT:return i.createElement(d._,{id:"closed_deal_status_stop_loss",defaultMessage:"by Stop Loss"});case h.cO.TP_PRICE:case h.cO.TP_AMOUNT:case h.cO.TP_PERCENT:return i.createElement(d._,{id:"closed_deal_status_take_profit",defaultMessage:"by Take Profit"});case h.cO.STOP_OUT:return i.createElement(d._,{id:"closed_deal_status_stop_out",defaultMessage:"by Stop Out"});case h.cO.AUTO:return i.createElement(d._,{id:"closed_deal_status_time_limit",defaultMessage:"by time limit"});case h.cO.MARGIN_CALL:case h.cO.FORCED:return i.createElement(d._,{id:"closed_deal_status_by_broker",defaultMessage:"by the broker"});case h.cO.REQUEST:return i.createElement(d._,{id:"closed_deal_status_by_request",defaultMessage:"by trader's request"});default:return a}},_=e=>{var a;let s=e.deal;const h=new Date(1e3*s.timeOpen),_=new Date(1e3*s.timeClose);return i.createElement(l.R,{"data-test":"deal-history-card-details-fx"},i.createElement(r.n,{data:i.createElement(d._,{id:"profit",defaultMessage:"Income"}),value:i.createElement(n.ih,{value:s.sum+s.realizedPnl,currency:s.currency,minimumFractionDigits:2}),highlightedValue:!0}),i.createElement(r.n,{data:s.refunded?i.createElement(d._,{id:"refunded_deal",defaultMessage:"Canceled"}):i.createElement(d._,{id:"closed_deal",defaultMessage:"Closed"}),value:g(s.refunded,s.closeReason),"data-test":"deal-status",highlightedValue:!0}),i.createElement(c.s,{size:"xl"}),i.createElement(r.n,{data:i.createElement(d._,{id:"opening",defaultMessage:"Opening quote"}),value:i.createElement(n.l1,{style:"decimal",value:s.cursOpen||0,minimumFractionDigits:s.pair.precision||6,maximumFractionDigits:s.pair.precision||6})}),i.createElement(r.n,{data:i.createElement(d._,{id:"closing",defaultMessage:"Closing quote"}),value:i.createElement(n.l1,{style:"decimal",value:s.cursClose||0,minimumFractionDigits:s.pair.precision||6,maximumFractionDigits:s.pair.precision||6})}),i.createElement(v.A,{commissionDetail:s.commissionDetail,commission:s.commission,currency:s.currency,predictionSwapCommission:s.predictionSwapCommission}),i.createElement(r.n,{data:i.createElement(d._,{id:"id_deal",defaultMessage:"Trade ID"}),value:s.id}),i.createElement(r.n,{data:i.createElement(d._,{id:"fx_takeProfit",defaultMessage:"Take Profit"}),value:i.createElement(p.P,{limit:s.takeProfit,currency:s.currency,precision:s.pair.precision})}),i.createElement(r.n,{data:i.createElement(d._,{id:"fx_stopLoss",defaultMessage:"Stop Loss"}),value:i.createElement(i.Fragment,null,(null===(a=s.stopLoss)||void 0===a?void 0:a.trailing)&&i.createElement("span",{className:"data-value-field__icon"},i.createElement(o.A_e,{className:"deal-limits-button__icon"})),i.createElement(p.P,{limit:s.stopLoss,currency:s.currency,precision:s.pair.precision}))}),i.createElement(c.s,{size:"xl"}),i.createElement("div",{className:"data-value-field__column"},i.createElement(r.n,{className:"card__row_double-row",data:i.createElement(d._,{id:"trade_opened",defaultMessage:"Trade Opened"}),value:i.createElement(i.Fragment,null,i.createElement(u.Ji,{value:h,day:"numeric",month:"short"})," ",(0,m.M)(h,{withMilliseconds:!0}))}),i.createElement(r.n,{className:"card__row_double-row",data:i.createElement(d._,{id:"trade_closed",defaultMessage:"Trade closed"}),value:i.createElement(i.Fragment,null,i.createElement(u.Ji,{value:_,day:"numeric",month:"short"})," ",(0,m.M)(_,{withMilliseconds:!0}))})))}},53695:(e,a,s)=>{"use strict";s.d(a,{U:()=>y});var i=s(49491),r=s(27378),n=s(84584),o=s(2050),l=s(28373),c=s(92087),d=(s(60042),s(17302),s(77740),s(95029)),u=s(75403),m=s(43373),p=s(1798),h=s(99651),v=s(8141),g=(s(58674),s(48308)),_=(s(63065),s(69602),s(338),s(77299),s(92756),s(94904));const f=(0,n.Z)({id:"dealsHistoryCardFttBodySlot"}),E=(e,a)=>r.createElement("div",{className:"deal-card-ftt-body-slot"},a),S=e=>{const a=e.deal,s=e.isOpened,i=e.selectDeal,n=e.selected,l=e.children,c=e.collapsible,S=void 0===c||c,y=e.embedded,b=a.id,C=r.useRef(null),T=r.useCallback((()=>{i(b)}),[b,i]),A=a.timeClose-a.timeOpen,k=(0,o.x)(f,{props:{deal:a},wrapper:E});return r.createElement(u.W,{"data-id":"ftt-".concat(b),"data-test":"deal-history-card-ftt",isOpened:s,selected:n,onClick:T,hostRef:C,embedded:y,collapsible:!y&&S,dir:(0,v.L)()},r.createElement(u.W.Header,null,r.createElement(h.E,{pairId:a.pair.id,icon:a.pair.icon,pairTitle:a.pair.title,subTitle:r.createElement(r.Fragment,null,a.riskfree?r.createElement("span",{className:"deal-card-subtitle-ftt"},"RISK FREE"):"FTT"," ",r.createElement(d.p7,{value:a.winperc})),renderAmount:r.createElement(m.U,{tradeDir:a.dir,value:a.sum,currency:a.currency,shaded:!0}),shaded:!0},r.createElement(g.t,null,r.createElement(p.m,{duration:A>1?A:1})),r.createElement(g.t,null,r.createElement(d.oI,{value:a.balanceChange},r.createElement(d.ih,{"data-test":"deal-current-card-floating-amount-ftt",isSign:!0,minimumFractionDigits:2,currency:a.currency,value:a.balanceChange}))))),r.createElement(u.W.Body,null,k,l,r.createElement(_.tE,{deal:a})))},y=(0,l.k)(c.i,(e=>r.createElement(S,i({},e))))},40446:(e,a,s)=>{"use strict";s.d(a,{_:()=>y});var i=s(49491),r=s(27378),n=s(84584),o=s(2050),l=s(28373),c=s(92087),d=(s(60042),s(17302),s(77740),s(95029)),u=s(75403),m=s(43373),p=(s(1798),s(99651)),h=s(8141),v=(s(58674),s(48308)),g=(s(63065),s(69602),s(338),s(77299),s(70114)),_=(s(92756),s(34853));const f=(0,n.Z)({id:"dealsHistoryCardFxBodySlot"}),E=(e,a)=>r.createElement("div",{className:"deal-card-fx-body-slot"},a),S=e=>{const a=e.deal,s=e.isOpened,i=e.selectDeal,n=e.selected,l=e.children,c=e.collapsible,S=void 0===c||c,y=e.embedded,b=a.id,C=r.useRef(null),T=r.useCallback((()=>{i(b)}),[b,i]),A=(0,g.c)(a.realizedPnl/a.sum*100),k=(0,o.x)(f,{props:{deal:a},wrapper:E});return r.createElement(u.W,{"data-id":"fx-".concat(b),"data-test":"deal-history-card-fx",isOpened:s,selected:n,onClick:T,hostRef:C,collapsible:!y&&S,embedded:y,dir:(0,h.L)()},r.createElement(u.W.Header,null,r.createElement(p.E,{pairId:a.pair.id,icon:a.pair.icon,pairTitle:a.pair.title,subTitle:"FX X".concat(a.multiplicator),renderAmount:r.createElement(m.U,{tradeDir:a.dir,value:a.sum,currency:a.currency,shaded:!0}),shaded:!0},r.createElement(v.t,null,r.createElement(d.oI,{value:A},r.createElement(d.p7,{value:A,isSign:!0}))),r.createElement(v.t,null,r.createElement(d.oI,{value:a.realizedPnl},r.createElement(d.ih,{"data-test":"deal-history-card-profit-fx",minimumFractionDigits:2,value:a.realizedPnl,isSign:!0,currency:a.currency}))))),r.createElement(u.W.Body,null,k,l,r.createElement(_.l,{deal:a})))},y=(0,l.k)(c.i,(e=>r.createElement(S,i({},e))))},29930:(e,a,s)=>{"use strict";s.d(a,{P:()=>l});var i=s(27378),r=s(73598),n=s(45797),o=s(95029);const l=e=>{let a=e.dealCurrentService,s=e.deal,l=e.asset,c=e.title,d=e.limitTypes,u=e.defaultLimitType,m=e.getLimitsRange,p=e.onApply,h=e.onCancel,v=e.onError;const g=(0,n.bU)(),_=i.useCallback((e=>{a.saveLimits(s.id,e).then((()=>null==p?void 0:p())).catch((e=>null==v?void 0:v(e)))}),[a,p,v,s.id]),f=i.useCallback((()=>{null==h||h()}),[h]),E=(e,i,r,n)=>a.convertLimits(e,i,r,s,n),S=(e,i)=>a.getLimitsRangeFormatted(e,i,s),y=e=>a.getStopOut(e,s),b=e=>a.getTrailingLevel(e,s),C=(e,i)=>a.validateLimits(e,i,s),T=i.useCallback((()=>a.turnOffTrailingStop({id:s.id,group:s.group}).catch((e=>null==v?void 0:v(e)))),[a,v,s.id,s.group]);return i.createElement(r.Qj,null,(()=>i.createElement(o.X_,{title:c,trailingSwitcherName:"trailing_switcher_current_deal",isSigned:!0,isPristine:!0,deal:{cursCurrent:s.cursCurrent,stopLoss:s.stopLoss,pair:{id:l.id,precision:l.precision}},currency:s.currency,precision:l.precision,stopLoss:s.stopLoss,takeProfit:s.takeProfit,limitTypes:d,isTrailingStop:a.isTrailingStop,locale:g,convert:E,defaultLimitType:u||d[0],validate:C,getStopOut:y,getTrailingLevel:b,getLimitsRange:m,getLimitsDiapasonFormatted:S,onApply:_,onCancel:f,toggle:f,turnOffTrailingStop:T})))}},55886:(e,a,s)=>{"use strict";s.d(a,{Z:()=>u});var i=s(27378),r=s(82844),n=s(18985),o=s(8895),l=s(95029),c=s(74397),d=s(11538);const u=e=>{let a=e.order,s=e.grouped,u=e.hovered,m=e.isOpened,p=e.children;const h=s&&(m||u)?l.Hj.DEAL:l.Hj.ORDER,v=new Date(1e3*a.createTime);return i.createElement(d.R,{"data-test":"order-current-card-details-ftt"},i.createElement(c.n,{data:i.createElement(r._,{id:"duration",defaultMessage:"Duration"}),value:(0,l.yC)(a.duration),type:h}),i.createElement(c.n,{data:i.createElement(r._,{id:"order_id",defaultMessage:"Order ID"}),value:a.id,type:h}),i.createElement(c.n,{data:i.createElement(r._,{id:"time",defaultMessage:"Time"}),value:i.createElement(i.Fragment,null,i.createElement(n.Ji,{value:v,day:"numeric",month:"short"})," ",(0,o.M)(v,{withMilliseconds:!0})),type:h}),p)}},3892:(e,a,s)=>{"use strict";s.d(a,{E:()=>m});var i=s(27378),r=s(73598),n=s(82844),o=s(18985),l=s(8895),c=s(95029),d=s(74397),u=s(11538);const m=e=>{let a=e.order,s=e.asset,m=e.commission,p=e.grouped,h=e.hovered,v=e.isOpened,g=e.children;const _=p&&(v||h)?c.Hj.DEAL:c.Hj.ORDER,f=new Date(1e3*a.createTime);return i.createElement(u.R,{"data-test":"order-current-card-details-fx"},i.createElement(d.n,{data:i.createElement(n._,{id:"order_id",defaultMessage:"Order ID"}),value:a.id,type:_}),i.createElement(r.Qj,null,(()=>{const e=(0,c.Iu)(a.amount,a.multiplicator,m,s.minCommission,s.openCommissionMax).amount;return i.createElement(d.n,{data:i.createElement(n._,{id:"commission",defaultMessage:"Commission"}),tooltip:i.createElement(n._,{id:"order_commission_warning",defaultMessage:"The commission changes dynamically and will be adjusted once the trade is open."}),value:e?i.createElement(c.ih,{minimumFractionDigits:2,value:e,currency:a.currency}):"–",type:_,contrasted:!0,highlightedValue:Boolean(e)})})),i.createElement(d.n,{data:i.createElement(n._,{id:"time",defaultMessage:"Time"}),value:i.createElement(i.Fragment,null,i.createElement(o.Ji,{value:f,day:"numeric",month:"short"})," ",(0,l.M)(f,{withMilliseconds:!0})),type:_}),g)}},27530:(e,a,s)=>{"use strict";s.d(a,{D:()=>g});var i=s(2243),r=s(27378),n=s(73598),o=(s(60042),s(17302),s(77740),s(95029)),l=s(75403),c=s(43373),d=(s(1798),s(99651)),u=s(8141),m=s(82844),p=s(58674),h=s(48308),v=(s(63065),s(69602),s(338),s(77299),s(92756),s(55886));const g=e=>{let a=e.order,s=e.asset,g=e.grouped,_=e.isOpened,f=e.cancelOrder,E=e.selectOrder,S=e.selected,y=e.formatTimeOpen;const b=a.id,C=r.useState(!1),T=i(C,2),A=T[0],k=T[1],w=r.useRef(null),N=r.useCallback((e=>{e.stopPropagation(),f(b)}),[b,f]),R=r.useCallback((()=>{E(b)}),[b,E]),I=r.useCallback((()=>{k(!0)}),[]),D=r.useCallback((()=>{k(!1)}),[]);return r.createElement(l.W,{"data-id":"ftt-".concat(b),grouped:g,"data-test":"order-current-card-ftt",isOpened:_,selected:S,onClick:R,onMouseEnter:I,onMouseLeave:D,hostRef:w,dir:(0,u.L)(),type:l.y.ORDER},r.createElement(l.W.Header,null,r.createElement(d.E,{grouped:g,pairId:s.id,icon:s.icon,pairTitle:s.title,subTitle:r.createElement(n.Qj,null,(()=>r.createElement(r.Fragment,null,g?"":"FTT ",r.createElement(m._,{id:"from",defaultMessage:"from"})," ",r.createElement(o.p7,{value:a.winperc})))),renderAmount:r.createElement(n.Qj,null,(()=>r.createElement(c.U,{tradeDir:a.dir,value:a.amount,currency:a.currency}))),renderControls:g?null:r.createElement(n.Qj,null,(()=>r.createElement(p.J,{"data-test":"order-current-card-close-button-ftt",disabled:a.canceling,isLoading:a.canceling,isCentered:!0,onClick:N},r.createElement(m._,{id:"order_cancel",defaultMessage:"Cancel order"}))))},r.createElement(n.Qj,null,(()=>r.createElement(r.Fragment,null,r.createElement(h.t,{color:"beta"},r.createElement(m._,{id:"open_in",defaultMessage:"Open at"})),r.createElement(h.t,{color:"beta"},"timeOpen"===a.openCase?y(Number(a.timeOpen)):r.createElement(o.l1,{style:"decimal",value:Number(a.courseTarget),minimumFractionDigits:s.precision||6,maximumFractionDigits:s.precision||6}))))))),r.createElement(l.W.Body,null,g&&r.createElement(n.Qj,null,(()=>r.createElement(p.J,{"data-test":"order-current-card-close-button-ftt",disabled:a.canceling,isLoading:a.canceling,isCentered:!0,color:"accent",onClick:N},r.createElement(m._,{id:"order_cancel",defaultMessage:"Cancel order"})))),r.createElement(n.Qj,null,(()=>r.createElement("div",{className:"deal-current-card-ftt-content"},r.createElement("div",{className:"deal-current-card-ftt-content__item"},r.createElement(v.Z,{grouped:g,isOpened:_,hovered:A,order:a})))))))}},37096:(e,a,s)=>{"use strict";s.d(a,{a:()=>S});var i=s(2243),r=s(27378),n=s(73598),o=s(46006),l=s(29609),c=(s(60042),s(17302),s(77740),s(95029)),d=s(75403),u=s(43373),m=(s(1798),s(99651)),p=s(8141),h=s(82844),v=s(58674),g=s(48308),_=(s(63065),s(69602),s(338),s(77299),s(92756),s(3892)),f=s(82960),E=s(57547);const S=e=>{let a=e.order,s=e.asset,S=e.commission,y=e.grouped,b=e.isOpened,C=e.cancelOrder,T=e.selectOrder,A=e.selected,k=e.formatTimeOpen,w=e.dealOrderCurrentService,N=e.handleLimitError,R=e.limitsFormOpened;const I=a.id,D=a.dir,O=r.useState(!1),L=i(O,2),M=L[0],P=L[1],x=r.useRef(null),F=r.useCallback((e=>{e.stopPropagation(),C(I)}),[I,C]),B=r.useCallback((()=>{T(I)}),[I,T]),Z=r.useCallback((()=>{P(!0)}),[]),U=r.useCallback((()=>{P(!1)}),[]),H=r.useCallback(((e,a)=>e.addEventListener("transitionend",a,!1)),[]);return r.createElement(d.W,{"data-id":"fx-".concat(I),grouped:y,"data-test":"order-current-card-fx",isOpened:b,selected:A,onClick:B,onMouseEnter:Z,onMouseLeave:U,hostRef:x,dir:(0,p.L)(),type:d.y.ORDER},r.createElement(d.W.Header,null,r.createElement(m.E,{grouped:y,pairId:s.id,icon:s.icon,pairTitle:s.title,subTitle:r.createElement(n.Qj,null,(()=>r.createElement(r.Fragment,null,y?"X".concat(a.multiplicator):"FX X".concat(a.multiplicator)))),renderAmount:r.createElement(n.Qj,null,(()=>r.createElement(u.U,{tradeDir:D,value:a.amount,currency:a.currency}))),renderControls:y?null:r.createElement(n.Qj,null,(()=>r.createElement(v.J,{"data-test":"order-current-card-close-button-fx",disabled:a.canceling,isLoading:a.canceling,isCentered:!0,onClick:F},r.createElement(h._,{id:"order_cancel",defaultMessage:"Cancel order"}))))},r.createElement(n.Qj,null,(()=>r.createElement(r.Fragment,null,r.createElement(g.t,{color:"beta"},r.createElement(h._,{id:"open_in",defaultMessage:"Open at"})),r.createElement(g.t,{color:"beta"},"timeOpen"===a.openCase?k(Number(a.timeOpen)):r.createElement(c.l1,{style:"decimal",value:Number(a.courseTarget),minimumFractionDigits:s.precision||6,maximumFractionDigits:s.precision||6}))))))),r.createElement(d.W.Body,null,y&&r.createElement(n.Qj,null,(()=>r.createElement(v.J,{"data-test":"order-current-card-close-button-fx",disabled:a.canceling,isLoading:a.canceling,isCentered:!0,color:"accent",onClick:F},r.createElement(h._,{id:"order_cancel",defaultMessage:"Cancel order"})))),r.createElement(n.Qj,null,(()=>(!A&&R&&w.toggleLimitsForm(!1),r.createElement(r.Fragment,null,r.createElement(o.Z,{mode:"out-in"},r.createElement(l.Z,{key:String(R),addEndListener:H,classNames:"deal-current-card-fx-fade"},r.createElement("div",{className:"deal-current-card-fx-content"},!R&&r.createElement("div",{className:"deal-current-card-fx-content__item"},r.createElement(_.E,{grouped:y,asset:s,commission:S,isOpened:b,hovered:M,order:a})),r.createElement("div",{className:"deal-current-card-fx-content__item"},r.createElement(f.I,{title:r.createElement(E.K,{asset:s,deal:{cursCurrent:void 0}}),opened:R,order:a,asset:s,limitTypes:["amount","percent"],dealOrderCurrentService:w,handleError:N})))))))))))}},87487:(e,a,s)=>{"use strict";s.d(a,{Q:()=>m});var i=s(27378),r=s(73598),n=(s(60042),s(17302),s(77740),s(95029),s(75403)),o=s(43373),l=(s(1798),s(99651)),c=s(8141),d=s(82844),u=s(58674);s(63065),s(69602),s(338),s(77299),s(92756);const m=e=>{const a=e.id,s=e.orders,m=e.isOpened,p=e.asset,h=e.children,v=e.cancelOrder,g=e.toggleGroup,_=s[0].currency,f=i.useRef(null),E=i.useRef(null),S=i.useCallback((e=>{e.stopPropagation(),null==v||v(s.map((e=>e.id)))}),[v,s]),y=i.useCallback((()=>{g(a)}),[a,g]),b=s.reduce(((e,a)=>(!e.includes(a.dir)&&e.length<2&&e.push(a.dir),e)),[]);return i.createElement(n.W,{"data-id":"ftt-".concat(a),className:"deal-card_group","data-test":"order-current-card-group-ftt",isOpened:m,onClick:y,hostRef:E,dir:(0,c.L)(),type:n.y.ORDER},i.createElement(n.W.Portal,{ref:f}),i.createElement(n.W.Header,null,i.createElement(l.E,{pairId:p.id,icon:p.icon,pairTitle:p.title,subTitle:"FTT",dealsCount:s.length,renderAmount:i.createElement(r.Qj,null,(()=>{const e=(e=>e.reduce(((e,a)=>e+a.amount),0))(s);return i.createElement(o.U,{tradeDir:2===b.length?"both":b[0],value:e,currency:_})})),renderControls:i.createElement(r.Qj,null,(()=>{const e=s.some((e=>e.canceling));return i.createElement(u.J,{"data-test":"order-current-card-group-close-button-ftt",disabled:e,isLoading:e,isCentered:!0,onClick:S},i.createElement(d._,{id:"order_cancel_all",defaultMessage:"Cancel all: {amount}",values:{amount:s.length}}))}))})),i.createElement(n.W.Body,null,h(f.current)))}},7081:(e,a,s)=>{"use strict";s.d(a,{Y:()=>m});var i=s(27378),r=s(73598),n=(s(60042),s(17302),s(77740),s(95029),s(75403)),o=s(43373),l=(s(1798),s(99651)),c=s(8141),d=s(82844),u=s(58674);s(63065),s(69602),s(338),s(77299),s(92756);const m=e=>{const a=e.id,s=e.orders,m=e.isOpened,p=e.children,h=e.cancelOrder,v=e.toggleGroup,g=e.asset,_=i.useRef(null),f=i.useRef(null),E=i.useCallback((e=>{e.stopPropagation(),null==h||h(s.map((e=>e.id)))}),[h,s]),S=i.useCallback((()=>{v(a)}),[a,v]),y=(0,c.L)(),b=s[0];if(!b)return null;const C=s.reduce(((e,a)=>(!e.includes(a.dir)&&e.length<2&&e.push(a.dir),e)),[]);return i.createElement(n.W,{"data-id":"fx-".concat(a),className:"deal-card_group","data-test":"order-current-card-group-fx",isOpened:m,onClick:S,hostRef:f,dir:y,type:n.y.ORDER},i.createElement(n.W.Portal,{ref:_}),i.createElement(n.W.Header,null,i.createElement(l.E,{pairId:g.id,icon:g.icon,pairTitle:g.title,subTitle:"FX",dealsCount:s.length,renderAmount:i.createElement(r.Qj,null,(()=>{const e=(e=>e.reduce(((e,a)=>e+a.amount),0))(s);return i.createElement(o.U,{tradeDir:2===C.length?"both":C[0],value:e,currency:b.currency})})),renderControls:i.createElement(r.Qj,null,(()=>{const e=s.some((e=>e.canceling));return i.createElement(u.J,{"data-test":"order-current-card-group-close-button-fx",disabled:e,isLoading:e,isCentered:!0,onClick:E},i.createElement(d._,{id:"order_cancel_all",defaultMessage:"Cancel all: {amount}",values:{amount:s.length}}))}))})),i.createElement(n.W.Body,null,p(_.current)))}},82960:(e,a,s)=>{"use strict";s.d(a,{I:()=>u});var i=s(27378),r=s(73598),n=s(60042),o=s(59343),l=s(82844),c=s(58810),d=s(63091);const u=e=>{let a=e.order,s=e.asset,u=e.title,m=e.limitTypes,p=void 0===m?["amount","price"]:m,h=e.dealOrderCurrentService,v=e.handleError,g=void 0===v?()=>null:v,_=e.opened;const f=h.toggleLimitsForm,E=i.useCallback((()=>{f()}),[f]),S=i.useCallback((()=>{f()}),[f]),y=(0,o.V)();return i.createElement("div",{className:n("deal-current-card-limits",_&&"deal-current-card-limits_opened")},_?i.createElement(i.Fragment,null,i.createElement(d.G,{title:u,asset:s,order:a,limitTypes:p,dealOrderCurrentService:h,onApply:S,onError:g,onCancel:f})):i.createElement(r.Qj,null,(()=>i.createElement(c.e,{takeProfit:a.takeProfit,stopLoss:a.stopLoss,currency:a.currency,precision:s.precision,label:y?i.createElement(i.Fragment,null,i.createElement(l._,{id:"fx_takeProfit",defaultMessage:"Take Profit"}),"  /  ",i.createElement(l._,{id:"fx_stopLoss",defaultMessage:"Stop Loss"})):i.createElement(i.Fragment,null,i.createElement(l._,{id:"fx_stopLoss",defaultMessage:"Stop Loss"}),"  /  ",i.createElement(l._,{id:"fx_takeProfit",defaultMessage:"Take Profit"})),onClick:E}))))}},61399:(e,a,s)=>{"use strict";s.d(a,{t:()=>p});var i=s(27378),r=s(74397),n=(s(60042),s(95029)),o=(s(75403),s(77740),s(17302),s(11538)),l=(s(1798),s(99651),s(82844)),c=s(18985),d=s(8895),u=(s(58674),s(63065),s(69602),s(338),s(77299),s(92756),s(72785));const m=e=>{switch(e){case"cancel":return i.createElement(l._,{id:"deal_order_history_cancel",defaultMessage:"Cancelled by the user"});case"expire":return i.createElement(l._,{id:"deal_order_history_expire",defaultMessage:"Cancelled because the time ran out"});case"success":return i.createElement(l._,{id:"order_opened",defaultMessage:"Trade opened"});default:return i.createElement(l._,{id:"deal_order_history_error",defaultMessage:"The trade failed to open"})}},p=e=>{let a=e.order,s=e.compact;const p=new Date(1e3*(a.timeOpen||0));return i.createElement(o.R,{"data-test":"order-history-card-details-ftt",compact:s},i.createElement(r.n,{data:i.createElement(l._,{id:"duration",defaultMessage:"Duration"}),value:(0,n.yC)(a.duration),type:n.Hj.ORDER}),i.createElement(r.n,{data:i.createElement(l._,{id:"open_in",defaultMessage:"Open at"}),value:a.openCase===u.Ns.TIME_OPEN?a.timeOpen?i.createElement(i.Fragment,null,i.createElement(c.Ji,{value:p,day:"numeric",month:"short"})," ",(0,d.M)(p)):"":i.createElement(n.l1,{style:"decimal",value:a.courseTarget||0,minimumFractionDigits:a.pair.precision||6,maximumFractionDigits:a.pair.precision||6}),type:n.Hj.ORDER}),i.createElement(r.n,{data:i.createElement(l._,{id:"order_id",defaultMessage:"Order ID"}),value:a.id,type:n.Hj.ORDER}),a.status!==u.mF.SUCCESS?i.createElement(r.n,{data:i.createElement(l._,{id:"closed_deal",defaultMessage:"Closed"}),value:m(a.status),type:n.Hj.ORDER,"data-test":"order-status",highlightedValue:!0}):null)}},32757:(e,a,s)=>{"use strict";s.d(a,{n:()=>h});var i=s(27378),r=s(74397),n=(s(60042),s(95029)),o=(s(75403),s(77740),s(17302),s(11538)),l=(s(1798),s(99651),s(82844)),c=s(18985),d=s(8895),u=(s(58674),s(63065),s(88770)),m=(s(69602),s(338),s(77299),s(92756),s(72785));const p=e=>{switch(e){case"cancel":return i.createElement(l._,{id:"deal_order_history_cancel",defaultMessage:"Cancelled by the user"});case"expire":return i.createElement(l._,{id:"deal_order_history_expire",defaultMessage:"Cancelled because the time ran out"});case"success":return i.createElement(l._,{id:"order_opened",defaultMessage:"Trade opened"});default:return i.createElement(l._,{id:"deal_order_history_error",defaultMessage:"The trade failed to open"})}},h=e=>{let a=e.order,s=e.compact;const h=new Date(1e3*(a.timeOpen||0));return i.createElement(o.R,{"data-test":"order-history-card-details-fx",compact:s},i.createElement(r.n,{data:i.createElement(l._,{id:"open_in",defaultMessage:"Open at"}),value:a.openCase===m.Ns.TIME_OPEN?a.timeOpen?i.createElement(i.Fragment,null,i.createElement(c.Ji,{value:h,day:"numeric",month:"short"})," ",(0,d.M)(h)):"":i.createElement(n.l1,{style:"decimal",value:a.courseTarget||0,minimumFractionDigits:a.pair.precision||6,maximumFractionDigits:a.pair.precision||6}),type:n.Hj.ORDER}),i.createElement(r.n,{data:i.createElement(l._,{id:"order_id",defaultMessage:"Order ID"}),value:a.id,type:n.Hj.ORDER}),i.createElement(r.n,{data:i.createElement(l._,{id:"fx_takeProfit",defaultMessage:"Take Profit"}),value:i.createElement(u.P,{limit:a.takeProfit,currency:a.currency,precision:a.pair.precision}),type:n.Hj.ORDER}),i.createElement(r.n,{data:i.createElement(l._,{id:"fx_stopLoss",defaultMessage:"Stop Loss"}),value:i.createElement(u.P,{limit:a.stopLoss,currency:a.currency,precision:a.pair.precision}),type:n.Hj.ORDER}),a.status!==m.mF.SUCCESS?i.createElement(r.n,{data:i.createElement(l._,{id:"closed_deal",defaultMessage:"Closed"}),value:p(a.status),type:n.Hj.ORDER,"data-test":"order-status",highlightedValue:!0}):null)}},77987:(e,a,s)=>{"use strict";s.d(a,{G:()=>f});var i=s(27378),r=(s(60042),s(17302),s(77740),s(95029)),n=s(75403),o=s(43373),l=(s(1798),s(99651)),c=s(82844),d=s(8141),u=s(18985),m=s(8895),p=s(58674),h=s(48308),v=(s(63065),s(69602),s(338),s(77299),s(92756),s(72785)),g=s(61399);const _=e=>{switch(e){case v.mF.SUCCESS:return 1;case v.mF.ERROR:case v.mF.EXPIRE:case v.mF.CANCEL:return-1;default:return 0}},f=e=>{let a=e.order,s=e.actionAvailable,f=e.isOpened,E=e.goToDeal,S=e.selectOrder,y=e.selected;const b=a.id,C=a.dealId,T=i.useRef(null),A=i.useCallback((e=>{e.stopPropagation(),C&&E(C)}),[C,E]),k=i.useCallback((()=>{S(b)}),[b,S]),w=a.status===v.mF.SUCCESS&&s,N=new Date(1e3*(a.updateTime||a.timeOpen||0));return i.createElement(n.W,{"data-id":"ftt-".concat(b),"data-test":"order-history-card-ftt",isOpened:f,selected:y,onClick:k,hostRef:T,dir:(0,d.L)(),type:n.y.ORDER},i.createElement(n.W.Header,null,i.createElement(l.E,{pairId:a.pair.id,icon:a.pair.icon,pairTitle:a.pair.title,subTitle:i.createElement(i.Fragment,null,"FTT ",i.createElement(c._,{id:"from",defaultMessage:"from"})," ",i.createElement(r.p7,{value:a.winperc})),renderAmount:i.createElement(o.U,{tradeDir:a.dir,value:a.amount,currency:a.currency,shaded:!0}),renderControls:w?i.createElement(p.J,{onClick:A,isCentered:!0,className:"card__history-button",shaded:!0},i.createElement(c._,{id:"go_to_deal",defaultMessage:"Go to deal"})):null,shaded:!0},i.createElement(h.t,{color:"gamma"},a.openCase===v.Ns.TIME_OPEN?i.createElement(i.Fragment,null,i.createElement(u.Ji,{value:N,day:"numeric",month:"short"})," ",(0,m.M)(N)):i.createElement(r.l1,{style:"decimal",value:Number(a.courseTarget),minimumFractionDigits:a.pair.precision||6,maximumFractionDigits:a.pair.precision||6})),i.createElement(h.t,null,i.createElement(r.oI,{value:_(a.status)},a.status===v.mF.SUCCESS?i.createElement(c._,{id:"card_order_opened",defaultMessage:"Order opened"}):i.createElement(c._,{id:"card_order_canceled",defaultMessage:"Order canceled"}))))),i.createElement(n.W.Body,null,i.createElement(g.t,{order:a,compact:!w})))}},63577:(e,a,s)=>{"use strict";s.d(a,{p:()=>f});var i=s(27378),r=(s(60042),s(17302),s(77740),s(95029)),n=s(75403),o=s(43373),l=(s(1798),s(99651)),c=s(82844),d=s(8141),u=s(18985),m=s(8895),p=s(58674),h=s(48308),v=(s(63065),s(69602),s(338),s(77299),s(92756),s(72785)),g=s(32757);const _=e=>{switch(e){case v.mF.SUCCESS:return 1;case v.mF.ERROR:case v.mF.EXPIRE:case v.mF.CANCEL:return-1;default:return 0}},f=e=>{let a=e.order,s=e.actionAvailable,f=e.isOpened,E=e.goToDeal,S=e.selectOrder,y=e.selected;const b=a.id,C=a.dealId,T=i.useRef(null),A=i.useCallback((e=>{e.stopPropagation(),C&&E(C)}),[C,E]),k=i.useCallback((()=>{S(b)}),[b,S]),w=a.status===v.mF.SUCCESS&&s,N=new Date(1e3*(a.updateTime||a.timeOpen||0));return i.createElement(n.W,{"data-id":"fx-".concat(b),"data-test":"order-history-card-fx",isOpened:f,selected:y,onClick:k,hostRef:T,dir:(0,d.L)(),type:n.y.ORDER},i.createElement(n.W.Header,null,i.createElement(l.E,{pairId:a.pair.id,icon:a.pair.icon,pairTitle:a.pair.title,subTitle:"FX X".concat(a.multiplicator),renderAmount:i.createElement(o.U,{tradeDir:a.dir,value:a.amount,currency:a.currency,shaded:!0}),renderControls:w?i.createElement(p.J,{onClick:A,isCentered:!0,className:"card__history-button",shaded:!0},i.createElement(c._,{id:"go_to_deal",defaultMessage:"Go to deal"})):null,shaded:!0},i.createElement(h.t,{color:"gamma"},a.openCase===v.Ns.TIME_OPEN?i.createElement(i.Fragment,null,i.createElement(u.Ji,{value:N,day:"numeric",month:"short"})," ",(0,m.M)(N)):i.createElement(r.l1,{style:"decimal",value:Number(a.courseTarget),minimumFractionDigits:a.pair.precision||6,maximumFractionDigits:a.pair.precision||6})),i.createElement(h.t,null,i.createElement(r.oI,{value:_(a.status)},a.status===v.mF.SUCCESS?i.createElement(c._,{id:"card_order_opened",defaultMessage:"Order opened"}):i.createElement(c._,{id:"card_order_canceled",defaultMessage:"Order canceled"}))))),i.createElement(n.W.Body,null,i.createElement(g.n,{order:a,compact:!w})))}},63091:(e,a,s)=>{"use strict";s.d(a,{G:()=>l});var i=s(27378),r=s(73598),n=s(45797),o=s(95029);const l=e=>{let a=e.dealOrderCurrentService,s=e.order,l=e.asset,c=e.title,d=e.limitTypes,u=e.onApply,m=e.onCancel,p=e.onError;const h=(0,n.bU)(),v=i.useCallback((e=>{a.saveLimits(s.id,e).then((e=>null==u?void 0:u(e))).catch((e=>null==p?void 0:p(e)))}),[a,u,p,s.id]),g=i.useCallback((()=>{null==m||m()}),[m]),_=(e,i,r,n)=>a.convertLimits(e,i,r,s,n),f=(e,i)=>a.getLimitsRangeFormatted(e,i,s),E=e=>a.getStopOut(e,s),S=e=>a.getTrailingLevel(e,s),y=(e,i)=>a.validateLimits(e,i,s);return i.createElement(r.Qj,null,(()=>i.createElement(o.X_,{title:c,trailingSwitcherName:"trailing_switcher_current_deal",isSigned:!0,isPristine:!0,deal:{stopLoss:s.stopLoss,pair:{id:l.id,precision:l.precision}},currency:s.currency,precision:l.precision,stopLoss:s.stopLoss,takeProfit:s.takeProfit,limitTypes:d,defaultLimitType:d[0],isTrailingStop:a.isTrailingStop,locale:h,convert:_,validate:y,getStopOut:E,getTrailingLevel:S,getLimitsDiapasonFormatted:f,onApply:v,onCancel:g,toggle:g})))}},57522:(e,a,s)=>{"use strict";s(2243),s(27378),s(60042),s(17302),s(77740),s(95029),s(75403),s(1798),s(99651),s(58674),s(63065),s(86520),s(69602),s(338),s(77299),s(98074),s(38955),s(86361),s(92756)},20493:(e,a,s)=>{"use strict";s.d(a,{j:()=>DealCurrentService});var i=s(49491),r=s(59312),n=s(60521),o=s(10002),l=s(66257);class DealCurrentService{constructor(e){this.webSocket=e,this.userSelectedDeal=null,this.lastClosedDeal=null,this.dealsCollectionMap={},this.getDeal=this.getDeal.bind(this)}get collection(){return this.dealsCollectionMap[this.account.id]}get isCanceling(){return this.collection.models.some((e=>e.canceling))}get dealsCount(){return this.collection.models.length}get availableDealsCount(){return this.collection.models.filter((e=>!e.pair.lockedTrading)).length}get totalDealsAmount(){return this.collection.models.reduce(((e,a)=>e+=this.dealModel.getDealAmount(a)),0)}get availableCancelAmount(){return this.collection.models.filter((e=>!e.pair.lockedTrading)).reduce(((e,a)=>e+=this.dealModel.getDealAmount(a)+this.dealModel.getDealFloatingAmount(a)),0)}get availableAmount(){return+this.collection.models.filter((e=>!e.pair.lockedTrading)).reduce(((e,a)=>e+=this.dealModel.getDealAmount(a)),0).toFixed(2)}get totalDealsFloatingAmount(){return+this.collection.models.reduce(((e,a)=>e+=this.dealModel.getDealFloatingAmount(a)),0).toFixed(2)}get selectedDeal(){return this.collection.selected}createDealCollections(e){e.forEach((e=>{if(!this.dealsCollectionMap[e.id]){const a=new o.C([],{sort:"id",order:"desc"});a.onRemove=e=>{e.some((e=>{var a;return e.id===(null===(a=this.collection.selected)||void 0===a?void 0:a.id)}))&&this.unselectDeal()},this.dealsCollectionMap[e.id]=a}})),this.removeDealCollections(e)}removeDealCollections(e){Object.keys(this.dealsCollectionMap).filter((a=>e.every((e=>e.id!==Number(a))))).forEach((e=>delete this.dealsCollectionMap[e]))}load(e,a,s){this.account=i({},e),this.dealModel=s,this.createDealCollections(a)}updateAccount(e){e.type!==this.account.type&&(this.account.type=e.type),e.id!==this.account.id&&(this.account.id=e.id)}getDeal(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.collection.getById(e,a)}selectDeal(e,a){const s=this.collection.select(e);a&&s&&this.collection.selected&&(this.userSelectedDeal=(0,n.toJS)(this.collection.selected))}unselectDeal(){this.collection.unSelect(),this.userSelectedDeal=null}removeDeals(e){e.forEach((e=>{const a=this.dealsCollectionMap[e.accountId];a&&a.models.length&&(a.update([e],{remove:!1,select:!1}),setTimeout((()=>{a.remove(e.id)})))}))}closeDeals(e){const a=this.parseRawData(e);if(a&&a.length){this.removeDeals(a);const s=this.filterRawData(e);this.lastClosedDealList=[...s],this.lastClosedDeal=i({},s[s.length-1])}}updateDeals(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.parseRawData(e);if(a){const e=this.dealsCollectionMap[this.account.id];e&&e.update(s,{remove:!0,select:!1})}else s.forEach((e=>{const a=this.dealsCollectionMap[e.accountId];a&&a.update([e],{remove:!1,select:!1})}))}updateDealsMin(e){const a=e.reduce(((e,a)=>{const s=this.getDeal(a.id);return s&&e.push(this.dealModel.update(a,s)),e}),[]);this.collection.update(a,{remove:!1,select:!1})}cancelAllDeals(){const e=this.collection.models.filter((e=>!e.pair.lockedTrading)).map((e=>this.cancelDeal(e.id,!0)));return Promise.all(e).then((e=>(this.closeDeals(e),e)))}cancelDeals(e){const a=[];e.map((e=>this.getDeal(e))).forEach((e=>{e&&a.push(e)}));const s=a.map((e=>this.cancelDeal(e.id,!0)));return Promise.all(s).then((e=>(this.closeDeals(e),e)))}cancelDeal(e,a){const s=this.getDeal(e),i=s&&Array.isArray(s)?s[0]:s;return!i||i.canceling?Promise.reject({mess:"Deal does not exist"}):(i.canceling=!0,new Promise(((s,r)=>{this.account?this.webSocket.cancelDeal(e,i.group,this.account.id).then((e=>{a||this.closeDeals(e),i.canceling=!1,s(e[0])})).catch((e=>{i.canceling=!1,r(e)})):r({mess:"Account does not exist"})})))}cancelCurrentDeal(){return this.collection.selected?this.cancelDeal(this.collection.selected.id):Promise.reject()}parseRawData(e){return e.map((e=>{let a;const s=this.dealsCollectionMap[e.account_id];return s&&(a=s.getById(e.id,!0)),a?this.dealModel.update(e,a):this.dealModel.parse(e)}))}filterRawData(e){const a=[],s=this.account,i=s.id,r=s.type;return e&&e.forEach((e=>{(e.group===r&&e.account_id===i||e.group===l.Q.DEMO&&e.group===r)&&a.push(e)})),a}}(0,r.gn)([n.observable.ref],DealCurrentService.prototype,"userSelectedDeal",void 0),(0,r.gn)([n.observable.ref],DealCurrentService.prototype,"lastClosedDeal",void 0),(0,r.gn)([n.observable.ref],DealCurrentService.prototype,"lastClosedDealList",void 0),(0,r.gn)([n.observable],DealCurrentService.prototype,"dealModel",void 0),(0,r.gn)([n.observable],DealCurrentService.prototype,"account",void 0),(0,r.gn)([n.computed],DealCurrentService.prototype,"collection",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"isCanceling",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"dealsCount",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"availableDealsCount",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"totalDealsAmount",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"availableCancelAmount",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"availableAmount",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"totalDealsFloatingAmount",null),(0,r.gn)([n.computed],DealCurrentService.prototype,"selectedDeal",null),(0,r.gn)([n.action],DealCurrentService.prototype,"updateAccount",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"selectDeal",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"unselectDeal",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"closeDeals",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"updateDeals",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"updateDealsMin",null),(0,r.gn)([n.action],DealCurrentService.prototype,"cancelAllDeals",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"cancelDeals",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"cancelDeal",null),(0,r.gn)([n.action.bound],DealCurrentService.prototype,"cancelCurrentDeal",null)},58214:(e,a,s)=>{"use strict";var i=s(59312),r=s(60521),n=s(14206),o=s(89215);class DealHistoryService{constructor(){this.collection=new o.F,this.limit=30,this.page=1,this.loadable=!0,this.isLoading=!1,this.lastHistoryLoadTime=new Date,this.sendRequest=()=>Promise.resolve([])}get dealsCount(){return this.collection.models.length}initialLoadDo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.limit,a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;return this.resetCollection(e),this.loadDo(e,a,s)}resetCollection(e){this.collection.reset([]),this.limit=e,this.page=1}loadDo(e,a,s){return this.isLoading&&this.loadCancelToken&&this.loadCancelToken.cancel("Deal history is loading cancel, due to multiple request"),e!==this.limit&&this.changeLimit(e),this.beforeLoad(),this.loadCancelToken=n.CancelToken.source(),this.sendRequest(e,this.page,s,a,this.loadCancelToken.token).then((a=>(this.collection.update(a,{remove:!1}),a.length>=e?(this.page=this.page+1,this.loadable=!0):(0,r.runInAction)((()=>{this.loadable=!1})),this.afterLoad(),Promise.resolve(a)))).catch((e=>{this.afterLoad(e)}))}beforeLoad(){this.isLoading=!0,this.error=null}afterLoad(e){this.lastHistoryLoadTime=new Date,this.isLoading=!1,this.error=e||null}changeLimit(e){this.limit=e,this.page=Math.floor(this.collection.models.length/e)+1}}(0,i.gn)([r.computed],DealHistoryService.prototype,"dealsCount",null),(0,i.gn)([r.observable],DealHistoryService.prototype,"loadable",void 0),(0,i.gn)([r.observable],DealHistoryService.prototype,"isLoading",void 0),(0,i.gn)([r.action],DealHistoryService.prototype,"beforeLoad",null),(0,i.gn)([r.action],DealHistoryService.prototype,"afterLoad",null)},73626:(e,a,s)=>{"use strict";var i=s(49491),r=s(59312),n=s(60521),o=s(10002);class DealOrderCurrentService{constructor(e){this.webSocket=e,this.userSelectedOrder=null,this.lastClosedOrder=null,this.ordersCollectionMap={},this.getOrder=this.getOrder.bind(this)}get collection(){return this.ordersCollectionMap[this.account.id]}get isCanceling(){return this.collection.models.some((e=>e.canceling))}get ordersCount(){return this.collection.models.length}get selectedOrder(){return this.collection&&this.collection.selected}load(e,a,s){this.account=i({},e),this.orderModel=s,this.createOrderCollections(a)}createOrderCollections(e){e.forEach((a=>{if(!this.ordersCollectionMap[a.id]){const e=new o.C([],{sort:"id",order:"desc"});e.onRemove=e=>{e.some((e=>{var a;return e.id===(null===(a=this.collection.selected)||void 0===a?void 0:a.id)}))&&this.unselectOrder()},this.ordersCollectionMap[a.id]=e}this.removeOrderCollections(e)}))}removeOrderCollections(e){Object.keys(this.ordersCollectionMap).filter((a=>e.every((e=>e.id!==Number(a))))).forEach((e=>delete this.ordersCollectionMap[e]))}updateAccount(e){e.type!==this.account.type&&(this.account.type=e.type),e.id!==this.account.id&&(this.account.id=e.id)}getOrder(e){return this.collection.getById(e,!0)}updateOrders(e){this.parseRawData(e).forEach((e=>{const a=this.ordersCollectionMap[e.accountId];a&&a.update([e],{remove:!1,select:!1})}))}parseRawData(e){return e.map((e=>{let a;const s=this.ordersCollectionMap[e.account_id];return s&&(a=s.getById(e.id,!0)),a?this.orderModel.update(e,a):this.orderModel.parse(e)}))}cancelOrders(e){const a=e.map(this.getOrder).filter((e=>e));return Promise.all(a.map((e=>this.cancelOrder(e.id))))}cancelOrder(e){const a=this.getOrder(e);return!a||a.canceling?Promise.reject():(a.canceling=!0,new Promise(((s,i)=>{this.account?this.webSocket.cancelOrder(e,a.group,a.accountId).then((e=>{(0,n.runInAction)("cancelOrder transaction",(()=>{a.canceling=!1,a.status="cancel",e.length&&(a.updateTime=e[0].update_at)})),s(e[0])})).catch((e=>{a.canceling=!1,i(e)})):i()})))}selectOrder(e){this.collection.select(e)&&this.collection.selected&&(this.userSelectedOrder=(0,n.toJS)(this.collection.selected))}unselectOrder(){this.collection.unSelect(),this.userSelectedOrder=null}}(0,r.gn)([n.observable.ref],DealOrderCurrentService.prototype,"userSelectedOrder",void 0),(0,r.gn)([n.observable.ref],DealOrderCurrentService.prototype,"lastClosedOrder",void 0),(0,r.gn)([n.observable],DealOrderCurrentService.prototype,"orderModel",void 0),(0,r.gn)([n.observable],DealOrderCurrentService.prototype,"account",void 0),(0,r.gn)([n.computed],DealOrderCurrentService.prototype,"collection",null),(0,r.gn)([n.computed],DealOrderCurrentService.prototype,"isCanceling",null),(0,r.gn)([n.computed],DealOrderCurrentService.prototype,"ordersCount",null),(0,r.gn)([n.computed],DealOrderCurrentService.prototype,"selectedOrder",null),(0,r.gn)([n.action],DealOrderCurrentService.prototype,"updateAccount",null),(0,r.gn)([n.action.bound],DealOrderCurrentService.prototype,"updateOrders",null),(0,r.gn)([n.action.bound],DealOrderCurrentService.prototype,"cancelOrders",null),(0,r.gn)([n.action.bound],DealOrderCurrentService.prototype,"cancelOrder",null),(0,r.gn)([n.action.bound],DealOrderCurrentService.prototype,"selectOrder",null),(0,r.gn)([n.action.bound],DealOrderCurrentService.prototype,"unselectOrder",null)},19669:(e,a,s)=>{"use strict";s.d(a,{Pr:()=>m,Sv:()=>n,mw:()=>d});var i=s(47014),r=s(2243),n=s(96981);let o=null,l=null;function c(e){return o=Promise.all([s.e(1326).then(s.bind(s,60524)),s.e(1326).then(s.bind(s,16288)),s.e(1326).then(s.bind(s,54225))]).then((a=>r(a,1)[0].default.initializeApp(e)))}function d(e){return u.apply(this,arguments)}function u(){return(u=i((function*(e){return l=yield c(e),l}))).apply(this,arguments)}function m(){return o||Promise.resolve(null)}},96981:(e,a,s)=>{"use strict";var i;function r(e){performance.mark("".concat(e,"-start"))}function n(e){performance.mark("".concat(e,"-stop")),performance.measure(e,"".concat(e,"-start"),"".concat(e,"-stop"))}s.r(a),s.d(a,{PerformanceMetric:()=>i,startMark:()=>r,stopMark:()=>n}),function(e){e.AppInitialization="AppInitialization",e.CreateOrder="CreateOrder",e.StartDeal="StartDeal",e.FirstChartContent="FirstChartContent"}(i||(i={}))},39900:(e,a,s)=>{"use strict";s.d(a,{SY:()=>h,yA:()=>KycService,SE:()=>c,E7:()=>d});var i=s(27378),r=s(82844),n=s(50649),o=s(60042),l=s(17302);const c=(0,n.observer)((e=>{let a=e.className,s=e.onVerificationClick;return i.createElement("div",{className:o("kyc-p-verification-request",a)},i.createElement("span",{className:"kyc-p-verification-request__description"},i.createElement(r._,{id:"kyc_verification_security_desc",defaultMessage:"The security of your account is our top priority. One of the best ways to protect it is to verify your account data and identity."})),i.createElement("span",{className:"kyc-p-verification-request__description"},i.createElement("div",null,i.createElement(r._,{id:"kyc_verification_docs_list",defaultMessage:"To complete the verification process, please upload the following documents:"})),i.createElement("div",null,i.createElement(r._,{id:"kyc_verification_id",defaultMessage:"1. Passport or a government issued ID"})),i.createElement("div",null,i.createElement(r._,{id:"kyc_verification_selfie",defaultMessage:"2. 3-D selfie"})),i.createElement("div",null,i.createElement(r._,{id:"kyc_verification_address_proof",defaultMessage:"3. Proof of address"})),i.createElement("div",null,i.createElement(r._,{id:"kyc_verification_payment_proof",defaultMessage:"4. Proof of payment (after you have deposited funds into your account)"}))),i.createElement(l.zx,{onClick:s},i.createElement(r._,{id:"kyc_verification_verify_now",defaultMessage:"Verify My Account Now"})))})),d=()=>i.createElement(r._,{id:"kyc_verification_title",defaultMessage:"Account Verification"});var u=s(77740);const m=e=>{let a=()=>null;switch(e.status){case"success":a=u.NOm;break;case"process":a=u.Zbd;break;case"requested":case"failed":a=u.az_}return i.createElement(a,{className:o("kyc-c-status-icon","kyc-c-status-icon_".concat(e.status),e.className)})},p={identification:{title:i.createElement(r._,{id:"kyc_identification_title",defaultMessage:"Account Identification"}),description:i.createElement(r._,{id:"kyc_identification_descr",defaultMessage:"Filling out the form is a basic step in user identity confirmation"})},verification:{title:i.createElement(r._,{id:"kyc_verification_title",defaultMessage:"Account Verification"}),description:i.createElement(r._,{id:"kyc_verification_descr",defaultMessage:"Full check and identity confirmation"})}},h=i.memo((e=>{let a=e.type,s=e.status,r=e.onClick;const n=i.useMemo((()=>p[a]),[a]),o=n.title,c=n.description,d=i.useMemo((()=>s?i.createElement(m,{status:s}):null),[s]);return s?i.createElement(l.zx,{startIcon:i.createElement(u.GhA,null),endIcon:d,understring:c,horizontalAlign:"start",fullWidth:!0,variant:"secondary",dataTest:"kyc-w-kyc-button",onClick:r},o):null}));var v=s(49491);(0,s(18985).vU)({support:{id:"kyc_contact_support",defaultMessage:"Contact Support"},documents:{id:"kyc_upload_documents",defaultMessage:"Upload Documents"},form:{id:"kyc_fill_form",defaultMessage:"Fill out the Form"}});i.Component;var g=s(47014),_=s(59312),f=s(60521);class StateTransformer{static parse(e){const a={userId:e.user_id,flowName:e.flow_name,clientId:e.client_id,token:e.token,baseUrl:e.base_url,type:e.type,status:e.status,meta:e.meta,calloutMeta:e.callout_meta,action:StateTransformer.parseAction(e),isVoluntary:e.is_voluntary,notices:e.notices,links:e.links};let s=v(v({},a),{},{blockStatus:null});return e.block_status&&(s=v(v({},a),{},{blockStatus:e.block_status,blockMeta:e.block_meta||StateTransformer.DEFAULT_BLOCK_META})),s}static parseAction(e){return"permanent"===e.block_status?"support":"requested"===e.status&&"verification"===e.type?"documents":"requested"===e.status&&"identification"===e.type?"form":"support"}}StateTransformer.DEFAULT_BLOCK_META={title:"",reason:"",description:""};class KycService{constructor(e,a){this.http=e,this.webSocket=a,this.state=null,this.handleChangeState=this.handleChangeState.bind(this)}load(e){return this.updateState(e),this.webSocket.onKycStateChange(this.handleChangeState),Promise.resolve(!0)}update(){var e=this;return g((function*(){try{const a=yield e.http.getKycState();return(0,f.runInAction)((()=>{e.updateState(a)})),a?StateTransformer.parse(a):null}catch(e){return null}}))()}handleChangeState(){this.http.getKycState().then((0,f.action)((e=>{this.updateState(e)}))).catch((e=>{console.error(e)}))}updateState(e){if(e){const a=StateTransformer.parse(e);this.state?(0,f.set)(this.state,a):(0,f.set)(this,"state",a)}else(0,f.set)(this,"state",null)}}(0,_.gn)([f.observable],KycService.prototype,"state",void 0),(0,_.gn)([f.action],KycService.prototype,"load",null),(0,_.gn)([f.action],KycService.prototype,"handleChangeState",null)},23541:(e,a,s)=>{"use strict";s.d(a,{F:()=>HeaderState});var i=s(59312),r=s(60521);class HeaderState{constructor(){this.isVisible=!1,this.opacity=1,this.titleElement=null,this.imageElement=null,this.isSupported="IntersectionObserver"in window&&"IntersectionObserverEntry"in window,this.handleEntriesChange=this.handleEntriesChange.bind(this)}onUpdate(e,a){if(this.reset(),e&&(this.titleElement=a,this.isSupported&&this.titleElement)){const a={root:e,rootMargin:"0px",threshold:.05};this.titleIntersectionObserver=new IntersectionObserver(this.handleEntriesChange,a),this.titleIntersectionObserver.observe(this.titleElement)}}setImageElement(e){this.imageElement=e,e||(this.opacity=1)}onUpdateScroll(e){if(this.imageElement){if(!(e.offsetHeight+.4*this.imageElement.offsetHeight<e.scrollHeight))return void(this.opacity=0);const a=.25*this.imageElement.offsetHeight;let s=1-(a-e.scrollTop)/a;s>1?s=1:s<0&&(s=0),this.opacity=s}}reset(){this.isVisible=!1,this.titleIntersectionObserver&&(this.titleIntersectionObserver.disconnect(),this.titleIntersectionObserver=void 0),this.titleElement&&(this.titleElement=null)}handleEntriesChange(e){this.titleElement&&e.forEach((e=>{e.target===this.titleElement&&(this.isVisible=!e.isIntersecting)}))}}(0,i.gn)([r.observable],HeaderState.prototype,"isVisible",void 0),(0,i.gn)([r.observable],HeaderState.prototype,"opacity",void 0),(0,i.gn)([r.action],HeaderState.prototype,"setImageElement",null),(0,i.gn)([r.action],HeaderState.prototype,"onUpdateScroll",null),(0,i.gn)([r.action],HeaderState.prototype,"reset",null),(0,i.gn)([r.action],HeaderState.prototype,"handleEntriesChange",null)},41130:(e,a,s)=>{"use strict";s.d(a,{s:()=>T});var i=s(49491),r=s(14936),n=s(59312),o=s(27378),l=s(60521),c=s(73598),d=s(50649),u=s(15696),m=s(29609),p=s(60042),h=s(7947),v=s(59989),g=s(86552),_=s(77001),f=s(48987),E=s(23541),S=s(99128);const y=["type","animation","panelService","style","header","className","onBack","onForward","onClose","isStandalone","preserveScrollPosition","ContentWrapper"];var b;const C=o.memo((e=>o.createElement(o.Fragment,null,e.children)));let T=b=class Panel extends o.Component{constructor(e){super(e),this.changeDirection="forward",this.isNested=(0,l.computed)((()=>this.props.panelService.scope.stack.length>1)),this.headerState=new E.F,this.disposers=[],this.overlayChild=null,this.handleStackChange=this.handleStackChange.bind(this),this.handleContentMount=this.handleContentMount.bind(this),this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this),this.handleOpenById=this.handleOpenById.bind(this),this.handleBack=this.handleBack.bind(this),this.handleScroll=this.handleScroll.bind(this),this.childFactory=this.childFactory.bind(this),this.setOverlayChild=this.setOverlayChild.bind(this),this.resetOverlayChild=this.resetOverlayChild.bind(this)}static computeWidth(e,a){let s;return a&&a.width&&(s=a.width),s||(s="embedded"===e?"320px":"100%"),s}componentDidMount(){this.props.panelService.onStackChange(this.handleStackChange)}componentWillUnmount(){this.disposers.forEach((e=>e())),this.disposers=[]}handleContentMount(e){this.headerState.onUpdate(e,e.querySelector("#".concat(b.CONTENT_TITLE_ID))),this.headerState.setImageElement(e.querySelector("#".concat(b.CONTENT_IMAGE_ID))),this.headerState.onUpdateScroll(e)}handleStackChange(e,a,s){switch(this.changeDirection=s,s){case"backward":this.props.onBack&&this.props.onBack(e,a);break;case"forward":this.props.onForward&&this.props.onForward(e,a)}}handleClose(){const e=this.props.panelService;e.close(),this.props.onClose&&this.props.onClose(e.scope.activeItem?e.scope.activeItem.id:null)}handleOpen(e,a){this.props.panelService.openByItem(e,a)}handleOpenById(e,a){this.props.panelService.openById(e,a)}handleBack(){this.props.panelService.back()}setOverlayChild(e){this.overlayChild=e}resetOverlayChild(){this.overlayChild=null}childFactory(e){let a;switch(this.changeDirection){case"forward":a="bottom"===this.props.animation?S.v.navigationSlideTop:S.v.navigationSlideRight;break;case"backward":a="bottom"===this.props.animation?S.v.navigationSlideBottom:S.v.navigationSlideLeft}return o.cloneElement(e,{classNames:a})}handleScroll(e,a){var s;a===(null===(s=this.props.panelService.scope.activeItem)||void 0===s?void 0:s.id)&&this.headerState.onUpdateScroll(e)}render(){var e;const a=this.props,s=a.type,n=a.animation,l=a.panelService,d=a.style,E=a.header,T=void 0===E?{disable:!1}:E,A=a.className,k=(a.onBack,a.onForward,a.onClose,a.isStandalone),w=void 0!==k&&k,N=a.preserveScrollPosition,R=void 0===N||N,I=a.ContentWrapper,D=void 0===I?C:I,O=r(a,y),L=b.computeWidth(s,d),M={maxWidth:"embedded"!==s||l.isOpen?L:0,backgroundColor:(null==d?void 0:d.backgroundColor)||"var(--bg-alpha)"},P={"--layout-panel-background-color":M.backgroundColor};return T.disable?P["--sidebar-header-height"]="0px":null!==(e=T.style)&&void 0!==e&&e.height&&(P["--sidebar-header-height"]=T.style.height),o.createElement("div",i({className:p("cor-w-panel",l.isOpen&&"cor-w-panel_opened","cor-w-panel_type_".concat(s),"cor-w-panel_animation_".concat(n),A),style:i(i({},M),P)},O),o.createElement(h.j,{isMounted:l.isOpen,delay:S.v.duration},o.createElement(c.Qj,null,(()=>{var e;const a=l.scope.activeItem;if(!a)return o.createElement("div",null);const r=null===(e=a.renderHeaderImage)||void 0===e?void 0:e.call(a,{onBack:this.handleBack,onClose:this.handleClose,onOpen:this.handleOpen,onOpenById:this.handleOpenById,onOpenInOverlay:this.setOverlayChild});let n;return T.disable||a.disableHeader||(n=o.createElement(c.Qj,null,(()=>o.createElement(f.h,{styleBackground:i(i({},M),{},{opacity:this.headerState.opacity}),styleContent:{opacity:this.headerState.opacity},title:a.title,titleKey:a.id,className:"cor-w-panel__header",classNameContent:"cor-w-panel__header-content",isNested:this.isNested.get(),isTitleVisible:!(this.isNested.get()&&!r)||this.headerState.isVisible,isBackDisabled:a.isControlsDisabled||a.isBackDisabled,isCloseDisabled:a.isControlsDisabled||a.isCloseDisabled||w,renderHeader:a.renderHeader,renderHeaderActions:a.renderHeaderActions,renderBack:a.renderBack,renderClose:a.renderClose,onBack:this.handleBack,onClose:this.handleClose,onOpen:this.handleOpen,onOpenById:this.handleOpenById,onOpenInOverlay:this.setOverlayChild})))),o.createElement("div",{className:"cor-w-panel__container cor-w-panel__container_type_".concat(s," panel-").concat(a.id),"data-test":"cor-w-panel-".concat(a.id),style:{width:"embedded"===s?L:"100%"}},o.createElement(D,{onBack:a.disableHeader||a.isControlsDisabled||a.isBackDisabled||!this.isNested.get()?void 0:this.handleBack,onClose:this.handleClose},o.createElement(v.a,{resetOverlayChild:this.resetOverlayChild},this.overlayChild),n,o.createElement(u.Z,{childFactory:this.childFactory,className:"cor-w-panel__transition-group",style:M},o.createElement(m.Z,{key:a.id,timeout:S.v.duration},o.createElement(_.X,{panelId:a.id,className:p("cor-w-panel__scroll-wrapper",(r||!T)&&"cor-w-panel__scroll-wrapper_full-height",a.alwaysScroll&&"cor-w-panel__scroll-wrapper_always"),onMount:this.handleContentMount,onScroll:this.handleScroll,restore:R},r&&o.createElement("div",{id:b.CONTENT_IMAGE_ID,className:"cor-w-panel__content-image"},r),o.createElement("div",{className:"cor-w-panel__content-wrapper"},a.title&&this.isNested.get()&&!r&&o.createElement("div",{id:b.CONTENT_TITLE_ID,className:"cor-w-panel__content-title","data-test":"cor-w-panel-content-title"},o.createElement(g.D,{size:"medium","data-test":"cor-panel-content-title"},a.title)),o.createElement(_.X.Context.Consumer,null,(e=>o.createElement(a.component,{scroll:e,className:p("cor-w-panel__content-inner",r&&"cor-w-panel__content-inner_has_image"),returnId:a.returnId,onOpen:this.handleOpen,onBack:this.handleBack,onClose:this.handleClose,onOpenById:this.handleOpenById,onOpenInOverlay:this.setOverlayChild})))))))))}))))}};T.CONTENT_TITLE_ID="cor-w-panel-content-title",T.CONTENT_IMAGE_ID="cor-w-panel-content-image",(0,n.gn)([l.observable],T.prototype,"changeDirection",void 0),(0,n.gn)([l.observable],T.prototype,"overlayChild",void 0),(0,n.gn)([l.action],T.prototype,"handleStackChange",null),(0,n.gn)([l.action],T.prototype,"setOverlayChild",null),(0,n.gn)([l.action],T.prototype,"resetOverlayChild",null),T=b=(0,n.gn)([d.observer],T)},7947:(e,a,s)=>{"use strict";s.d(a,{j:()=>DelayUnmount});var i=s(27378);class DelayUnmount extends i.Component{constructor(){super(...arguments),this.state={shouldRender:this.props.isMounted}}componentDidUpdate(e){e.isMounted&&!this.props.isMounted?this.startDelayUnmount():!e.isMounted&&this.props.isMounted&&(this.stopDelayUnmount(),this.setState({shouldRender:!0}))}startDelayUnmount(){this.stopDelayUnmount(),this.timeoutId=window.setTimeout((()=>this.setState({shouldRender:!1})),this.props.delay)}stopDelayUnmount(){void 0!==this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=void 0)}render(){return this.state.shouldRender?this.props.children:null}}},31998:(e,a,s)=>{"use strict";s.d(a,{h:()=>l});var i=s(27378),r=s(60042),n=s(29609),o=s(99128);const l=e=>i.createElement("div",{className:r("cor-w-panel-c-header",e.className),dir:e.dir,style:e.style},e.children);l.Left=e=>{let a=e.children,s=e.className;const l=a({className:r("cor-w-panel-c-header__left",s)});return i.createElement(n.Z,{in:!!l,timeout:o.v.duration,classNames:o.v.slideLeft,appear:!0,unmountOnExit:!0},i.createElement("div",null,l))},l.Center=e=>{let a=e.children;return i.createElement("div",{className:"cor-w-panel-c-header__center"},a({className:"cor-w-panel-c-header__center-inner"}))},l.Right=e=>{let a=e.children,s=e.className;return i.createElement(i.Fragment,null,a({className:r("cor-w-panel-c-header__right",s)}))}},57318:(e,a,s)=>{"use strict";s.d(a,{y:()=>m});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(17302),c=s(2014);const d=["component","color","className","children"],u={transparent:c.Z.host_color_transparent,default:c.Z.host_color_default},m=n.forwardRef(((e,a)=>{let s=e.component,m=void 0===s?"button":s,p=e.color,h=void 0===p?"transparent":p,v=e.className,g=e.children,_=r(e,d);return n.createElement(l.Xd,i({component:m,className:o(c.Z.host,u[h],v),ref:a},_),g)}));m.displayName="layout(Panel)(HeaderAction)"},2014:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1L0VNFDzPyJf",host_color_transparent:"_13TFgi3LvyBB",host_color_default:"G3nC0GLAUYu5"}},60699:(e,a,s)=>{"use strict";s.d(a,{s:()=>v});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l="_2tsdf-fOBctp",c="Qk2l-D-NjKY9",d="_3dkxLJKzAuam",u="FWXwWbNqm7ir",m="_2h918Rt2dHLK";const p=["title","url","alt","size","className","imageBackgroundColor","renderContent","renderActions"],h={small:"_2UJ4_XZpeqMw",middle:"SlXCXFNyF10Y",large:"_1LQelIpWMGlC",extraLarge:"k34eLbZf4l9S"},v=e=>{let a=e.title,s=e.url,v=e.alt,g=void 0===v?"":v,_=e.size,f=void 0===_?"small":_,E=e.className,S=e.imageBackgroundColor,y=e.renderContent,b=e.renderActions,C=r(e,p);const T=a||b;return n.createElement("div",i({className:o(l,h[f],E)},C),n.createElement("img",{src:s,alt:g,className:c,style:{backgroundColor:S}}),T&&n.createElement("div",{className:d},a&&n.createElement("div",{className:u,"data-test":"cor-panel-c-header-image-title"},a),b&&n.createElement("div",{className:m},b())),y&&y())};v.displayName="layout(Panel)(HeaderImage)"},89365:(e,a,s)=>{"use strict";s.d(a,{a:()=>c,d:()=>d});var i=s(2243),r=s(27378),n=s(60042),o=s(17302),l=s(21633);const c=e=>r.createElement("div",{className:n(l.Z.host,e.className)},r.createElement(o.$j,null));c.displayName="layout(Panel)(Loader)";const d=e=>{let a=e.timeout,s=void 0===a?300:a,o=e.className;const d=r.useState(!1),u=i(d,2),m=u[0],p=u[1];return r.useEffect((()=>{const e=setTimeout((()=>p(!0)),s);return()=>{clearTimeout(e)}}),[s]),r.createElement(r.Fragment,null,m&&r.createElement(c,{className:n(l.Z.host,o)}))};d.displayName="layout(Panel)(DelayedLoader)"},21633:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2omO7aDlYfpa"}},59989:(e,a,s)=>{"use strict";s.d(a,{a:()=>n});var i=s(27378),r=s(93313);const n=e=>{let a=e.children,s=e.resetOverlayChild;return a?i.createElement("div",{className:r.Z.host},i.createElement(a,{close:s})):null}},93313:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"yHAMCnNPUDqA"}},77001:(e,a,s)=>{"use strict";s.d(a,{X:()=>Scroll});var i=s(49491),r=s(27378),n=s(60042),o=s(23441),l=s(17302),c=s(5763);class Scroll extends r.Component{constructor(e){super(e),this.ref=r.createRef(),this.handleScroll=this.handleScroll.bind(this),this.handleScroll=(0,o.P)(this.handleScroll,150),this.getScrollState=this.getScrollState.bind(this),this.scrollToElement=this.scrollToElement.bind(this),this.scrollTo=this.scrollTo.bind(this),this.scroll={getState:this.getScrollState,toElement:this.scrollToElement,toValue:this.scrollTo,scrollRef:this.ref}}componentDidMount(){const e=this.ref.current;e&&this.props.panelId&&(this.props.restore&&this.startRestoreScrollFromMemory(this.props.panelId),e.addEventListener("scroll",this.handleScroll),this.props.onMount&&this.props.onMount(e,this.props.panelId))}componentWillUnmount(){this.ref.current&&this.ref.current.removeEventListener("scroll",this.handleScroll)}getScrollState(){const e=this.ref.current,a=Scroll.DEFAULT_SCROLL_STATE;return e&&(a.top=e.scrollTop,a.height=e.scrollHeight,a.rect=e.getBoundingClientRect()),a}scrollToElement(e,a,s,i){const r=this.getScrollState(),n=r.height-r.rect.height;let o=e.top+r.top;if("center"===s)o-=r.rect.height/2;if("center"===a)o+=e.height/2;o<0&&(o=0),o>n&&(o=n),this.scrollTo(Math.floor(o),i)}scrollTo(e,a){this.stopRestoreScrollFromMemory();const s=this.ref.current;s&&"function"==typeof s.scrollTo&&s.scrollTo({top:e,behavior:a})}updateScrollInMemory(e){this.ref.current&&(Scroll.scrollTopMemory.items[e]=this.ref.current.scrollTop)}startRestoreScrollFromMemory(e){this.stopRestoreScrollFromMemory();const a=Scroll.scrollTopMemory.items[e];a&&(Scroll.scrollTopMemory.timeoutId=window.setTimeout((()=>{this.scrollTo(a,"auto")}),20))}stopRestoreScrollFromMemory(){Scroll.scrollTopMemory.timeoutId&&(window.clearTimeout(Scroll.scrollTopMemory.timeoutId),Scroll.scrollTopMemory.timeoutId=void 0)}handleScroll(){var e,a;(this.updateScrollInMemory(this.props.panelId),this.ref.current)&&(null===(e=(a=this.props).onScroll)||void 0===e||e.call(a,this.ref.current,this.props.panelId))}render(){const e=this.props,a=e.children,s=e.className;return r.createElement(l.Xs,{ref:this.ref,className:n(c.Z.host,s)},r.createElement(Scroll.Context.Provider,{value:this.scroll},a))}}Scroll.displayName="layout(Panel)(Scroll)",Scroll.Context=r.createContext({scrollRef:r.createRef(),getState:()=>i({},Scroll.DEFAULT_SCROLL_STATE),toValue(){},toElement(){}}),Scroll.DEFAULT_SCROLL_STATE={top:0,height:0,rect:{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}},Scroll.scrollTopMemory={items:{}}},5763:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2r7E-nNweeND"}},86552:(e,a,s)=>{"use strict";s.d(a,{D:()=>p});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(72108);const c=["size","align","verticalAlign","className","children","isClipped","isThin"],d={small:l.Z.host_size_small,medium:l.Z.host_size_medium},u={left:l.Z.host_ali_left,center:l.Z.host_ali_center,right:l.Z.host_ali_right},m={top:l.Z.host_verAli_top,center:l.Z.host_verAli_center,bottom:l.Z.host_verAli_bottom},p=e=>{let a=e.size,s=e.align,p=void 0===s?"left":s,h=e.verticalAlign,v=void 0===h?"center":h,g=e.className,_=e.children,f=e.isClipped,E=e.isThin,S=r(e,c);return n.createElement("h3",i({className:o(l.Z.host,d[a],u[p],m[v],f&&l.Z.host_clipped,E&&l.Z.host_thin,g)},S),_)};p.displayName="layout(Panel)(Title)"},72108:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1pMhF90rOQtW",host_size_small:"_2IwNzjgnMl3P",host_size_medium:"_1qDqGhlQvvFv",host_thin:"-y3_vZFXARiR",host_ali_left:"_2i4CRTwnYAqG",host_ali_center:"_2dGMunx2eP2P",host_ali_right:"_3eXGntgtNW_2",host_verAli_top:"_2jRWk7z4BuzZ",host_verAli_center:"_2BFKSr6y8eTT",host_verAli_bottom:"_3PQRGO98uBRe",host_clipped:"_1nePNu3tcgL-"}},48987:(e,a,s)=>{"use strict";s.d(a,{h:()=>u});var i=s(27378),r=s(60042),n=s(77740),o=s(8141),l=s(31998),c=s(57318),d=s(86552);const u=e=>{let a=e.title,s=e.titleKey,u=e.style,m=e.styleContent,p=e.styleBackground,h=e.className,v=e.classNameContent,g=e.isNested,_=e.isTitleVisible,f=e.isBackDisabled,E=e.isCloseDisabled,S=e.renderHeader,y=e.renderHeaderActions,b=e.renderClose,C=e.renderBack,T=e.onBack,A=e.onOpenById,k=e.onOpen,w=e.onClose,N=e.onOpenInOverlay;const R=m&&m.opacity&&1!==m.opacity;let I=0;return p&&"opacity"in p&&(I=1-Number(p.opacity)),i.createElement("div",{className:r("cor-w-panel-l-header",h),style:u,dir:(0,o.L)()},i.createElement("div",{className:"cor-w-panel-l-header__background",style:p}),i.createElement(l.h,{className:r("cor-w-panel-l-header__content",v)},!f&&g&&i.createElement(l.h.Left,{className:"cor-w-panel-l-header__back"},(e=>C?C({className:e.className,iconOpacity:I,onOpen:k,onBack:T,onClose:w,onOpenById:A,onOpenInOverlay:N}):i.createElement(c.y,{className:e.className,onClick:T,"data-test":"cor-w-panel-back"},i.createElement(n.vjc,{className:"cor-w-panel-l-header__fake-icon",style:{opacity:I}}),i.createElement(n.vjc,null)))),i.createElement(l.h.Center,null,(e=>S?S({className:e.className,onOpen:k,onBack:T,onClose:w,onOpenById:A,onOpenInOverlay:N}):i.createElement("div",{className:r("cor-w-panel-l-header__center",R&&"cor-w-panel-l-header__center_has_transition",e.className),style:m},i.createElement(d.D,{key:s,align:g?"center":"left",className:r("cor-w-panel-l-header__title",{"cor-w-panel-l-header__title_visible":_}),size:g?"small":"medium",isClipped:!0,"data-test":"cor-panel-l-header-title"},i.createElement("span",null,a)),y&&i.createElement("div",{className:"cor-w-panel-l-header__actions"},y({onOpen:k,onBack:T,onClose:w,onOpenById:A,onOpenInOverlay:N}))))),!E&&i.createElement(l.h.Right,{className:"cor-w-panel-l-header__close"},(e=>b?b({className:e.className,iconOpacity:I,onOpen:k,onBack:T,onClose:w,onOpenById:A,onOpenInOverlay:N}):i.createElement(c.y,{className:e.className,onClick:w,"data-test":"cor-w-panel-close"},i.createElement(n.bMz,{className:"cor-w-panel-l-header__fake-icon",style:{opacity:I}}),i.createElement(n.bMz,null))))))}},99128:(e,a,s)=>{"use strict";s.d(a,{v:()=>r});var i=s(49757);const r={slideLeft:{appear:i.Z.slideLeft_state_appear,appearActive:i.Z.slideLeft_state_appearActive,enter:i.Z.slideLeft_state_enter,enterActive:i.Z.slideLeft_state_enterActive,exit:i.Z.slideLeft_state_exitActive,exitActive:i.Z.slideLeft_state_exitActive},slideRight:{appear:i.Z.slideRight_state_appear,appearActive:i.Z.slideRight_state_appearActive,enter:i.Z.slideRight_state_enter,enterActive:i.Z.slideRight_state_enterActive,exit:i.Z.slideRight_state_exitActive,exitActive:i.Z.slideRight_state_exitActive},navigationSlideLeft:{appear:i.Z.navSlideLeft_state_appear,appearActive:i.Z.navSlideLeft_state_appearActive,enter:i.Z.navSlideLeft_state_enter,enterActive:i.Z.navSlideLeft_state_enterActive,exit:i.Z.navSlideLeft_state_exitActive,exitActive:i.Z.navSlideLeft_state_exitActive},navigationSlideRight:{appear:i.Z.navSlideRight_state_appear,appearActive:i.Z.navSlideRight_state_appearActive,enter:i.Z.navSlideRight_state_enter,enterActive:i.Z.navSlideRight_state_enterActive,exit:i.Z.navSlideRight_state_exitActive,exitActive:i.Z.navSlideRight_state_exitActive},navigationSlideBottom:{appear:i.Z.navSlideTop_state_appear,appearActive:i.Z.navSlideTop_state_appearActive,enter:i.Z.navSlideTop_state_enter,enterActive:i.Z.navSlideTop_state_enterActive,exit:i.Z.navSlideTop_state_exitActive,exitActive:i.Z.navSlideTop_state_exitActive},navigationSlideTop:{appear:i.Z.navSlideBottom_state_appear,appearActive:i.Z.navSlideBottom_state_appearActive,enter:i.Z.navSlideBottom_state_enter,enterActive:i.Z.navSlideBottom_state_enterActive,exit:i.Z.navSlideBottom_state_exitActive,exitActive:i.Z.navSlideBottom_state_exitActive},duration:250}},49757:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={slideLeft_state_appear:"_3JUrfN5qJMiI",slideLeft_state_enter:"_3OAGdficKLkm",slideLeft_state_appearActive:"Da5Dtcppeern",slideLeft_state_enterActive:"_3C9roWQ5UvRG",slideLeft_state_exit:"XW8KCxXUyPDr",slideLeft_state_exitActive:"_38hRFnRQ3Oeo",slideRight_state_appear:"_1SED-Cr0Ky7e",slideRight_state_enter:"_2PFvosjYS7SG",slideRight_state_appearActive:"_27q3CG9-zCvc",slideRight_state_enterActive:"_2tAFUEmAE4R2",slideRight_state_exit:"_33xtE0C50yYB",slideRight_state_exitActive:"_2RM-QeLmVYMD",navSlideLeft_state_appear:"_3yPWLFrK6FS0",navSlideLeft_state_enter:"_2Iov2o0eiVlL",navSlideLeft_state_appearActive:"_3ysCasrA-QMn",navSlideLeft_state_enterActive:"Z6GfsajLj8kX",navSlideLeft_state_exit:"sDfw89xiwTU2",navSlideLeft_state_exitActive:"_2COv3qkRY1yp",navSlideRight_state_appear:"vgVbx-rQIR1X",navSlideRight_state_enter:"_3qMZbmbwCKTj",navSlideRight_state_appearActive:"FaiWGaI50VZp",navSlideRight_state_enterActive:"_3YCo_f2m1k_a",navSlideRight_state_exit:"_1Iw-nkpeElvN",navSlideRight_state_exitActive:"_3BZE1jzNtAN6",navSlideTop_state_appear:"_1VrglLash_ic",navSlideTop_state_enter:"_13JrL7fukR7H",navSlideTop_state_appearActive:"iF5P4LGaJB_-",navSlideTop_state_enterActive:"_3GDsJaTNWclD",navSlideTop_state_exit:"_2pNy7P7lDj4y",navSlideTop_state_exitActive:"_6Q7JPAAVmNKI",navSlideBottom_state_appear:"_1xbg4sbefbkJ",navSlideBottom_state_enter:"qsfHyNcIHI28",navSlideBottom_state_appearActive:"_1JndXz_2KKye",navSlideBottom_state_enterActive:"_2AGSTbfusyDJ",navSlideBottom_state_exit:"_15tEgxDb_tIb",navSlideBottom_state_exitActive:"_1NKe7yCZ6lsB"}},92122:(e,a,s)=>{"use strict";s.d(a,{K:()=>PanelService});var i=s(49491),r=s(59312),n=s(60521);class PanelService{constructor(e){let a;this.isOpen=!1,this.prevScopeState={scopeId:null,stackItemsCount:0,activeItemId:null},this.changeStackListeners=[];const s={},i={};if(Object.keys(e).forEach((r=>{let n;if(a||(a=r),e[r].items.forEach((a=>{if(i[a.id])throw new Error('Found duplicate item with id "'.concat(a.id,'" and scope "').concat(i[a.id].scopeId.toString(),'" in scope "').concat(r.toString(),'"'));i[a.id]={scopeId:r,value:a},a.id===e[r].rootId&&(n=a)})),!n)throw new Error('Not found root item with id "'.concat(e[r].rootId,'" in scope ').concat(r.toString()));s[r]={id:r,stack:[n],rootItem:n,get activeItem(){return this.stack.length?this.stack[this.stack.length-1]:void 0}}})),!a)throw new Error("Not found scopes in params");this.scopes=s,this.items=i,this.scope=this.scopes[a]}openById(e,a){var s;const r=this.items[e],n={historyMode:null!==(s=null==a?void 0:a.historyMode)&&void 0!==s?s:"push",returnId:null==a?void 0:a.returnId};return!!r&&(this.changeScope(r.scopeId,{historyMode:n.historyMode,item:i(i({},r.value),{},{returnId:n.returnId})}),this.isOpen=!0,!0)}openByItem(e,a){var s;const r={historyMode:null!==(s=null==a?void 0:a.historyMode)&&void 0!==s?s:"push",returnId:null==a?void 0:a.returnId};this.changeScope(this.scope.id,{historyMode:r.historyMode,item:i(i({},e),{},{returnId:r.returnId})}),this.isOpen=!0}openByScopeId(e){this.changeScope(e),this.isOpen=!0}openLast(){this.isOpen=!0}toggle(e){this.scope.activeItem&&this.scope.activeItem.id===e?this.isOpen=!this.isOpen:this.openById(e)}close(){this.isOpen=!1}reset(){this.scope.stack=[this.scope.rootItem],this.afterScopeUpdate()}back(){this.changeScope(this.scope.id,{historyMode:"back",item:null})}replaceStack(e,a){if(a&&this.scope.id!==a&&this.scopes[a]&&(0,n.set)(this,"scope",this.scopes[a]),e.length){const a=e[0]===this.scope.rootItem.id?[]:[this.scope.rootItem];e.forEach((e=>{const s=this.items[e];s&&a.push(s.value)})),this.scope.stack.splice(0,this.scope.stack.length,...a)}this.afterScopeUpdate()}onStackChange(e){return this.changeStackListeners.push(e),()=>{this.changeStackListeners=this.changeStackListeners.filter((a=>a!==e))}}onOverlayStateChange(e){return(0,n.reaction)((()=>this.isOpen),(a=>{e(a)}))}changeScope(e,a){if(this.scope.id!==e&&this.scopes[e]&&(0,n.set)(this,"scope",this.scopes[e]),a){const e=this.scope.stack.findIndex((e=>{var s;return e.id===(null===(s=a.item)||void 0===s?void 0:s.id)}));if(-1!==e)this.scope.stack.splice(e+1);else switch(a.historyMode){case"push":this.scope.stack.push(a.item);break;case"replace":this.scope.stack.splice(this.scope.stack.length-1,1,a.item);break;case"reset":this.scope.stack.splice(1),this.scope.stack.push(a.item);break;case"back":this.scope.stack.length>1&&this.scope.stack.pop()}}this.afterScopeUpdate()}afterScopeUpdate(){if(!this.shouldPrevScopeStateUpdate())return;let e;e=this.prevScopeState.scopeId!==this.scope.id?"forward":this.scope.stack.length<this.prevScopeState.stackItemsCount?"backward":"forward";const a=this.scope.activeItem?this.scope.activeItem.id:null;this.changeStackListeners.forEach((s=>{s(this.prevScopeState.activeItemId,a,e)})),this.prevScopeState.scopeId=this.scope.id,this.prevScopeState.stackItemsCount=this.scope.stack.length,this.prevScopeState.activeItemId=this.scope.activeItem?this.scope.activeItem.id:null}shouldPrevScopeStateUpdate(){var e;return this.prevScopeState.scopeId!==this.scope.id||this.prevScopeState.stackItemsCount!==this.scope.stack.length||this.prevScopeState.activeItemId!==(null===(e=this.scope.activeItem)||void 0===e?void 0:e.id)}}(0,r.gn)([n.observable],PanelService.prototype,"isOpen",void 0),(0,r.gn)([n.observable],PanelService.prototype,"scope",void 0),(0,r.gn)([n.observable],PanelService.prototype,"scopes",void 0),(0,r.gn)([n.action],PanelService.prototype,"openById",null),(0,r.gn)([n.action],PanelService.prototype,"openByItem",null),(0,r.gn)([n.action],PanelService.prototype,"openByScopeId",null),(0,r.gn)([n.action],PanelService.prototype,"openLast",null),(0,r.gn)([n.action],PanelService.prototype,"toggle",null),(0,r.gn)([n.action],PanelService.prototype,"close",null),(0,r.gn)([n.action],PanelService.prototype,"reset",null),(0,r.gn)([n.action],PanelService.prototype,"back",null),(0,r.gn)([n.action],PanelService.prototype,"replaceStack",null),(0,r.gn)([n.action],PanelService.prototype,"changeScope",null)},74199:(e,a,s)=>{"use strict";s.d(a,{KE:()=>c.s,Ku:()=>i.K,Qe:()=>l.y,V9:()=>o.h,it:()=>d.a,pY:()=>n.D,s_:()=>r.s,zo:()=>d.d});s(53806);var i=s(92122),r=s(41130),n=s(86552),o=s(31998),l=s(57318),c=s(60699),d=s(89365)},23441:(e,a,s)=>{"use strict";function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2?arguments[2]:void 0,i=!1,r=null;function n(){i?r=arguments:(e.apply(this,arguments),i=!0,window.setTimeout((function(){i=!1,r&&(n.apply(s,r),r=null)}),a))}return n}s.d(a,{P:()=>i})},95901:(e,a,s)=>{"use strict";s.d(a,{a:()=>Action});var i=s(27378);class Action extends i.Component{constructor(e){super(e),this.state={processing:!1},this.isMount=!1,this.handleClick=this.handleClick.bind(this)}componentDidMount(){this.isMount=!0}componentWillUnmount(){this.isMount=!1}setStateIfMount(e){this.isMount&&this.setState(e)}handleClick(e){if(e.preventDefault(),this.state.processing)return;this.setState({processing:!0});const a=Date.now();this.props.onClick(e).finally((()=>{const e=Date.now()-a;e<this.props.blockingMinTime?setTimeout((()=>{this.setStateIfMount({processing:!1})}),this.props.blockingMinTime-e):this.setStateIfMount({processing:!1})}))}render(){const e=this.state.processing;return(0,this.props.children)({processing:e,onClick:this.handleClick})}}Action.defaultProps={blockingMinTime:300}},97485:(e,a,s)=>{"use strict";s.d(a,{q:()=>Avatar});var i=s(27378),r=s(60042),n=s(77740);class Image extends i.Component{constructor(e){super(e),this.state={currentUrl:"",status:"loading"},this.handleImageLoad=this.handleImageLoad.bind(this),this.handleImageErrorLoad=this.handleImageErrorLoad.bind(this),this.notifyStatusChange=this.notifyStatusChange.bind(this)}static getDerivedStateFromProps(e,a){return a&&a.currentUrl===e.url?a:(e.onStatusChange&&e.onStatusChange("loading"),{currentUrl:e.url,status:"loading"})}handleImageLoad(){this.setState((()=>({status:"loaded"})),this.notifyStatusChange)}handleImageErrorLoad(){this.setState((()=>({status:"failed"})),this.notifyStatusChange)}notifyStatusChange(){this.props.onStatusChange&&this.props.onStatusChange(this.state.status)}render(){const e=this.state,a=e.currentUrl,s=e.status,n=this.props,o=n.className,l=n.hostRef;return i.createElement("img",{className:r("pro-c-image","pro-c-image_".concat(s),o),onLoad:this.handleImageLoad,onError:this.handleImageErrorLoad,src:a,alt:"",ref:l})}}class Avatar extends i.Component{constructor(e){super(e),this.state={imageStatus:"loading",contentType:"placeholder"},this.handleClick=()=>{var e,a;null===(a=(e=this.props).handleClick)||void 0===a||a.call(e)},this.handleImageStatusChange=this.handleImageStatusChange.bind(this)}static getDerivedStateFromProps(e,a){let s=e.avatarUrl,i=e.firstName,r=e.middleName,n="placeholder";return s?n="avatar":""===i.trim()&&""===r.trim()||(n="initials"),{contentType:n,imageStatus:a.imageStatus}}static createInitials(e,a){return"".concat(e.trim().charAt(0)).concat(a.trim().charAt(0))}handleImageStatusChange(e){this.setState((()=>({imageStatus:e})))}render(){const e=this.props,a=e.firstName,s=e.middleName,o=e.avatarUrl,l=e.size,c=e.type,d=e.className,u=this.state,m=u.imageStatus;let p;switch(u.contentType){case"avatar":case"initials":p=i.createElement(i.Fragment,null,i.createElement("div",{className:r("pro-c-avatar__initials",(!o||"loaded"!==m)&&"pro-c-avatar__initials_visible")},Avatar.createInitials(a,s)),o&&i.createElement(Image,{url:o,className:"pro-c-avatar__image",onStatusChange:this.handleImageStatusChange}));break;case"placeholder":p=i.createElement(n.f7T,{className:"pro-c-avatar__placeholder"})}return i.createElement("div",{className:r("pro-c-avatar",l&&"pro-c-avatar_size_".concat(l),"pro-c-avatar_type_".concat(c),d),onClick:this.handleClick},i.createElement("div",{className:"pro-c-avatar__content"},p))}}Avatar.defaultProps={type:"rectangle"}},26225:(e,a,s)=>{"use strict";s.d(a,{s:()=>PhoneInput});var i=s(49491),r=s(14936),n=s(27378),o=s(17302),l=s(60042),c=s(36732);var d=s.e(9291).then(s.t.bind(s,19291,17));const u=e=>{const a=e.size||"small",s=(0,c.aN)(d);return n.createElement("span",{className:l("pro-c-flag","pro-c-flag_size_".concat(a),e.className)},n.createElement("span",{className:"pro-c-flag__inner pro-c-flag_".concat(e.code),style:{backgroundImage:"url(".concat(s,")")}}))},m={1:"us",7:"ru",20:"eg",27:"za",30:"gr",31:"nl",32:"be",33:"fr",34:"es",36:"hu",39:"va",40:"ro",41:"ch",43:"at",44:"gb",45:"dk",46:"se",47:"no",48:"pl",49:"de",51:"pe",52:"mx",53:"cu",54:"ar",55:"br",56:"cl",57:"co",58:"ve",60:"my",61:"au",62:"id",63:"ph",64:"nz",65:"sg",66:"th",81:"jp",82:"kr",84:"vn",86:"cn",90:"tr",91:"in",92:"pk",93:"af",94:"lk",95:"mm",98:"ir",211:"ss",212:"ma",213:"dz",216:"tn",218:"ly",220:"gm",221:"sn",222:"mr",223:"ml",224:"gn",225:"ci",226:"bf",227:"ne",228:"tg",229:"bj",230:"mu",231:"lr",232:"sl",233:"gh",234:"ng",235:"td",236:"cf",237:"cm",238:"cv",239:"st",240:"gq",241:"ga",242:"cg",243:"cd",244:"ao",245:"gw",246:"io",248:"sc",249:"sd",250:"rw",251:"et",252:"so",253:"dj",254:"ke",255:"tz",256:"ug",257:"bi",258:"mz",260:"zm",261:"mg",262:"re",263:"zw",264:"na",265:"mw",266:"ls",267:"bw",268:"sz",269:"km",290:"sh",291:"er",297:"aw",298:"fo",299:"gl",350:"gi",351:"pt",352:"lu",353:"ie",354:"is",355:"al",356:"mt",357:"cy",358:"fi",359:"bg",370:"lt",371:"lv",372:"ee",373:"md",374:"am",375:"by",376:"ad",377:"mc",378:"sm",380:"ua",381:"rs",382:"me",383:"xk",385:"hr",386:"si",387:"ba",389:"mk",420:"cz",421:"sk",423:"li",500:"fk",501:"bz",502:"gt",503:"sv",504:"hn",505:"ni",506:"cr",507:"pa",508:"pm",509:"ht",590:"mf",591:"bo",592:"gy",593:"ec",594:"gf",595:"py",596:"mq",597:"sr",598:"uy",599:"cw",670:"tl",672:"nf",673:"bn",674:"nr",675:"pg",676:"to",677:"sb",678:"vu",679:"fj",680:"pw",681:"wf",682:"ck",683:"nu",685:"ws",686:"ki",687:"nc",688:"tv",689:"pf",690:"tk",691:"fm",692:"mh",850:"kp",852:"hk",853:"mo",855:"kh",856:"la",880:"bd",886:"tw",960:"mv",961:"lb",962:"jo",963:"sy",964:"iq",965:"kw",966:"sa",967:"ye",968:"om",970:"ps",971:"ae",972:"il",973:"bh",974:"qa",975:"bt",976:"mn",977:"np",992:"tj",993:"tm",994:"az",995:"ge",996:"kg",998:"uz",1201:"us",1202:"us",1203:"us",1204:"ca",1205:"us",1206:"us",1207:"us",1208:"us",1209:"us",1210:"us",1212:"us",1213:"us",1214:"us",1215:"us",1216:"us",1217:"us",1218:"us",1219:"us",1225:"us",1226:"ca",1228:"us",1229:"us",1231:"us",1236:"ca",1239:"us",1242:"bs",1246:"bb",1248:"us",1249:"ca",1250:"ca",1251:"us",1252:"us",1253:"us",1254:"us",1256:"us",1260:"us",1262:"us",1264:"ai",1268:"ag",1269:"us",1270:"us",1276:"us",1281:"us",1284:"vg",1289:"ca",1301:"us",1302:"us",1303:"us",1304:"us",1305:"us",1306:"ca",1307:"us",1308:"us",1309:"us",1310:"us",1312:"us",1313:"us",1314:"us",1315:"us",1316:"us",1317:"us",1318:"us",1319:"us",1320:"us",1321:"us",1323:"us",1325:"us",1330:"us",1334:"us",1336:"us",1337:"us",1340:"vi",1343:"ca",1345:"ky",1352:"us",1360:"us",1361:"us",1365:"ca",1386:"us",1387:"ca",1401:"us",1402:"us",1403:"ca",1404:"us",1405:"us",1406:"us",1407:"us",1408:"us",1409:"us",1410:"us",1412:"us",1413:"us",1414:"us",1415:"us",1416:"ca",1417:"us",1418:"ca",1419:"us",1423:"us",1425:"us",1431:"ca",1432:"us",1434:"us",1435:"us",1437:"ca",1438:"ca",1440:"us",1441:"bm",1450:"ca",1473:"gd",1478:"us",1479:"us",1480:"us",1501:"us",1502:"us",1503:"us",1504:"us",1505:"us",1506:"ca",1507:"us",1508:"us",1509:"us",1510:"us",1512:"us",1513:"us",1514:"ca",1515:"us",1516:"us",1517:"us",1518:"us",1519:"ca",1520:"us",1530:"us",1540:"us",1541:"us",1548:"ca",1559:"us",1561:"us",1562:"us",1563:"us",1570:"us",1573:"us",1574:"us",1575:"us",1579:"ca",1580:"us",1581:"ca",1585:"us",1586:"us",1587:"ca",1601:"us",1602:"us",1603:"us",1604:"ca",1605:"us",1606:"us",1607:"us",1608:"us",1609:"us",1610:"us",1612:"us",1613:"ca",1614:"us",1615:"us",1616:"us",1617:"us",1618:"us",1619:"us",1620:"us",1623:"us",1626:"us",1630:"us",1631:"us",1636:"us",1639:"ca",1641:"us",1647:"ca",1649:"tc",1650:"us",1651:"us",1660:"us",1661:"us",1662:"us",1664:"ms",1670:"mp",1671:"gu",1672:"ca",1684:"as",1701:"us",1702:"us",1703:"us",1704:"us",1705:"ca",1706:"us",1707:"us",1708:"us",1709:"ca",1712:"us",1713:"us",1714:"us",1715:"us",1716:"us",1717:"us",1718:"us",1719:"us",1721:"sx",1724:"us",1727:"us",1731:"us",1732:"us",1734:"us",1740:"us",1742:"ca",1757:"us",1758:"lc",1760:"us",1763:"us",1765:"us",1767:"dm",1770:"us",1772:"us",1773:"us",1775:"us",1778:"ca",1780:"ca",1781:"us",1782:"ca",1784:"vc",1785:"us",1787:"pr",1801:"us",1802:"us",1803:"us",1804:"us",1805:"us",1806:"us",1807:"ca",1808:"us",1809:"do",1810:"us",1812:"us",1813:"us",1814:"us",1815:"us",1816:"us",1817:"us",1818:"us",1819:"ca",1825:"ca",1828:"us",1829:"do",1830:"us",1831:"us",1843:"us",1845:"us",1847:"us",1849:"do",1850:"us",1856:"us",1858:"us",1859:"us",1860:"us",1863:"us",1864:"us",1865:"us",1867:"ca",1868:"tt",1869:"kn",1870:"us",1873:"ca",1876:"jm",1901:"us",1902:"ca",1903:"us",1904:"us",1905:"ca",1906:"us",1907:"us",1908:"us",1909:"us",1910:"us",1912:"us",1913:"us",1914:"us",1915:"us",1916:"us",1918:"us",1919:"us",1920:"us",1925:"us",1928:"us",1931:"us",1936:"us",1937:"us",1939:"pr",1940:"us",1941:"us",1949:"us",1951:"us",1952:"us",1954:"us",1956:"us",1970:"us",1972:"us",1973:"us",1978:"us",1979:"us",1985:"us",1989:"us",7310:"kz",7311:"kz",7312:"kz",7313:"kz",7315:"kz",7318:"kz",7321:"kz",7324:"kz",7325:"kz",7326:"kz",7327:"kz",7336:"kz",77172:"kz",773622:"kz"},p=["onChange","excludeCountries"];class PhoneInput extends n.Component{constructor(e){super(e),this.state={},this.excludeCountriesMap={},this.handleChange=this.handleChange.bind(this)}static formatValue(e){return(e=(e=e&&"".concat(e).trim()||"").replace(/\D/g,"")).startsWith("+")?e.length>1?e:"":e.length>0?"+".concat(e):""}static normalizeValue(e){return e.trim().replace("+","")}componentDidMount(){const e=this.props,a=e.value,s=e.excludeCountries;this.updateCountriesMap(s),this.updateCode(a);const i=PhoneInput.formatValue(this.props.value);i!==this.props.value&&this.props.onChange(i)}componentDidUpdate(e){const a=this.props,s=a.excludeCountries,i=a.value;e.excludeCountries!==s&&(this.updateCountriesMap(this.props.excludeCountries),this.updateCode(i))}handleChange(e){let a=e.currentTarget.value;const s=PhoneInput.formatValue(a);s!==this.props.value&&(this.updateCode(s),this.props.onChange(s))}updateCode(e){let a,s;for(let i=(e=PhoneInput.normalizeValue("".concat(e))).length>=6?6:e.length;i>0;i-=1)if(s=e.substring(0,i),m[s]){a=m[s];break}a&&this.excludeCountriesMap[a]&&(a=void 0),this.setState({code:a})}updateCountriesMap(e){this.excludeCountriesMap=(e||[]).reduce(((e,a)=>(e[a]=!0,e)),{})}render(){const e=this.state.code,a=this.props,s=(a.onChange,a.excludeCountries,r(a,p));return n.createElement(o.nv,i(i({},s),{},{onChange:this.handleChange,endIcon:e&&n.createElement("span",{className:"pro-c-phone-input-icon"},n.createElement(u,{code:e,size:"small"}))}))}}},62012:(e,a,s)=>{"use strict";s.d(a,{d:()=>c});var i=s(27378),r=s(60042),n=s(17302),o=s(82844),l=s(95901);const c=e=>{let a=e.serverTime,s=e.resendAt,c=e.blocked,d=e.className,u=e.onClick;return a<s?i.createElement("span",{className:r("pro-c-resend-code",d)},i.createElement(o._,{id:"pro_settings_resend_code_timer",defaultMessage:"Resend code in {time}",values:{time:i.createElement(n.Wo,{serverTime:a,startTime:s,timeFormat:"m:s"})}})):i.createElement(l.a,{onClick:u},(e=>{let a=e.onClick,s=e.processing;return i.createElement(n.Xd,{"data-test":"pro-c-b-resend",className:r("pro-c-resend-code","pro-c-resend-code_state_ready",d),onClick:a},c||s?i.createElement(n.$j,null):i.createElement(o._,{id:"pro_settings_resend_code",defaultMessage:"Resend code"}))}))}},53660:(e,a,s)=>{"use strict";s.d(a,{q:()=>o});var i=s(27378),r=s(60042),n=s(77740);const o=e=>e.isChecked?i.createElement(n.NOm,{className:r("pro-c-status pro-c-status_checked",e.className)}):i.createElement(n.az_,{className:r("pro-c-status pro-c-status_failed",e.className)})},86321:(e,a,s)=>{"use strict";s.d(a,{Bl:()=>o.F2,H3:()=>E.H,Kf:()=>f.m,Km:()=>A.R,LJ:()=>k.L,Q0:()=>N.r,Tl:()=>d.f,Wc:()=>L.u,aR:()=>p.nE,aW:()=>h.$7,dV:()=>p.I_,df:()=>S.d,dh:()=>l.A,e1:()=>g._,fQ:()=>k.Z,fn:()=>r.l,hC:()=>w.R,id:()=>D.L,l9:()=>v.A,ms:()=>u.Ak,o:()=>u.ho,oV:()=>O.q,pF:()=>m._b,qc:()=>T.Z,rU:()=>I.g,rc:()=>c.Af,s$:()=>h.rM,sb:()=>y.s,tE:()=>b.f,tT:()=>n.B,uZ:()=>i.N,u_:()=>_.u,xd:()=>m.tR,xp:()=>R.m,y4:()=>M.G,z5:()=>C.k});s(34939);var i=s(45060),r=s(6460),n=s(94067),o=s(43545),l=s(29077),c=s(31602),d=s(64461),u=s(82382),m=s(34633),p=s(5278),h=s(26554),v=s(12981),g=s(52155),_=s(88632),f=s(59765),E=s(43623),S=s(62012),y=s(26225),b=s(77931),C=s(70232),T=s(27070),A=s(52461),k=s(72181),w=s(16608),N=s(65691),R=s(8694),I=s(61479),D=s(28579),O=s(68694),L=s(64595),M=s(32239)},12981:(e,a,s)=>{"use strict";s.d(a,{A:()=>Layout});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(29609);const c=["content","className","animationOnEnter","animationOnClose","onClose"];class Layout extends n.Component{constructor(){super(...arguments),this.contentRef=n.createRef()}componentWillUnmount(){const e=this.props.animationOnClose;e&&this.contentRef.current&&e.execute(this.contentRef.current)}render(){const e=this.props,a=e.content,s=e.className,d=e.animationOnEnter,u=(e.animationOnClose,e.onClose),m=r(e,c);return n.createElement("div",i({className:o("pro-m-layout",s)},m),n.createElement("div",{className:"pro-m-layout__content","data-test":"pro-m-layout-content"},n.createElement(l.Z,{in:!0,appear:!0,classNames:{appear:"pro-m-layout__content_animate_".concat(d,"_enter"),appearActive:"pro-m-layout__content_animate_".concat(d,"_enter-active")},timeout:250},n.createElement("div",{className:"pro-m-layout__content-wrapper",ref:this.contentRef},n.createElement(a,{onClose:u})))),n.createElement(l.Z,{in:!0,appear:!0,classNames:{appear:"pro-m-layout__overlay_animate_enter",appearActive:"pro-m-layout__overlay_animate_enter-active"},timeout:250},n.createElement("div",{className:"pro-m-layout__overlay",onClick:u})))}}Layout.defaultProps={animationOnEnter:"scale"}},52155:(e,a,s)=>{"use strict";s.d(a,{_:()=>ScaleToTargetAnimation});class ScaleToTargetAnimation{constructor(e){this.settings=e}execute(e){const a=document.querySelector(this.settings.targetCSSSelector);if(!a)return;const s=a.cloneNode(!0),i=a.getBoundingClientRect(),r=e.getBoundingClientRect(),n=e.cloneNode(!0),o=document.createElement("div");o.appendChild(n),o.appendChild(s);const l=.6*this.settings.duration;Object.assign(o.style,{position:"fixed",top:"0px",left:"0px",width:"".concat(r.width,"px"),height:"".concat(r.height,"px"),transform:"translate(".concat(r.left,"px, ").concat(r.top,"px)"),clipPath:"inset(0 0 0 0)",overflow:"hidden",transition:"transform ".concat(this.settings.duration,"ms ease-in-out, clip-path ").concat(this.settings.duration,"ms ease-in-out"),zIndex:1e4}),Object.assign(n.style,{transform:"scale(1, 1)",transformOrigin:"0 0",opacity:1,transition:"transform ".concat(this.settings.duration,"ms ease-in-out, opacity ").concat(2*l,"ms ease-in-out")});const c=r.width/i.width;Object.assign(s.style,{position:"absolute",top:0,left:0,width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),transform:"scale(".concat(c,", ").concat(c,")"),transformOrigin:"0 0",opacity:0,transition:"transform ".concat(this.settings.duration,"ms ease-in-out, opacity ").concat(this.settings.duration-l,"ms ").concat(l,"ms ease-in-out")}),document.body.appendChild(o),o.offsetHeight;const d=100-Math.floor(100*i.height/r.height);Object.assign(o.style,{clipPath:"inset(0 0 ".concat(d,"% 0)"),transform:"translate(".concat(i.left,"px, ").concat(i.top,"px)")});const u=i.width/r.width;Object.assign(n.style,{opacity:0,transform:"scale(".concat(u,", ").concat(u,")")}),Object.assign(s.style,{opacity:1,transform:"scale(1, 1)"}),setTimeout((()=>{document.body.removeChild(o)}),this.settings.duration)}}},88632:(e,a,s)=>{"use strict";s.d(a,{u:()=>l});var i=s(27378),r=s(60042),n=s(17302),o=s(77740);const l=e=>{let a=e.children,s=e.size,n=e.className;return i.createElement("div",{className:r("pro-m-c-modal","pro-m-c-modal_size_".concat(s||"content"),n)},a)};l.Block=e=>{let a=e.children,s=e.overflow,o=e.type,l=e.className;return i.createElement(n.Xs,{className:r("pro-m-c-modal__block-scroll"),style:{overflowY:s}},i.createElement("div",{className:r("pro-m-c-modal__block-content",o&&"pro-m-c-modal__block-content_".concat(o),l)},a))},l.Close=e=>{let a=e.className,s=e.type,l=void 0===s?"rect":s,c=e.onClick;return i.createElement(n.Xd,{className:r("pro-m-c-modal__close",l&&"pro-m-c-modal__close_type_".concat(l),a),onClick:c,"data-test":"pro-m-c-modal-close"},i.createElement(o.bMz,null))}},59765:(e,a,s)=>{"use strict";s.d(a,{m:()=>TradingLimits});var i=s(27378),r=s(60042),n=s(82844),o=s(88632);class TradingLimits extends i.Component{render(){const e=this.props,a=e.className,s=e.onCloseClick,l=e.renderContent;return i.createElement(o.u,{className:r("pro-m-trading-limits",a),size:"content"},i.createElement(o.u.Close,{onClick:s}),i.createElement(o.u.Block,{className:"pro-m-trading-limits__block",type:"centered"},i.createElement("h2",{className:"pro-m-trading-limits__title"},i.createElement(n._,{id:"pro_settings_trading_limits",defaultMessage:"Trading limits"})),l({className:"pro-m-trading-limits__content"})))}}},32239:(e,a,s)=>{"use strict";s.d(a,{G:()=>v});var i,r=s(47014),n=s(49491),o=s(59312),l=s(27378),c=s(50649),d=s(60042),u=s(82844),m=s(18985),p=s(17302),h=s(95901);class Strength extends l.Component{constructor(e){super(e),this.state=Strength.computeState(e.password,e.minPasswordLength),e.onStatusChange&&e.onStatusChange(this.state.status)}static getDerivedStateFromProps(e,a){const s=Strength.computeState(e.password,e.minPasswordLength);return e.onStatusChange&&s.status!==a.status&&e.onStatusChange(s.status),s}static computeState(e,a){let s=0;const i={};for(let a=0;a<e.length;a++)i[e[a]]=(i[e[a]]||0)+1,s+=5.5/i[e[a]];const r={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),minLength:e.length>=a};let n,o,l=0,c=!0;for(const e in r)n=r[e],n||(c=!1),"minLength"!==e&&(l+=n?1:0);return s+=10*(l-1),s=s>100?100:Math.floor(s),o=s>85?"high":s>50?"medium":"low",{level:o,variations:r,status:c?"ready":"processing",progress:s}}render(){const e=this.props.className,a=this.state,s=a.level,i=a.progress;return l.createElement("div",{className:d("pro-p-change-password-c-strength","pro-p-change-password-c-strength_state_".concat(s),e)},l.createElement("div",{className:"pro-p-change-password-c-strength__info"},l.createElement("span",{className:"pro-p-change-password-c-strength__title"},l.createElement(u._,{id:"pro_change_password_strength_title",defaultMessage:"Password strength"})),s&&l.createElement("span",{className:"pro-p-change-password-c-strength__level"},l.createElement(u._,n({},Strength.MESSAGES[s])))),l.createElement(p.uk,{value:i,variant:"round",size:"medium",className:"pro-p-change-password-c-strength__progress"}))}}Strength.MESSAGES=(0,m.vU)({low:{id:"pro_change_password_strength_low",defaultMessage:"Weak"},medium:{id:"pro_change_password_strength_medium",defaultMessage:"Medium"},high:{id:"pro_change_password_strength_high",defaultMessage:"Strong"},password_length:{id:"pro_change_password_strength_character_count",defaultMessage:"At least {count} characters"},password_case:{id:"pro_change_password_strength_letter_case",defaultMessage:"Upper and lower case letters"},password_number:{id:"pro_change_password_strength_no_number",defaultMessage:"At least 1 number"}}),Strength.LEVEL={LOW:"low",MEDIUM:"medium",HIGH:"high"},Strength.SUB_LEVEL={NULL:null,FIRST:1,SECOND:2,THIRD:3};let v=i=class ChangePassword extends l.Component{constructor(e){super(e),this.inputRefs={oldPassword:l.createRef(),newPassword:l.createRef(),newPasswordRepeat:l.createRef()},this.state={fields:{oldPassword:"",newPassword:"",newPasswordRepeat:""},errors:{},isBlocked:!0},this.handleChange=this.handleChange.bind(this),this.handleSaveClick=this.handleSaveClick.bind(this),this.handleBlur=this.handleBlur.bind(this)}componentDidMount(){setTimeout((()=>{const e=this.inputRefs.oldPassword;e.current&&e.current.focus()}),300)}checkIsBlocked(){const e=this.state.fields;this.setState((()=>({isBlocked:""===e.oldPassword||""===e.newPassword||""===e.newPasswordRepeat})))}handleBlur(e){const a=e.currentTarget.name;this.validate(a)}handleChange(e){const a=e.currentTarget,s=a.name,i=a.value;s in this.state.fields&&this.setState((()=>({fields:n(n({},this.state.fields),{},{[s]:i.trim()})})),(()=>{this.checkIsBlocked(),this.validate(s)}))}validate(e){const a=this.state,s=a.fields,r=a.errors,o=n({},r);let c=!0;return"oldPassword"===e&&(o[e]=void 0),""!==s.newPassword&&""!==s.oldPassword&&s.newPassword===s.oldPassword?(o.newPassword=l.createElement(u._,n({},i.MESSAGES.error_must_be_different)),c=!1):o.newPassword=void 0,""!==s.newPasswordRepeat&&""!==s.newPassword&&s.newPasswordRepeat!==s.newPassword?(o.newPasswordRepeat=l.createElement(u._,n({},i.MESSAGES.error_password_repeat)),c=!1):o.newPasswordRepeat=void 0,this.setState((()=>({errors:o}))),c}handleSaveClick(){var e=this;return r((function*(){try{const a=e.props.profileService,s=e.state.fields,i=s.oldPassword,r=s.newPassword;if(Object.keys(e.state.fields).some((a=>!e.validate(a))))return;const o=yield a.updatePassword(i,r);if(!o)return void e.props.onFinish();const l=n({},e.state);let c;"validation"===o.type&&o.field in e.state.fields?(l.errors=n(n({},e.state.errors),{},{[o.field]:o.message}),c=o.field):(l.errors=n(n({},e.state.errors),{},{oldPassword:o.message}),c="oldPassword");const d=e.inputRefs[c];d.current&&d.current.focus(),e.setState(l)}catch(e){console.error(e)}}))()}render(){const e=this.props.className,a=this.state,s=a.fields,r=a.errors,n=a.isBlocked;return l.createElement("div",{className:d("pro-p-change-password",e)},l.createElement("form",{className:"pro-p-change-password__form"},l.createElement("div",{className:"pro-p-change-password__field-group"},l.createElement(p.nv,{name:"oldPassword",value:s.oldPassword,error:r.oldPassword,type:"password",label:l.createElement(u._,{id:"pro_change_password_old_password",defaultMessage:"Old Password"}),onChange:this.handleChange,className:"pro-p-change-password__field","data-test":"pro-p-change-password-i-old-password",inputRef:this.inputRefs.oldPassword}),l.createElement(p.nv,{name:"newPassword",value:s.newPassword,error:r.newPassword,type:"password",label:l.createElement(u._,{id:"pro_change_password_new_password",defaultMessage:"New Password"}),onChange:this.handleChange,className:"pro-p-change-password__field","data-test":"pro-p-change-password-i-new-password",inputRef:this.inputRefs.newPassword}),l.createElement(p.nv,{name:"newPasswordRepeat",value:s.newPasswordRepeat,error:r.newPasswordRepeat,type:"password",label:l.createElement(u._,{id:"pro_change_password_new_password_repeat",defaultMessage:"Confirm New Password"}),onChange:this.handleChange,onBlur:this.handleBlur,className:"pro-p-change-password__field","data-test":"pro-p-change-password-i-new-password-repeat",inputRef:this.inputRefs.newPasswordRepeat})),l.createElement(Strength,{password:s.newPassword,minPasswordLength:i.MIN_PASSWORD_LENGTH,className:"pro-p-change-password__strength"}),l.createElement(h.a,{onClick:this.handleSaveClick},(e=>{let a=e.onClick,s=e.processing;return l.createElement(p.zx,{type:"submit",fullWidth:!0,onClick:a,loading:s,disabled:n,dataTest:"pro-p-change-password-b-submit"},l.createElement(u._,{id:"pro_change_password_save",defaultMessage:"Change password"}))}))))}};v.MIN_PASSWORD_LENGTH=6,v.MESSAGES=(0,m.vU)({error_password_repeat:{id:"pro_change_password_error_repeat",defaultMessage:"The password you re-entered does not match"},error_must_be_different:{id:"pro_change_password_error_must_be_different",defaultMessage:"Password must be different from the old password"}}),v=i=(0,o.gn)([c.observer],v)},26554:(e,a,s)=>{"use strict";s.d(a,{$7:()=>o,rM:()=>n});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{id:"pro_change_password",defaultMessage:"Change password"}),o=()=>i.createElement(r._,{id:"pro_change_password_changed",defaultMessage:"Password successfully changed"})},68694:(e,a,s)=>{"use strict";s.d(a,{q:()=>g});var i=s(47014),r=s(49491),n=s(59312),o=s(27378),l=s(60521),c=s(50649),d=s(73598),u=s(60042),m=s(17302),p=s(82844),h=s(62012),v=s(95901);let g=class EditEmail extends o.Component{constructor(e){super(e),this.inputRefs={email:o.createRef(),code:o.createRef()},this.state={fields:{email:e.profileService.email.value,code:""},errors:{},step:"enter_email"},this.handleChange=this.handleChange.bind(this),this.handleRequestClick=this.handleRequestClick.bind(this),this.handleConfirmClick=this.handleConfirmClick.bind(this),this.handleResendClick=this.handleResendClick.bind(this),this.handleConfirmedByExternalSource=this.handleConfirmedByExternalSource.bind(this)}get activeField(){return"enter_email"===this.state.step?"email":"code"}get activeRef(){return this.inputRefs[this.activeField]}componentDidMount(){(0,c.disposeOnUnmount)(this,(0,l.when)((()=>"external"===this.props.profileService.email.confirmedBy),this.handleConfirmedByExternalSource))}handleChange(e){const a=e.currentTarget,s=a.name,i=a.value;s in this.state.fields&&this.setState({fields:r(r({},this.state.fields),{},{[s]:i.trim()})})}resetErrors(){this.setState({errors:{}})}requestCode(){var e=this;return i((function*(){try{const a=e.props.profileService;e.resetErrors();const s=yield a.requestConfirmEmail(),i=r({},e.state);switch(s.type){case"error":i.errors=r(r({},e.state.errors),{},{[e.activeField]:s.error.message}),"throttling"===s.error.type?i.repeatedAt=s.error.expired:e.activeRef.current&&e.activeRef.current.focus();break;case"success":i.repeatedAt=s.data.newCodeAfter,i.step="enter_code",e.inputRefs.code.current&&e.inputRefs.code.current.focus()}e.setState(i)}catch(e){console.error(e)}}))()}handleConfirmClick(){var e=this;return i((function*(){try{const a=e.props,s=a.profileService,i=a.onConfirmClick,n=e.state.fields.code;null==i||i(),e.resetErrors();const o=yield s.confirmEmail(n);if(!o)return void e.props.onFinish("self");const l=r({},e.state);l.errors=r(r({},e.state.errors),{},{code:o.message}),"throttling"===o.type?l.repeatedAt=o.expired:e.activeRef.current&&e.activeRef.current.focus(),e.setState(l)}catch(e){console.error(e)}}))()}handleRequestClick(){var e=this;return i((function*(){const a=e.props.onRequestCodeClick;null==a||a(),yield e.requestCode()}))()}handleResendClick(){var e=this;return i((function*(){const a=e.props.onResendCodeClick;null==a||a(),yield e.requestCode()}))()}handleConfirmedByExternalSource(){this.props.onFinish("external")}render(){const e=this.props,a=e.timeService,s=e.className,i=this.state,r=i.fields,n=i.errors,l=i.step,c=i.repeatedAt;return o.createElement("div",{className:u("pro-p-edit-email",s)},o.createElement("form",{className:"pro-p-edit-email__form"},o.createElement("div",{className:"pro-p-edit-email__email"},o.createElement("span",{className:"pro-p-edit-email__email-label"},o.createElement(p._,{id:"pro_email",defaultMessage:"Email"})),o.createElement("span",{className:"pro-p-edit-email__email-value"},r.email),n.email&&o.createElement("span",{className:"pro-p-edit-email__email-error"},n.email)),o.createElement("div",{className:u("pro-p-edit-email__code","enter_code"===l&&"pro-p-edit-email__code_showed")},o.createElement("span",{className:"pro-p-edit-email__description"},o.createElement(p._,{id:"pro_edit_email_enter_code_description",defaultMessage:"In a few moments you'll receive a confirmation e-mail from us. Please check your inbox and either click on the link or enter the code provided."})),o.createElement(m.nv,{name:"code",value:r.code,error:n.code,type:"text",label:o.createElement(p._,{id:"pro_settings_email_code",defaultMessage:"Email Code"}),onChange:this.handleChange,className:"pro-p-edit-email__input","data-test":"pro-p-edit-email-i-code",inputRef:this.inputRefs.code})),"enter_email"===l?o.createElement(v.a,{onClick:this.handleRequestClick},(e=>{let s=e.onClick,i=e.processing;return o.createElement(d.Qj,null,(()=>c&&a.serverTime<=c?o.createElement(m.zx,{fullWidth:!0,loading:!1,disabled:!0,onClick:s},o.createElement(p._,{id:"pro_settings_resend_code_timer",defaultMessage:"Resend code in {time}",values:{time:o.createElement(m.Wo,{serverTime:a.serverTime,startTime:c,timeFormat:"m:s"})}})):o.createElement(m.zx,{type:"submit",onClick:s,fullWidth:!0,disabled:0===r.email.length,loading:i,dataTest:"pro-p-edit-email-b-request-confirm"},o.createElement(p._,{id:"pro_continue",defaultMessage:"Continue"}))))})):o.createElement(o.Fragment,null,o.createElement(v.a,{onClick:this.handleConfirmClick},(e=>{let a=e.onClick,s=e.processing;return o.createElement(m.zx,{type:"submit",fullWidth:!0,onClick:a,loading:s,dataTest:"pro-p-edit-email-b-confirm"},o.createElement(p._,{id:"pro_settings_confirm",defaultMessage:"Confirm"}))})))),c&&"enter_code"===l&&o.createElement(d.Qj,null,(()=>o.createElement(h.d,{serverTime:a.serverTime,resendAt:c,className:"pro-p-edit-email__resend",onClick:this.handleResendClick}))))}};g=(0,n.gn)([c.observer],g)},34633:(e,a,s)=>{"use strict";s.d(a,{_b:()=>n,tR:()=>o});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{"data-test":"profile-settings-personal-email-title",id:"pro_settings_security_level_email",defaultMessage:"Confirm email"}),o=()=>i.createElement(r._,{id:"pro_edit_email_confirmed",defaultMessage:"E-mail address confirmed"})},28579:(e,a,s)=>{"use strict";s.d(a,{L:()=>p});var i=s(47014),r=s(49491),n=s(59312),o=s(27378),l=s(50649),c=s(60042),d=s(17302),u=s(82844),m=s(95901);let p=class EditName extends o.Component{constructor(e){super(e),this.ref=o.createRef(),this.state={fields:{firstName:e.profileService.fullName.firstName},errors:{}},this.handleChange=this.handleChange.bind(this),this.handleSaveClick=this.handleSaveClick.bind(this)}componentDidMount(){setTimeout((()=>{this.ref.current&&this.ref.current.focus()}),300)}handleChange(e){const a=e.currentTarget,s=a.name,i=a.value;s in this.state.fields&&this.setState({fields:r(r({},this.state.fields),{},{[s]:i})})}validate(e){const a=r({},this.state.errors);if("firstName"===e)a[e]=void 0;return this.setState(r(r({},this.state),{},{errors:a})),!0}handleSaveClick(){var e=this;return i((function*(){try{const a=e.props.profileService,s=e.state.fields.firstName;if(Object.keys(e.state.fields).some((a=>!e.validate(a))))return;const i=yield a.updateFullName(r(r({},a.fullName),{},{firstName:s}));if(!i)return void e.props.onFinish();i&&(e.setState(r(r({},e.state),{},{errors:r(r({},e.state.errors),{},{firstName:i.message})})),e.ref.current&&e.ref.current.focus())}catch(e){console.error(e)}}))()}render(){const e=this.props.className,a=this.state,s=a.fields,i=a.errors;return o.createElement("div",{className:c("pro-p-edit-name",e)},o.createElement("form",{className:"pro-p-edit-name__form"},o.createElement(d.nv,{name:"firstName",value:s.firstName,error:i.firstName,type:"text",label:o.createElement(u._,{id:"pro_settings_name",defaultMessage:"Name"}),onChange:this.handleChange,className:"pro-p-edit-name__input","data-test":"pro-p-edit-email-i-first-name",inputRef:this.ref}),o.createElement(m.a,{onClick:this.handleSaveClick},(e=>{let a=e.onClick,s=e.processing;return o.createElement(d.zx,{fullWidth:!0,type:"submit",onClick:a,loading:s,dataTest:"pro-p-edit-email-b-submit"},o.createElement(u._,{id:"pro_edit_name_save",defaultMessage:"Save name"}))}))))}};p=(0,n.gn)([l.observer],p)},82382:(e,a,s)=>{"use strict";s.d(a,{Ak:()=>n,ho:()=>o});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{id:"pro_edit_name",defaultMessage:"Edit name"}),o=()=>i.createElement(r._,{id:"pro_edit_name_changed",defaultMessage:"Name changed"})},64595:(e,a,s)=>{"use strict";s.d(a,{u:()=>g});var i=s(47014),r=s(49491),n=s(2243),o=s(27378),l=s(50649),c=s(73598),d=s(60042),u=s(17302),m=s(82844),p=s(62012),h=s(26225),v=s(95901);const g=(0,l.observer)((e=>{let a=e.className,s=e.onResendCodeClick,l=e.onRequestCodeClick,g=e.renderSlotComponent,_=e.excludeCountries,f=e.timeService,E=e.profileService,S=e.onConfirmClick,y=e.onFinish,b=e.captcha;const C=(0,o.useState)(h.s.formatValue(E.phone.value)),T=n(C,2),A=T[0],k=T[1],w=(0,o.useState)(""),N=n(w,2),R=N[0],I=N[1],D=(0,o.useState)(!1),O=n(D,2),L=O[0],M=O[1],P=(0,o.useState)("enter_phone"),x=n(P,2),F=x[0],B=x[1],Z=(0,o.useState)(0),U=n(Z,2),H=U[0],G=U[1],V=(0,o.useState)(""),W=n(V,2),j=W[0],z=W[1],q=o.useState(!1),K=n(q,2),Y=K[0],X=K[1],J=(0,o.useState)({phone:null,code:null,captcha:null}),Q=n(J,2),$=Q[0],ee=Q[1],te=(0,o.useRef)(null),ae=(0,o.useRef)(null),se=(0,o.useMemo)((()=>"enter_phone"===F?"phone":"code"),[F]),ie=(0,o.useMemo)((()=>"phone"===se?te:ae),[se,te,ae]),re=(0,o.useCallback)((()=>{ee({phone:null,code:null,captcha:null})}),[ee]),ne=(0,o.useCallback)((()=>{X(!0),z(""),ee((e=>r(r({},e),{},{captcha:o.createElement(m._,{defaultMessage:"Please confirm you are human",id:"auth_captcha_required"})})))}),[X,z,ee]),oe=(0,o.useCallback)(i((function*(){try{if(b&&0===j.length)return void ne();const e=b?{[b.type]:j}:{},a=yield E.requestConfirmPhone(r({phone:A},e));switch(M(!1),b&&z(""),a.type){case"error":ee((e=>r(r({},e),{},{captcha:null,[se]:a.error.message}))),"throttling"===a.error.type?G(a.error.expired):ie.current?ie.current.focus():"captcha"===a.error.type&&ne();break;case"success":X(!1),re(),G(a.data.newCodeAfter),B("enter_code"),ae.current&&ae.current.focus()}}catch(e){console.error(e)}})),[re,se,ie,b,j,ne,A,E]),le=(0,o.useCallback)((e=>{const a=e.currentTarget.value;I(a)}),[]),ce=(0,o.useCallback)((()=>{"enter_code"===F&&B("enter_phone")}),[F,B]),de=(0,o.useCallback)((e=>{k(e)}),[]),ue=(0,o.useCallback)((e=>{z(e)}),[]),me=(0,o.useCallback)(i((function*(){try{null==S||S();const e=yield E.confirmPhone(A,R);if(!e)return void y();ee(r(r({},$),{},{code:e.message})),"throttling"===e.type?G(e.expired):ie.current&&ie.current.focus()}catch(e){console.error(e)}})),[ie,R,A,$,S,y,E]),pe=(0,o.useCallback)(i((function*(){null==l||l(),yield oe()})),[l,oe]),he=(0,o.useCallback)(i((function*(){I(""),ee((e=>r(r({},e),{},{code:null}))),M(!0),null==s||s(),yield oe()})),[M,s,oe]),ve=(0,o.useCallback)((()=>{ue("")}),[ue]),ge=null==g?void 0:g({className:"pro-p-edit-phone__captchabox",code:j,error:$.captcha,onChange:ue,onError:ve,onExpired:ve});return(0,o.useEffect)((()=>{setTimeout((()=>{ie.current&&ie.current.focus()}),300)}),[ie]),(0,o.useEffect)((()=>{b&&j&&L&&oe()}),[b,j,L,oe]),o.createElement("div",{className:d("pro-p-edit-phone",a)},o.createElement("span",{className:"pro-p-edit-phone__description"},o.createElement(m._,{id:"pro_edit_phone_enter_phone_description",defaultMessage:"We do not spam call and do not impose hidden charges. A telephone number is only necessary for the security of your account."})),o.createElement("form",{className:"pro-p-edit-phone__form"},o.createElement(h.s,{name:"phone",value:A,error:$.phone,type:"tel",excludeCountries:_,label:o.createElement(m._,{id:"pro_mobile_phone_number",defaultMessage:"Mobile phone number"}),onChange:de,onClick:ce,className:"pro-p-edit-phone__input","data-test":"pro-p-edit-phone-i-phone",blocked:"enter_phone"!==F,inputRef:te}),o.createElement("div",{className:d("pro-p-edit-phone__code","enter_code"===F&&"pro-p-edit-phone__code_showed")},o.createElement("span",{className:"pro-p-edit-phone__description"},o.createElement(m._,{id:"pro_edit_phone_enter_code_description",defaultMessage:"In a few moments you'll get an SMS with a code. Please enter the code to confirm your phone number."})),o.createElement(u.nv,{name:"code",value:R,error:$.code,type:"text",label:o.createElement(m._,{id:"pro_settings_sms_code",defaultMessage:"SMS Code"}),onChange:le,className:"pro-p-edit-phone__input","data-test":"pro-p-edit-phone-i-code",inputRef:ae})),"enter_phone"===F?o.createElement(o.Fragment,null,ge,o.createElement(v.a,{onClick:pe},(e=>{let a=e.onClick,s=e.processing;return o.createElement(c.Qj,null,(()=>H&&f.serverTime<=H?o.createElement(u.O6,{color:"accent",size:"large",loading:!1,disabled:!0},o.createElement(m._,{id:"pro_settings_resend_code_timer",defaultMessage:"Resend code in {time}",values:{time:o.createElement(u.Wo,{serverTime:f.serverTime,startTime:H,timeFormat:"m:s"})}})):o.createElement(u.O6,{color:"accent",size:"large",type:"submit",onClick:a,disabled:0===A.length,loading:s,"data-test":"pro-p-edit-phone-b-request-confirm"},o.createElement(m._,{id:"pro_edit_phone_get_code",defaultMessage:"Get code"}))))}))):o.createElement(o.Fragment,null,o.createElement(v.a,{onClick:me},(e=>{let a=e.onClick,s=e.processing;return o.createElement(u.O6,{disabled:0===R.length,color:"accent",size:"large",type:"submit",onClick:a,loading:s,"data-test":"pro-p-edit-phone-b-confirm"},o.createElement(m._,{id:"pro_settings_confirm",defaultMessage:"Confirm"}))})))),H&&"enter_code"===F?o.createElement(o.Fragment,null,o.createElement(c.Qj,null,(()=>o.createElement(p.d,{blocked:L,serverTime:f.serverTime,resendAt:H,className:"pro-p-edit-phone__resend",onClick:he}))),Y?ge:null):null)}))},5278:(e,a,s)=>{"use strict";s.d(a,{I_:()=>o,nE:()=>n});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{id:"pro_settings_security_level_phone",defaultMessage:"Confirm phone number"}),o=()=>i.createElement(r._,{id:"pro_edit_phone_confirmed",defaultMessage:"Phone number confirmed"})},52461:(e,a,s)=>{"use strict";s.d(a,{R:()=>_});var i=s(59312),r=s(27378),n=s(50649),o=s(60042),l=s(82844),c=s(17302);const d=e=>r.createElement(c.nv,{label:r.createElement(l._,{id:"pro_settings_name",defaultMessage:"Name"}),value:e.name,blocked:!0,className:o(e.className),onClick:e.onClick,"data-test":"pro-p-personal-b-name"});var u=s(53660);const m=e=>{let a=e.email,s=e.className,i=e.onClick;return r.createElement(c.nv,{label:r.createElement(l._,{id:"pro_email",defaultMessage:"Email"}),value:a.value,disabled:a.isConfirmed,blocked:!a.isConfirmed,className:o("pro-p-personal-c-email",s),classNameInput:"pro-p-personal-c-email__input",endIcon:r.createElement(u.q,{isChecked:a.isConfirmed}),onClick:a.isConfirmed?void 0:i,"data-test":"pro-p-personal-b-email"})},p=e=>{let a=e.phone,s=e.className,i=e.onClick;return r.createElement(c.nv,{label:r.createElement(l._,{id:"pro_settings_phone_number",defaultMessage:"Phone number"}),value:a.value,disabled:a.isConfirmed,blocked:!a.isConfirmed,className:o("pro-p-personal-c-phone",s),classNameInput:"pro-p-personal-c-phone__input","data-test":"pro-p-personal-b-phone",endIcon:r.createElement(u.q,{isChecked:a.isConfirmed}),onClick:a.isConfirmed?void 0:i})};var h=s(47014),v=s(77740),g=s(95901);class UploadAvatar extends r.Component{constructor(e){super(e),this.state={error:void 0},this.isMount=!0,this.handleChange=this.handleChange.bind(this)}componentDidMount(){this.isMount=!0}componentWillUnmount(){this.isMount=!1}handleChange(e){var a=this;return h((function*(){let s=e.currentTarget.files;const i=a.props.onChange;let r;if(s&&s[0]){const e=yield i(s[0]);e&&(r=e.message)}a.isMount&&a.setState({error:r})}))()}render(){const e=this.props.className,a=this.state.error;return r.createElement(g.a,{onClick:this.handleChange},(s=>{let i=s.processing,n=s.onClick;return r.createElement(r.Fragment,null,r.createElement(c.O6,{className:o("pro-p-personal-c-upload-avatar",a&&"pro-p-personal-c-upload-avatar__failed",e),"data-test":"pro-p-personal-b-upload-avatar",size:"large",startIcon:r.createElement(v.f7T,null),loading:i},r.createElement("label",{htmlFor:"upload-avatar",className:"pro-p-personal-c-upload-avatar__label"},r.createElement("input",{id:"upload-avatar",type:"file",onChange:n,multiple:!1,accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",hidden:!0}),r.createElement(l._,{id:"pro_settings_upload_avatar",defaultMessage:"Upload profile picture"}))),a&&r.createElement("div",{className:"pro-p-personal-c-upload-avatar__error"},a))}))}}let _=class Personal extends r.Component{render(){const e=this.props,a=e.profileService,s=a.email,i=a.phone,n=a.fullName,u=e.className,h=e.onNameClick,v=e.onEmailClick,g=e.onPhoneClick,_=e.onAvatarChange,f=e.bannerGroup,E=e.socialGroup;return r.createElement("div",{className:o("pro-p-personal",u)},f,r.createElement(c.xu,{display:"grid",gap:"s",padding:[0,0,"xxl",0]},r.createElement(c.xv,{as:"h3",variant:"L / Bold"},r.createElement(l._,{id:"pro_personal_title",defaultMessage:"Personal"})),h&&r.createElement(d,{name:n.firstName,onClick:h}),_&&r.createElement(UploadAvatar,{onChange:_})),r.createElement(c.xu,{display:"grid",gap:"s",padding:[0,0,"xxl",0]},r.createElement(c.xv,{as:"h3",variant:"L / Bold"},r.createElement(l._,{id:"pro_personal_contacts",defaultMessage:"Contacts"})),v&&r.createElement(m,{email:s,onClick:v}),g&&r.createElement(p,{phone:i,onClick:g})),E&&r.createElement(c.xu,{display:"grid",gap:"s",padding:[0,0,"xxl",0]},r.createElement(c.xv,{as:"h3",variant:"L / Bold"},r.createElement(l._,{id:"pro_personal_social",defaultMessage:"Social"})),E))}};_.BannerGroup=(0,n.observer)((e=>{let a=e.children;return r.createElement(c.xu,{fullWidth:!0},a)})),_.BannerGroupItem=(0,n.observer)((e=>(0,e.children)({className:"pro-p-personal__banner-group-item"}))),_=(0,i.gn)([n.observer],_)},29077:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var i=s(27378),r=s(82844);const n=()=>i.createElement(r._,{id:"pro_profile_personal_settings",defaultMessage:"Personal Settings"})},77931:(e,a,s)=>{"use strict";s.d(a,{f:()=>h});var i=s(49491),r=s(14936),n=s(59312),o=s(27378),l=s(50649),c=s(60042);const d=["children","className","disabled","onClick"],u=["className","children"],m=e=>{let a=e.className,s=e.children,n=r(e,u);return o.createElement("div",i({className:c("pro-c-card",a)},n),s)};m.Content=e=>{let a=e.children,s=e.className,n=e.disabled,l=e.onClick,u=r(e,d);return l=n?void 0:l,o.createElement("div",i({className:c("pro-c-card__content",{"pro-c-card__content_disabled":n,"pro-c-card__content_has_action":!!l},s),role:l?"button":void 0,onClick:l},u),a)};const p=["className","contentClassName","children"];let h=class Root extends o.Component{constructor(e){super(e)}render(){const e=this.props,a=e.header,s=e.body,i=e.footer,r=e.className;return o.createElement("div",{className:c("pro-p-root",r)},o.createElement("div",{className:"pro-p-root__header"},a()),o.createElement("div",{className:"pro-p-root__body"},s()),o.createElement("div",{className:"pro-p-root__footer"},i()))}};h.Widget=(0,l.observer)((e=>{let a=e.children,s=e.className;return a?o.createElement("div",{className:c("pro-p-root__widget",s)},a):null})),h.Group=(0,l.observer)((e=>{let a=e.children,s=e.direction,i=e.className;return o.createElement("div",{className:c("pro-p-root__group pro-p-root-sb-group","pro-p-root-sb-group_dir_".concat(s||"vertical"),i)},a)})),h.Block=(0,l.observer)((e=>{let a=e.className,s=e.children;return o.createElement("div",{className:c("pro-p-root-sb-group__block",a)},s({className:"pro-p-root-sb-group__block-content"}))})),h.Card=(0,l.observer)((e=>{let a=e.className,s=e.contentClassName,n=e.children,l=r(e,p);return o.createElement(m,{className:c("pro-p-root-sb-group__card",a)},o.createElement(m.Content,i({className:c("pro-p-root-sb-group__card-content",s)},l),n({className:"pro-p-root-sb-group__card-content-inner"})))})),h=(0,n.gn)([l.observer],h)},70232:(e,a,s)=>{"use strict";s.d(a,{k:()=>E});var i=s(59312),r=s(27378),n=s(50649),o=s(60042),l=s(82844),c=s(97485),d=s(49491),u=s(14936),m=s(47014),p=s(2243),h=s(2653),v=s(17302);const g=["basePlacement"],_=["ref"],f=e=>{let a=e.id,s=e.className,i=e.onClick;const n=r.useState(!1),c=p(n,2),f=c[0],E=c[1],S=r.useRef(void 0),y=r.useCallback(m((function*(){yield(0,h.z)("".concat(a)),E(!0),void 0!==S.current&&(window.clearTimeout(S.current),S.current=void 0),S.current=window.setTimeout((()=>{E(!1)}),3e3),null==i||i(a)})),[a,i]),b=r.useCallback((e=>{let a=e.basePlacement,s=u(e,g);return r.createElement("div",null,r.createElement(v._v,d({placement:a},s),f?r.createElement(l._,{id:"pro_info_id_copied",defaultMessage:"Copied"}):r.createElement(l._,{id:"pro_info_id_copy",defaultMessage:"Copy your account number to the clipboard"})))}),[f]);return r.createElement(v.u,{delay:100,transition:!0,placement:"top-start",fitSizeTo:"viewport",triggerOnHover:!0,triggerOnTap:!1,arrow:!0,disablePortal:!0,content:b},(e=>{let i=e.ref,n=u(e,_);return r.createElement(v.Xd,d({className:o("pro-p-root-c-id",s),onClick:y,ref:i},n),r.createElement("span",{"data-test":"pro-p-root-c-id-value"},r.createElement(l._,{id:"pro_info_id",defaultMessage:"ID {id}",values:{id:r.createElement("span",{className:"pro-p-root-c-id__value"},a)}})))}))};let E=class Info extends r.Component{render(){const e=this.props,a=e.id,s=e.fullName,i=e.avatarUrl,n=e.className,d=e.onAvatarClick,u=e.onIdClick,m=""!==s.firstName;return r.createElement("div",{className:o("pro-p-root-c-info",n)},r.createElement("div",{className:"pro-p-root-c-info__left"},r.createElement("div",{className:"pro-p-root-c-info__initials"},m?r.createElement("span",{className:"pro-p-root-c-info__name"},s.firstName):r.createElement("span",{className:"pro-p-root-c-info__placeholder"},r.createElement(l._,{id:"pro_info_placeholder",defaultMessage:"Trader"}))),r.createElement("div",{className:"pro-p-root-c-info__id"},r.createElement(f,{id:a,className:"pro-p-root-c-info__id",onClick:u}))),r.createElement("div",{className:o("pro-p-root-c-info__right",d&&"pro-p-root-c-info__right_has-interaction"),role:"button",onClick:d},r.createElement(c.q,{firstName:"",middleName:"",avatarUrl:i,type:"circle",size:"extra-large",className:"pro-p-root-c-info__avatar"})))}};E=(0,i.gn)([n.observer],E)},27070:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var i=s(27378),r=s(82844),n=s(17302),o=s(77740);const l=e=>{let a=e.onClick;return i.createElement(n.zx,{onClick:a,startIcon:i.createElement(o.iCC,null),fullWidth:!0,variant:"secondary",dataTest:"pro-p-root-c-settings"},i.createElement(r._,{id:"settings",defaultMessage:"Settings"}))}},43545:(e,a,s)=>{"use strict";s.d(a,{F2:()=>n});var i=s(27378),r=s(82844);s(17302),s(77740);const n=()=>i.createElement(r._,{id:"pro_profile_title",defaultMessage:"Profile"})},72181:(e,a,s)=>{"use strict";s.d(a,{L:()=>u,Z:()=>m});var i=s(27378),r=s(84584),n=s(2050),o=s(73598),l=s(50649),c=s(60042),d=s(17302);const u=(0,r.Z)({id:"settingsPanelFooterSlot"}),m=e=>{let a=e.className,s=e.headerGroup;const r=(0,n.x)(u);return(0,o.SZ)((()=>i.createElement("div",{className:c("pro-p-settings",a)},i.createElement(d.xu,{fullHeight:!0},i.createElement(d.xu,{display:"grid",gridAutoRows:"max-content",gap:"s",padding:[0,0,"xl",0],flexGrow:!0},s),r&&i.createElement(d.xu,null,r)))))};m.Group=(0,l.observer)((e=>{let a=e.children;return i.createElement(d.xu,{display:"grid",gap:"s",padding:[0,0,"xl",0],fitContainer:!0},a)})),m.GroupItem=(0,l.observer)((e=>(0,e.children)())),m.GroupTitle=e=>(0,e.children)()},61479:(e,a,s)=>{"use strict";s.d(a,{g:()=>l});var i=s(14936),r=s(27378),n=s(17302);const o=["text","description","startIcon","onClick"],l=e=>{let a=e.text,s=e.description,l=e.startIcon,c=e.onClick,d=i(e,o);return r.createElement(n.zx,{startIcon:l,variant:"secondary",understring:s,fullWidth:!0,horizontalAlign:"start",dataTest:d["data-test"]||"pro-p-settings-b-default",onClick:c},a)};l.displayName="Default"},65691:(e,a,s)=>{"use strict";s.d(a,{r:()=>l});var i=s(27378),r=s(17302),n=s(77740),o=s(82844);const l=e=>{let a=e.onClick;return i.createElement(r.zx,{startIcon:i.createElement(n.Ol,null),understring:i.createElement(o._,{id:"pro_settings_password_desc",defaultMessage:"Keep your account secure"}),horizontalAlign:"start",fullWidth:!0,variant:"secondary",dataTest:"pro-p-settings-b-password",onClick:a},i.createElement(o._,{id:"pro_settings_password",defaultMessage:"Password"}))}},16608:(e,a,s)=>{"use strict";s.d(a,{R:()=>l});var i=s(27378),r=s(82844),n=s(17302),o=s(77740);const l=e=>{let a=e.onClick;return i.createElement(n.zx,{startIcon:i.createElement(o.f7T,null),understring:i.createElement(r._,{id:"pro_settings_personal_desc",defaultMessage:"Name and contacts"}),horizontalAlign:"start",fullWidth:!0,variant:"secondary",dataTest:"pro-p-settings-b-personal",onClick:a},i.createElement(r._,{id:"pro_settings_personal",defaultMessage:"Personal"}))};l.displayName="Personal"},8694:(e,a,s)=>{"use strict";s.d(a,{m:()=>l});var i=s(27378),r=s(82844),n=s(77740),o=s(17302);const l=e=>{let a=e.onClick;return i.createElement(o.zx,{startIcon:i.createElement(n.leh,null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.582 7.325a2 2 0 012.864-.49L20.6 9.2a1 1 0 11-1.2 1.6l-3.154-2.366-3.924 5.886a2 2 0 01-2.559.68l-2.525-1.263-3.49 3.927a1 1 0 01-1.495-1.328l3.49-3.928a2 2 0 012.39-.46l2.525 1.263 3.924-5.886z",fill:"currentColor"})),variant:"secondary",horizontalAlign:"start",fullWidth:!0,understring:i.createElement(r._,{id:"pro_settings_trading_limits_desc",defaultMessage:"Review the maximum investment amounts"}),dataTest:"pro-p-settings-b-trading-limits",onClick:a},i.createElement(r._,{id:"pro_settings_trading_limits",defaultMessage:"Trading limits"}))}},31602:(e,a,s)=>{"use strict";s.d(a,{Af:()=>n});var i=s(27378),r=s(82844);s(17302),s(77740);const n=()=>i.createElement(r._,{id:"settings",defaultMessage:"Settings"})},64461:(e,a,s)=>{"use strict";s.d(a,{f:()=>c});var i=s(27378),r=s(60042),n=s(82844),o=s(77740),l=s(17302);const c=e=>{let a=e.description,s=e.className,c=e.onContinueClick;return i.useEffect((()=>{function e(e){"Enter"===e.key&&c()}return document.addEventListener("keypress",e),()=>{document.removeEventListener("keypress",e)}}),[]),i.createElement("div",{className:r("pro-p-success",s)},i.createElement(o.NOm,{className:"pro-p-success__icon"}),i.createElement("span",{className:"pro-p-success__title"},i.createElement(n._,{id:"pro_success_title",defaultMessage:"Success"})),i.createElement("span",{className:"pro-p-success__description"},a),i.createElement(l.zx,{onClick:c,dataTest:"pro-p-success-b-continue",fullWidth:!0},i.createElement(n._,{id:"pro_continue",defaultMessage:"Continue"})))}},43623:(e,a,s)=>{"use strict";s.d(a,{H:()=>ProfileService});var i=s(47014),r=s(59312),n=s(60521);class ProfileService{constructor(e,a){this.http=e,this.webSocket=a,this.id=-1,this.fullName={firstName:"",middleName:"",lastName:""},this.avatar={big:null,small:null},this.phone={value:"",isConfirmed:!1},this.email={value:"",isConfirmed:!1,confirmedBy:null},this.handleDataChangePush=this.handleDataChangePush.bind(this),this.webSocket.onDataChange(this.handleDataChangePush)}load(e){return this.id=e.id,e.phone.value.length>1&&!e.phone.value.startsWith("+")&&(e.phone.value="+".concat(e.phone.value)),(0,n.set)(this,"fullName",e.fullName),(0,n.set)(this,"avatar",e.avatar),(0,n.set)(this,"phone",e.phone),(0,n.set)(this,"email",e.email),Promise.resolve(!0)}updateFullName(e){var a=this;return i((function*(){try{const s=yield a.http.updateData({sex:"male",name:e.firstName,surname:e.middleName,patronymic:e.lastName,birthday:""});(0,n.runInAction)((()=>{a.fullName.firstName=s.name,a.fullName.middleName=s.surname,a.fullName.lastName=s.patronymic}))}catch(e){return a.mapToError(e,{name:"firstName"})}}))()}requestConfirmEmail(e){var a=this;return i((function*(){try{return{type:"success",data:{newCodeAfter:(yield a.http.requestConfirmEmail(e)).new_code_at}}}catch(e){return{type:"error",error:a.mapToError(e,{email:"email"})}}}))()}confirmEmail(e){var a=this;return i((function*(){try{yield a.http.confirmEmail(e),(0,n.runInAction)((()=>{a.email.confirmedBy="self",a.email.isConfirmed=!0}))}catch(e){return a.mapToError(e,{code:"code",email:"email"})}}))()}requestConfirmPhone(e){var a=this;return i((function*(){try{return{type:"success",data:{newCodeAfter:(yield a.http.requestConfirmPhone(e)).new_code_at}}}catch(e){return{type:"error",error:a.mapToError(e,{phone:"phone"})}}}))()}confirmPhone(e,a){var s=this;return i((function*(){try{yield s.http.confirmPhone(e,a),s.phone.value=e,s.phone.isConfirmed=!0}catch(e){return s.mapToError(e,{code:"code",phone:"phone"})}}))()}updatePassword(e,a){var s=this;return i((function*(){try{yield s.http.changePassword(e,a)}catch(e){return s.mapToError(e,{old_password:"oldPassword",new_password:"newPassword"})}}))()}updateAvatar(e){var a=this;return i((function*(){try{yield a.http.updateAvatar(e),a.avatar.small=URL.createObjectURL(e)}catch(e){return a.mapToError(e)}}))()}updateSubscribe(e,a){var s=this;return i((function*(){try{yield s.http.updateSubscribe(e,a)}catch(e){return s.mapToError(e)}}))()}setEmailIsConfirmed(){null===this.email.confirmedBy&&(this.email.confirmedBy="external"),this.email.isConfirmed=!0}handleDataChangePush(e){e.email_confirmed&&this.setEmailIsConfirmed()}mapToError(e,a){if(e&&function(e){return"object"==typeof e&&null!==e&&"meta"in e}(e)){const s=e.meta;switch(s.type){case"ThrottlingError":return{type:"throttling",message:s.msg,expired:s.expired};case"ValidationError":return{type:"validation",message:s.msg,field:a&&a[s.field]||s.field};default:return{type:"unknown",message:s.msg}}}return{type:"unknown",message:"System error"}}}(0,r.gn)([n.observable],ProfileService.prototype,"id",void 0),(0,r.gn)([n.observable],ProfileService.prototype,"fullName",void 0),(0,r.gn)([n.observable],ProfileService.prototype,"avatar",void 0),(0,r.gn)([n.observable],ProfileService.prototype,"phone",void 0),(0,r.gn)([n.observable],ProfileService.prototype,"email",void 0),(0,r.gn)([n.action],ProfileService.prototype,"load",null),(0,r.gn)([n.action],ProfileService.prototype,"setEmailIsConfirmed",null)},2653:(e,a,s)=>{"use strict";s.d(a,{z:()=>n});var i=s(47014);function r(e){const a=document.createElement("textarea");a.value=e,a.style.position="fixed",document.body.appendChild(a),a.focus(),a.select();let s=!1;try{document.execCommand("copy"),s=!0}catch(e){s=!1}return document.body.removeChild(a),s}function n(e){return o.apply(this,arguments)}function o(){return(o=i((function*(e){if(!navigator.clipboard)return r(e);try{return yield navigator.clipboard.writeText(e),!0}catch(e){return!1}}))).apply(this,arguments)}},45060:(e,a,s)=>{"use strict";s.d(a,{N:()=>c});var i=s(59312),r=s(27378),n=s(60042),o=s(50649),l=s(97485);class Notification extends r.Component{constructor(){super(...arguments),this.elContent=r.createRef()}componentDidMount(){this.props.text&&this.blink()}componentDidUpdate(e){e.text!==this.props.text&&this.blink()}blink(){this.elContent.current&&(this.elContent.current.dataset.blink="false",this.elContent.current.offsetHeight,this.elContent.current.dataset.blink="true")}render(){const e=this.props,a=e.text,s=e.type,i=e.className;return r.createElement("div",{className:n("pro-w-profile-c-notification","pro-w-profile-c-notification_type_".concat(s||"default"),i)},r.createElement("span",{className:"pro-w-profile-c-notification__content pro-w-profile-c-notification__content_animatable",ref:this.elContent},a))}}let c=class Profile extends r.Component{render(){const e=this.props,a=e.fullName,s=e.avatar,i=e.className,o=e.notificationsBlock,c=e.leftBlock;return r.createElement("div",{className:n("pro-w-profile",{"pro-w-profile_with-left-block":!!c},i),"data-test":"pro-w-profile"},r.createElement("div",{className:"pro-w-profile__content",role:"button"},c,r.createElement(l.q,{firstName:a&&a.firstName||"",middleName:a&&a.middleName||"",avatarUrl:s.small,className:n("pro-w-profile__right",{"pro-w-profile__right_full":!c}),handleClick:this.props.handleClick})),null==o?void 0:o({className:"pro-w-profile__notifications"}))}};c.Notification=Notification,c=(0,i.gn)([o.observer],c)},94067:(e,a,s)=>{"use strict";s.d(a,{B:()=>p});var i=s(49491),r=s(14936),n=s(27378),o=s(50649),l=s(60042),c=s(17302),d=s(82844),u=s(95901);const m=["bonusPercent","className","onDepositClick"],p=(0,o.observer)((e=>{let a=e.bonusPercent,s=e.className,o=e.onDepositClick,p=void 0===o?()=>Promise.resolve():o,h=r(e,m);return n.createElement(u.a,{onClick:p},(e=>{let r=e.processing,o=e.onClick;return n.createElement(c.O6,i({type:"button",component:"button",className:l(s),color:a?"warning":"accent",size:"large",fullWidth:!0,onClick:o,loading:r},h),a?n.createElement(d._,{id:"pro_deposit_with_bonus",defaultMessage:"Deposit with a +{percent}% bonus",values:{percent:a}}):n.createElement(d._,{id:"pro_deposit_without_bonus",defaultMessage:"Deposit without a bonus"}))}))}))},6460:(e,a,s)=>{"use strict";s.d(a,{l:()=>d});var i=s(27378),r=s(50649),n=s(60042),o=s(17302),l=s(77740),c=s(82844);const d=(0,r.observer)((e=>{let a=e.email,s=e.isEnabledTwoFactor,r=e.bonusPercent,d=e.className,u=e.onReadyForBonus,m=e.onEmailConfirmClick,p=e.onTwoFactorConfirmClick;return i.useEffect((()=>{a.isConfirmed&&s&&(null==u||u())}),[a.isConfirmed,s,u]),i.createElement("form",{className:n("pro-w-verification-bonus-form",d),"data-test":"pro-w-verification-bonus-form"},i.createElement("div",{className:"pro-w-verification-bonus-form__banner"},i.createElement("div",{className:"pro-w-verification-bonus-form__banner-text"},i.createElement(c._,{id:"welcome_offer_task_title",defaultMessage:"Enhance your account security to unlock the bonus"})),i.createElement("div",{className:"pro-w-verification-bonus-form__banner-highlight-text"},i.createElement(c._,{id:"pro_bonus_percent",defaultMessage:"+{percent}%",values:{percent:r}}))),i.createElement(o.nv,{name:"email",label:a.isConfirmed?i.createElement(c._,{id:"pro_email",defaultMessage:"Email"}):i.createElement("span",{className:"pro-w-verification-bonus-form__field-label"},i.createElement(c._,{id:"pro_settings_security_level_email",defaultMessage:"Confirm email"})),value:a.isConfirmed?a.value:"",className:n("pro-w-verification-bonus-form__field",a.isConfirmed&&"pro-w-verification-bonus-form__field_filled"),classNameContent:"pro-w-verification-bonus-form__field-content",endIcon:a.isConfirmed?i.createElement(l.NOm,{className:"pro-w-verification-bonus-form__success-icon"}):i.createElement(l.Ec8,{flipForRtl:!0}),blocked:!0,onClick:m}),i.createElement("hr",{className:"pro-w-verification-bonus-form__delimiter"}),i.createElement(o.nv,{name:"twoFactor",value:"",label:i.createElement("span",{className:"pro-w-verification-bonus-form__field-label"},s?i.createElement(c._,{id:"welcome_offer_two_fa_enabled",defaultMessage:"Two-factor authentication"}):i.createElement(c._,{id:"welcome_offer_two_fa_not_enabled",defaultMessage:"Enable two-factor authentication"})),className:n("pro-w-verification-bonus-form__field",s&&"pro-w-verification-bonus-form__field_filled"),classNameContent:"pro-w-verification-bonus-form__field-content",endIcon:s?i.createElement(l.NOm,{className:"pro-w-verification-bonus-form__success-icon"}):i.createElement(l.Ec8,{flipForRtl:!0}),blocked:!0,onClick:p}))}))},14449:(e,a,s)=>{"use strict";s.d(a,{JZ:()=>n,mI:()=>r,yD:()=>i});const i=0;var r,n;!function(e){e.errorMax="errorMax",e.errorMin="errorMin",e.none=""}(r||(r={})),function(e){e.purchase="purchase",e.sale="sale"}(n||(n={}))},33413:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3NB6T8knpkES",switcher:"_2SkBhtYXk_QU",switcher_disabled:"_27hIt5WfYgoP",currentAccount:"_2JVOkESAEkeM",label:"_3ekVmFDDyo0u",currentCurrency:"_13uBC1RB7fR0",balance:"_3zSoQXHdZxVM",arrow:"_2hsGKooe9vfX",note:"_3ZeJsWANf6rd"}},34225:(e,a,s)=>{"use strict";s.d(a,{m:()=>d});var i=s(27378),r=s(60042),n=s(77740),o=s(82844),l=s(32089),c=s(33413);const d=e=>{let a=e.currency,s=void 0===a?"usd":a,d=e.balance,u=void 0===d?0:d,m=e.label,p=e.name,h=e.onClick;return i.createElement("div",{className:c.Z.host,"data-test":"stocks-sell-panel-account-block"},m&&i.createElement("span",{className:c.Z.label},m),i.createElement("div",{className:r(c.Z.switcher,!h&&c.Z.switcher_disabled),onClick:h},i.createElement("div",{className:c.Z.currentAccount},i.createElement("span",{"data-test":"stocks-account-selector-name"},p),"demo"===s?null:i.createElement("span",{className:c.Z.currentCurrency},s.toUpperCase())),i.createElement("span",{className:c.Z.balance,"data-test":"stocks-account-balance"},i.createElement(l.b,{currency:s,value:u})),i.createElement("span",{className:c.Z.note},i.createElement(o._,{id:"spt_buy_realfundsonly",defaultMessage:"Real funds only"}))),h&&i.createElement("span",{className:c.Z.arrow},i.createElement(n.Ec8,null)))}},72651:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={subtitle:"_1OD8zCrYgOwT"}},36502:(e,a,s)=>{"use strict";s.d(a,{N:()=>o});var i=s(27378),r=s(32678),n=s(72651);const o=e=>{let a=e.account,s=e.selectedAccountId,o=e.onClick;const l=i.useCallback((()=>{o(a.id)}),[o,a]),c=a.amount-(a.bonus||0);return i.createElement(r.UI,{id:a.id,type:a.type,title:a.name,currency:a.currencyName,currencyIcon:a.currencyIcon,selected:s===a.id,refill:{maxAmount:0,blockingReason:null},isDemoRefilling:!1,isDemoRefillable:!1,onSelect:l},i.createElement(r.yo,{balance:c,currency:a.currencyName}),i.createElement("div",{className:n.Z.subtitle},"#",a.id))}},93128:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"rl-_gTwUngnG",apply:"_3aHrUQTrhbK_"}},52649:(e,a,s)=>{"use strict";s.d(a,{K:()=>u});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(17302),c=s(93128);const d=["className","apply"],u=e=>{let a=e.className,s=e.apply,u=r(e,d);return n.createElement(l.O6,i({size:"large",color:"accent",fullWidth:!0,className:o(c.Z.host,a,{[c.Z.apply]:s})},u))}},77639:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={contrast:"qeXsv3dTuSnr"}},90895:(e,a,s)=>{"use strict";s.d(a,{p:()=>l});var i=s(27378),r=s(95029),n=s(60042),o=s(77639);const l=e=>{let a=e.value,s=e.currency,l=e.contrasted;return i.createElement("span",{className:n({[o.Z.contrast]:!l})},a&&s?i.createElement(r.ih,{value:a,currency:s,maximumFractionDigits:2}):"-")}},41363:(e,a,s)=>{"use strict";s.d(a,{l:()=>o});var i=s(27378),r=s(82844),n=s(17302);const o=e=>{let a=e.onClick,s=e.disabled;const o=i.useCallback((()=>{"function"==typeof a&&a()}),[a]);return i.createElement(n.zx,{onClick:o,dataTest:"stocks-open-buy-btn",noWrap:!0,size:"l",horizontalAlign:"center",fullWidth:!0,disabled:s},i.createElement(r._,{id:"ct_spt_buy",defaultMessage:"Buy"}))}},68027:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={calculation:"MC8J48Nt-3jG",calculation_list:"_6J7VEbx7qQxH","calculation-item":"_2EdUm2lFvr7i",details:"_1Krtimb6cjdC"}},58770:(e,a,s)=>{"use strict";s.d(a,{o:()=>o});var i=s(27378),r=s(60042),n=s(68027);const o=e=>{let a=e.children,s=e.className,o=e.isDetails;return i.createElement("div",{className:r(n.Z.calculation,s,{[n.Z.details]:o})},a)}},666:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={calculation:"_32pq6zeCi1YN",double:"_2Ta48nMKa38c",dash:"_22yzIxSJH6Hu",title:"_3iCH6zPv-MhL",button:"IT_liwOT3dB2",value:"_6_9aHnYSqpFt",details:"_3CjxCU6hUyuI",positive:"W1B-S8-XJFkE",negative:"Fqf35eBXrJcO",subContent:"_2D-zxtjJyxuV",accented:"_1Q14UqCxSQ9S",accentedBold:"_3AVnfRURKM6Z",toggled:"_95SO0YN1vdhz",icon:"_3hFDr4mg1EW4"}},38180:(e,a,s)=>{"use strict";s.d(a,{B:()=>l,l:()=>o});var i=s(27378),r=s(60042),n=s(666);const o={accented:"accented",accentedBold:"accentedBold",negative:"negative",positive:"positive"},l=e=>{let a=e.accentedValue,s=e.double,l=e.buttonTitle,c=e.title,d=e.value,u=e.subContent,m=e.toggled,p=e.dataTest,h=e.buttonClick;return i.createElement("div",{className:r(n.Z.calculation,{[n.Z.double]:s,[n.Z.toggled]:m})},c?i.createElement("span",{className:n.Z.title},c):i.createElement("span",{className:r(n.Z.title,n.Z.button),onClick:h,role:"button"},l),i.createElement("span",{className:n.Z.dash}),i.createElement("span",{className:r(n.Z.value,{[n.Z.accented]:a===o.accented,[n.Z.accentedBold]:a===o.accentedBold,[n.Z.negative]:a===o.negative,[n.Z.positive]:a===o.positive})},i.createElement("span",{"data-test":p?"".concat(p,"-value"):""},null!=d?d:"–")),u&&i.createElement("div",{className:n.Z.subContent},u))}},15192:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"BWXQSQshGiuq",item:"_2Jw1uWq3CsCu",selected:"mDrCNCKnEbff"}},32369:(e,a,s)=>{"use strict";s.d(a,{Z:()=>o,x:()=>l});var i=s(27378),r=s(60042),n=s(15192);const o=e=>{let a=e.selected,s=e.children,o=e.onClick;return i.createElement("li",{className:r(n.Z.item,{[n.Z.selected]:a}),onClick:o},s)},l=e=>{let a=e.children,s=e.className;return i.createElement("ul",{className:r(n.Z.host,s)},a)}},92931:(e,a,s)=>{"use strict";s.d(a,{t:()=>l});var i=s(49491),r=s(27378),n=s(97057),o=s(27640);const l=e=>{let a=e.isLoading,s=e.lockedBuy,l=e.hasPosition,c=e.defaultPair,d=e.onClick;return a?r.createElement(n.OG,null):s&&l&&c?r.createElement(o.h7,i({onClick:d},c)):s&&l&&!c?r.createElement(o.oV,null):s&&!l&&c?r.createElement(o.Gb,i({onClick:d},c)):!s||l||c?c?r.createElement(o.U7,i({onClick:d},c)):r.createElement(n.YU,null):r.createElement(o.Ch,null)}},40506:(e,a,s)=>{"use strict";s.d(a,{G:()=>d});var i=s(14936),r=s(27378),n=s(97057),o=s(98376),l=s(64996);const c=["lockedBuy"],d=e=>{let a=e.hasPosition,s=e.selectedPair,d=s.lockedBuy,u=i(s,c),m=e.serverTime;return d&&a?r.createElement(o.A,null):d&&!a?r.createElement(l._,null):r.createElement(n.vk.Layout,null,r.createElement(n.GB,{selectedPair:u,serverTime:m}))};d.displayName="CloseReason"},98376:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var i=s(27378),r=s(82844),n=s(97057);const o=()=>i.createElement(n.vk.Title,{"data-test":"deal-form-close-only-stub"},i.createElement(r._,{id:"closed_trading_sell_only_title_spt",defaultMessage:"You Can Only Sell"}));o.displayName="TradeCloseOnly"},64996:(e,a,s)=>{"use strict";s.d(a,{_:()=>o});var i=s(27378),r=s(82844),n=s(97057);const o=()=>i.createElement(n.vk.Title,{"data-test":"deal-form-close-only-unavailable"},i.createElement(r._,{id:"closed_trading_sell_only_unavailable_title_spt",defaultMessage:"Asset Unavailable for Purchase"}));o.displayName="TradeCloseOnlyUnavailable"},27640:(e,a,s)=>{"use strict";s.d(a,{Ch:()=>u,Gb:()=>d,U7:()=>o,h7:()=>l,oV:()=>c});var i=s(27378),r=s(82844),n=s(97057);const o=e=>{let a=e.id,s=e.project,o=e.title,l=e.onClick;const c=i.useCallback((()=>{a&&l(a,s)}),[a,s,l]);return i.createElement(r._,{id:"spt_closedasset_stub",defaultMessage:"You can explore assets available for trading — for instance, {asset}",values:{asset:i.createElement(n.WJ,{onClick:c},o)}})},l=e=>{let a=e.id,s=e.project,o=e.title,l=e.onClick;const c=i.useCallback((()=>{a&&l(a,s)}),[a,s,l]);return i.createElement(r._,{id:"closed_trading_sell_only_suggestion_title_spt",defaultMessage:"You can only make sell trades on this asset. Try another asset, such as {asset}, which you can trade on without restrictions.",values:{asset:i.createElement(n.WJ,{onClick:c},o)}})},c=()=>i.createElement(r._,{id:"closed_trading_sell_only_description_spt",defaultMessage:"To trade without restrictions, choose another asset"}),d=e=>{let a=e.id,s=e.project,o=e.title,l=e.onClick;const c=i.useCallback((()=>{a&&l(a,s)}),[a,s,l]);return i.createElement(r._,{id:"closed_trading_sell_only_unavailable_suggestion_title_spt",defaultMessage:"Try another asset, such as {asset}, which you can trade on without restrictions",values:{asset:i.createElement(n.WJ,{onClick:c},o)}})},u=()=>i.createElement(r._,{id:"closed_trading_sell_only_unavailable_description_spt",defaultMessage:"To trade without restrictions, choose another asset"})},67292:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={link:"_2gPPqyLpHMlR"}},5255:(e,a,s)=>{"use strict";s.d(a,{b:()=>o});var i=s(27378),r=s(82844),n=s(67292);const o=e=>{let a=e.onClick;return i.createElement("span",{className:n.Z.link,onClick:a},i.createElement(r._,{id:"ct_spt_buy_deposit"}))}},57568:(e,a,s)=>{"use strict";s.d(a,{c:()=>o});var i=s(27378),r=s(82844),n=s(80479);const o=e=>{let a=e.onClick,s=e.quantity,o=e.disabled;return i.createElement(n.j,{onClick:a,description:i.createElement(r._,{id:"ct_spt_units",defaultMessage:"Volume: {qty}",values:{qty:s}}),dataTest:"stocks-open-position-details",disabled:o},i.createElement(r._,{id:"ct_spt_position",defaultMessage:"Position Details"}))}},16694:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3hqivmsfo67m",text:"_16kDeZuwwTV5",description:"hmkhn08v9oNH"}},43119:(e,a,s)=>{"use strict";s.d(a,{Y:()=>l});var i=s(27378),r=s(17302),n=s(82844),o=s(16694);const l=e=>{let a=e.onClick;return i.createElement("div",{className:o.Z.host},i.createElement("h3",{className:o.Z.text},i.createElement(n._,{id:"spt_demo_is_prohibited_here",defaultMessage:"This trading mode is unavailable on a Demo account."})),i.createElement("span",{className:o.Z.description},i.createElement(n._,{id:"spt_go_to_real",defaultMessage:"Buying and selling are only possible on a Live account."})),i.createElement(r.zx,{fullWidth:!0,size:"l",noWrap:!0,onClick:a},i.createElement(n._,{id:"spt_change_account",defaultMessage:"Change Account"})))}},72879:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={disclaimer:"nhKVN4IjnMUG"}},97550:(e,a,s)=>{"use strict";s.d(a,{e:()=>n});var i=s(27378),r=s(72879);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.disclaimer},a)}},32089:(e,a,s)=>{"use strict";s.d(a,{b:()=>c});var i=s(49491),r=s(14936),n=s(27378),o=s(95029);const l=["maximumFractionDigits","minimumFractionDigits"],c=e=>{let a=e.maximumFractionDigits,s=void 0===a?2:a,c=e.minimumFractionDigits,d=void 0===c?2:c,u=r(e,l);return n.createElement(o.ih,i({maximumFractionDigits:s,minimumFractionDigits:d},u))}},26049:(e,a,s)=>{"use strict";s.d(a,{q:()=>c});var i=s(49491),r=s(14936),n=s(27378),o=s(95029);const l=["maximumFractionDigits","minimumFractionDigits"],c=e=>{let a=e.maximumFractionDigits,s=void 0===a?2:a,c=e.minimumFractionDigits,d=void 0===c?2:c,u=r(e,l);return n.createElement(o.l1,i({style:"percent",maximumFractionDigits:s,minimumFractionDigits:d},u))}},23059:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={input:"_1-PbfSc4nvq7",number:"GNPoxS9rD6w_",label:"_3ws-nKus-g1X",isOffsetLabel:"_2SoicPY1EqH7",row:"_3IWkOQovAlsZ",field:"_2YdoMfXiKAxw",keyboard:"_3EW7y9Pjx-9p",hidden:"_2f4L_pUIP52K",charsWrapper:"_1hHHQn_dpTc8",applyButton:"_2VTeKMA4qcK4"}},45743:(e,a,s)=>{"use strict";s.d(a,{I:()=>p});var i=s(49491),r=s(2243),n=s(14936),o=s(27378),l=s(60042),c=s(17302),d=s(55921),u=s(23059);const m=["error","innerLabel","renderTopLabel","renderBottomLabel","maxItem","minItem","placeholder","value","defaultValue","onInputClick","onKeyboardHide","isOffsetLabel","setValue"],p=e=>{let a=e.error,s=e.innerLabel,p=e.renderTopLabel,h=e.renderBottomLabel,v=(e.maxItem,e.minItem,e.placeholder),g=e.value,_=e.defaultValue,f=e.onInputClick,E=e.onKeyboardHide,S=(e.isOffsetLabel,e.setValue),y=n(e,m);const b=o.useState(g||""),C=r(b,2),T=C[0],A=C[1],k=o.useState(!1),w=r(k,2),N=w[0],R=w[1],I=e=>{const a=(0,d.v)(e);Number(a)>=0&&Number(e)!==Number(g)&&S(Number(e)),A(a)};return o.useEffect((()=>{Number(g)!==Number(T)&&I(g)}),[g]),o.useEffect((()=>{_&&""===T&&!N&&I(_)}),[_]),o.createElement("div",{className:u.Z.input},o.createElement("span",{className:l(u.Z.label,u.Z.isOffsetLabel)},p()),o.createElement("div",{className:u.Z.row},o.createElement(c.nv,i(i({},y),{},{inputProps:{classNameCharsWrapper:u.Z.charsWrapper,maxLength:9,placeholder:v,onClick:f,type:"text",step:.01,inputMode:"decimal",lang:"en_EN"},label:s,labelOnTop:!0,onChange:e=>{I(e.currentTarget.value),N||R(!0)},onBlur:()=>{"0"===String(+T)&&A(""),E&&E()},value:T,name:"quantity",className:u.Z.field,classNameInput:u.Z.number,error:""!==T?a:null}))),h&&o.createElement("span",{className:l(u.Z.label,u.Z.isOffsetLabel)},h({value:T})))}},318:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_240jujooB28l",text:"_1nmqFEFB0SKw",iconHolder:"_6LIl1sKborVo",iconFigure:"Vif2MNbHUgrU",link:"_2G_VpPUUrKVF"}},88086:(e,a,s)=>{"use strict";s.d(a,{t:()=>l});var i=s(27378),r=s(82844),n=s(77740),o=s(318);const l=e=>{let a=e.onClick;return i.createElement("div",{className:o.Z.host},i.createElement("div",{className:o.Z.iconHolder},i.createElement("figure",{className:o.Z.iconFigure},i.createElement(n.Gc9,null))),i.createElement("p",{className:o.Z.text},a?i.createElement(r._,{id:"ct_spt_stub_from_pd_to_ph",defaultMessage:"No units currently available. Go to the <a>Buy section</a> to continue trading.",values:{a(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i.createElement("span",{className:o.Z.link,onClick:a},s)}}}):i.createElement(r._,{id:"ct_spt_no_position_stub_nolink_1",defaultMessage:"Information on your positions will appear here."})))}},80479:(e,a,s)=>{"use strict";s.d(a,{j:()=>n});var i=s(27378),r=s(17302);const n=e=>{let a=e.children,s=e.description,n=e.onClick,o=e.dataTest,l=e.disabled;return i.createElement(r.zx,{variant:"secondary",noWrap:!0,size:"s",horizontalAlign:"center",fullWidth:!0,understring:s,onClick:n,dataTest:o,disabled:l},a)}},88929:(e,a,s)=>{"use strict";s.d(a,{E:()=>o});var i=s(27378),r=s(82844),n=s(80479);const o=e=>{let a=e.onClick,s=e.disabled;const o=i.useCallback((()=>{"function"==typeof a&&a()}),[a]);return i.createElement(n.j,{onClick:o,dataTest:"stocks-open-sell-btn",disabled:s},i.createElement(r._,{id:"ct_spt_sell",defaultMessage:"Sell"}))}},72335:(e,a,s)=>{"use strict"},68441:(e,a,s)=>{"use strict";s(27378),s(60042),s(77740),s(17302),s(72335)},4542:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={info:"_3_NH9ZzzgYRE",price:"dLLE6Mc-aE_7",priceTitle:"MM7Mx9G0xPRv",buyPrice:"_1m-a6kltZWrI",pairName:"_2l6jBBKzpS0I",pairIcon:"UU-nw8XE1jHx",start:"_1kA4ODgptV9S",end:"_35M9-lM7i0X5",tooltipIcon:"Iac8ulVpaLnD"}},50715:(e,a,s)=>{"use strict";s.d(a,{G:()=>l});var i=s(27378),r=s(32089),n=s(88116),o=s(4542);const l=e=>{let a=e.price,s=void 0===a?12:a,l=e.currency,c=void 0===l?"demo":l,d=e.icon,u=e.title,m=void 0===u?"Apple":u,p=e.tooltip,h=e.content;return i.createElement("div",{className:o.Z.info},i.createElement("div",{className:o.Z.start},d,i.createElement("span",{className:o.Z.pairName,"data-test":"stock-info-pair-name"},m)),i.createElement("div",{className:o.Z.end},i.createElement("span",{className:o.Z.price},i.createElement(r.b,{currency:c,value:s,"data-test":"stock-info-price"})),i.createElement("div",{className:o.Z.buyPrice},i.createElement("span",{className:o.Z.priceTitle},h),i.createElement(n.u,{content:p}))))}},1187:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={controls:"_3e5m7ICXByP3"}},44698:(e,a,s)=>{"use strict";s.d(a,{E:()=>v});var i=s(2243),r=s(27378),n=s(50649),o=s(73598),l=s(8141),c=s(82844),d=s(17302),u=s(74262),m=s(95029),p=s(63803),h=s(1187);const v=(0,n.observer)((e=>{let a=e.deal,s=e.lastOpenPairId,n=e.pair,v=e.onSell,g=e.onBuy,_=e.onOpenCard,f=e.onCloseCard;const E=r.useCallback((()=>{v(a.pairId)}),[a,v]),S=r.useCallback((()=>{g(a.pairId)}),[a,g]),y=r.useState(n.id===s),b=i(y,2),C=b[0],T=b[1],A=r.useCallback((()=>{C||"function"!=typeof _||_(),C&&"function"==typeof f&&f(),T(!C)}),[T,C]);return r.useEffect((()=>{C||s!==n.id||T(!0)}),[T,s]),r.createElement(u.WT,{"data-id":"spt-".concat(a.pairId),"data-test":"deal-current-card-spt",grouped:!1,isOpened:C,selected:C,onClick:A,hostRef:null,dir:(0,l.L)()},r.createElement(u.WT.Header,null,r.createElement(u.Eh,{grouped:!1,pairId:n.id,icon:n.icon,pairTitle:n.title,subTitle:r.createElement(c._,{id:"ct_spt_trade_mode_name",defaultMessage:"Stocks"})},r.createElement(o.Qj,null,(()=>r.createElement(r.Fragment,null,r.createElement(u.tK,null,r.createElement(m.ih,{"data-test":"deal-current-card-spt-net-revenue",minimumFractionDigits:2,currency:n.currency,value:a.netRevenue})),r.createElement(u.tK,null,r.createElement(m.oI,{value:a.netPnl},r.createElement(m.ih,{"data-test":"deal-current-card-spt-net-pnl",minimumFractionDigits:2,currency:n.currency,value:a.netPnl})))))))),r.createElement(u.WT.Body,null,r.createElement(r.Fragment,null,r.createElement(p.r,{deal:a,pair:n}),r.createElement("div",{className:h.Z.controls},n.lockedTrading?r.createElement(d.zx,{fullWidth:!0,disabled:!0,variant:"secondary",onClick:()=>null},r.createElement(c._,{id:"deals_list_market_closed_button",defaultMessage:"Market is closed"})):r.createElement(d.xu,{fullWidth:!0,direction:"row",gap:"s"},r.createElement(d.zx,{onClick:E,size:"s",variant:"secondary",fullWidth:!0,dataTest:"stocks-open-sell-btn"},r.createElement(c._,{id:"ct_spt_sell",defaultMessage:"Sell"})),r.createElement(d.zx,{onClick:S,size:"s",variant:"secondary",fullWidth:!0,dataTest:"stocks-open-buy-more-btn"},r.createElement(c._,{id:"ct_spt_buymore",defaultMessage:"Buy More"})))))))}))},80462:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3iv2VLVzT736",link:"_2BHKhbbXjnpV"}},62947:(e,a,s)=>{"use strict";s.d(a,{E:()=>p});var i=s(49491),r=s(2243),n=s(27378),o=s(50649),l=s(66713),c=s(82844),d=s(97550),u=s(44698),m=s(80462);const p=(0,o.observer)((e=>{let a=e.deals,s=e.pairService,o=e.scrollToHash,p=e.onBuy,h=e.onClickStub,v=e.onCloseCard,g=e.onOpenCard,_=e.onSell;const f=n.useState(null==o?void 0:o.id),E=r(f,2),S=E[0],y=E[1];n.useEffect((()=>{(null==o?void 0:o.id)&&y(S)}),[o]);const b=(null==o?void 0:o.id)||S,C=b?b.replace("".concat(l.Fw.STOCKS,"-"),""):null;return n.createElement("div",{className:m.Z.host},a.length?a.map((e=>{const a=s.getPair(e.pairId);return a?n.createElement(u.E,i({key:e.pairId,deal:e,pair:a,lastOpenPairId:C},{onBuy:p,onCloseCard:v,onOpenCard:g,onSell:_})):null})):n.createElement(d.e,null,n.createElement(c._,{id:"ct_spt_no_position_stub",defaultMessage:"Information on your positions will appear here. To add a position <a>choose an asset</a> from the list first.",values:{a(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return n.createElement("a",{className:m.Z.link,onClick:h},a)}}})))}))},63803:(e,a,s)=>{"use strict";s.d(a,{r:()=>m});var i=s(27378),r=s(73598),n=s(82844),o=s(95029),l=s(74262),c=s(88116),d=s(26049),u=s(32089);const m=e=>{let a=e.deal,s=e.pair;return i.createElement(l.RQ,{"data-test":"deal-current-card-details-spt"},i.createElement(r.Qj,null,(()=>i.createElement(l.nN,{data:i.createElement(n._,{id:"ct_spt_sell_price",defaultMessage:"Bid Price"}),value:i.createElement(u.b,{"data-test":"stocks-current-bid-price",value:a.sellPrice,currency:s.currency}),icon:i.createElement(c.u,{content:i.createElement(n._,{id:"ct_spt_sell_price_tooltip",defaultMessage:"Price at which you will sell a unit. It is equal to the highest price stock exchange buyers are ready to pay for a share."})})}))),i.createElement(r.Qj,null,(()=>i.createElement(l.nN,{data:i.createElement(n._,{id:"ct_spt_avgbuyprice",defaultMessage:"Avg Buy Price"}),value:i.createElement(u.b,{"data-test":"stocks-current-avg-buy-price",value:a.avgBuyPrice,currency:s.currency}),icon:i.createElement(c.u,{content:i.createElement(n._,{id:"ct_spt_avgbuyprice_tooltip",defaultMessage:"Average price you paid for units in the position. It is equal to position investments divided by position volume."})})}))),i.createElement("br",null),i.createElement(r.Qj,null,(()=>i.createElement(l.nN,{data:i.createElement(n._,{id:"ct_spt_position_volume",defaultMessage:"Position Volume"}),value:i.createElement("span",{"data-test":"stocks-current-volume"},a.quantity)}))),i.createElement(r.Qj,null,(()=>i.createElement(l.nN,{data:i.createElement(n._,{id:"ct_spt_position_value",defaultMessage:"Position Value"}),value:i.createElement(u.b,{"data-test":"stocks-current-value",value:a.value,currency:s.currency})}))),i.createElement(r.Qj,null,(()=>i.createElement(l.nN,{data:i.createElement(n._,{id:"ct_spt_position_investments",defaultMessage:"Position Investments"}),value:i.createElement(u.b,{"data-test":"stocks-current-investments",value:a.investments,currency:s.currency}),icon:i.createElement(c.u,{content:i.createElement(n._,{id:"ct_spt_position_investments_tooltip",defaultMessage:"Position investments decreasе by average buy price when a unit is sold."})})}))),i.createElement(r.Qj,null,(()=>i.createElement(l.nN,{data:a.grossPnl>=0?i.createElement(n._,{id:"ct_spt_gross_profit",defaultMessage:"Gross Profit"}):i.createElement(n._,{id:"ct_spt_gross_loss",defaultMessage:"Gross Loss"}),value:i.createElement(u.b,{"data-test":"stocks-current-gross-pnl",value:a.grossPnl,currency:s.currency})}))),i.createElement("br",null),i.createElement(r.Qj,null,(()=>i.createElement(i.Fragment,null,i.createElement(l.nN,{data:i.createElement(n._,{id:"ct_spt_sell_ssf",defaultMessage:"Sale Success Fee"}),value:i.createElement(i.Fragment,null,i.createElement(u.b,{"data-test":"stocks-current-avg-sale-success-fee",value:a.saleSuccessFee,currency:s.currency}),"(",i.createElement(d.q,{"data-test":"stocks-current-avg-sale-success-fee-perc",value:a.avgSaleSuccessFeePerc}),")"),icon:i.createElement(c.u,{content:i.createElement(n._,{id:"ct_spt_sell_avgssf_tooltip",defaultMessage:"The fee is averaged for position if several units were bought at different times"})})}),i.createElement(l.nN,{data:i.createElement(n._,{id:"ct_spt_net_income",defaultMessage:"Net Income"}),value:i.createElement(u.b,{"data-test":"stocks-current-net-revenue",value:a.netRevenue,currency:s.currency})})))),i.createElement(r.Qj,null,(()=>i.createElement(l.nN,{data:a.netPnl>=0?i.createElement(n._,{id:"ct_stp_trades_card_netprofit",defaultMessage:"Net Profit"}):i.createElement(n._,{id:"ct_stp_trades_card_netloss",defaultMessage:"Net Loss"}),value:i.createElement(i.Fragment,null,i.createElement(o.oI,{value:a.netPnl},i.createElement(u.b,{"data-test":"stocks-current-net-pnl",value:a.netPnl,currency:s.currency}))," ",i.createElement(o.oI,{value:a.netPnlPerc},"(",i.createElement(d.q,{"data-test":"stocks-current-net-pnl-perc",value:a.netPnlPerc}),")"))}))))}},48789:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2Xfud2nCoaNz",item:"_1gsW-KEfqAKY",label:"_11cPTpKquJHf",menu:"_18hfjPx-QfkO",contextMenu:"wd3m8gCveaTW",value:"_1kpxRbj4eyHY",isFullValue:"fykN6Tist48R",isMinimalValue:"dkE1YAjaK6Ba"}},35004:(e,a,s)=>{"use strict";s.d(a,{Z:()=>h});var i=s(2243),r=s(27378),n=s(73598),o=s(60042),l=s(95029),c=s(77740),d=s(82844),u=s(32369),m=s(48789);const p=e=>{let a=e.currencies,s=e.selectedCurrency,i=e.selectCurrency;return r.createElement(u.x,{className:m.Z.contextMenu},a.map((e=>r.createElement(u.Z,{key:e,selected:s===e,onClick:()=>i(e)},"".concat(null==e?void 0:e.toUpperCase()," • ").concat((0,l.By)(e))))))},h=e=>{let a=e.summary,s=e.selectedCurrency,u=e.selectCurrency,h=e.currencies,v=e.visible;const g=r.useRef(null),_=r.useState(!1),f=i(_,2),E=f[0],S=f[1],y=r.useCallback((()=>S(!E)),[E]),b=r.useCallback((()=>S(!1)),[]);(0,l.O3)(g,b);const C=(String(a.netRevenue)+String(a.netPnl)).length>16;return r.createElement(r.Fragment,null,v?r.createElement("div",{className:m.Z.host},r.createElement("div",{className:m.Z.item},r.createElement("div",{ref:g,className:o(m.Z.label,m.Z.menu),onClick:y},E&&r.createElement(p,{selectedCurrency:s,currencies:h,selectCurrency:u}),r.createElement(d._,{id:"spt_total_value_currency",defaultMessage:"Total Value in {currency}",values:{currency:null==s?void 0:s.toUpperCase()}}),r.createElement(c.BDo,null)),r.createElement("div",{className:o(m.Z.value,{[m.Z.isFullValue]:!C,[m.Z.isMinimalValue]:C})},r.createElement(n.Qj,null,(()=>r.createElement(l.ih,{"data-test":"stocks-portfolio-net-revenue",value:a.netRevenue,minimumFractionDigits:2,maximumFractionDigits:2,currency:a.currency}))))),r.createElement("div",{className:m.Z.item},r.createElement(n.Qj,null,(()=>r.createElement(r.Fragment,null,r.createElement("div",{className:m.Z.label},a.netPnl>=0?r.createElement(d._,{id:"ct_stp_trades_card_netprofit",defaultMessage:"Net Profit"}):r.createElement(d._,{id:"ct_stp_trades_card_netloss",defaultMessage:"Net Loss"})),r.createElement("div",{className:o(m.Z.value,{[m.Z.isFullValue]:!C,[m.Z.isMinimalValue]:C})},r.createElement(l.oI,{value:a.netPnl},r.createElement(l.ih,{"data-test":"stocks-portfolio-net-pnl",value:a.netPnl,minimumFractionDigits:2,maximumFractionDigits:2,currency:a.currency}))," ",r.createElement(l.oI,{value:a.netPnl},"(",r.createElement(l.p7,{"data-test":"stocks-portfolio-net-pnl-perc",value:a.netPnlPerc}),")"))))))):null)}},23367:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_37y9Krawo1Dk"}},97866:(e,a,s)=>{"use strict";s.d(a,{n:()=>n});var i=s(27378),r=s(23367);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.host},a)}},94257:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"iCqkeQZLNiOE",icon:"_3ySVA2UBg-l2"}},88116:(e,a,s)=>{"use strict";s.d(a,{u:()=>m});var i=s(49491),r=s(14936),n=s(27378),o=s(77740),l=s(17302),c=s(94257);const d=["basePlacement"],u=["ref"],m=e=>{let a=e.content;return n.createElement(l.u,{distance:4,arrow:!0,transition:!0,disablePortal:!0,delay:80,content:e=>{let s=e.basePlacement,o=r(e,d);return n.createElement(l._v,i({className:c.Z.host,placement:s},o),a)}},(e=>{let a=e.ref,s=r(e,u);return n.createElement("span",i({ref:a},s),n.createElement(o.T08,{className:c.Z.icon}))}))}},36133:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1uFHFcry6ZlE",container:"_3MlgbbHJ2QT3"}},37141:(e,a,s)=>{"use strict";s.d(a,{o:()=>n});var i=s(27378),r=s(36133);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.host},i.createElement("div",{className:r.Z.container},a))}},65346:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2JyECQgKFK_t",content:"ZoEJJ6YkIK3R",contentWithPadding:"_3IO8cUP1CoVb",footer:"_3eNZ75NYA-Op"}},88819:(e,a,s)=>{"use strict";s.d(a,{s:()=>l});var i=s(27378),r=s(60042),n=s(8141),o=s(65346);const l=e=>{let a=e.slotContent,s=e.slotFooter,l=e.isFullContentWidth;const c=(0,n.L)();return i.createElement("div",{className:o.Z.host,dir:c},i.createElement("div",{className:r(o.Z.content,{[o.Z.contentWithPadding]:!l})},a),i.createElement("div",{className:o.Z.footer},s))}},55921:(e,a,s)=>{"use strict";s.d(a,{v:()=>i});const i=e=>{const a=String(e),s=new RegExp("((([1-9]+[0-9]*)|[0])((([.,])([0-9]{0,2}))|(([.,])([1-9]{0,2}))))|([1-9]+[0-9]*)|[0]").exec(a);return String(s&&s[0]||"").replace(",",".")}},18207:(e,a,s)=>{"use strict";s.d(a,{Ek:()=>h.E,Eo:()=>c.E,GB:()=>l.G,Ir:()=>v.I,JZ:()=>A.JZ,Oo:()=>y.O,PO:()=>g.P,Uh:()=>_.U,Vf:()=>E.V,XS:()=>T.X,Xn:()=>S.X,Xx:()=>b.X,Yj:()=>r.Y,ZT:()=>d.Z,cO:()=>n.c,cq:()=>C.c,fB:()=>f.f,lo:()=>p.l,mI:()=>A.mI,nC:()=>u.n,o2:()=>m.o,px:()=>i.p,tq:()=>o.t});s(95104);var i=s(90895),r=s(43119),n=s(57568),o=(s(68441),s(80479),s(88086),s(92931)),l=s(40506),c=(s(36502),s(88116),s(97550),s(62947)),d=s(35004),u=(s(63803),s(97866)),m=s(37141),p=s(41363),h=s(88929),v=s(10215),g=s(78914),_=s(28821),f=s(70380),E=s(81563),S=s(95287),y=s(33488),b=s(66776),C=s(84427),T=(s(53469),s(9718)),A=s(14449)},81563:(e,a,s)=>{"use strict";s.d(a,{V:()=>n});var i=s(27378),r=s(36502);const n=e=>{let a=e.accountList,s=e.selectedAccountId,n=e.onClick;return i.createElement(i.Fragment,null,a.map((e=>i.createElement(r.N,{key:e.id,account:e,selectedAccountId:s,onClick:n}))))}},39420:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={text:"_1RwMQ-1HzZmm",avgSsf:"_2FjT67ydng2T",inputLabel:"YkHEbGuvC8Ns",limitInput:"_2JUAyu7ADYZv",contentIndent:"_3UsBN19IrJy9",availableMinQuantity:"_1pG4dLgml7pC",limitLinkActive:"_3U_2s_6sW3tG",limitErrorLinkActive:"_2z9-qORKR8JC"}},10215:(e,a,s)=>{"use strict";s.d(a,{I:()=>N});var i=s(2243),r=s(14449),n=s(27378),o=s(60042),l=s(82844),c=s(95029),d=s(34225),u=s(52649),m=s(58770),p=s(38180),h=s(5255),v=s(26049),g=s(32089),_=s(45743),f=s(50715),E=s(88819),S=s(88116),y=s(39420);const b=e=>{let a=e.title,s=e.value,i=e.setValue,r=e.isShowDeposit,c=e.goToDeposit;return n.createElement("div",{className:o(y.Z.inputLabel,y.Z.limitInput)},n.createElement("span",{className:y.Z.availableMinQuantity},n.createElement(l._,{id:"max_investment",defaultMessage:"Maximum investment: {amount}",values:{amount:n.createElement("span",{className:o(s&&y.Z.limitLinkActive),onClick:s?i:void 0,"data-test":"stocks-buy-maximum-amount"},a)}})),r&&c&&n.createElement(h.b,{onClick:c}))},C=e=>{let a=e.title,s=e.value,i=e.isError,r=e.setValue;return n.createElement("div",{className:o(y.Z.inputLabel,{[y.Z.limitInput]:!i})},n.createElement("span",{className:y.Z.availableMinQuantity},n.createElement(l._,{id:"min_investment",defaultMessage:"Minimum investment: {amount}",values:{amount:n.createElement("span",{className:o({[y.Z.limitLinkActive]:!i&&s,[y.Z.limitErrorLinkActive]:i&&s}),onClick:s?r:void 0,"data-test":"stocks-buy-minimum-amount"},a)}})))},T=e=>{let a=e.title,s=e.value,i=e.setValue,r=e.isShowDeposit,c=e.goToDeposit;return n.createElement("div",{className:o(y.Z.inputLabel,y.Z.limitInput)},n.createElement("span",{className:y.Z.availableMinQuantity},n.createElement(l._,{id:"ct_spt_buy_available",defaultMessage:"Available to buy: {buyqty}",values:{buyqty:n.createElement("span",{className:o(s&&y.Z.limitLinkActive),onClick:s?i:void 0,"data-test":"stocks-buy-maximum-count"},a)}})),r&&c&&n.createElement(h.b,{onClick:c}))},A=e=>{let a=e.title,s=e.value,i=e.isError,r=e.setValue;return n.createElement("div",{className:o(y.Z.inputLabel,{[y.Z.limitInput]:!i})},n.createElement("span",{className:y.Z.availableMinQuantity},n.createElement(l._,{id:"ct_spt_buy_minqty",defaultMessage:"Available to buy: {minqty}",values:{minqty:n.createElement("span",{className:o({[y.Z.limitLinkActive]:!i&&s,[y.Z.limitErrorLinkActive]:i&&s}),onClick:s?r:void 0,"data-test":"stocks-buy-minimum-count"},a)}})))},k=e=>{let a=e.count,s=e.amount,i=e.currency;return n.createElement("div",{className:y.Z.inputLabel},n.createElement("span",{className:y.Z.availableMinQuantity},n.createElement(l._,{id:"spt_qty_for_amount",defaultMessage:"{qty} units for {amount}",values:{qty:n.createElement("span",{"data-test":"stocks-buy-qty-amount-qty"},a),amount:n.createElement(g.b,{"data-test":"stocks-buy-qty-amount-amount",currency:i,value:s})}})))},w=e=>{let a=e.count,s=e.amount,i=e.currency;return n.createElement("div",{className:y.Z.inputLabel},n.createElement("span",{className:y.Z.availableMinQuantity},n.createElement(l._,{id:"spt_amount_for_qty",defaultMessage:"{amount} for {count} units",values:{qty:n.createElement("span",{"data-test":"stocks-buy-amount-qty-qty"},a),amount:n.createElement(g.b,{"data-test":"stocks-buy-amount-qty-amount",currency:i,value:s})}})))},N=e=>{let a=e.accountAmount,s=e.accountName,o=e.askPrice,h=e.accountCurrency,N=e.convertQuote,R=e.pairCurrency,I=e.errorValidation,D=e.goToDeposit,O=e.icon,L=e.isLoading,M=e.onBuy,P=e.onInputCountClick,x=e.onInputAmountClick,F=e.pairTitle,B=e.purchaseFee,Z=e.saleSuccessFee,U=e.setErrorValidation,H=e.setTotalCount,G=e.totalCount,V=e.amount,W=e.convertCount,j=e.convertAmount,z=e.setAmount,q=e.onSelectInput,K=e.openAccountListPanel,Y=e.onPanelMount,X=e.onPanelUnmount,J=e.onSetBuyAvailableCount,Q=e.maxItemToBuy,$=e.minItemToBuy,ee=e.minAmountToBuy,te=e.maxAmountToBuy,ae=e.totalAmount,se=e.totalAmountInAccountCurrency;n.useEffect((()=>(Y(),X)),[]);const ie=n.useState("amount"),re=i(ie,2),ne=re[0],oe=re[1],le=R!==h&&"demo"!==h,ce=G&&G!==r.yD,de=n.useRef(ce),ue=e=>{let a=e.error,s=e.MinLimit;switch(a){case r.mI.errorMax:return n.createElement(l._,{id:"ct_spt_buy_funds",defaultMessage:"Not enough funds."});case r.mI.errorMin:return s;default:return""}},me=e=>{const a=(e=>e>Q?r.mI.errorMax:r.mI.none)(e),s=(e=>e<$?r.mI.errorMin:r.mI.none)(e);return(s||a)!==I&&U(s||a),[s,a]},pe=n.useCallback((e=>{de.current=!0,H(e)}),[H]),he=n.useCallback((()=>{J&&J(),H(Q)}),[H,Q,J]),ve=n.useCallback((()=>{J&&J(),H($)}),[H,$,J]),ge=n.useCallback((e=>{de.current=!0,z(e)}),[z]),_e=n.useCallback((()=>{J&&J(),z(te)}),[z,te]),fe=n.useCallback((()=>{J&&J(),z(ee)}),[z,ee]),Ee=n.useCallback((()=>{const e=me(G),a=i(e,2),s=a[0];return a[1]||s?Promise.reject():M(ne)}),[G,ne,M]);n.useEffect((()=>{de.current?me(G):a||H(r.yD)}),[me,G,Q,$]);const Se=I===r.mI.errorMax,ye=I===r.mI.errorMin,be=Boolean(I||0===se||se>a);n.useEffect((()=>{de.current?me(G):a||H(r.yD)}),[ye]);return n.createElement(E.s,{isFullContentWidth:!0,slotContent:n.createElement(n.Fragment,null,n.createElement("div",{className:y.Z.contentIndent},n.createElement(f.G,{tooltip:n.createElement(l._,{id:"ct_spt_buy_price_tooltip",defaultMessage:"Price you will pay for a unit. It is equal to the lowest price that stock exchange sellers are ready to sell a share."}),content:n.createElement(l._,{id:"ct_spt_buy_price",defaultMessage:"Ask Price"}),title:F,icon:O,price:o,currency:R}),n.createElement(d.m,{currency:h,name:s,balance:a,onClick:K})),n.createElement(c.hH,{"data-test":"buy-stocks-form-tabs",headerClassName:y.Z.contentIndent,tabs:{amount:{title:n.createElement("span",null,n.createElement(l._,{id:"amount",defaultMessage:"Amount"})," (".concat((0,c.By)(h),")")),dataTest:"stock-buy-form-amount-tab",content:()=>n.createElement("div",{className:y.Z.contentIndent},n.createElement(_.I,{"data-test":"stocks-input-buy-amount",innerLabel:n.createElement("span",{className:y.Z.label},n.createElement(l._,{id:"amount",defaultMessage:"Amount"}),", ".concat((0,c.By)(h))),renderTopLabel:()=>n.createElement(b,{value:te,title:n.createElement(g.b,{currency:h,value:te}),isShowDeposit:Se,setValue:_e,goToDeposit:D}),renderBottomLabel:e=>""===e.value?n.createElement(C,{value:ee,title:n.createElement(g.b,{currency:h,value:ee}),setValue:fe}):I?null:n.createElement(k,{currency:h,count:W,amount:j}),error:ue({error:I,MinLimit:n.createElement(C,{value:ee,title:n.createElement(g.b,{currency:h,value:ee}),setValue:fe,isError:!0})}),maxItem:te,minItem:ee,value:V,defaultValue:ee,setValue:ge,onInputClick:x}))},quantity:{title:n.createElement(l._,{id:"ct_spt_position_qty",defaultMessage:"Quantity"}),dataTest:"stock-buy-form-qty-tab",content:()=>n.createElement("div",{className:y.Z.contentIndent},n.createElement(_.I,{"data-test":"stocks-input-buy-qty",innerLabel:n.createElement("span",{className:y.Z.label},n.createElement(l._,{id:"ct_spt_position_qty",defaultMessage:"Quantity"})),renderTopLabel:()=>n.createElement(T,{title:Q,value:Q,setValue:he,isShowDeposit:Se,goToDeposit:D}),renderBottomLabel:e=>""===e.value?n.createElement(A,{title:$,value:$,setValue:ve}):I?null:n.createElement(w,{currency:h,count:W,amount:j}),error:ue({error:I,MinLimit:n.createElement(A,{title:$,value:$,setValue:ve,isError:!0})}),maxItem:Q,minItem:$,value:G,defaultValue:$,setValue:pe,onInputClick:P}))}},selected:ne,handleSelect:e=>{q&&q(e),oe(e)}}),n.createElement("div",{className:y.Z.contentIndent},n.createElement(m.o,{className:"stocks-calculation_list"},n.createElement(p.B,{accentedValue:p.l.accentedBold,title:n.createElement(l._,{id:"ct_spt_buy_purchasefee",defaultMessage:"Purchase Fee"}),value:ye?null:n.createElement(v.q,{"data-test":"stocks-buy-purchase-fee",value:B})}),le&&n.createElement(n.Fragment,null,n.createElement(p.B,{title:n.createElement(l._,{id:"spt_stock_currency_total",defaultMessage:"Total in {spt_stck_crrnc}",values:{spt_stck_crrnc:R.toUpperCase()}}),value:ye?null:n.createElement(g.b,{"data-test":"stocks-buy-total",currency:R,value:ae})}),n.createElement(p.B,{title:n.createElement(l._,{id:"ct_spt_exchange_rate",defaultMessage:"Exchange Rate"}),value:ye?null:n.createElement(n.Fragment,null,R.toUpperCase()," ",n.createElement(g.b,{currency:R,value:1})," = ",h.toUpperCase()," ",n.createElement(g.b,{"data-test":"stocks-buy-exchange-rate",currency:h,value:N}))}))),n.createElement("div",{className:y.Z.text},n.createElement(l._,{id:"ct_spt_otc_ssf",defaultMessage:"Sale Success Fee Rate for a profitable unit sale is {ssf}",values:{ssf:n.createElement("strong",null,n.createElement(v.q,{value:Z}))}}),n.createElement("span",{className:y.Z.avgSsf},n.createElement(S.u,{content:n.createElement(l._,{id:"ct_spt_otc_ssf_avg",defaultMessage:"The fee is averaged for position if several units were bought at different times"})}))))),slotFooter:n.createElement(u.K,{disabled:be,loading:L,onClick:Ee,"data-test":"stocks-buy-btn"},0===se?n.createElement(l._,{id:"ct_spt_buy",defaultMessage:"Buy"}):n.createElement(l._,{id:"spt_buy_for",defaultMessage:"Buy for {buy_for}",values:{buy_for:n.createElement(g.b,{"data-test":"stocks-buy-account-total",value:se,currency:h})}}))})}},85126:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={row:"IXKfu3jzTWet",pair:"_1l97um6rGa4z",group:"_1MbFdRNN8fI7",portfolioBtn:"_3cNtv8p-6XnG",annotation:"_3w-NGZ-VNRwh"}},78914:(e,a,s)=>{"use strict";s.d(a,{P:()=>_});var i=s(27378),r=s(73598),n=s(82844),o=s(95029),l=s(58770),c=s(38180),d=s(26049),u=s(32089),m=s(88116),p=s(88086),h=s(52649),v=s(88819),g=s(85126);const _=e=>{let a=e.isPairLocked,s=e.isEmpty,_=e.pairIcon,f=e.positionDetails,E=e.currency,S=void 0===E?"demo":E,y=e.pairTitle,b=e.openSellPanel,C=e.openHistory,T=e.openBuyPanel,A=e.children,k=null;return s?k=i.createElement(p.t,{onClick:a?void 0:T}):f&&(k=i.createElement("div",null,i.createElement(r.Qj,null,(()=>i.createElement("div",{className:g.Z.row},i.createElement("h2",{className:g.Z.pair},y),_))),i.createElement(l.o,{isDetails:!0},i.createElement("div",{className:g.Z.group},i.createElement(r.Qj,null,(()=>i.createElement(c.B,{title:i.createElement(i.Fragment,null,i.createElement(n._,{id:"ct_spt_sell_price",defaultMessage:"Bid Price"}),i.createElement(m.u,{content:i.createElement(n._,{id:"ct_spt_sell_price_tooltip",defaultMessage:"Price at which you will sell a unit. It is equal to the highest price stock exchange buyers are ready to pay for a share."})})),value:i.createElement(u.b,{"data-test":"stocks-portfolio-bid-price",currency:S,value:f.sellPrice})}))),i.createElement(r.Qj,null,(()=>i.createElement(c.B,{title:i.createElement(i.Fragment,null,i.createElement(n._,{id:"ct_spt_avgbuyprice",defaultMessage:"Avg Buy Price"}),i.createElement(m.u,{content:i.createElement(n._,{id:"ct_spt_avgbuyprice_tooltip",defaultMessage:"Average price you paid for units in the position. It is equal to position investments divided by position volume."})})),value:i.createElement(u.b,{"data-test":"stocks-portfolio-avg-buy-price",currency:S,value:f.avgBuyPrice})})))),i.createElement("div",{className:g.Z.group},i.createElement(r.Qj,null,(()=>i.createElement(i.Fragment,null,i.createElement(c.B,{title:i.createElement(n._,{id:"ct_spt_position_volume",defaultMessage:"Position Volume"}),value:i.createElement("span",{"data-test":"stocks-portfolio-volume"},f.quantity)}),i.createElement(c.B,{title:i.createElement(n._,{id:"ct_spt_position_value",defaultMessage:"Position Value"}),value:i.createElement(u.b,{"data-test":"stocks-portfolio-value",currency:S,value:f.value})}),i.createElement(c.B,{title:i.createElement(n._,{id:"ct_spt_position_investments",defaultMessage:"Position Investments"}),value:i.createElement(u.b,{"data-test":"stocks-portfolio-investments",currency:S,value:f.investments})})))),i.createElement(r.Qj,null,(()=>i.createElement(c.B,{title:f.grossPnl>=0?i.createElement(n._,{id:"ct_spt_gross_profit",defaultMessage:"Gross Profit"}):i.createElement(n._,{id:"ct_spt_gross_loss",defaultMessage:"Gross Loss"}),value:i.createElement(u.b,{"data-test":"stocks-portfolio-gross-pnl",currency:S,value:f.grossPnl})})))),i.createElement("div",{className:g.Z.group},i.createElement(r.Qj,null,(()=>i.createElement(c.B,{title:i.createElement(i.Fragment,null,i.createElement(n._,{id:"ct_spt_sell_ssf",defaultMessage:"Sale Success Fee"})," ",i.createElement(m.u,{content:i.createElement(n._,{id:"ct_spt_sell_avgssf_tooltip",defaultMessage:"The fee is averaged for position if several units were bought at different times"})})),value:i.createElement(i.Fragment,null,i.createElement(u.b,{"data-test":"stocks-portfolio-sale-success-fee",currency:S,value:f.saleSuccessFee}),"(",i.createElement(d.q,{"data-test":"stocks-portfolio-sale-success-fee-perc",value:f.avgSaleSuccessFeePerc}),")")}))),i.createElement(r.Qj,null,(()=>i.createElement(c.B,{title:i.createElement(n._,{id:"ct_spt_net_income",defaultMessage:"Net Income"}),value:i.createElement(u.b,{"data-test":"stocks-portfolio-net-revenue",currency:S,value:f.netRevenue})}))),i.createElement(r.Qj,null,(()=>i.createElement(c.B,{title:f.netPnl>=0?i.createElement(n._,{id:"ct_stp_trades_card_netprofit",defaultMessage:"Net Profit"}):i.createElement(n._,{id:"ct_stp_trades_card_netloss",defaultMessage:"Net Loss"}),value:i.createElement(i.Fragment,null,i.createElement(o.oI,{value:f.netPnl},i.createElement(u.b,{"data-test":"stocks-portfolio-net-pnl",currency:S,value:f.netPnl}))," ",i.createElement(o.oI,{value:f.netPnlPerc},"(",i.createElement(d.q,{"data-test":"stocks-portfolio-net-pnl-perc",value:f.netPnlPerc}),")"))}))))))),i.createElement(v.s,{slotContent:k,slotFooter:i.createElement(i.Fragment,null,i.createElement("div",{className:g.Z.annotation},A),i.createElement(h.K,{disabled:s||a,onClick:b,color:"default","data-test":"stocks-open-sell-btn"},i.createElement(n._,{id:"ct_spt_sell",defaultMessage:"Sell"})),i.createElement(h.K,{className:g.Z.portfolioBtn,onClick:C,color:"default","data-test":"stocks-open-portfolio-btn"},i.createElement(n._,{id:"ct_spt_open_portfolio",defaultMessage:"Open a Portfolio"})))})}},28821:(e,a,s)=>{"use strict";s.d(a,{U:()=>y});var i=s(2243),r=s(27378),n=s(60042),o=s(14449),l=s(77740),c=s(82844),d=s(34225),u=s(52649),m=s(58770),p=s(38180),h=s(26049),v=s(32089),g=s(45743),_=s(50715),f=s(88116),E=s(88819),S=s(39420);const y=e=>{let a=e.availableForSale,s=e.avgBuyPrice,y=e.accountName,b=e.accountAmount,C=e.avgSaleSuccessFeePerc,T=e.accountCurrency,A=void 0===T?"demo":T,k=e.errorValidation,w=e.icon,N=e.invested,R=e.isLoading,I=e.maxItemToSell,D=e.minItemToSell,O=e.onInputClick,L=e.onSell,M=e.onToggleDetails,P=e.onSetSellAvailableCount,x=e.pairTitle,F=e.proceeds,B=e.profitOrLoss,Z=e.saleSuccessFee,U=e.sellPrice,H=e.setErrorValidation,G=e.setTotalCount,V=e.total,W=e.totalAmountInAccountCurrency,j=e.totalCount,z=e.pairCurrency,q=e.convertQuote,K=e.onPanelMount,Y=e.onPanelUnmount;const X=r.useState(!1),J=i(X,2),Q=J[0],$=J[1],ee=z!==A&&"demo"!==A;r.useEffect((()=>(K(),Y)),[]);const te=e=>e>I?o.mI.errorMax:o.mI.none,ae=e=>e<D?o.mI.errorMin:o.mI.none,se=e=>{const a=te(e),s=ae(e);return(s||a)!==k&&H(s||a),[s,a]},ie=r.useCallback((()=>{P&&P(),G(a)}),[G,a,P]),re=r.useCallback((e=>{se(e),G(e)}),[te,ae,H,G]),ne=r.useCallback((()=>(M&&M(),$((e=>!e)))),[M,$]),oe=Boolean(k||0===W||j>I);return r.useEffect((()=>{se(j)}),[se,j,I,D]),r.createElement(r.Fragment,null,r.createElement(E.s,{slotContent:r.createElement(r.Fragment,null,r.createElement(_.G,{tooltip:r.createElement(c._,{id:"ct_spt_sell_price_tooltip",defaultMessage:"Price at which you will sell a unit. It is equal to the highest price stock exchange buyers are ready to pay for a share."}),icon:w,content:r.createElement(c._,{id:"ct_spt_sell_price",defaultMessage:"Bid Price"}),title:x,price:U,currency:z}),r.createElement(d.m,{currency:A,name:y,balance:b}),r.createElement(g.I,{"data-test":"stocks-input-sell-qty",innerLabel:r.createElement("span",{className:S.Z.label},r.createElement(c._,{id:"ct_spt_qty",defaultMessage:"Quantity (units)"})),renderTopLabel:()=>r.createElement("span",{className:n(S.Z.availableMinQuantity,S.Z.availableMinQuantityActive)},r.createElement(c._,{id:"ct_spt_sell_available",defaultMessage:"Available for Sale: {saleqty}",values:{saleqty:r.createElement("span",{className:n({[S.Z.limitLinkActive]:a}),"data-test":"stocks-sell-maximum-count",onClick:a?ie:void 0},a)}})),maxItem:I,minItem:D,value:j,setValue:re,onInputClick:O,error:(e=>{switch(e){case o.mI.errorMax:return r.createElement(c._,{id:"ct_spt_sell_maxqty",defaultMessage:"Maximum quantity: {maxqty}",values:{maxqty:I}});case o.mI.errorMin:return r.createElement(c._,{id:"ct_spt_buy_minqty",defaultMessage:"Minimum quantity: {minqty}",values:{minqty:D}});default:return""}})(k),isOffsetLabel:!0}),r.createElement(m.o,null,r.createElement(p.B,{title:r.createElement(c._,{id:"ct_spt_sell_grossproceed",defaultMessage:"Proceeds"}),value:k?null:r.createElement(v.b,{currency:z,value:F}),dataTest:"stocks-sell-panel-proceeds"}),r.createElement(p.B,{accentedValue:p.l.accentedBold,buttonClick:ne,toggled:Q,buttonTitle:r.createElement(r.Fragment,null,r.createElement(c._,{id:"ct_spt_ssf",defaultMessage:"Sale Success Fee"}),r.createElement(l.BDo,{className:"calculation-item__icon"})),value:k?null:r.createElement(v.b,{"data-test":"stocks-sell-sale-success-fee",currency:z,value:Z}),subContent:r.createElement(r.Fragment,null,r.createElement(p.B,{title:r.createElement(r.Fragment,null,r.createElement(c._,{id:"ct_spt_avgbuyprice",defaultMessage:"Avg Buy Price"}),r.createElement(f.u,{content:r.createElement(c._,{id:"ct_spt_avgbuyprice_tooltip",defaultMessage:"Average price you paid for units in the position. It is equal to position investments divided by position volume."})})),value:k?null:r.createElement(v.b,{currency:z,value:s}),dataTest:"stocks-sell-panel-avg-buy-price"}),r.createElement(p.B,{title:r.createElement(r.Fragment,null,r.createElement(c._,{id:"ct_spt_sell_invested",defaultMessage:"Invested"}),r.createElement(f.u,{content:r.createElement(c._,{id:"ct_spt_sell_invested_tooltip",defaultMessage:"Investments in the units you are selling upon purchase — average buy price multiplied by quantity of units for sale."})})),value:k?null:r.createElement(v.b,{currency:z,value:N}),dataTest:"stocks-sell-panel-invested"}),r.createElement(p.B,{title:r.createElement(c._,{id:"ct_spt_pnl",defaultMessage:"Profit and Loss"}),value:k?null:r.createElement(v.b,{currency:z,isSign:!0,value:B}),dataTest:"stocks-sell-panel-profit-and-loss"}),r.createElement(p.B,{title:r.createElement(r.Fragment,null,r.createElement(c._,{id:"ct_spt_avg_ssf_rate",defaultMessage:"Avg Sale Success Fee Rate"}),r.createElement(f.u,{content:r.createElement(c._,{id:"ct_spt_sell_avgssf_tooltip",defaultMessage:"The position average fee is averaged since fees for units bought at various trades may differ."})})),value:k?null:r.createElement(h.q,{value:C}),dataTest:"stocks-sell-panel-avg-sale-success-fee-perc"}))}),ee&&r.createElement(r.Fragment,null,r.createElement(p.B,{accentedValue:p.l.accentedBold,title:r.createElement(c._,{id:"spt_stock_currency_total",defaultMessage:"Total in {spt_stck_crrnc}",values:{spt_stck_crrnc:z.toUpperCase()}}),value:k?null:r.createElement(v.b,{"data-test":"stocks-sell-currency-total",currency:z,value:V}),dataTest:"stocks-sell-panel-stock_currency_total"}),r.createElement(p.B,{title:r.createElement(c._,{id:"ct_spt_exchange_rate",defaultMessage:"Exchange Rate"}),value:k?null:r.createElement(r.Fragment,null,z.toUpperCase()," ",r.createElement(v.b,{currency:z,value:1})," = ",A.toUpperCase()," ",r.createElement(v.b,{"data-test":"stocks-sell-convert-quote",currency:A,value:q})),dataTest:"stocks-sell-panel-exchange_rate"})))),slotFooter:r.createElement(u.K,{disabled:oe,loading:R,onClick:L,"data-test":"stocks-sell-btn"},k?r.createElement(c._,{id:"ct_spt_sell",defaultMessage:"Sell"}):r.createElement(c._,{id:"ct_spt_sell_for",defaultMessage:"Sell for {sell_for}",values:{sell_for:r.createElement(v.b,{"data-test":"stocks-sell-account-total",currency:A,value:W})}}))}))}},25936:(e,a,s)=>{"use strict";s.d(a,{H:()=>m,M:()=>u});var i=s(27378),r=s(82844),n=s(32089),o=s(52649),l=s(38180),c=s(58770),d=s(72756);const u=e=>{let a=e.deal,s=a.accountId,o=a.currency,u=a.currencyAccount,m=a.quantity,p=a.total,h=a.totalAccount,v=a.rateQuoteToAccount,g=e.icon,_=e.selectedAccount;return i.createElement(d.x,{quantity:m,slotIcon:g,slotTitle:i.createElement(r._,{id:"ct_spt_ss_purchase_title",defaultMessage:"Purchase completed"}),slotContent:i.createElement(c.o,null,i.createElement(l.B,{accentedValue:l.l.accented,title:i.createElement(r._,{id:"spt_total_in_account_currency",defaultMessage:"Total in {spt_accnt_crrnc}",values:{spt_accnt_crrnc:null==o?void 0:o.toUpperCase()}}),value:i.createElement(n.b,{currency:o,value:p})}),o!==u?i.createElement(i.Fragment,null,i.createElement(l.B,{accentedValue:l.l.accented,title:i.createElement(r._,{id:"spt_exchange_rate",defaultMessage:"Exchange Rate"}),value:i.createElement(i.Fragment,null,i.createElement(n.b,{currency:o,value:1})," ="," ",i.createElement(n.b,{currency:u,value:v}))}),i.createElement(l.B,{accentedValue:l.l.accented,title:i.createElement(r._,{id:"spt_stock_currency_total",defaultMessage:"Total in {spt_stck_crrnc}",values:{spt_stck_crrnc:null==u?void 0:u.toUpperCase()}}),value:i.createElement(n.b,{currency:u,value:h})})):null,i.createElement(l.B,{accentedValue:l.l.accented,title:i.createElement(r._,{id:"spt_trading_account_history",defaultMessage:"Trading account"}),value:i.createElement("span",null,u.toUpperCase()," #",s)})),slotFooter:s!==_.accountId?i.createElement(r._,{id:"ct_spt_ss_desc",defaultMessage:"Purchase result will be displayed in the portfolio on the account where the purchase was made from."}):null})},m=e=>{let a=e.onClick;return i.createElement(o.K,{onClick:a,"data-test":"stocks-open-portfolio-btn"},i.createElement(r._,{id:"ct_spt_openportfolio",defaultMessage:"Open a Portfolio"}))}},10305:(e,a,s)=>{"use strict";s.d(a,{I:()=>p,O:()=>m});var i=s(49491),r=s(27378),n=s(82844),o=s(52649),l=s(38180),c=s(58770),d=s(32089),u=s(72756);const m=e=>{let a=e.deal,s=a.accountId,i=a.currencyAccount,o=a.netProfitOrLossAccount,m=a.quantity,p=a.totalAccount,h=e.icon,v=e.selectedAccount;return r.createElement(u.x,{quantity:m,slotIcon:h,slotTitle:r.createElement(n._,{id:"ct_spt_ss_sale_title",defaultMessage:"Sale completed"}),slotContent:r.createElement(c.o,null,r.createElement(l.B,{accentedValue:l.l.accented,title:r.createElement(n._,{id:"spt_total_in_account_currency",defaultMessage:"Total in {spt_accnt_crrnc}",values:{spt_accnt_crrnc:null==i?void 0:i.toUpperCase()}}),value:r.createElement(d.b,{currency:i,value:p})}),r.createElement(l.B,{accentedValue:l.l.accented,title:o>0?r.createElement(n._,{id:"ct_stp_trades_card_netprofit",defaultMessage:"Net Profit"}):r.createElement(n._,{id:"ct_stp_trades_card_netloss",defaultMessage:"Net Loss"}),value:r.createElement(d.b,{currency:i,isSign:!0,value:o})}),r.createElement(l.B,{accentedValue:l.l.accented,title:r.createElement(n._,{id:"spt_trading_account_history",defaultMessage:"Trading account"}),value:r.createElement("span",null,i.toUpperCase()," #",s)})),slotFooter:s!==v.accountId?r.createElement(n._,{id:"ct_spt_ss_desc",defaultMessage:"Purchase result will be displayed in the portfolio on the account where the purchase was made from."}):null})},p=e=>r.createElement(o.K,i(i({},e),{},{"data-test":"stocks-open-history-btn"}),r.createElement(n._,{id:"ct_spt_open_ph",defaultMessage:"Open a Position History"}))},81763:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={total:"_3rhEduXaqR7z",header:"_3ATCFHWnXsZB",title:"_3IzYu-5yRVu9",quantityInfo:"__pn-Sg34IP9",quantityLabel:"_2OiII4aERzbO",quantity:"_3abPoOIcY4fx",content:"_2lBvjfZkRjAv",footer:"_3q1yuWkfb5wp"}},72756:(e,a,s)=>{"use strict";s.d(a,{x:()=>o});var i=s(27378),r=s(82844),n=s(81763);const o=e=>{let a=e.quantity,s=e.slotIcon,o=e.slotTitle,l=e.slotContent,c=e.slotFooter;return i.createElement("div",{className:n.Z.total},i.createElement("div",{className:n.Z.header},s,o&&i.createElement("span",{className:n.Z.title},o),i.createElement("div",{className:n.Z.quantityInfo},i.createElement("label",{className:n.Z.quantityLabel},i.createElement(r._,{id:"ct_spt_trades_card_qty",defaultMessage:"Quantity"})),i.createElement("span",{className:n.Z.quantity,"data-test":"stocks-buy-success-quantity"},a))),i.createElement("div",{className:n.Z.content},l),c&&i.createElement("div",{className:n.Z.footer},c))}},70380:(e,a,s)=>{"use strict";s.d(a,{f:()=>c});var i=s(27378),r=s(88819),n=s(14449),o=s(25936),l=s(10305);const c=e=>{let a=e.deal,s=e.icon,c=e.selectedAccount,d=e.analytics,u=e.onConfirm;const m=i.useCallback((()=>{"function"==typeof d.eventSuccessScreenOpenPortfolio&&null!=a&&a.operationType&&d.eventSuccessScreenOpenPortfolio(a.operationType),u()}),[null==a?void 0:a.operationType]);return i.useEffect((()=>("function"==typeof d.eventSuccessScreenOpen&&null!=a&&a.operationType&&d.eventSuccessScreenOpen(a.operationType),()=>{"function"==typeof d.eventSuccessScreenClose&&null!=a&&a.operationType&&d.eventSuccessScreenClose(a.operationType)})),[]),(null==a?void 0:a.operationType)===n.JZ.purchase?i.createElement(r.s,{slotContent:i.createElement(o.M,{deal:a,icon:s,selectedAccount:c}),slotFooter:i.createElement(o.H,{onClick:m})}):(null==a?void 0:a.operationType)===n.JZ.sale?i.createElement(r.s,{slotContent:i.createElement(l.O,{deal:a,icon:s,selectedAccount:c}),slotFooter:i.createElement(l.I,{onClick:m})}):null}},9718:(e,a,s)=>{"use strict";s.d(a,{X:()=>StockCalculateService});var i=s(59312),r=s(60521);class StockCalculateService{constructor(e,a){this.webSocket=e,this.load=this.load.bind(this),this.updateAssetDetails=this.updateAssetDetails.bind(this),this.webSocket.onChange(this.updateAssetDetails),this.webSocket.listen(),this.assetDetails=a}load(e){let a=e.accountId,s=e.asset,i=e.value,r=e.group;return this.webSocket.subscribe({accountId:a,asset:s,value:i,group:r}).then((e=>(this.updateAssetDetails(e),e)))}loadByAmount(e){let a=e.accountId,s=e.asset,i=e.value,r=e.group;return this.webSocket.subscribeByAmount&&this.webSocket.subscribeByAmount({accountId:a,asset:s,value:i,group:r}).then((e=>(this.updateAssetDetails(e),e)))}stopLoad(){return this.webSocket.unsubscribe()}updateAssetDetails(e){this.assetDetails=e}}(0,i.gn)([r.observable],StockCalculateService.prototype,"assetDetails",void 0),(0,i.gn)([r.action],StockCalculateService.prototype,"updateAssetDetails",null)},95287:(e,a,s)=>{"use strict";s.d(a,{X:()=>StocksBuyService});var i=s(59312),r=s(60521),n=s(14449);class StocksBuyService{constructor(e){this.webSocket=e,this.accountId=0,this.isLoading=!1,this.totalCount=n.yD,this.syncTotalCount=n.yD,this.amount=0,this.syncAmount=0,this.errorValidation=n.mI.none,this.buyStocks=this.buyStocks.bind(this),this.load=this.load.bind(this),this.loadPair=this.loadPair.bind(this),this.reset=this.reset.bind(this),this.setErrorValidation=this.setErrorValidation.bind(this),this.setIsLoading=this.setIsLoading.bind(this),this.setTotalCount=this.setTotalCount.bind(this),this.setAmount=this.setAmount.bind(this),this.setSyncTotalCount=this.setSyncTotalCount.bind(this),this.setSyncAmount=this.setSyncAmount.bind(this)}load(e){let a=e.showErrorMessage;this.showErrorMessage=a}setAccountId(e){this.accountId=e}setErrorValidation(e){this.errorValidation=e}setTotalCount(e){e>=0&&(this.totalCount=e)}setAmount(e){e>=0&&(this.amount=e)}setSyncTotalCount(e){e>=0&&(this.syncTotalCount=e)}setSyncAmount(e){e>=0&&(this.syncAmount=e)}reset(){this.totalCount=n.yD,this.errorValidation=n.mI.none}loadPair(e){this.pairId!==e&&(this.reset(),this.pairId=e)}buyStocks(e){let a=e.accountId,s=e.accountType,i=e.pairId;return this.setIsLoading(!0),this.webSocket.buyStocks({accountId:a,accountType:s,count:this.totalCount,pairId:i}).then((e=>(this.setIsLoading(!1),this.reset(),e))).catch((e=>{var a;return this.setIsLoading(!1),null===(a=this.showErrorMessage)||void 0===a||a.call(this,e.mess),this.reset(),Promise.reject(e)}))}setIsLoading(e){this.isLoading=e}}(0,i.gn)([r.observable],StocksBuyService.prototype,"accountId",void 0),(0,i.gn)([r.observable],StocksBuyService.prototype,"isLoading",void 0),(0,i.gn)([r.observable],StocksBuyService.prototype,"totalCount",void 0),(0,i.gn)([r.observable],StocksBuyService.prototype,"amount",void 0),(0,i.gn)([r.observable],StocksBuyService.prototype,"errorValidation",void 0),(0,i.gn)([r.action],StocksBuyService.prototype,"setAccountId",null),(0,i.gn)([r.action],StocksBuyService.prototype,"setErrorValidation",null),(0,i.gn)([r.action],StocksBuyService.prototype,"setTotalCount",null),(0,i.gn)([r.action],StocksBuyService.prototype,"setAmount",null),(0,i.gn)([r.action],StocksBuyService.prototype,"reset",null),(0,i.gn)([r.action],StocksBuyService.prototype,"setIsLoading",null)},84427:(e,a,s)=>{"use strict";s.d(a,{c:()=>StocksDealCurrentService});var i=s(49491),r=s(59312),n=s(60521),o=s(53469);class StocksDealCurrentService{constructor(e,a){this.webSocket=e,this.storage=a,this.summary={netRevenue:0,netPnl:0,netPnlPerc:0,currency:"usd"},this.collection=[],this.currencies=[],this.savedCurrency="",this.defaultCurrency="usd",this.account={id:0,group:"demo"}}get selectedCurrency(){return this.savedCurrency||this.storage.get("selectedCurrency")||this.defaultCurrency}updateDeals(e){if(e.account_id!==this.account.id)return;if(e.currency!==this.selectedCurrency)return;const a=o.g.parse(e);this.summary=i({},a.summary),[...this.collection].forEach((e=>{a.deals.some((a=>a.pairId===e.pairId))||this.collection.remove(e)})),a.deals.forEach((e=>{const a=this.collection.find((a=>a.pairId===e.pairId));a?o.g.update(a,e):this.collection.push(e)}))}selectCurrency(e){e!==this.selectedCurrency&&(this.savedCurrency=e,this.storage.set("selectedCurrency",e),this.subscribeDealsChanges())}setCurrencies(e){this.currencies=e}setDefaultCurrency(e){this.defaultCurrency=e}clearDeals(){this.collection.clear()}load(e){this.webSocket.onDealProceed(this.updateDeals),this.updateAccount(e)}updateAccount(e){this.account.id=e.id,this.account.group=e.group}subscribeDealsChanges(){this.webSocket.subscribeDealsChanges(this.account.id,this.account.group,this.selectedCurrency).then((e=>{this.updateDeals(e)}))}unsubscribeDealsChanges(){this.webSocket.unsubscribeDealsChanges()}}(0,r.gn)([n.observable],StocksDealCurrentService.prototype,"summary",void 0),(0,r.gn)([n.observable],StocksDealCurrentService.prototype,"collection",void 0),(0,r.gn)([n.observable],StocksDealCurrentService.prototype,"currencies",void 0),(0,r.gn)([n.observable],StocksDealCurrentService.prototype,"savedCurrency",void 0),(0,r.gn)([n.observable],StocksDealCurrentService.prototype,"defaultCurrency",void 0),(0,r.gn)([n.computed],StocksDealCurrentService.prototype,"selectedCurrency",null),(0,r.gn)([n.action.bound],StocksDealCurrentService.prototype,"updateDeals",null),(0,r.gn)([n.action],StocksDealCurrentService.prototype,"selectCurrency",null),(0,r.gn)([n.action],StocksDealCurrentService.prototype,"setCurrencies",null),(0,r.gn)([n.action],StocksDealCurrentService.prototype,"setDefaultCurrency",null)},53469:(e,a,s)=>{"use strict";s.d(a,{g:()=>DealCurrentModelSpt});var i=s(14936);const r=["assets"];class DealCurrentModelSpt{static parse(e){const a=e.assets,s=i(e,r);return{deals:DealCurrentModelSpt.parseDeals(a),summary:DealCurrentModelSpt.parseSummary(s)}}static parseDeals(e){return e?e.map((e=>({pairId:e.asset,sellPrice:e.sell_price,avgBuyPrice:e.avg_buy_price,quantity:e.quantity_float,value:e.value,investments:e.investments,grossPnl:e.gross_pnl,saleSuccessFee:e.sale_success_fee,avgSaleSuccessFeePerc:e.avg_sale_success_fee_perc,netRevenue:e.net_revenue,netPnl:e.net_pnl,netPnlPerc:e.net_pnl_perc}))):[]}static parseSummary(e){var a,s,i,r;return{netRevenue:null!==(a=e.net_revenue)&&void 0!==a?a:0,netPnl:null!==(s=e.net_pnl)&&void 0!==s?s:0,netPnlPerc:null!==(i=e.net_pnl_perc)&&void 0!==i?i:0,currency:null!==(r=e.currency)&&void 0!==r?r:"usd"}}static update(e,a){for(const s in a)e[s]=a[s]}}},33488:(e,a,s)=>{"use strict";s.d(a,{O:()=>StocksPortfolioService});var i=s(59312),r=s(29955),n=s(60521),o=s(75123);class StocksPortfolioService{constructor(e){this.webSocket=e,this.positionsDetailsByAccountId={},this.getPositionDetails=this.getPositionDetails.bind(this),this.load=this.load.bind(this),this.updatePositionsDetails=this.updatePositionsDetails.bind(this),this.checkIsPortfolioExist=this.checkIsPortfolioExist.bind(this)}load(){return this.webSocket.onPositionsDetailsChange(this.updatePositionsDetails),this.webSocket.loadPositionsDetails((e=>{this.updatePositionsDetails(e)})).then((()=>{this.webSocket.subscribe()}))}getPositionDetails(e,a){var s;return(null===(s=this.positionsDetailsByAccountId[a])||void 0===s?void 0:s[e])||null}hasPositionDetails(e,a){var s,i;const r=null===(s=this.positionsDetailsByAccountId[a])||void 0===s||null===(i=s[e])||void 0===i?void 0:i.quantity;return Number(r)>0}checkIsPortfolioExist(e){return!(0,r.Z)(this.positionsDetailsByAccountId[e])}updatePositionsDetails(e){this.positionsDetailsByAccountId=(0,o.F)(e)}}(0,i.gn)([n.observable],StocksPortfolioService.prototype,"positionsDetailsByAccountId",void 0)},75123:(e,a,s)=>{"use strict";s.d(a,{F:()=>r});var i=s(49491);const r=e=>e.reduce(((e,a)=>{let s=a.account_id,r=a.assets,n=void 0===r?[]:r;return i(i({},e),{},{[s]:n.reduce(((e,a)=>i(i({},e),{},{[a.asset]:{avgBuyPrice:a.avg_buy_price,avgSaleSuccessFeePercent:a.avg_sale_success_fee_perc,totalSaleSuccessFee:a.total_sale_success_fee,quantity:a.units_float_qty}})),[])})}),{})},66776:(e,a,s)=>{"use strict";s.d(a,{X:()=>StocksSellService});var i=s(59312),r=s(60521),n=s(14449);class StocksSellService{constructor(e){this.webSocket=e,this.isLoading=!1,this.totalCount=n.yD,this.errorValidation=n.mI.none,this.load=this.load.bind(this),this.loadPair=this.loadPair.bind(this),this.reset=this.reset.bind(this),this.sellStocks=this.sellStocks.bind(this),this.setErrorValidation=this.setErrorValidation.bind(this),this.setIsLoading=this.setIsLoading.bind(this),this.setTotalCount=this.setTotalCount.bind(this)}load(e){let a=e.showErrorMessage;this.showErrorMessage=a}setErrorValidation(e){this.errorValidation=e}setTotalCount(e){e>=0&&(this.totalCount=e)}reset(){this.totalCount=n.yD,this.errorValidation=n.mI.none}loadPair(e){this.pairId!==e&&(this.reset(),this.pairId=e)}sellStocks(e){let a=e.accountId,s=e.accountType,i=e.pairId;return this.setIsLoading(!0),this.webSocket.sellStocks({accountId:a,accountType:s,count:this.totalCount,pairId:i}).then((e=>(this.setIsLoading(!1),this.reset(),e))).catch((e=>{var a;return this.setIsLoading(!1),null===(a=this.showErrorMessage)||void 0===a||a.call(this,e.mess),this.reset(),Promise.reject(e)}))}setIsLoading(e){this.isLoading=e}}(0,i.gn)([r.observable],StocksSellService.prototype,"isLoading",void 0),(0,i.gn)([r.observable],StocksSellService.prototype,"totalCount",void 0),(0,i.gn)([r.observable],StocksSellService.prototype,"errorValidation",void 0),(0,i.gn)([r.action],StocksSellService.prototype,"setErrorValidation",null),(0,i.gn)([r.action],StocksSellService.prototype,"setTotalCount",null),(0,i.gn)([r.action],StocksSellService.prototype,"reset",null),(0,i.gn)([r.action],StocksSellService.prototype,"setIsLoading",null)},71240:(e,a,s)=>{"use strict";s.d(a,{q:()=>S});var i=s(49491),r=s(2243),n=s(14936),o=s(27378),l=s(60042),c=s(77740),d="_2qqT9HyMeUtv",u="_26WnkELEdWso",m="xMdQa3k7j0Wy",p="_24geWccq7eqa",h="u68cxeDoawp2",v="_3Er6gvagx_oT",g="_1qtcnPARD_sk",_="ySjAIZUnxNLW";const f=["url","endIcon","variant","className","hovered","onClick"],E={circle:"_1shgfKQnzsb9",rect:"_3zgeoYlYQFyQ"},S=o.forwardRef(((e,a)=>{let s=e.url,S=e.endIcon,y=e.variant,b=void 0===y?"circle":y,C=e.className,T=e.hovered,A=void 0!==T&&T,k=e.onClick,w=n(e,f);const N=o.useState(),R=r(N,2),I=R[0],D=R[1],O=o.useCallback((()=>{D(c.f7T)}),[]);return o.useLayoutEffect((()=>{D(s?null:c.f7T)}),[s]),o.createElement("div",i(i({className:l(d,b&&E[b],k&&p,A&&m,C),onClick:k},w),{},{ref:a}),o.createElement("div",{className:u},I?o.createElement("div",{className:v},o.createElement(I,{className:g})):o.createElement("img",{alt:"",className:h,src:s,onError:O})),S&&o.createElement("div",{className:_},S))}))},90916:(e,a,s)=>{"use strict";s.d(a,{Z:()=>h});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l="_1mztGEGnJ1qm",c="_248Zc0Yfx3aD";const d=n.memo((e=>{let a=e.delay,s=void 0===a?0:a;return n.createElement("div",{className:l},n.createElement("div",{className:c,style:{animationDelay:"".concat(s,"ms")}}))}));var u={host:"_2xJX95azkyht",host_has_border:"olss0CsO0mDZ",highlight:"_2iO6bIHZDwnk",content:"_7FztMV8HSvMM",content_disabled:"_1C3SYvv53-Di",content_has_action:"_1ASPBYFRzaTN"};const m=["children","className","disabled","onClick"],p=["className","children","withBorder","hasHighlight"],h=e=>{let a=e.className,s=e.children,l=e.withBorder,c=void 0===l||l,m=e.hasHighlight,h=r(e,p);return n.createElement("div",i({className:o(u.host,c&&u.host_has_border,m&&u.host_has_highlight,a)},h),m&&n.createElement("div",{className:u.highlight},n.createElement(d,null)),s)};h.Content=e=>{let a=e.children,s=e.className,l=e.disabled,c=e.onClick,d=r(e,m);return c=l?void 0:c,n.createElement("div",i(i({className:o(u.content,{[u.content_disabled]:l,[u.content_has_action]:!!c},s),role:c?"button":void 0},d),{},{onClick:c}),a)}},76877:(e,a,s)=>{"use strict";s.d(a,{A:()=>E});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(17302),c=s(26719),d="_3BRq3Ym5Sk_l",u="_3ufH5YCy_dQf",m="_31DWA_hxzXKI",p="_2Vxg2gwV3cGl",h="_1WIB6sjnOvuf";const v=["open"],g={small:"_1rxWNl-oey6d",middle:"_1ZaF7s5ettI5"},_={default:"_2Kqs_oXs0WuX",high:"_1uJRdPx4DSXj",beta:"mtqkyrbyLWIs"},f={contained:"_37OQb7FMJZ3t",outlined:"WPtj26Y9NPno"},E=e=>{let a=e.startIcon,s=e.tip,E=e.size,S=e.color,y=void 0===S?"default":S,b=e.variant,C=void 0===b?"contained":b,T=e.className,A=e.children,k=e.onClick;return s?n.createElement(c.k,{content:s,placement:"top"},(e=>{let s=e.open,c=r(e,v);return n.createElement(l.Xd,i({className:o(d,u,s&&m,g[E],_[y],f[C],T)},c),a&&n.createElement("div",{className:p},a),n.createElement("div",{className:h},A))})):n.createElement(l.Xd,{className:o(d,k&&u,g[E],_[y],f[C],T),onClick:k},a&&n.createElement("div",{className:p},a),n.createElement("div",{className:h},A))}},4888:(e,a,s)=>{"use strict";s.d(a,{D:()=>b});var i,r,n,o=s(47014),l=s(27378),c=s(44495),d=s(60042),u=s(17302),m="xZoeJgd6tVKH",p="_3oz6cC4SLb49",h="hKxwEMN18EdJ",v="_2UGCo3wlDl8X",g="_2uEnjufjygCE",_="_3zrwgFBr1Wfd",f="_y8f3IrUtv_e",E="C4Qz1eqRCde4";const S={warning:null!==(i="izkryRwtED1J")&&void 0!==i?i:"",positive:null!==(r="qF3bQVjKZO31")&&void 0!==r?r:"",purple:null!==(n="HYPlpFn9ytma")&&void 0!==n?n:""},y=(e,a)=>e-e*a/100,b=l.memo((e=>{let a=e.size,s=e.color,i=e.strokeWidth,r=e.percentage,n=e.direction,b=void 0===n?"direct":n,C=e.hidden,T=e.duration,A=void 0===T?500:T,k=e.children,w=e.clockwise,N=void 0===w||w,R=e.className;r="reverse"===b?-1*r:r;const I=l.useMemo((()=>{const e=(a-i)/2;return{radius:e,viewBox:"0 0 ".concat(a," ").concat(a),dashArray:e*Math.PI*2,transform:"rotate(-90 ".concat(a/2," ").concat(a/2,")")}}),[a,i]),D=(0,u.D9)(r),O=(0,c.useSpring)({to:l.useCallback(function(){var e=o((function*(e){"direct"===b&&void 0!==D&&r<D?(yield e({strokeDasharray:I.dashArray,strokeDashoffset:0,config:{duration:A}}),yield e({strokeDasharray:I.dashArray,strokeDashoffset:I.dashArray,config:{duration:0}}),yield e({strokeDasharray:I.dashArray,strokeDashoffset:y(I.dashArray,r),config:{duration:A}})):yield e({strokeDasharray:I.dashArray,strokeDashoffset:y(I.dashArray,r),config:{duration:A}})}));return function(a){return e.apply(this,arguments)}}(),[b,I.dashArray,D,r,A]),from:{strokeDasharray:I.dashArray,strokeDashoffset:y(I.dashArray,r)},immediate:!0});return l.createElement("div",{className:d(m,S[s],!N&&v,R)},l.createElement("div",{className:p},l.createElement("svg",{className:h,height:a,viewBox:I.viewBox,width:a},l.createElement("circle",{className:g,cx:a/2,cy:a/2,r:I.radius,strokeWidth:"".concat(i,"px")}),l.createElement(c.animated.circle,{className:d(_,C&&f),cx:a/2,cy:a/2,r:I.radius,strokeWidth:"".concat(i,"px"),style:O,transform:I.transform})),k&&l.createElement("div",{className:E},k)))}))},207:(e,a,s)=>{"use strict";s.d(a,{f:()=>l});var i=s(27378),r=s(60042),n=s(26775);const o={contain:n.Z.host_variant_contain,cover:n.Z.host_variant_cover},l=e=>{let a=e.url,s=e.variant,l=e.className;return i.createElement("div",{className:r(n.Z.host,o[s],l)},i.createElement("img",{src:a,alt:"",className:n.Z.image}))}},26775:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3Ie_cvtISUKD",host_variant_contain:"JiSce8eKPxF-",host_variant_cover:"_2DmYAjzx575U",image:"_3MmExvvc7Mtn"}},13453:(e,a,s)=>{"use strict";s.d(a,{R:()=>d});var i=s(27378),r=s(15696),n=s(29609),o=s(11233),l="_2VN4N3LE8b_V";const c={appear:"ky57SXPZZwm-",appearActive:"JyCWjcQ6PIfo",enter:"_1Gbi7Kc4Fnx2",enterActive:"_2jtEE3xOwbF9",exit:l,exitActive:l},d=e=>{let a=e.id,s=e.className,l=e.children;return i.createElement(r.Z,{component:null},i.createElement(n.Z,{classNames:c,key:a,timeout:300},i.createElement(o.k,{memoryId:a,className:s},l)))}},39156:(e,a,s)=>{"use strict";s.d(a,{F:()=>n});var i=s(27378),r=s(95029);const n=e=>{let a=e.value,s=e.currency,n=e.display,o=void 0===n?"code":n;return i.createElement(r.ih,{value:a,currency:s,currencyDisplay:"demo"===s?void 0:o,minimumFractionDigits:0,maximumFractionDigits:10})}},52984:(e,a,s)=>{"use strict";s.d(a,{j:()=>DelayUnmount});var i=s(27378);class DelayUnmount extends i.Component{constructor(){super(...arguments),this.state={shouldRender:this.props.isMounted}}componentDidUpdate(e){e.isMounted&&!this.props.isMounted?this.startDelayUnmount():!e.isMounted&&this.props.isMounted&&(this.stopDelayUnmount(),this.setState({shouldRender:!0}))}startDelayUnmount(){this.stopDelayUnmount(),this.timeoutId=setTimeout((()=>this.setState({shouldRender:!1})),this.props.delay)}stopDelayUnmount(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}render(){return this.state.shouldRender?this.props.children:null}}},62640:(e,a,s)=>{"use strict";s.d(a,{K:()=>_});var i=s(27378),r=s(60042),n=s(9957),o=s(68910),l=s(47494),c=s(14719),d=s(55526),u=s(47509),m=s(95467),p=s(11589),h=s(36654),v=s(51252),g=s(31667);const _=e=>{let a=e.className,s=e.children,o=e.hasHighlight,l=e.onClick;const c=(0,n.YD)({skip:!o,threshold:.8,triggerOnce:!0}),d=c.ref,u=c.inView;return i.createElement("div",{ref:d,className:r(g.Z.host,l&&g.Z.host_has_interaction,o&&u&&g.Z.host_has_highlight,a),"data-test":"tou-core-c-event-card",onClick:l,role:"button"},s)};_.Action=o.a,_.CompletedDate=l.M,_.Content=e=>{let a=e.label,s=e.labelColor,n=e.subtitle,o=e.title,l=e.iconImage,p=e.backgroundImage,h=e.gradientColor,v=e.children;return i.createElement("div",{className:g.Z.content},p&&i.createElement("img",{className:g.Z.image,src:p,alt:""}),l&&i.createElement("img",{className:g.Z.icon,src:l,alt:""}),h&&i.createElement(m.p,{color:h,className:g.Z.gradient}),a&&i.createElement(c._,{className:g.Z.label,color:s},a),i.createElement("div",{className:r(g.Z.meta,n&&g.Z.meta_has_subtitle)},i.createElement(u.Q,null,n),i.createElement(d.D,null,o),v&&i.createElement("div",{className:g.Z.metaInner},v)))},_.Slider=p.i,_.SliderSkeleton=p.z;_.Footer=e=>{let a=e.color,s=e.className,n=e.endContent,o=e.startContent;return i.createElement(v.$,{className:r(g.Z.footer,s),color:a,startContent:o,endContent:n})},_.FooterText=h.H},31667:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2Y5LGxuDaV7l",host_has_interaction:"_2frYatgLdnfS",host_has_highlight:"_1SvQSe6Cvz7w",highlightAnimation:"_2wbfgg5e5oBb",content:"_2FvoDYG_BFRh",image:"_2fiVMBFZzpVH",icon:"_38Az0ogADKEe",gradient:"_2pzF9FfUPD8a",label:"_1ZLUzmgHu6g-",meta:"_3tyGGdFCjb7l",meta_has_subtitle:"_2pd5b1hwSbRY",metaInner:"_3Z5Intdqfu-Q",footer:"_1y0gs_dyYMnX"}},68910:(e,a,s)=>{"use strict";s.d(a,{a:()=>c});var i=s(27378),r=s(60042),n=s(77740),o=s(70851);const l={default:o.Z.host_state_default,checked:o.Z.host_state_checked},c=e=>{let a=e.state,s=void 0===a?"default":a,c=e.className;return i.createElement("div",{className:r(o.Z.host,l[s],c),"data-test":"tou-core-c-event-card-action"},"default"===s?i.createElement(n.QoT,{className:o.Z.iconArrow,"data-test":"tou-core-c-event-card-action-icon"}):i.createElement(n.NOm,{"data-test":"tou-core-c-event-card-action-icon"}))}},70851:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2QFzbGz5prEj",host_state_default:"_1CQzFwv9Qukf",host_state_checked:"aktoxW3EZ38d",iconArrow:"_34MrzspBFU1G"}},47494:(e,a,s)=>{"use strict";s.d(a,{M:()=>n});var i=s(27378),r=s(18985);const n=i.memo((e=>{let a=e.time;const s=new Date(1e3*a);return(new Date).getFullYear()===s.getFullYear()?i.createElement(r.Ji,{value:s,day:"numeric",month:"long"}):i.createElement(r.Ji,{value:s,day:"numeric",month:"long",year:"numeric"})}))},51252:(e,a,s)=>{"use strict";s.d(a,{$:()=>o});var i=s(27378),r=s(60042),n=s(95476);const o=e=>{let a=e.color,s=e.className,o=e.startContent,l=e.endContent;return i.createElement("div",{className:r(n.Z.host,s),style:{backgroundColor:a}},i.createElement("div",{className:n.Z.left},o),i.createElement("div",{className:n.Z.right},l))}},95476:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1s_ZbjIlXa6N",left:"PQCqdEIxfex4",right:"_1HU2mx1sbM4N"}},36654:(e,a,s)=>{"use strict";s.d(a,{H:()=>o});var i=s(27378),r=s(60042),n=s(74059);const o=e=>{let a=e.subtitle,s=e.title,o=e.className;return i.createElement("div",{className:r(n.Z.host,o)},a&&i.createElement("span",{className:n.Z.subtitle},a),s&&i.createElement("div",{className:n.Z.title},s))}},74059:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1eVc5QrJftvl",subtitle:"_1X3iiInka8ja",title:"_2_-MaS13uf4B"}},95467:(e,a,s)=>{"use strict";s.d(a,{p:()=>l});var i=s(27378),r=s(60042),n=s(52477),o=(s(17302),s(83312));const l=e=>{let a=e.color,s=e.className;const l=(0,n.E)(a);return i.createElement("div",{className:r(o.Z.host,s),style:{background:"linear-gradient(90deg, ".concat(a," 0%, rgba(").concat(l,", 0) 100%)")}})}},83312:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2VHnkRlYVlAM"}},14719:(e,a,s)=>{"use strict";s.d(a,{_:()=>l});var i=s(27378),r=s(60042),n=s(70381);const o={default:n.Z.host_color_default,accent:n.Z.host_color_accent},l=e=>{let a=e.children,s=e.color,l=void 0===s?"default":s,c=e.className;return i.createElement("div",{className:r(n.Z.host,c,o[l]),"data-test":"tou-core-c-event-card-label"},a)}},70381:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"mvyFF8sgfG9X",host_color_default:"_2o5tUXL42o1L",host_color_accent:"jz4zEcBQ3Ph3"}},11589:(e,a,s)=>{"use strict";s.d(a,{i:()=>h,z:()=>v});var i=s(2243),r=s(27378),n=s(60042),o=s(46006),l=s(29609),c=s(20141),d=s(14425),u=s(47373);const m={enter:u.Z.item_state_enter,enterActive:u.Z.item_state_enterActive,exit:u.Z.item_state_exitActive,exitActive:u.Z.item_state_exitActive},p={enter:300,exit:100},h=e=>{let a=e.items,s=e.duration,h=void 0===s?3e3:s,v=e.className;const g=r.useState(0),_=i(g,2),f=_[0],E=_[1];r.useEffect((()=>{if(a.length<=1)return;f>a.length-1&&E(0);const e=window.setTimeout((()=>{const e=f+1>a.length-1?0:f+1;E(e)}),h);return()=>{window.clearTimeout(e)}}),[a.length,h,f]);const S=r.useMemo((()=>a[f]),[a,f]);return r.createElement("div",{className:n(u.Z.host,v)},S&&r.createElement(r.Fragment,null,r.createElement(o.Z,null,r.createElement(l.Z,{in:!0,timeout:p,key:S.id,classNames:m,unmountOnExit:!0},r.createElement(c.w,{item:S}))),a.length>1&&r.createElement("div",{className:u.Z.progress},a.map((e=>r.createElement(d.l,{key:e.id,active:e.id===S.id,duration:h,className:u.Z.progressItem}))))))},v=e=>{let a=e.className;return r.createElement("div",{className:n(u.Z.host,a),key:"skeleton"},r.createElement(c.a,null),r.createElement("div",{className:"".concat(u.Z.progress," ").concat(u.Z.progress_state_skeleton)}))}},47373:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"KUcC50AmtzRv",progress:"gcHfedbqnhJa",progress_state_skeleton:"nZX4zhCJFZJB",progressItem:"_1eTmL6YJ-QA8",item_state_enter:"_3NedG_3ckB9D",item_state_enterActive:"_2Xw3ggWExzmE",item_state_exit:"_1aYU6pLC5Brf",item_state_exitActive:"_1qdivxlWD2Km"}},20141:(e,a,s)=>{"use strict";s.d(a,{a:()=>m,w:()=>u});var i=s(27378),r=s(60042),n=s(18985),o=s(47314),l=s(39156),c=s(15576);const d={number:e=>{let a=e.item;return i.createElement(n.BK,{value:a.value})},string:e=>{let a=e.item;return i.createElement("span",null,a.value)},currency:e=>{let a=e.item;return i.createElement(l.F,{currency:a.currency,value:a.value})},percent:e=>{let a=e.item;return i.createElement(n.BK,{style:"percent",value:a.value/100})},basic:e=>{let a=e.item;return i.createElement("span",null,a.description)}},u=i.memo((e=>{let a=e.item,s=e.className;const n="type"in a?a.type:"basic",o=d[n];return i.createElement("div",{className:r(c.Z.host,s)},i.createElement("div",{className:c.Z.title},a.title),i.createElement("div",{className:c.Z.description},i.createElement(o,{item:a})))})),m=e=>{let a=e.className;return i.createElement("div",{className:r(c.Z.host,a)},i.createElement(o.O,{className:"".concat(c.Z.title," ").concat(c.Z.title_state_skeleton),variant:"text"}),i.createElement(o.O,{className:"".concat(c.Z.description," ").concat(c.Z.description_state_skeleton),variant:"text"}))}},15576:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1Cl7qj7XqGIk",title:"SM1HP_HWGBWF",title_state_skeleton:"sr5CBLkHCeUC",description:"FQ5AArdmgnu0",description_state_skeleton:"_28pjqBrW7Ip4"}},14425:(e,a,s)=>{"use strict";s.d(a,{l:()=>o});var i=s(27378),r=s(60042),n=s(81038);const o=e=>{let a=e.active,s=e.duration,o=e.className;return i.createElement("div",{className:r(n.Z.host,a&&n.Z.host_state_active,o)},i.createElement("div",{className:n.Z.bar,style:{animationDuration:"".concat(s,"ms")}}))}},81038:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1nZmZ8WNmp7L",host_state_active:"_3YBNjoCpM5Qb",bar:"_2BsfmSD8lm7B",barAnimation:"qCOm58aSdyin",barAnimationRtl:"_2FQ6Ds5ZWyph"}},47509:(e,a,s)=>{"use strict";s.d(a,{Q:()=>n});var i=s(27378),r=s(68817);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.host,"data-test":"tou-core-c-event-card-subtitle"},a)}},68817:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_2AV4IavNSGRk"}},55526:(e,a,s)=>{"use strict";s.d(a,{D:()=>n});var i=s(27378),r=s(70082);const n=e=>{let a=e.children;return i.createElement("div",{className:r.Z.host,"data-test":"tou-core-c-event-card-title"},a)}},70082:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1fkPWxUhYYNY"}},14310:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var i=s(27378),r=s(77740),n=s(17302),o=s(65223);const l=e=>{let a=e.title,s=e.timer;return i.createElement("div",{className:o.Z.host},i.createElement("div",{className:o.Z.left},i.createElement(n.xv,{color:"contrast-beta",as:"p",variant:"S Compact / Bold"},a),i.createElement(n.xv,{variant:"M / Bold",as:"p"},s)),i.createElement("div",{className:o.Z.right},i.createElement(r.Zbd,{className:o.Z.icon})))}},65223:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_253WzN6ybief",left:"_3gINL2_qv0-u",right:"_34nuSIWjdC_n",icon:"_3eXP6f8earc2"}},75569:(e,a,s)=>{"use strict";s.d(a,{W:()=>Ee});var i=s(27378),r=s(60042),n=s(36732);var o=s.e(366).then(s.t.bind(s,30366,17)),l="_3vTDfPcHYJFs",c="cM8wf2IdAqAH",d="MloIuFOQ4Qga",u="_3YclIB7Sg77N",m="_2Al00jj2v4OZ",p="_1EsEDtbpN-Gx",h="_3b6tCXhpk_cc",v="_1fPOsiWz00B2",g="jfTkWQ2U5HqP",_="prvH-1N1I-3-",f="_3hb4p7l04eeB",E="Xtk2smARO7r5",S="_1b8cvjVpGP4j",y="_3S0_ffBp2yjE",b="_1rNfpA3uKO7n",C="_2VEKqZbbFOCm",T="_37QL3xY2eL8y",A="_17-jBVgjaabY",k="gbb__5MXNs0i",w="Mg2ehioOQkFR",N="_1rNxvwjjVg_8",R="_2XuRIwRdWKsz",I="_28Fjo0HPfA_f",D="_2HWPiMCUq2Qp",O="_3TAU5l6RqU9H",L="_12LC-if1yly7",M="_1LDAx9l1sf4D",P="ZQ7yG4sSVsQH",x="HoyenJWTZiCv",F="_2062kJ8FaYp1",B="_35IhRbescAJ1",Z="_1kK_Bp1oQ340",U="PtdgKzzcQTXP",H="_154SH6RKXVy0",G="_3XOcjHtz0Inn",V="_34bq5tvYfM41",W="_1cJOH4WijAF_",j="_24kXmHGgqs7p",z="_383__12MnfMH",q="_1r80Bbg0eAg9",K="_36NOn7j8tj8B",Y="_2IWIAIBG1oYe",X="_18I1amXaS8-H",J="_3gmQUUuRqi7f",Q="_2iGRgM7ApKyG",$="_3MwpwCb7gDZ_",ee="_2uyBM9UdWiRm",te="_3NH5AyzTPYF_",ae="_3HyD23NUmtIG",se="aPytYnSlqJzJ",ie="KPIngHLKT7kJ",re="_3FcWYZKWIf51",ne="_22i2X9Vfku0y",oe="_1ZHrKcp8oZpp",le="_2IO8Xtnas9A-",ce="_3ZCSnulPWS4T",de="AIM-Er8BIl4T",ue="_14fastI6Vllt",me="_13PXzhXeUH6w",pe="_1jhAFAzLDDVL",he="Cc9oQKPXTFnx",ve="_5Bkzm1tmfsP",ge="_3ZR3rDnriDqi";const _e={small:c,middle:d,large:u},fe={ad:h,ae:v,af:g,ag:_,ai:f,al:E,am:S,ao:y,aq:b,ar:C,as:T,at:A,au:k,aw:w,ax:N,az:R,ba:I,bb:D,bd:O,be:L,bf:M,bg:P,bh:x,bi:F,bj:B,bl:Z,bm:U,bn:H,bo:G,bq:V,br:W,bs:j,bt:z,bv:q,bw:K,by:Y,bz:X,ca:J,cc:Q,cd:$,cf:ee,cg:te,ch:ae,ci:se,ck:ie,cl:re,cm:ne,cn:oe,co:le,cr:ce,cu:de,cv:ue,cw:me,cx:pe,cy:he,cz:ve,de:ge,dj:"_6lvhgKygAouo",dk:"pD8KoAb9_YpM",dm:"_2m6pacZmvRJy",do:"oXoIZvLPEFBo",dz:"_25biufBgyfhH",ec:"_3kswpFn_k_8S",ee:"_2itx75yWK6NO",eg:"_1BM-gMxhpRF9",eh:"_20BI2JjCxu-Z",er:"_1fAc4HxrVLru",es_ca:"_1ZY346UG1Zir",es:"fWGYqbKsmUpb",et:"_2Y2ufNeFFyt7",eu:"_1doDbIeyx272",fi:"_1K3PrKGv8Nou",fj:"_9G8AzyXTOY9O",fk:"_3-23gjMWy8Ax",fm:"_3tXyJwdDCv9r",fo:"_1OFyfI8V1bkG",fr:"gu34IxMSw7OP",ga:"iAv7c52dyGpO",gb_eng:"_3-DGTaIEHycb",gb_nir:"_3Cqe5wsFxS_U",gb_sct:"_1wN5Cr9wSB0T",gb_wls:"_1BdoHtG-swCh",gb:"_27Xk5HQSHklt",gd:"_1k5rBs14NL-j",ge:"cnn4mFNGlq6Z",gf:"PIJEEZHuAJgj",gg:"xMorPEg_YVJ6",gh:"_1DzweS5mb3cG",gi:"c9z3Oju8yB_v",gl:"CJFTUxkpRmT9",gm:"_2r-vdMouq75R",gn:"_1mpnrnerIG3E",gp:"_3a2P0deNM_o0",gq:"_2BP9N-5WEuDW",gr:"_1KC8YBgcxvwu",gs:"_3IgYwIN_-py_",gt:"_2vx4bu5CPo0A",gu:"_1JIc3F2bn0hF",gw:"_3sXik-1XJLX7",gy:"_3Z75UvzSECGQ",hk:"_2zuSs3es2i_X",hm:"_1caKzHXHNPjC",hn:"vqpsW4kgkzqQ",hr:"_6UtHaKFy_B34",ht:"I7fSiS7c-S1c",hu:"_1BBBtBxApDst",id:"_3hd988VvDBLv",ie:"_2SyfYbOIDPBF",il:"_3-ZMOtEwhsqE",im:"_29-g0D2xiTsB",in:"_1WVrKMcVgQU7",io:"_2b-7FelrkVxp",iq:"mC9kleWhlMjB",ir:"_1j7ATohxG___",is:"_2t_7G5Xx-yxj",it:"_3wG4x6YpptM3",je:"_2c6hgKErVv2r",jm:"f7Hs2FgrdYp_",jo:"_3VStwt4yQhJP",jp:"_2kM6OpZ54wq6",ke:"_2cioiQXlJ0pq",kg:"_23TUa8zTUB2S",kh:"_2Qa2_7shYh5y",ki:"_3dHRDtNqyNgq",km:"_1DrCV32z_y4U",kn:"_1d4NY-tvwrfU",kp:"JCtmYeAiwfd9",kr:"_2aylOUzOOFs1",kw:"_3ECmHrwKD2P-",ky:"_1Qj7YXAht3Dd",kz:"_3InsXypF9Ud-",la:"_1dxxLK0N-BN-",lb:"HR6rAKyxAH2D",lc:"LZqWdW9L3GCf",li:"_1lq2XnpizyKn",lk:"_3Twgux1tMIFx",lr:"_2xkreyFFicr2",ls:"sbNjmTc_nfl6",lt:"_3tWwhmu67oPr",lu:"_2-l8kDl2VuZN",lv:"_3aZm3FJ5-Yfo",ly:"_2AZBCcFmEJZR",ma:"_7D08DWtfX8PD",mc:"_2t1ufzocqATK",md:"_2jXnMqwYJvTn",me:"_1bD9i04-6zm7",mf:"_3-D0IED57xtj",mg:"_3ZVgp67pFe7N",mh:"M_cB2z80XdKl",mk:"_1Y8OrcBKchlK",ml:"_24aE-Wnqt3Xh",mm:"HOMPZEarrgBo",mn:"R1_kZNxGuqoJ",mo:"_1qrGhgHPDcUk",mp:"_3IiDFoDb6H2F",mq:"_401cmFxYh8Tk",mr:"_1goeYm337opQ",ms:"_2oHLs9cOemvz",mt:"_1w8Gf3GiAZly",mu:"_32d4jtruxecM",mv:"_1px--ir4su7X",mw:"_3Rf5_J3vkwYb",mx:"_3b7Mt5TAk5nm",my:"_2UwngbHSNrFc",mz:"XDE7HODMIhyD",na:"_1YHikV8JVwmC",nc:"_1J92c-ZIhGUf",ne:"_2QhmaPZtdYbg",nf:"_3aiId8fKMAGl",ng:"_2wzbu4CceLzv",ni:"_3ItS7K0slaoZ",nl:"_23UiG70mba5H",no:"_17NxYNOtP98Y",np:"_2wk8ml0OB47X",nr:"jxbS7PkXJI7m",nu:"_1u8aH0uwEVZW",nz:"_2R4s2LL_0hGT",om:"_2a1fwh_AMgKg",pa:"_1tPZC9t0eo0E",pe:"_3qk9RoWGweAz",pf:"hhlAu2u8p8EW",pg:"_2ZiqHKNjZk2F",ph:"_1DyX3jRO2a-J",pk:"_m411MjQNDGu",pl:"_3GTSaSVHQTez",pm:"_13zjXKdbtfut",pn:"_1U78YhYlpKGJ",pr:"_2IaGDbs19T2_",ps:"_3nfXzpyQnqOg",pt:"_27PtMFjFFU8U",pw:"_2_KoVugJGplW",py:"_3Vlf-Zf_GUz2",qa:"_3dBLWb2kGYG-",re:"DqcMZR2XST9d",ro:"aB2TcstercPu",rs:"_1wxTyqvhBzWv",ru:"_1hl_vxpWiVla",rw:"_1RQISW3KUZxe",sa:"-sksfV77ydxd",sb:"_2ReP2h2i2Ro7",sc:"_3FspqBgTEakL",sd:"YjS0HuleiQ0x",se:"_2tVQwVlrqQ0m",sg:"_1BplVuYjuRA-",sh:"_1TNb7zKTdODu",si:"c7syFUTpdVhA",sj:"_3kY4CSYKZJ7C",sk:"Z3jivo2dsWx-",sl:"_1Xy6mis-oYWt",sm:"_2xW0kQwpF2ra",sn:"_16HNWMzMrdGO",so:"IeNbJsbgvE5H",sr:"_2NQOceLKwGCe",ss:"TmhQd8X-G6Mg",st:"_11e6hT9GBXTp",sv:"_3TT_zmBY5wtO",sx:"_3X3WSe6eIhMG",sy:"_3MKaSqjaD55K",sz:"_2AlLO46XSumv",tc:"_2rTNEHEsqTBL",td:"_434z-iil0bH9",tf:"_3I1CnPguqpI4",tg:"clqDM-4-Du88",th:"eWaMK8T1a60K",tj:"_1arlHTrpl1dp",tk:"sjIxmnN3cHxv",tl:"kWP3sBZ4Bhu8",tm:"_29yfNbhVN3fB",tn:"_1jf_OdT2JJp3",to:"_3_-NfAQJQrWN",tr:"v0828wNGPN0p",tt:"_1QKrEp-uzeYT",tv:"_1so7k_S9j2j-",tw:"_3QzVgbFy7PS5",tz:"_2VDhHmnZ3UFJ",ua:"_19yG6GdWnfDH",ug:"_2tk55IP1iL7v",um:"_1Vsh6aah3Q0v",un:"_3dkNl7cdj-Z2",us:"_8W8nlbRdVN-Z",uy:"_11S4Sz_jKeol",uz:"_3wMY02Inm_f0",va:"_3k8KsKIXmbUv",vc:"_2yYpEwGSIm26",ve:"_3li5T0OQKDBL",vg:"_3192kxKGrcXM",vi:"_1cEPrQCt224n",vn:"esSHX13Bu_BG",vu:"_3I_U0HQdC0rI",wf:"_1poQdDpYhZMl",ws:"_1U5nw6lpcMkr",xk:"_2JFQG4mpheie",ye:"jM0s-9t-P-st",yt:"_3fH0WGxHABPX",za:"_3bG3Q20dT7px",zm:"TWtFATrrVJ1x",zw:"_309RynV5OXFD"},Ee=e=>{const a=e.size||"small",s=(0,n.aN)(o),c=i.useMemo((()=>({backgroundImage:"url(".concat(s,")")})),[s]),d=fe[e.code.toLowerCase()];return i.createElement("span",{className:r(l,_e[a],e.className)},d?i.createElement("span",{className:r(m,d),style:c}):i.createElement("span",{className:r(m,p)}))}},26719:(e,a,s)=>{"use strict";s.d(a,{k:()=>y,b:()=>b});var i=s(2243),r=s(49491),n=s(14936),o=s(27378),l=s(60042),c=s(77740),d=s(17302),u="_20VjJkcdKSJT",m="_3NGfOUP-s7bv",p="ECjmKmBqI56k",h="_25nF0oYVxGo3",v="_4ac8tv_eJFyV";const g=["children","onOpen","onClose","basePlacement"],_=["children","className"],f=o.createContext({container:null}),E=o.forwardRef(((e,a)=>{let s=e.children,i=e.onOpen,l=e.onClose,c=e.basePlacement,u=n(e,g);return o.useEffect((()=>(null==i||i(),()=>{null==l||l()})),[i,l]),o.createElement("div",{ref:a},o.createElement(d._v,r(r({placement:c},u),{},{classNameContent:h}),s))})),S={default:m,positive:p};E.displayName="HelpTooltipContent";const y=e=>{let a=e.content,s=e.placement,i=void 0===s?"bottom-start":s,n=e.skidding,m=e.className,p=e.color,h=void 0===p?"default":p,v=e.referenceDataTest,g=e.children,_=e.onTooltipOpen,y=e.onTooltipClose;const b=o.useContext(f).container,C=o.useCallback((e=>o.createElement(E,r(r({},e),{},{onOpen:_,onClose:y}),a)),[a,_,y]),T=o.useCallback((e=>o.createElement("span",r(r({className:l(u,S[h],m)},e),{},{"data-test":v}),o.createElement(c.T08,null))),[m,h,v]);return o.createElement(d.u,{placement:i,fitSizeTo:"content",triggerOnHover:!1,triggerOnTap:!0,delay:0,arrow:!0,container:b,transition:!0,disablePortal:!b,content:C,skidding:n,style:{zIndex:10}},g||T)},b=e=>{let a=e.children,s=e.className,c=n(e,_);const d=o.useState(null),u=i(d,2),m=u[0],p=u[1];return o.createElement("div",r(r({},c),{},{className:l(v,s),ref:p}),o.createElement(f.Provider,{value:{container:m}},a))}},56541:(e,a,s)=>{"use strict";s.d(a,{U:()=>f});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(15536),c="_3ZPmgFSsuqCQ",d="_2d1mVDwnH4W-",u="_10u5OsHLy_XC";const m=e=>{let a=e.title,s=e.titleColor,i=void 0===s?"beta":s,r=e.content,m=e.className;return n.createElement("div",{className:o(c,m)},n.createElement(l.Z,{color:i,variant:"s",align:"center",lineHeight:"normal",className:d},a),n.createElement(l.Z,{weight:"bold",component:"div",className:u},r))};var p="iwWPgYECSzOO",h="_3o3JPkBzzIPk",v="_2myBGMUxxzQm";const g=["className"],_={default:"_3nh0-X518d7e","built-in":"k42d94BN7_3Y"},f=e=>{let a=e.className,s=e.variant,i=void 0===s?"default":s,r=e.fullWidth,l=e.children;return n.createElement("div",{className:o(p,_[i],r&&h,a)},l)};f.Group=e=>{let a=e.className,s=r(e,g);return n.createElement(m,i({className:o(v,a)},s))}},28750:(e,a,s)=>{"use strict";s.d(a,{X:()=>l});var i=s(27378),r=s(60042),n="_1rw9zzfEtcWx";const o={small:"_36sQUD1A2nUd",middle:"_2-MBj8y-ZuU9"},l=i.memo((e=>{let a=e.url,s=e.size,l=e.className,c=e.dataTest;return i.createElement("img",{className:r(n,o[s],l),"data-test":c,src:a})}))},11233:(e,a,s)=>{"use strict";s.d(a,{k:()=>MemoryScroll});var i=s(27378),r=s(60042),n=s(93751),o=s(17302),l=s(90978);class MemoryScroll extends i.Component{constructor(e){super(e),this.ref=i.createRef(),this.handleScroll=this.handleScroll.bind(this),this.handleScroll=(0,n.P)(this.handleScroll,150)}componentDidMount(){const e=this.ref.current,a=this.props.memoryId;if(e&&this.props.memoryId){const s=MemoryScroll.scrollTopMemory.items[a];s&&(MemoryScroll.scrollTopMemory.timeoutId=window.setTimeout((()=>{e.scrollTo({top:s,behavior:"auto"})}),20)),e.addEventListener("scroll",this.handleScroll)}}componentWillUnmount(){this.ref.current&&this.ref.current.removeEventListener("scroll",this.handleScroll)}handleScroll(){this.props.memoryId&&this.ref.current&&(MemoryScroll.scrollTopMemory.items[this.props.memoryId]=this.ref.current.scrollTop)}render(){const e=this.props,a=e.children,s=e.className,n=e.disabled;return i.createElement(o.Xs,{ref:this.ref,className:r(s,n&&l.Z.host_disabled)},a)}}MemoryScroll.scrollTopMemory={items:{}}},90978:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host_disabled:"_19_eNtNMHmB7"}},9411:(e,a,s)=>{"use strict";s.d(a,{u:()=>d});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l="o9wJBzY-JTfJ";const c=["count","completedCount","className"],d=e=>{let a=e.count,s=e.completedCount,d=e.className,u=r(e,c);return n.createElement("div",i({className:o(l,d),dir:"ltr"},u),n.createElement("span",null,s),"/",n.createElement("span",null,a))}},47314:(e,a,s)=>{"use strict";s.d(a,{O:()=>c});var i=s(27378),r=s(60042),n=s(87998);const o={alpha:n.Z.host_color_alpha,beta:n.Z.host_color_beta,gamma:n.Z.host_color_gamma},l={text:n.Z.host_variant_text,rect:n.Z.host_variant_rect,circle:n.Z.host_variant_circle},c=e=>{let a=e.color,s=void 0===a?"gamma":a,c=e.variant,d=void 0===c?"rect":c,u=e.className;return i.createElement("div",{className:r(n.Z.host,o[s],l[d],u)})}},87998:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3RDNiPanUAWC",host_color_alpha:"_2CHJein3XunU",host_color_beta:"_2zFCzX9Te6bA",host_color_gamma:"_1kd3p5lkw85X",host_variant_rect:"_2fL1QcYx4XEP",host_variant_circle:"o6C8G9vp05xz",host_variant_text:"_16lzDxR7TrJg",translateAnimation:"_3HfiIKZ8AVch"}},36855:(e,a,s)=>{"use strict";s.d(a,{g:()=>d});var i=s(27378),r=s(60042),n=s(573),o=s(17302),l=s(31083);const c={day:{default:n.My,short:n.My},hours:{default:n.SA,short:n.tU},minutes:{default:n.jk,short:n.VJ},seconds:{default:n.T1,short:n.bJ}},d=e=>{let a=e.startTime,s=e.serverTime,n=e.className,d=e.format,u=void 0===d?"default":d;const m=i.useCallback((e=>{let a;const s=Number(e.days),o=Number(e.hours),d=Number(e.minutes),m=Number(e.seconds);if(0!==s){const e=c.day[u];a=i.createElement(e,{days:o>12?s+1:s})}else if(0!==o){const e=c.hours[u];a=i.createElement(e,{hours:d>30?o+1:o})}else if(0!==d){const e=c.minutes[u];a=i.createElement(e,{minutes:m>30?d+1:d})}else{const e=c.seconds[u];a=i.createElement(e,{seconds:m})}return i.createElement("span",{className:r(l.Z.host,n)},a)}),[u,n]);return i.createElement(o.Wo,{startTime:a,serverTime:s,render:m,className:r(l.Z.host,n)})}},31083:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_1mThKM4h3Nn-"}},15536:(e,a,s)=>{"use strict";s.d(a,{Z:()=>T});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l="_2Wh7CINiWSRv",c="_3RnRRXYIh79M",d="_3tvhughWSUMF",u="_10C2s6G8RGfJ",m="_13hxqZq78ubz",p="_3YL58ia235DQ";const h=["variant","color","weight","lineHeight","align","verticalAlign","component","children","className","caps","noWrap","wrapOnOverflow","noLeading"],v={xxl:"h1",xl:"h1",l:"h2",m:"span",s:"span",xs:"span"},g={xxl:"bold",xl:"bold",l:"bold",m:"regular",s:"regular",xs:"regular"},_={m:"normal",s:"compact"},f={xxl:"BEks2gDm_s-5",xl:"_1XUz_c0lz0o6",l:"_1NaXz0wuXBIu",m:"_1ZgUd2IqgPxk",s:"yrPADRFfF1_o",xs:"O1tUGZncEDtj"},E={alpha:"KcE8KCMTFFP6",beta:"_3U40QhYxlbfF",gamma:"_2Ix3ftldy8P8",accent:"_3bV3Hv7IxT1z",positive:"_133QzLsge8nm",negative:"_29_PgewFZ2hn",warning:"_2CTLqRdqV_J1",inherit:"WzkOSjACd2lM"},S={regular:"_3jYCTW3DbbHE",bold:"_3fpyRbXGIXTv"},y={normal:"_2W7tLCMc_DxD",compact:"_7GPDV19x7WTe"},b={left:"McB5lwE_ED2W",center:"_14of-cgFTjfB",right:"jQ4AnmpN7Dz6"},C={top:"_17TuHBV7Wosn",center:"_3OvkZSOiXl0Q",bottom:"FfmZ2cvrp6pm"},T=e=>{let a=e.variant,s=void 0===a?"m":a,T=e.color,A=void 0===T?"inherit":T,k=e.weight,w=e.lineHeight,N=e.align,R=void 0===N?"left":N,I=e.verticalAlign,D=e.component,O=e.children,L=e.className,M=e.caps,P=e.noWrap,x=e.wrapOnOverflow,F=e.noLeading,B=r(e,h);const Z=D||v[s],U=w||_[s];return n.createElement(Z,i({className:o(l,M&&d,P&&u,x&&m,F&&p,f[s],E[A],S[k||g[s]],U&&y[U],I&&c,I&&C[I],b[R],L)},B),O)}},52477:(e,a,s)=>{"use strict";s.d(a,{E:()=>n});var i=s(2243),r=s(27378);const n=e=>r.useMemo((()=>{var a,s;if(e.length<=4){const s=(null!==(a=e.match(/\w/g))&&void 0!==a?a:[]).map((e=>parseInt("".concat(e).concat(e),16))),r=i(s,3),n=r[0],o=r[1],l=r[2];return"".concat(n,",").concat(o,",").concat(l)}{const a=(null!==(s=e.match(/\w\w/g))&&void 0!==s?s:[]).map((e=>parseInt(e,16))),r=i(a,3),n=r[0],o=r[1],l=r[2];return"".concat(n,",").concat(o,",").concat(l)}}),[e])},85022:(e,a,s)=>{"use strict";s.d(a,{X:()=>n});var i=s(2243),r=s(27378);const n=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const s=r.useState(null),n=i(s,2),o=n[0],l=n[1],c=r.useRef();return r.useEffect((()=>{const s=e.subscribe((e=>{null!==e?(void 0!==c.current&&clearTimeout(c.current),l(e),c.current=setTimeout((()=>{l(null)}),a)):l(null)}));return s}),[e,a]),o}},573:(e,a,s)=>{"use strict";s.d(a,{$Z:()=>o,C4:()=>T,My:()=>u,PP:()=>S,R8:()=>_,SA:()=>d,T1:()=>l,VJ:()=>v,XS:()=>E,ay:()=>y,bJ:()=>h,b_:()=>f,go:()=>C,j6:()=>b,jk:()=>c,tU:()=>g,u0:()=>p});var i=s(27378),r=s(82844),n=s(18985);const o=()=>i.createElement(r._,{defaultMessage:"Trader",id:"comp_trader"}),l=e=>i.createElement(r._,{id:"tou_timer_second",defaultMessage:"{seconds, plural, one {# second} other {# seconds}}",values:{seconds:e.seconds}}),c=e=>i.createElement(r._,{id:"tou_timer_minute",defaultMessage:"{minutes, plural, one {# minute} other {# minutes}}",values:{minutes:e.minutes}}),d=e=>i.createElement(r._,{id:"tou_timer_hour",defaultMessage:"{hours, plural, one {# hour} other {# hours}}",values:{hours:e.hours}}),u=e=>i.createElement(r._,{id:"tou_timer_day",defaultMessage:"{days, plural, one {# day} other {# days}}",values:{days:e.days}}),m=e=>(e=e<0?0:e,i.useMemo((()=>({seconds:e,minutes:Math.floor(e/60)%60,hours:Math.floor(e/3600)%24,days:Math.floor(e/86400)})),[e])),p=e=>{let a=e.seconds;const s=m(a);return s.days>0?i.createElement(u,{days:s.days}):s.hours?i.createElement(d,{hours:s.hours}):s.minutes?i.createElement(c,{minutes:s.minutes}):i.createElement(l,{seconds:s.seconds})},h=e=>i.createElement(r._,{id:"tou_timer_short_second",defaultMessage:"{seconds} sec",values:{seconds:e.seconds}}),v=e=>i.createElement(r._,{id:"tou_timer_short_minute",defaultMessage:"{minutes} min",values:{minutes:e.minutes}}),g=e=>i.createElement(r._,{id:"tou_timer_short_hour",defaultMessage:"{hours} h",values:{hours:e.hours}}),_=e=>{let a=e.seconds;const s=m(a);return s.days>0?i.createElement(u,{days:s.days}):s.hours?i.createElement(g,{hours:s.hours}):s.minutes?i.createElement(v,{minutes:s.minutes}):i.createElement(h,{seconds:s.seconds})},f=()=>i.createElement(r._,{id:"tou_past",defaultMessage:"Over"}),E=()=>i.createElement(r._,{id:"tou_events",defaultMessage:"Events"}),S=()=>i.createElement(r._,{id:"tou_points_abbreviation",defaultMessage:"XP"}),y=e=>i.createElement(r._,{id:"tou_points_value",defaultMessage:"{value} XP",values:{value:i.createElement(n.BK,{value:e.value})}}),b=()=>i.createElement(r._,{id:"tou_leaderboard_title",defaultMessage:"Leaderboard"}),C=()=>i.createElement(r._,{id:"tou_leaderboard_item_me",defaultMessage:"Me"}),T=e=>i.createElement(r._,{id:"tou_leaderboard_position",defaultMessage:"Rank {value}",values:{value:e.position}})},57415:(e,a,s)=>{"use strict";s.d(a,{$Z:()=>k.$Z,Af:()=>n.A,C4:()=>k.C4,CP:()=>A.C,D8:()=>o.D,F:()=>d.F,K7:()=>m.K,Od:()=>S.O,PP:()=>k.PP,R8:()=>k.R8,Rb:()=>c.R,U0:()=>g.U,WN:()=>h.W,XB:()=>_.X,XS:()=>k.XS,Xq:()=>C.X,ZG:()=>A.Z,ZJ:()=>p.Z,ZT:()=>b.Z,Zb:()=>r.Z,aX:()=>T.a,ay:()=>k.ay,bD:()=>v.b,b_:()=>k.b_,fO:()=>l.f,gi:()=>y.g,go:()=>k.go,j6:()=>k.j6,jm:()=>u.j,kM:()=>f.k,kw:()=>v.k,qE:()=>i.q,u0:()=>k.u0,uM:()=>E.u});s(77712);var i=s(71240),r=s(90916),n=s(76877),o=s(4888),l=s(207),c=s(13453),d=s(39156),u=s(52984),m=s(62640),p=s(14310),h=s(75569),v=s(26719),g=s(56541),_=s(28750),f=s(11233),E=s(9411),S=s(47314),y=s(36855),b=s(15536),C=s(85022),T=s(48872),A=s(80499),k=s(573)},48872:(e,a,s)=>{"use strict";s.d(a,{a:()=>ThrottledTasks});var i=s(47014),r=s(23934);class ThrottledTasks{constructor(e){this.wait=e,this.emitter=(0,r.Z)(),this.tasks=new Map}get(e,a){var s=this;return i((function*(){const i=s.tasks.get(e);if(i)return i;const r=a();return r.then((e=>s.wait?new Promise((a=>setTimeout((()=>a(e)),s.wait))):e)).finally((()=>{s.tasks.delete(e),0===s.tasks.size&&s.emitter.emit("empty")})),s.tasks.set(e,r),r}))()}get hasPendingTasks(){return 0!==this.tasks.size}on(e,a){this.emitter.on(e,a)}}},80499:(e,a,s)=>{"use strict";s.d(a,{C:()=>Watcher,Z:()=>o});var i,r=s(27378);!function(e){e[e.STARTED=0]="STARTED",e[e.STOPPING=1]="STOPPING",e[e.STOPPED=2]="STOPPED"}(i||(i={}));class Watcher{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.handlers=e,this.timeout=a,this.status=i.STOPPED,this.stopTimeout=null,this.start=()=>{this.status===i.STOPPED?(this.handlers.onStart(),this.status=i.STARTED):this.status===i.STOPPING&&(this.clearStopTimeout(),this.status=i.STARTED)},this.stop=()=>{this.status===i.STARTED&&(this.status=i.STOPPING,this.stopTimeout=setTimeout((()=>{this.stopTimeout=null,this.status=i.STOPPED,this.handlers.onStop()}),this.timeout))}}clearStopTimeout(){null!==this.stopTimeout&&(clearTimeout(this.stopTimeout),this.stopTimeout=null)}}const n=new Map,o=e=>{(0,r.useEffect)((()=>{var a;const s=(null!==(a=n.get(e))&&void 0!==a?a:0)+1;return n.set(e,s),1===s&&e.start(),()=>{var a;const s=(null!==(a=n.get(e))&&void 0!==a?a:0)-1;0===s?(n.delete(e),e.stop()):n.set(e,s)}}),[e])}},93751:(e,a,s)=>{"use strict";function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2?arguments[2]:void 0,i=!1,r=null;function n(){i?r=arguments:(e.apply(this,arguments),i=!0,window.setTimeout((function(){i=!1,r&&(n.apply(s,r),r=null)}),a))}return n}s.d(a,{P:()=>i})},87601:(e,a,s)=>{"use strict";s.d(a,{eh:()=>r,j$:()=>i,xM:()=>n});const i={BREAKPOINT_320:320,BREAKPOINT_360:360,BREAKPOINT_369:369,BREAKPOINT_480:480,BREAKPOINT_540:540,BREAKPOINT_600:600,BREAKPOINT_670:670,BREAKPOINT_768:768,BREAKPOINT_769:769,BREAKPOINT_781:781,BREAKPOINT_960:960,BREAKPOINT_961:961,BREAKPOINT_1024:1024,BREAKPOINT_1025:1025,BREAKPOINT_1280:1280,BREAKPOINT_1440:1440},r={PORTRAIT:"portrait",LANDSCAPE:"landscape"},n={WIDTH:1190,HEIGHT:720}},20986:(e,a,s)=>{"use strict";s.d(a,{B8:()=>r,Rz:()=>i});const i={TRADE:"trade",DEPOSIT:"deposit"},r={ASC:"asc",DESC:"desc"}},90212:(e,a,s)=>{"use strict";s.d(a,{AW:()=>r,L0:()=>o,Tj:()=>i,r1:()=>n,vG:()=>l});const i="@prm/notifications",r="ios_home_screen_reminder",n="ios_install_pwa_tracker",o="webView",l="isElectron"},474:(e,a,s)=>{"use strict";s.d(a,{Ds:()=>i,Y6:()=>o,_n:()=>n,lE:()=>r});const i={rub:"₽",usd:"$",eur:"€",demo:"Đ",brl:"R$",cny:"¥",jpy:"¥",gbp:"£",gbx:"p",thb:"฿",idr:"Rp",inr:"₹",mxn:"$",sgd:"S$",vnd:"₫",aed:"د.إ",ars:"$",egp:"E£",cop:"$",omr:"R.O.",sar:"﷼",usdt:"₮",krw:"₩",olc:"XP"},r={usd:"USD"},n={usd:"USD",rub:"RUB"},o={USD:"usd",EUR:"eur",RUB:"rub",BLR:"brl",CNY:"cny",JPY:"jpy",GBP:"gbp",GBX:"gbx",THB:"thb",IDR:"idr",INR:"inr",MXN:"mxn",SGD:"sgd",VND:"vnd",AED:"aed",ARS:"ars",EGP:"egp",COP:"cop",OMR:"omr",SAR:"sar",USDT:"usdt",KRW:"krw",OLC:"olc"};o.USD},72785:(e,a,s)=>{"use strict";s.d(a,{Ns:()=>l,TP:()=>n,ZB:()=>i,c9:()=>c,cO:()=>d,em:()=>r,mF:()=>o});const i={WIN:"win",LOOSE:"loose",STANDOFF:"standoff",CANCEL:"cancel"},r={UP:"up",DOWN:"down"},n={DIGITAL:"digital",CLASSIC:"classic"},o={LOADING:"loading",WAIT:"wait",CANCEL:"cancel",EXPIRE:"expire",SUCCESS:"success",ERROR:"error",NORMAL:"normal"},l={TIME_OPEN:"timeOpen",COURSE_TARGET:"courseTarget"},c={CANCEL:"cancel",STANDOFF:"standoff",WIN:"win",LOOSE:"loose",ERROR:"error",FLAT:"flat"},d={MANUAL:"manual",AUTO:"auto",STOP_OUT:"stop_out",SL_PRICE:"sl_price",SL_AMOUNT:"sl_amount",SL_PERCENT:"sl_percent",SL_ALL:"sl_all",TP_PRICE:"tp_price",TP_AMOUNT:"tp_amount",TP_PERCENT:"tp_percent",TP_ALL:"tp_all",MARGIN_CALL:"margin_call_2",FORCED:"forced",REQUEST:"request"}},40285:(e,a,s)=>{"use strict";s.d(a,{$i:()=>i,FM:()=>r,aK:()=>n});const i={AMOUNT:"amount",PRICE:"price",PERCENT:"percent"},r={STOP_LOSS:"stopLoss",TAKE_PROFIT:"takeProfit"},n={AMOUNT:12,PRICE:10,PERCENT:9}},54136:(e,a,s)=>{"use strict";s.d(a,{C:()=>r,M:()=>i});const i="isTwa",r="appsflyerId"},26323:(e,a,s)=>{"use strict";s.d(a,{$H:()=>o,Gt:()=>n,H0:()=>m,Ij:()=>r,J2:()=>d,Qz:()=>v,ZW:()=>p,gX:()=>i,gw:()=>h,nA:()=>u,qz:()=>c,zH:()=>l});const i={ru:"Русский",en:"English",th:"ไทย",id:"Bahasa Indonesia",pt:"Português",es:"Español",tr:"Türkçe",vi:"Tiếng Việt",hi:"हिन्दी",ar:"العربية",ms:"Bahasa Melayu",fr:"Français",ja:"日本語",ko:"한국어",fa:"فارسی"},r={AR:"ar",EN:"en",ES:"es",FR:"fr",HI:"hi",ID:"id",JP:"ja",KO:"ko",MS:"ms",PT:"pt",RU:"ru",TH:"th",TR:"tr",VI:"vi",FA:"fa"},n={ar:"ar_AE",en:"en_US",es:"es_LA",fr:"fr_FR",hi:"hi_IN",id:"id_ID",ja:"ja_JP",ko:"ko_KR",ms:"ms_MY",pt:"pt_BR",ru:"ru_RU",th:"th_TH",tr:"tr_TR",vi:"vi_VN",fa:"fa_IR"},o=(r.AR,r.EN,r.ES,r.FR,r.HI,r.ID,r.JP,r.KO,r.MS,r.PT,r.RU,r.TH,r.TR,r.VI,r.FA,{ru:" ",en:",",th:",",id:".",pt:".",es:",",tr:".",vi:".",hi:",",ar:".",ms:",",fr:",",ja:",",ko:",",fa:","}),l={ru:",",en:".",th:".",id:",",pt:",",es:".",tr:",",vi:",",hi:".",ar:",",ms:".",fr:".",ja:".",ko:".",fa:"."},c=["AR","BO","BR","CL","CO","CR","CU","DO","EC","GT","HN","HT","MX","NI","PA","PE","PY","SV","UY","VE"],d=["en","id","fa","hi","vi","ru","th","pt","ms","tr","ar","es","fr","ko","ja"],u=["as","ai","aw","au","at","be","bl","bq","bm","bg","ky","hr","ch","cf","cd","ci","cw","cy","cz","io","ca","ck","dk","ee","er","et","fo","fk","fi","fr","gf","pf","de","gi","gr","gl","gp","gb","gu","hu","es","ir","iq","il","is","ie","it","jp","lv","li","lt","lu","lb","lr","ly","ml","mm","mt","mq","ms","mu","nl","nc","no","nz","nu","nf","kp","mp","mf","pl","pt","pr","pm","re","ro","ru","vc","vi","sh","si","sx","sk","so","sd","sy","se","tk","tc","us","vg","vu","wf","ye","zw"],m="en",p=n[m],h=["BR","ID","TH","VN"],v=["IR"]},26763:(e,a,s)=>{"use strict";s.r(a),s.d(a,{ACCOUNTS_ENTITY_PROXY_SERVICE:()=>Le,ACCOUNT_EDIT_SERVICE:()=>ha,ACCOUNT_SERVICE:()=>Q,ACCOUNT_TRANSFERS_PROXY_SERVICE:()=>Ie,ACTUAL_BONUS_SERVICE:()=>c,ADVISOR_LIST_STORE:()=>vt,APP_SERVICE:()=>m,ASSET_LIST_SERVICE_FTT:()=>ua,ASSET_LIST_SERVICE_FX:()=>ma,ASSET_LIST_SERVICE_SPT:()=>pa,ASSET_MENU_SERVICE:()=>da,ASSISTANT_SERVICE:()=>ve,ASSISTANT_STORE:()=>Bt,BOTTOM_SHEET_SERVICE:()=>va,CANDLE_HISTORY_SERVICE:()=>g,CANDLE_SERVICE:()=>_,CHART_BETA_TEST_SERVICE:()=>Ca,CHART_DEAL_SERVICE:()=>f,CHART_MESSAGES_STORE:()=>gt,CHART_NEWS_SERVICE:()=>dt,CHART_SENTIMENT_STORE:()=>ut,CHART_STATUS_STORE:()=>mt,CHART_STORE:()=>ct,CHART_TYPE_SELECTOR_STORE:()=>la,CHAT_BOT_STORE:()=>kt,CROSS_CURS_SERVICE:()=>ga,CURRENCY_CONVERTER_SERVICE:()=>lt,DAILY_TASKS_FLOAT_BTN_STORE:()=>ta,DAILY_TASKS_NOTIFICATION_SERVICE:()=>be,DAILY_TASKS_STATE_SERVICE:()=>ye,DAILY_TASKS_STORE:()=>Dt,DATA_SERVICE:()=>p,DEAL_BLOCK_REASON_SERVICE:()=>B,DEAL_CURRENT_LIST_SERVICE:()=>L,DEAL_CURRENT_SERVICE:()=>o,DEAL_CURRENT_SERVICE_BO:()=>y,DEAL_CURRENT_SERVICE_FX:()=>b,DEAL_CURRENT_SERVICE_SPT:()=>_a,DEAL_DETAILS_ADAPTER_SERVICE:()=>ya,DEAL_DETAILS_SERVICE:()=>R,DEAL_DETAILS_SERVICE_BO:()=>I,DEAL_DETAILS_SERVICE_FX:()=>D,DEAL_DURATION_PRESET_SERVICE:()=>F,DEAL_DURATION_SERVICE:()=>x,DEAL_FORM_SHEET_STORE:()=>bt,DEAL_FORM_STORE:()=>yt,DEAL_HISTORY_LIST_SERVICE:()=>O,DEAL_HISTORY_POPUP_STORE:()=>ia,DEAL_HISTORY_SERVICE:()=>n,DEAL_HISTORY_SERVICE_BO:()=>C,DEAL_HISTORY_SERVICE_FX:()=>T,DEAL_HISTORY_STORE:()=>Pt,DEAL_HISTORY_UI_SERVICE:()=>Z,DEAL_ORDER_CURRENT_LIST_SERVICE:()=>M,DEAL_ORDER_CURRENT_SERVICE_FTT:()=>A,DEAL_ORDER_CURRENT_SERVICE_FX:()=>k,DEAL_ORDER_FORM_STORE:()=>Ht,DEAL_ORDER_FORM_STORE_BO:()=>Kt,DEAL_ORDER_FORM_STORE_FX:()=>Yt,DEAL_ORDER_HISTORY_LIST_SERVICE:()=>P,DEAL_ORDER_HISTORY_SERVICE:()=>l,DEAL_ORDER_HISTORY_SERVICE_BO:()=>w,DEAL_ORDER_HISTORY_SERVICE_FX:()=>N,DEAL_RISK_FREE_TRANSPORT_SERVICE:()=>U,DEAL_SERVICE:()=>r,DEAL_SERVICE_BO:()=>E,DEAL_SERVICE_FX:()=>S,DEAL_SOUND_SERVICE_BO:()=>Pe,DEAL_SOUND_SERVICE_FX:()=>xe,DRAWING_SERVICE:()=>V,DRAWING_SETTINGS_STORE:()=>Tt,EMARSYS_OFFER_SERVICE:()=>Fe,END_TURBO_DEALS_SERVICE:()=>W,END_TURBO_DEALS_STORE:()=>_t,END_TURBO_DEALS_TOOLTIP_STORE:()=>ft,FEATURE_TOGGLE_SERVICE:()=>ie,FINHISTORY_SERVICE:()=>ge,FPS_SERVICE:()=>re,GAMBLING_ASSET_FRAME_SERVICE:()=>Ea,GAMBLING_ASSET_SERVICE:()=>Sa,GAMBLING_SOUND_SERVICE:()=>fa,HASH_OPEN_OVL_SERVICE:()=>tt,HEADER_STORE:()=>aa,HISTORY_SERVICE:()=>ae,HOTKEYS_CONTAINER_STORE:()=>oa,HOTKEYS_SERVICE:()=>se,INDICATORS_SIDEBAR_SERVICE:()=>ca,INDICATOR_LIST_STORE:()=>pt,INDICATOR_SERVICE:()=>me,INDICATOR_SETTINGS_STORE:()=>Ct,INTERNAL_TRANSACTIONS_SERVICE:()=>fe,INTERNAL_TRANSACTIONS_STORE:()=>Lt,IN_APP_SERVICE:()=>Me,IN_APP_STORE:()=>It,KYC_PROXY_SERVICE:()=>De,KYC_SERVICE:()=>u,KYC_STORE:()=>Ft,LANGUAGE_SERVICE:()=>ne,LEGACY_SERVICE:()=>h,LIMITS_SERVICE:()=>nt,MARKET_PLACE_SERVICE:()=>Je,MARKET_PLACE_STORE:()=>sa,NAVIGATION_SERVICE:()=>H,NOTICE_SERVICE:()=>j,NOTICE_SOCKET_SERVICE:()=>q,NOTICE_STORE:()=>z,NOTICE_TO_OVERLAY_ADAPTER_SERVICE:()=>Te,ON_BOARDING_BANNER_SERVICE:()=>we,ON_BOARDING_SERVICE:()=>ke,OPEN_TUTORIAL_SERVICE:()=>at,OVERLAY_CAROUSEL_SERVICE:()=>Be,OVL_POST_MESSAGE_SERVICE:()=>G,PAGE_ROUTING_SERVICE:()=>ee,PAGE_SERVICE:()=>J,PAIRS_RATE_UPDATE_SERVICE_FX:()=>st,PAIRS_RATE_UPDATE_SERVICE_SPT:()=>it,PAIR_ASSETS_SELECT_STORE_BO:()=>zt,PAIR_ASSETS_SELECT_STORE_FX:()=>qt,PAIR_ASSETS_STORE_BO:()=>Gt,PAIR_ASSETS_STORE_FX:()=>Vt,PAIR_DASHBOARD_SERVICE:()=>Ue,PAIR_MANAGEMENT_STORE:()=>St,PAIR_SERVICE:()=>i,PAIR_SERVICE_BO:()=>Ve,PAIR_SERVICE_FX:()=>Ge,PAIR_SERVICE_SPT:()=>We,PAIR_TRENDS_SERVICE_BINARY:()=>Ze,PAIR_TRENDS_SERVICE_FOREX:()=>He,PAIR_TRENDS_STORE_BO:()=>Wt,PAIR_TRENDS_STORE_FX:()=>jt,PAYOUT_STORE:()=>xt,PHONE_COLLECTOR_SERVICE:()=>je,PHONE_COLLECTOR_STORE:()=>$t,PLATFORM_SIDEBAR_STORE:()=>Xt,PLATFORM_TABS_STORE:()=>Et,PLAYLIST_STORE:()=>Rt,POPUP_DEAL_DETAILS_SERVICE:()=>qe,PRICE_LEVEL_SERVICE:()=>ot,PROFILE_SERVICE:()=>te,RATE_SERVICE:()=>v,RECHARGE_CABINET_STORE:()=>Ot,RECHARGE_POPUP_SERVICE:()=>ce,RECHARGE_SERVICE:()=>pe,RECHARGE_SIDEBAR_PROXY_SERVICE:()=>Re,RECHARGE_TOOLTIP_SERVICE:()=>he,RECHARGE_TRANSPORT_SERVICE:()=>Ne,RISK_FREE_GAMIFICATION_DEMO_SERVICE:()=>ue,SECURITY_NOTE_STORE:()=>Jt,SETTINGS_SERVICE:()=>Qe,SIDEBAR_DAILY_TASKS_STORE:()=>Qt,SIDEBAR_PROFILE_STORE:()=>ra,SIDEBAR_SERVICE:()=>Xe,SIDEBAR_STORE:()=>wt,SIDEBAR_USER_PROFILE:()=>Ce,SIDEBAR_WEEKLY_MARATHON:()=>Ae,SIDE_BAR_MANAGER_SERVICE:()=>_e,SIDE_BAR_TRIGGER_STORE:()=>Nt,SOCKET_RECONNECT_SERVICE:()=>rt,SOUND_SERVICE:()=>oe,STATISTICS_SERVICE:()=>le,STRATEGY_ADAPTER_SERVICE:()=>ba,STRATEGY_FRAME_ADAPTER_SERVICE:()=>Ta,STRATEGY_LIST_STORE:()=>ht,STRIKE_SERVICE:()=>Ee,SUPPORT_CHAT_SERVICE:()=>ze,SURVEY_ABOUT_FOREX_SERVICE:()=>K,SURVEY_SERVICE:()=>Y,TABS_SERVICE:()=>$e,TECH_ANALYSIS_STORE:()=>ea,TFA_SERVICE:()=>d,TIME_PICKER_STORE:()=>At,TIME_SERVICE:()=>Se,TRADE_CARD_SERVICE:()=>Ye,TRADE_FRAME_SERVICE:()=>Ut,TRADE_MANAGER_SERVICE:()=>Zt,TRADING_SIDEBAR_SERVICE:()=>Ke,TRADING_SIGNALS_ADAPTER_SERVICE:()=>Aa,UI_MODEL_PROXY_SERVICE:()=>Oe,UI_SERVICE:()=>X,USER_CONFIRM_BANNER_SERVICE:()=>et,USER_CONFIRM_BANNER_STORE:()=>na,VIDEO_GALLERY_STORE:()=>Mt,VIDEO_INSTRUCTION_SERVICE:()=>$,VIP_PROGRESS_TOURNAMENT_SERVICE:()=>de});const i="PairService",r="DealService",n="DealHistoryService",o="DealCurrentService",l="DealOrderHistoryService",c="ActualBonusService",d="2FAService",u="KYCService",m="AppService",p="DataService",h="LegacyService",v="RateService",g="CandleHistoryService",_="CandleService",f="ChartDealService",E="DealServiceBo",S="DealServiceFx",y="DealCurrentServiceBo",b="DealCurrentServiceFx",C="DealHistoryServiceBo",T="DealHistoryServiceFx",A="DealOrderCurrentServiceFtt",k="DealOrderCurrentServiceFx",w="DealOrderHistoryServiceBo",N="DealOrderHistoryServiceFx",R="DealDetailsService",I="DealDetailsServiceBo",D="DealDetailsServiceFx",O="DealHistoryListService",L="DealCurrentListService",M="DealOrderCurrentListService",P="DealOrderHistoryListService",x="dealDurationService",F="dealDurationPresetService",B="dealBlockReasonService",Z="DealHistoryUiService",U="DealRiskFreeTransportService",H="NavigationService",G="OvlPostMessageService",V="drawingService",W="endTurboDealsService",j="NoticeService",z="NoticeStore",q="NoticeSocketService",K="SurveyAboutForexService",Y="SurveyService",X="uiService",J="PageService",Q="AccountService",$="videoInstructionService",ee="PageRoutingService",te="ProfileService",ae="HistoryService",se="HotkeyService",ie="FeatureToggleService",re="FpsService",ne="LanguageService",oe="SoundService",le="StatisticsService",ce="RechargePopupService",de="VipProgressTournamentService",ue="RiskFreeGamificationDemoService",me="IndicatorService",pe="RechargeService",he="RechargeTooltipService",ve="AssistantService",ge="FinHistoryService",_e="SideBarManagerService",fe="InternalTransactionsService",Ee="StrikeService",Se="TimeService",ye="DailyTasksStateService",be="DailyTasksNotificationService",Ce="SidebarUserProfile",Te="NoticeToOverlayAdapterService",Ae="SidebarWeeklyMarathon",ke="OnBoardingService",we="OnBoardingBannerService",Ne="RechargeTransportService",Re="RechargeSidebarProxyService",Ie="AccountTransfersProxyService",De="KYCProxyservice",Oe="UIModelProxyService",Le="AccountsEntityProxyService",Me="InAppService",Pe="DealSoundServiceBo",xe="DealSoundServiceFx",Fe="EmarsysOfferService",Be="OverlayCarouselService",Ze="PairTrendsServiceBo",Ue="PairDashboardService",He="PairTrendsServiceFx",Ge="PairServiceFx",Ve="PairServiceBo",We="PairServiceSpt",je="PhoneCollectorService",ze="SupportChatService",qe="PopupDealDetailsService",Ke="TradingSidebarService",Ye="TradeCardService",Xe="SideBarService",Je="MarketPlaceService",Qe="SettingsService",$e="TabsService",et="UserConfirmBannerService",tt="HashOpenOvlService",at="OpenTutorialService",st="PairsRateUpdateServiceFx",it="PairsRateUpdateServiceSpt",rt="SocketReconnectService",nt="LimitsService",ot="PriceLevelService",lt="CurrencyConverterService",ct="ChartStore",dt="ChartNewsService",ut="ChartSentimentStore",mt="ChartStatusStore",pt="IndicatorListStore",ht="StrategyListStore",vt="AdvisorListStore",gt="ChartMessagesStore",_t="EndTurboDealsStore",ft="EndTurboDealsTooltipStore",Et="PlatformTabsStore",St="PairManagementStore",yt="DealFormStore",bt="DealFormSheetStore",Ct="IndicatorSettingsStore",Tt="DrawingSettingsStore",At="TimePickerStore",kt="ChatBotStore",wt="SideBarStore",Nt="SideBarTriggerStore",Rt="PlayListStore",It="InAppStore",Dt="DailyTasksStore",Ot="RechargeCabinetStore",Lt="InternalTransactionsStore",Mt="VideoGalleryStore",Pt="DealHistoryStore",xt="PayoutStore",Ft="KYCStore",Bt="AssistantStore",Zt="TradeManagerService",Ut="TradeFrameService",Ht="DealOrderFormStore",Gt="PairAssetsStoreBo",Vt="PairAssetsStoreFx",Wt="PairTrendsStoreBo",jt="PairTrendsStoreFx",zt="PairSelectStoreBo",qt="PairSelectStoreFx",Kt="DealOrderFormStoreBo",Yt="DealOrderFormStoreFx",Xt="PlatformSidebarStore",Jt="SecurityNoteStore",Qt="SidebarDailyTasksStore",$t="PhoneCollectorStore",ea="TechAnalysisStore",ta="DailyTasksFloatBtnStore",aa="HeaderStore",sa="MarketPlaceStore",ia="DealHistoryPopupStore",ra="SideBarProfileStore",na="UserConfirmBannerStore",oa="HotkeysContainerStore",la="ChartTypeSelectorStore",ca="IndicatorsSidebarService",da="AssetMenuService",ua="AssetListServiceFtt",ma="AssetListServiceFx",pa="AssetListServiceSpt",ha="AccountEditService",va="BottomSheetService",ga="CrossCursServiceSpt",_a="DealCurrentServiceSpt",fa="GamblingSoundService",Ea="GamblingAssetFrameService",Sa="GamblingAssetService",ya="DealDetailsAdapterService",ba="StrategyAdapterService",Ca="ChartBetaTestService",Ta="StrategyFrameAdapterService",Aa="TradingSignalsAdapterService"},86269:(e,a,s)=>{"use strict";s.d(a,{q:()=>i});const i={ABOUT:"about",ANALYTICS:"analytics",ASSETS:"crossroads?section=assets",AUTH:"auth",BLOCKED_PAGE:"blocked",BLOG:"blog",CABINET:"cabinet",EDUCATION:"education",EDUCATION_STRATEGY:"education/strategy",EDUCATION_WERBINAR:"education/webinar",EDUCATION_WERBINARFX:"education/webinarfx",FAQ:"faq",FOREX:"forex",HELP_CENTER:"crossroads?section=help",HOME:"home",LOG_OUT:"user/logout",NEWS:"news",PLATFORM:"platform",REGULATION:"regulation",ROOT:"",SITE:"site",SUPPORT:"support",TERMS:"terms",TERMS_WEYBRIDGE:"terms/weybridge",TERMS_MERCERON:"terms/merceron",TERMS_AND_CONDITIONS:"terms-and-conditions",TERMS_BEST_EXECUTION_POLICY:"best-execution-policy",TERMS_CLIENT_AGREEMENT:"client-agreement",TERMS_COMPLAINTS_HANDLING_POLICY:"complaints-handling-policy",TERMS_COOKIE_CONSENT_AND_POLICY:"cookie-consent-and-policy",TERMS_PRIVACY_POLICY:"privacy-policy",TERMS_REGULATIONS_FOR_NON_TRADING_OPERATIONS:"regulations-for-non-trading-operations",TERMS_RISK_DISCLOSURE:"risk-disclosure",TERMS_ONE_CLICK:"one-click",TERMS_AGREEMENT_ON_THE_STORAGE:"agreement_on_the_storage",TRAINING:"training",TUTORIAL:"tutorial",VERIFICATION_PAGE:"verification",WEBINARS:"education"}},27967:(e,a,s)=>{"use strict";s.d(a,{Qm:()=>r,d:()=>i});const i="EURUSD",r={CURRENCY:"currency",RAW:"raw",STOCK:"stock",STOCKS_RECOMMENDED:"stocks_recommended",INDEX:"index",CRYPTO:"crypto",METAL:"metal",GOODS:"goods",ETF:"etf",OTC:"otc",COMPOSITE:"composite",NEW:"new",USA_REGION:"usa_region",EUR_REGION:"eur_region",ASIA_REGION:"asia_region"}},3789:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});const i={IS_BETA_VERSION:"is_platform_beta_version",ONE_CLICK_ON:"1click_on",ONE_SCREEN_DEALS_2:"one_screen_deals_2",TEST_BO_FX:"test_bo_fx",TEST_DEMO_REFILLABLE:"test_demo_refillable",TEST_DEALS_TO_LEFT:"test_deals_to_left",TEST_GL_CHART:"test_gl_chart",ACCOUNT_ARCHIVE:"account_archive",FEATURE_TOGGLES:"toggles",ACCOUNT_TRANSFERS_ENABLED:"transfers_enabled",TEST_GL_BETA:"test_gl_beta",FAST_DEALS_NUMBER_RESTRICTION:"fast_deals_number_restriction"}},66713:(e,a,s)=>{"use strict";s.d(a,{Fw:()=>i,bk:()=>r,c0:()=>n,ik:()=>c,wt:()=>l,yy:()=>o});const i={FOREX:"fx",BINARY:"bo",OTP:"otp",STOCKS:"spt"},r={FOREX:i.FOREX,BINARY:i.BINARY,STOCKS:i.STOCKS},n=i.FOREX,o=i.BINARY,l=i.OTP,c=i.STOCKS},99175:(e,a,s)=>{"use strict";s.d(a,{G:()=>i,Z:()=>r});const i={LOGIN:"#action=auth",REGISTRATION:"#action=register"},r={ABOUT:"/about",ANALYTICS:"/analytics",ASSETS:"/crossroads?section=assets",AUTH:"/login",AUTH_LITE:"/auth-lite",BLOCKED:"/blocked",BLOCKED_PAGE:"/blocked",BLOG:"https://blog.olymptrade.com/ru/",BLOG_GLOBAL:"https://blog.olymptrade.com",CABINET:"/cabinet",DOWNLOAD:"/download",EDUCATION:"/education",EDUCATION_STRATEGY:"/education/strategy",EDUCATION_WERBINAR:"/education/webinar",EDUCATION_WERBINARFX:"/education/webinarfx",FAQ:"/faq",FINFALCON:"//finfalcon.com",FOREX:"/forex",HELP_CENTER:"/crossroads?section=help",HOME:"/home",LOG_OUT:"/user/logout",NEWS:"/news",PLATFORM:"/platform",REGULATION:"/regulation",ROOT:"/",SITE:"/site",STATUSES:"/statuses",SUPPORT:"/support",TERMS:"/terms",TERMS_AGREEMENT_ON_THE_STORAGE:"/storage-of-credentials",TERMS_AND_CONDITIONS:"/terms-and-conditions",TERMS_BEST_EXECUTION_POLICY:"/best-execution-policy",TERMS_CLIENT_AGREEMENT:"/client-agreement",TERMS_COMPLAINTS_HANDLING_POLICY:"/complaints-handling-policy",TERMS_COOKIE_CONSENT_AND_POLICY:"/cookie-consent-and-policy",TERMS_MERCERON:"/terms/merceron",TERMS_ONE_CLICK:"/one-click-service-terms-and-conditions",TERMS_PRIVACY_POLICY:"/privacy-policy",TERMS_REGULATIONS_FOR_NON_TRADING_OPERATIONS:"/regulations-for-non-trading-operations",TERMS_RISK_DISCLOSURE:"/risk-disclosure",TERMS_SERVICE_AGREEMENT:"/service-agreement",TERMS_WEYBRIDGE:"/terms/weybridge",TOURNAMENTS:"/tournaments",TRAINING:"/training",TUTORIAL:"/tutorial",VERIFICATION:"/verification",VERIFICATION_PAGE:"/verification",WEBINARS:"/education"}},61075:(e,a,s)=>{"use strict";s.d(a,{R:()=>i});const i="KO"},75882:(e,a,s)=>{"use strict";s.d(a,{a:()=>i});const i={BAT_TOURNAMENT_ANNOUNCED:"bat_tournament_announced",BATTLEROOM_ANNOUNCED:"battleroom_announced",CHART_TYPES_ENABLED:"chart_types_enabled",DEAL_CATEGORY:"deal_category",DEAL_FORM_SHOW_LIMITS:"deal_form_show_limits",DEAL_MULTIPLICATOR:"deal_multiplicator",DEAL_STOP_LOSS:"deal_stop_loss",DEAL_TAKE_PROFIT:"deal_take_profit",DEAL_SUM:"deal_sum",DEAL_TYPE:"deal_type",DIGITAL_STRIKES_VISIBLE:"digital_strikes_visible",DRAW_ELS:"draw_els",DURATION_HISTORY:"duration_history",HOTKEYS:"hotkeys",HOTKEYS_ACTIVATED:"hotkeys_activated",IGNORE_HOLD_USE:"ignore_hold_use",INDICATOR_SETTINGS:"indicator_settings",INDICATORS:"indicators",INDICATORS_ENABLED:"indicators_enabled",IS_ONE_CLICK_POPUP:"is_one_click_popup",IS_ONE_CLICK_TRADE_DEAL:"is_one_click_trade_deal",IS_SENTIMENT:"is_sentiment",IS_TECH_ANALYSIS_DISABLED:"is_tech_analysis_disabled",IS_TIME_DEAL:"is_time_deal",LANG:"lang",MARKET_PLACE_ACCEPTED_POLICY:"market_place_accepted_policy",ONBOARDING:"onboarding",OPEN_CHANNEL_VIDEO_GALLERY:"open_channel_video_gallery",OVERLAY_LAST_OPEN_TIME:"overlay_last_open_time",OVERLAY_MUTED_CHANNELS:"overlay_muted_channels",OVERLAY_SELECTED_ITEMS:"overlay_selected_items",PAIR_DEFAULT:"pair_default",PAIRS:"pairs",PAIRS_PROPERTIES:"pairsProperties",PLATFORM_THEME:"platform_theme",PAYOUT_REQUEST_NOTE:"payout_request_note",PROFITABILITY_SORT:"profitability_sort",PROJECT:"project",RATE:"rate",SENTIMENT:"sentiment",SHOW_ORDERS:"show_orders",SIDEBAR_COLLAPSED:"sidebar_collapsed",TP_DURATION:"tp_duration",TRADE_FRAMES:"trade_frames",MARTINGALE_MULTIPLICATION:"martingale_multiplication"}},22358:(e,a,s)=>{"use strict";s.d(a,{O:()=>i});const i={IOS:"ios",ANDROID:"android"}},99318:(e,a,s)=>{"use strict";s.d(a,{B:()=>o});var i=s(27378),r=s(45797);const n=["en_US","hi_IN","ms_MY","zh_CN","ko_KR","ar_AE","bn_BD"],o=e=>{let a=e.value,s=e.hour12;return i.createElement(i.Fragment,null,((e,a)=>Intl.DateTimeFormat(n.includes(r.NW.localeSrc)?"en-GB":r.NW.localeSrc.replace(/_/,"-"),{hour:"numeric",minute:"numeric",hour12:a}).format(e))(a,s))}},82844:(e,a,s)=>{"use strict";s.d(a,{_:()=>d,g:()=>u});var i=s(49491),r=s(14936),n=s(27378),o=(s(15857),s(30559)),l=s(2948);const c=["className","defaultMessage","description","id","tagName","values"],d=e=>{let a=e.className,s=e.defaultMessage,l=e.description,d=e.id,u=e.tagName,m=void 0===u?"span":u,p=e.values,h=r(e,c);return n.createElement(o.Z,{id:d,description:l,defaultMessage:s,values:p},(function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return n.createElement(m,i(i({},h),{},{className:a,"data-trans":d}),...s)}))},u=e=>{let a=e.className,s=e.defaultMessage,i=e.description,r=e.id,o=e.tagName,c=void 0===o?"span":o,d=e.values;const u=(0,l.Z)(),m=c;return n.createElement(m,{className:a,"data-trans":r,dangerouslySetInnerHTML:{__html:u.formatMessage({id:r,description:i,defaultMessage:s},d)}})}},8895:(e,a,s)=>{"use strict";function i(e,a){var s;e.getMilliseconds();const i=null===(s=null==a?void 0:a.withSeconds)||void 0===s||s,r=e.toLocaleString((null==a?void 0:a.locale)||"en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:i?"2-digit":void 0});return null!=a&&a.withMilliseconds?"".concat(r,".").concat(e.getMilliseconds()):r}s.d(a,{M:()=>i})},45797:(e,a,s)=>{"use strict";s.d(a,{NW:()=>d,bU:()=>u,mL:()=>l});var i=s(2243),r=s(29286),n=s(98017);const o={formatMessage(e){e.id;return e.defaultMessage||""}};const l=e=>(e=>e.includes("u-nu"))(e)?e:"".concat(e,"-u-nu-latn");function c(e){if(2===e.length)return e;const a=e.split(/[-_]/),s=i(a,2),r=s[0],n=s[1];return"".concat(r.toLowerCase(),"-").concat(n.toUpperCase())}const d=new class Intl{constructor(){this.formatDate=(e,a)=>this.intl.formatDate(e,a),this.formatTime=(e,a)=>this.intl.formatTime(e,a),this.formatRelativeTime=(e,a,s)=>this.intl.formatRelativeTime(e,a,s),this.formatNumber=(e,a)=>this.intl.formatNumber(e,a),this.formatPlural=(e,a)=>this.intl.formatPlural(e,a),this.formatHTMLMessage=(e,a)=>this.intl.formatHTMLMessage(e,a),this.formatMessage=(e,a)=>(this.intl||o).formatMessage(e,a)}updateMessages(e,a){this.reactIntlCache=(0,r.Sn)(),this.intl=(0,n.d)({locale:l(c(e)),messages:a},this.reactIntlCache),this.localeSrc=e}getInstance(){return this.intl}},u=e=>e?l(e):d&&d.intl&&d.intl.locale},8141:(e,a,s)=>{"use strict";s.d(a,{L:()=>r});var i=s(59343);const r=()=>(0,i.V)()?"rtl":"ltr"},59343:(e,a,s)=>{"use strict";s.d(a,{V:()=>n});var i=s(27378),r=s(45797);const n=()=>i.useMemo((()=>{return e=r.NW.localeSrc,["ar_AE","ur_PK","fa_IR"].includes(e);var e}),[r.NW.localeSrc])},34660:(e,a,s)=>{"use strict";s.d(a,{I:()=>o});var i=s(49491),r=s(27378),n=s(8141);const o=e=>a=>{const s=(0,n.L)();return r.createElement(e,i(i({},a),{},{direction:s}))}},2565:(e,a,s)=>{"use strict";s.d(a,{c0:()=>i,nn:()=>o,wt:()=>n,yy:()=>r});const i="fx",r="bo",n="otp",o="/platform/topology/v10"},41840:(e,a,s)=>{"use strict";s.d(a,{d:()=>Topology});var i=s(14206),r=s(2565);class Topology{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.url,s=e.onDomainError,i=e.webViewType;this.url=a||r.nn,this.onDomainError=s,this.webViewType=i}set(e,a){const s="undefined"!=typeof window?window.location:{hostname:"",protocol:""},i=s.hostname,n=s.protocol,o="".concat(n,"//").concat(i);let l;l=e.find((e=>!!e.otp.index&&e.otp.index.url===o)),l||(l=e[0],a&&a(new Error('topology for current host "'.concat(o,'" not found. Web view request: "').concat(this.webViewType,'"')))),this.topology=l,this.otp=l[r.wt],this.bo=l[r.yy],this.fx=l[r.c0],this.services=l.services}load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isForceLoad:!1};return this.isNeedLoadTopology(e.isForceLoad)?(this.topologyLoadedCache=this.request().then((e=>{let a=e.data;return this.set(a,this.onDomainError),a})),this.topologyLoadedCache.then((()=>this.topology))):this.topologyLoadedCache.then((e=>(this.set(e),this.topology)))}get topologyLoadedCache(){return this.getTopologyCache()[this.url]}set topologyLoadedCache(e){this.getTopologyCache()[this.url]=e}isNeedLoadTopology(e){return e||!this.topologyLoadedCache}request(){const e=this.webViewType?"".concat(this.url,"?app=").concat(this.webViewType):this.url;return i({method:"get",url:e,withCredentials:!0,params:{fallback_domain:0}})}getTopologyCache(){return"undefined"!=typeof window?(window.__topologyCache__||(window.__topologyCache__={}),window.__topologyCache__):Topology.localCache}}Topology.localCache={}},1255:(e,a,s)=>{"use strict";s.d(a,{e:()=>Http});var i=s(49491),r=s(14206),n=s(41840),o=s(61745);class Http{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Http.axios=r.create(),Http.axios.interceptors.response.use(void 0,Http.errorInterceptor),this.topology=e.topology||new n.d,this.defaultHeaders=Http.getHeaders(e.headers)}static checkOptions(e){if(!(e&&e.version&&e.project))throw new Error('"request" method of Http was called without required fields in "options" parameter!\n        ("version" or "project" is missing)"');return null}static getIosHeaders(){const e=(0,o.ej)("X-App-Name"),a=(0,o.ej)("X-App-Version");return e&&a?{"X-App-Name":e,"X-App-Version":a}:null}static getHeaders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=Http.getIosHeaders();return Object.assign({},{"X-Request-Type":"Api-Request","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},i({},e),a)}static errorInterceptor(e){return e.response&&401!==e.response.status?Promise.reject(e):e&&e.toString().includes("Network Error")?(e.response={},e.response.data={type:"network_error"},Promise.reject(e)):Promise.reject(e)}static handleSuccessResponse(e){return Promise.resolve((0,o.Qc)(e))}static handleErrorResponse(e){const a=(0,o.vs)(e);return Promise.reject(a)}composeHeaders(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={"X-Request-Project":"".concat(e)};return i(i(i({},this.defaultHeaders),s),a)}request(e,a,s){Http.checkOptions(s),s.headers=this.composeHeaders(s.project,s.headers);const r=s.data,n=s.version,l=s.params,c=s.headers,d=s.cancelToken;return this.topology.load().then((()=>{const s={method:a,data:r,params:l,headers:c,cancelToken:d};return void 0===s.cancelToken&&delete s.cancelToken,Http.axios.request(i(i({},s),{},{url:(0,o.Kk)(this.topology.otp.api.url,e,n),withCredentials:!0})).then(Http.handleSuccessResponse).catch(Http.handleErrorResponse)}))}post(e,a){return this.request(e,"post",a)}get(e,a){return this.request(e,"get",a)}}},61745:(e,a,s)=>{"use strict";s.d(a,{Kk:()=>o,Qc:()=>l,ej:()=>n,vs:()=>c});var i=s(2243),r=s(14206);function n(e){let a=" ".concat("undefined"!=typeof document?document.cookie:"").match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")))||[],s=i(a,2)[1];if(s){s=decodeURIComponent(s);try{return JSON.parse(s)}catch(e){}return console.warn("This method has been deprecated. Use brokers/olymp/src/core/helper/cookie.js instead of this"),s}}function o(e,a,s){let i=a,r=e;return"/"!==String.prototype.charAt.call(a,0)&&(i="/".concat(a)),"/"!==String.prototype.slice.call(e,-1)&&(r="".concat(e,"/")),"".concat(r).concat(s).concat(i)}function l(e){const a=e.data;return 204===e.status?null:a.data}function c(e){if(r.isCancel(e))return{code:"Error",internal_code:"error",msg:"Request is canceled by cancel token",type:"Canceled Error",raw:{error:e,status:null}};const a={code:"Error",internal_code:"error",msg:"System error",type:"Error",raw:{}};if(e.response){const s=e.response,i=s.data,r={status:s.status,error:e.response},n=i&&i.errors;Array.isArray(n)&&n[0]?Object.assign(a,n[0],{raw:r}):i.type&&Object.assign(a,{type:i.type||"Error",raw:r})}return a}},16800:(e,a,s)=>{"use strict";function i(e,a){return a?"".concat(e,"_").concat(JSON.stringify(a,Object.keys(a).sort())):e}s.d(a,{j0:()=>r});class SingleListeners{constructor(e){this.listeners={},this.handle=(e,a)=>{this.listeners[e].handlers.forEach((e=>{null==e||e(a)}))},this.target=e}add(e,a,s){if(!this.target)return console.warn("SingleListeners target is not defined");const r=i(e,s);if(!this.listeners[r]){const a="object"==typeof s&&s.debounce?function(e){let a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isImmediate:!1};const r=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];const l=this,c=function(){a=void 0,i.isImmediate||e.apply(l,n)},d=i.isImmediate&&void 0===a;void 0!==a&&clearTimeout(a),a=setTimeout(c,s),d&&e.apply(l,n)};return r.cancel=function(){void 0!==a&&clearTimeout(a)},r}((e=>this.handle(r,e)),s.debounce):e=>this.handle(r,e);this.target.addEventListener(e,a,s),this.listeners[r]={listener:a,handlers:[]}}this.listeners[r].handlers.push(a)}remove(e,a,s){var r;const n=i(e,s),o=this.listeners[n];o&&(o.handlers=o.handlers.filter((e=>e!==a)),this.target&&!o.handlers.length&&(this.target.removeEventListener(e,o.listener,s),"object"==typeof s&&s.debounce&&(null===(r=o.listener)||void 0===r||r.cancel()),delete this.listeners[n]))}}const r=new SingleListeners("undefined"!=typeof window?window:null);new SingleListeners("undefined"!=typeof window?window.document:null)},52463:(e,a,s)=>{"use strict";s.d(a,{P:()=>r});var i=s(49491);function r(e,a,s,r){history.pushState(e,a,s);const n=new CustomEvent("eventedpushstate",i({detail:{state:e,title:a,url:s}},r));document.dispatchEvent(n)}},70275:(e,a,s)=>{"use strict";function i(){let e=document.domain||"";const a=e.split("."),s=a.length;return s>2&&(e="".concat(a[s-2],".").concat(a[s-1]),2===a[s-2].length&&2===a[s-1].length&&(e="".concat(a[s-3],".").concat(e))),e}s.d(a,{X:()=>i})},41365:(e,a,s)=>{"use strict";s.d(a,{v:()=>c,w:()=>d});var i=s(72124),r=s(22358),n=s(90212),o=s(49761);const l=Object.values(r.O);function c(){return Boolean((0,o.e)(n.L0))}function d(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const a=!e&&(0,o.e)(n.L0);if(a&&l.includes(a))return a;const s=(0,i.parse)(window.location.search),r=s.webview;return r&&l.includes(r)?r:void 0}},99332:(e,a,s)=>{"use strict";let i;function r(e,a){const s=e.scrollLeft;if("rtl"!==a)return s;switch(function(){if(i)return i;const e=document.createElement("div"),a=document.createElement("div");return a.style.width="10px",a.style.height="1px",e.appendChild(a),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),i="reverse",e.scrollLeft>0?i="default":(e.scrollLeft=1,0===e.scrollLeft&&(i="negative")),document.body.removeChild(e),i}()){case"negative":return e.scrollWidth-e.clientWidth+s;case"reverse":return e.scrollWidth-e.clientWidth-s;default:return s}}s.d(a,{T:()=>r})},32960:(e,a,s)=>{"use strict";function i(e){return new RegExp("([?#]".concat(e,"=[\\w-]+$)|(&").concat(e,"=[\\w-]+\\b)|(\\b").concat(e,"=[\\w-]+&)"),"i")}function r(e){const a=e.reduce(((e,a)=>e.replace(i(a),"")),location.search),s=e.reduce(((e,a)=>e.replace(i(a),"")),location.hash);history.replaceState(null,"","".concat(location.origin).concat(location.pathname).concat(a).concat(s))}s.d(a,{k:()=>r})},10592:(e,a,s)=>{"use strict";s.d(a,{OR:()=>c,XW:()=>d,hf:()=>l});var i=s(72124),r=s(54136);function n(){return"twa"===(0,i.parse)(location.search).app}function o(e){return Boolean(e)&&new RegExp("^android-app:\\/\\/.*?".concat(e)).test(document.referrer)}function l(e){(n()||o(e))&&sessionStorage.setItem(r.M,"1")}function c(e){return n()||o(e)||Boolean(sessionStorage.getItem(r.M))}function d(){const e=(0,i.parse)(location.search).appsflyer_id;e&&localStorage.setItem(r.C,e.toString())}},89215:(e,a,s)=>{"use strict";s.d(a,{F:()=>Collection});var i=s(49491),r=s(59312),n=s(27206),o=s(10008),l=s(81228),c=s(15150),d=s(60521);class Collection{constructor(e,a){this.models=(0,d.observable)([]),this.options=null,this.model=null,this.idsHash={},this.sortBy=(0,d.observable)([]);const s=[];n.Z.bind(this,this.models),this.options=a,e&&e.length&&e.forEach((e=>{this.models.push(Object.assign({},e)),s.push(Object.assign({},e))})),s.length&&this.onAdd(s),this.sort()}get count(){return this.models.length}sort(){const e=i({},this.options);e&&e.sort&&this.models.replace((0,o.Z)(this.models,e.sort,e.order)),this.updateHash()}getById(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.models.length>this.idsHash[e]?this.models[this.idsHash[e]]:void 0:this.models.length>this.idsHash[e]?(0,d.toJS)(this.models[this.idsHash[e]]):void 0}indexOf(e){return this.idsHash[e]}getFirst(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.get(e,a);return s&&Array.isArray(s)?s.length?s[0]:void 0:s}get(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"number"==typeof e||"string"==typeof e?this.getById(e,!0):(0,l.Z)(this.models,e):"number"==typeof e||"string"==typeof e?this.getById(e):(0,d.toJS)((0,l.Z)(this.models,e))}onRemove(e){return e}onAdd(e){return e}onUpdate(e){return e}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.models.replace([...e]),this.sort()}update(e,a){const s=[],i=[],r=[],n={};if(e&&Array.isArray(e))e.forEach((e=>{if(!e||!e.id)return;const s=this.getById(e.id,!0);n[e.id]=1,s?!a||void 0!==!a.merge&&!0!==a.merge||(Object.assign(s,e),r.push(s)):a&&void 0!==a.add&&!a.add||(this.models.push(this.model?Object.assign({},this.model,e):e),i.push(Object.assign({},e)),this.sort())})),i.length&&this.onAdd(i),r.length&&this.onUpdate(r),a&&void 0!==a.remove&&!a.remove||this.models.forEach((e=>{if(!n[e.id]){this.models.remove(e)&&s.push(e)}})),s&&s.length&&(this.updateHash(),this.onRemove((0,d.toJS)(s)));else if(a&&a.remove){const e=(0,d.toJS)(this.models);this.reset(),this.onRemove(e)}}removeAll(){this.models.length&&(this.models.clear(),this.updateHash())}removeModel(e){const a=this.getById(e,!0);let s;return a&&(s=this.models.remove(a)),{removedModel:a,isRemoved:s}}remove(e){const a=[];if(Array.isArray(e))e.forEach((e=>{const s=this.removeModel(e.id);s.isRemoved&&(this.updateHash(),s.removedModel&&a.push(s.removedModel))}));else{const s=this.removeModel(e);s.isRemoved&&(this.updateHash(),s.removedModel&&a.push(s.removedModel))}a&&a.length>0&&this.onRemove((0,d.toJS)(a))}updateHash(){this.idsHash={},this.models.length&&(this.sortBy.length||"function"==typeof this.sortBy)&&this.models.replace((0,c.Z)(this.models,this.sortBy)),this.models.length&&void 0!==this.models[0].id&&this.models.forEach(((e,a)=>{this.idsHash[e.id]=a}))}}(0,r.gn)([d.observable],Collection.prototype,"models",void 0),(0,r.gn)([d.computed],Collection.prototype,"count",null),(0,r.gn)([d.action],Collection.prototype,"reset",null),(0,r.gn)([d.action],Collection.prototype,"update",null),(0,r.gn)([d.action],Collection.prototype,"removeAll",null),(0,r.gn)([d.action],Collection.prototype,"remove",null)},10002:(e,a,s)=>{"use strict";s.d(a,{C:()=>SingleSelectedCollection});var i=s(59312),r=s(31609),n=s(14090),o=s(60521),l=s(89215);class SingleSelectedCollection extends l.F{constructor(e,a){super(e,a);const s=this.models.find((e=>Boolean(e.selected)));s&&(this.selected=s)}onRemove(e){e.some((e=>{if(this.selected&&e.id===this.selected.id){const e=this.models[this.models.length-1];"object"==typeof e?(e.selected=!0,this.selected=e):this.selected=void 0}return!0}))}update(e,a){let s;const i=[],l=[],c={};e&&!Array.isArray(e)&&(e=[e]),null==e||e.forEach((e=>{if((0,r.Z)(e))return;const s=this.getById(e.id,!0);if(c[e.id]=1,s)this.selected&&this.selected.id===e.id&&(e.selected=!0),Object.assign(s,e),l.push(s);else if(!a||void 0===a.add||a.add){if(!a||void 0===a.select||a.select?e.selected=!0:e.selected=!1,this.models.push(this.model?Object.assign({},this.model,e):e),e.selected){this.selected=this.models.find((a=>a.id===e.id));const a=this.models.find((e=>Boolean(e.selected)));a&&this.selected&&a.id!==this.selected.id&&(a.selected=!1)}i.push(Object.assign({},e))}})),i.length&&(this.sort(),this.onAdd(i)),l.length&&this.onUpdate(l),a&&void 0!==a.remove&&!a.remove||(s=(0,n.Z)(this.models,(e=>!c[e.id]))),s&&s.length&&(this.updateHash(),this.onRemove((0,o.toJS)(s)))}select(e){const a="object"!=typeof e?e:e.id,s=this.models.find((e=>e.id===a)),i=this.selected||this.models.find((e=>Boolean(e.selected)));return s&&(i&&(i.selected=!1),s.selected=!0,this.selected=s),s}unSelect(){const e=this.selected||this.models.find((e=>Boolean(e.selected)));e&&(e.selected=!1),this.selected=void 0}}(0,i.gn)([o.observable],SingleSelectedCollection.prototype,"selected",void 0),(0,i.gn)([o.action],SingleSelectedCollection.prototype,"update",null),(0,i.gn)([o.action],SingleSelectedCollection.prototype,"select",null),(0,i.gn)([o.action],SingleSelectedCollection.prototype,"unSelect",null)},53601:(e,a,s)=>{"use strict";function i(e){return Math.floor(e/1e3)}s.d(a,{z:()=>i})},10028:(e,a,s)=>{"use strict";function i(e){return{day:e.getDate(),month:e.getMonth(),year:e.getFullYear()}}s.d(a,{i:()=>i})},95472:(e,a,s)=>{"use strict";s.d(a,{L:()=>r});var i=s(46548);function r(e,a){const s=(0,i.R)(e),r=s.d,n=s.h,o=s.m,l=s.s;return(r?"".concat(r," ").concat(a.d):"")+(n?" ".concat(n," ").concat(a.h):"")+(o?" ".concat(o," ").concat(a.m):"")+(l?" ".concat(l," ").concat(a.s):"")}},7033:(e,a,s)=>{"use strict";function i(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return Math.floor(a.getTime()/1e3)-e}s.d(a,{l:()=>i})},46548:(e,a,s)=>{"use strict";function i(e){const a=Math.floor(e/86400),s=86400*a,i=Math.floor((e-s)/3600),r=s+3600*i,n=Math.floor((e-r)/60);return{d:a,h:i,m:n,s:Math.floor(e-r-60*n)}}s.d(a,{R:()=>i})},49761:(e,a,s)=>{"use strict";function i(e){const a=" ".concat("undefined"!=typeof document?document.cookie:""),s=" ".concat(e,"=");let i=null,r=0,n=0;if(a.length>0&&(r=a.indexOf(s),-1!==r)){r+=s.length,n=a.indexOf(";",r),-1===n&&(n=a.length),i=decodeURIComponent(a.substring(r,n));try{i=JSON.parse(i)}catch(e){return i}}return i}s.d(a,{e:()=>i})},57855:(e,a,s)=>{"use strict";s.d(a,{LS:()=>r,Ve:()=>l,XV:()=>o,hO:()=>d,m0:()=>c,rV:()=>n});const i={};function r(e,a,s,r){try{const n="".concat(e,"_").concat(a);r&&(i[n]=r);const o="string"!=typeof s?JSON.stringify(s):s;localStorage.setItem(n,o)}catch(e){console.error(e)}}function n(e,a,s){let r;try{const n="".concat(e,"_").concat(a),o=localStorage.getItem(n),l=s||i[n];void 0!==o&&(r="function"==typeof l?l(o):o)}catch(e){console.error(e)}return r}function o(e,a,s){r("*",e,a,s)}function l(e,a){return n("*",e,a)}function c(e){return function(e,a){try{const s="".concat(e,"_").concat(a);localStorage.removeItem(s)}catch(e){console.error(e)}}("*",e)}function d(e){if(e)try{return JSON.parse(e)}catch(e){}return null}},34133:(e,a,s)=>{"use strict";function i(e){return["ar_AE","ur_PK","fa_IR"].includes(e)}s.d(a,{N:()=>i})},81681:(e,a,s)=>{"use strict";function i(e){return e.split("_")[0]}s.d(a,{t:()=>i})},49393:(e,a,s)=>{"use strict";function i(e,a){return Math.floor(Math.random()*(a-e+1))+e}s.d(a,{s:()=>i})},19773:(e,a,s)=>{"use strict";s.d(a,{S:()=>r,n:()=>i});const i=["height","marginTop","marginBottom"],r=["width","marginLeft","marginRight"]},16890:(e,a,s)=>{"use strict";s.d(a,{A7:()=>d,Pb:()=>c,iO:()=>l,wc:()=>n});var i=s(19773);const r=(e,a)=>parseInt(((e,a)=>window.getComputedStyle(e)[a])(e,a)),n=e=>r(e,"height"),o=(e,a)=>a.reduce(((a,s)=>a+r(e,s)),0),l=e=>o(e,i.S),c=e=>o(e,i.n),d=e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}},98484:(e,a,s)=>{"use strict";s.d(a,{Y:()=>r});var i=s(474);function r(e){return i.Ds[e]||i.Ds.usd}},27778:(e,a,s)=>{"use strict";function i(){window.gaStats||(window.gaStats={}),window.gaStats.gaFxDealStart=performance.now()}s.d(a,{U:()=>i})},68472:(e,a,s)=>{"use strict";s.d(a,{x:()=>r});var i=s(23735);function r(e){const a=window.gaStats;a&&a.gaPlatformStart&&((0,i.L)({event:"chart_data_recived",eventCategory:"chart_data_recived",eventAction:"chart_data_recived",eventLabel:"chart_data_recived",project_name:"".concat(e),chart_response_time:Math.round(performance.now()-a.gaPlatformStart).toString()}),delete a.gaPlatformStart)}},23735:(e,a,s)=>{"use strict";function i(e){window.dataLayer||(window.dataLayer=[]),e&&window.dataLayer.push(e)}s.d(a,{L:()=>i})},46315:(e,a,s)=>{"use strict";function i(e,a){let s,i,r,n;const o=(e||"bitcoin").toLowerCase();return a.forEach((e=>{const a=e.id.toLowerCase();a!==o||e.locked||(s=e.id),"bitcoin"!==a||e.locked||(r=e.id),e.locked||(n=e.id),a===o&&(i=e.id)})),s||(r||(n||(i||e)))}s.d(a,{n:()=>i})},6228:(e,a,s)=>{"use strict";s.d(a,{B:()=>n});var i=s(46525),r=s(10028);function n(e){return(0,i.Z)(e,(e=>{let a=e.groupDate;const s=(0,r.i)(a),i=s.day,n=s.month,o=s.year;return"".concat(i,"_").concat(n,"_").concat(o)}))}},66313:(e,a,s)=>{"use strict";s.d(a,{y:()=>r});const i=["stage307","devbox307","fry307"];function r(e){return"development"!==e&&"test"!==e&&!Boolean(i.find((e=>window.location.host.includes(e))))}},46469:(e,a,s)=>{"use strict";s.d(a,{W:()=>n});var i=s(7033);function r(e,a){const s=(a||new Date).getTime();return new Promise((r=>{e.request({type:"request",event_name:"servertime:up",data_type:"servertime"}).onResponse(((e,n,o)=>{const l=(a||new Date).getTime();r({delta:Math.abs(s-l),timestamp:o.timestamp,timeDelta:(0,i.l)(o.timestamp,a||new Date)})}))}))}function n(e,a,s,i){const n=[];for(let s=0,o=e;s<o;s++)n.push(r(a,i));Promise.all(n).then((e=>{const a=e.reduce(((e,a)=>((void 0===a.delta||"number"==typeof e.delta&&"number"==typeof a.delta&&e.delta<a.delta)&&(a=Object.assign({},e)),a)),{delta:void 0,timestamp:void 0,timeDelta:void 0});a&&"number"==typeof a.timeDelta&&s(a.timeDelta)})).catch((()=>{}))}},45642:(e,a,s)=>{"use strict";s.d(a,{O:()=>d,j:()=>o});var i=s(72155),r=s(87988);let n;function o(e,a){if(!n){const s={asseturi:"".concat(e,"/assets1/ec/"),phpuri:"/p/ec",swfFileName:"/evercookie.swf",xapFileName:"/evercookie.xap",jnlpFileName:"/evercookie.jnlp",pngCookieName:"ecp",pngPath:"/p",etagCookieName:"ece",etagPath:"/e",cacheCookieName:"ecc",cachePath:"/c",history:!1,onServerError:a};n=new r.Z(s)}}const l="uhdwidv2";function c(e){return"string"==typeof e&&e.length>0&&e.length<255&&e.startsWith("hi_")}function d(){const e=n.evercookie_local_storage(l);return c(e)?Promise.resolve(e):new Promise((e=>{n.get(l,(a=>{if(c(a))e(a);else{const a="".concat("hi_").concat((0,i.x0)(32));n.set(l,a),e(a)}}))}))}},23305:(e,a,s)=>{"use strict";s(18198)},14313:(e,a,s)=>{"use strict";s.d(a,{Od:()=>i.O,jH:()=>i.j});s(23305);var i=s(45642)},87988:(e,a,s)=>{"use strict";s.d(a,{Z:()=>n});var i=s(19469);let r;try{r=function(e){var a,s,r=e.document,n=e.Image,o=e.globalStorage;try{var l=e.localStorage}catch(e){}try{var c=e.sessionStorage}catch(e){}function d(e){var a=[],s=0,i=!1;function n(e,n,o){var l=r.createElement("img");return l.src=n+"#"+parseInt(32e3*Math.random()),l.onload=function(){a[e]=!0,(s-=1)<=0&&(i=!1,o(a))},l.onerror=function(){a[e]=!1,(s-=1)<=0&&(i=!1,o(a))},l}function o(e,a){return e.toString().length<a?o("0"+e,a):e}function l(e){for(var a=0,s=e.length,i=0;i<s;++i)a=(a<<1)+(e[i]?1:0);return a}function c(e,a){var s=[],i=parseInt(e,10).toString(2);i=o(i,32);for(var r=32-a;r<32;++r)s.push("1"==i[r]);return s}return{bools_to_int:l,is_working:function(){return i},get_hsts_value:function(r){if(i)return!1;i=!0,a=[],s=e.length;for(var o=0;o<e.length;++o){a.push(void 0);n(o,e[o],r)}return!0},set_hsts_value:function(r,o){if(i)return!1;i=!0,a=[],s=e.length;for(var l=0;l<e.length;++l)a.push(void 0),r[l]?n(l,e[l]+"?SET=1",o):n(l,e[l]+"?DEL=1",o);return!0},set_hsts_as_int:function(a,s){a=c(a,e.length);return this.set_hsts_value(a,s)},get_hsts_as_int:function(e){return this.get_hsts_value((function(a){e(l(a))}))}}}var u={history:!0,java:!0,tests:10,silverlight:!0,lso:!0,domain:"."+e.location.host.replace(/:\d+/,""),baseurl:"",asseturi:"/assets",phpuri:"/php",authPath:!1,swfFileName:"/evercookie.swf",xapFileName:"/evercookie.xap",jnlpFileName:"/evercookie.jnlp",pngCookieName:"evercookie_png",pngPath:"/evercookie_png.php",etagCookieName:"evercookie_etag",etagPath:"/evercookie_etag.php",cacheCookieName:"evercookie_cache",cachePath:"/evercookie_cache.php",hsts:!1,hsts_domains:[],db:!0,idb:!0,onServerError(){}},m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return e._evercookie_flash_var=function(e){a=e;var s=r.getElementById("myswf");s&&s.parentNode&&s.parentNode.removeChild(s)},function(p){p=p||{};var h={};for(var v in u){var g=p[v];h[v]=void 0!==g?g:u[v]}"function"==typeof h.domain&&(h.domain=h.domain(e));var _=h.history,f=h.java,E=h.tests,S=h.baseurl,y=h.asseturi,b=h.phpuri,C=h.domain,T=h.swfFileName,A=h.xapFileName,k=h.jnlpFileName,w=h.hsts,N=this;this._ec={},this._options=h,w&&(h.hsts_domains.length<=8&&(h.hsts_domains.length,Math.pow(2,h.hsts_domains.length)),this.hsts_cookie=d(h.hsts_domains)),this.get=function(e,a,s){N._evercookie(e,a,void 0,void 0,s)},this.set=function(e,a){N._evercookie(e,(function(){}),a)},this._evercookie=function(i,n,o,l,c){if(void 0===N._evercookie&&(N=this),void 0===l&&(l=0),0===l&&(h.db&&N.evercookie_database_storage(i,o),h.idb&&N.evercookie_indexdb_storage(i,o),h.pngCookieName&&N.evercookie_png(i,o),h.etagCookieName&&N.evercookie_etag(i,o),h.cacheCookieName&&N.evercookie_cache(i,o),h.lso&&N.evercookie_lso(i,o),h.silverlight&&N.evercookie_silverlight(i,o),h.authPath&&N.evercookie_auth(i,o),h.java&&f&&N.evercookie_java(i,o),N._ec.userData=N.evercookie_userdata(i,o),N._ec.cookieData=N.evercookie_cookie(i,o),N._ec.localData=N.evercookie_local_storage(i,o),N._ec.globalData=N.evercookie_global_storage(i,o),N._ec.sessionData=N.evercookie_session_storage(i,o),N._ec.windowData=N.evercookie_window(i,o),_&&(N._ec.historyData=N.evercookie_history(i,o)),w&&(N._ec.hstsData=void 0,void 0===o?N.hsts_cookie.get_hsts_as_int((function(e){N._ec.hstsData=e})):N.hsts_cookie.set_hsts_as_int(o,(function(e){N._ec.hstsData=N.hsts_cookie.bools_to_int(e)})))),void 0!==o)(void 0===a||void 0===s||void 0===N._ec.hstsData||N.hsts_cookie.is_working())&&l++<E&&setTimeout((function(){N._evercookie(i,n,o,l,c)}),300);else if((h.db&&e.openDatabase&&void 0===N._ec.dbData||h.idb&&("indexedDB"in e||(e.indexedDB=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB))&&(void 0===N._ec.idbData||""===N._ec.idbData)||h.lso&&void 0===a||h.etagCookieName&&void 0===N._ec.etagData||h.cacheCookieName&&void 0===N._ec.cacheData||h.java&&void 0===N._ec.javaData||h.hsts&&(void 0===N._ec.hstsData||N.hsts_cookie.is_working())||h.pngCookieName&&r.createElement("canvas").getContext&&(void 0===N._ec.pngData||""===N._ec.pngData)||h.silverlight&&void 0===s)&&l++<E)setTimeout((function(){N._evercookie(i,n,o,l,c)}),300);else{N._ec.lsoData=N.getFromStr(i,a),a=void 0,N._ec.slData=N.getFromStr(i,s),s=void 0;var d,u,m=N._ec,p=[],v=0;for(u in N._ec={},m)m[u]&&"null"!==m[u]&&"undefined"!==m[u]&&(p[m[u]]=void 0===p[m[u]]?1:p[m[u]]+1);for(u in p)p[u]>v&&(v=p[u],d=u);this.working=!1,void 0===d||void 0!==c&&1===c||N.set(i,d),"function"==typeof n&&n(d,m)}},this.evercookie_window=function(a,s){try{if(void 0===s)return this.getFromStr(a,e.name);e.name=function(e,a,s){if(e.indexOf("&"+a+"=")>-1||0===e.indexOf(a+"=")){var i,r=e.indexOf("&"+a+"=");return-1===r&&(r=e.indexOf(a+"=")),-1!==(i=e.indexOf("&",r+1))?e.substr(0,r)+e.substr(i+(r?0:1))+"&"+a+"="+s:e.substr(0,r)+"&"+a+"="+s}return e+"&"+a+"="+s}(e.name,a,s)}catch(e){}},this.evercookie_userdata=function(e,a){try{var s=this.createElem("div","userdata_el",1);if(s.addBehavior){if(s.style.behavior="url(#default#userData)",void 0===a)return s.load(e),s.getAttribute(e);s.setAttribute(e,a),s.save(e)}}catch(e){}},this.ajax=function(e){var a,s,i,r,n,o;for(a={"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},n=0,o=(i=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}]).length;n<o;n++){r=i[n];try{r=r();break}catch(e){}}for(s in r.onreadystatechange=function(){4===r.readyState&&(200===r.status||304===r.status?e.success(r.responseText):e.error("".concat(r.status," ").concat(r.statusText),r.responseText))},r.open("get",e.url,!0),a)r.setRequestHeader(s,a[s]);r.send()},this.evercookie_cache=function(e,a){if(void 0!==a)r.cookie=h.cacheCookieName+"="+a+"; path=/; domain="+C,N.ajax({url:S+b+h.cachePath+"?name="+e+"&cookie="+h.cacheCookieName,success:function(e){},error:function(e){}});else{var s=this.getFromStr(h.cacheCookieName,r.cookie);N._ec.cacheData=void 0,r.cookie=h.cacheCookieName+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/; domain="+C,N.ajax({url:S+b+h.cachePath+"?name="+e+"&cookie="+h.cacheCookieName,success:function(e){r.cookie=h.cacheCookieName+"="+s+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain="+C,N._ec.cacheData=e},error:function(e,a){h.onServerError({type:"unknown",message:a,meta:"[ec][cache] ".concat(e)})}})}},this.evercookie_auth=function(e,a){var s,i;void 0!==a?(s="//"+a+"@"+location.host+S+b+h.authPath+"?name="+e,(i=new n).style.visibility="hidden",i.style.position="absolute",i.src=s):N.ajax({url:S+b+h.authPath+"?name="+e,success:function(e){N._ec.authData=e},error:function(e,a){h.onServerError({type:"unknown",message:a,meta:"[ec][auth] ".concat(e)})}})},this.evercookie_etag=function(e,a){if(void 0!==a)r.cookie=h.etagCookieName+"="+a+"; path=/; domain="+C,N.ajax({url:S+b+h.etagPath+"?name="+e+"&cookie="+h.etagCookieName,success:function(e){},error:function(e){}});else{var s=this.getFromStr(h.etagCookieName,r.cookie);N._ec.etagData=void 0,r.cookie=h.etagCookieName+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/; domain="+C,N.ajax({url:S+b+h.etagPath+"?name="+e+"&cookie="+h.etagCookieName,success:function(e){r.cookie=h.etagCookieName+"="+s+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain="+C,N._ec.etagData=e},error:function(e,a){h.onServerError({type:"unknown",message:a,meta:"[ec][etag] ".concat(e)})}})}},this.evercookie_java=function(e,a){var s=r.getElementById("ecAppletContainer");function i(s){var i=r.getElementById(s);void 0!==a?i.set(e,a):N._ec.javaData=i.get(e)}"undefined"!=typeof dtjava&&(null!=s&&s.length||((s=r.createElement("div")).setAttribute("id","ecAppletContainer"),s.style.position="absolute",s.style.top="-3000px",s.style.left="-3000px",s.style.width="1px",s.style.height="1px",r.body.appendChild(s)),"undefined"==typeof ecApplet?dtjava.embed({id:"ecApplet",url:S+y+k,width:"1px",height:"1px",placeholder:"ecAppletContainer"},{},{onJavascriptReady:i}):i("ecApplet"))},this.evercookie_lso=function(e,a){var s=r.getElementById("swfcontainer"),n={},o={},l={};null!=s&&s.length||((s=r.createElement("div")).setAttribute("id","swfcontainer"),r.body.appendChild(s)),void 0!==a&&(n.everdata=e+"="+a),o.swliveconnect="true",l.id="myswf",l.name="myswf",i.o.embedSWF(S+y+T,"swfcontainer","1","1","9.0.0",!1,n,o,l)},this.evercookie_png=function(e,a){var s,i,o,l=r.createElement("canvas");l.style.visibility="hidden",l.style.position="absolute",l.width=200,l.height=1,l&&l.getContext&&((s=new n).style.visibility="hidden",s.style.position="absolute",void 0!==a?r.cookie=h.pngCookieName+"="+a+"; path=/; domain="+C:(N._ec.pngData=void 0,i=l.getContext("2d"),o=this.getFromStr(h.pngCookieName,r.cookie),r.cookie=h.pngCookieName+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/; domain="+C,s.onload=function(){r.cookie=h.pngCookieName+"="+o+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain="+C,N._ec.pngData="",i.drawImage(s,0,0);var e,a,n=i.getImageData(0,0,200,1).data;for(e=0,a=n.length;e<a&&0!==n[e]&&(N._ec.pngData+=String.fromCharCode(n[e]),0!==n[e+1])&&(N._ec.pngData+=String.fromCharCode(n[e+1]),0!==n[e+2]);e+=4)N._ec.pngData+=String.fromCharCode(n[e+2])}),s.src=S+b+h.pngPath+"?name="+e+"&cookie="+h.pngCookieName,s.crossOrigin="Anonymous")},this.evercookie_local_storage=function(e,a){try{if(l){if(void 0===a)return l.getItem(e);l.setItem(e,a)}}catch(e){}},this.evercookie_database_storage=function(a,s){try{if(e.openDatabase){var i=e.openDatabase("sqlite_evercookie","","evercookie",1048576);void 0!==s?i.transaction((function(e){e.executeSql("CREATE TABLE IF NOT EXISTS cache(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, value TEXT NOT NULL, UNIQUE (name))",[],(function(e,a){}),(function(e,a){})),e.executeSql("INSERT OR REPLACE INTO cache(name, value) VALUES(?, ?)",[a,s],(function(e,a){}),(function(e,a){}))})):i.transaction((function(e){e.executeSql("SELECT value FROM cache WHERE name=?",[a],(function(e,a){a.rows.length>=1?N._ec.dbData=a.rows.item(0).value:N._ec.dbData=""}),(function(e,a){}))}))}}catch(e){}},this.evercookie_indexdb_storage=function(a,s){try{if("indexedDB"in e||(indexedDB=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBTransaction=e.IDBTransaction||e.webkitIDBTransaction||e.msIDBTransaction,IDBKeyRange=e.IDBKeyRange||e.webkitIDBKeyRange||e.msIDBKeyRange),indexedDB){var i=indexedDB.open("idb_evercookie",1);i.onerror=function(e){},i.onupgradeneeded=function(e){e.target.result.createObjectStore("evercookie",{keyPath:"name",unique:!1})},i.onsuccess=void 0!==s?function(e){var i=e.target.result;if(i.objectStoreNames.contains("evercookie"))i.transaction(["evercookie"],"readwrite").objectStore("evercookie").put({name:a,value:s});i.close()}:function(e){var s=e.target.result;if(s.objectStoreNames.contains("evercookie")){var i=s.transaction(["evercookie"]).objectStore("evercookie").get(a);i.onsuccess=function(e){void 0===i.result?N._ec.idbData=void 0:N._ec.idbData=i.result.value}}else N._ec.idbData=void 0;s.close()}}}catch(e){}},this.evercookie_session_storage=function(e,a){try{if(c){if(void 0===a)return c.getItem(e);c.setItem(e,a)}}catch(e){}},this.evercookie_global_storage=function(e,a){if(o){var s=this.getHost();try{if(void 0===a)return o[s][e];o[s][e]=a}catch(e){}}},this.evercookie_silverlight=function(e,a){var s,i="4.0.50401.0",n="";void 0!==a&&(n='<param name="initParams" value="'+e+"="+a+'" />'),s='<object style="position:absolute;left:-500px;top:-500px" data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="mysilverlight" width="0" height="0">'+n+'<param name="source" value="'+(S+y+A)+'"/><param name="onLoad" value="onSilverlightLoad"/><param name="onError" value="onSilverlightError"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="minRuntimeVersion" value="'+i+'"/><param name="autoUpgrade" value="false"/><a href="http://go.microsoft.com/fwlink/?LinkID=149156&v='+i+'" style="display:none">Get Microsoft Silverlight</a></object>';try{"undefined"==typeof jQuery?r.body.appendChild(s):$("body").append(s)}catch(e){}},this.encode=function(e){var a,s,i,r,n,o,l,c="",d=0;for(e=this._utf8_encode(e);d<e.length;)r=(a=e.charCodeAt(d++))>>2,n=(3&a)<<4|(s=e.charCodeAt(d++))>>4,o=(15&s)<<2|(i=e.charCodeAt(d++))>>6,l=63&i,isNaN(s)?o=l=64:isNaN(i)&&(l=64),c=c+m.charAt(r)+m.charAt(n)+m.charAt(o)+m.charAt(l);return c},this.decode=function(e){var a,s,i,r,n,o,l="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)a=m.indexOf(e.charAt(c++))<<2|(r=m.indexOf(e.charAt(c++)))>>4,s=(15&r)<<4|(n=m.indexOf(e.charAt(c++)))>>2,i=(3&n)<<6|(o=m.indexOf(e.charAt(c++))),l+=String.fromCharCode(a),64!==n&&(l+=String.fromCharCode(s)),64!==o&&(l+=String.fromCharCode(i));return l=this._utf8_decode(l)},this._utf8_encode=function(e){for(var a,s="",i=0,r=(e=e.replace(/\r\n/g,"\n")).length;i<r;i++)(a=e.charCodeAt(i))<128?s+=String.fromCharCode(a):a>127&&a<2048?(s+=String.fromCharCode(a>>6|192),s+=String.fromCharCode(63&a|128)):(s+=String.fromCharCode(a>>12|224),s+=String.fromCharCode(a>>6&63|128),s+=String.fromCharCode(63&a|128));return s},this._utf8_decode=function(e){for(var a="",s=0,i=e.length,r=0,n=0,o=0;s<i;)(r=e.charCodeAt(s))<128?(a+=String.fromCharCode(r),s+=1):r>191&&r<224?(n=e.charCodeAt(s+1),a+=String.fromCharCode((31&r)<<6|63&n),s+=2):(n=e.charCodeAt(s+1),o=e.charCodeAt(s+2),a+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&o),s+=3);return a},this.evercookie_history=function(e,a){var s,i,r=(m+"-").split(""),n="https://www.google.com/evercookie/cache/"+this.getHost()+"/"+e,o="",l="",c=1;if(void 0!==a){if(this.hasVisited(n))return;for(this.createIframe(n,"if"),n+="/",i=this.encode(a).split(""),s=0;s<i.length;s++)n+=i[s],this.createIframe(n,"if"+s);n+="-",this.createIframe(n,"if_")}else if(this.hasVisited(n)){for(n+="/";"-"!==o&&1===c;)for(c=0,s=0;s<r.length;s++)if(this.hasVisited(n+r[s])){"-"!==(o=r[s])&&(l+=o),n+=o,c=1;break}return this.decode(l)}},this.createElem=function(e,a,s){var i;return(i=void 0!==a&&r.getElementById(a)?r.getElementById(a):r.createElement(e)).style.visibility="hidden",i.style.position="absolute",a&&i.setAttribute("id",a),s&&r.body.appendChild(i),i},this.createIframe=function(e,a){var s=this.createElem("iframe",a,1);return s.setAttribute("src",e),s};var R=this.waitForSwf=function(e){void 0===e?e=0:e++,e<E&&void 0===i.o&&setTimeout((function(){R(e)}),300)};this.evercookie_cookie=function(e,a){if(void 0===a)return this.getFromStr(e,r.cookie);r.cookie=e+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/; domain="+C,r.cookie=e+"="+a+"; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain="+C},this.getFromStr=function(e,a){if("string"==typeof a){var s,i,r=e+"=",n=a.split(/[;&]/);for(s=0;s<n.length;s++){for(i=n[s];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(r))return i.substring(r.length,i.length)}}},this.getHost=function(){return e.location.host.replace(/:\d+/,"")},this.toHex=function(e){for(var a,s="",i=e.length,r=0;r<i;){for(a=e.charCodeAt(r++).toString(16);a.length<2;)a="0"+a;s+=a}return s},this.fromHex=function(e){for(var a,s="",i=e.length;i>=0;)a=i-2,s=String.fromCharCode("0x"+e.substring(a,i))+s,i=a;return s},this.hasVisited=function(e){-1===this.no_color&&(-1===this._getRGB("http://samy-was-here-this-should-never-be-visited.com",-1)&&(this.no_color=this._getRGB("http://samy-was-here-"+Math.floor(9999999*Math.random())+"rand.com")));return 0===e.indexOf("https:")||0===e.indexOf("http:")?this._testURL(e,this.no_color):this._testURL("http://"+e,this.no_color)||this._testURL("https://"+e,this.no_color)||this._testURL("http://www."+e,this.no_color)||this._testURL("https://www."+e,this.no_color)};var I,D,O=this.createElem("a","_ec_rgb_link"),L="#_ec_rgb_link:visited{display:none;color:#FF0000}";try{I=1,(D=r.createElement("style")).styleSheet?D.styleSheet.innerHTML=L:D.innerHTML?D.innerHTML=L:D.appendChild(r.createTextNode(L))}catch(e){I=0}this._getRGB=function(e,a){if(a&&0===I)return-1;var s;if(O.href=e,O.innerHTML=e,r.body.appendChild(D),r.body.appendChild(O),r.defaultView){if(null==r.defaultView.getComputedStyle(O,null))return-1;s=r.defaultView.getComputedStyle(O,null).getPropertyValue("color")}else s=O.currentStyle.color;return s},this._testURL=function(e,a){var s=this._getRGB(e);return"rgb(255, 0, 0)"===s||"#ff0000"===s||a&&s!==a?1:0}}}(window)}catch(e){}var n=r},18198:(e,a,s)=>{"use strict";!function(){void 0===Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e=function(e,a){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]];var s=[0,0,0,0];return s[3]+=e[3]+a[3],s[2]+=s[3]>>>16,s[3]&=65535,s[2]+=e[2]+a[2],s[1]+=s[2]>>>16,s[2]&=65535,s[1]+=e[1]+a[1],s[0]+=s[1]>>>16,s[1]&=65535,s[0]+=e[0]+a[0],s[0]&=65535,[s[0]<<16|s[1],s[2]<<16|s[3]]},a=function(e,a){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]];var s=[0,0,0,0];return s[3]+=e[3]*a[3],s[2]+=s[3]>>>16,s[3]&=65535,s[2]+=e[2]*a[3],s[1]+=s[2]>>>16,s[2]&=65535,s[2]+=e[3]*a[2],s[1]+=s[2]>>>16,s[2]&=65535,s[1]+=e[1]*a[3],s[0]+=s[1]>>>16,s[1]&=65535,s[1]+=e[2]*a[2],s[0]+=s[1]>>>16,s[1]&=65535,s[1]+=e[3]*a[1],s[0]+=s[1]>>>16,s[1]&=65535,s[0]+=e[0]*a[3]+e[1]*a[2]+e[2]*a[1]+e[3]*a[0],s[0]&=65535,[s[0]<<16|s[1],s[2]<<16|s[3]]},s=function(e,a){return 32==(a%=64)?[e[1],e[0]]:a<32?[e[0]<<a|e[1]>>>32-a,e[1]<<a|e[0]>>>32-a]:(a-=32,[e[1]<<a|e[0]>>>32-a,e[0]<<a|e[1]>>>32-a])},i=function(e,a){return 0==(a%=64)?e:a<32?[e[0]<<a|e[1]>>>32-a,e[1]<<a]:[e[1]<<a-32,0]},r=function(e,a){return[e[0]^a[0],e[1]^a[1]]},n=function(e){return e=r(e,[0,e[0]>>>1]),e=a(e,[4283543511,3981806797]),e=r(e,[0,e[0]>>>1]),e=a(e,[3301882366,444984403]),r(e,[0,e[0]>>>1])},o=function(o,l){l=l||0;for(var c=(o=o||"").length%16,d=o.length-c,u=[0,l],m=[0,l],p=[0,0],h=[0,0],v=[2277735313,289559509],g=[1291169091,658871167],_=0;_<d;_+=16)p=[255&o.charCodeAt(_+4)|(255&o.charCodeAt(_+5))<<8|(255&o.charCodeAt(_+6))<<16|(255&o.charCodeAt(_+7))<<24,255&o.charCodeAt(_)|(255&o.charCodeAt(_+1))<<8|(255&o.charCodeAt(_+2))<<16|(255&o.charCodeAt(_+3))<<24],h=[255&o.charCodeAt(_+12)|(255&o.charCodeAt(_+13))<<8|(255&o.charCodeAt(_+14))<<16|(255&o.charCodeAt(_+15))<<24,255&o.charCodeAt(_+8)|(255&o.charCodeAt(_+9))<<8|(255&o.charCodeAt(_+10))<<16|(255&o.charCodeAt(_+11))<<24],p=a(p,v),p=s(p,31),p=a(p,g),u=r(u,p),u=s(u,27),u=e(u,m),u=e(a(u,[0,5]),[0,1390208809]),h=a(h,g),h=s(h,33),h=a(h,v),m=r(m,h),m=s(m,31),m=e(m,u),m=e(a(m,[0,5]),[0,944331445]);switch(p=[0,0],h=[0,0],c){case 15:h=r(h,i([0,o.charCodeAt(_+14)],48));case 14:h=r(h,i([0,o.charCodeAt(_+13)],40));case 13:h=r(h,i([0,o.charCodeAt(_+12)],32));case 12:h=r(h,i([0,o.charCodeAt(_+11)],24));case 11:h=r(h,i([0,o.charCodeAt(_+10)],16));case 10:h=r(h,i([0,o.charCodeAt(_+9)],8));case 9:h=r(h,[0,o.charCodeAt(_+8)]),h=a(h,g),h=s(h,33),h=a(h,v),m=r(m,h);case 8:p=r(p,i([0,o.charCodeAt(_+7)],56));case 7:p=r(p,i([0,o.charCodeAt(_+6)],48));case 6:p=r(p,i([0,o.charCodeAt(_+5)],40));case 5:p=r(p,i([0,o.charCodeAt(_+4)],32));case 4:p=r(p,i([0,o.charCodeAt(_+3)],24));case 3:p=r(p,i([0,o.charCodeAt(_+2)],16));case 2:p=r(p,i([0,o.charCodeAt(_+1)],8));case 1:p=r(p,[0,o.charCodeAt(_)]),p=a(p,v),p=s(p,31),p=a(p,g),u=r(u,p)}return u=r(u,[0,o.length]),m=r(m,[0,o.length]),u=e(u,m),m=e(m,u),u=n(u),m=n(m),u=e(u,m),m=e(m,u),("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)+("00000000"+(m[0]>>>0).toString(16)).slice(-8)+("00000000"+(m[1]>>>0).toString(16)).slice(-8)},l={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fp",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},c=function(e,a){if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(a);else if(e.length===+e.length)for(var s=0,i=e.length;s<i;s++)a(e[s],s,e);else for(var r in e)e.hasOwnProperty(r)&&a(e[r],r,e)},d=function(e,a){var s=[];return null==e?s:Array.prototype.map&&e.map===Array.prototype.map?e.map(a):(c(e,(function(e,i,r){s.push(a(e,i,r))})),s)},u=function(e){if(null==navigator.plugins)return e.NOT_AVAILABLE;for(var a=[],s=0,i=navigator.plugins.length;s<i;s++)navigator.plugins[s]&&a.push(navigator.plugins[s]);return m(e)&&(a=a.sort((function(e,a){return e.name>a.name?1:e.name<a.name?-1:0}))),d(a,(function(e){var a=d(e,(function(e){return[e.type,e.suffixes]}));return[e.name,e.description,a]}))},m=function(e){for(var a=!1,s=0,i=e.plugins.sortPluginsFor.length;s<i;s++){var r=e.plugins.sortPluginsFor[s];if(navigator.userAgent.match(r)){a=!0;break}}return a},p=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},h=function(){if(!p())return!1;var e=v(),a=!!window.WebGLRenderingContext&&!!e;return g(e),a},v=function(){var e=document.createElement("canvas"),a=null;try{a=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return a||null},g=function(e){var a=e.getExtension("WEBGL_lose_context");null!=a&&a.loseContext()},_=[{key:"userAgent",getData:function(e){e(navigator.userAgent)}},{key:"webdriver",getData:function(e,a){e(null==navigator.webdriver?a.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(e,a){e(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||a.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(e,a){e(window.screen.colorDepth||a.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(e,a){e(navigator.deviceMemory||a.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(e,a){e(window.devicePixelRatio||a.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(e,a){e(function(e){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:e.NOT_AVAILABLE}(a))}},{key:"screenResolution",getData:function(e,a){e(function(e){var a=[window.screen.width,window.screen.height];return e.screen.detectScreenOrientation&&a.sort().reverse(),a}(a))}},{key:"availableScreenResolution",getData:function(e,a){e(function(e){if(window.screen.availWidth&&window.screen.availHeight){var a=[window.screen.availHeight,window.screen.availWidth];return e.screen.detectScreenOrientation&&a.sort().reverse(),a}return e.NOT_AVAILABLE}(a))}},{key:"timezoneOffset",getData:function(e){e((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(e,a){window.Intl&&window.Intl.DateTimeFormat?e((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):e(a.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(e,a){e(function(e){try{return!!window.sessionStorage}catch(a){return e.ERROR}}(a))}},{key:"localStorage",getData:function(e,a){e(function(e){try{return!!window.localStorage}catch(a){return e.ERROR}}(a))}},{key:"indexedDb",getData:function(e,a){e(function(e){try{return!!window.indexedDB}catch(a){return e.ERROR}}(a))}},{key:"addBehavior",getData:function(e){e(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(e){e(!!window.openDatabase)}},{key:"cpuClass",getData:function(e,a){e(function(e){return navigator.cpuClass||e.NOT_AVAILABLE}(a))}},{key:"platform",getData:function(e,a){e(function(e){return navigator.platform?navigator.platform:e.NOT_AVAILABLE}(a))}},{key:"doNotTrack",getData:function(e,a){e(function(e){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:e.NOT_AVAILABLE}(a))}},{key:"plugins",getData:function(e,a){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?a.plugins.excludeIE?e(a.EXCLUDED):e(function(e){var a=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?a=d(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],(function(a){try{return new window.ActiveXObject(a),a}catch(a){return e.ERROR}})):a.push(e.NOT_AVAILABLE),navigator.plugins&&(a=a.concat(u(e))),a}(a)):e(u(a))}},{key:"canvas",getData:function(e,a){p()?e(function(e){var a=[],s=document.createElement("canvas");s.width=2e3,s.height=200,s.style.display="inline";var i=s.getContext("2d");return i.rect(0,0,10,10),i.rect(2,2,6,6),a.push("canvas winding:"+(!1===i.isPointInPath(5,5,"evenodd")?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",e.dontUseFakeFontInCanvas?i.font="11pt Arial":i.font="11pt no-real-font-123",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),i.fillStyle="rgba(102, 204, 0, 0.2)",i.font="18pt Arial",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),s.toDataURL&&a.push("canvas fp:"+s.toDataURL()),a}(a)):e(a.NOT_AVAILABLE)}},{key:"webgl",getData:function(e,a){h()?e(function(){var e=function(e){return a.clearColor(0,0,0,1),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"},a=v();if(!a)return null;var s=[],i=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,i);var r=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);a.bufferData(a.ARRAY_BUFFER,r,a.STATIC_DRAW),i.itemSize=3,i.numItems=3;var n=a.createProgram(),o=a.createShader(a.VERTEX_SHADER);a.shaderSource(o,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),a.compileShader(o);var l=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(l,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),a.compileShader(l),a.attachShader(n,o),a.attachShader(n,l),a.linkProgram(n),a.useProgram(n),n.vertexPosAttrib=a.getAttribLocation(n,"attrVertex"),n.offsetUniform=a.getUniformLocation(n,"uniformOffset"),a.enableVertexAttribArray(n.vertexPosArray),a.vertexAttribPointer(n.vertexPosAttrib,i.itemSize,a.FLOAT,!1,0,0),a.uniform2f(n.offsetUniform,1,1),a.drawArrays(a.TRIANGLE_STRIP,0,i.numItems);try{s.push(a.canvas.toDataURL())}catch(e){}s.push("extensions:"+(a.getSupportedExtensions()||[]).join(";")),s.push("webgl aliased line width range:"+e(a.getParameter(a.ALIASED_LINE_WIDTH_RANGE))),s.push("webgl aliased point size range:"+e(a.getParameter(a.ALIASED_POINT_SIZE_RANGE))),s.push("webgl alpha bits:"+a.getParameter(a.ALPHA_BITS)),s.push("webgl antialiasing:"+(a.getContextAttributes().antialias?"yes":"no")),s.push("webgl blue bits:"+a.getParameter(a.BLUE_BITS)),s.push("webgl depth bits:"+a.getParameter(a.DEPTH_BITS)),s.push("webgl green bits:"+a.getParameter(a.GREEN_BITS)),s.push("webgl max anisotropy:"+function(e){var a=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");if(a){var s=e.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===s&&(s=2),s}return null}(a)),s.push("webgl max combined texture image units:"+a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),s.push("webgl max cube map texture size:"+a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE)),s.push("webgl max fragment uniform vectors:"+a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS)),s.push("webgl max render buffer size:"+a.getParameter(a.MAX_RENDERBUFFER_SIZE)),s.push("webgl max texture image units:"+a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),s.push("webgl max texture size:"+a.getParameter(a.MAX_TEXTURE_SIZE)),s.push("webgl max varying vectors:"+a.getParameter(a.MAX_VARYING_VECTORS)),s.push("webgl max vertex attribs:"+a.getParameter(a.MAX_VERTEX_ATTRIBS)),s.push("webgl max vertex texture image units:"+a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),s.push("webgl max vertex uniform vectors:"+a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS)),s.push("webgl max viewport dims:"+e(a.getParameter(a.MAX_VIEWPORT_DIMS))),s.push("webgl red bits:"+a.getParameter(a.RED_BITS)),s.push("webgl renderer:"+a.getParameter(a.RENDERER)),s.push("webgl shading language version:"+a.getParameter(a.SHADING_LANGUAGE_VERSION)),s.push("webgl stencil bits:"+a.getParameter(a.STENCIL_BITS)),s.push("webgl vendor:"+a.getParameter(a.VENDOR)),s.push("webgl version:"+a.getParameter(a.VERSION));try{var d=a.getExtension("WEBGL_debug_renderer_info");d&&(s.push("webgl unmasked vendor:"+a.getParameter(d.UNMASKED_VENDOR_WEBGL)),s.push("webgl unmasked renderer:"+a.getParameter(d.UNMASKED_RENDERER_WEBGL)))}catch(e){}return a.getShaderPrecisionFormat&&c(["FLOAT","INT"],(function(e){c(["VERTEX","FRAGMENT"],(function(i){c(["HIGH","MEDIUM","LOW"],(function(r){c(["precision","rangeMin","rangeMax"],(function(n){var o=a.getShaderPrecisionFormat(a[i+"_SHADER"],a[r+"_"+e])[n];"precision"!==n&&(n="precision "+n);var l=["webgl ",i.toLowerCase()," shader ",r.toLowerCase()," ",e.toLowerCase()," ",n,":",o].join("");s.push(l)}))}))}))})),g(a),s}()):e(a.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(e){h()?e(function(){try{var e=v(),a=e.getExtension("WEBGL_debug_renderer_info"),s=e.getParameter(a.UNMASKED_VENDOR_WEBGL)+"~"+e.getParameter(a.UNMASKED_RENDERER_WEBGL);return g(e),s}catch(e){return null}}()):e()}},{key:"adBlock",getData:function(e){e(function(){var e=document.createElement("div");e.innerHTML="&nbsp;";var a=!(e.className="adsbox");try{document.body.appendChild(e),a=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(e){a=!1}return a}())}},{key:"hasLiedLanguages",getData:function(e){e(function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1}())}},{key:"hasLiedResolution",getData:function(e){e(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(e){e(function(){var e=navigator.userAgent.toLowerCase(),a=navigator.oscpu,s=navigator.platform.toLowerCase(),i=0<=e.indexOf("windows phone")?"Windows Phone":0<=e.indexOf("windows")||0<=e.indexOf("win16")||0<=e.indexOf("win32")||0<=e.indexOf("win64")||0<=e.indexOf("win95")||0<=e.indexOf("win98")||0<=e.indexOf("winnt")||0<=e.indexOf("wow64")?"Windows":0<=e.indexOf("android")?"Android":0<=e.indexOf("linux")||0<=e.indexOf("cros")||0<=e.indexOf("x11")?"Linux":0<=e.indexOf("iphone")||0<=e.indexOf("ipad")||0<=e.indexOf("ipod")||0<=e.indexOf("crios")||0<=e.indexOf("fxios")?"iOS":0<=e.indexOf("macintosh")||0<=e.indexOf("mac_powerpc)")?"Mac":"Other";if(("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&"Windows"!==i&&"Windows Phone"!==i&&"Android"!==i&&"iOS"!==i&&"Other"!==i&&-1===e.indexOf("cros"))return!0;if(void 0!==a){if(0<=(a=a.toLowerCase()).indexOf("win")&&"Windows"!==i&&"Windows Phone"!==i)return!0;if(0<=a.indexOf("linux")&&"Linux"!==i&&"Android"!==i)return!0;if(0<=a.indexOf("mac")&&"Mac"!==i&&"iOS"!==i)return!0;if((-1===a.indexOf("win")&&-1===a.indexOf("linux")&&-1===a.indexOf("mac"))!=("Other"===i))return!0}return 0<=s.indexOf("win")&&"Windows"!==i&&"Windows Phone"!==i||(0<=s.indexOf("linux")||0<=s.indexOf("android")||0<=s.indexOf("pike"))&&"Linux"!==i&&"Android"!==i||(0<=s.indexOf("mac")||0<=s.indexOf("ipad")||0<=s.indexOf("ipod")||0<=s.indexOf("iphone"))&&"Mac"!==i&&"iOS"!==i||!(0<=s.indexOf("arm")&&"Windows Phone"===i)&&!(0<=s.indexOf("pike")&&0<=e.indexOf("opera mini"))&&((s.indexOf("win")<0&&s.indexOf("linux")<0&&s.indexOf("mac")<0&&s.indexOf("iphone")<0&&s.indexOf("ipad")<0&&s.indexOf("ipod")<0)!=("Other"===i)||void 0===navigator.plugins&&"Windows"!==i&&"Windows Phone"!==i)}())}},{key:"hasLiedBrowser",getData:function(e){e(function(){var e,a=navigator.userAgent.toLowerCase(),s=navigator.productSub;if(0<=a.indexOf("edge/")||0<=a.indexOf("iemobile/"))return!1;if(0<=a.indexOf("opera mini"))return!1;if(("Chrome"==(e=0<=a.indexOf("firefox/")?"Firefox":0<=a.indexOf("opera/")||0<=a.indexOf(" opr/")?"Opera":0<=a.indexOf("chrome/")?"Chrome":0<=a.indexOf("safari/")?0<=a.indexOf("android 1.")||0<=a.indexOf("android 2.")||0<=a.indexOf("android 3.")||0<=a.indexOf("android 4.")?"AOSP":"Safari":0<=a.indexOf("trident/")?"Internet Explorer":"Other")||"Safari"===e||"Opera"===e)&&"20030107"!==s)return!0;var i,r=eval.toString().length;if(37===r&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===r&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===r&&"Chrome"!==e&&"AOSP"!==e&&"Opera"!==e&&"Other"!==e)return!0;try{throw"a"}catch(e){try{e.toSource(),i=!0}catch(e){i=!1}}return i&&"Firefox"!==e&&"Other"!==e}())}},{key:"touchSupport",getData:function(e){e(function(){var e,a=0;void 0!==navigator.maxTouchPoints?a=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(a=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(a){e=!1}return[a,e,"ontouchstart"in window]}())}},{key:"fonts",getData:function(e,a){var s=["monospace","sans-serif","serif"],i=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];a.fonts.extendedJsFonts&&(i=i.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),i=(i=i.concat(a.fonts.userDefinedFonts)).filter((function(e,a){return i.indexOf(e)===a}));var r=document.getElementsByTagName("body")[0],n=document.createElement("div"),o=document.createElement("div"),l={},c={},d=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="72px",e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML="mmmmmmmmmmlli",e},u=function(){for(var e=[],a=0,i=s.length;a<i;a++){var r=d();r.style.fontFamily=s[a],n.appendChild(r),e.push(r)}return e}();r.appendChild(n);for(var m=0,p=s.length;m<p;m++)l[s[m]]=u[m].offsetWidth,c[s[m]]=u[m].offsetHeight;var h=function(){for(var e,a,r,n={},l=0,c=i.length;l<c;l++){for(var u=[],m=0,p=s.length;m<p;m++){var h=(e=i[l],a=s[m],r=void 0,(r=d()).style.fontFamily="'"+e+"',"+a,r);o.appendChild(h),u.push(h)}n[i[l]]=u}return n}();r.appendChild(o);for(var v=[],g=0,_=i.length;g<_;g++)!function(e){for(var a=!1,i=0;i<s.length;i++)if(a=e[i].offsetWidth!==l[s[i]]||e[i].offsetHeight!==c[s[i]])return a;return a}(h[i[g]])||v.push(i[g]);r.removeChild(o),r.removeChild(n),e(v)},pauseBefore:!0},{key:"fontsFlash",getData:function(e,a){return void 0!==window.swfobject?window.swfobject.hasFlashPlayerVersion("9.0.0")?a.fonts.swfPath?void function(e,a){var s="___fp_swf_loaded";window[s]=function(a){e(a)};var i,r=a.fonts.swfContainerId;(i=document.createElement("div")).setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(i);var n={onReady:s};window.swfobject.embedSWF(a.fonts.swfPath,r,"1","1","9.0.0",!1,n,{allowScriptAccess:"always",menu:"false"},{})}((function(a){e(a)}),a):e("missing options.fonts.swfPath"):e("flash not installed"):e("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(e,a){var s=a.audio;if(s.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return e(a.EXCLUDED);var i=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==i)return e(a.NOT_AVAILABLE);var r=new i(1,44100,44100),n=r.createOscillator();n.type="triangle",n.frequency.setValueAtTime(1e4,r.currentTime);var o=r.createDynamicsCompressor();c([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],(function(e){void 0!==o[e[0]]&&"function"==typeof o[e[0]].setValueAtTime&&o[e[0]].setValueAtTime(e[1],r.currentTime)})),n.connect(o),o.connect(r.destination),n.start(0),r.startRendering();var l=setTimeout((function(){return console.warn(navigator.userAgent+'".'),r.oncomplete=function(){},r=null,e("audioTimeout")}),s.timeout);r.oncomplete=function(a){var s;try{clearTimeout(l),s=a.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce((function(e,a){return e+Math.abs(a)}),0).toString(),n.disconnect(),o.disconnect()}catch(a){return void e(a)}e(s)}}},{key:"enumerateDevices",getData:function(e,a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return e(a.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then((function(a){e(a.map((function(e){return"id="+e.deviceId+";gid="+e.groupId+";"+e.kind+";"+e.label})))})).catch((function(a){e(a)}))}}],f=function(e){throw new Error("")};f.get=function(e,a){(function(e,a){var s,i;if(null!=a)for(i in a)null==(s=a[i])||Object.prototype.hasOwnProperty.call(e,i)||(e[i]=s)})(e=a?e||{}:(a=e,{}),l),e.components=e.extraComponents.concat(_);var s={data:[],addPreprocessedComponent:function(a,i){"function"==typeof e.preprocessor&&(i=e.preprocessor(a,i)),s.data.push({key:a,value:i})}},i=-1;!function r(n){if((i+=1)>=e.components.length)a(s.data);else{var o=e.components[i];if(e.excludes[o.key])r(!1);else{if(!n&&o.pauseBefore)return--i,void setTimeout((function(){r(!0)}),1);try{o.getData((function(e){s.addPreprocessedComponent(o.key,e),r(!1)}),e)}catch(e){s.addPreprocessedComponent(o.key,String(e)),r(!1)}}}}(!1)},f.getPromise=function(e){return new Promise((function(a,s){f.get(e,a)}))},f.getV18=function(e,a){return null==a&&(a=e,e={}),f.get(e,(function(s){for(var i=[],r=0;r<s.length;r++){var n=s[r];if(n.value===(e.NOT_AVAILABLE||"not available"))i.push({key:n.key,value:"unknown"});else if("plugins"===n.key)i.push({key:"plugins",value:d(n.value,(function(e){var a=d(e[2],(function(e){return e.join?e.join("~"):e})).join(",");return[e[0],e[1],a].join("::")}))});else if(-1!==["canvas","webgl"].indexOf(n.key)&&Array.isArray(n.value))i.push({key:n.key,value:n.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(n.key)){if(!n.value)continue;i.push({key:n.key,value:1})}else n.value?i.push(n.value.join?{key:n.key,value:n.value.join(";")}:n):i.push({key:n.key,value:n.value})}var l=o(d(i,(function(e){return e.value})).join("~~~"),31);a(l,i)}))},f.x64hash128=o,f.VERSION="2.1.0"}()},19469:(e,a,s)=>{"use strict";s.d(a,{o:()=>i});const i=function(){var e,a,s,r,n,o,l="undefined",c="object",d="Shockwave Flash",u="application/x-shockwave-flash",m="SWFObjectExprInst",p="onreadystatechange",h=window,v=document,g=navigator,_=!1,f=[function(){_?function(){var e=v.getElementsByTagName("body")[0],a=Z(c);a.setAttribute("type",u);var s=e.appendChild(a);if(s){var i=0;!function r(){if(typeof s.GetVariable!=l){var n=s.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),A.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(i<10)return i++,void setTimeout(r,10);e.removeChild(a),s=null,R()}()}else R()}():R()}],E=[],S=[],y=[],b=!1,C=!1,T=!0,A=function(){var e=typeof v.getElementById!=l&&typeof v.getElementsByTagName!=l&&typeof v.createElement!=l,a=g.userAgent.toLowerCase(),s=g.platform.toLowerCase(),i=/win/.test(s||a),r=/mac/.test(s||a),n=!!/webkit/.test(a)&&parseFloat(a.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,m=[0,0,0],p=null;if(typeof g.plugins!=l&&typeof g.plugins[d]==c)!(p=g.plugins[d].description)||typeof g.mimeTypes!=l&&g.mimeTypes[u]&&!g.mimeTypes[u].enabledPlugin||(_=!0,o=!1,p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(p.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(p.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(p)?parseInt(p.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=l)try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");f&&(p=f.GetVariable("$version"))&&(o=!0,p=p.split(" ")[1].split(","),m=[parseInt(p[0],10),parseInt(p[1],10),parseInt(p[2],10)])}catch(e){}return{w3:e,pv:m,wk:n,ie:o,win:i,mac:r}}();function k(){if(!b){try{var e=v.getElementsByTagName("body")[0].appendChild(Z("span"));e.parentNode.removeChild(e)}catch(e){return}b=!0;for(var a=f.length,s=0;s<a;s++)f[s]()}}function w(e){b?e():f[f.length]=e}function N(e){if(typeof h.addEventListener!=l)h.addEventListener("load",e,!1);else if(typeof v.addEventListener!=l)v.addEventListener("load",e,!1);else if(typeof h.attachEvent!=l)!function(e,a,s){e.attachEvent(a,s),y[y.length]=[e,a,s]}(h,"onload",e);else if("function"==typeof h.onload){var a=h.onload;h.onload=function(){a(),e()}}else h.onload=e}function R(){var e=E.length;if(e>0)for(var a=0;a<e;a++){var s=E[a].id,i=E[a].callbackFn,r={success:!1,id:s};if(A.pv[0]>0){var n=B(s);if(n)if(!U(E[a].swfVersion)||A.wk&&A.wk<312)if(E[a].expressInstall&&D()){var o={};o.data=E[a].expressInstall,o.width=n.getAttribute("width")||"0",o.height=n.getAttribute("height")||"0",n.getAttribute("class")&&(o.styleclass=n.getAttribute("class")),n.getAttribute("align")&&(o.align=n.getAttribute("align"));for(var c={},d=n.getElementsByTagName("param"),u=d.length,m=0;m<u;m++)"movie"!=d[m].getAttribute("name").toLowerCase()&&(c[d[m].getAttribute("name")]=d[m].getAttribute("value"));O(o,c,s,i)}else L(n),i&&i(r);else G(s,!0),i&&(r.success=!0,r.ref=I(s),i(r))}else if(G(s,!0),i){var p=I(s);p&&typeof p.SetVariable!=l&&(r.success=!0,r.ref=p),i(r)}}}function I(e){var a=null,s=B(e);if(s&&"OBJECT"==s.nodeName)if(typeof s.SetVariable!=l)a=s;else{var i=s.getElementsByTagName(c)[0];i&&(a=i)}return a}function D(){return!C&&U("6.0.65")&&(A.win||A.mac)&&!(A.wk&&A.wk<312)}function O(i,n,o,c){C=!0,s=c||null,r={success:!1,id:o};var d=B(o);if(d){"OBJECT"==d.nodeName?(e=M(d),a=null):(e=d,a=o),i.id=m,(typeof i.width==l||!/%$/.test(i.width)&&parseInt(i.width,10)<310)&&(i.width="310"),(typeof i.height==l||!/%$/.test(i.height)&&parseInt(i.height,10)<137)&&(i.height="137"),v.title=v.title.slice(0,47)+" - Flash Player Installation";var u=A.ie&&A.win?"ActiveX":"PlugIn",p="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+u+"&MMdoctitle="+v.title;if(typeof n.flashvars!=l?n.flashvars+="&"+p:n.flashvars=p,A.ie&&A.win&&4!=d.readyState){var g=Z("div");o+="SWFObjectNew",g.setAttribute("id",o),d.parentNode.insertBefore(g,d),d.style.display="none",function e(){4==d.readyState?d.parentNode.removeChild(d):setTimeout(e,10)}()}P(i,n,o)}}function L(e){if(A.ie&&A.win&&4!=e.readyState){var a=Z("div");e.parentNode.insertBefore(a,e),a.parentNode.replaceChild(M(e),a),e.style.display="none",function a(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(a,10)}()}else e.parentNode.replaceChild(M(e),e)}function M(e){var a=Z("div");if(A.win&&A.ie)a.innerHTML=e.innerHTML;else{var s=e.getElementsByTagName(c)[0];if(s){var i=s.childNodes;if(i)for(var r=i.length,n=0;n<r;n++)1==i[n].nodeType&&"PARAM"==i[n].nodeName||8==i[n].nodeType||a.appendChild(i[n].cloneNode(!0))}}return a}function P(e,a,s){var i,r=B(s);if(A.wk&&A.wk<312)return i;if(r)if(typeof e.id==l&&(e.id=s),A.ie&&A.win){var n="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?a.movie=e[o]:"styleclass"==o.toLowerCase()?n+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(n+=" "+o+'="'+e[o]+'"'));var d="";for(var m in a)a[m]!=Object.prototype[m]&&(d+='<param name="'+m+'" value="'+a[m]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+n+">"+d+"</object>",S[S.length]=e.id,i=B(e.id)}else{var p=Z(c);for(var h in p.setAttribute("type",u),e)e[h]!=Object.prototype[h]&&("styleclass"==h.toLowerCase()?p.setAttribute("class",e[h]):"classid"!=h.toLowerCase()&&p.setAttribute(h,e[h]));for(var v in a)a[v]!=Object.prototype[v]&&"movie"!=v.toLowerCase()&&x(p,v,a[v]);r.parentNode.replaceChild(p,r),i=p}return i}function x(e,a,s){var i=Z("param");i.setAttribute("name",a),i.setAttribute("value",s),e.appendChild(i)}function F(e){var a=B(e);a&&"OBJECT"==a.nodeName&&(A.ie&&A.win?(a.style.display="none",function s(){4==a.readyState?function(e){var a=B(e);if(a){for(var s in a)"function"==typeof a[s]&&(a[s]=null);a.parentNode.removeChild(a)}}(e):setTimeout(s,10)}()):a.parentNode.removeChild(a))}function B(e){var a=null;try{a=v.getElementById(e)}catch(e){}return a}function Z(e){return v.createElement(e)}function U(e){var a=A.pv,s=e.split(".");return s[0]=parseInt(s[0],10),s[1]=parseInt(s[1],10)||0,s[2]=parseInt(s[2],10)||0,a[0]>s[0]||a[0]==s[0]&&a[1]>s[1]||a[0]==s[0]&&a[1]==s[1]&&a[2]>=s[2]}function H(e,a,s,i){if(!A.ie||!A.mac){var r=v.getElementsByTagName("head")[0];if(r){var d=s&&"string"==typeof s?s:"screen";if(i&&(n=null,o=null),!n||o!=d){var u=Z("style");u.setAttribute("type","text/css"),u.setAttribute("media",d),n=r.appendChild(u),A.ie&&A.win&&typeof v.styleSheets!=l&&v.styleSheets.length>0&&(n=v.styleSheets[v.styleSheets.length-1]),o=d}A.ie&&A.win?n&&typeof n.addRule==c&&n.addRule(e,a):n&&typeof v.createTextNode!=l&&n.appendChild(v.createTextNode(e+" {"+a+"}"))}}}function G(e,a){if(T){var s=a?"visible":"hidden";b&&B(e)?B(e).style.visibility=s:H("#"+e,"visibility:"+s)}}function V(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=l?encodeURIComponent(e):e}return A.w3&&((typeof v.readyState!=l&&"complete"==v.readyState||typeof v.readyState==l&&(v.getElementsByTagName("body")[0]||v.body))&&k(),b||(typeof v.addEventListener!=l&&v.addEventListener("DOMContentLoaded",k,!1),A.ie&&A.win&&(v.attachEvent(p,(function e(){"complete"==v.readyState&&(v.detachEvent(p,e),k())})),h==top&&function e(){if(!b){try{v.documentElement.doScroll("left")}catch(a){return void setTimeout(e,0)}k()}}()),A.wk&&function e(){b||(/loaded|complete/.test(v.readyState)?k():setTimeout(e,0))}(),N(k))),A.ie&&A.win&&window.attachEvent("onunload",(function(){for(var e=y.length,a=0;a<e;a++)y[a][0].detachEvent(y[a][1],y[a][2]);for(var s=S.length,r=0;r<s;r++)F(S[r]);for(var n in A)A[n]=null;for(var o in A=null,i)i[o]=null;i=null})),{registerObject:function(e,a,s,i){if(A.w3&&e&&a){var r={};r.id=e,r.swfVersion=a,r.expressInstall=s,r.callbackFn=i,E[E.length]=r,G(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(A.w3)return I(e)},embedSWF:function(e,a,s,i,r,n,o,d,u,m){var p={success:!1,id:a};A.w3&&!(A.wk&&A.wk<312)&&e&&a&&s&&i&&r?(G(a,!1),w((function(){s+="",i+="";var h={};if(u&&typeof u===c)for(var v in u)h[v]=u[v];h.data=e,h.width=s,h.height=i;var g={};if(d&&typeof d===c)for(var _ in d)g[_]=d[_];if(o&&typeof o===c)for(var f in o)typeof g.flashvars!=l?g.flashvars+="&"+f+"="+o[f]:g.flashvars=f+"="+o[f];if(U(r)){var E=P(h,g,a);h.id==a&&G(a,!0),p.success=!0,p.ref=E}else{if(n&&D())return h.data=n,void O(h,g,a,m);G(a,!0)}m&&m(p)}))):m&&m(p)},switchOffAutoHideShow:function(){T=!1},ua:A,getFlashPlayerVersion:function(){return{major:A.pv[0],minor:A.pv[1],release:A.pv[2]}},hasFlashPlayerVersion:U,createSWF:function(e,a,s){return A.w3?P(e,a,s):void 0},showExpressInstall:function(e,a,s,i){A.w3&&D()&&O(e,a,s,i)},removeSWF:function(e){A.w3&&F(e)},createCSS:function(e,a,s,i){A.w3&&H(e,a,s,i)},addDomLoadEvent:w,addLoadEvent:N,getQueryParamValue:function(e){var a=v.location.search||v.location.hash;if(a){if(/\?/.test(a)&&(a=a.split("?")[1]),null==e)return V(a);for(var s=a.split("&"),i=0;i<s.length;i++)if(s[i].substring(0,s[i].indexOf("="))==e)return V(s[i].substring(s[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(C){var i=B(m);i&&e&&(i.parentNode.replaceChild(e,i),a&&(G(a,!0),A.ie&&A.win&&(e.style.display="block")),s&&s(r)),C=!1}}}}();window.__swfobject=i},66807:(e,a,s)=>{"use strict";s.d(a,{Ds:()=>i,GW:()=>r});const i={["surfingTheAverages"]:0,["macdProfessional"]:1,["predatoryGaze"]:2},r={horizontalLine:0,verticalLine:1,trendLine:2,ray:3,fibonacciLevelsRays:4,fibResistanceFan:5,fixedTrend:6};Object.freeze({LINE:0,CANDLE:1,BAR:2,"HEIKEN-ASHI":3}),Object.freeze({FOREX:0,DIGITAL:1})},89204:(e,a,s)=>{"use strict";s.d(a,{e:()=>BaseApi});class BaseApi{constructor(e,a){this.debug=a.debug,this.emModule=e}log(e){}}},74480:(e,a,s)=>{"use strict";s.d(a,{O:()=>DrawingApi});var i=s(23934),r=s(30339),n=(s(15942),s(87701),s(33882),s(4837),s(3952)),o=(s(35316),s(89658),s(84910),s(22743),s(86584)),l=s(51881),c=s(89204);class DrawingApi extends c.e{constructor(e,a){super(e,a),this.tradeFrameId=a.tradeFrameId,this.flatbuffersController=new o.k(e),this.flatbuffersController.callbackHandler.on(r.pA.drawing_Notify,(e=>{const a=e.unpack();if(a.request instanceof r.Rl){const e=DrawingApi.callbacks[a.request.methodType];if(a.request.method instanceof n.q7){var s;const i={tradeFrameId:this.tradeFrameId,payload:{drawingId:Number(null===(s=a.request.method.id)||void 0===s?void 0:s.value)}};DrawingApi.emitter.emit("selectDrawing",i),e&&e(i)}else if(a.request.method instanceof n.N){const a={tradeFrameId:this.tradeFrameId,payload:void 0};DrawingApi.emitter.emit("unSelectDrawing",a),e&&e(a)}else if(a.request.method instanceof n.vo){var i,o,l;if(null===(i=a.request.method.model)||void 0===i||i.id,null!==(o=a.request.method.model)&&void 0!==o&&o.id&&null!==(l=a.request.method.model)&&void 0!==l&&l.points){const s={tradeFrameId:this.tradeFrameId,payload:{drawingId:Number(a.request.method.model.id.value),points:a.request.method.model.points.map((e=>({timestamp:e.time,quote:e.quote})))}};DrawingApi.emitter.emit("drawingPointEdit",s),e&&e(s)}}}return null}))}static on(e,a){DrawingApi.callbacks[e]=a}hoverDrawingIn(e){this.flatbuffersController.call(r.x7.drawing_Request,(a=>{const s=new n.Rc(new n.vY(BigInt(e)));return new n.hX(n.fq.HoverDrawinMethod,s).pack(a)}))}hoverDrawingOut(){this.flatbuffersController.call(r.x7.drawing_Request,(e=>{const a=new n.Lo;return new n.hX(n.fq.UnhoverDrawingMethod,a).pack(e)}))}selectedDrawingNotify(){this.flatbuffersController.call(r.x7.drawing_Request,(e=>{const a=new n.q7;return new n.QY(n.EL.SelectedDrawingNotify,a).pack(e)}))}unselectedDrawingNotify(){this.flatbuffersController.call(r.x7.drawing_Request,(e=>{const a=new n.N;return new n.QY(n.EL.UnselectedDrawingNotify,a).pack(e)}))}addDrawing(e,a,s,i,o){this.flatbuffersController.call(r.x7.drawing_Request,(r=>{const c=new n.QD(new n.yz(new n.vY(BigInt(e)),a,(0,l.B1)(s),i,o.map((e=>new n.Uq(e.timestamp,e.quote)))));return new n.hX(n.fq.AddDrawingMethod,c).pack(r)}))}editDrawing(e,a,s,i,o){this.flatbuffersController.call(r.x7.drawing_Request,(r=>{const c=new n.Lb(new n.yz(new n.vY(BigInt(e)),a,(0,l.B1)(s),i,o.map((e=>new n.Uq(e.timestamp,e.quote)))));return new n.hX(n.fq.EditDrawingMethod,c).pack(r)}))}removeDrawing(e){this.flatbuffersController.call(r.x7.drawing_Request,(a=>{const s=new n.q2(new n.vY(BigInt(e)));return new n.hX(n.fq.RemoveDrawingMethod,s).pack(a)}))}}DrawingApi.emitter=(0,i.Z)(),DrawingApi.callbacks={}},51881:(e,a,s)=>{"use strict";function i(e){return"number"==typeof e?e:(4===e.length&&(e="#".concat(e[1].repeat(2)).concat(e[2].repeat(2)).concat(e[3].repeat(2))),Number.parseInt("".concat(e.replace("#","0x"),"ff"),16))}function r(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return{types:a.map((e=>e[0])),arguments:a.map((e=>e[1]))}}function n(){return window.devicePixelRatio||1}s.d(a,{B1:()=>i,VE:()=>r,mM:()=>n})},86584:(e,a,s)=>{"use strict";s.d(a,{k:()=>FlatbuffersController});var i=s(21866);var r=s(30339),n=(s(15942),s(87701),s(33882),s(4837),s(3952),s(35316),s(89658),s(84910));s(22743);class ReplyHelper{constructor(e){this.builder=e}packReplyUnimplemented(e){const a=n.iJ.createUnimplemented(this.builder,this.builder.createString(e)),s=r.jB.createReply(this.builder,n.$4.Unimplemented,a);return this.finalyzeResponse(s,r.Yh.common_Reply)}packReplyOk(){const e=n.Ok.createOk(this.builder),a=r.jB.createReply(this.builder,n.$4.Ok,e);return this.finalyzeResponse(a,r.Yh.common_Reply)}packReplyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.jK.UnknownError,a=arguments.length>1?arguments[1]:void 0;const s=n.jj.createError(this.builder,this.builder.createString(a||null),e),i=r.jB.createReply(this.builder,n.$4.Error,s);return this.finalyzeResponse(i,r.Yh.common_Reply)}finalyzeResponse(e,a){const s=r.gj.createOutputFromClient(this.builder,a,e),i=r.v0.createMessage(this.builder,r.Cs.OutputFromClient,s);return r.v0.finishMessageBuffer(this.builder,i),this.builder.asUint8Array()}}class FlatbuffersCallbackHandler{static on(e,a){FlatbuffersCallbackHandler.callbacks[e]=a}flatRequest(e){FlatbuffersCallbackHandler.builder.clear();const a=new ReplyHelper(FlatbuffersCallbackHandler.builder);if(0===e.length)return a.packReplyError(n.jK.ApiBrokenBufferData);const s=r.v0.getRootAsMessage(new i.cZ(e));if(s.contentType()===r.Cs.InputFromChart){const e=s.content(new r.ex),i=e.requestType(),n=FlatbuffersCallbackHandler.callbacks[i];if(n){return n(e,FlatbuffersCallbackHandler.builder)?a.packReplyUnimplemented("Unimplemented temp"):a.packReplyOk()}return a.packReplyUnimplemented("Unimplemented")}return a.packReplyError(n.jK.ApiBrokenBufferData)}}FlatbuffersCallbackHandler.callbacks={};class ChartResponse{constructor(e,a){this.requestType=e,this.content=a}getReplyFromChart(){const e=class Message{static unpackMessage(e,a){const s=new i.cZ(a),n=r.v0.getRootAsMessage(s);return(0,r.WM)(e,n.content.bind(n))}}.unpackMessage(r.Cs.OutputFromChart,this.content),a=this.getReplyFromChartCode(this.requestType);return{reply:this.unpackChartReply(a,e),replyCode:a}}unpackChartReply(e,a){return(0,r.LQ)(e,a.reply.bind(a))}getReplyFromChartCode(e){switch(e){case r.x7.quotes_Request:return r.x0.quotes_Reply;case r.x7.version_Request:return r.x0.version_Reply;case r.x7.common_requests_Request:case r.x7.strikes_Request:case r.x7.bid_ask_Request:case r.x7.viewport_Request:case r.x7.onboarding_Request:case r.x7.notification_level_Request:case r.x7.deals_Request:case r.x7.indicator_Request:case r.x7.animations_Request:case r.x7.drawing_Request:case r.x7.config_Request:case r.x7.NONE:default:return r.x0.common_Reply}}}class FlatbuffersController{constructor(e){this.instance=e,this.builder=new i.Ib(10240),this.callbackHandler=function(e,a){return window.FlatCallbackHandler=FlatbuffersCallbackHandler,FlatbuffersCallbackHandler.builder=a,e.setFlatCallbackHandler("FlatCallbackHandler"),FlatbuffersCallbackHandler}(e,this.builder)}call(e,a){const s=this.getCleanBuilder(),i=a(s),n=this.packInputFromClient(s,e,i);this.finishMessage(s,r.Cs.InputFromClient,n);return new ChartResponse(e,this.instance.flatRequest(s.asUint8Array())).getReplyFromChart()}packInputFromClient(e,a,s){return r.H0.createInputFromClient(e,a,s,0)}finishMessage(e,a,s){const i=r.v0.createMessage(e,a,s);r.v0.finishMessageBuffer(e,i)}getCleanBuilder(){return this.builder.clear(),this.builder}}},54681:(e,a,s)=>{"use strict";s.d(a,{A:()=>u});var i=s(27378),r=s(77740),n="_1Kd6JKQMzpn6",o="_3lf_HBCSTAnk",l="_1lGdoehsDNDH",c="_1byflqVEcQ3x",d="_1UF_IeBF6v_g";const u=e=>{let a=e.headerTitle,s=e.title,u=e.content,m=e.onClick,p=e.onClose;const h=i.useCallback((()=>{m()}),[m]),v=i.useCallback((e=>{e.stopPropagation(),e.preventDefault(),p()}),[p]);return i.createElement("div",{className:n,onClick:h,"data-test":"techanalysis-active-instrument-panel"},i.createElement("button",{className:d,onClick:v,"data-test":"techanalysis-active-instrument-panel-close"},i.createElement(r.bMz,null)),i.createElement("div",{className:o,"data-test":"techanalysis-active-instrument-panel-header"},a),i.createElement("div",{className:l,"data-test":"techanalysis-active-instrument-panel-title"},s),i.createElement("div",{className:c,"data-test":"techanalysis-active-instrument-panel-content"},u))};u.displayName="ActiveInstrumentPanel"},96091:(e,a,s)=>{"use strict";s.d(a,{M:()=>n});var i=s(27378),r="Zy4bS0Aquhlr";const n=e=>{let a=e.onClick;return i.createElement("button",{"data-test":"analyser-icon-button",className:r,onClick:a},i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"currentcolor",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 12.0619C15.0537 12.554 12 15.9204 12 20C12 24.4183 15.5817 28 20 28C21.8487 28 23.551 27.3729 24.9056 26.3199L19.2929 20.7071C19.1054 20.5196 19 20.2652 19 20V12.0619ZM21 12.0619V17.5858L24.9056 13.6801C23.7991 12.82 22.4607 12.244 21 12.0619ZM26.3199 15.0944L21.4142 20L23 21.5858L27.4659 17.1199C27.1827 16.3864 26.7946 15.705 26.3199 15.0944ZM27.9803 19.4339L24.4142 23L26.3199 24.9056C27.3729 23.551 28 21.8487 28 20C28 19.8097 27.9934 19.6209 27.9803 19.4339ZM10 20C10 14.4772 14.4772 10 20 10C25.5228 10 30 14.4772 30 20C30 25.5228 25.5228 30 20 30C14.4772 30 10 25.5228 10 20Z",fill:"currentcolor"})))};n.displayName="AnalyserButton"},26553:(e,a,s)=>{"use strict";s.d(a,{P:()=>D});var i=s(27378),r=s(17302),n=s(77740),o=s(60042),l="_3t8AODbu8XnI",c="_1r5_HF_4mxgw",d="wTlh5w7vkV6z",u="mqF4Cko0BLgE",m="tRiUoHc-pDFL",p="Yl8n93cVwi1W",h="ux_OtOszQcyl",v="_2d8k5asmaaZZ",g="r7OK4hykyiSn",_="_2A-BYUAVbyjk",f="_241UCvetG6bP",E="Yi2ENaQWAHDN",S="_3D3zMShaa_xJ",y="_1gzcbiGfgR4D";const b=e=>{let a=e.children;return i.createElement("div",{"data-test":"analyser-chips",className:h},a)};b.displayName="Chips";const C=e=>{let a=e.children;return i.createElement("div",{className:c},a)};C.displayName="Body";const T=()=>i.createElement("div",{"data-test":"analyser-loader",className:d},i.createElement(r.$j,null));T.displayName="Loader";const A=e=>{let a=e.children;return i.createElement("h3",{className:u},i.createElement(r.xv,{variant:"L / Bold"},a))};A.displayName="Title";const k=e=>{let a=e.children,s=e.topMargin,r=e.dataTest;return i.createElement("div",{"data-test":r,className:o(m,s?p:"")},a)};k.displayName="Section";const w=e=>{let a=e.children,s=e.isBorder,r=e.dataTest,n=e.onClick;return i.createElement("div",{"data-test":r,className:o(v,s?g:"",n?_:""),onClick:n},a)};w.displayName="Card";const N=e=>{let a=e.children;return i.createElement("div",{className:f},a)};N.displayName="Banner";const R=e=>{let a=e.children,s=e.button,n=e.dataTest;return i.createElement("h3",{"data-test":n,className:E},i.createElement(r.xv,{variant:"L / Bold"},a),s)};R.displayName="SuccessRateTitle";const I=e=>{let a=e.isAnimation,s=e.dataTest,r=e.onClick;return i.createElement("button",{"data-test":s,className:o(S,a?y:""),onClick:r},i.createElement(n.Gc9,null))};I.displayName="InfoButton";const D=e=>{let a=e.children,s=e.dataTest;const n=(0,r.Fg)().dir;return i.createElement("div",{className:l,dir:n,"data-test":s},a)};D.Body=C,D.Loader=T,D.Title=A,D.Section=k,D.Chips=b,D.Card=w,D.Banner=N,D.SuccessRateTitle=R,D.InfoButton=I,D.displayName="AnalyserLayout"},18562:(e,a,s)=>{"use strict";s.d(a,{b:()=>c});var i=s(27378),r=s(17302),n=s(37578),o=s(26553),l="_1nqocpZnS4DV";const c=e=>{let a=e.rate,s=e.title,c=e.subTitle,d=e.buttonText,u=e.onClick;return i.createElement(o.P.Card,{onClick:u,dataTest:"analyser-widget"},i.createElement(r.xu,{direction:"column",gap:"m"},i.createElement(r.xu,{direction:"row",gap:"l"},i.createElement(n.m,{rate:a>0?a:5,minimized:!0,label:"".concat(a,"%")}),i.createElement("div",{className:l},c&&i.createElement(r.xv,{dataTest:"analyser-widget-subtitle",variant:"S / Regular",color:"contrast-beta"},c),i.createElement(r.xv,{dataTest:"analyser-widget-title",variant:"M / Bold"},s))),i.createElement(r.zx,{dataTest:"analyser-widget-button",variant:"secondary",size:"xs",fullWidth:!0,onClick:u},d)))};c.displayName="AnalyzerWidget"},2791:(e,a,s)=>{"use strict";s.d(a,{j:()=>v});var i=s(27378),r=s(77740),n=s(17302),o=s(52261);var l=s.e(9662).then(s.t.bind(s,9662,17));var c=s.e(8667).then(s.t.bind(s,78667,17)),d="_3UgoRLVrrbl2",u="_3WzHoG8I3Ooc",m="_2XvJcJF8SOO2",p="k3glrDFALJ3T",h="Nbs2FSoLqp23";const v=e=>{let a=e.children,s=e.onClick,v=e.onClose;const g=(0,o.a)(l),_=(0,o.a)(c),f=i.useCallback((e=>{e.preventDefault(),e.stopPropagation(),v()}),[v]);return i.createElement("div",{className:d,onClick:s,"data-test":"analyser-story-banner"},i.createElement("img",{className:u,src:g,srcSet:"".concat(g," 1x, ").concat(_," 2x"),width:"114",height:"92",alt:""}),i.createElement("button",{"data-test":"analyser-story-banner-close",className:m,onClick:f},i.createElement(r.bMz,{className:p})),i.createElement("div",{className:h},i.createElement(n.xv,{variant:"M / Bold"},a)))};v.displayName="Banner"},10137:(e,a,s)=>{"use strict";s.d(a,{h:()=>l});var i=s(27378),r=s(77740),n="_2xMJlDEfj1wg",o="_3xH1CCUob2yt";const l=e=>{let a=e.type,s=e.sign;const l=i.useMemo((()=>"duration"===a?i.createElement(r.Zbd,{className:o}):"percent"===a?i.createElement(r.rqj,{className:o}):s),[a,s]);return i.createElement("div",{className:n},l)};l.displayName="ConditionsIcon"},32696:(e,a,s)=>{"use strict";s.d(a,{J:()=>n});var i=s(27378),r="_33EEawzJGTsr";const n=e=>{let a=e.url;return i.createElement("div",{className:r,style:{backgroundImage:"url(".concat(a,")")}}," ")};n.displayName="Icon"},19202:(e,a,s)=>{"use strict";s.d(a,{V:()=>d});var i=s(27378),r=s(77740),n="_3EB0kLHNGgCM",o="AHettVLmSe8I",l="_1_Z9CQBAmHhl",c="_1P4mXvQDHHm8";const d=e=>{let a=e.children,s=e.dataTest,d=e.onClick;return i.createElement("div",{"data-test":s,className:n,onClick:d},i.createElement("div",{className:o},i.createElement(r.h1e,{className:l}),i.createElement("div",{className:c},a)))};d.displayName="InfoPanel"},54759:(e,a,s)=>{"use strict";s.d(a,{H:()=>p});var i=s(27378),r=s(17302),n=s(60042),o="_3weT9tJVAUqG",l="_33hzJMl6QDkM",c="_9CMOYuePxaWS",d="_1xk-AIWBZc85",u="_2VsYK99doGN_",m="_2R8AsYK1DGZH";const p=e=>{let a=e.icon,s=e.titleLabel,p=e.titleValue,h=e.resultUpLabel,v=e.resultValue,g=e.resultDownLabel,_=e.dataTest,f=e.dataTestResultUpLabel,E=e.dataTestResultDownLabel,S=e.dataTestResultValue,y=e.dataTestTitleValue,b=e.dataTestTitleLabel,C=e.onClick;return i.createElement("div",{"data-test":_,className:n(o,C?l:"",C?c:""),onClick:C},i.createElement("div",{className:d},a),i.createElement("div",{className:u},i.createElement(r.xv,{dataTest:y,variant:"M / Bold"},p),s?i.createElement(r.xv,{dataTest:b,variant:"S / Regular",color:"contrast-beta"},s):null),i.createElement("div",{className:m},h?i.createElement(r.xv,{dataTest:f,variant:"S / Regular",color:"contrast-beta"},h," "):null,i.createElement(r.xv,{dataTest:S,variant:"M / Bold",color:"positive-alpha",align:"end"},v),g?i.createElement(r.xv,{dataTest:E,variant:"S / Regular",color:"contrast-beta",align:"end"},g):null))};p.displayName="ListItem"},64804:(e,a,s)=>{"use strict";s.d(a,{n:()=>d});var i=s(27378),r=s(17302),n="_3QZnR6DOL2se",o="_2-NvtDtugIX5",l="_2-XM0mf_ESYB";const c=()=>i.createElement("svg",{className:l,width:"65",height:"64",viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_3252_100213)"},i.createElement("circle",{cx:"32.5",cy:"32",r:"30",stroke:"currentcolor",strokeWidth:"4"}),i.createElement("path",{d:"M22.5 22L42.5 42",stroke:"currentcolor",strokeWidth:"4",strokeLinecap:"round"}),i.createElement("path",{d:"M42.5 22L22.5 42",stroke:"currentcolor",strokeWidth:"4",strokeLinecap:"round"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3252_100213"},i.createElement("rect",{width:"64",height:"64",fill:"white",transform:"translate(0.5)"})))),d=e=>{let a=e.title,s=e.subTitle,l=e.bottom,d=e.isWarning;const u=(0,r.Fg)().dir;return i.createElement("div",{className:n,dir:u},i.createElement("div",{className:o},d&&i.createElement(c,null),i.createElement(r.xu,{direction:"column",gap:"l",horizontalAlign:"center"},i.createElement(r.xv,{dataTest:"analyser-stub-title",variant:"XL / Bold",align:"center"},a),i.createElement(r.xv,{dataTest:"analyser-stub-subtitle",variant:"M / Regular",align:"center",color:"contrast-beta"},s))),i.createElement("div",null,l))};d.displayName="LockScreenLayout"},71301:(e,a,s)=>{"use strict";s.d(a,{V:()=>d});var i=s(27378),r=s(17302),n=s(82844),o=s(26553),l=s(37578),c="zRBDT-FcuWhM";const d=e=>{let a=e.onClick;return i.createElement(o.P.Card,{isBorder:!0,dataTest:"analyser-no-deals-panel"},i.createElement("div",{className:c},i.createElement(l.m,{rate:5,minimized:!0,label:"".concat(0,"%")})),i.createElement(r.xu,{gap:"l",horizontalAlign:"center"},i.createElement(r.xv,{variant:"S / Regular",color:"contrast-beta",align:"center"},i.createElement(n._,{defaultMessage:"Once you start making FT trades, we'll display your success rate here. It'll help you keep track of how you're trading.",id:"analytics_today_performance_no_trades_stub_desc"})),i.createElement(r.zx,{fullWidth:!0,onClick:a,size:"s",dataTest:"analyser-no-deals-button"},i.createElement(n._,{defaultMessage:"Choose Asset",id:"analytics_today_performance_no_trades_stub_button"}))))};d.displayName="NoTradesCard"},37578:(e,a,s)=>{"use strict";s.d(a,{m:()=>_});var i=s(27378),r=s(60042),n=s(49491),o=s(82967),l=s(87826),c=s(80300);s(36288);function d(e){return e/100*Math.PI*2}const u=e=>{let a=e.width,s=void 0===a?100:a,r=e.height,u=void 0===r?100:r,m=e.borderWidth,p=void 0===m?20:m,h=e.data,v=e.className,g=e.bgColor,_=void 0===g?"#ccc":g,f=e.color,E=void 0===f?"orange":f,S=e.opacity,y=void 0===S?1:S,b=e.bgOpacity,C=void 0===b?1:b;const T=i.useRef(null),A=i.useRef(h);return i.useLayoutEffect((()=>{if(T.current){const e=(0,l.Z)().innerRadius(s/2-p).outerRadius(s/2).startAngle(0).endAngle(2*Math.PI).cornerRadius(0),a=(0,c.Z)().value((e=>e)).sort(null),i=(0,l.Z)().innerRadius(s/2-p).outerRadius(s/2).cornerRadius(s/10);(0,o.Z)(T.current).select("svg").empty()||(0,o.Z)(T.current).select("svg").remove();const r=(0,o.Z)(T.current).append("svg").attr("width",s).attr("height",s).append("g").attr("transform","translate(".concat(s/2,", ").concat(u/2,")")).selectAll("g").data(a([h])).enter().append("g");r.append("path").attr("d",e).attr("fill",_).attr("opacity",C);const m=r.append("path");m.attr("d",i).attr("fill",E).attr("opacity",y),m.transition().duration(1e3).attrTween("d",(function(e){const a=A.current!==e.value?d(A.current):0,s=d(e.value)-a;return A.current=h,function(r){return i(n(n({},e),{},{endAngle:a+s*r}))}}))}}),[h,s,u,p,T,_,E,C,y]),i.createElement("div",{"data-test":"analyser-pie-chart","data-test-value":h,style:{width:"".concat(s,"px"),height:"".concat(s,"px")},className:v,ref:T})};u.displayName="PieChart";var m="_3mbtCHCdCj21",p="_299TloFLkcXS",h="_1aLRb83F2WIs",v="ABRL_sktdNky",g="_1NLJaq1IIq2T";const _=e=>{let a=e.rate,s=e.goal,n=e.minimized,o=e.label;const l=n?36:90,c=n?56:128,d=n?8:16;return i.createElement("div",{"data-test":"analyser-all-pie-charts",className:r(m,n?h:""),style:{width:"".concat(c,"px"),height:"".concat(c,"px")}},o&&i.createElement("div",{className:p,"data-test":"analyser-all-pie-charts-label"},o),void 0!==s&&i.createElement(u,{className:g,data:s,width:l,height:l,borderWidth:d,bgColor:"#2d3138",color:"#776bf8",opacity:.5,bgOpacity:.25}),void 0!==a&&i.createElement(u,{className:v,data:a,width:c,height:c,borderWidth:d,bgColor:"#2d3138",color:"#776bf8",bgOpacity:.25}))};_.displayName="SuccessRateChart"},31076:(e,a,s)=>{"use strict";s.d(a,{t:()=>h});var i=s(27378),r=s(77740),n=s(52261);var o=s.e(2147).then(s.t.bind(s,72147,17));var l=s.e(6440).then(s.t.bind(s,26440,17)),c="_3doANBatSzmZ",d="IVQgpremfdDV",u="cmhttGlliZcQ",m="CTOVUrB9MeFd",p="_15PdGbqAYn4P";const h=e=>{let a=e.children,s=e.onClick,h=e.onClose;const v=(0,n.a)(o),g=(0,n.a)(l),_=i.useCallback((e=>{e.preventDefault(),e.stopPropagation(),h()}),[h]);return i.createElement("div",{"data-test":"analyser-survey-banner",className:c,onClick:s},i.createElement("img",{className:d,src:v,srcSet:"".concat(v," 1x, ").concat(g," 2x"),width:"73",height:"88",alt:""}),i.createElement("button",{"data-test":"analyser-survey-banner-close",className:u,onClick:_},i.createElement(r.bMz,{className:m})),i.createElement("div",{className:p},a))};h.displayName="SurveyBanner"},19342:(e,a,s)=>{"use strict";s.d(a,{O:()=>l});var i=s(27378),r=s(17302),n=s(46345),o="_5nVBwOHc6I14";const l=e=>{let a=e.children,s=e.title,l=e.pending,c=e.error;return i.createElement(i.Fragment,null,s&&i.createElement(n.j.Title,null,s),c&&i.createElement("div",{className:o},i.createElement(r.xv,{align:"center",color:"negative-alpha",variant:"M / Bold"},c)),l&&i.createElement("div",{className:o},i.createElement(r.$j,{size:"l"})),a)};l.displayName="DealDetailsLayout"},46345:(e,a,s)=>{"use strict";s.d(a,{j:()=>p});var i=s(27378),r=s(77740),n=s(17302),o=s(60042),l="AAMbCdaVdKff",c="_2mOb9IJXPnP5",d="_1fOzSHLurvs-",u="_1o5a-eXIsMzn";const m=e=>{let a=e.children;return i.createElement("h3",{className:u},i.createElement(n.xv,{variant:"M / Bold",align:"center"},a))};m.displayName="Title";const p=e=>{let a=e.children,s=e.noPadding,n=e.onClose;return i.createElement("div",{className:o(l,s?c:"")},i.createElement("button",{className:d,onClick:n},i.createElement(r.bMz,null)),a)};p.Title=m,p.displayName="DealDetailsModal"},80454:(e,a,s)=>{"use strict";s.d(a,{b:()=>C});var i=s(2243),r=s(60042),n=s(27378),o=s(33114),l=s(50439),c=s(57371),d=s(44495),u=s(50649),m=s(37488),p=s(17302),h=s(87601),v=s(95029),g="_2gAGJ1pXs3j2",_="WUxFI3D48Amc",f="_70og8Sr6AL84",E="_3lClpm_JgTj6",S="_1z1oR8WZ4-3X",y="ht8pC-QQ8bjW",b="_3G8WDCwzGa88";const C=(0,u.observer)((e=>{let a=e.cards,s=e.selectedCardId,u=e.onSelect,C=e.onUnselect,T=e.renderer,A=e.onHide;const k=(0,v.Lm)(),w=(0,v.AS)(),N=!!s,R=(0,o.Z)(a,"id"),I=(0,l.Z)(k,768),D=(0,c.Z)(a,(e=>e.id===s)),O=(0,m.useMediaQuery)({maxWidth:h.j$.BREAKPOINT_960}),L=n.useMemo((()=>a.reduce(((e,a)=>(e[a.id]=n.createRef(),e)),{})),[a]),M=n.useRef(null),P=(0,v.xE)(s&&L[s]||M).height,x=n.useState((()=>p.tW.HIDDEN)),F=i(x,2),B=F[0],Z=F[1],U=Number(a.length>1),H=U?22:0,G=((e,a,s)=>{const i=e-35,r=14*s,n=Math.max((r-i)/2,0);return[Math.round(i/2-14*(a+1)+n),-n,n]})(I,D,a.length),V=i(G,3),W=V[0],j=V[1],z=V[2],q=(0,l.Z)(W,j,z),K=(0,d.useSpring)({dotsTransform:H,dotsScroll:q,immediate:B===p.tW.HIDDEN}),Y=K.dotsTransform,X=K.dotsScroll;n.useEffect((()=>{Z(N?p.tW.COLLAPSED:p.tW.HIDDEN)}),[N]);const J=n.useCallback((e=>{switch(e){case p.tW.HIDDEN:C();break;case p.tW.EXPANDED:case p.tW.COLLAPSED:Z(e);case p.tW.DRAGGING:case p.tW.SETTLING:}}),[C]);return O?n.createElement(p.yo,{state:B,onChangeState:J,width:I,height:(0,l.Z)(w,245,P+H),collapsedHeight:140+H,disabledCollapsedScrim:!0,bg:"beta",containerSelector:".bottom-sheet"},(()=>a.length?n.createElement(p.E7,{tabs:R,selected:s,immediate:B===p.tW.HIDDEN,onSelect:u},n.createElement(d.a.div,{className:r(g,U&&_,q<z&&f,q>j&&E)},n.createElement(d.a.div,{className:S,style:{transform:X.to((e=>"translateX(".concat(e,"px)")))}},n.createElement(p.rr,null,((e,a,s)=>{let i=s.selected;return n.createElement(d.a.div,{key:a,className:y,style:{opacity:i.to({range:[0,1],output:[.2,1]})}})})))),n.createElement(p.jm,{isScale:!0},((e,a,i,r)=>{let o=i.selected,l=i.scale;const c=-1!==D&&Math.abs(D-r)<2;return c||A(e.id),n.createElement(p.ZH,{key:a,aSelected:o,aScale:l,style:{overflowY:"hidden"}},c?n.createElement(d.a.div,{className:b,style:{maxHeight:w-H,overflowY:B===p.tW.EXPANDED&&s===e.id?"scroll":"hidden",paddingBottom:22},ref:L[e.id]},n.createElement(d.a.div,{style:{transform:Y.to((e=>"translateY(".concat(e,"px)")))}},T(e,s,L[e.id].current))):null)}))):null)):null}))},30892:(e,a,s)=>{"use strict";s.d(a,{l:()=>c});var i=s(27378),r=s(17302),n=s(82844),o=s(95029),l="FARW4QhBup3j";const c=e=>{let a=e.invested,s=e.float,c=e.currency,d=e.button,u=e.modal,m=e.hostEl;const p=i.useMemo((()=>s>0?"positive-alpha":s<0?"negative-alpha":"contrast-gamma"),[s]);return i.createElement("div",{className:l,ref:m,"data-test":"deal-summary-header-block"},u,i.createElement(r.xu,{direction:"row",horizontalAlign:"space-between"},i.createElement(r.xu,{direction:"column"},i.createElement(r.xv,{variant:"S Compact / Regular",color:"contrast-gamma",align:"start"},i.createElement(n._,{id:"deals_list_summary_label_invested",defaultMessage:"Invested"})),i.createElement(r.xv,{variant:"M / Bold",color:s?"contrast-alpha":"contrast-gamma",align:"start"},i.createElement(o.ih,{value:a,currency:c,minimumFractionDigits:2,maximumFractionDigits:2,"data-test":"deals-summary-invested"}))),i.createElement(r.xu,{direction:"column"},i.createElement(r.xv,{variant:"S Compact / Regular",color:"contrast-gamma",align:"end"},i.createElement(n._,{id:"deals_list_summary_label_total",defaultMessage:"Profit and Loss"})),i.createElement(r.xv,{variant:"M / Bold",color:p,align:"end"},i.createElement(o.ih,{value:s,currency:c,minimumFractionDigits:2,maximumFractionDigits:2,"data-test":"deals-summary-profit"})))),d)};c.displayName="DealActiveSummary"},68713:(e,a,s)=>{"use strict";s.d(a,{y:()=>f});var i=s(27378),r=s(17302),n=s(26739),o=s(55917),l="RUjh_S0DMl6y",c="_2JJgyvyf_ou4",d="_14QTKwkPdebH",u="_1-IMMgmHDPmD",m="_1e2xf8ZpTEW_",p="_34NtukEinaYs";const h=e=>{let a=e.children;return i.createElement("div",{className:m},i.createElement(r.xv,{variant:"L / Bold"},a))};h.displayName="Title";const v=e=>{let a=e.text;return i.createElement("div",{className:d},i.createElement(o.F,{text:a}))};v.displayName="NoDeals";const g=e=>{let a=e.children;return i.createElement("div",{className:u},a)};g.displayName="List";const _=()=>i.createElement("div",{className:p},i.createElement(r.$j,null));_.displayName="Loader";const f=e=>{let a=e.scrollRef,s=e.children;return i.createElement("div",{className:l},i.createElement(r.xu,{padding:["l",0,"l",0]},s),i.createElement(n.F,{scrollRef:a,className:c}))};f.Title=h,f.NoDeals=v,f.List=g,f.Loader=_,f.displayName="DealActiveTabLayout"},23301:(e,a,s)=>{"use strict";s.d(a,{i:()=>c});var i=s(27378),r=s(18985),n=s(82844),o=s(10028),l="_1Ttm7Ft2g_QZ";const c=e=>{let a=e.time,s=e.now,c=e.moreInfo;const d=i.useCallback((()=>{const e=(0,o.i)(a),l=e.day,c=e.month,d=e.year,u=(0,o.i)(s),m=u.day,p=u.month;return d!==u.year?i.createElement(r.Ji,{value:a,day:"numeric",month:"long",year:"numeric"}):c===p&&l===m?i.createElement(n._,{id:"day_today",defaultMessage:"Today"}):c===p&&l===m-1?i.createElement(n._,{id:"day_yesterday",defaultMessage:"Yesterday"}):i.createElement(r.Ji,{value:a,day:"numeric",month:"long"})}),[a,s]);return i.createElement("div",{className:l},i.createElement("span",null,d()),i.createElement("span",null,c))};c.displayName="GroupDataLabel"},33400:(e,a,s)=>{"use strict";s.d(a,{RH:()=>S});var i=s(27378),r=s(17302),n=s(8141),o=s(55917),l="_1ReFFGeUgfTl",c="_1OorY5Q4G0ez",d="VsgGzuNHeFA9",u="_3VM28a0YR18_",m="_3bZJGM0rx-7Y",p="ZxmI57LlXPfO";const h=e=>{let a=e.text;return i.createElement("div",{className:c},i.createElement(o.F,{text:a}))};h.displayName="NoDeals";const v=()=>i.createElement("div",{className:d},i.createElement(r.$j,null));v.displayName="Loader";const g=e=>{let a=e.loading;return i.createElement("div",{className:u},a?i.createElement(r.$j,null):null)};g.displayName="InfinityLoader";const _=()=>i.createElement("div",{className:m}," ");_.displayName="EmptyCard";const f=e=>{let a=e.children;return i.createElement("div",{className:l},a)};f.displayName="Wrapper";const E=e=>{let a=e.children;return i.createElement("div",{className:p},a)};E.displayName="Filters";const S=e=>{let a=e.children;const s=(0,n.L)();return i.createElement("div",{dir:s},a)};S.NoDeals=h,S.Loader=v,S.InfinityLoader=g,S.Wrapper=f,S.EmptyCard=_,S.Filters=E,S.displayName="DealsHistoryListLayout"},33148:(e,a,s)=>{"use strict";s.d(a,{w:()=>o});var i=s(27378),r=s(64915),n=s(69558);const o=e=>{let a=e.active,s=e.label,o=e.open,l=e.panelContainerRef,c=e.panelTitle,d=e.panelContent,u=e.panelClassName,m=e.onClick;return i.createElement(n.u,{triggerComponent:i.createElement(r.v.Chip,{open:o,active:a,label:s,onClick:m}),open:o,panelContainerRef:l,panelTitle:c,panelContent:d,className:u})};o.displayName="Filter"},28166:(e,a,s)=>{"use strict";s.d(a,{e:()=>m});var i=s(27378),r=s(10008),n=s(77740),o=s(60042),l=s(17302),c=s(82844),d=s(19638),u={host:"_2A1tW0Sot0-G",text:"_24FeWgMaUZbA",title_archived:"_2OIvVlK--SUJ",title_selected:"_1_bbtUheoBBM",icon:"_27M8u9osFBHv"};const m=e=>{let a=e.panelContainerRef,s=e.accountList,m=e.defaultItemId,p=e.filter,h=e.activeFilterId,v=e.onClick,g=e.onSetFilter;const _=i.useMemo((()=>(0,r.Z)(s,[e=>e.isDemo,e=>e.active?1:-1,e=>-e.id],["desc","desc","desc"])),[s]);return i.createElement(d.f,{title:i.createElement(c._,{id:"account",defaultMessage:"Account"}),selectedId:String(p),defaultItemId:m,panelContainerRef:a,list:_.map((e=>{const a=p===e.id;return{id:e.id+"",icon:e.isDemo?i.createElement(n.ScK,{className:u.icon}):i.createElement("img",{className:u.icon,"data-test":"currency-icon-img",src:e.icon}),title:i.createElement("div",{className:u.text},i.createElement("div",{className:o(u.title,e.active?"":u.title_archived,a?u.title_selected:"")},e.name),e.active?null:i.createElement(l.xv,{variant:"S / Regular",color:"contrast-gamma"},i.createElement(c._,{id:"archived",defaultMessage:"Archived"}))),titleLegend:i.createElement(i.Fragment,null,e.name)}})),filterId:"accounts-1",activeFilterId:h,onClick:v,onSetFilter:g})};m.displayName="FilterAccount"},38235:(e,a,s)=>{"use strict";s.d(a,{T:()=>R});var i=s(2243),r=s(27378),n=s(60042),o=s(17302),l=s(45797),c=s(82844),d=s(95029),u=s(26739),m=s(2948),p=s(77740),h="_3qp6Sx7d2FTf",v="_2I--gpWbQ1DQ",g="_21dcV-mdSEgU";const _=e=>{let a=e.value,s=e.minimized,i=e.onChange;const l=(0,m.Z)(),c=r.useCallback((e=>{i(e.target.value)}),[i]),d=r.useCallback((()=>{i("")}),[i]),u=r.useMemo((()=>a&&!s?r.createElement(o.Xd,{onClick:d,"data-test":"search-field-close"},r.createElement(p.bMz,{className:n(v,a&&g)})):null),[a,s,d]);return r.createElement(o.nv,{placeholder:l.formatMessage({id:"search",defaultMessage:"Search"}),type:"text",size:"xsmall",className:h,name:"instrument-search",value:a,"data-test":"search-field",startIcon:r.createElement(p.jVj,{className:v}),endIcon:u,onChange:c})};_.displayName="SearchTextField";var f="_2vSLSrvYLU9i",E="_1Q0fX5o6N7RR",S="_30xWE9Gh3-NA",y="bd9BXCbKFZmN";const b=e=>{let a=e.icon,s=void 0===a?r.createElement(p.jVj,null):a,i=e.text,o=void 0===i?r.createElement(c._,{id:"asset_not_found_stub",defaultMessage:"There are no matching assets. Try a different keyword"}):i,l=e.contrast,d=void 0!==l&&l;return r.createElement("div",{className:f},r.createElement("div",{className:n(S,d&&y)},s),r.createElement("div",{className:E},o))};b.displayName="SearchResultStub";var C=s(11558),T=s(33148),A={search:"c-Ci2GEwbz_s",scroll:"_1TIqk7OXd3-S",scrollTopButton:"_3WMSw4ORU3_y",stub:"_215GFG4QEfqj",panel:"v5q8_iLeNbGy"};const k="all",w=r.forwardRef(((e,a)=>{let s=e.item,i=e.last,o=e.onClick,l=e.selected;const c=r.useCallback((()=>{o(s)}),[s,o]);return r.createElement(C.j,{ref:a,title:s.title,selected:l,last:i,icon:s.id===k?null:r.createElement(d.JO,{className:n(A.assetIcon),size:"large",src:s.icon||d.DI}),onClick:c})}));w.displayName="FilterAssetPanelItem";const N=e=>{let a=e.assetList,s=e.selectedAsset,n=e.setFilter,c=e.filterSearchItems;const d=r.useState(""),m=i(d,2),p=m[0],h=m[1],v=p?c(p,a):a,g=r.useRef(null),f=r.useRef(null),E=r.useCallback((e=>{e.id===k?n(null):n(e)}),[n]),S=r.useCallback((e=>{h(e)}),[]);return r.useLayoutEffect((()=>{g.current&&f.current&&(g.current.scrollTop=f.current.getBoundingClientRect().top-g.current.getBoundingClientRect().top)}),[g,f]),r.createElement("div",null,r.createElement("div",{className:A.search},r.createElement(_,{value:p,onChange:S})),r.createElement(o.Xs,{className:A.scroll,ref:g},!p&&r.createElement(w,{key:k,item:{id:k,title:l.NW.formatMessage({id:"trades_history_all_assets_filter_title",defaultMessage:"All Assets"})},onClick:E,selected:null===s}),p&&!(null!=v&&v.length)&&r.createElement("div",{className:A.stub},r.createElement(b,null)),null==v?void 0:v.map(((e,a)=>{const i=a===v.length-1;return r.createElement(w,{key:e.id,last:i,item:e,onClick:E,ref:s===e.id?f:null,selected:s===e.id})})),r.createElement(u.F,{scrollRef:g,className:A.scrollTopButton})))};N.displayName="FilterAssetPanel";const R=r.memo((e=>{let a=e.filterId,s=e.activeFilterId,i=e.panelContainerRef,n=e.filter,o=e.assetList,l=e.filterSearchItems,d=e.onClick,u=e.onSetFilter;const m=a===s,p=r.useMemo((()=>o.sort(((e,a)=>e.title>a.title?1:-1))),[o]),h=r.useCallback((e=>{u(e),d(a)}),[u,a,d]),v=r.useCallback((()=>{d(a)}),[d,a]);return r.createElement(T.w,{panelContainerRef:i,label:(null==n?void 0:n.title)||r.createElement(c._,{id:"trades_history_all_assets_filter_title",defaultMessage:"All Assets"}),panelTitle:r.createElement(c._,{id:"assets",defaultMessage:"Assets"}),panelContent:r.createElement(N,{assetList:p,selectedAsset:(null==n?void 0:n.id)||null,setFilter:h,filterSearchItems:l}),panelClassName:A.panel,active:!(null==n||!n.id)||m,open:m,onClick:v})}));R.displayName="FilterAsset"},19638:(e,a,s)=>{"use strict";s.d(a,{f:()=>c});var i=s(27378),r=s(11558),n=s(33148),o=s(64915);const l=e=>{let a=e.item,s=e.onClick,n=e.selected,o=e.last;const l=i.useCallback((()=>{s(a)}),[a,s]);return i.createElement(r.j,{title:a.title,selected:n,icon:a.icon,last:o,onClick:l})};l.displayName="FilterDefaultPanelItem";const c=e=>{let a=e.filterId,s=e.activeFilterId,r=e.panelContainerRef,c=e.selectedId,d=e.list,u=e.title,m=e.onClick,p=e.onSetFilter,h=e.defaultItemId;const v=a===s,g=i.useMemo((()=>d.find((e=>e.id===c))),[d,c]),_=i.useCallback((e=>{p(e),m(a)}),[p,a,m]),f=i.useCallback((()=>{m(a)}),[m,a]),E=i.useCallback((e=>{_(e)}),[_]);return i.createElement(n.w,{panelContainerRef:r,label:(null==g?void 0:g.titleLegend)||(null==g?void 0:g.title),panelTitle:u,panelContent:i.createElement(o.v.List,null,null==d?void 0:d.map(((e,a)=>{const s=a===d.length-1;return i.createElement(l,{key:e.id,item:e,onClick:E,selected:c===e.id,last:s})}))),active:!!c&&c!==h||v,open:v,onClick:f})};c.displayName="FilterDefault"},64915:(e,a,s)=>{"use strict";s.d(a,{v:()=>w});var i=s(27378),r=s(17302),n=s(77740),o=s(60042),l="_2OgcgDqYtg1N",c="_3c2C-67M6yVa",d="_3CpBLbZXvJbi",u="_1KKwuCqKwnRk",m="_3E6GQ1DPWwpl",p="gL_shpIXdk28",h="_28Yx6WkGV6UG",v="_1OYJ4DUthCJf",g="_3JGGLskfsju0",_="CHQ8rLbDnttc",f="hSe2wgmmW9lc",E="_3zfBgKoIK0-b";const S=e=>{let a=e.children;return i.createElement("div",{className:_},a)};S.displayName="List";const y=e=>{let a=e.active,s=e.className,r=e.title,n=e.children;return a?i.createElement("div",{className:o(h,s)},i.createElement("h3",{className:v},r),n):null};y.displayName="Panel";const b=e=>{let a=e.label,s=e.active,o=e.onClick;return i.createElement("div",{className:m},i.createElement(r.Af,{label:i.createElement("div",{className:g},a),endIcon:i.createElement(n.BDo,null),active:s,onClick:o}))};b.displayName="Chip";const C=e=>{let a=e.active,s=e.onClick;return i.createElement("button",{className:o(f,a?E:""),onClick:s},i.createElement(n.MS7,null))};C.displayName="ReportButton";const T=e=>{let a=e.containerRef;return i.createElement("div",{className:o(p),ref:a})};T.displayName="PanelContainer";const A=e=>{let a=e.children;return i.createElement("div",{className:d},a)};A.displayName="Report";const k=e=>{let a=e.children;return i.createElement("div",{className:u},a)};k.displayName="Filters";k.displayName="FiltersWrapper";const w=e=>{let a=e.children;return i.createElement("div",{className:l},a)};w.Chip=b,w.Panel=y,w.PanelContainer=T,w.List=S,w.ReportButton=C,w.Report=A,w.Filters=k,w.FiltersWrapper=e=>{let a=e.children;return i.createElement("div",{className:c},a)},w.displayName="FilterLayout"},11558:(e,a,s)=>{"use strict";s.d(a,{j:()=>d});var i=s(27378),r=s(77740),n=s(17302),o="_3E3ZG6GMHf8X",l="T58GidxhA9Ao",c="_3oHiKG52hrcg";const d=i.forwardRef(((e,a)=>{let s=e.id,d=e.icon,u=e.last,m=e.title,p=e.onClick,h=e.selected;const v=i.useCallback((()=>{p(s)}),[s,p]);return i.createElement("div",null,i.createElement(n.kc,{borderRadius:0},i.createElement(n.zx,{ref:a,color:"neutral",endIcon:h?i.createElement(r.NOm,{className:c}):null,fullWidth:!0,horizontalAlign:"start",startIcon:d||null,type:"button",variant:"flat",onClick:v},i.createElement("span",{className:o},i.createElement(n.xv,{variant:"M / Regular",color:h?"contrast-alpha":"contrast-beta",overflow:"ellipsis"},m)))),u?null:i.createElement("div",{className:l},i.createElement(n.iz,{margin:0})))}));d.displayName="FilterListItem"},66001:(e,a,s)=>{"use strict";s.d(a,{n:()=>_});var i=s(2243),r=s(27378),n=s(17302),o=s(82844),l=s(33148);const c=e=>{const a=(e=>{const a=r.useReducer((e=>e+1),0),s=i(a,2)[1],n=r.useRef(null),o=e.replace,l=e.append,c=o?o(e.format(e.value)):e.format(e.value),d=r.useRef(!1);return r.useLayoutEffect((()=>{if(null===n.current)return;const a=i(n.current,5),r=a[0],d=a[1],u=a[2],m=a[3],p=a[4];let h=r;n.current=null;const v=m&&p,g=h.slice(d.selectionStart||0).search(e.accept||/\d/g),_=-1!==g?g:0,f=a=>(a.match(e.accept||/\d/g)||[]).join(""),E=f(h.substr(0,d.selectionStart||0)),S=e=>{let a=0,s=0;for(let i=0;i!==E.length;++i){let r=e.indexOf(E[i],a)+1,n=f(e).indexOf(E[i],s)+1;n-s>1&&(r=a,n=s),s=Math.max(n,s),a=Math.max(a,r)}return a};if(!0===e.mask&&u&&!p){let e=S(h);const a=f(h.substr(e))[0];e=h.indexOf(a,e),h="".concat(h.substr(0,e)).concat(h.substr(e+1))}let y=e.format(h);null==l||d.selectionStart!==h.length||p||(u?y=l(y):""===f(y.slice(-1))&&(y=y.slice(0,-1)));const b=o?o(y):y;return c===b?s():e.onChange(b),()=>{let a=S(y);if(null!==e.mask&&(u||m&&!v))for(;y[a]&&""===f(y[a]);)a+=1;d.selectionStart=d.selectionEnd=a+(v?1+_:0)}})),r.useEffect((()=>{const e=e=>{"Delete"===e.code&&(d.current=!0)},a=e=>{"Delete"===e.code&&(d.current=!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",a)}}),[]),{value:null!==n.current?n.current[0]:c,onChange:a=>{if("number"===a.target.type)return void console.error("Rifm does not support input type=number, use type=tel instead.");if("date"===a.target.type)return void console.error("Rifm does not support input type=date.");const i=a.target.value;n.current=[i,a.target,i.length>c.length,d.current,c===e.format(i)];{const a=e.format(i);i!==a&&i.toLowerCase()===a.toLowerCase()&&console.warn("Case enforcement does not work with format. Please use replace={value => value.toLowerCase()} instead")}s()}}})(e);return e.children(a)},d=(e,a,s)=>{const r=i(s,2),n=r[0],o=r[1],l=((e,a,s)=>{const r=i(s,4),n=r[2],o=r[3],l=(e=>(e.match(/\d+/g)||[]).join(""))(e);return l.split("").reduce(((e,s,i)=>i===n||i===o?"".concat(e).concat(a).concat(s):"".concat(e).concat(s)),"").substr(0,10)})(e,a,s);if(e.endsWith(a)){if(l.length===n)return"".concat(l).concat(a);if(l.length===o)return"".concat(l).concat(a)}return l},u=[[4,7,4,6],[2,7,2,6],[2,5,2,4]],m=e=>{let a=e.childrenProxy,s=e.onChange;return a({value:e.value,onChange:r.useCallback(((e,a)=>{s(a)}),[s])})},p=e=>{let a=e.value,s=e.children,n=e.pattern,o=e.onChange;const l=r.useState(a),p=i(l,2),h=p[0],v=p[1],g=r.useMemo((()=>{const e=/[^(DYM)]+/.exec(n);return e?e[0]:"/"}),[n]),_=r.useMemo((()=>{const e=(e=>(e.match(/D|Y|M+/g)||[]).join(""))(n).indexOf("Y");return-1!==e&&e<3?e:2}),[n]),f=r.useCallback((e=>{v(e),o&&o(e)}),[o]),E=r.useCallback((e=>d(e,g,u[_])),[g,_]),S=r.useCallback((e=>((e,a,s)=>{const r=i(s,2),n=r[0],o=r[1];return e.length===n||e.length===o?"".concat(e).concat(a):e})(e,g,u[_])),[g,_]);return r.useEffect((()=>{v(a)}),[a]),r.createElement(c,{accept:/\d+/g,mask:10<=a.length,format:E,append:S,value:h,onChange:f},(e=>{let a=e.value,i=e.onChange;return r.createElement(m,{childrenProxy:s,value:a,onChange:i})}))};p.displayName="DateInput";var h=s(34902);const v=e=>{let a=e.type,s=e.example;return"time"===a?r.createElement(o._,{defaultMessage:"The date must be later than the start date",id:"trades_history_range_end_less_start_error"}):r.createElement(o._,{defaultMessage:"Enter the date in {date_format} format",id:"trades_history_range_format_error",values:{date_format:s}})};v.displayName="Error";const g=e=>{let a=e.form,s=e.to,l=e.pattern,c=e.placeholder,d=e.setFilter;const u=r.useMemo((()=>{const e=/[^(DYM)]+/.exec(l);return e?e[0]:"/"}),[l]),m=r.useState(a?(0,h.o)(a,l):""),g=i(m,2),_=g[0],f=g[1],E=r.useState(s?(0,h.o)(s,l):""),S=i(E,2),y=S[0],b=S[1],C=r.useState(null),T=i(C,2),A=T[0],k=T[1],w=r.useState(null),N=i(w,2),R=N[0],I=N[1],D=r.useCallback(((e,a)=>!(e&&!a)),[]),O=r.useCallback(((e,a)=>!(e&&a&&e>a)),[]),L=r.useCallback((()=>{const e=(0,h.F)(_,l,u,!0),a=(0,h.F)(y,l,u,!1),s={},i=!D(_,e),r=!D(y,a),n=!O(e,a);i&&I("format"),r&&k("format"),!r&&n&&k("time"),i||r||n||(e&&(f((0,h.o)(e,l)),s.from=e),a&&(b((0,h.o)(a,l)),s.to=a),d(e||a?s:null))}),[_,y,l,u,d,D,O]),M=r.useCallback((()=>{f(""),b("")}),[]),P=r.useCallback((e=>{if(R){const a=(0,h.F)(e,l,u,!0);D(e,a)&&I(null)}f(e)}),[D,R,l,u]),x=r.useCallback((e=>{if(A){const a=(0,h.F)(_,l,u,!0),s=(0,h.F)(e,l,u,!1);D(e,s)&&O(a,s)&&k(null)}b(e)}),[_,D,O,A,l,u]),F=r.useCallback((e=>{"Enter"===e.key&&L()}),[L]);return r.createElement("div",null,r.createElement(n.xu,{gap:"xl"},r.createElement(n.xu,{gap:"l"},r.createElement(p,{value:_,pattern:l,onChange:P},(e=>{let a=e.value,s=e.onChange;return r.createElement(n.oH,{name:"filter-from",inputPlaceholder:c,placeholder:r.createElement(o._,{id:"trades_history_time_selection_from_title",defaultMessage:"From"}),floatingLabel:!0,type:"text",value:a,error:R?r.createElement(v,{type:R,example:c}):null,fullWidth:!0,onChange:s,onKeyDown:F})})),r.createElement(p,{value:y,pattern:l,onChange:x},(e=>{let a=e.value,s=e.onChange;return r.createElement(n.oH,{name:"filter-to",inputPlaceholder:c,placeholder:r.createElement(o._,{id:"trades_history_time_selection_to_title",defaultMessage:"To"}),floatingLabel:!0,type:"text",value:a,error:A?r.createElement(v,{type:A,example:c}):null,fullWidth:!0,onChange:s,onKeyDown:F})}))),r.createElement(n.xu,{gap:"l",direction:"row",horizontalAlign:"space-between"},r.createElement(n.zx,{size:"s",onClick:M,variant:"secondary",fullWidth:!0,disabled:!_&&!y},r.createElement(o._,{id:"trades_history_time_selection_reset_button",defaultMessage:"Reset"})),r.createElement(n.zx,{size:"s",onClick:L,fullWidth:!0},r.createElement(o._,{id:"apply",defaultMessage:"Apply"})))))};g.displayName="FilterPeriodPanelPanel";const _=e=>{let a=e.filterId,s=e.activeFilterId,i=e.panelContainerRef,n=e.filter,c=e.pattern,d=e.placeholder,u=e.onClick,m=e.onSetFilter;const p=a===s,v=r.useCallback((e=>{m(e),u(a)}),[m,a,u]),_=r.useCallback((()=>{u(a)}),[u,a]),f=r.useMemo((()=>null!=n&&n.from||null!=n&&n.to?"".concat(null!=n&&n.from?(0,h.o)(n.from,c):"...","-").concat(null!=n&&n.to?(0,h.o)(n.to,c):"..."):r.createElement(o._,{id:"trades_history_all_time_filter_title",defaultMessage:"All Time"})),[n,c]);return r.createElement(l.w,{panelContainerRef:i,label:f,panelTitle:r.createElement(o._,{id:"trades_history_range_selection_title",defaultMessage:"Date Range"}),panelContent:r.createElement(g,{placeholder:d,pattern:c,form:null==n?void 0:n.from,to:null==n?void 0:n.to,setFilter:v}),active:!(null==n||!n.from)||!(null==n||!n.to)||p,open:p,onClick:_})};_.displayName="FilterAsset"},34902:(e,a,s)=>{"use strict";s.d(a,{F:()=>d,o:()=>c});var i=s(49491);function r(e){const a="".concat(e);return 1===a.length?"0".concat(a):a}function n(e,a,s){return e>=a&&e<=s}function o(e){const a=n(e.Y,2e3,3e3),s=n(e.M,0,11),i=a&&s?32-new Date(e.Y,e.M,32).getDate():31;return n(e.D,1,i)&&s&&a}function l(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";const r=e.split(s),n=a.split(s);if(3===r.length&&3===n.length){const e=r.reduce(((e,a,s)=>{const r=n[s],o=Number(a);if(isNaN(o))return e;switch(r){case"D":return i(i({},e),{},{D:o});case"M":return i(i({},e),{},{M:o-1});case"Y":return i(i({},e),{},{Y:o});default:return e}}),{D:0,M:0,Y:0});if(o(e))return e}}function c(e,a){const s=function(e){const a=new Date(1e3*e);return{D:a.getDate(),M:a.getMonth()+1,Y:a.getFullYear()}}(e),i=s.D,n=s.M,o=s.Y;return a.replace("D",r(i)).replace("M",r(n)).replace("Y",o.toString())}function d(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",i=arguments.length>3?arguments[3]:void 0;const r=l(e,a,s),n=new Date;return r&&(n.setDate(r.D),n.setMonth(r.M),n.setFullYear(r.Y),n.setFullYear(r.Y),i?(n.setHours(0),n.setMinutes(0),n.setSeconds(0)):(n.setHours(23),n.setMinutes(59),n.setSeconds(59))),r?Math.floor(n.getTime()/1e3):void 0}},43427:(e,a,s)=>{"use strict";s.d(a,{$:()=>o});var i=s(27378),r=s(64915),n=s(69558);const o=e=>{let a=e.active,s=e.open,o=e.panelContainerRef,l=e.panelTitle,c=e.panelContent,d=e.onClick;return i.createElement(n.u,{triggerComponent:i.createElement(r.v.ReportButton,{active:a,onClick:d}),open:s,panelContainerRef:o,panelTitle:l,panelContent:c})};o.displayName="HistoryReport"},42537:(e,a,s)=>{"use strict";s.d(a,{$e:()=>g});var i=s(27378),r=s(17302),n=s(82844),o=s(95029),l=s(34902),c="_6YiwmM3XmJMy",d="lo2Vkr86PwZz";const u=e=>{let a=e.email,s=e.onClose;return i.createElement(r.xu,{fullHeight:!0,gap:"xxl",padding:["l",0,0],direction:"column",verticalAlign:"space-between"},i.createElement(r.xu,{gap:"xl",horizontalAlign:"center"},i.createElement("svg",{className:d,width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_2567_562020)"},i.createElement("circle",{cx:"32",cy:"32",r:"30",stroke:"currentColor",strokeWidth:"4"}),i.createElement("path",{d:"M21.5001 32L28.5001 39L42.5001 25",stroke:"#1FBF75",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_2567_562020"},i.createElement("rect",{width:"64",height:"64",fill:"none"})))),i.createElement(r.xv,{variant:"M / Regular",color:"contrast-beta"},"Report Send by ",a)),i.createElement(r.zx,{onClick:s,variant:"secondary",fullWidth:!0},i.createElement(n._,{id:"ok",defaultMessage:"Ok"})))};u.displayName="SuccessStub";const m=e=>{let a=e.onClose;return i.createElement(r.xu,{gap:"l"},i.createElement(r.xv,{variant:"M / Regular",color:"contrast-beta"},"Вы не можете отправить пустую выдачу истории. Измените параметры фильтров."),i.createElement(r.zx,{onClick:a,variant:"secondary",fullWidth:!0},"Got it"))};m.displayName="NoDataStub";const p=e=>{let a=e.account;return a?i.createElement(o.nN,{data:i.createElement(n._,{id:"cabinet_account_number",defaultMessage:"Account"}),value:a}):null};p.displayName="Account";const h=e=>{let a=e.asset;return i.createElement(o.nN,{data:i.createElement(n._,{id:"active",defaultMessage:"Asset"}),value:a||i.createElement(n._,{id:"trades_history_all_assets_filter_title",defaultMessage:"All Assets"})})};h.displayName="Asset";const v=e=>{let a=e.show,s=e.from,r=e.to;return a?i.createElement(o.nN,{data:i.createElement(n._,{id:"trades_history_range_selection_title",defaultMessage:"Date Range"}),value:"".concat(s,"-").concat(r)}):null};v.displayName="Period";const g=e=>{let a=e.pattern,s=void 0===a?"D.M.Y":a,o=e.account,d=e.asset,g=e.from,_=e.to,f=e.sent,E=void 0===f||f,S=e.email,y=e.emptyHistory,b=e.sending,C=e.onCancel,T=e.onSend,A=e.onReset;const k=i.useMemo((()=>g?(0,l.o)(g,s):"..."),[g,s]),w=i.useMemo((()=>_?(0,l.o)(_,s):"..."),[_,s]);return E?i.createElement("div",{className:c},i.createElement(u,{email:S,onClose:A})):y?i.createElement(m,{onClose:C}):i.createElement("div",{className:c},i.createElement(r.xu,{gap:"xl",fullHeight:!0,direction:"column",verticalAlign:"space-between"},i.createElement(r.xv,{variant:"M / Regular"},"Send a report by email ",S," with parameters:"),i.createElement(r.xu,{gap:"l"},i.createElement(p,{account:o}),i.createElement(h,{asset:d}),i.createElement(v,{show:!(!g&&!_),from:k,to:w})),i.createElement(r.xu,{gap:"l",direction:"row",horizontalAlign:"space-between"},i.createElement(r.zx,{onClick:C,variant:"secondary",fullWidth:!0},i.createElement(n._,{id:"cancel",defaultMessage:"Cancel"})),i.createElement(r.zx,{loading:b,onClick:T,fullWidth:!0},i.createElement(i.Fragment,null,"Send")))))};g.displayName="HistoryReportPanel"},55917:(e,a,s)=>{"use strict";s.d(a,{F:()=>c});var i=s(27378),r=s(77740),n="_2xc7-sb18ONx",o="_1D5e9I0mHWVN",l="sGI-6UeaM1tz";const c=e=>{let a=e.text;return i.createElement("div",{className:n},i.createElement("div",{className:o},i.createElement(r.emY,null)),i.createElement("div",{className:l},a))};c.displayName="NoDeals"},69558:(e,a,s)=>{"use strict";s.d(a,{u:()=>o});var i=s(27378),r=s(31542),n=s(64915);const o=e=>{let a=e.open,s=e.triggerComponent,o=e.panelContainerRef,l=e.panelTitle,c=e.panelContent,d=e.className;return i.createElement(i.Fragment,null,s,a&&o.current?(0,r.createPortal)(i.createElement(n.v.Panel,{active:!0,title:l,className:d},c),o.current):null)};o.displayName="PortalPanel"},1786:(e,a,s)=>{"use strict";s.d(a,{f:()=>o});var i=s(27378),r=s(95472),n=s(45797);const o=e=>{let a=e.value,s=e.className;return i.createElement("span",{className:s},(0,r.L)(a,{d:n.NW.formatMessage({id:"day",defaultMessage:"day"}),h:n.NW.formatMessage({id:"hour",defaultMessage:"hour"}),m:n.NW.formatMessage({id:"min",defaultMessage:"min"}),s:n.NW.formatMessage({id:"sec",defaultMessage:"sec."})}))};o.displayName="FormatDuration"},83325:(e,a,s)=>{"use strict";s.d(a,{J:()=>u});var i=s(2243),r=s(27378),n=s(60042),o=s(17302),l="_2rd_l_8BEtcP",c="_2xrh1TyVet6I",d="_1--hMRb1vfnY";const u=r.memo((e=>{let a=e.delay,s=void 0===a?0:a,u=e.showAbove,m=void 0===u||u,p=e.count,h=void 0===p?1:p,v=e.duration,g=void 0===v?1250:v,_=e.trigger,f=void 0===_?0:_,E=e.showInitial,S=void 0===E||E,y=e.onAnimationStop;const b=r.useState(S),C=i(b,2),T=C[0],A=C[1],k=(0,o.tm)(),w=r.useRef(f),N=r.useRef(!1);return r.useEffect((()=>{let e=0;if("number"==typeof h&&(w.current!==f||S&&!N.current)){A(!0),w.current=f,N.current=!0;const a=g*h+500;e=window.setTimeout((()=>{k.current&&(A(!1),y&&y())}),a)}return()=>clearTimeout(e)}),[f,h,g,k,y,N,S]),T?r.createElement("div",{className:n(l,m?c:"")},r.createElement("div",{className:d,style:{animationDelay:"".concat(s,"ms"),animationDuration:"".concat(g,"ms"),animationIterationCount:h}})):null}));u.displayName="HighlightAnimation"},25481:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"lClX_2xhI48_",host_focus:"_23rsgbxtNcic"}},64367:(e,a,s)=>{"use strict";s.d(a,{G:()=>z});var i=s(27378),r=s(17302),n=s(49491),o=s(14936),l=s(60042),c=s(25481);const d=["activeFocus","children","className","dataTest"],u=e=>{let a=e.activeFocus,s=e.children,r=e.className,u=e.dataTest,m=o(e,d);return i.createElement("button",n(n({},m),{},{className:l(c.Z.host,{[c.Z.host_focus]:a},r),"data-test":u||"colorPickerButton"}),s)};var m="_3fNNn9N-0sbC",p="_2xREDXk1XsSp";const h=e=>{let a=e.color;return i.createElement("span",{className:p,style:{backgroundColor:a}})};h.displayName="ColorCircle";const v=e=>{let a=e.colorIndex,s=e.color,r=e.onChange,n=e.selected,o=e.dataTest;const l=(0,i.useCallback)((()=>{r(a)}),[a,r]);return i.createElement(u,{activeFocus:n,onClick:l,"data-test":o},i.createElement(h,{color:"#".concat(s)}))};v.displayName="ColorPickerButton";const g=e=>i.createElement("div",{className:m,"data-test":"colorPicker"},e.availableLineColors.map(((a,s)=>i.createElement(v,{dataTest:"colorButton",key:a,colorIndex:s,color:a,onChange:e.onChange,selected:e.value===a}))));g.displayName="ColorPicker";var _=s(77740);const f=()=>i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 11.9996C1.5 11.4473 1.94772 10.9996 2.5 10.9996H21.5C22.0523 10.9996 22.5 11.4473 22.5 11.9996C22.5 12.5519 22.0523 12.9996 21.5 12.9996H2.5C1.94772 12.9996 1.5 12.5519 1.5 11.9996Z",fill:"currentColor"}),i.createElement("path",{d:"M12 1.99963C12.5523 1.99963 13 2.44735 13 2.99963L13 9.99963H11L11 2.99963C11 2.44735 11.4477 1.99963 12 1.99963Z",fill:"currentColor"}),i.createElement("path",{d:"M9 9.99963L9 4.99963C9 4.44735 8.55229 3.99963 8 3.99963C7.44772 3.99963 7 4.44735 7 4.99963L7 9.99963H9Z",fill:"currentColor"}),i.createElement("path",{d:"M5 9.99963L5 7.99963C5 7.44735 4.55229 6.99963 4 6.99963C3.44772 6.99963 3 7.44735 3 7.99963V9.99963H5Z",fill:"currentColor"}),i.createElement("path",{d:"M15 13.9996L15 20.9996C15 21.5519 15.4477 21.9996 16 21.9996C16.5523 21.9996 17 21.5519 17 20.9996L17 13.9996H15Z",fill:"currentColor"}),i.createElement("path",{d:"M19 13.9996V18.9996C19 19.5519 19.4477 19.9996 20 19.9996C20.5523 19.9996 21 19.5519 21 18.9996V13.9996H19Z",fill:"currentColor"}));f.displayName="CenteredChartIcon";const E=()=>i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{cx:"3",cy:"17.9996",r:"1",fill:"currentColor"}),i.createElement("path",{d:"M6.17285 15.2211C6.17285 15.7734 5.72514 16.2211 5.17285 16.2211C4.62057 16.2211 4.17285 15.7734 4.17285 15.2211C4.17285 14.6688 4.62057 14.2211 5.17285 14.2211C5.72514 14.2211 6.17285 14.6688 6.17285 15.2211Z",fill:"currentColor"}),i.createElement("path",{d:"M8.5 12.9996C8.5 13.5519 8.05228 13.9996 7.5 13.9996C6.94772 13.9996 6.5 13.5519 6.5 12.9996C6.5 12.4473 6.94772 11.9996 7.5 11.9996C8.05228 11.9996 8.5 12.4473 8.5 12.9996Z",fill:"currentColor"}),i.createElement("path",{d:"M11.5 13.9996C11.5 14.5519 11.0523 14.9996 10.5 14.9996C9.94772 14.9996 9.5 14.5519 9.5 13.9996C9.5 13.4473 9.94772 12.9996 10.5 12.9996C11.0523 12.9996 11.5 13.4473 11.5 13.9996Z",fill:"currentColor"}),i.createElement("circle",{cx:"13",cy:"11.9996",r:"1",fill:"currentColor"}),i.createElement("circle",{cx:"14",cy:"8.99963",r:"1",fill:"currentColor"}),i.createElement("path",{d:"M16.5 5.99963C16.5 6.55192 16.0523 6.99963 15.5 6.99963C14.9477 6.99963 14.5 6.55192 14.5 5.99963C14.5 5.44735 14.9477 4.99963 15.5 4.99963C16.0523 4.99963 16.5 5.44735 16.5 5.99963Z",fill:"currentColor"}),i.createElement("circle",{cx:"17",cy:"8.99963",r:"1",fill:"currentColor"}),i.createElement("circle",{cx:"18",cy:"11.9996",r:"1",fill:"currentColor"}),i.createElement("circle",{cx:"21",cy:"13.9996",r:"1",fill:"currentColor"}));E.displayName="DottedChartIcon";const S=()=>i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.1863 5.41848C16.4934 4.98854 17.082 4.87169 17.53 5.15172L21.53 7.65172C21.8224 7.83446 22 8.15493 22 8.49972V17.9996C22 18.5519 21.5523 18.9996 21 18.9996H3C2.44772 18.9996 2 18.5519 2 17.9996V15.4997C2 15.2345 2.10536 14.9802 2.29289 14.7926L6.29289 10.7926C6.57018 10.5153 6.98395 10.4257 7.35112 10.5634L11.6324 11.7939L16.1863 5.41848Z",fill:"currentColor"}));S.displayName="FilledChartIcon";var y="_1loa2aysFhqV",b="_1nfOxGMXnxbj",C="bPXl-ZMITmU6";const T={curve:i.createElement(_.mmp,null),area:i.createElement(S,null),dots:i.createElement(E,null),histogram:i.createElement(_.u9m,null),centered:i.createElement(f,null)},A=e=>{let a=e.dataTest,s=e.config,r=e.lineStyleId,n=e.onChange,o=e.selected;const c=(0,i.useCallback)((()=>{n(r)}),[n,r]);return i.createElement(u,{activeFocus:o,"data-test":a,onClick:c,className:l(b,{[C]:o})},T[s.name])};A.displayName="LineStyleButton";const k=e=>{let a=e.avalibleLineStyles,s=e.lineStylesConfig,r=e.value,n=e.onChange;const o=(0,i.useCallback)((e=>{n(e)}),[n]);return i.createElement("div",{className:y,"data-test":"lineStylePicker"},a.map((e=>i.createElement(A,{key:e,lineStyleId:e,config:s[e],onChange:o,selected:r===e,dataTest:"lineStyleButton"}))))};k.displayName="LineStylePicker";var w=s(65022);var N="_22Hv2teW9vEX";const R=e=>{let a=e.className,s=e.children;return i.createElement("h2",{"data-test":"instrumentsHeader",className:l(a,N)},s)};R.displayName="Header";var I=s(2243),D="_2-MN0UU8U5Rc";const O=e=>{let a=e.children,s=e.content,o=e.placement,l=e.disabled;const c=(0,i.useState)(!1),d=I(c,2),u=d[0],m=d[1],p=(0,i.useCallback)((()=>{m(!0)}),[m]),h=(0,i.useCallback)((()=>{m(!1)}),[m]);return i.createElement(r.u,{placement:o,triggerOnHover:!1,transition:!0,triggerOnTap:!l,interactive:!0,style:{zIndex:101},content:s,open:u,onOpen:p,onClose:h},(e=>i.createElement("span",n({className:D},e),a(u))))};O.displayName="LineStyleForm";const L=()=>i.createElement("svg",{width:"20",height:"17",viewBox:"0 0 20 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8492 1.15044C18.2398 1.54096 18.2398 2.17413 17.8492 2.56465L16.0432 4.37072C16.1084 4.42355 16.1729 4.4767 16.2367 4.53011C17.6988 5.75548 18.8345 7.18457 19.5783 8.12059C19.6494 8.2101 19.717 8.2951 19.7809 8.37498C20.073 8.7402 20.073 9.25916 19.7809 9.62437C19.717 9.70426 19.6494 9.78926 19.5783 9.87877C18.8345 10.8148 17.6988 12.2439 16.2367 13.4692C14.6303 14.8154 12.5342 15.9997 10 15.9997C8.35465 15.9997 6.89394 15.5005 5.63206 14.7818L3.70711 16.7068C3.31658 17.0973 2.68342 17.0973 2.29289 16.7068C1.90237 16.3163 1.90237 15.6831 2.29289 15.2926L3.95683 13.6286C3.89156 13.5758 3.82706 13.5227 3.76333 13.4692C2.30115 12.2439 1.16553 10.8148 0.421721 9.87878C0.350588 9.78926 0.28304 9.70426 0.219131 9.62437C-0.0730437 9.25916 -0.0730437 8.7402 0.219131 8.37498C0.28304 8.2951 0.350589 8.21009 0.421721 8.12058C1.16553 7.18456 2.30115 5.75548 3.76333 4.53011C5.36967 3.18393 7.46583 1.99968 10 1.99968C11.6453 1.99968 13.1061 2.4989 14.3679 3.21752L16.435 1.15044C16.8256 0.759913 17.4587 0.759913 17.8492 1.15044ZM12.8886 4.69691C11.9959 4.26344 11.0325 3.99968 10 3.99968C8.11589 3.99968 6.46205 4.87793 5.04796 6.063C3.91317 7.014 2.99444 8.10851 2.27922 8.99968C2.99444 9.89085 3.91317 10.9854 5.04796 11.9364C5.15724 12.0279 5.26796 12.1177 5.38011 12.2054L12.8886 4.69691ZM7.11144 13.3024C8.0041 13.7359 8.96747 13.9997 10 13.9997C11.8841 13.9997 13.5379 13.1214 14.952 11.9364C16.0868 10.9854 17.0056 9.89085 17.7208 8.99968C17.0056 8.10851 16.0868 7.014 14.952 6.063C14.8428 5.97141 14.732 5.88166 14.6199 5.794L7.11144 13.3024Z",fill:"currentColor"}));L.displayName="HiddenEyeIcon";const M=()=>i.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.27922 6.99963C2.99444 7.8908 3.91317 8.98531 5.04796 9.93632C6.46205 11.1214 8.11589 11.9996 10 11.9996C11.8841 11.9996 13.5379 11.1214 14.952 9.93632C16.0868 8.98531 17.0056 7.8908 17.7208 6.99963C17.0056 6.10846 16.0868 5.01395 14.952 4.06295C13.5379 2.87788 11.8841 1.99963 10 1.99963C8.11589 1.99963 6.46205 2.87788 5.04796 4.06295C3.91317 5.01395 2.99444 6.10846 2.27922 6.99963ZM3.76333 2.53007C5.36967 1.18389 7.46583 -0.000366211 10 -0.000366211C12.5342 -0.000366211 14.6303 1.18389 16.2367 2.53007C17.6988 3.75544 18.8345 5.18452 19.5783 6.12054C19.6494 6.21005 19.717 6.29506 19.7809 6.37494C20.073 6.74016 20.073 7.25911 19.7809 7.62433C19.717 7.70421 19.6494 7.78921 19.5783 7.87872C18.8345 8.81474 17.6988 10.2438 16.2367 11.4692C14.6303 12.8154 12.5342 13.9996 10 13.9996C7.46583 13.9996 5.36967 12.8154 3.76333 11.4692C2.30115 10.2438 1.16553 8.81475 0.421721 7.87873C0.350588 7.78922 0.28304 7.70421 0.219131 7.62433C-0.0730437 7.25911 -0.0730437 6.74016 0.219131 6.37494C0.28304 6.29505 0.350589 6.21005 0.421721 6.12054C1.16553 5.18452 2.30115 3.75543 3.76333 2.53007ZM10 4.99963C8.89543 4.99963 8 5.89506 8 6.99963C8 8.1042 8.89543 8.99963 10 8.99963C11.1046 8.99963 12 8.1042 12 6.99963C12 5.89506 11.1046 4.99963 10 4.99963ZM6 6.99963C6 4.79049 7.79086 2.99963 10 2.99963C12.2091 2.99963 14 4.79049 14 6.99963C14 9.20877 12.2091 10.9996 10 10.9996C7.79086 10.9996 6 9.20877 6 6.99963Z",fill:"currentColor"}));M.displayName="VisibleEyeIcon";var P="_3t9HZydhcfOK";const x=e=>{let a=e.itemId,s=e.visibleDefault,r=e.onChange;const n=(0,i.useCallback)((()=>{r(a,{visibleDefault:!s})}),[s,r,a]);return i.createElement("button",{className:P,onClick:n,"data-test":"lineVisibilityButton"},s||void 0===s?i.createElement(M,null):i.createElement(L,null))};x.displayName="LineVisibility";const F={small:{width:"4px",height:"4px"},medium:{width:"6px",height:"6px"},large:{width:"8px",height:"8px"}},B=e=>{let a=e.size;return i.createElement("svg",n(n({},F[a]),{},{viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),i.createElement("circle",{cx:"4",cy:"3.99963",r:"4",fill:"currentColor"}))};B.displayName="CircleIcon";var Z="_1K96342KXXkC",U="_1LLuqb6YsEDy",H="_3UPXnkGbaeel";const G={1:i.createElement(B,{size:"small"}),3:i.createElement(B,{size:"medium"}),5:i.createElement(B,{size:"large"})},V=e=>{let a=e.dataTest,s=e.lineWidthValue,r=e.onChange,n=e.selected;const o=(0,i.useCallback)((()=>{r(s)}),[r,s]);return i.createElement(u,{activeFocus:n,"data-test":a,onClick:o,className:l(U,{[H]:n})},G[s]||G[1])};V.displayName="LineWidthButton";const W=e=>{let a=e.availableLineWidths,s=e.value,r=e.onChange;const n=(0,i.useCallback)((e=>{r(e)}),[r]);return i.createElement("div",{className:Z,"data-test":"lineStylePicker"},a.map(((e,a)=>i.createElement(V,{lineWidthValue:e,key:a,onChange:n,selected:e===s,dataTest:"lineWidthButton"}))))};W.displayName="LineWidthPicker";var j="_1-XNG-2nvfFE";const z=e=>{const a=(0,r.Fg)().dir;return i.createElement("div",{className:j,dir:a},e.children)};z.displayName="IndicatorForm",z.Step=e=>i.createElement(w.Y,{className:e.className,min:e.min,max:e.max,step:e.step,value:e.value,onChange:e.onChange,"data-test":"numberPicker"}),z.ColorPicker=g,z.LineStylePicker=k,z.Header=R,z.LineStyleForm=O,z.ColorCircle=h,z.LineVisibility=x,z.ConfigButton=u,z.LineWidthPicker=W},65022:(e,a,s)=>{"use strict";s.d(a,{Y:()=>c});var i=s(2243),r=s(27378),n=s(77740),o=s(82864);function l(e){let a=e.min,s=e.max,i=e.value,r=e.step;const n=Number(i);return Number.isNaN(n)?a:n>s?s:n<a?a:function(e,a){const s=e+Number.EPSILON;if(a%1==0)return Math.floor(s/a)*a;const i=a.toString().split(".")[1].length;return Number(parseFloat("".concat(Math.floor(s/a)*a)).toFixed(i))}(n,r)}const c=e=>{let a=e.min,s=e.max,c=e.step,d=e.value,u=e.onChange,m=e.className;const p=(0,r.useState)(d),h=i(p,2),v=h[0],g=h[1];(0,r.useEffect)((()=>{g(d)}),[d]);const _=(0,r.useCallback)((e=>{const a=e.target.value;if(""===a)g(a);else if(!Number.isNaN(Number(a))){const e=Number(a);g(e>s?s:a)}}),[s]),f=(0,r.useCallback)((()=>{const e=l({min:a,max:s,step:c,value:v});g(Number(e)),u(e)}),[v,a,s,c,u]),E=(0,r.useCallback)((()=>{""===v&&g(a);const e=l({min:a,max:s,step:c,value:Number(v)+c});g(e),u(e)}),[a,s,c,v,u]),S=(0,r.useCallback)((()=>{""===v&&g(a);const e=l({min:a,max:s,step:c,value:Number(v)-c});g(e),u(e)}),[a,s,c,v,u]),y=r.useCallback((e=>{"Enter"===e.key&&f()}),[f]);return r.createElement("div",{className:"".concat(o.Z.host," ").concat(m)},r.createElement("button",{className:o.Z.button,onClick:S,"data-test":"step-number-picker-minus"},r.createElement(n.fOs,null)),r.createElement("input",{className:o.Z.input,onBlur:f,onChange:_,onKeyPress:y,placeholder:"0",value:v,"data-test":"valueInputField"}),r.createElement("button",{className:o.Z.button,onClick:E,"data-test":"step-number-picker-plus"},r.createElement(n.iU,null)))}},82864:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"_3CesfsmNTbxD",input:"_17_ruaAmcVRK",button:"_1DYRltdxlTKA"}},86058:(e,a,s)=>{"use strict";s.d(a,{vf:()=>k,_d:()=>T});var i=s(49491),r=s(14936),n=s(27378),o=s(60042),l=s(29609),c=s(17302),d=s(77740),u="_2ls6MHc_7epB",m="_3iD71kaKZvea",p="_2CJcyG3VPu2I",h="_1mOV-0_BXXo4",v="_2wnXsGRC9bjC",g="_22F4TD_pqM-8",_="_2XV4ycSp7x9i",f="_3ClISLe2hTLy",E="_1ULky6--wMJM",S="_1N17-9ql4qvW",y="_3niy9QxD3Ahz";const b=["id","title","details","onClickEdit","readOnly","tooltipText","selected","onClickRemove","onExit","onMouseEnter","onMouseLeave"],C={enter:"L9P6qojjmwOk",enterActive:"gy2Afu1lvDtQ",exit:"_3hFaDUbOK7aH",exitActive:"MlNUUSi5B799"},T=n.createContext({scrollToRef:null}),A=e=>{let a=e.onClickEdit,s=e.title,i=e.details,r=e.readOnly;return n.createElement("button",{className:o(f,p,r&&g,r&&_),onClick:a},n.createElement("div",{className:o(v),"data-test":"tech-analysis-legend-title"},s),i)},k=e=>{let a=e.id,s=e.title,p=e.details,v=e.onClickEdit,g=e.readOnly,_=void 0!==g&&g,k=e.tooltipText,w=e.selected,N=e.onClickRemove,R=e.onExit,I=e.onMouseEnter,D=e.onMouseLeave,O=r(e,b);const L=n.useContext(T),M=n.useRef(null),P=n.useCallback((()=>{null==v||v(a)}),[a,v]),x=n.useCallback((()=>{null==N||N(a)}),[a,N]),F=n.useCallback((e=>{e.style.width="".concat(e.getBoundingClientRect().width,"px"),null==R||R(e)}),[R]),B=n.useCallback((()=>{null==I||I(a)}),[a,I]),Z=n.useCallback((()=>{null==D||D(a)}),[a,D]);n.useLayoutEffect((()=>{M.current&&L.scrollToRef&&L.scrollToRef(M)}),[L]);const U=n.useCallback((()=>n.createElement("div",{className:y,onMouseEnter:B,onMouseLeave:Z},n.createElement(A,{readOnly:_,title:s,details:p,onClickEdit:P}),n.createElement("button",{className:o(f,E),onClick:x,"data-test":"tech-analysis-legend-remove"},n.createElement(d.IT9,{className:S})))),[_,s,p,P,x,B,Z]);return n.createElement(l.Z,i(i({key:a,timeout:{enter:1200,exit:200},onExit:F},O),{},{classNames:C}),n.createElement("div",{ref:M,className:o(u,w&&h)},k?n.createElement(c.u,{placement:"bottom-start",content:k,arrow:!0,transition:!0,delay:300,distance:10,triggerOnHover:!0,triggerOnTap:!0,style:{zIndex:101}},(e=>n.createElement("div",i(i({},e),{},{className:m,onMouseEnter:B,onMouseLeave:Z}),n.createElement(U,null)))):n.createElement("div",{className:m,onMouseEnter:B,onMouseLeave:Z},n.createElement(U,null))))}},18829:(e,a,s)=>{"use strict";s.d(a,{H:()=>m});var i=s(27378),r=s(60042),n="_1kGxhngrQy-D",o="_1XV0UKiNh-Tp",l="wlEGOx9Xo8wD",c="_20laUK6XMFPc",d="_2jn5WAs4UdNM",u="_13aBMBdxmJkl";const m=e=>{let a=e.id,s=e.title,m=e.disabled,p=e.count,h=e.contentBefore,v=e.contentAfter,g=e.onClick;const _=i.useCallback((()=>{g&&g(a)}),[a,g]);return i.createElement("div",{className:r(n,m&&l),onClick:_,"data-test":"techanalysis-instrument-list-item"},h?i.createElement("div",{className:d},h):null,i.createElement("div",{className:o,"data-test":"techanalysis-instrument-list-item-title"},s,p?i.createElement("span",{className:c,"data-test":"techanalysis-instrument-list-item-count"}," ","• ",p):null),i.createElement("div",{className:u,"data-test":"techanalysis-instrument-list-item-content-after"},v))};m.displayName="InstrumentListItem"},1246:(e,a,s)=>{"use strict";s.d(a,{Y:()=>o});var i=s(27378),r=s(77740),n=s(14318);const o=()=>i.createElement(r._V1,{className:n.Z.host,"data-test":"instrument-locked"})},14318:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={host:"LndFpUJHO_HV"}},26739:(e,a,s)=>{"use strict";s.d(a,{F:()=>f});var i=s(2243),r=s(27378),n=s(64489),o=s(60042),l=s(49491),c=s(14936),d=s(17302),u=s(77740),m="_3yZqyAzyfTc7",p="_2AFpp0HJqEQN",h="_2T_0TLJx6JOF";const v=["className","onClick","onTop"],g=e=>{let a=e.className,s=e.onClick,i=e.onTop,n=void 0===i||i,g=c(e,v);return r.createElement("div",{className:o(m,n?p:h,a)},r.createElement(d.Ei,l({variant:"secondary",size:"s",onClick:s,icon:r.createElement(u.CzJ,null)},g)))};g.displayName="UpButton";var _="_1tjuBuMvMkSv";const f=e=>{let a=e.scrollRef,s=e.className;const l=r.useState(!1),c=i(l,2),d=c[0],u=c[1],m=(0,n.Z)((()=>{var e;const s=null==a||null===(e=a.current)||void 0===e?void 0:e.scrollTop;u(!!(s&&s>=100))}),100),p=r.useCallback((()=>{var e;return null==a||null===(e=a.current)||void 0===e?void 0:e.scrollTo({top:0,behavior:"smooth"})}),[a]);return r.useEffect((()=>{const e=null==a?void 0:a.current;if(e)return e.scrollTop>100&&u(!0),e.addEventListener("scroll",m),()=>{e.removeEventListener("scroll",m)}}),[m,a]),r.useEffect((()=>{const e=null==a?void 0:a.current;e&&e.scrollTop>100&&u(!0)}),[a]),r.createElement(g,{"data-test":"scroll-top-button",className:o(_,s),onTop:d,onClick:p})};f.displayName="AssetMenu(components)(ScrollTopButton)"},55255:(e,a,s)=>{"use strict";s.d(a,{u:()=>l});var i=s(49491),r=s(27378),n=s(29609),o=s(16626);const l=e=>{let a=e.TransitionProps,s=e.children;const l=r.useCallback((e=>{null==e||e.scrollTop,null==a||a.onEnter()}),[a]);return r.createElement(n.Z,i(i({appear:!0,classNames:{appear:o.Z.enter,appearActive:o.Z.enterActive,enter:o.Z.enter,enterActive:o.Z.enterActive,exit:o.Z.exit,exitActive:o.Z.exitActive},timeout:{enter:250,exit:250}},a),{},{onEnter:l}),s)}},16626:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var i={enter:"_1yS93gshwL1r",enterActive:"_2GDwch4bDxn4",exit:"_3Z9_W6FtO4kO",exitActive:"_ur5goBRrBOH"}},71822:(e,a,s)=>{"use strict";s.d(a,{W:()=>u});var i=s(2243),r=s(27378),n=s(84829),o=s(26739),l="_3jvmq-J2Ism2",c="_37d2A4M-pte1",d="HSo3R7dfV7RB";const u=e=>{let a=e.scrollRef,s=e.children;const d=r.useState(0),u=i(d,2),m=u[0],p=u[1],h=r.createRef(),v=r.createRef(),g=r.useCallback((0,n.Z)((()=>{if(h.current&&v.current&&a.current){var e;const s=v.current.getBoundingClientRect().height,i=h.current.getBoundingClientRect().height;s+(null===(e=a.current)||void 0===e?void 0:e.scrollTop)+10>i&&p((new Date).getTime())}}),300),[h,v,a]);return r.useEffect((()=>{const e=null==a?void 0:a.current;if(e)return e.addEventListener("scroll",g),()=>{e.removeEventListener("scroll",g)}}),[g,a]),r.createElement("div",{className:l,ref:v},r.createElement("div",{ref:h},s(m),r.createElement(o.F,{scrollRef:a,className:c})))};u.Tabs=e=>{let a=e.children;return r.createElement("div",{className:d},a)},u.displayName="TradePanelLayout"},52261:(e,a,s)=>{"use strict";s.d(a,{a:()=>o});var i=s(2243),r=s(27378),n=s(17302);function o(e){const a=r.useState(""),s=i(a,2),o=s[0],l=s[1],c=(0,n.tm)();return r.useEffect((()=>{e.then((e=>{c.current&&l(e.default)}))}),[e,c]),o}},36732:(e,a,s)=>{"use strict";s.d(a,{A7:()=>r.A,M8:()=>F.M,Pr:()=>N.P,rO:()=>O.j,p1:()=>D.V,nk:()=>I.H,rk:()=>L.n,Pq:()=>M.V,bD:()=>w.b,bC:()=>u,h2:()=>x.h,bY:()=>H.b,l0:()=>Z.l,yJ:()=>U.y,O2:()=>A.O,j7:()=>T.j,iz:()=>v.i,RH:()=>g.RH,ev:()=>W.e,Tj:()=>_.T,fb:()=>E.f,vO:()=>S.v,nZ:()=>f.n,f8:()=>P.f,J0:()=>V.J,$9:()=>y.$,$e:()=>b.$e,Ts:()=>R.J,GY:()=>i.G,vf:()=>h.vf,_d:()=>h._d,H_:()=>m.H,Y1:()=>p.Y,mv:()=>k.m,t2:()=>B.t,xn:()=>G.u,Wd:()=>C.W,aN:()=>c.a});var i=s(64367),r=s(54681),n=s(49491),o=s(14936),l=s(27378),c=s(52261);const d=["loader"],u=e=>{let a=e.loader,s=o(e,d);const i=(0,c.a)(a);return l.createElement("img",n({src:i.length>1?i:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII="},s))};u.displayName="AsyncImage";var m=s(18829),p=s(1246),h=s(86058),v=s(23301),g=s(33400),_=s(38235),f=s(66001),E=s(19638),S=s(64915),y=s(43427),b=s(42537),C=s(71822),T=s(46345),A=s(19342),k=s(37578),w=s(18562),N=s(26553),R=s(32696),I=s(54759),D=s(19202),O=s(2791),L=s(64804),M=s(71301),P=s(1786),x=s(10137),F=s(96091),B=s(31076),Z=s(30892),U=s(68713),H=s(80454),G=s(55255),V=s(83325),W=s(28166)},74375:(e,a,s)=>{"use strict";function i(e){const a={call:new Set,done:new Set,fail:new Set},s=s=>{try{a.call.forEach((e=>e({payload:s})));const i=e(s);return a.done.forEach((e=>e({payload:s,result:i}))),i}catch(e){throw a.fail.forEach((a=>a({payload:s,error:e}))),e}};return s.attach=e=>()=>s(e),s.unlisten=e=>{a.call.delete(e)},s.listen=e=>(a.call.add(e),()=>s.unlisten(e)),s.done={unlisten:e=>{a.done.delete(e)},listen:e=>(a.done.add(e),()=>s.done.unlisten(e))},s.fail={unlisten:e=>{a.fail.delete(e)},listen:e=>(a.fail.add(e),()=>s.fail.unlisten(e))},s}s.d(a,{o:()=>i})},74434:(e,a,s)=>{"use strict";s.d(a,{I:()=>n});var i=s(23934);const r=e=>new Promise((a=>setTimeout(a,e)));class SocketAdapter{constructor(e){this.config=e,this.activeSocket=null,this.emitter=(0,i.Z)()}connect(){let e=!1,a=!1;return new Promise(((s,i)=>{try{var n;this.activeSocket=new WebSocket(this.config.url);const o=i=>{r(300).then((()=>{e||(a=!0,this.emitter.emit("open",i),s(i))}))},l=a=>{e=!0,4999!==a.code?(this.emitter.emit("close",a),i(a)):this.emitter.emit("closeByUser",a)},c=e=>{this.emitter.emit("error",e)},d=e=>{this.emitter.emit("message",e)};this.activeSocket.addEventListener("open",o,{once:!0}),this.activeSocket.addEventListener("close",l,{once:!0}),this.activeSocket.addEventListener("error",c,{once:!0}),this.activeSocket.addEventListener("message",d);const u=null!==(n=this.config.connectionTimeout)&&void 0!==n?n:5e3;r(u).then((()=>{a||(i(new Error("Socket connection timeout (".concat(u/1e3,"s) expired."))),this.disconnect())}))}catch(e){i(e)}}))}disconnect(){var e;null===(e=this.activeSocket)||void 0===e||e.close(4999),this.activeSocket=null}on(e,a){return this.emitter.on(e,a),()=>this.emitter.off(e,a)}push(e){if(!this.activeSocket)throw new Error("Can't push data to socket, that is not inited yet.");this.activeSocket.send(e)}}const n=e=>new SocketAdapter(e)},3803:(e,a,s)=>{"use strict";s.d(a,{T:()=>n});var i=s(49491),r=s(2243);const n=e=>{const a={emitter:e.emitter},s=Object.entries(e.scheme).reduce(((e,s)=>{let i=r(s,2),n=i[0];const o=(0,i[1])(a),l=o.type;return l in e||(e[l]={}),e[l][n]=o.call,e}),{});return i(i({},s),{},{open:()=>e.emitter.open(),reconnect:()=>e.emitter.reconnect(),close:a=>null!=a&&a.force?e.emitter.breakConnection():e.emitter.close(),on:(a,s)=>e.emitter.on(a,s)})}},88459:(e,a,s)=>{"use strict";s.d(a,{I:()=>c});var i=s(47014),r=s(48410),n=s(28446),o=s(18018);const l=()=>1e3;class SocketConnection{constructor(e){this.config=e,this.connection=null,this.statusChangeQueue=(0,n.y)(),this.status=3,this.semaphore=(0,r.r)()}getStatus(){return this.status}open(){var e=this;return this.statusChangeQueue.enqueue((a=>{return(0,o.t)({abort:a,getRetryTimeout:this.config.reconnectDelay||l,connect:(s=i((function*(){const a=e.config.emitter;e.status=0;try{e.connection=yield e.config.createConnection(),e.connection.on("close",(e=>a.emit("close",e)));const s=yield e.connection.connect();e.status=1,a.emit("open",s),e.connection.on("message",(e=>a.emit("message",e))),e.connection.on("closeByUser",(s=>{e.status=3,a.emit("closeByUser",s)})),e.connection.on("close",(s=>{e.status=3,a.emit("close",s)})),e.connection.on("error",(e=>a.emit("error",e)))}catch(a){throw e.connection=null,a}})),function(){return s.apply(this,arguments)})});var s}))}close(){var e=this;return i((function*(){return e.statusChangeQueue.abortActiveTask(),e.statusChangeQueue.enqueue(i((function*(){e.connection&&(e.status=2,yield e.semaphore.waitForUnlock(),e.connection.disconnect(),e.connection=null,e.status=3)})))}))()}breakConnection(){return this.statusChangeQueue.abortActiveTask().enqueue((()=>{this.connection&&(this.status=2,this.semaphore.clear(),this.connection.disconnect(),this.connection=null,this.status=3)}))}waitForStableStatus(){var e=this;return i((function*(){yield e.statusChangeQueue.waitForEmpty()}))()}push(e){if(1!==this.status||!this.connection)throw new Error("Connection is not opened yet!");this.connection.push(e)}lock(){return this.semaphore.lock()}isOpened(){return 1===this.getStatus()}isConnecting(){return 0===this.getStatus()}isClosing(){return 2===this.getStatus()}isClosed(){return 3===this.getStatus()}}const c=e=>new SocketConnection(e)},48410:(e,a,s)=>{"use strict";s.d(a,{r:()=>r});var i=s(89320);class Semaphore{constructor(){this.resolveListeners=[],this.lockedItems=0}lock(){return this.lockedItems++,()=>{if(this.lockedItems--,0===this.lockedItems){var e,a=i(this.resolveListeners);try{for(a.s();!(e=a.n()).done;){(0,e.value)()}}catch(e){a.e(e)}finally{a.f()}}}}hasLock(){return this.lockedItems>0}waitForUnlock(){return this.hasLock()?new Promise((e=>{this.resolveListeners.push(e)})):Promise.resolve()}clear(){var e,a=i(this.resolveListeners);try{for(a.s();!(e=a.n()).done;){(0,e.value)()}}catch(e){a.e(e)}finally{a.f()}}}const r=()=>new Semaphore},28446:(e,a,s)=>{"use strict";s.d(a,{y:()=>n});var i=s(47014),r=s(23934);class TaskQueue{constructor(){var e=this;this.emitter=(0,r.Z)(),this.tasks=[],this.activeTask=null,this.process=i((function*(){var a;if(e.activeTask||0===e.tasks.length)return;const s=null!==(a=e.tasks.shift())&&void 0!==a?a:null;if(e.activeTask=s,s)try{yield s.executor(s.abortController),e.emitter.emit("done",{task:s})}catch(a){e.emitter.emit("done",{task:s,error:a})}finally{e.activeTask=null,e.tasks.length||e.emitter.emit("empty"),e.process()}}))}enqueue(e){const a={executor:e,abortController:new AbortController};return this.tasks.push(a),this.process(),new Promise(((a,s)=>{const i=r=>{r.task.executor===e&&(this.emitter.off("done",i),r.error?s(r.error):a())};this.emitter.on("done",i)}))}abortActiveTask(){return this.activeTask&&(this.activeTask.abortController.abort(),this.process()),this}waitForEmpty(){return this.activeTask||this.tasks.length?new Promise((e=>{const a=()=>{this.emitter.off("empty",a),e()};this.emitter.on("empty",a)})):Promise.resolve()}}const n=()=>new TaskQueue},18018:(e,a,s)=>{"use strict";s.d(a,{t:()=>r});var i=s(47014);const r=function(){var e=i((function*(e){let a=e.abort,s=e.connect,r=e.getRetryTimeout,n=!1;const o=()=>{n=!0,a.signal.removeEventListener("abort",o)};a.signal.addEventListener("abort",o);const l=function(){var e=i((function*(e){try{if(n)return;return yield s()}catch(s){return yield(a=r(e),new Promise((e=>setTimeout(e,a)))),yield l(e+1)}var a}));return function(a){return e.apply(this,arguments)}}();return l(0)}));return function(a){return e.apply(this,arguments)}}()},46464:(e,a,s)=>{"use strict";s.d(a,{a:()=>n});var i=s(49491),r=s(54829);const n=e=>a=>{let s=a.emitter;return{type:"push",call(a,n){const o=e.map(a,i({event:e.event,type:r.V.push},n||{}));e.skipBatching?s.sendEvents([o]):s.batchEvent(o)}}}},90979:(e,a,s)=>{"use strict";s.d(a,{h:()=>l});var i=s(72155),r=s(54829),n=s(46464),o=s(12647);const l=e=>a=>{var s;const l=null!==(s=e.timeout)&&void 0!==s?s:6e4,c=(0,n.a)({event:e.event,map:e.mapRequest,skipBatching:e.skipBatching})(a),d=(0,o.X)({event:e.event,map:a=>({uuid:a.uuid,response:e.mapResponse(a)})})(a);return{type:"request",call:Object.assign((s=>new Promise(((n,o)=>{const u=a.emitter.isOpened()?a.emitter.lock():null,m=e.uuidFactory?e.uuidFactory():(0,i.x0)(6),p=d.call((e=>{e.uuid===m&&(p(),u&&u(),n(e.response))})),h=a.emitter.on("close",(()=>{u&&u(),h(),p(),o(new Error("Connection is closed, can't complete request ".concat(e.event," with payload ").concat(JSON.stringify(s))))})),v=()=>{u&&u(),h(),p(),o(new Error("Reached socket request timeout for event ".concat(e.event)))};if(a.emitter.isOpened())setTimeout(v,l);else{const e=a.emitter.on("open",(()=>{e(),setTimeout(v,l)}))}c.call(s,{event:e.event,type:r.V.request,uuid:m})}))),{subscribe:e=>d.call((a=>{e(a.response)}))})}}},12647:(e,a,s)=>{"use strict";s.d(a,{X:()=>i});const i=e=>a=>{let s=a.emitter;const i=new Set;return s.on("open",(()=>{var a;0!==i.size&&(null===(a=e.onFirstSubscribe)||void 0===a||a.call(e,{emitter:s},e.event))})),s.on("stale",(()=>{var a;null===(a=e.onLastUnsubscribe)||void 0===a||a.call(e,{emitter:s},e.event)})),{type:"subscribe",call(a){const r=s=>{if(!e.filter||e.filter(s)){const i=e.map(s);a(i,s)}};var n;s.isOpened()&&(0===i.size&&(null===(n=e.onFirstSubscribe)||void 0===n||n.call(e,{emitter:s},e.event)));i.add(r);const o=s.onEvent(e.event,r);return()=>{var a;(i.delete(r),o(),0===i.size)&&(null===(a=e.onLastUnsubscribe)||void 0===a||a.call(e,{emitter:s},e.event))}}}}},55940:(e,a,s)=>{"use strict";s.d(a,{o:()=>r});var i=s(23934);class Batching{constructor(e){this.config=e,this.events=(0,i.Z)(),this.list=[],this.currentTimeFrame=null}size(){return this.list.length}push(e){this.list.push(e),this.currentTimeFrame||(this.currentTimeFrame=setTimeout((()=>{this.flush()}),this.config.timeframe))}flush(){this.currentTimeFrame&&(clearTimeout(this.currentTimeFrame),this.currentTimeFrame=null);const e=Array.from(this.list);return this.list=[],this.events.emit("flush",e),e}onFlush(e){return this.events.on("flush",e),()=>this.events.off("flush",e)}waitForFlush(){return this.list.length?new Promise((e=>{const a=this.onFlush((s=>{a(),e(s)}))})):Promise.resolve([])}}const r=e=>new Batching(e)},98659:(e,a,s)=>{"use strict";s.d(a,{z:()=>c});var i=s(47014),r=s(89320),n=s(23934),o=s(55940),l=s(88459);class SocketEmitter{constructor(e){this.config=e,this.systemEmitter=(0,n.Z)(),this.eventsEmitter=(0,n.Z)(),this.batching=null,this.activeConnection=null,this.staleConnection=null,this.pendingEvents=[],this.pendingRawEvents=[],this.firstConnect=!0,this.handleMessage=e=>{const a=this.config.map.fromRaw(e);var s,i=r(a);try{for(i.s();!(s=i.n()).done;){const e=s.value;this.eventsEmitter.emit(e.event.toString(),e)}}catch(e){i.e(e)}finally{i.f()}},this.handleOpen=e=>{this.firstConnect||this.systemEmitter.emit("restore",e),this.firstConnect=!1},this.handleClose=()=>{this.isOpened()&&this.open()},this.batching=e.batching?(0,o.o)(e.batching):null,e.batching&&(this.batching=(0,o.o)(e.batching),this.batching.onFlush((e=>this.sendEvents(e)))),this.systemEmitter.on("message",this.handleMessage),this.systemEmitter.on("open",this.handleOpen),this.systemEmitter.on("close",this.handleClose)}onEvent(e,a){return this.eventsEmitter.on(e.toString(),a),()=>this.eventsEmitter.off(e.toString(),a)}on(e,a){return this.systemEmitter.on(e,a),()=>this.systemEmitter.off(e,a)}batchEvent(e){this.batching?this.batching.push(e):this.sendEvents([e])}sendEvents(e){const a=this.activeConnection;if(a&&a.isOpened()){const s=this.config.map.toRaw(e);a.push(s)}else this.pendingEvents=this.pendingEvents.concat(e)}sendRaw(e){const a=this.activeConnection;a&&a.isOpened()?a.push(e):this.pendingRawEvents.push(e)}getStatus(){return this.activeConnection?this.activeConnection.getStatus():this.staleConnection?this.staleConnection.getStatus():3}isOpened(){return 1===this.getStatus()}isConnecting(){return 0===this.getStatus()}isClosing(){return 2===this.getStatus()}isClosed(){return 3===this.getStatus()}open(){var e=this;return i((function*(){var a,s;yield null===(a=e.activeConnection)||void 0===a?void 0:a.waitForStableStatus(),null!==(s=e.activeConnection)&&void 0!==s&&s.isOpened()||(e.activeConnection||(e.activeConnection=e.createConnection()),yield e.activeConnection.open(),e.pendingEvents.length&&(e.sendEvents(e.pendingEvents),e.pendingEvents=[]),e.pendingRawEvents.length&&(e.pendingRawEvents.forEach((a=>e.sendRaw(a))),e.pendingRawEvents=[]))}))()}close(){var e=this;return i((function*(){var a;return null===(a=e.activeConnection)||void 0===a?void 0:a.close()}))()}breakConnection(){var e=this;return i((function*(){var a;return null===(a=e.activeConnection)||void 0===a?void 0:a.breakConnection()}))()}reconnect(){var e=this;return i((function*(){return e.staleConnection&&(yield e.staleConnection.waitForStableStatus()),e.activeConnection&&(yield e.activeConnection.waitForStableStatus(),e.staleConnection=e.activeConnection,e.activeConnection=null),e.open().then((()=>{var a,s;if(!e.staleConnection)return;const i=e.activeConnection;return null===(a=e.batching)||void 0===a||a.flush(),e.activeConnection=e.staleConnection,e.systemEmitter.emit("stale"),null===(s=e.batching)||void 0===s||s.flush(),e.staleConnection=e.activeConnection,e.activeConnection=i,e.staleConnection.close().then((()=>{e.staleConnection=null}))}))}))()}lock(){if(this.activeConnection)return this.activeConnection.lock();throw new Error("Socket connection is not established yet.")}createConnection(){return(0,l.I)({createConnection:this.config.createConnection,reconnectDelay:this.config.reconnectDelay,emitter:this.systemEmitter})}}const c=e=>new SocketEmitter(e)},54829:(e,a,s)=>{"use strict";var i;s.d(a,{V:()=>i}),function(e){e[e.push=1]="push",e[e.request=2]="request",e[e.response=3]="response"}(i||(i={}))},6980:(e,a,s)=>{"use strict";s.d(a,{b:()=>d});var i=s(49491),r=s(47014),n=s(7438),o=s(38062);function l(e,a){return c.apply(this,arguments)}function c(){return(c=r((function*(e,a){const s=yield Promise.all(e.map(a));return e.reduce(((e,a,i)=>(void 0!==s[i]&&(e[a.toString()]=s[i]),e)),{})}))).apply(this,arguments)}function d(e){return{plugins:e.plugins||[],request:(a=r((function*(a,s,r){var c;if(!s||!r)throw new Error("Can't start w/o controller");if(r.disposed)throw new Error("Transport already disposed");const d=[...r.getPlugins(),...null!==(c=e.plugins)&&void 0!==c?c:[]];let u={url:e.url,method:e.method,headers:{}};try{u.headers=i(i({},r.getHeaders()),e.headers?e.headers(a):{}),u=yield(0,o.oq)(d,n.e.beforeRequest,u);const c=yield l(a,(e=>(0,o.QM)(d,n.e.readCacheField,{request:u,field:e.toString()}))),m=a.filter((e=>!(e in c)));if(!m.length)return c;const p=e.request({request:u,input:m,abortSignal:s.signal});yield(0,o.ll)(d,n.e.afterRequest,{request:u,promise:p}),yield l(m,(e=>(0,o.ll)(d,n.e.afterRequestField,{request:u,field:e.toString(),promise:p})));const h=yield p,v=yield(0,o.oq)(d,n.e.afterRequestDone,{request:u,input:m,response:h});yield l(m,(e=>(0,o.ll)(d,n.e.afterRequestDoneField,{request:u,field:e.toString(),response:h})));const g=v.response,_=Object.keys(g).filter((e=>m.includes(e))).reduce(((e,a)=>(e[a]=g[a],e)),{});return i(i({},c),_)}catch(a){const s=e.parseError?e.parseError(a,u):r.parseError(a,u);throw yield(0,o.ll)(d,n.e.onError,{request:u||null,error:s}),r.events.emit("error",s),s}})),function(e,s,i){return a.apply(this,arguments)})};var a}},13017:(e,a,s)=>{"use strict";s.d(a,{d:()=>l});var i=s(49491),r=s(47014),n=s(7438),o=s(38062);function l(e){return{plugins:e.plugins||[],request:(a=r((function*(a,s,r){var l;if(!s||!r)throw new Error("Can't start w/o controller");if(r.disposed)throw new Error("Transport already disposed");const c=[...r.getPlugins(),...null!==(l=e.plugins)&&void 0!==l?l:[]];let d={url:"",method:e.method,headers:{}};try{d.url="function"==typeof e.url?e.url(a):e.url,d.headers=i(i({},r.getHeaders()),e.headers?e.headers(a):{}),d=yield(0,o.oq)(c,n.e.beforeRequest,d);const l=yield(0,o.QM)(c,n.e.readCache,{request:d,input:a});if(void 0!==l)return Promise.resolve(l);const u=e.request({request:d,input:a,abortSignal:s.signal});yield(0,o.ll)(c,n.e.afterRequest,{request:d,promise:u});const m=yield u;return(yield(0,o.oq)(c,n.e.afterRequestDone,{request:d,input:a,response:m})).response}catch(a){const s=e.parseError?e.parseError(a,d):r.parseError(a,d);throw yield(0,o.ll)(c,n.e.onError,{request:d||null,error:s}),r.events.emit("error",s),s}})),function(e,s,i){return a.apply(this,arguments)})};var a}},42230:(e,a,s)=>{"use strict";s.d(a,{q:()=>n});var i=s(84692);function r(e,a){const s=new Set;return(i,r)=>{const n=null!=r?r:new AbortController,o=Promise.all(Array.from(s)).catch((()=>{})).then((()=>e.request(i,n,a))).finally((()=>{a.abortSignals.delete(o),s.delete(o)}));return a.abortSignals.set(o,n),s.add(o),o}}function n(e){const a=new i.P(e),s={events:a.events,caughtErrors:a.caughtErrors,abort:e=>{const s=a.abortSignals.get(e);s&&(s.abort(),a.abortSignals.delete(e))},dispose(){a.dispose();const s=Object.values(e.scheme).reduce(((e,a)=>e.concat(a.plugins)),[]),i=(e.plugins||[]).concat(s);return Promise.all(i.map((e=>e.dispose())))}},n=e.scheme;for(const e in n){const i=n[e];i&&(s[e]=r(i,a))}return s}},22128:(e,a,s)=>{"use strict";s.d(a,{P:()=>TransportError});class TransportError extends Error{constructor(e,a,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e),this.url=a,this.status=s,this.meta=i}static fromError(e,a,s){const i=new TransportError(e.message,a,s);return i.stack=e.stack,i}}},7438:(e,a,s)=>{"use strict";var i;s.d(a,{e:()=>i}),function(e){e.beforeRequest="beforeRequest",e.readCache="readCache",e.readCacheField="readCacheField",e.afterRequest="afterRequest",e.afterRequestField="afterRequestField",e.afterRequestDone="afterRequestDone",e.afterRequestDoneField="afterRequestDoneField",e.onError="onError"}(i||(i={}))},38062:(e,a,s)=>{"use strict";s.d(a,{QM:()=>r,ac:()=>TransportPlugin,ll:()=>o,oq:()=>l});var i=s(47014);class TransportPlugin{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=e,this.hooks=new Map}getName(){var e;return null!==(e=this.config.name)&&void 0!==e?e:this.constructor.name}callHook(e,a){const s=this.hooks.get(e);return s?s(a):Promise.resolve(void 0)}hasHook(e){return this.hooks.has(e)}dispose(){return this.hooks.clear(),this.config.onDispose?this.config.onDispose():Promise.resolve()}registerHook(e,a){this.hooks.set(e,a)}}function r(e,a,s){return n.apply(this,arguments)}function n(){return(n=i((function*(e,a,s){for(let i=0;i<e.length;i++){const r=e[i];try{if(!r.hasHook(a))continue;const e=yield r.callHook(a,s);if(void 0===e)continue;return e}catch(e){console.error(r.getName(),e)}}}))).apply(this,arguments)}function o(e,a,s){const i=[];for(let r=0;r<e.length;r++){const n=e[r];try{if(!n.hasHook(a))continue;i.push(n.callHook(a,s))}catch(e){console.error(n.getName(),e)}}return Promise.all(i).then((()=>{}))}function l(e,a,s){return c.apply(this,arguments)}function c(){return(c=i((function*(e,a,s){let i=s;for(let s=0;s<e.length;s++){const r=e[s];try{if(!r.hasHook(a))continue;const e=yield r.callHook(a,i);if(void 0===e)continue;i=e}catch(e){console.error(r.getName(),e)}}return i}))).apply(this,arguments)}},87500:(e,a,s)=>{"use strict";s.d(a,{Z:()=>AggregationCache});var i=s(47014),r=s(38062),n=s(7438),o=s(83183);class AggregationCache extends r.ac{constructor(e){var a;super({onDispose:()=>this.invalidate()}),this.cacheConfig=e;const s=e.storage,r=e.keys,l=null===(a=e.suppressError)||void 0===a||a;this.registerHook(n.e.readCacheField,(e=>{let a=e.request,i=e.field;if(r.includes(i)){const e=(0,o.u)(a,i);try{return s.get(e)}catch(e){if(l)return void console.error(e);throw e}}})),this.registerHook(n.e.afterRequestDoneField,function(){var e=i((function*(e){if(r.includes(e.field)){const a=(0,o.u)(e.request,e.field),i=yield s.set(a,e.response[e.field]);if(i){const e=new Error("[".concat(i.type,"] ").concat(i.message));if(!l)throw e;console.error(e)}}return e}));return function(a){return e.apply(this,arguments)}}())}invalidate(){var e=this;return i((function*(){const a=e.cacheConfig.storage,s=yield a.clear();if(s)throw s}))()}delete(e){var a=this;return i((function*(){const s=a.cacheConfig.storage,i=yield s.delete(e);if(i)throw i}))()}}},83183:(e,a,s)=>{"use strict";s.d(a,{C:()=>Cache,u:()=>o});var i=s(47014),r=s(7438),n=s(38062);const o=(e,a)=>{var s;return"".concat(e.method,"_").concat(e.url,"_").concat(JSON.stringify(null!==(s=e.headers)&&void 0!==s?s:{}),"_").concat(JSON.stringify(null!=a?a:{}))};class Cache extends n.ac{constructor(e){var a;super({onDispose:()=>this.invalidate()}),this.cacheConfig=e;const s=e.storage,n=e.createKey,l=null===(a=e.suppressError)||void 0===a||a,c=n||o;this.registerHook(r.e.readCache,(e=>{let a=e.request,i=e.input;const r=c(a,i);try{return s.get(r)}catch(e){if(l)return void console.error(e);throw e}})),this.registerHook(r.e.afterRequestDone,function(){var e=i((function*(e){const a=c(e.request,e.input),i=yield s.set(a,e.response);if(i){const e=new Error("[".concat(i.type,"] ").concat(i.message));if(!l)throw e;console.error(e)}return e}));return function(a){return e.apply(this,arguments)}}())}invalidate(){var e=this;return i((function*(){const a=e.cacheConfig.storage,s=yield a.clear();if(s)throw s}))()}delete(e){var a=this;return i((function*(){const s=a.cacheConfig.storage,i=yield s.delete(e);if(i)throw i}))()}}},77417:(e,a,s)=>{"use strict";s.d(a,{D:()=>ModifyRequest});var i=s(38062),r=s(7438);class ModifyRequest extends i.ac{constructor(e){super();const a=e.beforeRequest;this.registerHook(r.e.beforeRequest,a)}}},84692:(e,a,s)=>{"use strict";s.d(a,{P:()=>TransportController});var i=s(89320),r=s(23934);class TransportController{constructor(e){var a;this.events=(0,r.Z)(),this.caughtErrors=[],this.abortSignals=new Map,this.disposed=!1;const s=null!==(a=e.plugins)&&void 0!==a?a:[];this.getHeaders=e.headers||(()=>({})),this.parseError=e.parseError,this.getPlugins=()=>s;const n=e=>{this.caughtErrors.push(e)};this.events.on("error",n),this.dispose=()=>{this.disposed=!0,this.events.off("error",n);var e,a=i(this.abortSignals.values());try{for(a.s();!(e=a.n()).done;){e.value.abort()}}catch(e){a.e(e)}finally{a.f()}}}}},30130:e=>{"use strict";e.exports={u:1540993539}},12183:e=>{"use strict";e.exports={}},84115:e=>{"use strict";e.exports=JSON.parse('{"EURUSD":{"id":"EURUSD","locked":false,"locked_reason":"","active":true,"winperc":79,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":1,"def_order":1,"title":"EUR USD","name":"EURUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"ETCUSD":{"id":"ETCUSD","locked":false,"locked_reason":"","active":false,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":2,"def_order":75,"title":"Ethereum Classic","name":"ETCUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDJPY":{"id":"USDJPY","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":3,"def_order":3,"title":"USD JPY","name":"USDJPY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"AUDUSD":{"id":"AUDUSD","locked":false,"locked_reason":"","active":true,"winperc":83,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":4,"def_order":4,"title":"AUD USD","name":"AUDUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDCAD":{"id":"USDCAD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":5,"def_order":5,"title":"USD CAD","name":"USDCAD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDCHF":{"id":"USDCHF","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":6,"def_order":6,"title":"USD CHF","name":"USDCHF","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDCLP":{"id":"USDCLP","locked":true,"locked_reason":"schedule","active":true,"winperc":80,"sentiment":50,"time_open":1548765000,"time_close":1548693000,"order":7,"def_order":7,"title":"USD CLP","name":"USDCLP","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDMXN":{"id":"USDMXN","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":8,"def_order":8,"title":"USD MXN","name":"USDMXN","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDNOK":{"id":"USDNOK","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":9,"def_order":9,"title":"USD NOK","name":"USDNOK","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDRUB":{"id":"USDRUB","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1548831600,"time_close":1548784800,"order":10,"def_order":10,"title":"USD RUB","name":"USDRUB","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDSGD":{"id":"USDSGD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":11,"def_order":11,"title":"USD SGD","name":"USDSGD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"USDTRY":{"id":"USDTRY","locked":false,"locked_reason":"","active":true,"winperc":25,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":12,"def_order":12,"title":"USD TRY","name":"USDTRY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"EURAUD":{"id":"EURAUD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":13,"def_order":13,"title":"EUR AUD","name":"EURAUD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"EURCAD":{"id":"EURCAD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":14,"def_order":14,"title":"EUR CAD","name":"EURCAD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"EURCHF":{"id":"EURCHF","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":15,"def_order":15,"title":"EUR CHF","name":"EURCHF","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"EURGBP":{"id":"EURGBP","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":16,"def_order":16,"title":"EUR GBP","name":"EURGBP","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"EURJPY":{"id":"EURJPY","locked":false,"locked_reason":"","active":true,"winperc":10,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":17,"def_order":17,"title":"EUR JPY","name":"EURJPY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"EURNZD":{"id":"EURNZD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":18,"def_order":18,"title":"EUR NZD","name":"EURNZD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"EURRUB":{"id":"EURRUB","locked":false,"locked_reason":"","active":true,"winperc":34,"sentiment":50,"time_open":1548831900,"time_close":1548781200,"order":19,"def_order":19,"title":"EUR RUB","name":"EURRUB","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"AUDCAD":{"id":"AUDCAD","locked":false,"locked_reason":"","active":true,"winperc":10,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":20,"def_order":20,"title":"AUD CAD","name":"AUDCAD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"AUDCHF":{"id":"AUDCHF","locked":true,"locked_reason":"schedule","active":true,"winperc":80,"sentiment":50,"time_open":1551434760,"time_close":1547633160,"order":21,"def_order":21,"title":"AUD CHF","name":"AUDCHF","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"AUDJPY":{"id":"AUDJPY","locked":true,"locked_reason":"schedule","active":true,"winperc":80,"sentiment":50,"time_open":1548929220,"time_close":1547633220,"order":22,"def_order":22,"title":"AUD JPY","name":"AUDJPY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":3,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"AUDNZD":{"id":"AUDNZD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":23,"def_order":23,"title":"AUD NZD","name":"AUDNZD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"CADCHF":{"id":"CADCHF","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":24,"def_order":24,"title":"CAD CHF","name":"CADCHF","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"CADJPY":{"id":"CADJPY","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":25,"def_order":25,"title":"CAD JPY","name":"CADJPY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"CHFJPY":{"id":"CHFJPY","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":26,"def_order":26,"title":"CHF JPY","name":"CHFJPY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"GBPAUD":{"id":"GBPAUD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":27,"def_order":27,"title":"GBP AUD","name":"GBPAUD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"GBPCAD":{"id":"GBPCAD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":28,"def_order":28,"title":"GBP CAD","name":"GBPCAD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"GBPCHF":{"id":"GBPCHF","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":29,"def_order":29,"title":"GBP CHF","name":"GBPCHF","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"GBPJPY":{"id":"GBPJPY","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":30,"def_order":30,"title":"GBP JPY","name":"GBPJPY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"GBPNZD":{"id":"GBPNZD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":31,"def_order":31,"title":"GBP NZD","name":"GBPNZD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NZDCAD":{"id":"NZDCAD","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":32,"def_order":32,"title":"NZD CAD","name":"NZDCAD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NZDCHF":{"id":"NZDCHF","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":33,"def_order":33,"title":"NZD CHF","name":"NZDCHF","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NZDJPY":{"id":"NZDJPY","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":34,"def_order":34,"title":"NZD JPY","name":"NZDJPY","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NZDUSD":{"id":"NZDUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":35,"def_order":35,"title":"NZD USD","name":"NZDUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"XAUUSD":{"id":"XAUUSD","locked":false,"locked_reason":"","active":true,"winperc":10,"sentiment":50,"time_open":1548803100,"time_close":1548799200,"order":36,"def_order":36,"title":"Gold","name":"XAUUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"raw","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"XAGUSD":{"id":"XAGUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548803100,"time_close":1548799200,"order":37,"def_order":37,"title":"Silver","name":"XAGUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"raw","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"_BRN":{"id":"_BRN","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548806700,"time_close":1548799200,"order":38,"def_order":38,"title":"BRENT","name":"_BRN","long_deal":false,"min_duration":300,"max_duration":10800,"group":"raw","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"PL":{"id":"PL","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548803100,"time_close":1548799200,"order":39,"def_order":39,"title":"Platinum","name":"PL","long_deal":false,"min_duration":900,"max_duration":10800,"group":"raw","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"HG":{"id":"HG","locked":false,"locked_reason":"","active":true,"winperc":10,"sentiment":50,"time_open":1548803100,"time_close":1548799200,"order":40,"def_order":40,"title":"Copper","name":"HG","long_deal":false,"min_duration":300,"max_duration":10800,"group":"raw","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NG":{"id":"NG","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548802800,"time_close":1548799500,"order":41,"def_order":41,"title":"Natural Gas","name":"NG","long_deal":false,"min_duration":900,"max_duration":10800,"group":"raw","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"TSLA":{"id":"TSLA","locked":true,"locked_reason":"schedule","active":true,"winperc":80,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":42,"def_order":42,"title":"Tesla","name":"TSLA","long_deal":false,"min_duration":300,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"GOOGL":{"id":"GOOGL","locked":true,"locked_reason":"schedule","active":true,"winperc":80,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":43,"def_order":43,"title":"Google","name":"GOOGL","long_deal":false,"min_duration":60,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"AAPL":{"id":"AAPL","locked":true,"locked_reason":"schedule","active":true,"winperc":80,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":44,"def_order":44,"title":"Apple","name":"AAPL","long_deal":false,"min_duration":900,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"V":{"id":"V","locked":true,"locked_reason":"schedule","active":true,"winperc":30,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":45,"def_order":45,"title":"Visa","name":"V","long_deal":false,"min_duration":300,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"BMW":{"id":"BMW","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548835200,"time_close":1548779400,"order":46,"def_order":46,"title":"BMW","name":"BMW","long_deal":false,"min_duration":60,"max_duration":10800,"group":"stock","precision":2,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NINTENDO_JP":{"id":"NINTENDO_JP","locked":true,"locked_reason":"schedule","active":true,"winperc":30,"sentiment":50,"time_open":1548806400,"time_close":1548741300,"order":47,"def_order":47,"title":"NINTENDO","name":"NINTENDO_JP","long_deal":false,"min_duration":900,"max_duration":10800,"group":"stock","precision":0,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"FB":{"id":"FB","locked":true,"locked_reason":"schedule","active":true,"winperc":30,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":48,"def_order":48,"title":"Facebook","name":"FB","long_deal":false,"min_duration":60,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"IBM":{"id":"IBM","locked":true,"locked_reason":"schedule","active":true,"winperc":30,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":49,"def_order":49,"title":"IBM","name":"IBM","long_deal":false,"min_duration":300,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"MCD":{"id":"MCD","locked":true,"locked_reason":"schedule","active":true,"winperc":30,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":50,"def_order":50,"title":"McDonald\'s","name":"MCD","long_deal":false,"min_duration":900,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"BA":{"id":"BA","locked":true,"locked_reason":"schedule","active":true,"winperc":80,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":51,"def_order":51,"title":"Boeing","name":"BA","long_deal":false,"min_duration":300,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"MSFT":{"id":"MSFT","locked":true,"locked_reason":"schedule","active":true,"winperc":30,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":52,"def_order":52,"title":"Microsoft","name":"MSFT","long_deal":false,"min_duration":300,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"SBUX":{"id":"SBUX","locked":true,"locked_reason":"schedule","active":true,"winperc":10,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":53,"def_order":53,"title":"Starbucks","name":"SBUX","long_deal":false,"min_duration":900,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"KO":{"id":"KO","locked":true,"locked_reason":"schedule","active":true,"winperc":10,"sentiment":50,"time_open":1548772200,"time_close":1548708900,"order":54,"def_order":54,"title":"Coca-Cola","name":"KO","long_deal":false,"min_duration":900,"max_duration":10800,"group":"stock","precision":2,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"FDAX":{"id":"FDAX","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1548831900,"time_close":1548795300,"order":55,"def_order":55,"title":"DAX","name":"FDAX","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":2,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NQ":{"id":"NQ","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1548797400,"time_close":1548796500,"order":56,"def_order":56,"title":"NASDAQ","name":"NQ","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"YM":{"id":"YM","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548797400,"time_close":1548796500,"order":57,"def_order":57,"title":"Dow Jones","name":"YM","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"Z":{"id":"Z","locked":false,"locked_reason":"","active":true,"winperc":80,"sentiment":50,"time_open":1548835500,"time_close":1548795300,"order":58,"def_order":58,"title":"FTSE 100","name":"Z","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"FCE":{"id":"FCE","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548831900,"time_close":1548795300,"order":59,"def_order":59,"title":"CAC 40","name":"FCE","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"ES":{"id":"ES","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548797400,"time_close":1548796500,"order":60,"def_order":60,"title":"S&P 500","name":"ES","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":2,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"NKD":{"id":"NKD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548797400,"time_close":1548796500,"order":61,"def_order":61,"title":"Nikkei 225","name":"NKD","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"TF":{"id":"TF","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548797400,"time_close":1548796500,"order":62,"def_order":62,"title":"RUSSELL 2000","name":"TF","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"HSI":{"id":"HSI","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548810900,"time_close":1548776400,"order":63,"def_order":63,"title":"Hang Seng Index","name":"HSI","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":0,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"FESX":{"id":"FESX","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1548831900,"time_close":1548795300,"order":64,"def_order":64,"title":"EURO STOXX 50","name":"FESX","long_deal":false,"min_duration":60,"max_duration":10800,"group":"index","precision":1,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"Bitcoin":{"id":"Bitcoin","locked":false,"locked_reason":"","active":true,"winperc":79,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":65,"def_order":65,"title":"Bitcoin","name":"Bitcoin","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":3,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"ETHUSD":{"id":"ETHUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":66,"def_order":66,"title":"Ethereum","name":"ETHUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":2,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"ETHBTC":{"id":"ETHBTC","locked":false,"locked_reason":"","active":true,"winperc":10,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":67,"def_order":67,"title":"ETH BTC","name":"ETHBTC","long_deal":true,"min_duration":300,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"LTCBTC":{"id":"LTCBTC","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":68,"def_order":68,"title":"LTC BTC","name":"LTCBTC","long_deal":true,"min_duration":900,"max_duration":82800,"group":"crypto","precision":6,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"BCHUSD":{"id":"BCHUSD","locked":true,"locked_reason":"schedule","active":true,"winperc":30,"sentiment":50,"time_open":1549015440,"time_close":1543226640,"order":69,"def_order":69,"title":"Bitcoin Cash","name":"BCHUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":true,"locked_trading_reason":"schedule","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"XRPUSD":{"id":"XRPUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":70,"def_order":70,"title":"Ripple","name":"XRPUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"DASHUSD":{"id":"DASHUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":71,"def_order":71,"title":"Dash","name":"DASHUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"BTGUSD":{"id":"BTGUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":72,"def_order":72,"title":"Bitcoin Gold","name":"BTGUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"LTCUSD":{"id":"LTCUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":73,"def_order":73,"title":"Litecoin","name":"LTCUSD","long_deal":true,"min_duration":300,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"XMRUSD":{"id":"XMRUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":74,"def_order":74,"title":"Monero","name":"XMRUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"ZECUSD":{"id":"ZECUSD","locked":false,"locked_reason":"","active":true,"winperc":30,"sentiment":50,"time_open":1549231200,"time_close":1549227600,"order":75,"def_order":76,"title":"Zcash","name":"ZECUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"crypto","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0},"GBPUSD":{"id":"GBPUSD","locked":false,"locked_reason":"","active":true,"winperc":83,"sentiment":50,"time_open":1549231200,"time_close":1549054800,"order":76,"def_order":2,"title":"GBP USD","name":"GBPUSD","long_deal":true,"min_duration":60,"max_duration":82800,"group":"currency","precision":5,"locked_trading":false,"locked_trading_reason":"","min_amount":1,"max_amount":5000,"time_close_trading":0,"time_open_trading":0}}')}},e=>{e.O(0,[5514,2545,3170,5778,8354,778,2525,3990,5510,3279,5886,1449,9469],(()=>{return a=12240,e(e.s=a);var a}));e.O()}]);